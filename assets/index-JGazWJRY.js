var jHe=Object.defineProperty;var zHe=(e,t,n)=>t in e?jHe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var UHe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ru=(e,t,n)=>(zHe(e,typeof t!="symbol"?t+"":t,n),n);var aEn=UHe((_xn,Nne)=>{function VHe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function HHe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var abe={exports:{}},wM={},ube={exports:{}},Rn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OC=Symbol.for("react.element"),qHe=Symbol.for("react.portal"),WHe=Symbol.for("react.fragment"),GHe=Symbol.for("react.strict_mode"),YHe=Symbol.for("react.profiler"),KHe=Symbol.for("react.provider"),XHe=Symbol.for("react.context"),QHe=Symbol.for("react.forward_ref"),JHe=Symbol.for("react.suspense"),ZHe=Symbol.for("react.memo"),eqe=Symbol.for("react.lazy"),vie=Symbol.iterator;function tqe(e){return e===null||typeof e!="object"?null:(e=vie&&e[vie]||e["@@iterator"],typeof e=="function"?e:null)}var lbe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cbe=Object.assign,fbe={};function wE(e,t,n){this.props=e,this.context=t,this.refs=fbe,this.updater=n||lbe}wE.prototype.isReactComponent={};wE.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wE.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dbe(){}dbe.prototype=wE.prototype;function CW(e,t,n){this.props=e,this.context=t,this.refs=fbe,this.updater=n||lbe}var IW=CW.prototype=new dbe;IW.constructor=CW;cbe(IW,wE.prototype);IW.isPureReactComponent=!0;var _ie=Array.isArray,hbe=Object.prototype.hasOwnProperty,OW={current:null},pbe={key:!0,ref:!0,__self:!0,__source:!0};function mbe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)hbe.call(t,r)&&!pbe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:OC,type:e,key:s,ref:o,props:i,_owner:OW.current}}function nqe(e,t){return{$$typeof:OC,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function PW(e){return typeof e=="object"&&e!==null&&e.$$typeof===OC}function rqe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var bie=/\/+/g;function E8(e,t){return typeof e=="object"&&e!==null&&e.key!=null?rqe(""+e.key):t.toString(36)}function Ik(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case OC:case qHe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+E8(o,0):r,_ie(i)?(n="",e!=null&&(n=e.replace(bie,"$&/")+"/"),Ik(i,t,n,"",function(l){return l})):i!=null&&(PW(i)&&(i=nqe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(bie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",_ie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+E8(s,a);o+=Ik(s,t,n,u,i)}else if(u=tqe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+E8(s,a++),o+=Ik(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function AO(e,t,n){if(e==null)return e;var r=[],i=0;return Ik(e,r,"","",function(s){return t.call(n,s,i++)}),r}function iqe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $a={current:null},Ok={transition:null},sqe={ReactCurrentDispatcher:$a,ReactCurrentBatchConfig:Ok,ReactCurrentOwner:OW};Rn.Children={map:AO,forEach:function(e,t,n){AO(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return AO(e,function(){t++}),t},toArray:function(e){return AO(e,function(t){return t})||[]},only:function(e){if(!PW(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Rn.Component=wE;Rn.Fragment=WHe;Rn.Profiler=YHe;Rn.PureComponent=CW;Rn.StrictMode=GHe;Rn.Suspense=JHe;Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sqe;Rn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=cbe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=OW.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)hbe.call(t,u)&&!pbe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:OC,type:e.type,key:i,ref:s,props:r,_owner:o}};Rn.createContext=function(e){return e={$$typeof:XHe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:KHe,_context:e},e.Consumer=e};Rn.createElement=mbe;Rn.createFactory=function(e){var t=mbe.bind(null,e);return t.type=e,t};Rn.createRef=function(){return{current:null}};Rn.forwardRef=function(e){return{$$typeof:QHe,render:e}};Rn.isValidElement=PW;Rn.lazy=function(e){return{$$typeof:eqe,_payload:{_status:-1,_result:e},_init:iqe}};Rn.memo=function(e,t){return{$$typeof:ZHe,type:e,compare:t===void 0?null:t}};Rn.startTransition=function(e){var t=Ok.transition;Ok.transition={};try{e()}finally{Ok.transition=t}};Rn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Rn.useCallback=function(e,t){return $a.current.useCallback(e,t)};Rn.useContext=function(e){return $a.current.useContext(e)};Rn.useDebugValue=function(){};Rn.useDeferredValue=function(e){return $a.current.useDeferredValue(e)};Rn.useEffect=function(e,t){return $a.current.useEffect(e,t)};Rn.useId=function(){return $a.current.useId()};Rn.useImperativeHandle=function(e,t,n){return $a.current.useImperativeHandle(e,t,n)};Rn.useInsertionEffect=function(e,t){return $a.current.useInsertionEffect(e,t)};Rn.useLayoutEffect=function(e,t){return $a.current.useLayoutEffect(e,t)};Rn.useMemo=function(e,t){return $a.current.useMemo(e,t)};Rn.useReducer=function(e,t,n){return $a.current.useReducer(e,t,n)};Rn.useRef=function(e){return $a.current.useRef(e)};Rn.useState=function(e){return $a.current.useState(e)};Rn.useSyncExternalStore=function(e,t,n){return $a.current.useSyncExternalStore(e,t,n)};Rn.useTransition=function(){return $a.current.useTransition()};Rn.version="18.2.0";ube.exports=Rn;var A=ube.exports;const L=pl(A),I1=VHe({__proto__:null,default:L},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oqe=A,aqe=Symbol.for("react.element"),uqe=Symbol.for("react.fragment"),lqe=Object.prototype.hasOwnProperty,cqe=oqe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fqe={key:!0,ref:!0,__self:!0,__source:!0};function gbe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)lqe.call(t,r)&&!fqe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:aqe,type:e,key:s,ref:o,props:i,_owner:cqe.current}}wM.Fragment=uqe;wM.jsx=gbe;wM.jsxs=gbe;abe.exports=wM;var R=abe.exports,M7={},ybe={exports:{}},ml={},vbe={exports:{}},_be={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,G){var U=j.length;j.push(G);e:for(;0<U;){var P=U-1>>>1,k=j[P];if(0<i(k,G))j[P]=G,j[U]=k,U=P;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var G=j[0],U=j.pop();if(U!==G){j[0]=U;e:for(var P=0,k=j.length,H=k>>>1;P<H;){var M=2*(P+1)-1,F=j[M],J=M+1,se=j[J];if(0>i(F,U))J<k&&0>i(se,F)?(j[P]=se,j[J]=U,P=J):(j[P]=F,j[M]=U,P=M);else if(J<k&&0>i(se,U))j[P]=se,j[J]=U,P=J;else break e}}return G}function i(j,G){var U=j.sortIndex-G.sortIndex;return U!==0?U:j.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(j){for(var G=n(l);G!==null;){if(G.callback===null)r(l);else if(G.startTime<=j)r(l),G.sortIndex=G.expirationTime,t(u,G);else break;G=n(l)}}function b(j){if(m=!1,_(j),!p)if(n(u)!==null)p=!0,B(E);else{var G=n(l);G!==null&&V(b,G.startTime-j)}}function E(j,G){p=!1,m&&(m=!1,y(S),S=-1),h=!0;var U=d;try{for(_(G),f=n(u);f!==null&&(!(f.expirationTime>G)||j&&!O());){var P=f.callback;if(typeof P=="function"){f.callback=null,d=f.priorityLevel;var k=P(f.expirationTime<=G);G=e.unstable_now(),typeof k=="function"?f.callback=k:f===n(u)&&r(u),_(G)}else r(u);f=n(u)}if(f!==null)var H=!0;else{var M=n(l);M!==null&&V(b,M.startTime-G),H=!1}return H}finally{f=null,d=U,h=!1}}var w=!1,x=null,S=-1,I=5,C=-1;function O(){return!(e.unstable_now()-C<I)}function z(){if(x!==null){var j=e.unstable_now();C=j;var G=!0;try{G=x(!0,j)}finally{G?N():(w=!1,x=null)}}else w=!1}var N;if(typeof v=="function")N=function(){v(z)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,D=$.port2;$.port1.onmessage=z,N=function(){D.postMessage(null)}}else N=function(){g(z,0)};function B(j){x=j,w||(w=!0,N())}function V(j,G){S=g(function(){j(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,B(E))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(j){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var U=d;d=G;try{return j()}finally{d=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,G){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var U=d;d=j;try{return G()}finally{d=U}},e.unstable_scheduleCallback=function(j,G,U){var P=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?P+U:P):U=P,j){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=U+k,j={id:c++,callback:G,priorityLevel:j,startTime:U,expirationTime:k,sortIndex:-1},U>P?(j.sortIndex=U,t(l,j),n(u)===null&&j===n(l)&&(m?(y(S),S=-1):m=!0,V(b,U-P))):(j.sortIndex=k,t(u,j),p||h||(p=!0,B(E))),j},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(j){var G=d;return function(){var U=d;d=G;try{return j.apply(this,arguments)}finally{d=U}}}})(_be);vbe.exports=_be;var dqe=vbe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bbe=A,rl=dqe;function qe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wbe=new Set,L2={};function _v(e,t){iw(e,t),iw(e+"Capture",t)}function iw(e,t){for(L2[e]=t,e=0;e<t.length;e++)wbe.add(t[e])}var bp=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),F7=Object.prototype.hasOwnProperty,hqe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wie={},Eie={};function pqe(e){return F7.call(Eie,e)?!0:F7.call(wie,e)?!1:hqe.test(e)?Eie[e]=!0:(wie[e]=!0,!1)}function mqe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gqe(e,t,n,r){if(t===null||typeof t>"u"||mqe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ra(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var wo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wo[e]=new Ra(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wo[t]=new Ra(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wo[e]=new Ra(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wo[e]=new Ra(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wo[e]=new Ra(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wo[e]=new Ra(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wo[e]=new Ra(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wo[e]=new Ra(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wo[e]=new Ra(e,5,!1,e.toLowerCase(),null,!1,!1)});var kW=/[\-:]([a-z])/g;function $W(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(kW,$W);wo[t]=new Ra(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(kW,$W);wo[t]=new Ra(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(kW,$W);wo[t]=new Ra(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wo[e]=new Ra(e,1,!1,e.toLowerCase(),null,!1,!1)});wo.xlinkHref=new Ra("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wo[e]=new Ra(e,1,!1,e.toLowerCase(),null,!0,!0)});function RW(e,t,n,r){var i=wo.hasOwnProperty(t)?wo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gqe(t,n,i,r)&&(n=null),r||i===null?pqe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Wp=bbe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,CO=Symbol.for("react.element"),V_=Symbol.for("react.portal"),H_=Symbol.for("react.fragment"),NW=Symbol.for("react.strict_mode"),B7=Symbol.for("react.profiler"),Ebe=Symbol.for("react.provider"),xbe=Symbol.for("react.context"),DW=Symbol.for("react.forward_ref"),j7=Symbol.for("react.suspense"),z7=Symbol.for("react.suspense_list"),LW=Symbol.for("react.memo"),Am=Symbol.for("react.lazy"),Sbe=Symbol.for("react.offscreen"),xie=Symbol.iterator;function Lx(e){return e===null||typeof e!="object"?null:(e=xie&&e[xie]||e["@@iterator"],typeof e=="function"?e:null)}var bi=Object.assign,x8;function zS(e){if(x8===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);x8=t&&t[1]||""}return`
`+x8+e}var S8=!1;function T8(e,t){if(!e||S8)return"";S8=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{S8=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?zS(e):""}function yqe(e){switch(e.tag){case 5:return zS(e.type);case 16:return zS("Lazy");case 13:return zS("Suspense");case 19:return zS("SuspenseList");case 0:case 2:case 15:return e=T8(e.type,!1),e;case 11:return e=T8(e.type.render,!1),e;case 1:return e=T8(e.type,!0),e;default:return""}}function U7(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H_:return"Fragment";case V_:return"Portal";case B7:return"Profiler";case NW:return"StrictMode";case j7:return"Suspense";case z7:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xbe:return(e.displayName||"Context")+".Consumer";case Ebe:return(e._context.displayName||"Context")+".Provider";case DW:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case LW:return t=e.displayName||null,t!==null?t:U7(e.type)||"Memo";case Am:t=e._payload,e=e._init;try{return U7(e(t))}catch{}}return null}function vqe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U7(t);case 8:return t===NW?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fg(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tbe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _qe(e){var t=Tbe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function IO(e){e._valueTracker||(e._valueTracker=_qe(e))}function Abe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Tbe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function X$(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function V7(e,t){var n=t.checked;return bi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Sie(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Fg(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Cbe(e,t){t=t.checked,t!=null&&RW(e,"checked",t,!1)}function H7(e,t){Cbe(e,t);var n=Fg(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?q7(e,t.type,n):t.hasOwnProperty("defaultValue")&&q7(e,t.type,Fg(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Tie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function q7(e,t,n){(t!=="number"||X$(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var US=Array.isArray;function vb(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Fg(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function W7(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(qe(91));return bi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Aie(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(qe(92));if(US(n)){if(1<n.length)throw Error(qe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Fg(n)}}function Ibe(e,t){var n=Fg(t.value),r=Fg(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Cie(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Obe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function G7(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Obe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var OO,Pbe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(OO=OO||document.createElement("div"),OO.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=OO.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function M2(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var $T={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bqe=["Webkit","ms","Moz","O"];Object.keys($T).forEach(function(e){bqe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$T[t]=$T[e]})});function kbe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||$T.hasOwnProperty(e)&&$T[e]?(""+t).trim():t+"px"}function $be(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=kbe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var wqe=bi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Y7(e,t){if(t){if(wqe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(qe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(qe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(qe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(qe(62))}}function K7(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X7=null;function MW(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Q7=null,_b=null,bb=null;function Iie(e){if(e=$C(e)){if(typeof Q7!="function")throw Error(qe(280));var t=e.stateNode;t&&(t=AM(t),Q7(e.stateNode,e.type,t))}}function Rbe(e){_b?bb?bb.push(e):bb=[e]:_b=e}function Nbe(){if(_b){var e=_b,t=bb;if(bb=_b=null,Iie(e),t)for(e=0;e<t.length;e++)Iie(t[e])}}function Dbe(e,t){return e(t)}function Lbe(){}var A8=!1;function Mbe(e,t,n){if(A8)return e(t,n);A8=!0;try{return Dbe(e,t,n)}finally{A8=!1,(_b!==null||bb!==null)&&(Lbe(),Nbe())}}function F2(e,t){var n=e.stateNode;if(n===null)return null;var r=AM(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(qe(231,t,typeof n));return n}var J7=!1;if(bp)try{var Mx={};Object.defineProperty(Mx,"passive",{get:function(){J7=!0}}),window.addEventListener("test",Mx,Mx),window.removeEventListener("test",Mx,Mx)}catch{J7=!1}function Eqe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var RT=!1,Q$=null,J$=!1,Z7=null,xqe={onError:function(e){RT=!0,Q$=e}};function Sqe(e,t,n,r,i,s,o,a,u){RT=!1,Q$=null,Eqe.apply(xqe,arguments)}function Tqe(e,t,n,r,i,s,o,a,u){if(Sqe.apply(this,arguments),RT){if(RT){var l=Q$;RT=!1,Q$=null}else throw Error(qe(198));J$||(J$=!0,Z7=l)}}function bv(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Fbe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Oie(e){if(bv(e)!==e)throw Error(qe(188))}function Aqe(e){var t=e.alternate;if(!t){if(t=bv(e),t===null)throw Error(qe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Oie(i),e;if(s===r)return Oie(i),t;s=s.sibling}throw Error(qe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(qe(189))}}if(n.alternate!==r)throw Error(qe(190))}if(n.tag!==3)throw Error(qe(188));return n.stateNode.current===n?e:t}function Bbe(e){return e=Aqe(e),e!==null?jbe(e):null}function jbe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jbe(e);if(t!==null)return t;e=e.sibling}return null}var zbe=rl.unstable_scheduleCallback,Pie=rl.unstable_cancelCallback,Cqe=rl.unstable_shouldYield,Iqe=rl.unstable_requestPaint,Ui=rl.unstable_now,Oqe=rl.unstable_getCurrentPriorityLevel,FW=rl.unstable_ImmediatePriority,Ube=rl.unstable_UserBlockingPriority,Z$=rl.unstable_NormalPriority,Pqe=rl.unstable_LowPriority,Vbe=rl.unstable_IdlePriority,EM=null,_d=null;function kqe(e){if(_d&&typeof _d.onCommitFiberRoot=="function")try{_d.onCommitFiberRoot(EM,e,void 0,(e.current.flags&128)===128)}catch{}}var Jc=Math.clz32?Math.clz32:Nqe,$qe=Math.log,Rqe=Math.LN2;function Nqe(e){return e>>>=0,e===0?32:31-($qe(e)/Rqe|0)|0}var PO=64,kO=4194304;function VS(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function eR(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=VS(a):(s&=o,s!==0&&(r=VS(s)))}else o=n&~i,o!==0?r=VS(o):s!==0&&(r=VS(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Jc(t),i=1<<n,r|=e[n],t&=~i;return r}function Dqe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lqe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Jc(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=Dqe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function ez(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hbe(){var e=PO;return PO<<=1,!(PO&4194240)&&(PO=64),e}function C8(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function PC(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jc(t),e[t]=n}function Mqe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Jc(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function BW(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Jc(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var br=0;function qbe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Wbe,jW,Gbe,Ybe,Kbe,tz=!1,$O=[],cg=null,fg=null,dg=null,B2=new Map,j2=new Map,Lm=[],Fqe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kie(e,t){switch(e){case"focusin":case"focusout":cg=null;break;case"dragenter":case"dragleave":fg=null;break;case"mouseover":case"mouseout":dg=null;break;case"pointerover":case"pointerout":B2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":j2.delete(t.pointerId)}}function Fx(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=$C(t),t!==null&&jW(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Bqe(e,t,n,r,i){switch(t){case"focusin":return cg=Fx(cg,e,t,n,r,i),!0;case"dragenter":return fg=Fx(fg,e,t,n,r,i),!0;case"mouseover":return dg=Fx(dg,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return B2.set(s,Fx(B2.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,j2.set(s,Fx(j2.get(s)||null,e,t,n,r,i)),!0}return!1}function Xbe(e){var t=zy(e.target);if(t!==null){var n=bv(t);if(n!==null){if(t=n.tag,t===13){if(t=Fbe(n),t!==null){e.blockedOn=t,Kbe(e.priority,function(){Gbe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pk(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=nz(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);X7=r,n.target.dispatchEvent(r),X7=null}else return t=$C(n),t!==null&&jW(t),e.blockedOn=n,!1;t.shift()}return!0}function $ie(e,t,n){Pk(e)&&n.delete(t)}function jqe(){tz=!1,cg!==null&&Pk(cg)&&(cg=null),fg!==null&&Pk(fg)&&(fg=null),dg!==null&&Pk(dg)&&(dg=null),B2.forEach($ie),j2.forEach($ie)}function Bx(e,t){e.blockedOn===t&&(e.blockedOn=null,tz||(tz=!0,rl.unstable_scheduleCallback(rl.unstable_NormalPriority,jqe)))}function z2(e){function t(i){return Bx(i,e)}if(0<$O.length){Bx($O[0],e);for(var n=1;n<$O.length;n++){var r=$O[n];r.blockedOn===e&&(r.blockedOn=null)}}for(cg!==null&&Bx(cg,e),fg!==null&&Bx(fg,e),dg!==null&&Bx(dg,e),B2.forEach(t),j2.forEach(t),n=0;n<Lm.length;n++)r=Lm[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Lm.length&&(n=Lm[0],n.blockedOn===null);)Xbe(n),n.blockedOn===null&&Lm.shift()}var wb=Wp.ReactCurrentBatchConfig,tR=!0;function zqe(e,t,n,r){var i=br,s=wb.transition;wb.transition=null;try{br=1,zW(e,t,n,r)}finally{br=i,wb.transition=s}}function Uqe(e,t,n,r){var i=br,s=wb.transition;wb.transition=null;try{br=4,zW(e,t,n,r)}finally{br=i,wb.transition=s}}function zW(e,t,n,r){if(tR){var i=nz(e,t,n,r);if(i===null)M8(e,t,r,nR,n),kie(e,r);else if(Bqe(i,e,t,n,r))r.stopPropagation();else if(kie(e,r),t&4&&-1<Fqe.indexOf(e)){for(;i!==null;){var s=$C(i);if(s!==null&&Wbe(s),s=nz(e,t,n,r),s===null&&M8(e,t,r,nR,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else M8(e,t,r,null,n)}}var nR=null;function nz(e,t,n,r){if(nR=null,e=MW(r),e=zy(e),e!==null)if(t=bv(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Fbe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return nR=e,null}function Qbe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Oqe()){case FW:return 1;case Ube:return 4;case Z$:case Pqe:return 16;case Vbe:return 536870912;default:return 16}default:return 16}}var Gm=null,UW=null,kk=null;function Jbe(){if(kk)return kk;var e,t=UW,n=t.length,r,i="value"in Gm?Gm.value:Gm.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return kk=i.slice(e,1<r?1-r:void 0)}function $k(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function RO(){return!0}function Rie(){return!1}function gl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?RO:Rie,this.isPropagationStopped=Rie,this}return bi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=RO)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=RO)},persist:function(){},isPersistent:RO}),t}var EE={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},VW=gl(EE),kC=bi({},EE,{view:0,detail:0}),Vqe=gl(kC),I8,O8,jx,xM=bi({},kC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:HW,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jx&&(jx&&e.type==="mousemove"?(I8=e.screenX-jx.screenX,O8=e.screenY-jx.screenY):O8=I8=0,jx=e),I8)},movementY:function(e){return"movementY"in e?e.movementY:O8}}),Nie=gl(xM),Hqe=bi({},xM,{dataTransfer:0}),qqe=gl(Hqe),Wqe=bi({},kC,{relatedTarget:0}),P8=gl(Wqe),Gqe=bi({},EE,{animationName:0,elapsedTime:0,pseudoElement:0}),Yqe=gl(Gqe),Kqe=bi({},EE,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xqe=gl(Kqe),Qqe=bi({},EE,{data:0}),Die=gl(Qqe),Jqe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zqe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eWe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tWe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=eWe[e])?!!t[e]:!1}function HW(){return tWe}var nWe=bi({},kC,{key:function(e){if(e.key){var t=Jqe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$k(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zqe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:HW,charCode:function(e){return e.type==="keypress"?$k(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$k(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rWe=gl(nWe),iWe=bi({},xM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lie=gl(iWe),sWe=bi({},kC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:HW}),oWe=gl(sWe),aWe=bi({},EE,{propertyName:0,elapsedTime:0,pseudoElement:0}),uWe=gl(aWe),lWe=bi({},xM,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cWe=gl(lWe),fWe=[9,13,27,32],qW=bp&&"CompositionEvent"in window,NT=null;bp&&"documentMode"in document&&(NT=document.documentMode);var dWe=bp&&"TextEvent"in window&&!NT,Zbe=bp&&(!qW||NT&&8<NT&&11>=NT),Mie=" ",Fie=!1;function ewe(e,t){switch(e){case"keyup":return fWe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function twe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var q_=!1;function hWe(e,t){switch(e){case"compositionend":return twe(t);case"keypress":return t.which!==32?null:(Fie=!0,Mie);case"textInput":return e=t.data,e===Mie&&Fie?null:e;default:return null}}function pWe(e,t){if(q_)return e==="compositionend"||!qW&&ewe(e,t)?(e=Jbe(),kk=UW=Gm=null,q_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zbe&&t.locale!=="ko"?null:t.data;default:return null}}var mWe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bie(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!mWe[e.type]:t==="textarea"}function nwe(e,t,n,r){Rbe(r),t=rR(t,"onChange"),0<t.length&&(n=new VW("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var DT=null,U2=null;function gWe(e){hwe(e,0)}function SM(e){var t=Y_(e);if(Abe(t))return e}function yWe(e,t){if(e==="change")return t}var rwe=!1;if(bp){var k8;if(bp){var $8="oninput"in document;if(!$8){var jie=document.createElement("div");jie.setAttribute("oninput","return;"),$8=typeof jie.oninput=="function"}k8=$8}else k8=!1;rwe=k8&&(!document.documentMode||9<document.documentMode)}function zie(){DT&&(DT.detachEvent("onpropertychange",iwe),U2=DT=null)}function iwe(e){if(e.propertyName==="value"&&SM(U2)){var t=[];nwe(t,U2,e,MW(e)),Mbe(gWe,t)}}function vWe(e,t,n){e==="focusin"?(zie(),DT=t,U2=n,DT.attachEvent("onpropertychange",iwe)):e==="focusout"&&zie()}function _We(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return SM(U2)}function bWe(e,t){if(e==="click")return SM(t)}function wWe(e,t){if(e==="input"||e==="change")return SM(t)}function EWe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var af=typeof Object.is=="function"?Object.is:EWe;function V2(e,t){if(af(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!F7.call(t,i)||!af(e[i],t[i]))return!1}return!0}function Uie(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vie(e,t){var n=Uie(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uie(n)}}function swe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?swe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function owe(){for(var e=window,t=X$();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=X$(e.document)}return t}function WW(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function xWe(e){var t=owe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&swe(n.ownerDocument.documentElement,n)){if(r!==null&&WW(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Vie(n,s);var o=Vie(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var SWe=bp&&"documentMode"in document&&11>=document.documentMode,W_=null,rz=null,LT=null,iz=!1;function Hie(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;iz||W_==null||W_!==X$(r)||(r=W_,"selectionStart"in r&&WW(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),LT&&V2(LT,r)||(LT=r,r=rR(rz,"onSelect"),0<r.length&&(t=new VW("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=W_)))}function NO(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var G_={animationend:NO("Animation","AnimationEnd"),animationiteration:NO("Animation","AnimationIteration"),animationstart:NO("Animation","AnimationStart"),transitionend:NO("Transition","TransitionEnd")},R8={},awe={};bp&&(awe=document.createElement("div").style,"AnimationEvent"in window||(delete G_.animationend.animation,delete G_.animationiteration.animation,delete G_.animationstart.animation),"TransitionEvent"in window||delete G_.transitionend.transition);function TM(e){if(R8[e])return R8[e];if(!G_[e])return e;var t=G_[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in awe)return R8[e]=t[n];return e}var uwe=TM("animationend"),lwe=TM("animationiteration"),cwe=TM("animationstart"),fwe=TM("transitionend"),dwe=new Map,qie="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function x0(e,t){dwe.set(e,t),_v(t,[e])}for(var N8=0;N8<qie.length;N8++){var D8=qie[N8],TWe=D8.toLowerCase(),AWe=D8[0].toUpperCase()+D8.slice(1);x0(TWe,"on"+AWe)}x0(uwe,"onAnimationEnd");x0(lwe,"onAnimationIteration");x0(cwe,"onAnimationStart");x0("dblclick","onDoubleClick");x0("focusin","onFocus");x0("focusout","onBlur");x0(fwe,"onTransitionEnd");iw("onMouseEnter",["mouseout","mouseover"]);iw("onMouseLeave",["mouseout","mouseover"]);iw("onPointerEnter",["pointerout","pointerover"]);iw("onPointerLeave",["pointerout","pointerover"]);_v("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_v("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_v("onBeforeInput",["compositionend","keypress","textInput","paste"]);_v("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_v("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_v("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var HS="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CWe=new Set("cancel close invalid load scroll toggle".split(" ").concat(HS));function Wie(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Tqe(r,t,void 0,e),e.currentTarget=null}function hwe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Wie(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Wie(i,a,l),s=u}}}if(J$)throw e=Z7,J$=!1,Z7=null,e}function Wr(e,t){var n=t[lz];n===void 0&&(n=t[lz]=new Set);var r=e+"__bubble";n.has(r)||(pwe(t,e,2,!1),n.add(r))}function L8(e,t,n){var r=0;t&&(r|=4),pwe(n,e,r,t)}var DO="_reactListening"+Math.random().toString(36).slice(2);function H2(e){if(!e[DO]){e[DO]=!0,wbe.forEach(function(n){n!=="selectionchange"&&(CWe.has(n)||L8(n,!1,e),L8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[DO]||(t[DO]=!0,L8("selectionchange",!1,t))}}function pwe(e,t,n,r){switch(Qbe(t)){case 1:var i=zqe;break;case 4:i=Uqe;break;default:i=zW}n=i.bind(null,t,n,e),i=void 0,!J7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function M8(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=zy(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Mbe(function(){var l=s,c=MW(n),f=[];e:{var d=dwe.get(e);if(d!==void 0){var h=VW,p=e;switch(e){case"keypress":if($k(n)===0)break e;case"keydown":case"keyup":h=rWe;break;case"focusin":p="focus",h=P8;break;case"focusout":p="blur",h=P8;break;case"beforeblur":case"afterblur":h=P8;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Nie;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=qqe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=oWe;break;case uwe:case lwe:case cwe:h=Yqe;break;case fwe:h=uWe;break;case"scroll":h=Vqe;break;case"wheel":h=cWe;break;case"copy":case"cut":case"paste":h=Xqe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Lie}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,_;v!==null;){_=v;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,y!==null&&(b=F2(v,y),b!=null&&m.push(q2(v,b,_)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==X7&&(p=n.relatedTarget||n.fromElement)&&(zy(p)||p[wp]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?zy(p):null,p!==null&&(g=bv(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=Nie,b="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=Lie,b="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:Y_(h),_=p==null?d:Y_(p),d=new m(b,v+"leave",h,n,c),d.target=g,d.relatedTarget=_,b=null,zy(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=_,m.relatedTarget=g,b=m),g=b,h&&p)t:{for(m=h,y=p,v=0,_=m;_;_=o_(_))v++;for(_=0,b=y;b;b=o_(b))_++;for(;0<v-_;)m=o_(m),v--;for(;0<_-v;)y=o_(y),_--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=o_(m),y=o_(y)}m=null}else m=null;h!==null&&Gie(f,d,h,m,!1),p!==null&&g!==null&&Gie(f,g,p,m,!0)}}e:{if(d=l?Y_(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=yWe;else if(Bie(d))if(rwe)E=wWe;else{E=_We;var w=vWe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=bWe);if(E&&(E=E(e,l))){nwe(f,E,n,c);break e}w&&w(e,d,l),e==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&q7(d,"number",d.value)}switch(w=l?Y_(l):window,e){case"focusin":(Bie(w)||w.contentEditable==="true")&&(W_=w,rz=l,LT=null);break;case"focusout":LT=rz=W_=null;break;case"mousedown":iz=!0;break;case"contextmenu":case"mouseup":case"dragend":iz=!1,Hie(f,n,c);break;case"selectionchange":if(SWe)break;case"keydown":case"keyup":Hie(f,n,c)}var x;if(qW)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else q_?ewe(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(Zbe&&n.locale!=="ko"&&(q_||S!=="onCompositionStart"?S==="onCompositionEnd"&&q_&&(x=Jbe()):(Gm=c,UW="value"in Gm?Gm.value:Gm.textContent,q_=!0)),w=rR(l,S),0<w.length&&(S=new Die(S,e,null,n,c),f.push({event:S,listeners:w}),x?S.data=x:(x=twe(n),x!==null&&(S.data=x)))),(x=dWe?hWe(e,n):pWe(e,n))&&(l=rR(l,"onBeforeInput"),0<l.length&&(c=new Die("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=x))}hwe(f,t)})}function q2(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rR(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=F2(e,n),s!=null&&r.unshift(q2(e,s,i)),s=F2(e,t),s!=null&&r.push(q2(e,s,i))),e=e.return}return r}function o_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Gie(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=F2(n,s),u!=null&&o.unshift(q2(n,u,a))):i||(u=F2(n,s),u!=null&&o.push(q2(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var IWe=/\r\n?/g,OWe=/\u0000|\uFFFD/g;function Yie(e){return(typeof e=="string"?e:""+e).replace(IWe,`
`).replace(OWe,"")}function LO(e,t,n){if(t=Yie(t),Yie(e)!==t&&n)throw Error(qe(425))}function iR(){}var sz=null,oz=null;function az(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uz=typeof setTimeout=="function"?setTimeout:void 0,PWe=typeof clearTimeout=="function"?clearTimeout:void 0,Kie=typeof Promise=="function"?Promise:void 0,kWe=typeof queueMicrotask=="function"?queueMicrotask:typeof Kie<"u"?function(e){return Kie.resolve(null).then(e).catch($We)}:uz;function $We(e){setTimeout(function(){throw e})}function F8(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),z2(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);z2(t)}function hg(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xie(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xE=Math.random().toString(36).slice(2),Zf="__reactFiber$"+xE,W2="__reactProps$"+xE,wp="__reactContainer$"+xE,lz="__reactEvents$"+xE,RWe="__reactListeners$"+xE,NWe="__reactHandles$"+xE;function zy(e){var t=e[Zf];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wp]||n[Zf]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Xie(e);e!==null;){if(n=e[Zf])return n;e=Xie(e)}return t}e=n,n=e.parentNode}return null}function $C(e){return e=e[Zf]||e[wp],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Y_(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(qe(33))}function AM(e){return e[W2]||null}var cz=[],K_=-1;function S0(e){return{current:e}}function Zr(e){0>K_||(e.current=cz[K_],cz[K_]=null,K_--)}function Ur(e,t){K_++,cz[K_]=e.current,e.current=t}var Bg={},ea=S0(Bg),au=S0(!1),O1=Bg;function sw(e,t){var n=e.type.contextTypes;if(!n)return Bg;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function uu(e){return e=e.childContextTypes,e!=null}function sR(){Zr(au),Zr(ea)}function Qie(e,t,n){if(ea.current!==Bg)throw Error(qe(168));Ur(ea,t),Ur(au,n)}function mwe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(qe(108,vqe(e)||"Unknown",i));return bi({},n,r)}function oR(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bg,O1=ea.current,Ur(ea,e),Ur(au,au.current),!0}function Jie(e,t,n){var r=e.stateNode;if(!r)throw Error(qe(169));n?(e=mwe(e,t,O1),r.__reactInternalMemoizedMergedChildContext=e,Zr(au),Zr(ea),Ur(ea,e)):Zr(au),Ur(au,n)}var Rh=null,CM=!1,B8=!1;function gwe(e){Rh===null?Rh=[e]:Rh.push(e)}function DWe(e){CM=!0,gwe(e)}function T0(){if(!B8&&Rh!==null){B8=!0;var e=0,t=br;try{var n=Rh;for(br=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Rh=null,CM=!1}catch(i){throw Rh!==null&&(Rh=Rh.slice(e+1)),zbe(FW,T0),i}finally{br=t,B8=!1}}return null}var X_=[],Q_=0,aR=null,uR=0,Pl=[],kl=0,P1=null,Hh=1,qh="";function hy(e,t){X_[Q_++]=uR,X_[Q_++]=aR,aR=e,uR=t}function ywe(e,t,n){Pl[kl++]=Hh,Pl[kl++]=qh,Pl[kl++]=P1,P1=e;var r=Hh;e=qh;var i=32-Jc(r)-1;r&=~(1<<i),n+=1;var s=32-Jc(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Hh=1<<32-Jc(t)+i|n<<i|r,qh=s+e}else Hh=1<<s|n<<i|r,qh=e}function GW(e){e.return!==null&&(hy(e,1),ywe(e,1,0))}function YW(e){for(;e===aR;)aR=X_[--Q_],X_[Q_]=null,uR=X_[--Q_],X_[Q_]=null;for(;e===P1;)P1=Pl[--kl],Pl[kl]=null,qh=Pl[--kl],Pl[kl]=null,Hh=Pl[--kl],Pl[kl]=null}var Ju=null,Wu=null,ci=!1,Dc=null;function vwe(e,t){var n=jl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Zie(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ju=e,Wu=hg(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ju=e,Wu=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=P1!==null?{id:Hh,overflow:qh}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=jl(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ju=e,Wu=null,!0):!1;default:return!1}}function fz(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dz(e){if(ci){var t=Wu;if(t){var n=t;if(!Zie(e,t)){if(fz(e))throw Error(qe(418));t=hg(n.nextSibling);var r=Ju;t&&Zie(e,t)?vwe(r,n):(e.flags=e.flags&-4097|2,ci=!1,Ju=e)}}else{if(fz(e))throw Error(qe(418));e.flags=e.flags&-4097|2,ci=!1,Ju=e}}}function ese(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ju=e}function MO(e){if(e!==Ju)return!1;if(!ci)return ese(e),ci=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!az(e.type,e.memoizedProps)),t&&(t=Wu)){if(fz(e))throw _we(),Error(qe(418));for(;t;)vwe(e,t),t=hg(t.nextSibling)}if(ese(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(qe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wu=hg(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wu=null}}else Wu=Ju?hg(e.stateNode.nextSibling):null;return!0}function _we(){for(var e=Wu;e;)e=hg(e.nextSibling)}function ow(){Wu=Ju=null,ci=!1}function KW(e){Dc===null?Dc=[e]:Dc.push(e)}var LWe=Wp.ReactCurrentBatchConfig;function Oc(e,t){if(e&&e.defaultProps){t=bi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var lR=S0(null),cR=null,J_=null,XW=null;function QW(){XW=J_=cR=null}function JW(e){var t=lR.current;Zr(lR),e._currentValue=t}function hz(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Eb(e,t){cR=e,XW=J_=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ru=!0),e.firstContext=null)}function Kl(e){var t=e._currentValue;if(XW!==e)if(e={context:e,memoizedValue:t,next:null},J_===null){if(cR===null)throw Error(qe(308));J_=e,cR.dependencies={lanes:0,firstContext:e}}else J_=J_.next=e;return t}var Uy=null;function ZW(e){Uy===null?Uy=[e]:Uy.push(e)}function bwe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,ZW(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ep(e,r)}function Ep(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Cm=!1;function eG(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wwe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function sp(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pg(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Qn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ep(e,n)}return i=r.interleaved,i===null?(t.next=t,ZW(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ep(e,n)}function Rk(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,BW(e,n)}}function tse(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fR(e,t,n,r){var i=e.updateQueue;Cm=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=bi({},f,d);break e;case 2:Cm=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);$1|=o,e.lanes=o,e.memoizedState=f}}function nse(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(qe(191,i));i.call(r)}}}var Ewe=new bbe.Component().refs;function pz(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:bi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var IM={isMounted:function(e){return(e=e._reactInternals)?bv(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=wa(),i=gg(e),s=sp(r,i);s.payload=t,n!=null&&(s.callback=n),t=pg(e,s,i),t!==null&&(Zc(t,e,i,r),Rk(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=wa(),i=gg(e),s=sp(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=pg(e,s,i),t!==null&&(Zc(t,e,i,r),Rk(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wa(),r=gg(e),i=sp(n,r);i.tag=2,t!=null&&(i.callback=t),t=pg(e,i,r),t!==null&&(Zc(t,e,r,n),Rk(t,e,r))}};function rse(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!V2(n,r)||!V2(i,s):!0}function xwe(e,t,n){var r=!1,i=Bg,s=t.contextType;return typeof s=="object"&&s!==null?s=Kl(s):(i=uu(t)?O1:ea.current,r=t.contextTypes,s=(r=r!=null)?sw(e,i):Bg),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=IM,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ise(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&IM.enqueueReplaceState(t,t.state,null)}function mz(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ewe,eG(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Kl(s):(s=uu(t)?O1:ea.current,i.context=sw(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(pz(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&IM.enqueueReplaceState(i,i.state,null),fR(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function zx(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(qe(309));var r=n.stateNode}if(!r)throw Error(qe(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===Ewe&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(qe(284));if(!n._owner)throw Error(qe(290,e))}return e}function FO(e,t){throw e=Object.prototype.toString.call(t),Error(qe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sse(e){var t=e._init;return t(e._payload)}function Swe(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=yg(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,b){return v===null||v.tag!==6?(v=W8(_,y.mode,b),v.return=y,v):(v=i(v,_),v.return=y,v)}function u(y,v,_,b){var E=_.type;return E===H_?c(y,v,_.props.children,b,_.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Am&&sse(E)===v.type)?(b=i(v,_.props),b.ref=zx(y,v,_),b.return=y,b):(b=Bk(_.type,_.key,_.props,null,y.mode,b),b.ref=zx(y,v,_),b.return=y,b)}function l(y,v,_,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=G8(_,y.mode,b),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,b,E){return v===null||v.tag!==7?(v=c1(_,y.mode,b,E),v.return=y,v):(v=i(v,_),v.return=y,v)}function f(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=W8(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case CO:return _=Bk(v.type,v.key,v.props,null,y.mode,_),_.ref=zx(y,null,v),_.return=y,_;case V_:return v=G8(v,y.mode,_),v.return=y,v;case Am:var b=v._init;return f(y,b(v._payload),_)}if(US(v)||Lx(v))return v=c1(v,y.mode,_,null),v.return=y,v;FO(y,v)}return null}function d(y,v,_,b){var E=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(y,v,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case CO:return _.key===E?u(y,v,_,b):null;case V_:return _.key===E?l(y,v,_,b):null;case Am:return E=_._init,d(y,v,E(_._payload),b)}if(US(_)||Lx(_))return E!==null?null:c(y,v,_,b,null);FO(y,_)}return null}function h(y,v,_,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(_)||null,a(v,y,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case CO:return y=y.get(b.key===null?_:b.key)||null,u(v,y,b,E);case V_:return y=y.get(b.key===null?_:b.key)||null,l(v,y,b,E);case Am:var w=b._init;return h(y,v,_,w(b._payload),E)}if(US(b)||Lx(b))return y=y.get(_)||null,c(v,y,b,E,null);FO(v,b)}return null}function p(y,v,_,b){for(var E=null,w=null,x=v,S=v=0,I=null;x!==null&&S<_.length;S++){x.index>S?(I=x,x=null):I=x.sibling;var C=d(y,x,_[S],b);if(C===null){x===null&&(x=I);break}e&&x&&C.alternate===null&&t(y,x),v=s(C,v,S),w===null?E=C:w.sibling=C,w=C,x=I}if(S===_.length)return n(y,x),ci&&hy(y,S),E;if(x===null){for(;S<_.length;S++)x=f(y,_[S],b),x!==null&&(v=s(x,v,S),w===null?E=x:w.sibling=x,w=x);return ci&&hy(y,S),E}for(x=r(y,x);S<_.length;S++)I=h(x,y,S,_[S],b),I!==null&&(e&&I.alternate!==null&&x.delete(I.key===null?S:I.key),v=s(I,v,S),w===null?E=I:w.sibling=I,w=I);return e&&x.forEach(function(O){return t(y,O)}),ci&&hy(y,S),E}function m(y,v,_,b){var E=Lx(_);if(typeof E!="function")throw Error(qe(150));if(_=E.call(_),_==null)throw Error(qe(151));for(var w=E=null,x=v,S=v=0,I=null,C=_.next();x!==null&&!C.done;S++,C=_.next()){x.index>S?(I=x,x=null):I=x.sibling;var O=d(y,x,C.value,b);if(O===null){x===null&&(x=I);break}e&&x&&O.alternate===null&&t(y,x),v=s(O,v,S),w===null?E=O:w.sibling=O,w=O,x=I}if(C.done)return n(y,x),ci&&hy(y,S),E;if(x===null){for(;!C.done;S++,C=_.next())C=f(y,C.value,b),C!==null&&(v=s(C,v,S),w===null?E=C:w.sibling=C,w=C);return ci&&hy(y,S),E}for(x=r(y,x);!C.done;S++,C=_.next())C=h(x,y,S,C.value,b),C!==null&&(e&&C.alternate!==null&&x.delete(C.key===null?S:C.key),v=s(C,v,S),w===null?E=C:w.sibling=C,w=C);return e&&x.forEach(function(z){return t(y,z)}),ci&&hy(y,S),E}function g(y,v,_,b){if(typeof _=="object"&&_!==null&&_.type===H_&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case CO:e:{for(var E=_.key,w=v;w!==null;){if(w.key===E){if(E=_.type,E===H_){if(w.tag===7){n(y,w.sibling),v=i(w,_.props.children),v.return=y,y=v;break e}}else if(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Am&&sse(E)===w.type){n(y,w.sibling),v=i(w,_.props),v.ref=zx(y,w,_),v.return=y,y=v;break e}n(y,w);break}else t(y,w);w=w.sibling}_.type===H_?(v=c1(_.props.children,y.mode,b,_.key),v.return=y,y=v):(b=Bk(_.type,_.key,_.props,null,y.mode,b),b.ref=zx(y,v,_),b.return=y,y=b)}return o(y);case V_:e:{for(w=_.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=G8(_,y.mode,b),v.return=y,y=v}return o(y);case Am:return w=_._init,g(y,v,w(_._payload),b)}if(US(_))return p(y,v,_,b);if(Lx(_))return m(y,v,_,b);FO(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=W8(_,y.mode,b),v.return=y,y=v),o(y)):n(y,v)}return g}var aw=Swe(!0),Twe=Swe(!1),RC={},bd=S0(RC),G2=S0(RC),Y2=S0(RC);function Vy(e){if(e===RC)throw Error(qe(174));return e}function tG(e,t){switch(Ur(Y2,t),Ur(G2,e),Ur(bd,RC),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:G7(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=G7(t,e)}Zr(bd),Ur(bd,t)}function uw(){Zr(bd),Zr(G2),Zr(Y2)}function Awe(e){Vy(Y2.current);var t=Vy(bd.current),n=G7(t,e.type);t!==n&&(Ur(G2,e),Ur(bd,n))}function nG(e){G2.current===e&&(Zr(bd),Zr(G2))}var vi=S0(0);function dR(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var j8=[];function rG(){for(var e=0;e<j8.length;e++)j8[e]._workInProgressVersionPrimary=null;j8.length=0}var Nk=Wp.ReactCurrentDispatcher,z8=Wp.ReactCurrentBatchConfig,k1=0,_i=null,ds=null,Ns=null,hR=!1,MT=!1,K2=0,MWe=0;function Ao(){throw Error(qe(321))}function iG(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!af(e[n],t[n]))return!1;return!0}function sG(e,t,n,r,i,s){if(k1=s,_i=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Nk.current=e===null||e.memoizedState===null?zWe:UWe,e=n(r,i),MT){s=0;do{if(MT=!1,K2=0,25<=s)throw Error(qe(301));s+=1,Ns=ds=null,t.updateQueue=null,Nk.current=VWe,e=n(r,i)}while(MT)}if(Nk.current=pR,t=ds!==null&&ds.next!==null,k1=0,Ns=ds=_i=null,hR=!1,t)throw Error(qe(300));return e}function oG(){var e=K2!==0;return K2=0,e}function zf(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ns===null?_i.memoizedState=Ns=e:Ns=Ns.next=e,Ns}function Xl(){if(ds===null){var e=_i.alternate;e=e!==null?e.memoizedState:null}else e=ds.next;var t=Ns===null?_i.memoizedState:Ns.next;if(t!==null)Ns=t,ds=e;else{if(e===null)throw Error(qe(310));ds=e,e={memoizedState:ds.memoizedState,baseState:ds.baseState,baseQueue:ds.baseQueue,queue:ds.queue,next:null},Ns===null?_i.memoizedState=Ns=e:Ns=Ns.next=e}return Ns}function X2(e,t){return typeof t=="function"?t(e):t}function U8(e){var t=Xl(),n=t.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=e;var r=ds,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((k1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,_i.lanes|=c,$1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,af(r,t.memoizedState)||(ru=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,_i.lanes|=s,$1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function V8(e){var t=Xl(),n=t.queue;if(n===null)throw Error(qe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);af(s,t.memoizedState)||(ru=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Cwe(){}function Iwe(e,t){var n=_i,r=Xl(),i=t(),s=!af(r.memoizedState,i);if(s&&(r.memoizedState=i,ru=!0),r=r.queue,aG(kwe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ns!==null&&Ns.memoizedState.tag&1){if(n.flags|=2048,Q2(9,Pwe.bind(null,n,r,i,t),void 0,null),Hs===null)throw Error(qe(349));k1&30||Owe(n,t,i)}return i}function Owe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_i.updateQueue,t===null?(t={lastEffect:null,stores:null},_i.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Pwe(e,t,n,r){t.value=n,t.getSnapshot=r,$we(t)&&Rwe(e)}function kwe(e,t,n){return n(function(){$we(t)&&Rwe(e)})}function $we(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!af(e,n)}catch{return!0}}function Rwe(e){var t=Ep(e,1);t!==null&&Zc(t,e,1,-1)}function ose(e){var t=zf();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:X2,lastRenderedState:e},t.queue=e,e=e.dispatch=jWe.bind(null,_i,e),[t.memoizedState,e]}function Q2(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=_i.updateQueue,t===null?(t={lastEffect:null,stores:null},_i.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Nwe(){return Xl().memoizedState}function Dk(e,t,n,r){var i=zf();_i.flags|=e,i.memoizedState=Q2(1|t,n,void 0,r===void 0?null:r)}function OM(e,t,n,r){var i=Xl();r=r===void 0?null:r;var s=void 0;if(ds!==null){var o=ds.memoizedState;if(s=o.destroy,r!==null&&iG(r,o.deps)){i.memoizedState=Q2(t,n,s,r);return}}_i.flags|=e,i.memoizedState=Q2(1|t,n,s,r)}function ase(e,t){return Dk(8390656,8,e,t)}function aG(e,t){return OM(2048,8,e,t)}function Dwe(e,t){return OM(4,2,e,t)}function Lwe(e,t){return OM(4,4,e,t)}function Mwe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fwe(e,t,n){return n=n!=null?n.concat([e]):null,OM(4,4,Mwe.bind(null,t,e),n)}function uG(){}function Bwe(e,t){var n=Xl();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&iG(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function jwe(e,t){var n=Xl();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&iG(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zwe(e,t,n){return k1&21?(af(n,t)||(n=Hbe(),_i.lanes|=n,$1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ru=!0),e.memoizedState=n)}function FWe(e,t){var n=br;br=n!==0&&4>n?n:4,e(!0);var r=z8.transition;z8.transition={};try{e(!1),t()}finally{br=n,z8.transition=r}}function Uwe(){return Xl().memoizedState}function BWe(e,t,n){var r=gg(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vwe(e))Hwe(t,n);else if(n=bwe(e,t,n,r),n!==null){var i=wa();Zc(n,e,r,i),qwe(n,t,r)}}function jWe(e,t,n){var r=gg(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vwe(e))Hwe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,af(a,o)){var u=t.interleaved;u===null?(i.next=i,ZW(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=bwe(e,t,i,r),n!==null&&(i=wa(),Zc(n,e,r,i),qwe(n,t,r))}}function Vwe(e){var t=e.alternate;return e===_i||t!==null&&t===_i}function Hwe(e,t){MT=hR=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qwe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,BW(e,n)}}var pR={readContext:Kl,useCallback:Ao,useContext:Ao,useEffect:Ao,useImperativeHandle:Ao,useInsertionEffect:Ao,useLayoutEffect:Ao,useMemo:Ao,useReducer:Ao,useRef:Ao,useState:Ao,useDebugValue:Ao,useDeferredValue:Ao,useTransition:Ao,useMutableSource:Ao,useSyncExternalStore:Ao,useId:Ao,unstable_isNewReconciler:!1},zWe={readContext:Kl,useCallback:function(e,t){return zf().memoizedState=[e,t===void 0?null:t],e},useContext:Kl,useEffect:ase,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Dk(4194308,4,Mwe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Dk(4194308,4,e,t)},useInsertionEffect:function(e,t){return Dk(4,2,e,t)},useMemo:function(e,t){var n=zf();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=zf();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=BWe.bind(null,_i,e),[r.memoizedState,e]},useRef:function(e){var t=zf();return e={current:e},t.memoizedState=e},useState:ose,useDebugValue:uG,useDeferredValue:function(e){return zf().memoizedState=e},useTransition:function(){var e=ose(!1),t=e[0];return e=FWe.bind(null,e[1]),zf().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_i,i=zf();if(ci){if(n===void 0)throw Error(qe(407));n=n()}else{if(n=t(),Hs===null)throw Error(qe(349));k1&30||Owe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ase(kwe.bind(null,r,s,e),[e]),r.flags|=2048,Q2(9,Pwe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=zf(),t=Hs.identifierPrefix;if(ci){var n=qh,r=Hh;n=(r&~(1<<32-Jc(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=K2++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=MWe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},UWe={readContext:Kl,useCallback:Bwe,useContext:Kl,useEffect:aG,useImperativeHandle:Fwe,useInsertionEffect:Dwe,useLayoutEffect:Lwe,useMemo:jwe,useReducer:U8,useRef:Nwe,useState:function(){return U8(X2)},useDebugValue:uG,useDeferredValue:function(e){var t=Xl();return zwe(t,ds.memoizedState,e)},useTransition:function(){var e=U8(X2)[0],t=Xl().memoizedState;return[e,t]},useMutableSource:Cwe,useSyncExternalStore:Iwe,useId:Uwe,unstable_isNewReconciler:!1},VWe={readContext:Kl,useCallback:Bwe,useContext:Kl,useEffect:aG,useImperativeHandle:Fwe,useInsertionEffect:Dwe,useLayoutEffect:Lwe,useMemo:jwe,useReducer:V8,useRef:Nwe,useState:function(){return V8(X2)},useDebugValue:uG,useDeferredValue:function(e){var t=Xl();return ds===null?t.memoizedState=e:zwe(t,ds.memoizedState,e)},useTransition:function(){var e=V8(X2)[0],t=Xl().memoizedState;return[e,t]},useMutableSource:Cwe,useSyncExternalStore:Iwe,useId:Uwe,unstable_isNewReconciler:!1};function lw(e,t){try{var n="",r=t;do n+=yqe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function H8(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function gz(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var HWe=typeof WeakMap=="function"?WeakMap:Map;function Wwe(e,t,n){n=sp(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){gR||(gR=!0,Az=r),gz(e,t)},n}function Gwe(e,t,n){n=sp(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){gz(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){gz(e,t),typeof r!="function"&&(mg===null?mg=new Set([this]):mg.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function use(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new HWe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=iGe.bind(null,e,t,n),t.then(e,e))}function lse(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cse(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=sp(-1,1),t.tag=2,pg(n,t,1))),n.lanes|=1),e)}var qWe=Wp.ReactCurrentOwner,ru=!1;function da(e,t,n,r){t.child=e===null?Twe(t,null,n,r):aw(t,e.child,n,r)}function fse(e,t,n,r,i){n=n.render;var s=t.ref;return Eb(t,i),r=sG(e,t,n,r,s,i),n=oG(),e!==null&&!ru?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,xp(e,t,i)):(ci&&n&&GW(t),t.flags|=1,da(e,t,r,i),t.child)}function dse(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!gG(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Ywe(e,t,s,r,i)):(e=Bk(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:V2,n(o,r)&&e.ref===t.ref)return xp(e,t,i)}return t.flags|=1,e=yg(s,r),e.ref=t.ref,e.return=t,t.child=e}function Ywe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(V2(s,r)&&e.ref===t.ref)if(ru=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(ru=!0);else return t.lanes=e.lanes,xp(e,t,i)}return yz(e,t,n,r,i)}function Kwe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ur(eb,Fu),Fu|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ur(eb,Fu),Fu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ur(eb,Fu),Fu|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ur(eb,Fu),Fu|=r;return da(e,t,i,n),t.child}function Xwe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function yz(e,t,n,r,i){var s=uu(n)?O1:ea.current;return s=sw(t,s),Eb(t,i),n=sG(e,t,n,r,s,i),r=oG(),e!==null&&!ru?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,xp(e,t,i)):(ci&&r&&GW(t),t.flags|=1,da(e,t,n,i),t.child)}function hse(e,t,n,r,i){if(uu(n)){var s=!0;oR(t)}else s=!1;if(Eb(t,i),t.stateNode===null)Lk(e,t),xwe(t,n,r),mz(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Kl(l):(l=uu(n)?O1:ea.current,l=sw(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&ise(t,o,r,l),Cm=!1;var d=t.memoizedState;o.state=d,fR(t,r,o,i),u=t.memoizedState,a!==r||d!==u||au.current||Cm?(typeof c=="function"&&(pz(t,n,c,r),u=t.memoizedState),(a=Cm||rse(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,wwe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Oc(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Kl(u):(u=uu(n)?O1:ea.current,u=sw(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&ise(t,o,r,u),Cm=!1,d=t.memoizedState,o.state=d,fR(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||au.current||Cm?(typeof h=="function"&&(pz(t,n,h,r),p=t.memoizedState),(l=Cm||rse(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return vz(e,t,n,r,s,i)}function vz(e,t,n,r,i,s){Xwe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Jie(t,n,!1),xp(e,t,s);r=t.stateNode,qWe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=aw(t,e.child,null,s),t.child=aw(t,null,a,s)):da(e,t,a,s),t.memoizedState=r.state,i&&Jie(t,n,!0),t.child}function Qwe(e){var t=e.stateNode;t.pendingContext?Qie(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qie(e,t.context,!1),tG(e,t.containerInfo)}function pse(e,t,n,r,i){return ow(),KW(i),t.flags|=256,da(e,t,n,r),t.child}var _z={dehydrated:null,treeContext:null,retryLane:0};function bz(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jwe(e,t,n){var r=t.pendingProps,i=vi.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ur(vi,i&1),e===null)return dz(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=$M(o,r,0,null),e=c1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=bz(n),t.memoizedState=_z,e):lG(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return WWe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=yg(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=yg(a,s):(s=c1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?bz(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=_z,r}return s=e.child,e=s.sibling,r=yg(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function lG(e,t){return t=$M({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function BO(e,t,n,r){return r!==null&&KW(r),aw(t,e.child,null,n),e=lG(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function WWe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=H8(Error(qe(422))),BO(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=$M({mode:"visible",children:r.children},i,0,null),s=c1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&aw(t,e.child,null,o),t.child.memoizedState=bz(o),t.memoizedState=_z,s);if(!(t.mode&1))return BO(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(qe(419)),r=H8(s,r,void 0),BO(e,t,o,r)}if(a=(o&e.childLanes)!==0,ru||a){if(r=Hs,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ep(e,i),Zc(r,e,i,-1))}return mG(),r=H8(Error(qe(421))),BO(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=sGe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Wu=hg(i.nextSibling),Ju=t,ci=!0,Dc=null,e!==null&&(Pl[kl++]=Hh,Pl[kl++]=qh,Pl[kl++]=P1,Hh=e.id,qh=e.overflow,P1=t),t=lG(t,r.children),t.flags|=4096,t)}function mse(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),hz(e.return,t,n)}function q8(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Zwe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(da(e,t,r.children,n),r=vi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mse(e,n,t);else if(e.tag===19)mse(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ur(vi,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&dR(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),q8(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&dR(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}q8(t,!0,n,null,s);break;case"together":q8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Lk(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xp(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(qe(153));if(t.child!==null){for(e=t.child,n=yg(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yg(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function GWe(e,t,n){switch(t.tag){case 3:Qwe(t),ow();break;case 5:Awe(t);break;case 1:uu(t.type)&&oR(t);break;case 4:tG(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ur(lR,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ur(vi,vi.current&1),t.flags|=128,null):n&t.child.childLanes?Jwe(e,t,n):(Ur(vi,vi.current&1),e=xp(e,t,n),e!==null?e.sibling:null);Ur(vi,vi.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Zwe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ur(vi,vi.current),r)break;return null;case 22:case 23:return t.lanes=0,Kwe(e,t,n)}return xp(e,t,n)}var eEe,wz,tEe,nEe;eEe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wz=function(){};tEe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Vy(bd.current);var s=null;switch(n){case"input":i=V7(e,i),r=V7(e,r),s=[];break;case"select":i=bi({},i,{value:void 0}),r=bi({},r,{value:void 0}),s=[];break;case"textarea":i=W7(e,i),r=W7(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=iR)}Y7(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(L2.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(L2.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Wr("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};nEe=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ux(e,t){if(!ci)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Co(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function YWe(e,t,n){var r=t.pendingProps;switch(YW(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Co(t),null;case 1:return uu(t.type)&&sR(),Co(t),null;case 3:return r=t.stateNode,uw(),Zr(au),Zr(ea),rG(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(MO(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Dc!==null&&(Oz(Dc),Dc=null))),wz(e,t),Co(t),null;case 5:nG(t);var i=Vy(Y2.current);if(n=t.type,e!==null&&t.stateNode!=null)tEe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(qe(166));return Co(t),null}if(e=Vy(bd.current),MO(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Zf]=t,r[W2]=s,e=(t.mode&1)!==0,n){case"dialog":Wr("cancel",r),Wr("close",r);break;case"iframe":case"object":case"embed":Wr("load",r);break;case"video":case"audio":for(i=0;i<HS.length;i++)Wr(HS[i],r);break;case"source":Wr("error",r);break;case"img":case"image":case"link":Wr("error",r),Wr("load",r);break;case"details":Wr("toggle",r);break;case"input":Sie(r,s),Wr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Wr("invalid",r);break;case"textarea":Aie(r,s),Wr("invalid",r)}Y7(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&LO(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&LO(r.textContent,a,e),i=["children",""+a]):L2.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Wr("scroll",r)}switch(n){case"input":IO(r),Tie(r,s,!0);break;case"textarea":IO(r),Cie(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=iR)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Obe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Zf]=t,e[W2]=r,eEe(e,t,!1,!1),t.stateNode=e;e:{switch(o=K7(n,r),n){case"dialog":Wr("cancel",e),Wr("close",e),i=r;break;case"iframe":case"object":case"embed":Wr("load",e),i=r;break;case"video":case"audio":for(i=0;i<HS.length;i++)Wr(HS[i],e);i=r;break;case"source":Wr("error",e),i=r;break;case"img":case"image":case"link":Wr("error",e),Wr("load",e),i=r;break;case"details":Wr("toggle",e),i=r;break;case"input":Sie(e,r),i=V7(e,r),Wr("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=bi({},r,{value:void 0}),Wr("invalid",e);break;case"textarea":Aie(e,r),i=W7(e,r),Wr("invalid",e);break;default:i=r}Y7(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?$be(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Pbe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&M2(e,u):typeof u=="number"&&M2(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(L2.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Wr("scroll",e):u!=null&&RW(e,s,u,o))}switch(n){case"input":IO(e),Tie(e,r,!1);break;case"textarea":IO(e),Cie(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Fg(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?vb(e,!!r.multiple,s,!1):r.defaultValue!=null&&vb(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=iR)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Co(t),null;case 6:if(e&&t.stateNode!=null)nEe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(qe(166));if(n=Vy(Y2.current),Vy(bd.current),MO(t)){if(r=t.stateNode,n=t.memoizedProps,r[Zf]=t,(s=r.nodeValue!==n)&&(e=Ju,e!==null))switch(e.tag){case 3:LO(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&LO(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zf]=t,t.stateNode=r}return Co(t),null;case 13:if(Zr(vi),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ci&&Wu!==null&&t.mode&1&&!(t.flags&128))_we(),ow(),t.flags|=98560,s=!1;else if(s=MO(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(qe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(qe(317));s[Zf]=t}else ow(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Co(t),s=!1}else Dc!==null&&(Oz(Dc),Dc=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||vi.current&1?ys===0&&(ys=3):mG())),t.updateQueue!==null&&(t.flags|=4),Co(t),null);case 4:return uw(),wz(e,t),e===null&&H2(t.stateNode.containerInfo),Co(t),null;case 10:return JW(t.type._context),Co(t),null;case 17:return uu(t.type)&&sR(),Co(t),null;case 19:if(Zr(vi),s=t.memoizedState,s===null)return Co(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Ux(s,!1);else{if(ys!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=dR(e),o!==null){for(t.flags|=128,Ux(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ur(vi,vi.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ui()>cw&&(t.flags|=128,r=!0,Ux(s,!1),t.lanes=4194304)}else{if(!r)if(e=dR(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ux(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ci)return Co(t),null}else 2*Ui()-s.renderingStartTime>cw&&n!==1073741824&&(t.flags|=128,r=!0,Ux(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ui(),t.sibling=null,n=vi.current,Ur(vi,r?n&1|2:n&1),t):(Co(t),null);case 22:case 23:return pG(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Fu&1073741824&&(Co(t),t.subtreeFlags&6&&(t.flags|=8192)):Co(t),null;case 24:return null;case 25:return null}throw Error(qe(156,t.tag))}function KWe(e,t){switch(YW(t),t.tag){case 1:return uu(t.type)&&sR(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return uw(),Zr(au),Zr(ea),rG(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return nG(t),null;case 13:if(Zr(vi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(qe(340));ow()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Zr(vi),null;case 4:return uw(),null;case 10:return JW(t.type._context),null;case 22:case 23:return pG(),null;case 24:return null;default:return null}}var jO=!1,zo=!1,XWe=typeof WeakSet=="function"?WeakSet:Set,ht=null;function Z_(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ii(e,t,r)}else n.current=null}function Ez(e,t,n){try{n()}catch(r){Ii(e,t,r)}}var gse=!1;function QWe(e,t){if(sz=tR,e=owe(),WW(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(oz={focusedElem:e,selectionRange:n},tR=!1,ht=t;ht!==null;)if(t=ht,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ht=e;else for(;ht!==null;){t=ht;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Oc(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qe(163))}}catch(b){Ii(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,ht=e;break}ht=t.return}return p=gse,gse=!1,p}function FT(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ez(t,n,s)}i=i.next}while(i!==r)}}function PM(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function xz(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function rEe(e){var t=e.alternate;t!==null&&(e.alternate=null,rEe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Zf],delete t[W2],delete t[lz],delete t[RWe],delete t[NWe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function iEe(e){return e.tag===5||e.tag===3||e.tag===4}function yse(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||iEe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sz(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=iR));else if(r!==4&&(e=e.child,e!==null))for(Sz(e,t,n),e=e.sibling;e!==null;)Sz(e,t,n),e=e.sibling}function Tz(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Tz(e,t,n),e=e.sibling;e!==null;)Tz(e,t,n),e=e.sibling}var ro=null,kc=!1;function fm(e,t,n){for(n=n.child;n!==null;)sEe(e,t,n),n=n.sibling}function sEe(e,t,n){if(_d&&typeof _d.onCommitFiberUnmount=="function")try{_d.onCommitFiberUnmount(EM,n)}catch{}switch(n.tag){case 5:zo||Z_(n,t);case 6:var r=ro,i=kc;ro=null,fm(e,t,n),ro=r,kc=i,ro!==null&&(kc?(e=ro,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ro.removeChild(n.stateNode));break;case 18:ro!==null&&(kc?(e=ro,n=n.stateNode,e.nodeType===8?F8(e.parentNode,n):e.nodeType===1&&F8(e,n),z2(e)):F8(ro,n.stateNode));break;case 4:r=ro,i=kc,ro=n.stateNode.containerInfo,kc=!0,fm(e,t,n),ro=r,kc=i;break;case 0:case 11:case 14:case 15:if(!zo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ez(n,t,o),i=i.next}while(i!==r)}fm(e,t,n);break;case 1:if(!zo&&(Z_(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ii(n,t,a)}fm(e,t,n);break;case 21:fm(e,t,n);break;case 22:n.mode&1?(zo=(r=zo)||n.memoizedState!==null,fm(e,t,n),zo=r):fm(e,t,n);break;default:fm(e,t,n)}}function vse(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new XWe),t.forEach(function(r){var i=oGe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _c(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:ro=a.stateNode,kc=!1;break e;case 3:ro=a.stateNode.containerInfo,kc=!0;break e;case 4:ro=a.stateNode.containerInfo,kc=!0;break e}a=a.return}if(ro===null)throw Error(qe(160));sEe(s,o,i),ro=null,kc=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Ii(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)oEe(t,e),t=t.sibling}function oEe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_c(t,e),$f(e),r&4){try{FT(3,e,e.return),PM(3,e)}catch(m){Ii(e,e.return,m)}try{FT(5,e,e.return)}catch(m){Ii(e,e.return,m)}}break;case 1:_c(t,e),$f(e),r&512&&n!==null&&Z_(n,n.return);break;case 5:if(_c(t,e),$f(e),r&512&&n!==null&&Z_(n,n.return),e.flags&32){var i=e.stateNode;try{M2(i,"")}catch(m){Ii(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Cbe(i,s),K7(a,o);var l=K7(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?$be(i,f):c==="dangerouslySetInnerHTML"?Pbe(i,f):c==="children"?M2(i,f):RW(i,c,f,l)}switch(a){case"input":H7(i,s);break;case"textarea":Ibe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?vb(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?vb(i,!!s.multiple,s.defaultValue,!0):vb(i,!!s.multiple,s.multiple?[]:"",!1))}i[W2]=s}catch(m){Ii(e,e.return,m)}}break;case 6:if(_c(t,e),$f(e),r&4){if(e.stateNode===null)throw Error(qe(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Ii(e,e.return,m)}}break;case 3:if(_c(t,e),$f(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{z2(t.containerInfo)}catch(m){Ii(e,e.return,m)}break;case 4:_c(t,e),$f(e);break;case 13:_c(t,e),$f(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(dG=Ui())),r&4&&vse(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(zo=(l=zo)||c,_c(t,e),zo=l):_c(t,e),$f(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(ht=e,c=e.child;c!==null;){for(f=ht=c;ht!==null;){switch(d=ht,h=d.child,d.tag){case 0:case 11:case 14:case 15:FT(4,d,d.return);break;case 1:Z_(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Ii(r,n,m)}}break;case 5:Z_(d,d.return);break;case 22:if(d.memoizedState!==null){bse(f);continue}}h!==null?(h.return=d,ht=h):bse(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=kbe("display",o))}catch(m){Ii(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Ii(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:_c(t,e),$f(e),r&4&&vse(e);break;case 21:break;default:_c(t,e),$f(e)}}function $f(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(iEe(n)){var r=n;break e}n=n.return}throw Error(qe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(M2(i,""),r.flags&=-33);var s=yse(e);Tz(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=yse(e);Sz(e,a,o);break;default:throw Error(qe(161))}}catch(u){Ii(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function JWe(e,t,n){ht=e,aEe(e)}function aEe(e,t,n){for(var r=(e.mode&1)!==0;ht!==null;){var i=ht,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||jO;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||zo;a=jO;var l=zo;if(jO=o,(zo=u)&&!l)for(ht=i;ht!==null;)o=ht,u=o.child,o.tag===22&&o.memoizedState!==null?wse(i):u!==null?(u.return=o,ht=u):wse(i);for(;s!==null;)ht=s,aEe(s),s=s.sibling;ht=i,jO=a,zo=l}_se(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ht=s):_se(e)}}function _se(e){for(;ht!==null;){var t=ht;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:zo||PM(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!zo)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Oc(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&nse(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}nse(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&z2(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qe(163))}zo||t.flags&512&&xz(t)}catch(d){Ii(t,t.return,d)}}if(t===e){ht=null;break}if(n=t.sibling,n!==null){n.return=t.return,ht=n;break}ht=t.return}}function bse(e){for(;ht!==null;){var t=ht;if(t===e){ht=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ht=n;break}ht=t.return}}function wse(e){for(;ht!==null;){var t=ht;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{PM(4,t)}catch(u){Ii(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Ii(t,i,u)}}var s=t.return;try{xz(t)}catch(u){Ii(t,s,u)}break;case 5:var o=t.return;try{xz(t)}catch(u){Ii(t,o,u)}}}catch(u){Ii(t,t.return,u)}if(t===e){ht=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ht=a;break}ht=t.return}}var ZWe=Math.ceil,mR=Wp.ReactCurrentDispatcher,cG=Wp.ReactCurrentOwner,ql=Wp.ReactCurrentBatchConfig,Qn=0,Hs=null,ts=null,mo=0,Fu=0,eb=S0(0),ys=0,J2=null,$1=0,kM=0,fG=0,BT=null,Ka=null,dG=0,cw=1/0,Ih=null,gR=!1,Az=null,mg=null,zO=!1,Ym=null,yR=0,jT=0,Cz=null,Mk=-1,Fk=0;function wa(){return Qn&6?Ui():Mk!==-1?Mk:Mk=Ui()}function gg(e){return e.mode&1?Qn&2&&mo!==0?mo&-mo:LWe.transition!==null?(Fk===0&&(Fk=Hbe()),Fk):(e=br,e!==0||(e=window.event,e=e===void 0?16:Qbe(e.type)),e):1}function Zc(e,t,n,r){if(50<jT)throw jT=0,Cz=null,Error(qe(185));PC(e,n,r),(!(Qn&2)||e!==Hs)&&(e===Hs&&(!(Qn&2)&&(kM|=n),ys===4&&Mm(e,mo)),lu(e,r),n===1&&Qn===0&&!(t.mode&1)&&(cw=Ui()+500,CM&&T0()))}function lu(e,t){var n=e.callbackNode;Lqe(e,t);var r=eR(e,e===Hs?mo:0);if(r===0)n!==null&&Pie(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Pie(n),t===1)e.tag===0?DWe(Ese.bind(null,e)):gwe(Ese.bind(null,e)),kWe(function(){!(Qn&6)&&T0()}),n=null;else{switch(qbe(r)){case 1:n=FW;break;case 4:n=Ube;break;case 16:n=Z$;break;case 536870912:n=Vbe;break;default:n=Z$}n=mEe(n,uEe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uEe(e,t){if(Mk=-1,Fk=0,Qn&6)throw Error(qe(327));var n=e.callbackNode;if(xb()&&e.callbackNode!==n)return null;var r=eR(e,e===Hs?mo:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=vR(e,r);else{t=r;var i=Qn;Qn|=2;var s=cEe();(Hs!==e||mo!==t)&&(Ih=null,cw=Ui()+500,l1(e,t));do try{nGe();break}catch(a){lEe(e,a)}while(!0);QW(),mR.current=s,Qn=i,ts!==null?t=0:(Hs=null,mo=0,t=ys)}if(t!==0){if(t===2&&(i=ez(e),i!==0&&(r=i,t=Iz(e,i))),t===1)throw n=J2,l1(e,0),Mm(e,r),lu(e,Ui()),n;if(t===6)Mm(e,r);else{if(i=e.current.alternate,!(r&30)&&!eGe(i)&&(t=vR(e,r),t===2&&(s=ez(e),s!==0&&(r=s,t=Iz(e,s))),t===1))throw n=J2,l1(e,0),Mm(e,r),lu(e,Ui()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(qe(345));case 2:py(e,Ka,Ih);break;case 3:if(Mm(e,r),(r&130023424)===r&&(t=dG+500-Ui(),10<t)){if(eR(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){wa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=uz(py.bind(null,e,Ka,Ih),t);break}py(e,Ka,Ih);break;case 4:if(Mm(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Jc(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Ui()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZWe(r/1960))-r,10<r){e.timeoutHandle=uz(py.bind(null,e,Ka,Ih),r);break}py(e,Ka,Ih);break;case 5:py(e,Ka,Ih);break;default:throw Error(qe(329))}}}return lu(e,Ui()),e.callbackNode===n?uEe.bind(null,e):null}function Iz(e,t){var n=BT;return e.current.memoizedState.isDehydrated&&(l1(e,t).flags|=256),e=vR(e,t),e!==2&&(t=Ka,Ka=n,t!==null&&Oz(t)),e}function Oz(e){Ka===null?Ka=e:Ka.push.apply(Ka,e)}function eGe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!af(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mm(e,t){for(t&=~fG,t&=~kM,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Jc(t),r=1<<n;e[n]=-1,t&=~r}}function Ese(e){if(Qn&6)throw Error(qe(327));xb();var t=eR(e,0);if(!(t&1))return lu(e,Ui()),null;var n=vR(e,t);if(e.tag!==0&&n===2){var r=ez(e);r!==0&&(t=r,n=Iz(e,r))}if(n===1)throw n=J2,l1(e,0),Mm(e,t),lu(e,Ui()),n;if(n===6)throw Error(qe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,py(e,Ka,Ih),lu(e,Ui()),null}function hG(e,t){var n=Qn;Qn|=1;try{return e(t)}finally{Qn=n,Qn===0&&(cw=Ui()+500,CM&&T0())}}function R1(e){Ym!==null&&Ym.tag===0&&!(Qn&6)&&xb();var t=Qn;Qn|=1;var n=ql.transition,r=br;try{if(ql.transition=null,br=1,e)return e()}finally{br=r,ql.transition=n,Qn=t,!(Qn&6)&&T0()}}function pG(){Fu=eb.current,Zr(eb)}function l1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,PWe(n)),ts!==null)for(n=ts.return;n!==null;){var r=n;switch(YW(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sR();break;case 3:uw(),Zr(au),Zr(ea),rG();break;case 5:nG(r);break;case 4:uw();break;case 13:Zr(vi);break;case 19:Zr(vi);break;case 10:JW(r.type._context);break;case 22:case 23:pG()}n=n.return}if(Hs=e,ts=e=yg(e.current,null),mo=Fu=t,ys=0,J2=null,fG=kM=$1=0,Ka=BT=null,Uy!==null){for(t=0;t<Uy.length;t++)if(n=Uy[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Uy=null}return e}function lEe(e,t){do{var n=ts;try{if(QW(),Nk.current=pR,hR){for(var r=_i.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}hR=!1}if(k1=0,Ns=ds=_i=null,MT=!1,K2=0,cG.current=null,n===null||n.return===null){ys=1,J2=t,ts=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=mo,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=lse(o);if(h!==null){h.flags&=-257,cse(h,o,a,s,t),h.mode&1&&use(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){use(s,l,t),mG();break e}u=Error(qe(426))}}else if(ci&&a.mode&1){var g=lse(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),cse(g,o,a,s,t),KW(lw(u,a));break e}}s=u=lw(u,a),ys!==4&&(ys=2),BT===null?BT=[s]:BT.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Wwe(s,u,t);tse(s,y);break e;case 1:a=u;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(mg===null||!mg.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=Gwe(s,a,t);tse(s,b);break e}}s=s.return}while(s!==null)}dEe(n)}catch(E){t=E,ts===n&&n!==null&&(ts=n=n.return);continue}break}while(!0)}function cEe(){var e=mR.current;return mR.current=pR,e===null?pR:e}function mG(){(ys===0||ys===3||ys===2)&&(ys=4),Hs===null||!($1&268435455)&&!(kM&268435455)||Mm(Hs,mo)}function vR(e,t){var n=Qn;Qn|=2;var r=cEe();(Hs!==e||mo!==t)&&(Ih=null,l1(e,t));do try{tGe();break}catch(i){lEe(e,i)}while(!0);if(QW(),Qn=n,mR.current=r,ts!==null)throw Error(qe(261));return Hs=null,mo=0,ys}function tGe(){for(;ts!==null;)fEe(ts)}function nGe(){for(;ts!==null&&!Cqe();)fEe(ts)}function fEe(e){var t=pEe(e.alternate,e,Fu);e.memoizedProps=e.pendingProps,t===null?dEe(e):ts=t,cG.current=null}function dEe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=KWe(n,t),n!==null){n.flags&=32767,ts=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ys=6,ts=null;return}}else if(n=YWe(n,t,Fu),n!==null){ts=n;return}if(t=t.sibling,t!==null){ts=t;return}ts=t=e}while(t!==null);ys===0&&(ys=5)}function py(e,t,n){var r=br,i=ql.transition;try{ql.transition=null,br=1,rGe(e,t,n,r)}finally{ql.transition=i,br=r}return null}function rGe(e,t,n,r){do xb();while(Ym!==null);if(Qn&6)throw Error(qe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(qe(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Mqe(e,s),e===Hs&&(ts=Hs=null,mo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zO||(zO=!0,mEe(Z$,function(){return xb(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ql.transition,ql.transition=null;var o=br;br=1;var a=Qn;Qn|=4,cG.current=null,QWe(e,n),oEe(n,e),xWe(oz),tR=!!sz,oz=sz=null,e.current=n,JWe(n),Iqe(),Qn=a,br=o,ql.transition=s}else e.current=n;if(zO&&(zO=!1,Ym=e,yR=i),s=e.pendingLanes,s===0&&(mg=null),kqe(n.stateNode),lu(e,Ui()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(gR)throw gR=!1,e=Az,Az=null,e;return yR&1&&e.tag!==0&&xb(),s=e.pendingLanes,s&1?e===Cz?jT++:(jT=0,Cz=e):jT=0,T0(),null}function xb(){if(Ym!==null){var e=qbe(yR),t=ql.transition,n=br;try{if(ql.transition=null,br=16>e?16:e,Ym===null)var r=!1;else{if(e=Ym,Ym=null,yR=0,Qn&6)throw Error(qe(331));var i=Qn;for(Qn|=4,ht=e.current;ht!==null;){var s=ht,o=s.child;if(ht.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(ht=l;ht!==null;){var c=ht;switch(c.tag){case 0:case 11:case 15:FT(8,c,s)}var f=c.child;if(f!==null)f.return=c,ht=f;else for(;ht!==null;){c=ht;var d=c.sibling,h=c.return;if(rEe(c),c===l){ht=null;break}if(d!==null){d.return=h,ht=d;break}ht=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}ht=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ht=o;else e:for(;ht!==null;){if(s=ht,s.flags&2048)switch(s.tag){case 0:case 11:case 15:FT(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ht=y;break e}ht=s.return}}var v=e.current;for(ht=v;ht!==null;){o=ht;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,ht=_;else e:for(o=v;ht!==null;){if(a=ht,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:PM(9,a)}}catch(E){Ii(a,a.return,E)}if(a===o){ht=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,ht=b;break e}ht=a.return}}if(Qn=i,T0(),_d&&typeof _d.onPostCommitFiberRoot=="function")try{_d.onPostCommitFiberRoot(EM,e)}catch{}r=!0}return r}finally{br=n,ql.transition=t}}return!1}function xse(e,t,n){t=lw(n,t),t=Wwe(e,t,1),e=pg(e,t,1),t=wa(),e!==null&&(PC(e,1,t),lu(e,t))}function Ii(e,t,n){if(e.tag===3)xse(e,e,n);else for(;t!==null;){if(t.tag===3){xse(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mg===null||!mg.has(r))){e=lw(n,e),e=Gwe(t,e,1),t=pg(t,e,1),e=wa(),t!==null&&(PC(t,1,e),lu(t,e));break}}t=t.return}}function iGe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=wa(),e.pingedLanes|=e.suspendedLanes&n,Hs===e&&(mo&n)===n&&(ys===4||ys===3&&(mo&130023424)===mo&&500>Ui()-dG?l1(e,0):fG|=n),lu(e,t)}function hEe(e,t){t===0&&(e.mode&1?(t=kO,kO<<=1,!(kO&130023424)&&(kO=4194304)):t=1);var n=wa();e=Ep(e,t),e!==null&&(PC(e,t,n),lu(e,n))}function sGe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),hEe(e,n)}function oGe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(qe(314))}r!==null&&r.delete(t),hEe(e,n)}var pEe;pEe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||au.current)ru=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ru=!1,GWe(e,t,n);ru=!!(e.flags&131072)}else ru=!1,ci&&t.flags&1048576&&ywe(t,uR,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Lk(e,t),e=t.pendingProps;var i=sw(t,ea.current);Eb(t,n),i=sG(null,t,r,e,i,n);var s=oG();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,uu(r)?(s=!0,oR(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,eG(t),i.updater=IM,t.stateNode=i,i._reactInternals=t,mz(t,r,e,n),t=vz(null,t,r,!0,s,n)):(t.tag=0,ci&&s&&GW(t),da(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Lk(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=uGe(r),e=Oc(r,e),i){case 0:t=yz(null,t,r,e,n);break e;case 1:t=hse(null,t,r,e,n);break e;case 11:t=fse(null,t,r,e,n);break e;case 14:t=dse(null,t,r,Oc(r.type,e),n);break e}throw Error(qe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Oc(r,i),yz(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Oc(r,i),hse(e,t,r,i,n);case 3:e:{if(Qwe(t),e===null)throw Error(qe(387));r=t.pendingProps,s=t.memoizedState,i=s.element,wwe(e,t),fR(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=lw(Error(qe(423)),t),t=pse(e,t,r,n,i);break e}else if(r!==i){i=lw(Error(qe(424)),t),t=pse(e,t,r,n,i);break e}else for(Wu=hg(t.stateNode.containerInfo.firstChild),Ju=t,ci=!0,Dc=null,n=Twe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ow(),r===i){t=xp(e,t,n);break e}da(e,t,r,n)}t=t.child}return t;case 5:return Awe(t),e===null&&dz(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,az(r,i)?o=null:s!==null&&az(r,s)&&(t.flags|=32),Xwe(e,t),da(e,t,o,n),t.child;case 6:return e===null&&dz(t),null;case 13:return Jwe(e,t,n);case 4:return tG(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=aw(t,null,r,n):da(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Oc(r,i),fse(e,t,r,i,n);case 7:return da(e,t,t.pendingProps,n),t.child;case 8:return da(e,t,t.pendingProps.children,n),t.child;case 12:return da(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Ur(lR,r._currentValue),r._currentValue=o,s!==null)if(af(s.value,o)){if(s.children===i.children&&!au.current){t=xp(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=sp(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),hz(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(qe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),hz(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}da(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Eb(t,n),i=Kl(i),r=r(i),t.flags|=1,da(e,t,r,n),t.child;case 14:return r=t.type,i=Oc(r,t.pendingProps),i=Oc(r.type,i),dse(e,t,r,i,n);case 15:return Ywe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Oc(r,i),Lk(e,t),t.tag=1,uu(r)?(e=!0,oR(t)):e=!1,Eb(t,n),xwe(t,r,i),mz(t,r,i,n),vz(null,t,r,!0,e,n);case 19:return Zwe(e,t,n);case 22:return Kwe(e,t,n)}throw Error(qe(156,t.tag))};function mEe(e,t){return zbe(e,t)}function aGe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jl(e,t,n,r){return new aGe(e,t,n,r)}function gG(e){return e=e.prototype,!(!e||!e.isReactComponent)}function uGe(e){if(typeof e=="function")return gG(e)?1:0;if(e!=null){if(e=e.$$typeof,e===DW)return 11;if(e===LW)return 14}return 2}function yg(e,t){var n=e.alternate;return n===null?(n=jl(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bk(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")gG(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case H_:return c1(n.children,i,s,t);case NW:o=8,i|=8;break;case B7:return e=jl(12,n,t,i|2),e.elementType=B7,e.lanes=s,e;case j7:return e=jl(13,n,t,i),e.elementType=j7,e.lanes=s,e;case z7:return e=jl(19,n,t,i),e.elementType=z7,e.lanes=s,e;case Sbe:return $M(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ebe:o=10;break e;case xbe:o=9;break e;case DW:o=11;break e;case LW:o=14;break e;case Am:o=16,r=null;break e}throw Error(qe(130,e==null?e:typeof e,""))}return t=jl(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function c1(e,t,n,r){return e=jl(7,e,r,t),e.lanes=n,e}function $M(e,t,n,r){return e=jl(22,e,r,t),e.elementType=Sbe,e.lanes=n,e.stateNode={isHidden:!1},e}function W8(e,t,n){return e=jl(6,e,null,t),e.lanes=n,e}function G8(e,t,n){return t=jl(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function lGe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=C8(0),this.expirationTimes=C8(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C8(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function yG(e,t,n,r,i,s,o,a,u){return e=new lGe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=jl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eG(s),e}function cGe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V_,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function gEe(e){if(!e)return Bg;e=e._reactInternals;e:{if(bv(e)!==e||e.tag!==1)throw Error(qe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(uu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(qe(171))}if(e.tag===1){var n=e.type;if(uu(n))return mwe(e,n,t)}return t}function yEe(e,t,n,r,i,s,o,a,u){return e=yG(n,r,!0,e,i,s,o,a,u),e.context=gEe(null),n=e.current,r=wa(),i=gg(n),s=sp(r,i),s.callback=t??null,pg(n,s,i),e.current.lanes=i,PC(e,i,r),lu(e,r),e}function RM(e,t,n,r){var i=t.current,s=wa(),o=gg(i);return n=gEe(n),t.context===null?t.context=n:t.pendingContext=n,t=sp(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=pg(i,t,o),e!==null&&(Zc(e,i,o,s),Rk(e,i,o)),o}function _R(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sse(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function vG(e,t){Sse(e,t),(e=e.alternate)&&Sse(e,t)}function fGe(){return null}var vEe=typeof reportError=="function"?reportError:function(e){console.error(e)};function _G(e){this._internalRoot=e}NM.prototype.render=_G.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(qe(409));RM(e,t,null,null)};NM.prototype.unmount=_G.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;R1(function(){RM(null,e,null,null)}),t[wp]=null}};function NM(e){this._internalRoot=e}NM.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ybe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lm.length&&t!==0&&t<Lm[n].priority;n++);Lm.splice(n,0,e),n===0&&Xbe(e)}};function bG(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function DM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Tse(){}function dGe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=_R(o);s.call(l)}}var o=yEe(t,r,e,0,null,!1,!1,"",Tse);return e._reactRootContainer=o,e[wp]=o.current,H2(e.nodeType===8?e.parentNode:e),R1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=_R(u);a.call(l)}}var u=yG(e,0,!1,null,null,!1,!1,"",Tse);return e._reactRootContainer=u,e[wp]=u.current,H2(e.nodeType===8?e.parentNode:e),R1(function(){RM(t,u,n,r)}),u}function LM(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=_R(o);a.call(u)}}RM(t,o,e,i)}else o=dGe(n,t,e,i,r);return _R(o)}Wbe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=VS(t.pendingLanes);n!==0&&(BW(t,n|1),lu(t,Ui()),!(Qn&6)&&(cw=Ui()+500,T0()))}break;case 13:R1(function(){var r=Ep(e,1);if(r!==null){var i=wa();Zc(r,e,1,i)}}),vG(e,1)}};jW=function(e){if(e.tag===13){var t=Ep(e,134217728);if(t!==null){var n=wa();Zc(t,e,134217728,n)}vG(e,134217728)}};Gbe=function(e){if(e.tag===13){var t=gg(e),n=Ep(e,t);if(n!==null){var r=wa();Zc(n,e,t,r)}vG(e,t)}};Ybe=function(){return br};Kbe=function(e,t){var n=br;try{return br=e,t()}finally{br=n}};Q7=function(e,t,n){switch(t){case"input":if(H7(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=AM(r);if(!i)throw Error(qe(90));Abe(r),H7(r,i)}}}break;case"textarea":Ibe(e,n);break;case"select":t=n.value,t!=null&&vb(e,!!n.multiple,t,!1)}};Dbe=hG;Lbe=R1;var hGe={usingClientEntryPoint:!1,Events:[$C,Y_,AM,Rbe,Nbe,hG]},Vx={findFiberByHostInstance:zy,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},pGe={bundleType:Vx.bundleType,version:Vx.version,rendererPackageName:Vx.rendererPackageName,rendererConfig:Vx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wp.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bbe(e),e===null?null:e.stateNode},findFiberByHostInstance:Vx.findFiberByHostInstance||fGe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var UO=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!UO.isDisabled&&UO.supportsFiber)try{EM=UO.inject(pGe),_d=UO}catch{}}ml.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hGe;ml.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bG(t))throw Error(qe(200));return cGe(e,t,null,n)};ml.createRoot=function(e,t){if(!bG(e))throw Error(qe(299));var n=!1,r="",i=vEe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=yG(e,1,!1,null,null,n,!1,r,i),e[wp]=t.current,H2(e.nodeType===8?e.parentNode:e),new _G(t)};ml.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(qe(188)):(e=Object.keys(e).join(","),Error(qe(268,e)));return e=Bbe(t),e=e===null?null:e.stateNode,e};ml.flushSync=function(e){return R1(e)};ml.hydrate=function(e,t,n){if(!DM(t))throw Error(qe(200));return LM(null,e,t,!0,n)};ml.hydrateRoot=function(e,t,n){if(!bG(e))throw Error(qe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=vEe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=yEe(t,null,e,1,n??null,i,!1,s,o),e[wp]=t.current,H2(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new NM(t)};ml.render=function(e,t,n){if(!DM(t))throw Error(qe(200));return LM(null,e,t,!1,n)};ml.unmountComponentAtNode=function(e){if(!DM(e))throw Error(qe(40));return e._reactRootContainer?(R1(function(){LM(null,null,e,!1,function(){e._reactRootContainer=null,e[wp]=null})}),!0):!1};ml.unstable_batchedUpdates=hG;ml.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!DM(n))throw Error(qe(200));if(e==null||e._reactInternals===void 0)throw Error(qe(38));return LM(e,t,n,!1,r)};ml.version="18.2.0-next-9e3b772b8-20220608";function _Ee(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_Ee)}catch(e){console.error(e)}}_Ee(),ybe.exports=ml;var wv=ybe.exports,Ase=wv;M7.createRoot=Ase.createRoot,M7.hydrateRoot=Ase.hydrateRoot;const bEe=A.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),A0=()=>A.useContext(bEe);function mGe({children:e}){const[t,n]=L.useState(void 0),r=L.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return R.jsx(bEe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Z2(){return Z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z2.apply(this,arguments)}var Km;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Km||(Km={}));const Cse="popstate";function gGe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return Pz("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:wEe(i)}return vGe(t,n,null,e)}function rs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function wG(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yGe(){return Math.random().toString(36).substr(2,8)}function Ise(e,t){return{usr:e.state,key:e.key,idx:t}}function Pz(e,t,n,r){return n===void 0&&(n=null),Z2({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?SE(t):t,{state:n,key:t&&t.key||r||yGe()})}function wEe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function SE(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function vGe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Km.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(Z2({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Km.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Km.Push;let v=Pz(m.location,g,y);n&&n(v,g),l=c()+1;let _=Ise(v,l),b=m.createHref(v);try{o.pushState(_,"",b)}catch{i.location.assign(b)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Km.Replace;let v=Pz(m.location,g,y);n&&n(v,g),l=c();let _=Ise(v,l),b=m.createHref(v);o.replaceState(_,"",b),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:wEe(g);return rs(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Cse,f),u=g,()=>{i.removeEventListener(Cse,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var Ose;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ose||(Ose={}));function _Ge(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?SE(t):t,i=SEe(r.pathname||"/",n);if(i==null)return null;let s=EEe(e);bGe(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=OGe(s[a],$Ge(i));return o}function EEe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(rs(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=vg([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(rs(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),EEe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:CGe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of xEe(s.path))i(s,o,u)}),t}function xEe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=xEe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function bGe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:IGe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const wGe=/^:\w+$/,EGe=3,xGe=2,SGe=1,TGe=10,AGe=-2,Pse=e=>e==="*";function CGe(e,t){let n=e.split("/"),r=n.length;return n.some(Pse)&&(r+=AGe),t&&(r+=xGe),n.filter(i=>!Pse(i)).reduce((i,s)=>i+(wGe.test(s)?EGe:s===""?SGe:TGe),r)}function IGe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function OGe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=PGe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:vg([i,c.pathname]),pathnameBase:LGe(vg([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=vg([i,c.pathnameBase]))}return s}function PGe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=kGe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{if(c==="*"){let d=a[f]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return l[c]=RGe(a[f]||"",c),l},{}),pathname:s,pathnameBase:o,pattern:e}}function kGe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),wG(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return e.endsWith("*")?(r.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function $Ge(e){try{return decodeURI(e)}catch(t){return wG(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function RGe(e,t){try{return decodeURIComponent(e)}catch(n){return wG(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function SEe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function NGe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?SE(e):e;return{pathname:n?n.startsWith("/")?n:DGe(n,t):t,search:MGe(r),hash:FGe(i)}}function DGe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Y8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function TEe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function AEe(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=SE(e):(i=Z2({},e),rs(!i.pathname||!i.pathname.includes("?"),Y8("?","pathname","search",i)),rs(!i.pathname||!i.pathname.includes("#"),Y8("#","pathname","hash",i)),rs(!i.search||!i.search.includes("#"),Y8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let f=t.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=NGe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const vg=e=>e.join("/").replace(/\/\/+/g,"/"),LGe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),MGe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,FGe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function BGe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const CEe=["post","put","patch","delete"];new Set(CEe);const jGe=["get",...CEe];new Set(jGe);/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zGe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const UGe=typeof Object.is=="function"?Object.is:zGe,{useState:VGe,useEffect:HGe,useLayoutEffect:qGe,useDebugValue:WGe}=I1;function GGe(e,t,n){const r=t(),[{inst:i},s]=VGe({inst:{value:r,getSnapshot:t}});return qGe(()=>{i.value=r,i.getSnapshot=t,K8(i)&&s({inst:i})},[e,r,t]),HGe(()=>(K8(i)&&s({inst:i}),e(()=>{K8(i)&&s({inst:i})})),[e]),WGe(r),r}function K8(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!UGe(n,r)}catch{return!0}}function YGe(e,t,n){return t()}const KGe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XGe=!KGe,QGe=XGe?YGe:GGe;"useSyncExternalStore"in I1&&(e=>e.useSyncExternalStore)(I1);const IEe=A.createContext(null),EG=A.createContext(null),MM=A.createContext(null),FM=A.createContext(null),C0=A.createContext({outlet:null,matches:[]}),OEe=A.createContext(null);function kz(){return kz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kz.apply(this,arguments)}function JGe(e,t){let{relative:n}=t===void 0?{}:t;TE()||rs(!1);let{basename:r,navigator:i}=A.useContext(MM),{hash:s,pathname:o,search:a}=tYe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:vg([r,o])),i.createHref({pathname:u,search:a,hash:s})}function TE(){return A.useContext(FM)!=null}function BM(){return TE()||rs(!1),A.useContext(FM).location}function Ev(){TE()||rs(!1);let{basename:e,navigator:t}=A.useContext(MM),{matches:n}=A.useContext(C0),{pathname:r}=BM(),i=JSON.stringify(TEe(n).map(a=>a.pathnameBase)),s=A.useRef(!1);return A.useEffect(()=>{s.current=!0}),A.useCallback(function(a,u){if(u===void 0&&(u={}),!s.current)return;if(typeof a=="number"){t.go(a);return}let l=AEe(a,JSON.parse(i),r,u.relative==="path");e!=="/"&&(l.pathname=l.pathname==="/"?e:vg([e,l.pathname])),(u.replace?t.replace:t.push)(l,u.state,u)},[e,t,i,r])}const ZGe=A.createContext(null);function eYe(e){let t=A.useContext(C0).outlet;return t&&A.createElement(ZGe.Provider,{value:e},t)}function jM(){let{matches:e}=A.useContext(C0),t=e[e.length-1];return t?t.params:{}}function tYe(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=A.useContext(C0),{pathname:i}=BM(),s=JSON.stringify(TEe(r).map(o=>o.pathnameBase));return A.useMemo(()=>AEe(e,JSON.parse(s),i,n==="path"),[e,s,i,n])}function PEe(e,t){TE()||rs(!1);let{navigator:n}=A.useContext(MM),r=A.useContext(EG),{matches:i}=A.useContext(C0),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let u=BM(),l;if(t){var c;let m=typeof t=="string"?SE(t):t;a==="/"||(c=m.pathname)!=null&&c.startsWith(a)||rs(!1),l=m}else l=u;let f=l.pathname||"/",d=a==="/"?f:f.slice(a.length)||"/",h=_Ge(e,{pathname:d}),p=sYe(h&&h.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:vg([a,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?a:vg([a,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,r||void 0);return t&&p?A.createElement(FM.Provider,{value:{location:kz({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:Km.Pop}},p):p}function nYe(){let e=lYe(),t=BGe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),n?A.createElement("pre",{style:i},n):null,s)}class rYe extends A.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?A.createElement(C0.Provider,{value:this.props.routeContext},A.createElement(OEe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iYe(e){let{routeContext:t,match:n,children:r}=e,i=A.useContext(IEe);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(C0.Provider,{value:t},r)}function sYe(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let r=e,i=n==null?void 0:n.errors;if(i!=null){let s=r.findIndex(o=>o.route.id&&(i==null?void 0:i[o.route.id]));s>=0||rs(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,o,a)=>{let u=o.route.id?i==null?void 0:i[o.route.id]:null,l=null;n&&(o.route.ErrorBoundary?l=A.createElement(o.route.ErrorBoundary,null):o.route.errorElement?l=o.route.errorElement:l=A.createElement(nYe,null));let c=t.concat(r.slice(0,a+1)),f=()=>{let d=s;return u?d=l:o.route.Component?d=A.createElement(o.route.Component,null):o.route.element&&(d=o.route.element),A.createElement(iYe,{match:o,routeContext:{outlet:s,matches:c},children:d})};return n&&(o.route.ErrorBoundary||o.route.errorElement||a===0)?A.createElement(rYe,{location:n.location,component:l,error:u,children:f(),routeContext:{outlet:null,matches:c}}):f()},null)}var kse;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(kse||(kse={}));var bR;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(bR||(bR={}));function oYe(e){let t=A.useContext(EG);return t||rs(!1),t}function aYe(e){let t=A.useContext(C0);return t||rs(!1),t}function uYe(e){let t=aYe(),n=t.matches[t.matches.length-1];return n.route.id||rs(!1),n.route.id}function lYe(){var e;let t=A.useContext(OEe),n=oYe(bR.UseRouteError),r=uYe(bR.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function cYe(e){let{to:t,replace:n,state:r,relative:i}=e;TE()||rs(!1);let s=A.useContext(EG),o=Ev();return A.useEffect(()=>{s&&s.navigation.state!=="idle"||o(t,{replace:n,state:r,relative:i})}),null}function fYe(e){return eYe(e.context)}function jk(e){rs(!1)}function dYe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Km.Pop,navigator:s,static:o=!1}=e;TE()&&rs(!1);let a=t.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=SE(r));let{pathname:l="/",search:c="",hash:f="",state:d=null,key:h="default"}=r,p=A.useMemo(()=>{let m=SEe(l,a);return m==null?null:{location:{pathname:m,search:c,hash:f,state:d,key:h},navigationType:i}},[a,l,c,f,d,h,i]);return p==null?null:A.createElement(MM.Provider,{value:u},A.createElement(FM.Provider,{children:n,value:p}))}function hYe(e){let{children:t,location:n}=e,r=A.useContext(IEe),i=r&&!t?r.router.routes:$z(t);return PEe(i,n)}var $se;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})($se||($se={}));new Promise(()=>{});function $z(e,t){t===void 0&&(t=[]);let n=[];return A.Children.forEach(e,(r,i)=>{if(!A.isValidElement(r))return;let s=[...t,i];if(r.type===A.Fragment){n.push.apply(n,$z(r.props.children,s));return}r.type!==jk&&rs(!1),!r.props.index||!r.props.children||rs(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=$z(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rz(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function pYe(e,t){let n=Rz(e);if(t)for(let r of t.keys())n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)});return n}function mYe(e){let{basename:t,children:n,window:r}=e,i=A.useRef();i.current==null&&(i.current=gGe({window:r,v5Compat:!0}));let s=i.current,[o,a]=A.useState({action:s.action,location:s.location});return A.useLayoutEffect(()=>s.listen(a),[s]),A.createElement(dYe,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:s})}var Rse;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Rse||(Rse={}));var Nse;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Nse||(Nse={}));function xG(e){let t=A.useRef(Rz(e)),n=A.useRef(!1),r=BM(),i=A.useMemo(()=>pYe(r.search,n.current?null:t.current),[r.search]),s=Ev(),o=A.useCallback((a,u)=>{const l=Rz(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}function wR(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function gYe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function yYe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function vYe(e,t,n){return wR(e,n)===wR(t,n)}function _Ye({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var u;n==null||n(a);const l=Array.from(((u=wR(a.currentTarget,e))==null?void 0:u.querySelectorAll(t))||[]).filter(m=>vYe(a.currentTarget,m,e)),c=l.findIndex(m=>a.currentTarget===m),f=yYe(c,l,r),d=gYe(c,l,r),h=s==="rtl"?d:f,p=s==="rtl"?f:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),i&&l[h].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[p].focus(),i&&l[p].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),i&&l[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),i&&l[f].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=l.length-1;!l[m].disabled&&l[m].focus();break}}}}function bYe(e,t,n){var r;return n?Array.from(((r=wR(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function kEe(e){const t=A.createContext(null);return[({children:i,value:s})=>L.createElement(t.Provider,{value:s},i),()=>{const i=A.useContext(t);if(i===null)throw new Error(e);return i}]}function N1(e){return Array.isArray(e)?e:[e]}const wYe=()=>{};function EYe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||wYe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Wh(e,t){return n=>{e==null||e(n),t==null||t(n)}}function xYe(){const[e,t]=A.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function $Ee({data:e}){const t=[],n=[],r=e.reduce((i,s,o)=>(s.group?i[s.group]?i[s.group].push(o):i[s.group]=[o]:n.push(o),i),{});return Object.keys(r).forEach(i=>{t.push(...r[i].map(s=>e[s]))}),t.push(...n.map(i=>e[i])),t}function NC(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==L.Fragment:!1}function REe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=REe(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function NEe(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=REe(t))&&(r&&(r+=" "),r+=n);return r}const SYe={dark:["#C1C2C5","#A6A7AB","#909296","#5c5f66","#373A40","#2C2E33","#25262b","#1A1B1E","#141517","#101113"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};function TYe(e){return()=>({fontFamily:e.fontFamily||"sans-serif"})}var AYe=Object.defineProperty,Dse=Object.getOwnPropertySymbols,CYe=Object.prototype.hasOwnProperty,IYe=Object.prototype.propertyIsEnumerable,Lse=(e,t,n)=>t in e?AYe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mse=(e,t)=>{for(var n in t||(t={}))CYe.call(t,n)&&Lse(e,n,t[n]);if(Dse)for(var n of Dse(t))IYe.call(t,n)&&Lse(e,n,t[n]);return e};function OYe(e){return t=>({WebkitTapHighlightColor:"transparent",[t||"&:focus"]:Mse({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[t?t.replace(":focus",":focus:not(:focus-visible)"):"&:focus:not(:focus-visible)"]:Mse({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)})}function DC(e){return t=>typeof e.primaryShade=="number"?e.primaryShade:e.primaryShade[t||e.colorScheme]}function SG(e){const t=DC(e);return(n,r,i=!0,s=!0)=>{if(typeof n=="string"&&n.includes(".")){const[a,u]=n.split("."),l=parseInt(u,10);if(a in e.colors&&l>=0&&l<10)return e.colors[a][typeof r=="number"&&!s?r:l]}const o=typeof r=="number"?r:t();return n in e.colors?e.colors[n][o]:i?e.colors[e.primaryColor][o]:n}}function DEe(e){let t="";for(let n=1;n<e.length-1;n+=1)t+=`${e[n]} ${n/(e.length-1)*100}%, `;return`${e[0]} 0%, ${t}${e[e.length-1]} 100%`}function PYe(e,...t){return`linear-gradient(${e}deg, ${DEe(t)})`}function kYe(...e){return`radial-gradient(circle, ${DEe(e)})`}function LEe(e){const t=SG(e),n=DC(e);return r=>{const i={from:(r==null?void 0:r.from)||e.defaultGradient.from,to:(r==null?void 0:r.to)||e.defaultGradient.to,deg:(r==null?void 0:r.deg)||e.defaultGradient.deg};return`linear-gradient(${i.deg}deg, ${t(i.from,n(),!1)} 0%, ${t(i.to,n(),!1)} 100%)`}}function TG(e){if(typeof e.size=="number")return e.size;const t=e.sizes[e.size];return t!==void 0?t:e.size||e.sizes.md}function $Ye(e){return t=>`@media (min-width: ${TG({size:t,sizes:e.breakpoints})}px)`}function RYe(e){return t=>`@media (max-width: ${TG({size:t,sizes:e.breakpoints})-1}px)`}function NYe(e){return/^#?([0-9A-F]{3}){1,2}$/i.test(e)}function DYe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function LYe(e){const[t,n,r,i]=e.replace(/[^0-9,.]/g,"").split(",").map(Number);return{r:t,g:n,b:r,a:i||1}}function AG(e){return NYe(e)?DYe(e):e.startsWith("rgb")?LYe(e):{r:0,g:0,b:0,a:1}}function k_(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";const{r:n,g:r,b:i}=AG(e);return`rgba(${n}, ${r}, ${i}, ${t})`}function MYe(e=0){return{position:"absolute",top:e,right:e,left:e,bottom:e}}function FYe(e,t){const{r:n,g:r,b:i,a:s}=AG(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function BYe(e,t){const{r:n,g:r,b:i,a:s}=AG(e),o=a=>Math.round(a+(255-a)*t);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${s})`}function jYe(e){return t=>{if(typeof t=="number")return t;const n=typeof e.defaultRadius=="number"?e.defaultRadius:e.radius[e.defaultRadius]||e.defaultRadius;return e.radius[t]||t||n}}function zYe(e,t){if(typeof e=="string"&&e.includes(".")){const[n,r]=e.split("."),i=parseInt(r,10);if(n in t.colors&&i>=0&&i<10)return{isSplittedColor:!0,key:n,shade:i}}return{isSplittedColor:!1}}function UYe(e){const t=SG(e),n=DC(e),r=LEe(e);return({variant:i,color:s,gradient:o,primaryFallback:a})=>{const u=zYe(s,e);switch(i){case"light":return{border:"transparent",background:k_(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1),color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:k_(t(s,e.colorScheme==="dark"?7:1,a,!1),e.colorScheme==="dark"?.25:.65)};case"subtle":return{border:"transparent",background:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:k_(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1)};case"outline":return{border:t(s,e.colorScheme==="dark"?5:n("light")),background:"transparent",color:t(s,e.colorScheme==="dark"?5:n("light")),hover:e.colorScheme==="dark"?k_(t(s,5,a,!1),.05):k_(t(s,0,a,!1),.35)};case"default":return{border:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4],background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,color:e.colorScheme==="dark"?e.white:e.black,hover:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]};case"white":return{border:"transparent",background:e.white,color:t(s,n()),hover:null};case"transparent":return{border:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),background:"transparent",hover:null};case"gradient":return{background:r(o),color:e.white,border:"transparent",hover:null};default:{const l=n(),c=u.isSplittedColor?u.shade:l,f=u.isSplittedColor?u.key:s;return{border:"transparent",background:t(f,c,a),color:e.white,hover:t(f,c===9?8:c+1)}}}}}function VYe(e){return t=>{const n=DC(e)(t);return e.colors[e.primaryColor][n]}}function HYe(e){return{"@media (hover: hover)":{"&:hover":e},"@media (hover: none)":{"&:active":e}}}const Ps={fontStyles:TYe,themeColor:SG,focusStyles:OYe,linearGradient:PYe,radialGradient:kYe,smallerThan:RYe,largerThan:$Ye,rgba:k_,size:TG,cover:MYe,darken:FYe,lighten:BYe,radius:jYe,variant:UYe,primaryShade:DC,hover:HYe,gradient:LEe,primaryColor:VYe};var qYe=Object.defineProperty,WYe=Object.defineProperties,GYe=Object.getOwnPropertyDescriptors,Fse=Object.getOwnPropertySymbols,YYe=Object.prototype.hasOwnProperty,KYe=Object.prototype.propertyIsEnumerable,Bse=(e,t,n)=>t in e?qYe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XYe=(e,t)=>{for(var n in t||(t={}))YYe.call(t,n)&&Bse(e,n,t[n]);if(Fse)for(var n of Fse(t))KYe.call(t,n)&&Bse(e,n,t[n]);return e},QYe=(e,t)=>WYe(e,GYe(t));function JYe(e){return QYe(XYe({},e),{fn:{fontStyles:Ps.fontStyles(e),themeColor:Ps.themeColor(e),focusStyles:Ps.focusStyles(e),largerThan:Ps.largerThan(e),smallerThan:Ps.smallerThan(e),radialGradient:Ps.radialGradient,linearGradient:Ps.linearGradient,gradient:Ps.gradient(e),rgba:Ps.rgba,size:Ps.size,cover:Ps.cover,lighten:Ps.lighten,darken:Ps.darken,primaryShade:Ps.primaryShade(e),radius:Ps.radius(e),variant:Ps.variant(e),hover:Ps.hover,primaryColor:Ps.primaryColor(e)}})}const ZYe=["xs","sm","md","lg","xl"],eKe={dir:"ltr",primaryShade:{light:6,dark:8},focusRing:"auto",loader:"oval",dateFormat:"MMMM D, YYYY",colorScheme:"light",white:"#fff",black:"#000",defaultRadius:"sm",transitionTimingFunction:"ease",colors:SYe,lineHeight:1.55,fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",primaryColor:"blue",respectReducedMotion:!0,cursorType:"default",defaultGradient:{from:"indigo",to:"cyan",deg:45},shadows:{xs:"0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1)",sm:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 10px 15px -5px, rgba(0, 0, 0, 0.04) 0px 7px 7px -5px",md:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px -5px",lg:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 28px 23px -7px, rgba(0, 0, 0, 0.04) 0px 12px 12px -7px",xl:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 36px 28px -7px, rgba(0, 0, 0, 0.04) 0px 17px 17px -7px"},fontSizes:{xs:12,sm:14,md:16,lg:18,xl:20},radius:{xs:2,sm:4,md:8,lg:16,xl:32},spacing:{xs:10,sm:12,md:16,lg:20,xl:24},breakpoints:{xs:576,sm:768,md:992,lg:1200,xl:1400},headings:{fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontWeight:700,sizes:{h1:{fontSize:34,lineHeight:1.3,fontWeight:void 0},h2:{fontSize:26,lineHeight:1.35,fontWeight:void 0},h3:{fontSize:22,lineHeight:1.4,fontWeight:void 0},h4:{fontSize:18,lineHeight:1.45,fontWeight:void 0},h5:{fontSize:16,lineHeight:1.5,fontWeight:void 0},h6:{fontSize:14,lineHeight:1.5,fontWeight:void 0}}},other:{},components:{},activeStyles:{transform:"translateY(1px)"},datesLocale:"en",globalStyles:void 0,focusRingStyles:{styles:e=>({outlineOffset:2,outline:`2px solid ${e.colors[e.primaryColor][e.colorScheme==="dark"?7:5]}`}),resetStyles:()=>({outline:"none"}),inputStyles:e=>({outline:"none",borderColor:e.colors[e.primaryColor][typeof e.primaryShade=="object"?e.primaryShade[e.colorScheme]:e.primaryShade]})}},MEe=JYe(eKe);function tKe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function nKe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var rKe=function(){function e(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(nKe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=tKe(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),No="-ms-",ER="-moz-",lr="-webkit-",FEe="comm",CG="rule",IG="decl",iKe="@import",BEe="@keyframes",sKe=Math.abs,zM=String.fromCharCode,oKe=Object.assign;function aKe(e,t){return uo(e,0)^45?(((t<<2^uo(e,0))<<2^uo(e,1))<<2^uo(e,2))<<2^uo(e,3):0}function jEe(e){return e.trim()}function uKe(e,t){return(e=t.exec(e))?e[0]:e}function mr(e,t,n){return e.replace(t,n)}function Nz(e,t){return e.indexOf(t)}function uo(e,t){return e.charCodeAt(t)|0}function eA(e,t,n){return e.slice(t,n)}function Xf(e){return e.length}function OG(e){return e.length}function VO(e,t){return t.push(e),e}function lKe(e,t){return e.map(t).join("")}var UM=1,fw=1,zEe=0,pu=0,Zi=0,AE="";function VM(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:UM,column:fw,length:o,return:""}}function Hx(e,t){return oKe(VM("",null,null,"",null,null,0),e,{length:-e.length},t)}function cKe(){return Zi}function fKe(){return Zi=pu>0?uo(AE,--pu):0,fw--,Zi===10&&(fw=1,UM--),Zi}function Zu(){return Zi=pu<zEe?uo(AE,pu++):0,fw++,Zi===10&&(fw=1,UM++),Zi}function wd(){return uo(AE,pu)}function zk(){return pu}function LC(e,t){return eA(AE,e,t)}function tA(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function UEe(e){return UM=fw=1,zEe=Xf(AE=e),pu=0,[]}function VEe(e){return AE="",e}function Uk(e){return jEe(LC(pu-1,Dz(e===91?e+2:e===40?e+1:e)))}function dKe(e){for(;(Zi=wd())&&Zi<33;)Zu();return tA(e)>2||tA(Zi)>3?"":" "}function hKe(e,t){for(;--t&&Zu()&&!(Zi<48||Zi>102||Zi>57&&Zi<65||Zi>70&&Zi<97););return LC(e,zk()+(t<6&&wd()==32&&Zu()==32))}function Dz(e){for(;Zu();)switch(Zi){case e:return pu;case 34:case 39:e!==34&&e!==39&&Dz(Zi);break;case 40:e===41&&Dz(e);break;case 92:Zu();break}return pu}function pKe(e,t){for(;Zu()&&e+Zi!==57;)if(e+Zi===84&&wd()===47)break;return"/*"+LC(t,pu-1)+"*"+zM(e===47?e:Zu())}function mKe(e){for(;!tA(wd());)Zu();return LC(e,pu)}function gKe(e){return VEe(Vk("",null,null,null,[""],e=UEe(e),0,[0],e))}function Vk(e,t,n,r,i,s,o,a,u){for(var l=0,c=0,f=o,d=0,h=0,p=0,m=1,g=1,y=1,v=0,_="",b=i,E=s,w=r,x=_;g;)switch(p=v,v=Zu()){case 40:if(p!=108&&uo(x,f-1)==58){Nz(x+=mr(Uk(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:x+=Uk(v);break;case 9:case 10:case 13:case 32:x+=dKe(p);break;case 92:x+=hKe(zk()-1,7);continue;case 47:switch(wd()){case 42:case 47:VO(yKe(pKe(Zu(),zk()),t,n),u);break;default:x+="/"}break;case 123*m:a[l++]=Xf(x)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+c:h>0&&Xf(x)-f&&VO(h>32?zse(x+";",r,n,f-1):zse(mr(x," ","")+";",r,n,f-2),u);break;case 59:x+=";";default:if(VO(w=jse(x,t,n,l,c,i,a,_,b=[],E=[],f),s),v===123)if(c===0)Vk(x,t,w,w,b,s,f,a,E);else switch(d===99&&uo(x,3)===110?100:d){case 100:case 109:case 115:Vk(e,w,w,r&&VO(jse(e,w,w,0,0,i,a,_,i,b=[],f),E),i,E,f,a,r?b:E);break;default:Vk(x,w,w,w,[""],E,0,a,E)}}l=c=h=0,m=y=1,_=x="",f=o;break;case 58:f=1+Xf(x),h=p;default:if(m<1){if(v==123)--m;else if(v==125&&m++==0&&fKe()==125)continue}switch(x+=zM(v),v*m){case 38:y=c>0?1:(x+="\f",-1);break;case 44:a[l++]=(Xf(x)-1)*y,y=1;break;case 64:wd()===45&&(x+=Uk(Zu())),d=wd(),c=f=Xf(_=x+=mKe(zk())),v++;break;case 45:p===45&&Xf(x)==2&&(m=0)}}return s}function jse(e,t,n,r,i,s,o,a,u,l,c){for(var f=i-1,d=i===0?s:[""],h=OG(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=eA(e,f+1,f=sKe(m=o[p])),_=e;y<h;++y)(_=jEe(m>0?d[y]+" "+v:mr(v,/&\f/g,d[y])))&&(u[g++]=_);return VM(e,t,n,i===0?CG:a,u,l,c)}function yKe(e,t,n){return VM(e,t,n,FEe,zM(cKe()),eA(e,2,-2),0)}function zse(e,t,n,r){return VM(e,t,n,IG,eA(e,0,r),eA(e,r+1,-1),r)}function Sb(e,t){for(var n="",r=OG(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function vKe(e,t,n,r){switch(e.type){case iKe:case IG:return e.return=e.return||e.value;case FEe:return"";case BEe:return e.return=e.value+"{"+Sb(e.children,r)+"}";case CG:e.value=e.props.join(",")}return Xf(n=Sb(e.children,r))?e.return=e.value+"{"+n+"}":""}function _Ke(e){var t=OG(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}function bKe(e){return function(t){t.root||(t=t.return)&&e(t)}}function wKe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var EKe=function(t,n,r){for(var i=0,s=0;i=s,s=wd(),i===38&&s===12&&(n[r]=1),!tA(s);)Zu();return LC(t,pu)},xKe=function(t,n){var r=-1,i=44;do switch(tA(i)){case 0:i===38&&wd()===12&&(n[r]=1),t[r]+=EKe(pu-1,n,r);break;case 2:t[r]+=Uk(i);break;case 4:if(i===44){t[++r]=wd()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=zM(i)}while(i=Zu());return t},SKe=function(t,n){return VEe(xKe(UEe(t),n))},Use=new WeakMap,TKe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!Use.get(r))&&!i){Use.set(t,!0);for(var s=[],o=SKe(n,s),a=r.props,u=0,l=0;u<o.length;u++)for(var c=0;c<a.length;c++,l++)t.props[l]=s[u]?o[u].replace(/&\f/g,a[c]):a[c]+" "+o[u]}}},AKe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function HEe(e,t){switch(aKe(e,t)){case 5103:return lr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return lr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return lr+e+ER+e+No+e+e;case 6828:case 4268:return lr+e+No+e+e;case 6165:return lr+e+No+"flex-"+e+e;case 5187:return lr+e+mr(e,/(\w+).+(:[^]+)/,lr+"box-$1$2"+No+"flex-$1$2")+e;case 5443:return lr+e+No+"flex-item-"+mr(e,/flex-|-self/,"")+e;case 4675:return lr+e+No+"flex-line-pack"+mr(e,/align-content|flex-|-self/,"")+e;case 5548:return lr+e+No+mr(e,"shrink","negative")+e;case 5292:return lr+e+No+mr(e,"basis","preferred-size")+e;case 6060:return lr+"box-"+mr(e,"-grow","")+lr+e+No+mr(e,"grow","positive")+e;case 4554:return lr+mr(e,/([^-])(transform)/g,"$1"+lr+"$2")+e;case 6187:return mr(mr(mr(e,/(zoom-|grab)/,lr+"$1"),/(image-set)/,lr+"$1"),e,"")+e;case 5495:case 3959:return mr(e,/(image-set\([^]*)/,lr+"$1$`$1");case 4968:return mr(mr(e,/(.+:)(flex-)?(.*)/,lr+"box-pack:$3"+No+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+lr+e+e;case 4095:case 3583:case 4068:case 2532:return mr(e,/(.+)-inline(.+)/,lr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Xf(e)-1-t>6)switch(uo(e,t+1)){case 109:if(uo(e,t+4)!==45)break;case 102:return mr(e,/(.+:)(.+)-([^]+)/,"$1"+lr+"$2-$3$1"+ER+(uo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Nz(e,"stretch")?HEe(mr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(uo(e,t+1)!==115)break;case 6444:switch(uo(e,Xf(e)-3-(~Nz(e,"!important")&&10))){case 107:return mr(e,":",":"+lr)+e;case 101:return mr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+lr+(uo(e,14)===45?"inline-":"")+"box$3$1"+lr+"$2$3$1"+No+"$2box$3")+e}break;case 5936:switch(uo(e,t+11)){case 114:return lr+e+No+mr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return lr+e+No+mr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return lr+e+No+mr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return lr+e+No+e+e}return e}var CKe=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case IG:t.return=HEe(t.value,t.length);break;case BEe:return Sb([Hx(t,{value:mr(t.value,"@","@"+lr)})],i);case CG:if(t.length)return lKe(t.props,function(s){switch(uKe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Sb([Hx(t,{props:[mr(s,/:(read-\w+)/,":"+ER+"$1")]})],i);case"::placeholder":return Sb([Hx(t,{props:[mr(s,/:(plac\w+)/,":"+lr+"input-$1")]}),Hx(t,{props:[mr(s,/:(plac\w+)/,":"+ER+"$1")]}),Hx(t,{props:[mr(s,/:(plac\w+)/,No+"input-$1")]})],i)}return""})}},IKe=[CKe],OKe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||IKe,s={},o,a=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),y=1;y<g.length;y++)s[g[y]]=!0;a.push(m)});var u,l=[TKe,AKe];{var c,f=[vKe,bKe(function(m){c.insert(m)})],d=_Ke(l.concat(i,f)),h=function(g){return Sb(gKe(g),d)};u=function(g,y,v,_){c=v,h(g?g+"{"+y.styles+"}":y.styles),_&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new rKe({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:u};return p.sheet.hydrate(a),p};const qEe=OKe;function di(){return di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},di.apply(this,arguments)}var WEe={exports:{}},Er={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ys=typeof Symbol=="function"&&Symbol.for,PG=Ys?Symbol.for("react.element"):60103,kG=Ys?Symbol.for("react.portal"):60106,HM=Ys?Symbol.for("react.fragment"):60107,qM=Ys?Symbol.for("react.strict_mode"):60108,WM=Ys?Symbol.for("react.profiler"):60114,GM=Ys?Symbol.for("react.provider"):60109,YM=Ys?Symbol.for("react.context"):60110,$G=Ys?Symbol.for("react.async_mode"):60111,KM=Ys?Symbol.for("react.concurrent_mode"):60111,XM=Ys?Symbol.for("react.forward_ref"):60112,QM=Ys?Symbol.for("react.suspense"):60113,PKe=Ys?Symbol.for("react.suspense_list"):60120,JM=Ys?Symbol.for("react.memo"):60115,ZM=Ys?Symbol.for("react.lazy"):60116,kKe=Ys?Symbol.for("react.block"):60121,$Ke=Ys?Symbol.for("react.fundamental"):60117,RKe=Ys?Symbol.for("react.responder"):60118,NKe=Ys?Symbol.for("react.scope"):60119;function yl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case PG:switch(e=e.type,e){case $G:case KM:case HM:case WM:case qM:case QM:return e;default:switch(e=e&&e.$$typeof,e){case YM:case XM:case ZM:case JM:case GM:return e;default:return t}}case kG:return t}}}function GEe(e){return yl(e)===KM}Er.AsyncMode=$G;Er.ConcurrentMode=KM;Er.ContextConsumer=YM;Er.ContextProvider=GM;Er.Element=PG;Er.ForwardRef=XM;Er.Fragment=HM;Er.Lazy=ZM;Er.Memo=JM;Er.Portal=kG;Er.Profiler=WM;Er.StrictMode=qM;Er.Suspense=QM;Er.isAsyncMode=function(e){return GEe(e)||yl(e)===$G};Er.isConcurrentMode=GEe;Er.isContextConsumer=function(e){return yl(e)===YM};Er.isContextProvider=function(e){return yl(e)===GM};Er.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===PG};Er.isForwardRef=function(e){return yl(e)===XM};Er.isFragment=function(e){return yl(e)===HM};Er.isLazy=function(e){return yl(e)===ZM};Er.isMemo=function(e){return yl(e)===JM};Er.isPortal=function(e){return yl(e)===kG};Er.isProfiler=function(e){return yl(e)===WM};Er.isStrictMode=function(e){return yl(e)===qM};Er.isSuspense=function(e){return yl(e)===QM};Er.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===HM||e===KM||e===WM||e===qM||e===QM||e===PKe||typeof e=="object"&&e!==null&&(e.$$typeof===ZM||e.$$typeof===JM||e.$$typeof===GM||e.$$typeof===YM||e.$$typeof===XM||e.$$typeof===$Ke||e.$$typeof===RKe||e.$$typeof===NKe||e.$$typeof===kKe)};Er.typeOf=yl;WEe.exports=Er;var DKe=WEe.exports,YEe=DKe,LKe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MKe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},KEe={};KEe[YEe.ForwardRef]=LKe;KEe[YEe.Memo]=MKe;var FKe=!0;function BKe(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var jKe=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||FKe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},XEe=function(t,n,r){jKe(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function zKe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var UKe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},VKe=/[A-Z]|^ms/g,HKe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,QEe=function(t){return t.charCodeAt(1)===45},Vse=function(t){return t!=null&&typeof t!="boolean"},X8=wKe(function(e){return QEe(e)?e:e.replace(VKe,"-$&").toLowerCase()}),Hse=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(HKe,function(r,i,s){return Qf={name:i,styles:s,next:Qf},i})}return UKe[t]!==1&&!QEe(t)&&typeof n=="number"&&n!==0?n+"px":n};function nA(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Qf={name:n.name,styles:n.styles,next:Qf},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Qf={name:r.name,styles:r.styles,next:Qf},r=r.next;var i=n.styles+";";return i}return qKe(e,t,n)}case"function":{if(e!==void 0){var s=Qf,o=n(e);return Qf=s,nA(e,t,o)}break}}if(t==null)return n;var a=t[n];return a!==void 0?a:n}function qKe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=nA(e,t,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")t!=null&&t[o]!==void 0?r+=s+"{"+t[o]+"}":Vse(o)&&(r+=X8(s)+":"+Hse(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var a=0;a<o.length;a++)Vse(o[a])&&(r+=X8(s)+":"+Hse(s,o[a])+";");else{var u=nA(e,t,o);switch(s){case"animation":case"animationName":{r+=X8(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}return r}var qse=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Qf,RG=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,s="";Qf=void 0;var o=t[0];o==null||o.raw===void 0?(i=!1,s+=nA(r,n,o)):s+=o[0];for(var a=1;a<t.length;a++)s+=nA(r,n,t[a]),i&&(s+=o[a]);qse.lastIndex=0;for(var u="",l;(l=qse.exec(s))!==null;)u+="-"+l[1];var c=zKe(s)+u;return{name:c,styles:s,next:Qf}},WKe=I1.useInsertionEffect?I1.useInsertionEffect:!1,Wse=WKe||A.useLayoutEffect,JEe=A.createContext(typeof HTMLElement<"u"?qEe({key:"css"}):null);JEe.Provider;var GKe=function(t){return A.forwardRef(function(n,r){var i=A.useContext(JEe);return t(n,i,r)})},YKe=A.createContext({}),KKe=GKe(function(e,t){var n=e.styles,r=RG([n],void 0,A.useContext(YKe)),i=A.useRef();return Wse(function(){var s=t.key+"-global",o=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,u=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),u!==null&&(a=!0,u.setAttribute("data-emotion",s),o.hydrate([u])),i.current=[o,a],function(){o.flush()}},[t]),Wse(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&XEe(t,r.next,!0),o.tags.length){var u=o.tags[o.tags.length-1].nextElementSibling;o.before=u,o.flush()}t.insert("",r,o,!1)},[t,r.name]),null});function ZEe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return RG(t)}var XKe=function(){var t=ZEe.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function exe(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}var QKe=Object.defineProperty,Gse=Object.getOwnPropertySymbols,JKe=Object.prototype.hasOwnProperty,ZKe=Object.prototype.propertyIsEnumerable,Yse=(e,t,n)=>t in e?QKe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Q8=(e,t)=>{for(var n in t||(t={}))JKe.call(t,n)&&Yse(e,n,t[n]);if(Gse)for(var n of Gse(t))ZKe.call(t,n)&&Yse(e,n,t[n]);return e};const txe=A.createContext({theme:MEe});function us(){var e;return((e=A.useContext(txe))==null?void 0:e.theme)||MEe}function eXe(e){const t=us(),n=r=>{var i,s;return{styles:((i=t.components[r])==null?void 0:i.styles)||{},classNames:((s=t.components[r])==null?void 0:s.classNames)||{}}};return Array.isArray(e)?e.map(n):[n(e)]}function nxe(){var e;return(e=A.useContext(txe))==null?void 0:e.emotionCache}function Ct(e,t,n){var r;const s=(r=us().components[e])==null?void 0:r.defaultProps;return Q8(Q8(Q8({},t),s),exe(n))}const rxe=A.createContext({classNames:{},styles:{},unstyled:!1});function ixe({children:e,classNames:t,unstyled:n,styles:r,staticSelector:i}){return L.createElement(rxe.Provider,{value:{classNames:t,styles:r,unstyled:n,staticSelector:i}},e)}function MC(){return A.useContext(rxe)}const tXe={app:100,modal:200,popover:300,overlay:400,max:9999};function Tu(e){return tXe[e]}function nXe(e,t){const n=A.useRef();return(!n.current||t.length!==n.current.prevDeps.length||n.current.prevDeps.map((r,i)=>r===t[i]).indexOf(!1)>=0)&&(n.current={v:e(),prevDeps:[...t]}),n.current.v}const rXe=qEe({key:"mantine",prepend:!0});function iXe(){return nxe()||rXe}var sXe=Object.defineProperty,Kse=Object.getOwnPropertySymbols,oXe=Object.prototype.hasOwnProperty,aXe=Object.prototype.propertyIsEnumerable,Xse=(e,t,n)=>t in e?sXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uXe=(e,t)=>{for(var n in t||(t={}))oXe.call(t,n)&&Xse(e,n,t[n]);if(Kse)for(var n of Kse(t))aXe.call(t,n)&&Xse(e,n,t[n]);return e};const J8="ref";function lXe(e){let t;if(e.length!==1)return{args:e,ref:t};const[n]=e;if(!(n instanceof Object))return{args:e,ref:t};if(!(J8 in n))return{args:e,ref:t};t=n[J8];const r=uXe({},n);return delete r[J8],{args:[r],ref:t}}const{cssFactory:cXe}=(()=>{function e(n,r,i){const s=[],o=BKe(n,s,i);return s.length<2?i:o+r(s)}function t(n){const{cache:r}=n,i=(...o)=>{const{ref:a,args:u}=lXe(o),l=RG(u,r.registered);return XEe(r,l,!1),`${r.key}-${l.name}${a===void 0?"":` ${a}`}`};return{css:i,cx:(...o)=>e(r.registered,i,NEe(o))}}return{cssFactory:t}})();function sxe(){const e=iXe();return nXe(()=>cXe({cache:e}),[e])}function fXe({cx:e,classes:t,context:n,classNames:r,name:i,cache:s}){const o=n.reduce((a,u)=>(Object.keys(u.classNames).forEach(l=>{typeof a[l]!="string"?a[l]=`${u.classNames[l]}`:a[l]=`${a[l]} ${u.classNames[l]}`}),a),{});return Object.keys(t).reduce((a,u)=>(a[u]=e(t[u],o[u],r!=null&&r[u],Array.isArray(i)?i.filter(Boolean).map(l=>`${(s==null?void 0:s.key)||"mantine"}-${l}-${u}`).join(" "):i?`${(s==null?void 0:s.key)||"mantine"}-${i}-${u}`:null),a),{})}var dXe=Object.defineProperty,Qse=Object.getOwnPropertySymbols,hXe=Object.prototype.hasOwnProperty,pXe=Object.prototype.propertyIsEnumerable,Jse=(e,t,n)=>t in e?dXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Z8=(e,t)=>{for(var n in t||(t={}))hXe.call(t,n)&&Jse(e,n,t[n]);if(Qse)for(var n of Qse(t))pXe.call(t,n)&&Jse(e,n,t[n]);return e};function mXe(e){return`__mantine-ref-${e||""}`}function Zse(e,t,n){const r=i=>typeof i=="function"?i(t,n||{}):i||{};return Array.isArray(e)?e.map(i=>r(i.styles)).reduce((i,s)=>(Object.keys(s).forEach(o=>{i[o]?i[o]=Z8(Z8({},i[o]),s[o]):i[o]=Z8({},s[o])}),i),{}):r(e)}function pt(e){const t=typeof e=="function"?e:()=>e;function n(r,i){const s=us(),o=eXe(i==null?void 0:i.name),a=nxe(),{css:u,cx:l}=sxe(),c=t(s,r,mXe),f=Zse(i==null?void 0:i.styles,s,r),d=Zse(o,s,r),h=Object.fromEntries(Object.keys(c).map(p=>{const m=l({[u(c[p])]:!(i!=null&&i.unstyled)},u(d[p]),u(f[p]));return[p,m]}));return{classes:fXe({cx:l,classes:h,context:o,classNames:i==null?void 0:i.classNames,name:i==null?void 0:i.name,cache:a}),cx:l,theme:s}}return n}function oxe({styles:e}){const t=us();return L.createElement(KKe,{styles:ZEe(typeof e=="function"?e(t):e)})}var gXe=Object.defineProperty,yXe=Object.defineProperties,vXe=Object.getOwnPropertyDescriptors,eoe=Object.getOwnPropertySymbols,_Xe=Object.prototype.hasOwnProperty,bXe=Object.prototype.propertyIsEnumerable,toe=(e,t,n)=>t in e?gXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qx=(e,t)=>{for(var n in t||(t={}))_Xe.call(t,n)&&toe(e,n,t[n]);if(eoe)for(var n of eoe(t))bXe.call(t,n)&&toe(e,n,t[n]);return e},Wx=(e,t)=>yXe(e,vXe(t));const Gx={in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(.9) translateY(10px)"},transitionProperty:"transform, opacity"},HO={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:Wx(qx({},Gx),{common:{transformOrigin:"center center"}}),"pop-bottom-left":Wx(qx({},Gx),{common:{transformOrigin:"bottom left"}}),"pop-bottom-right":Wx(qx({},Gx),{common:{transformOrigin:"bottom right"}}),"pop-top-left":Wx(qx({},Gx),{common:{transformOrigin:"top left"}}),"pop-top-right":Wx(qx({},Gx),{common:{transformOrigin:"top right"}})},noe=["mousedown","touchstart"];function wXe(e,t,n){const r=A.useRef();return A.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o);n.every(l=>!!l&&!l.contains(o))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||noe).forEach(s=>document.addEventListener(s,i)),()=>{(t||noe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function EXe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function xXe(e,t){return typeof t=="boolean"?t:typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function SXe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=A.useState(n?!1:xXe(e,t)),s=A.useRef();return A.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),EXe(s.current,o=>i(o.matches))},[e]),r}function ef(e,t,n){return Math.min(Math.max(e,t),n)}const NG=typeof document<"u"?A.useLayoutEffect:A.useEffect;function bs(e,t){const n=A.useRef(!1);A.useEffect(()=>()=>{n.current=!1},[]),A.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function axe({opened:e,shouldReturnFocus:t=!0}){const n=A.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return bs(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const TXe=/input|select|textarea|button|object/,uxe="a, input, select, textarea, button, object, [tabindex]";function AXe(e){return e.style.display==="none"}function CXe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&n!==document.body;){if(AXe(n))return!1;n=n.parentNode}return!0}function lxe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function Lz(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(lxe(e));return(TXe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&CXe(e)}function cxe(e){const t=lxe(e);return(Number.isNaN(t)||t>=0)&&Lz(e)}function IXe(e){return Array.from(e.querySelectorAll(uxe)).filter(cxe)}function OXe(e,t){const n=IXe(e);if(!n.length){t.preventDefault();return}if(!(n[t.shiftKey?0:n.length-1]===document.activeElement||e===document.activeElement))return;t.preventDefault();const s=n[t.shiftKey?n.length-1:0];s&&s.focus()}function PXe(e,t="body > :not(script)"){const n=Array.from(document.querySelectorAll(t)).map(r=>{if(r.contains(e))return;const i=r.getAttribute("aria-hidden");return(i===null||i==="false")&&r.setAttribute("aria-hidden","true"),{node:r,ariaHidden:i}});return()=>{n.forEach(r=>{r&&(r.ariaHidden===null?r.node.removeAttribute("aria-hidden"):r.node.setAttribute("aria-hidden",r.ariaHidden))})}}function fxe(e=!0){const t=A.useRef(),n=A.useRef(null),r=A.useCallback(i=>{if(e&&i!==null&&(n.current=PXe(i),t.current!==i))if(i){const s=()=>{let o=i.querySelector("[data-autofocus]");if(!o){const a=Array.from(i.querySelectorAll(uxe));o=a.find(cxe)||a.find(Lz)||null,!o&&Lz(i)&&(o=i)}o&&o.focus({preventScroll:!0})};setTimeout(()=>{i.ownerDocument&&s()}),t.current=i}else t.current=null},[e]);return A.useEffect(()=>{if(!e)return;const i=s=>{s.key==="Tab"&&t.current&&OXe(t.current,s)};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i),n.current&&n.current()}},[e]),r}const kXe=()=>`mantine-${Math.random().toString(36).slice(2,11)}`,$Xe=L.useId||(()=>{});function RXe(){const[e,t]=A.useState("");return NG(()=>{t(kXe())},[]),e}function NXe(){const e=$Xe();return e?`mantine-${e.replace(/:/g,"")}`:""}function vl(e){return typeof e=="string"?e:NXe()||RXe()}function Mz(e,t,n){A.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function dxe(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function hxe(...e){return t=>{e.forEach(n=>dxe(n,t))}}function As(...e){return A.useCallback(hxe(...e),e)}function pxe(e,t,n="ltr"){const r=A.useRef(),i=A.useRef(!1),s=A.useRef(!1),o=A.useRef(0),[a,u]=A.useState(!1);return A.useEffect(()=>{i.current=!0},[]),A.useEffect(()=>{const l=({x:v,y:_})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const b=r.current.getBoundingClientRect();if(b.width&&b.height){const E=ef((v-b.left)/b.width,0,1);e({x:n==="ltr"?E:1-E,y:ef((_-b.top)/b.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=v=>{d(),m(v)},m=v=>l({x:v.clientX,y:v.clientY}),g=v=>{v.cancelable&&v.preventDefault(),d(),y(v)},y=v=>{v.cancelable&&v.preventDefault(),l({x:v.changedTouches[0].clientX,y:v.changedTouches[0].clientY})};return r.current.addEventListener("mousedown",p),r.current.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Ta({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=A.useState(t!==void 0?t:n),o=a=>{s(a),r==null||r(a)};return e!==void 0?[e,r,!0]:[i,o,!1]}function e6(e,t){return SXe("(prefers-reduced-motion: reduce)",e,t)}const DXe=e=>e<.5?2*e*e:-1+(4-2*e)*e,LXe=({axis:e,target:t,parent:n,alignment:r,offset:i,isList:s})=>{if(!t||!n&&typeof document>"u")return 0;const o=!!n,u=(n||document.body).getBoundingClientRect(),l=t.getBoundingClientRect(),c=f=>l[f]-u[f];if(e==="y"){const f=c("top");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.height*(s?0:1)||!s?h:0}const d=o?u.height:window.innerHeight;if(r==="end"){const h=f+i-d+l.height;return h>=-l.height*(s?0:1)||!s?h:0}return r==="center"?f-d/2+l.height/2:0}if(e==="x"){const f=c("left");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.width||!s?h:0}const d=o?u.width:window.innerWidth;if(r==="end"){const h=f+i-d+l.width;return h>=-l.width||!s?h:0}return r==="center"?f-d/2+l.width/2:0}return 0},MXe=({axis:e,parent:t})=>{if(!t&&typeof document>"u")return 0;const n=e==="y"?"scrollTop":"scrollLeft";if(t)return t[n];const{body:r,documentElement:i}=document;return r[n]+i[n]},FXe=({axis:e,parent:t,distance:n})=>{if(!t&&typeof document>"u")return;const r=e==="y"?"scrollTop":"scrollLeft";if(t)t[r]=n;else{const{body:i,documentElement:s}=document;i[r]=n,s[r]=n}};function mxe({duration:e=1250,axis:t="y",onScrollFinish:n,easing:r=DXe,offset:i=0,cancelable:s=!0,isList:o=!1}={}){const a=A.useRef(0),u=A.useRef(0),l=A.useRef(!1),c=A.useRef(null),f=A.useRef(null),d=e6(),h=()=>{a.current&&cancelAnimationFrame(a.current)},p=A.useCallback(({alignment:g="start"}={})=>{var y;l.current=!1,a.current&&h();const v=(y=MXe({parent:c.current,axis:t}))!=null?y:0,_=LXe({parent:c.current,target:f.current,axis:t,alignment:g,offset:i,isList:o})-(c.current?0:v);function b(){u.current===0&&(u.current=performance.now());const w=performance.now()-u.current,x=d||e===0?1:w/e,S=v+_*r(x);FXe({parent:c.current,axis:t,distance:S}),!l.current&&x<1?a.current=requestAnimationFrame(b):(typeof n=="function"&&n(),u.current=0,a.current=0,h())}b()},[t,e,r,o,i,n,d]),m=()=>{s&&(l.current=!0)};return Mz("wheel",m,{passive:!0}),Mz("touchmove",m,{passive:!0}),A.useEffect(()=>h,[]),{scrollableRef:c,targetRef:f,scrollIntoView:p,cancel:h}}const BXe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Tb(){const e=A.useRef(0),t=A.useRef(null),[n,r]=A.useState(BXe),i=A.useMemo(()=>typeof window<"u"?new ResizeObserver(s=>{const o=s[0];o&&(cancelAnimationFrame(e.current),e.current=requestAnimationFrame(()=>{t.current&&r(o.contentRect)}))}):null,[]);return A.useEffect(()=>(t.current&&i.observe(t.current),()=>{i.disconnect(),e.current&&cancelAnimationFrame(e.current)}),[t.current]),[t,n]}function jXe(){if(typeof window>"u"||typeof document>"u")return 0;const e=parseInt(window.getComputedStyle(document.body).paddingRight,10),t=window.innerWidth-document.documentElement.clientWidth;return e+t}const zXe=({disableBodyPadding:e})=>{const t=e?null:jXe();return`body {
        --removed-scroll-width: ${t}px;
        touch-action: none;
        overflow: hidden !important;
        position: relative !important;
        ${t?"padding-right: var(--removed-scroll-width) !important;":""}
        `};function UXe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function VXe(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}function HXe(){const e=document.createElement("style");return e.type="text/css",e.setAttribute("mantine-scroll-lock",""),e}function qXe(e,t={disableBodyPadding:!1}){const[n,r]=A.useState(e||!1),i=A.useRef(0),{disableBodyPadding:s}=t,o=A.useRef(null),a=()=>{i.current=window.scrollY;const l=zXe({disableBodyPadding:s}),c=HXe();UXe(c,l),VXe(c),o.current=c},u=()=>{o!=null&&o.current&&(o.current.parentNode.removeChild(o.current),o.current=null)};return A.useEffect(()=>(n?a():u(),u),[n]),A.useEffect(()=>{e!==void 0&&r(e)},[e]),A.useEffect(()=>{e===void 0&&typeof window<"u"&&window.document.body.style.overflow==="hidden"&&r(!0)},[r]),[n,r]}var WXe=Object.defineProperty,GXe=Object.defineProperties,YXe=Object.getOwnPropertyDescriptors,roe=Object.getOwnPropertySymbols,KXe=Object.prototype.hasOwnProperty,XXe=Object.prototype.propertyIsEnumerable,ioe=(e,t,n)=>t in e?WXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,QXe=(e,t)=>{for(var n in t||(t={}))KXe.call(t,n)&&ioe(e,n,t[n]);if(roe)for(var n of roe(t))XXe.call(t,n)&&ioe(e,n,t[n]);return e},JXe=(e,t)=>GXe(e,YXe(t));function ZXe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return JXe(QXe({},n),{key:i})}function eQe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function tQe(e){return t=>eQe(ZXe(e),t)}function nQe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i])=>{tQe(r)(n)&&(t.preventDefault(),i(n))})}}function rQe(){const{userAgent:e}=window.navigator,t=/(Macintosh)|(MacIntel)|(MacPPC)|(Mac68K)/i,n=/(Win32)|(Win64)|(Windows)|(WinCE)/i,r=/(iPhone)|(iPad)|(iPod)/i;return t.test(e)?"macos":r.test(e)?"ios":n.test(e)?"windows":/Android/i.test(e)?"android":/Linux/i.test(e)?"linux":"undetermined"}function iQe(){return typeof window<"u"?rQe():"undetermined"}function sQe(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n.type==="checkbox"?e(n.checked):e(n.value)}else e(t)}}function oQe(e){const[t,n]=A.useState(e);return[t,sQe(n)]}function zT(e,t){const[n,r]=A.useState(e),i=()=>{var a;n||(r(!0),(a=t==null?void 0:t.onOpen)==null||a.call(t))},s=()=>{var a;n&&(r(!1),(a=t==null?void 0:t.onClose)==null||a.call(t))};return[n,{open:i,close:s,toggle:()=>{n?s():i()}}]}function aQe(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Xm(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}var soe=Object.getOwnPropertySymbols,uQe=Object.prototype.hasOwnProperty,lQe=Object.prototype.propertyIsEnumerable,cQe=(e,t)=>{var n={};for(var r in e)uQe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&soe)for(var r of soe(e))t.indexOf(r)<0&&lQe.call(e,r)&&(n[r]=e[r]);return n};function yf(e){const t=e,{m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:b,fw:E,lts:w,ta:x,lh:S,fs:I,tt:C,td:O,w:z,miw:N,maw:$,h:D,mih:B,mah:V,bgsz:j,bgp:G,bgr:U,bga:P,pos:k,top:H,left:M,bottom:F,right:J,inset:se,display:ae}=t,ce=cQe(t,["m","mx","my","mt","mb","ml","mr","p","px","py","pt","pb","pl","pr","bg","c","opacity","ff","fz","fw","lts","ta","lh","fs","tt","td","w","miw","maw","h","mih","mah","bgsz","bgp","bgr","bga","pos","top","left","bottom","right","inset","display"]);return{systemStyles:exe({m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:b,fw:E,lts:w,ta:x,lh:S,fs:I,tt:C,td:O,w:z,miw:N,maw:$,h:D,mih:B,mah:V,bgsz:j,bgp:G,bgr:U,bga:P,pos:k,top:H,left:M,bottom:F,right:J,inset:se,display:ae}),rest:ce}}function fQe(e,t){const n=Object.keys(e).filter(r=>r!=="base").sort((r,i)=>t.fn.size({size:r,sizes:t.breakpoints})-t.fn.size({size:i,sizes:t.breakpoints}));return"base"in e?["base",...n]:n}function dQe({value:e,theme:t,getValue:n,property:r}){if(e==null)return;if(typeof e=="object")return fQe(e,t).reduce((o,a)=>{if(a==="base"&&e.base!==void 0){const l=n(e.base,t);return Array.isArray(r)?(r.forEach(c=>{o[c]=l}),o):(o[r]=l,o)}const u=n(e[a],t);return Array.isArray(r)?(o[t.fn.largerThan(a)]={},r.forEach(l=>{o[t.fn.largerThan(a)][l]=u}),o):(o[t.fn.largerThan(a)]={[r]:u},o)},{});const i=n(e,t);return Array.isArray(r)?r.reduce((s,o)=>(s[o]=i,s),{}):{[r]:i}}function hQe(e,t){return e==="dimmed"?t.colorScheme==="dark"?t.colors.dark[2]:t.colors.gray[6]:t.fn.variant({variant:"filled",color:e,primaryFallback:!1}).background}function pQe(e){return e}function mQe(e,t){return t.fn.size({size:e,sizes:t.fontSizes})}const gQe=["-xs","-sm","-md","-lg","-xl"];function yQe(e,t){return gQe.includes(e)?t.fn.size({size:e.replace("-",""),sizes:t.spacing})*-1:t.fn.size({size:e,sizes:t.spacing})}const vQe={color:hQe,default:pQe,fontSize:mQe,spacing:yQe},_Qe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},mx:{type:"spacing",property:["marginRight","marginLeft"]},my:{type:"spacing",property:["marginTop","marginBottom"]},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},px:{type:"spacing",property:["paddingRight","paddingLeft"]},py:{type:"spacing",property:["paddingTop","paddingBottom"]},bg:{type:"color",property:"background"},c:{type:"color",property:"color"},opacity:{type:"default",property:"opacity"},ff:{type:"default",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"default",property:"fontWeight"},lts:{type:"default",property:"letterSpacing"},ta:{type:"default",property:"textAlign"},lh:{type:"default",property:"lineHeight"},fs:{type:"default",property:"fontStyle"},tt:{type:"default",property:"textTransform"},td:{type:"default",property:"textDecoration"},w:{type:"default",property:"width"},miw:{type:"default",property:"minWidth"},maw:{type:"default",property:"maxWidth"},h:{type:"default",property:"height"},mih:{type:"default",property:"minHeight"},mah:{type:"default",property:"maxHeight"},bgsz:{type:"default",property:"background-size"},bgp:{type:"default",property:"background-position"},bgr:{type:"default",property:"background-repeat"},bga:{type:"default",property:"background-attachment"},pos:{type:"default",property:"position"},top:{type:"default",property:"top"},left:{type:"default",property:"left"},bottom:{type:"default",property:"bottom"},right:{type:"default",property:"right"},inset:{type:"default",property:"inset"},display:{type:"default",property:"display"}};var bQe=Object.defineProperty,ooe=Object.getOwnPropertySymbols,wQe=Object.prototype.hasOwnProperty,EQe=Object.prototype.propertyIsEnumerable,aoe=(e,t,n)=>t in e?bQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uoe=(e,t)=>{for(var n in t||(t={}))wQe.call(t,n)&&aoe(e,n,t[n]);if(ooe)for(var n of ooe(t))EQe.call(t,n)&&aoe(e,n,t[n]);return e};function Fz(e,t,n=_Qe){return Object.keys(n).reduce((i,s)=>(s in e&&e[s]!==void 0&&i.push(dQe({value:e[s],getValue:vQe[n[s].type],property:n[s].property,theme:t})),i),[]).reduce((i,s)=>(Object.keys(s).forEach(o=>{typeof s[o]=="object"&&s[o]!==null&&o in i?i[o]=uoe(uoe({},i[o]),s[o]):i[o]=s[o]}),i),{})}function loe(e,t){return typeof e=="function"?e(t):e}function xQe(e,t,n){const r=us(),{css:i,cx:s}=sxe();return Array.isArray(e)?s(n,i(Fz(t,r)),e.map(o=>i(loe(o,r)))):s(n,i(loe(e,r)),i(Fz(t,r)))}var SQe=Object.defineProperty,xR=Object.getOwnPropertySymbols,gxe=Object.prototype.hasOwnProperty,yxe=Object.prototype.propertyIsEnumerable,coe=(e,t,n)=>t in e?SQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,TQe=(e,t)=>{for(var n in t||(t={}))gxe.call(t,n)&&coe(e,n,t[n]);if(xR)for(var n of xR(t))yxe.call(t,n)&&coe(e,n,t[n]);return e},AQe=(e,t)=>{var n={};for(var r in e)gxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xR)for(var r of xR(e))t.indexOf(r)<0&&yxe.call(e,r)&&(n[r]=e[r]);return n};const vxe=A.forwardRef((e,t)=>{var n=e,{className:r,component:i,style:s,sx:o}=n,a=AQe(n,["className","component","style","sx"]);const{systemStyles:u,rest:l}=yf(a),c=i||"div";return L.createElement(c,TQe({ref:t,className:xQe(o,u,r),style:s},l))});vxe.displayName="@mantine/core/Box";const At=vxe;var CQe=Object.defineProperty,IQe=Object.defineProperties,OQe=Object.getOwnPropertyDescriptors,foe=Object.getOwnPropertySymbols,PQe=Object.prototype.hasOwnProperty,kQe=Object.prototype.propertyIsEnumerable,doe=(e,t,n)=>t in e?CQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hoe=(e,t)=>{for(var n in t||(t={}))PQe.call(t,n)&&doe(e,n,t[n]);if(foe)for(var n of foe(t))kQe.call(t,n)&&doe(e,n,t[n]);return e},$Qe=(e,t)=>IQe(e,OQe(t)),RQe=pt(e=>({root:$Qe(hoe(hoe({},e.fn.focusStyles()),e.fn.fontStyles()),{cursor:"pointer",border:0,padding:0,appearance:"none",fontSize:e.fontSizes.md,backgroundColor:"transparent",textAlign:"left",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,textDecoration:"none",boxSizing:"border-box"})}));const NQe=RQe;var DQe=Object.defineProperty,SR=Object.getOwnPropertySymbols,_xe=Object.prototype.hasOwnProperty,bxe=Object.prototype.propertyIsEnumerable,poe=(e,t,n)=>t in e?DQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,LQe=(e,t)=>{for(var n in t||(t={}))_xe.call(t,n)&&poe(e,n,t[n]);if(SR)for(var n of SR(t))bxe.call(t,n)&&poe(e,n,t[n]);return e},MQe=(e,t)=>{var n={};for(var r in e)_xe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SR)for(var r of SR(e))t.indexOf(r)<0&&bxe.call(e,r)&&(n[r]=e[r]);return n};const wxe=A.forwardRef((e,t)=>{const n=Ct("UnstyledButton",{},e),{className:r,component:i="button",unstyled:s}=n,o=MQe(n,["className","component","unstyled"]),{classes:a,cx:u}=NQe(null,{name:"UnstyledButton",unstyled:s});return L.createElement(At,LQe({component:i,ref:t,className:u(a.root,r),type:i==="button"?"button":void 0},o))});wxe.displayName="@mantine/core/UnstyledButton";const xv=wxe;var FQe=Object.defineProperty,BQe=Object.defineProperties,jQe=Object.getOwnPropertyDescriptors,TR=Object.getOwnPropertySymbols,Exe=Object.prototype.hasOwnProperty,xxe=Object.prototype.propertyIsEnumerable,moe=(e,t,n)=>t in e?FQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bc=(e,t)=>{for(var n in t||(t={}))Exe.call(t,n)&&moe(e,n,t[n]);if(TR)for(var n of TR(t))xxe.call(t,n)&&moe(e,n,t[n]);return e},Yx=(e,t)=>BQe(e,jQe(t)),zQe=(e,t)=>{var n={};for(var r in e)Exe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TR)for(var r of TR(e))t.indexOf(r)<0&&xxe.call(e,r)&&(n[r]=e[r]);return n};function UQe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function e9(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}function VQe(e){return e!=null&&e.current?e.current.scrollWidth:"auto"}const bh=typeof window<"u"&&window.requestAnimationFrame;function HQe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r,axis:i}){const s=A.useRef(null),o="0px",[a,u]=A.useState({}),l=g=>{wv.flushSync(()=>u(g))},c=g=>{l(y=>bc(bc({},y),g))};function f(g){const y=e||UQe(g);return{transitionProperty:`${i==="x"?"width":"height"}`,transitionDuration:`${y}ms`,transitionTimingFunction:`${t}`}}const d=()=>{const g=a;l({});const y={width:VQe(s),height:e9(s)};return l(g),y},h=()=>{const{height:g}=d();return{x:{height:g,width:"0px",overflow:"hidden"},y:{display:"none",height:"0px",overflow:"hidden"}}};A.useEffect(()=>{bh(()=>{const{x:g,y}=h();i==="x"&&!r?l(bc({},g)):i==="y"&&!r&&l(bc({},y))})},[]),bs(()=>{i!=="x"&&bh(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),bh(()=>{const g=e9(s);c(Yx(bc({},f(g)),{height:g}))})}:()=>{const g=e9(s);c(Yx(bc({},f(g)),{willChange:"height",height:g})),bh(()=>c({height:o,overflow:"hidden"}))})},[r]),bs(()=>{i!=="y"&&bh(r?()=>{const{width:g}=d();c({display:"block",overflow:"hidden",willChange:"width",flexShrink:0}),bh(()=>{c(Yx(bc({},f(g)),{width:g}))})}:()=>{const{width:g,height:y}=d();c(Yx(bc({},f(g)),{flexShrink:0,willChange:"width",width:g,height:y})),bh(()=>c({width:"0px",overflow:"hidden"}))})},[r]);const p=g=>{if(!(g.target!==s.current||!(g.propertyName==="width"||!0)))if(n(),r)l({});else{const{x:y,y:v}=h();l(i==="x"?y:v)}};function m(g={}){var y=g,{style:v={},refKey:_="ref"}=y,b=zQe(y,["style","refKey"]);const E=b[_];return Yx(bc({"aria-hidden":!r},b),{[_]:hxe(s,E),onTransitionEnd:p,style:bc(bc({boxSizing:"border-box"},v),a)})}return m}var qQe=Object.defineProperty,AR=Object.getOwnPropertySymbols,Sxe=Object.prototype.hasOwnProperty,Txe=Object.prototype.propertyIsEnumerable,goe=(e,t,n)=>t in e?qQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qO=(e,t)=>{for(var n in t||(t={}))Sxe.call(t,n)&&goe(e,n,t[n]);if(AR)for(var n of AR(t))Txe.call(t,n)&&goe(e,n,t[n]);return e},WQe=(e,t)=>{var n={};for(var r in e)Sxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AR)for(var r of AR(e))t.indexOf(r)<0&&Txe.call(e,r)&&(n[r]=e[r]);return n};const GQe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0,axis:"y"},Axe=A.forwardRef((e,t)=>{const n=Ct("Collapse",GQe,e),{children:r,in:i,transitionDuration:s,transitionTimingFunction:o,style:a,onTransitionEnd:u,animateOpacity:l,axis:c}=n,f=WQe(n,["children","in","transitionDuration","transitionTimingFunction","style","onTransitionEnd","animateOpacity","axis"]),d=us(),h=e6(),m=(d.respectReducedMotion?h:!1)?0:s,{systemStyles:g,rest:y}=yf(f),v=HQe({opened:i,transitionDuration:m,transitionTimingFunction:o,onTransitionEnd:u,axis:c});return m===0?i?L.createElement(At,qO({},y),r):null:L.createElement(At,qO({},v(qO(qO({style:a,ref:t},y),g))),L.createElement("div",{style:{opacity:i||!l?1:0,transition:l?`opacity ${m}ms ${o}`:"none"}},r))});Axe.displayName="@mantine/core/Collapse";var YQe=Object.defineProperty,yoe=Object.getOwnPropertySymbols,KQe=Object.prototype.hasOwnProperty,XQe=Object.prototype.propertyIsEnumerable,voe=(e,t,n)=>t in e?YQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,QQe=(e,t)=>{for(var n in t||(t={}))KQe.call(t,n)&&voe(e,n,t[n]);if(yoe)for(var n of yoe(t))XQe.call(t,n)&&voe(e,n,t[n]);return e};function JQe(e){return L.createElement("svg",QQe({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:16,height:16},e),L.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var ZQe=Object.defineProperty,eJe=Object.defineProperties,tJe=Object.getOwnPropertyDescriptors,_oe=Object.getOwnPropertySymbols,nJe=Object.prototype.hasOwnProperty,rJe=Object.prototype.propertyIsEnumerable,boe=(e,t,n)=>t in e?ZQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cxe=(e,t)=>{for(var n in t||(t={}))nJe.call(t,n)&&boe(e,n,t[n]);if(_oe)for(var n of _oe(t))rJe.call(t,n)&&boe(e,n,t[n]);return e},iJe=(e,t)=>eJe(e,tJe(t));const qS={xs:18,sm:22,md:28,lg:34,xl:44};function sJe({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:Cxe({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var oJe=pt((e,{color:t,size:n,radius:r,variant:i,gradient:s})=>({root:iJe(Cxe({},sJe({variant:i,theme:e,color:t,gradient:s})),{position:"relative",height:e.fn.size({size:n,sizes:qS}),minHeight:e.fn.size({size:n,sizes:qS}),width:e.fn.size({size:n,sizes:qS}),minWidth:e.fn.size({size:n,sizes:qS}),borderRadius:e.fn.radius(r),padding:0,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center","&:active":e.activeStyles,"&:disabled, &[data-disabled]":{color:e.colors.gray[e.colorScheme==="dark"?6:4],cursor:"not-allowed",backgroundColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),borderColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}})}));const aJe=oJe;var uJe=Object.defineProperty,CR=Object.getOwnPropertySymbols,Ixe=Object.prototype.hasOwnProperty,Oxe=Object.prototype.propertyIsEnumerable,woe=(e,t,n)=>t in e?uJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lJe=(e,t)=>{for(var n in t||(t={}))Ixe.call(t,n)&&woe(e,n,t[n]);if(CR)for(var n of CR(t))Oxe.call(t,n)&&woe(e,n,t[n]);return e},cJe=(e,t)=>{var n={};for(var r in e)Ixe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CR)for(var r of CR(e))t.indexOf(r)<0&&Oxe.call(e,r)&&(n[r]=e[r]);return n};function fJe(e){var t=e,{size:n,color:r}=t,i=cJe(t,["size","color"]);return L.createElement("svg",lJe({viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",fill:r,width:`${n}px`},i),L.createElement("rect",{y:"10",width:"15",height:"120",rx:"6"},L.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},L.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("rect",{x:"60",width:"15",height:"140",rx:"6"},L.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},L.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},L.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})))}var dJe=Object.defineProperty,IR=Object.getOwnPropertySymbols,Pxe=Object.prototype.hasOwnProperty,kxe=Object.prototype.propertyIsEnumerable,Eoe=(e,t,n)=>t in e?dJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hJe=(e,t)=>{for(var n in t||(t={}))Pxe.call(t,n)&&Eoe(e,n,t[n]);if(IR)for(var n of IR(t))kxe.call(t,n)&&Eoe(e,n,t[n]);return e},pJe=(e,t)=>{var n={};for(var r in e)Pxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&IR)for(var r of IR(e))t.indexOf(r)<0&&kxe.call(e,r)&&(n[r]=e[r]);return n};function mJe(e){var t=e,{size:n,color:r}=t,i=pJe(t,["size","color"]);return L.createElement("svg",hJe({width:`${n}px`,height:`${n}px`,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:r},i),L.createElement("g",{fill:"none",fillRule:"evenodd"},L.createElement("g",{transform:"translate(2.5 2.5)",strokeWidth:"5"},L.createElement("circle",{strokeOpacity:".5",cx:"16",cy:"16",r:"16"}),L.createElement("path",{d:"M32 16c0-9.94-8.06-16-16-16"},L.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"1s",repeatCount:"indefinite"})))))}var gJe=Object.defineProperty,OR=Object.getOwnPropertySymbols,$xe=Object.prototype.hasOwnProperty,Rxe=Object.prototype.propertyIsEnumerable,xoe=(e,t,n)=>t in e?gJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yJe=(e,t)=>{for(var n in t||(t={}))$xe.call(t,n)&&xoe(e,n,t[n]);if(OR)for(var n of OR(t))Rxe.call(t,n)&&xoe(e,n,t[n]);return e},vJe=(e,t)=>{var n={};for(var r in e)$xe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&OR)for(var r of OR(e))t.indexOf(r)<0&&Rxe.call(e,r)&&(n[r]=e[r]);return n};function _Je(e){var t=e,{size:n,color:r}=t,i=vJe(t,["size","color"]);return L.createElement("svg",yJe({width:`${n}px`,height:`${n/4}px`,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:r},i),L.createElement("circle",{cx:"15",cy:"15",r:"15"},L.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("circle",{cx:"60",cy:"15",r:"9",fillOpacity:"0.3"},L.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),L.createElement("circle",{cx:"105",cy:"15",r:"15"},L.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),L.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})))}var bJe=Object.defineProperty,PR=Object.getOwnPropertySymbols,Nxe=Object.prototype.hasOwnProperty,Dxe=Object.prototype.propertyIsEnumerable,Soe=(e,t,n)=>t in e?bJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wJe=(e,t)=>{for(var n in t||(t={}))Nxe.call(t,n)&&Soe(e,n,t[n]);if(PR)for(var n of PR(t))Dxe.call(t,n)&&Soe(e,n,t[n]);return e},EJe=(e,t)=>{var n={};for(var r in e)Nxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PR)for(var r of PR(e))t.indexOf(r)<0&&Dxe.call(e,r)&&(n[r]=e[r]);return n};const t9={bars:fJe,oval:mJe,dots:_Je},xJe={xs:18,sm:22,md:36,lg:44,xl:58},SJe={size:"md"};function I0(e){const t=Ct("Loader",SJe,e),{size:n,color:r,variant:i}=t,s=EJe(t,["size","color","variant"]),o=us(),a=i in t9?i:o.loader;return L.createElement(At,wJe({role:"presentation",component:t9[a]||t9.bars,size:o.fn.size({size:n,sizes:xJe}),color:o.fn.variant({variant:"filled",primaryFallback:!1,color:r||o.primaryColor}).background},s))}I0.displayName="@mantine/core/Loader";var TJe=Object.defineProperty,kR=Object.getOwnPropertySymbols,Lxe=Object.prototype.hasOwnProperty,Mxe=Object.prototype.propertyIsEnumerable,Toe=(e,t,n)=>t in e?TJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Aoe=(e,t)=>{for(var n in t||(t={}))Lxe.call(t,n)&&Toe(e,n,t[n]);if(kR)for(var n of kR(t))Mxe.call(t,n)&&Toe(e,n,t[n]);return e},AJe=(e,t)=>{var n={};for(var r in e)Lxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kR)for(var r of kR(e))t.indexOf(r)<0&&Mxe.call(e,r)&&(n[r]=e[r]);return n};const CJe={color:"gray",size:"md",variant:"subtle",loading:!1},Fxe=A.forwardRef((e,t)=>{const n=Ct("ActionIcon",CJe,e),{className:r,color:i,children:s,radius:o,size:a,variant:u,gradient:l,disabled:c,loaderProps:f,loading:d,unstyled:h}=n,p=AJe(n,["className","color","children","radius","size","variant","gradient","disabled","loaderProps","loading","unstyled"]),{classes:m,cx:g,theme:y}=aJe({size:a,radius:o,color:i,variant:u,gradient:l},{name:"ActionIcon",unstyled:h}),v=y.fn.variant({color:i,variant:u}),_=L.createElement(I0,Aoe({color:v.color,size:y.fn.size({size:a,sizes:qS})-12},f));return L.createElement(xv,Aoe({className:g(m.root,r),ref:t,disabled:c,"data-disabled":c||void 0,"data-loading":d||void 0,unstyled:h},p),d?_:s)});Fxe.displayName="@mantine/core/ActionIcon";const $R=Fxe;function Bxe(e){const{children:t,target:n,className:r}=Ct("Portal",{},e),i=us(),[s,o]=A.useState(!1),a=A.useRef();return NG(()=>(o(!0),a.current=n?typeof n=="string"?document.querySelector(n):n:document.createElement("div"),n||document.body.appendChild(a.current),()=>{!n&&document.body.removeChild(a.current)}),[n]),s?wv.createPortal(L.createElement("div",{className:r,dir:i.dir},t),a.current):null}Bxe.displayName="@mantine/core/Portal";var IJe=Object.defineProperty,RR=Object.getOwnPropertySymbols,jxe=Object.prototype.hasOwnProperty,zxe=Object.prototype.propertyIsEnumerable,Coe=(e,t,n)=>t in e?IJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,OJe=(e,t)=>{for(var n in t||(t={}))jxe.call(t,n)&&Coe(e,n,t[n]);if(RR)for(var n of RR(t))zxe.call(t,n)&&Coe(e,n,t[n]);return e},PJe=(e,t)=>{var n={};for(var r in e)jxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RR)for(var r of RR(e))t.indexOf(r)<0&&zxe.call(e,r)&&(n[r]=e[r]);return n};function FC(e){var t=e,{withinPortal:n=!0,children:r}=t,i=PJe(t,["withinPortal","children"]);return n?L.createElement(Bxe,OJe({},i),r):L.createElement(L.Fragment,null,r)}FC.displayName="@mantine/core/OptionalPortal";var kJe=Object.defineProperty,$Je=Object.defineProperties,RJe=Object.getOwnPropertyDescriptors,Ioe=Object.getOwnPropertySymbols,NJe=Object.prototype.hasOwnProperty,DJe=Object.prototype.propertyIsEnumerable,Ooe=(e,t,n)=>t in e?kJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,n9=(e,t)=>{for(var n in t||(t={}))NJe.call(t,n)&&Ooe(e,n,t[n]);if(Ioe)for(var n of Ioe(t))DJe.call(t,n)&&Ooe(e,n,t[n]);return e},Poe=(e,t)=>$Je(e,RJe(t));function LJe({variant:e,color:t,theme:n}){if(e==="filled")return{backgroundColor:n.fn.variant({variant:"filled",color:t}).background,color:n.white};if(e==="outline"){const i=n.fn.variant({variant:"outline",color:t});return{color:i.color,borderColor:i.border,backgroundColor:n.colorScheme==="dark"?n.colors.dark[6]:n.white}}const r=n.fn.variant({variant:"light",color:t});return{backgroundColor:r.background,color:r.color}}var MJe=pt((e,{color:t,radius:n,variant:r})=>({root:n9(Poe(n9({},e.fn.fontStyles()),{position:"relative",overflow:"hidden",padding:`${e.spacing.sm}px ${e.spacing.md}px`,borderRadius:e.fn.radius(n),border:"1px solid transparent"}),LJe({variant:r,color:t,theme:e})),wrapper:{display:"flex"},body:{flex:1},title:{boxSizing:"border-box",margin:0,marginBottom:7,display:"flex",alignItems:"center",justifyContent:"space-between",lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,fontWeight:700,"&[data-with-close-button]":{paddingRight:e.spacing.md}},label:{display:"block",overflow:"hidden",textOverflow:"ellipsis"},icon:{lineHeight:1,width:20,height:20,display:"flex",alignItems:"center",justifyContent:"flex-start",marginRight:e.spacing.md,marginTop:1},message:Poe(n9({},e.fn.fontStyles()),{lineHeight:e.lineHeight,textOverflow:"ellipsis",overflow:"hidden",fontSize:e.fontSizes.sm,color:r==="filled"?e.white:e.colorScheme==="dark"?r==="light"?e.white:e.colors.dark[0]:e.black}),closeButton:{position:"absolute",top:e.spacing.sm,right:e.spacing.sm,color:"inherit"}}));const FJe=MJe;var BJe=Object.defineProperty,koe=Object.getOwnPropertySymbols,jJe=Object.prototype.hasOwnProperty,zJe=Object.prototype.propertyIsEnumerable,$oe=(e,t,n)=>t in e?BJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,UJe=(e,t)=>{for(var n in t||(t={}))jJe.call(t,n)&&$oe(e,n,t[n]);if(koe)for(var n of koe(t))zJe.call(t,n)&&$oe(e,n,t[n]);return e};function Uxe(e){return L.createElement("svg",UJe({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),L.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}Uxe.displayName="@mantine/core/CloseIcon";var VJe=Object.defineProperty,NR=Object.getOwnPropertySymbols,Vxe=Object.prototype.hasOwnProperty,Hxe=Object.prototype.propertyIsEnumerable,Roe=(e,t,n)=>t in e?VJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,HJe=(e,t)=>{for(var n in t||(t={}))Vxe.call(t,n)&&Roe(e,n,t[n]);if(NR)for(var n of NR(t))Hxe.call(t,n)&&Roe(e,n,t[n]);return e},qJe=(e,t)=>{var n={};for(var r in e)Vxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NR)for(var r of NR(e))t.indexOf(r)<0&&Hxe.call(e,r)&&(n[r]=e[r]);return n};const WJe={xs:12,sm:14,md:16,lg:20,xl:24},GJe={size:"md"},qxe=A.forwardRef((e,t)=>{const n=Ct("CloseButton",GJe,e),{iconSize:r,size:i="md"}=n,s=qJe(n,["iconSize","size"]),o=us(),a=r||o.fn.size({size:i,sizes:WJe});return L.createElement($R,HJe({size:i,ref:t},s),L.createElement(Uxe,{width:a,height:a}))});qxe.displayName="@mantine/core/CloseButton";const Sv=qxe;var YJe=Object.defineProperty,DR=Object.getOwnPropertySymbols,Wxe=Object.prototype.hasOwnProperty,Gxe=Object.prototype.propertyIsEnumerable,Noe=(e,t,n)=>t in e?YJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,KJe=(e,t)=>{for(var n in t||(t={}))Wxe.call(t,n)&&Noe(e,n,t[n]);if(DR)for(var n of DR(t))Gxe.call(t,n)&&Noe(e,n,t[n]);return e},XJe=(e,t)=>{var n={};for(var r in e)Wxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DR)for(var r of DR(e))t.indexOf(r)<0&&Gxe.call(e,r)&&(n[r]=e[r]);return n};const QJe={variant:"light"},Yxe=A.forwardRef((e,t)=>{const n=Ct("Alert",QJe,e),{id:r,className:i,title:s,variant:o,children:a,color:u,classNames:l,icon:c,styles:f,onClose:d,radius:h,withCloseButton:p,closeButtonLabel:m,unstyled:g}=n,y=XJe(n,["id","className","title","variant","children","color","classNames","icon","styles","onClose","radius","withCloseButton","closeButtonLabel","unstyled"]),{classes:v,cx:_}=FJe({color:u,radius:h,variant:o},{classNames:l,styles:f,unstyled:g,name:"Alert"}),b=vl(r),E=s&&`${b}-title`,w=`${b}-body`;return L.createElement(At,KJe({id:b,role:"alert","aria-labelledby":E,"aria-describedby":w,className:_(v.root,v[o],i),ref:t},y),L.createElement("div",{className:v.wrapper},c&&L.createElement("div",{className:v.icon},c),L.createElement("div",{className:v.body},s&&L.createElement("div",{className:v.title,"data-with-close-button":p||void 0},L.createElement("span",{id:E,className:v.label},s)),p&&L.createElement(Sv,{className:v.closeButton,onClick:d,variant:"transparent",size:16,iconSize:16,"aria-label":m}),L.createElement("div",{id:w,className:v.message},a))))});Yxe.displayName="@mantine/core/Alert";var JJe=Object.defineProperty,ZJe=Object.defineProperties,eZe=Object.getOwnPropertyDescriptors,Doe=Object.getOwnPropertySymbols,tZe=Object.prototype.hasOwnProperty,nZe=Object.prototype.propertyIsEnumerable,Loe=(e,t,n)=>t in e?JJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,WO=(e,t)=>{for(var n in t||(t={}))tZe.call(t,n)&&Loe(e,n,t[n]);if(Doe)for(var n of Doe(t))nZe.call(t,n)&&Loe(e,n,t[n]);return e},rZe=(e,t)=>ZJe(e,eZe(t));function iZe({underline:e,strikethrough:t}){const n=[];return e&&n.push("underline"),t&&n.push("line-through"),n.length>0?n.join(" "):"none"}function sZe({theme:e,color:t,variant:n}){return t==="dimmed"?e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]:typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?e.fn.variant({variant:"filled",color:t}).background:n==="link"?e.colors[e.primaryColor][e.colorScheme==="dark"?4:7]:t||"inherit"}function oZe(e){return typeof e=="number"?{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:e,WebkitBoxOrient:"vertical"}:null}var aZe=pt((e,{color:t,variant:n,size:r,lineClamp:i,inline:s,inherit:o,underline:a,gradient:u,weight:l,transform:c,align:f,strikethrough:d,italic:h})=>{const p=e.fn.variant({variant:"gradient",gradient:u});return{root:WO(rZe(WO(WO(WO({},e.fn.fontStyles()),e.fn.focusStyles()),oZe(i)),{color:sZe({color:t,theme:e,variant:n}),fontFamily:o?"inherit":e.fontFamily,fontSize:o||r===void 0?"inherit":e.fn.size({size:r,sizes:e.fontSizes}),lineHeight:o?"inherit":s?1:e.lineHeight,textDecoration:iZe({underline:a,strikethrough:d}),WebkitTapHighlightColor:"transparent",fontWeight:o?"inherit":l,textTransform:c,textAlign:f,fontStyle:h?"italic":void 0}),e.fn.hover(n==="link"&&a===void 0?{textDecoration:"underline"}:void 0)),gradient:{backgroundImage:p.background,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}});const uZe=aZe;var lZe=Object.defineProperty,LR=Object.getOwnPropertySymbols,Kxe=Object.prototype.hasOwnProperty,Xxe=Object.prototype.propertyIsEnumerable,Moe=(e,t,n)=>t in e?lZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cZe=(e,t)=>{for(var n in t||(t={}))Kxe.call(t,n)&&Moe(e,n,t[n]);if(LR)for(var n of LR(t))Xxe.call(t,n)&&Moe(e,n,t[n]);return e},fZe=(e,t)=>{var n={};for(var r in e)Kxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LR)for(var r of LR(e))t.indexOf(r)<0&&Xxe.call(e,r)&&(n[r]=e[r]);return n};const dZe={variant:"text"},Qxe=A.forwardRef((e,t)=>{const n=Ct("Text",dZe,e),{className:r,size:i,weight:s,transform:o,color:a,align:u,variant:l,lineClamp:c,gradient:f,inline:d,inherit:h,underline:p,strikethrough:m,italic:g,classNames:y,styles:v,unstyled:_,span:b}=n,E=fZe(n,["className","size","weight","transform","color","align","variant","lineClamp","gradient","inline","inherit","underline","strikethrough","italic","classNames","styles","unstyled","span"]),{classes:w,cx:x}=uZe({variant:l,color:a,size:i,lineClamp:c,inline:d,inherit:h,underline:p,strikethrough:m,italic:g,weight:s,transform:o,align:u,gradient:f},{unstyled:_,name:"Text"});return L.createElement(At,cZe({ref:t,className:x(w.root,{[w.gradient]:l==="gradient"},r),component:b?"span":"div"},E))});Qxe.displayName="@mantine/core/Text";const Rt=Qxe;var hZe=pt(()=>({root:{backgroundColor:"transparent",cursor:"pointer",padding:0,border:0}}));const pZe=hZe;var mZe=Object.defineProperty,MR=Object.getOwnPropertySymbols,Jxe=Object.prototype.hasOwnProperty,Zxe=Object.prototype.propertyIsEnumerable,Foe=(e,t,n)=>t in e?mZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Boe=(e,t)=>{for(var n in t||(t={}))Jxe.call(t,n)&&Foe(e,n,t[n]);if(MR)for(var n of MR(t))Zxe.call(t,n)&&Foe(e,n,t[n]);return e},gZe=(e,t)=>{var n={};for(var r in e)Jxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MR)for(var r of MR(e))t.indexOf(r)<0&&Zxe.call(e,r)&&(n[r]=e[r]);return n};const yZe={},eSe=A.forwardRef((e,t)=>{const n=Ct("Anchor",yZe,e),{component:r,className:i,unstyled:s}=n,o=gZe(n,["component","className","unstyled"]),{classes:a,cx:u}=pZe(null,{name:"Anchor",unstyled:s}),l=r==="button"?{type:"button"}:null;return L.createElement(Rt,Boe(Boe({component:r||"a",variant:"link",ref:t,className:u(a.root,i)},l),o))});eSe.displayName="@mantine/core/Anchor";const tSe=eSe,nSe=A.createContext({}),vZe=nSe.Provider;function rSe(){return A.useContext(nSe)}function t6(e,t){if(!e)return[];const n=Object.keys(e).filter(r=>r!=="base").map(r=>[t.fn.size({size:r,sizes:t.breakpoints}),e[r]]);return n.sort((r,i)=>r[0]-i[0]),n}var _Ze=Object.defineProperty,bZe=Object.defineProperties,wZe=Object.getOwnPropertyDescriptors,joe=Object.getOwnPropertySymbols,EZe=Object.prototype.hasOwnProperty,xZe=Object.prototype.propertyIsEnumerable,zoe=(e,t,n)=>t in e?_Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,GO=(e,t)=>{for(var n in t||(t={}))EZe.call(t,n)&&zoe(e,n,t[n]);if(joe)for(var n of joe(t))xZe.call(t,n)&&zoe(e,n,t[n]);return e},Uoe=(e,t)=>bZe(e,wZe(t)),SZe=pt((e,{height:t,width:n,fixed:r,position:i,hiddenBreakpoint:s,zIndex:o,section:a,withBorder:u})=>{const l=typeof n=="object"&&n!==null?t6(n,e).reduce((f,[d,h])=>(f[`@media (min-width: ${d}px)`]={width:h,minWidth:h},f),{}):null,c=u?{[a==="navbar"?"borderRight":"borderLeft"]:`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`}:{};return{root:Uoe(GO(GO(Uoe(GO(GO({},e.fn.fontStyles()),i),{top:(i==null?void 0:i.top)||"var(--mantine-header-height)",bottom:0,zIndex:o,height:t||"calc(100vh - var(--mantine-header-height, 0px) - var(--mantine-footer-height, 0px))",width:(n==null?void 0:n.base)||"100%",position:r?"fixed":"static",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),c),l),{"&[data-hidden]":{[`@media (max-width: ${e.fn.size({size:s,sizes:e.breakpoints})-1}px)`]:{display:"none"}}})}});const TZe=SZe;var AZe=Object.defineProperty,FR=Object.getOwnPropertySymbols,iSe=Object.prototype.hasOwnProperty,sSe=Object.prototype.propertyIsEnumerable,Voe=(e,t,n)=>t in e?AZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hoe=(e,t)=>{for(var n in t||(t={}))iSe.call(t,n)&&Voe(e,n,t[n]);if(FR)for(var n of FR(t))sSe.call(t,n)&&Voe(e,n,t[n]);return e},CZe=(e,t)=>{var n={};for(var r in e)iSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FR)for(var r of FR(e))t.indexOf(r)<0&&sSe.call(e,r)&&(n[r]=e[r]);return n};const DG=A.forwardRef((e,t)=>{var n=e,{width:r,height:i,fixed:s=!1,position:o,zIndex:a=Tu("app"),hiddenBreakpoint:u="md",hidden:l=!1,withBorder:c=!0,className:f,classNames:d,styles:h,children:p,section:m,__staticSelector:g,unstyled:y}=n,v=CZe(n,["width","height","fixed","position","zIndex","hiddenBreakpoint","hidden","withBorder","className","classNames","styles","children","section","__staticSelector","unstyled"]);const _=rSe(),{classes:b,cx:E,theme:w}=TZe({width:r,height:i,fixed:_.fixed||s,position:o,hiddenBreakpoint:u,zIndex:_.zIndex||a,section:m,withBorder:c},{classNames:d,styles:h,name:g,unstyled:y}),x=t6(r,w).reduce((S,[I,C])=>(S[`@media (min-width: ${I}px)`]={[`--mantine-${m}-width`]:`${C}px`},S),{});return L.createElement(At,Hoe({component:m==="navbar"?"nav":"aside",ref:t,"data-hidden":l||void 0,className:E(b.root,f)},v),p,L.createElement(oxe,{styles:()=>({":root":Hoe({[`--mantine-${m}-width`]:r!=null&&r.base?`${r.base}px`:"0px"},x)})}))});DG.displayName="@mantine/core/HorizontalSection";var IZe=Object.defineProperty,BR=Object.getOwnPropertySymbols,oSe=Object.prototype.hasOwnProperty,aSe=Object.prototype.propertyIsEnumerable,qoe=(e,t,n)=>t in e?IZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,OZe=(e,t)=>{for(var n in t||(t={}))oSe.call(t,n)&&qoe(e,n,t[n]);if(BR)for(var n of BR(t))aSe.call(t,n)&&qoe(e,n,t[n]);return e},PZe=(e,t)=>{var n={};for(var r in e)oSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BR)for(var r of BR(e))t.indexOf(r)<0&&aSe.call(e,r)&&(n[r]=e[r]);return n};const uSe=A.forwardRef((e,t)=>{var n=e,{children:r,grow:i=!1,sx:s}=n,o=PZe(n,["children","grow","sx"]);return L.createElement(At,OZe({ref:t,sx:[{flex:i?1:0,boxSizing:"border-box"},...N1(s)]},o),r)});uSe.displayName="@mantine/core/Section";const lSe=uSe;var kZe=Object.defineProperty,Woe=Object.getOwnPropertySymbols,$Ze=Object.prototype.hasOwnProperty,RZe=Object.prototype.propertyIsEnumerable,Goe=(e,t,n)=>t in e?kZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,NZe=(e,t)=>{for(var n in t||(t={}))$Ze.call(t,n)&&Goe(e,n,t[n]);if(Woe)for(var n of Woe(t))RZe.call(t,n)&&Goe(e,n,t[n]);return e};const DZe={fixed:!1,position:{top:0,left:0},zIndex:Tu("app"),hiddenBreakpoint:"md",hidden:!1},f1=A.forwardRef((e,t)=>{const n=Ct("Navbar",DZe,e);return L.createElement(DG,NZe({section:"navbar",__staticSelector:"Navbar",ref:t},n))});f1.Section=lSe;f1.displayName="@mantine/core/Navbar";var LZe=Object.defineProperty,MZe=Object.defineProperties,FZe=Object.getOwnPropertyDescriptors,Yoe=Object.getOwnPropertySymbols,BZe=Object.prototype.hasOwnProperty,jZe=Object.prototype.propertyIsEnumerable,Koe=(e,t,n)=>t in e?LZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r9=(e,t)=>{for(var n in t||(t={}))BZe.call(t,n)&&Koe(e,n,t[n]);if(Yoe)for(var n of Yoe(t))jZe.call(t,n)&&Koe(e,n,t[n]);return e},Xoe=(e,t)=>MZe(e,FZe(t)),zZe=pt((e,{height:t,fixed:n,position:r,zIndex:i,borderPosition:s})=>{const o=typeof t=="object"&&t!==null?t6(t,e).reduce((a,[u,l])=>(a[`@media (min-width: ${u}px)`]={height:l,minHeight:l},a),{}):null;return{root:Xoe(r9(Xoe(r9(r9({},e.fn.fontStyles()),r),{zIndex:i,height:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,maxHeight:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,position:n?"fixed":"static",boxSizing:"border-box",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),o),{borderBottom:s==="bottom"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0,borderTop:s==="top"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0})}});const UZe=zZe;var VZe=Object.defineProperty,jR=Object.getOwnPropertySymbols,cSe=Object.prototype.hasOwnProperty,fSe=Object.prototype.propertyIsEnumerable,Qoe=(e,t,n)=>t in e?VZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Joe=(e,t)=>{for(var n in t||(t={}))cSe.call(t,n)&&Qoe(e,n,t[n]);if(jR)for(var n of jR(t))fSe.call(t,n)&&Qoe(e,n,t[n]);return e},HZe=(e,t)=>{var n={};for(var r in e)cSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jR)for(var r of jR(e))t.indexOf(r)<0&&fSe.call(e,r)&&(n[r]=e[r]);return n};const dSe=A.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,height:a,fixed:u=!1,withBorder:l=!0,position:c,zIndex:f=Tu("app"),section:d,unstyled:h,__staticSelector:p}=n,m=HZe(n,["children","className","classNames","styles","height","fixed","withBorder","position","zIndex","section","unstyled","__staticSelector"]);const g=rSe(),{classes:y,cx:v,theme:_}=UZe({height:a,fixed:g.fixed||u,position:c,zIndex:g.zIndex||f,borderPosition:l?d==="header"?"bottom":"top":"none"},{name:p,classNames:s,styles:o,unstyled:h}),b=typeof a=="object"&&a!==null?t6(a,_).reduce((E,[w,x])=>(E[`@media (min-width: ${w}px)`]={[`--mantine-${d}-height`]:`${x}px`},E),{}):null;return L.createElement(At,Joe({component:d==="header"?"header":"footer",className:v(y.root,i),ref:t},m),r,L.createElement(oxe,{styles:()=>({":root":Joe({[`--mantine-${d}-height`]:typeof a=="object"?`${a==null?void 0:a.base}px`||"100%":`${a}px`},b)})}))});dSe.displayName="@mantine/core/VerticalSection";var qZe=Object.defineProperty,WZe=Object.defineProperties,GZe=Object.getOwnPropertyDescriptors,Zoe=Object.getOwnPropertySymbols,YZe=Object.prototype.hasOwnProperty,KZe=Object.prototype.propertyIsEnumerable,eae=(e,t,n)=>t in e?qZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XZe=(e,t)=>{for(var n in t||(t={}))YZe.call(t,n)&&eae(e,n,t[n]);if(Zoe)for(var n of Zoe(t))KZe.call(t,n)&&eae(e,n,t[n]);return e},QZe=(e,t)=>WZe(e,GZe(t));const JZe={fixed:!1,position:{top:0,left:0,right:0},zIndex:Tu("app")},LG=A.forwardRef((e,t)=>{const n=Ct("Header",JZe,e);return L.createElement(dSe,QZe(XZe({section:"header",__staticSelector:"Header"},n),{ref:t}))});LG.displayName="@mantine/core/Header";var ZZe=Object.defineProperty,tae=Object.getOwnPropertySymbols,eet=Object.prototype.hasOwnProperty,tet=Object.prototype.propertyIsEnumerable,nae=(e,t,n)=>t in e?ZZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,net=(e,t)=>{for(var n in t||(t={}))eet.call(t,n)&&nae(e,n,t[n]);if(tae)for(var n of tae(t))tet.call(t,n)&&nae(e,n,t[n]);return e};const ret={fixed:!1,position:{top:0,right:0},zIndex:Tu("app"),hiddenBreakpoint:"md",hidden:!1},MG=A.forwardRef((e,t)=>{const n=Ct("Aside",ret,e);return L.createElement(DG,net({section:"aside",__staticSelector:"Aside",ref:t},n))});MG.Section=lSe;MG.displayName="@mantine/core/Aside";var iet=Object.defineProperty,rae=Object.getOwnPropertySymbols,set=Object.prototype.hasOwnProperty,oet=Object.prototype.propertyIsEnumerable,iae=(e,t,n)=>t in e?iet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aet=(e,t)=>{for(var n in t||(t={}))set.call(t,n)&&iae(e,n,t[n]);if(rae)for(var n of rae(t))oet.call(t,n)&&iae(e,n,t[n]);return e};function uet(e,t){const n=t.fn.size({size:e.padding,sizes:t.spacing}),r=e.navbarOffsetBreakpoint?t.fn.size({size:e.navbarOffsetBreakpoint,sizes:t.breakpoints}):null,i=e.asideOffsetBreakpoint?t.fn.size({size:e.asideOffsetBreakpoint,sizes:t.breakpoints}):null;return e.fixed?{minHeight:"100vh",paddingTop:`calc(var(--mantine-header-height, 0px) + ${n}px)`,paddingBottom:`calc(var(--mantine-footer-height, 0px) + ${n}px)`,paddingLeft:`calc(var(--mantine-navbar-width, 0px) + ${n}px)`,paddingRight:`calc(var(--mantine-aside-width, 0px) + ${n}px)`,[`@media (max-width: ${r-1}px)`]:{paddingLeft:n},[`@media (max-width: ${i-1}px)`]:{paddingRight:n}}:{padding:n}}var cet=pt((e,t)=>({root:{boxSizing:"border-box"},body:{display:"flex",boxSizing:"border-box"},main:aet({flex:1,width:"100vw",boxSizing:"border-box"},uet(t,e))}));const fet=cet;var det=Object.defineProperty,zR=Object.getOwnPropertySymbols,hSe=Object.prototype.hasOwnProperty,pSe=Object.prototype.propertyIsEnumerable,sae=(e,t,n)=>t in e?det(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,het=(e,t)=>{for(var n in t||(t={}))hSe.call(t,n)&&sae(e,n,t[n]);if(zR)for(var n of zR(t))pSe.call(t,n)&&sae(e,n,t[n]);return e},pet=(e,t)=>{var n={};for(var r in e)hSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zR)for(var r of zR(e))t.indexOf(r)<0&&pSe.call(e,r)&&(n[r]=e[r]);return n};const met={fixed:!0,zIndex:Tu("app"),padding:"md"},FG=A.forwardRef((e,t)=>{const n=Ct("AppShell",met,e),{children:r,navbar:i,header:s,footer:o,aside:a,fixed:u,zIndex:l,padding:c,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d,className:h,styles:p,classNames:m,unstyled:g,hidden:y}=n,v=pet(n,["children","navbar","header","footer","aside","fixed","zIndex","padding","navbarOffsetBreakpoint","asideOffsetBreakpoint","className","styles","classNames","unstyled","hidden"]),{classes:_,cx:b}=fet({padding:c,fixed:u,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d},{styles:p,classNames:m,unstyled:g,name:"AppShell"});return y?L.createElement(L.Fragment,null,r):L.createElement(vZe,{value:{fixed:u,zIndex:l}},L.createElement(At,het({className:b(_.root,h),ref:t},v),s,L.createElement("div",{className:_.body},i,L.createElement("main",{className:_.main},r),a),o))});FG.displayName="@mantine/core/AppShell";const YO={xs:1,sm:2,md:3,lg:4,xl:5};function KO(e,t){const n=e.fn.variant({variant:"outline",color:t}).border;return typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?n:t===void 0?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]:t}var get=pt((e,{size:t,variant:n,color:r})=>({root:{},withLabel:{borderTop:"0 !important"},left:{"&::before":{display:"none"}},right:{"&::after":{display:"none"}},label:{display:"flex",alignItems:"center","&::before":{content:'""',flex:1,height:1,borderTop:`${e.fn.size({size:t,sizes:YO})}px ${n} ${KO(e,r)}`,marginRight:e.spacing.xs},"&::after":{content:'""',flex:1,borderTop:`${e.fn.size({size:t,sizes:YO})}px ${n} ${KO(e,r)}`,marginLeft:e.spacing.xs}},labelDefaultStyles:{color:r==="dark"?e.colors.dark[1]:e.fn.themeColor(r,e.colorScheme==="dark"?5:e.fn.primaryShade(),!1)},horizontal:{border:0,borderTopWidth:e.fn.size({size:t,sizes:YO}),borderTopColor:KO(e,r),borderTopStyle:n,margin:0},vertical:{border:0,alignSelf:"stretch",height:"auto",borderLeftWidth:e.fn.size({size:t,sizes:YO}),borderLeftColor:KO(e,r),borderLeftStyle:n}}));const yet=get;var vet=Object.defineProperty,_et=Object.defineProperties,bet=Object.getOwnPropertyDescriptors,UR=Object.getOwnPropertySymbols,mSe=Object.prototype.hasOwnProperty,gSe=Object.prototype.propertyIsEnumerable,oae=(e,t,n)=>t in e?vet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aae=(e,t)=>{for(var n in t||(t={}))mSe.call(t,n)&&oae(e,n,t[n]);if(UR)for(var n of UR(t))gSe.call(t,n)&&oae(e,n,t[n]);return e},wet=(e,t)=>_et(e,bet(t)),Eet=(e,t)=>{var n={};for(var r in e)mSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UR)for(var r of UR(e))t.indexOf(r)<0&&gSe.call(e,r)&&(n[r]=e[r]);return n};const xet={orientation:"horizontal",size:"xs",labelPosition:"left",variant:"solid"},Bz=A.forwardRef((e,t)=>{const n=Ct("Divider",xet,e),{className:r,color:i,orientation:s,size:o,label:a,labelPosition:u,labelProps:l,variant:c,styles:f,classNames:d,unstyled:h}=n,p=Eet(n,["className","color","orientation","size","label","labelPosition","labelProps","variant","styles","classNames","unstyled"]),{classes:m,cx:g}=yet({color:i,size:o,variant:c},{classNames:d,styles:f,unstyled:h,name:"Divider"}),y=s==="vertical",v=s==="horizontal",_=!!a&&v,b=!(l!=null&&l.color);return L.createElement(At,aae({ref:t,className:g(m.root,{[m.vertical]:y,[m.horizontal]:v,[m.withLabel]:_},r),role:"separator"},p),_&&L.createElement(Rt,wet(aae({},l),{size:(l==null?void 0:l.size)||"xs",sx:{marginTop:2},className:g(m.label,m[u],{[m.labelDefaultStyles]:b})}),a))});Bz.displayName="@mantine/core/Divider";var Tet=Object.defineProperty,Aet=Object.defineProperties,Cet=Object.getOwnPropertyDescriptors,uae=Object.getOwnPropertySymbols,Iet=Object.prototype.hasOwnProperty,Oet=Object.prototype.propertyIsEnumerable,lae=(e,t,n)=>t in e?Tet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cae=(e,t)=>{for(var n in t||(t={}))Iet.call(t,n)&&lae(e,n,t[n]);if(uae)for(var n of uae(t))Oet.call(t,n)&&lae(e,n,t[n]);return e},Pet=(e,t)=>Aet(e,Cet(t)),ket=pt((e,{size:t})=>({item:Pet(cae({},e.fn.fontStyles()),{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`,cursor:"pointer",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,borderRadius:e.radius.sm,"&[data-hovered]":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[1]},"&[data-selected]":cae({backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.fn.variant({variant:"filled"}).color},e.fn.hover({backgroundColor:e.fn.variant({variant:"filled"}).hover})),"&[data-disabled]":{cursor:"default",color:e.colors.dark[2]}}),nothingFound:{boxSizing:"border-box",color:e.colors.gray[6],paddingTop:e.fn.size({size:t,sizes:e.spacing})/2,paddingBottom:e.fn.size({size:t,sizes:e.spacing})/2,textAlign:"center"},separator:{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`},separatorLabel:{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}));const $et=ket;var Ret=Object.defineProperty,fae=Object.getOwnPropertySymbols,Net=Object.prototype.hasOwnProperty,Det=Object.prototype.propertyIsEnumerable,dae=(e,t,n)=>t in e?Ret(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Let=(e,t)=>{for(var n in t||(t={}))Net.call(t,n)&&dae(e,n,t[n]);if(fae)for(var n of fae(t))Det.call(t,n)&&dae(e,n,t[n]);return e};function BG({data:e,hovered:t,classNames:n,styles:r,isItemSelected:i,uuid:s,__staticSelector:o,onItemHover:a,onItemSelect:u,itemsRefs:l,itemComponent:c,size:f,nothingFound:d,creatable:h,createLabel:p,unstyled:m}){const{classes:g}=$et({size:f},{classNames:n,styles:r,unstyled:m,name:o}),y=[],v=[];let _=null;const b=(w,x)=>{const S=typeof i=="function"?i(w.value):!1;return L.createElement(c,Let({key:w.value,className:g.item,"data-disabled":w.disabled||void 0,"data-hovered":!w.disabled&&t===x||void 0,"data-selected":!w.disabled&&S||void 0,onMouseEnter:()=>a(x),id:`${s}-${x}`,role:"option",tabIndex:-1,"aria-selected":t===x,ref:I=>{l&&l.current&&(l.current[w.value]=I)},onMouseDown:w.disabled?null:I=>{I.preventDefault(),u(w)},disabled:w.disabled},w))};let E=null;if(e.forEach((w,x)=>{w.creatable?_=x:w.group?(E!==w.group&&(E=w.group,v.push(L.createElement("div",{className:g.separator,key:`__mantine-divider-${x}`},L.createElement(Bz,{classNames:{label:g.separatorLabel},label:w.group})))),v.push(b(w,x))):y.push(b(w,x))}),h){const w=e[_];y.push(L.createElement("div",{key:aQe(),className:g.item,"data-hovered":t===_||void 0,onMouseEnter:()=>a(_),onMouseDown:x=>{x.preventDefault(),u(w)},tabIndex:-1,ref:x=>{l&&l.current&&(l.current[w.value]=x)}},p))}return v.length>0&&y.length>0&&y.unshift(L.createElement("div",{className:g.separator,key:"empty-group-separator"},L.createElement(Bz,null))),v.length>0||y.length>0?L.createElement(L.Fragment,null,v,y):L.createElement(Rt,{size:f,unstyled:m,className:g.nothingFound},d)}BG.displayName="@mantine/core/SelectItems";var Met=Object.defineProperty,VR=Object.getOwnPropertySymbols,ySe=Object.prototype.hasOwnProperty,vSe=Object.prototype.propertyIsEnumerable,hae=(e,t,n)=>t in e?Met(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fet=(e,t)=>{for(var n in t||(t={}))ySe.call(t,n)&&hae(e,n,t[n]);if(VR)for(var n of VR(t))vSe.call(t,n)&&hae(e,n,t[n]);return e},Bet=(e,t)=>{var n={};for(var r in e)ySe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VR)for(var r of VR(e))t.indexOf(r)<0&&vSe.call(e,r)&&(n[r]=e[r]);return n};const jG=A.forwardRef((e,t)=>{var n=e,{label:r,value:i}=n,s=Bet(n,["label","value"]);return L.createElement("div",Fet({ref:t},s),r||i)});jG.displayName="@mantine/core/DefaultItem";function jet(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function _Se(...e){return t=>e.forEach(n=>jet(n,t))}function Tv(...e){return A.useCallback(_Se(...e),e)}const bSe=A.forwardRef((e,t)=>{const{children:n,...r}=e,i=A.Children.toArray(n),s=i.find(Uet);if(s){const o=s.props.children,a=i.map(u=>u===s?A.Children.count(o)>1?A.Children.only(null):A.isValidElement(o)?o.props.children:null:u);return A.createElement(jz,di({},r,{ref:t}),A.isValidElement(o)?A.cloneElement(o,void 0,a):null)}return A.createElement(jz,di({},r,{ref:t}),n)});bSe.displayName="Slot";const jz=A.forwardRef((e,t)=>{const{children:n,...r}=e;return A.isValidElement(n)?A.cloneElement(n,{...Vet(r,n.props),ref:_Se(t,n.ref)}):A.Children.count(n)>1?A.Children.only(null):null});jz.displayName="SlotClone";const zet=({children:e})=>A.createElement(A.Fragment,null,e);function Uet(e){return A.isValidElement(e)&&e.type===zet}function Vet(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?n[r]=(...a)=>{s==null||s(...a),i==null||i(...a)}:r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const Het=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],BC=Het.reduce((e,t)=>{const n=A.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?bSe:t;return A.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),A.createElement(a,di({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),zz=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{};function qet(e,t){return A.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const jC=e=>{const{present:t,children:n}=e,r=Wet(t),i=typeof n=="function"?n({present:r.isPresent}):A.Children.only(n),s=Tv(r.ref,i.ref);return typeof n=="function"||r.isPresent?A.cloneElement(i,{ref:s}):null};jC.displayName="Presence";function Wet(e){const[t,n]=A.useState(),r=A.useRef({}),i=A.useRef(e),s=A.useRef("none"),o=e?"mounted":"unmounted",[a,u]=qet(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const l=XO(r.current);s.current=a==="mounted"?l:"none"},[a]),zz(()=>{const l=r.current,c=i.current;if(c!==e){const d=s.current,h=XO(l);e?u("MOUNT"):h==="none"||(l==null?void 0:l.display)==="none"?u("UNMOUNT"):u(c&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,u]),zz(()=>{if(t){const l=f=>{const h=XO(r.current).includes(f.animationName);f.target===t&&h&&wv.flushSync(()=>u("ANIMATION_END"))},c=f=>{f.target===t&&(s.current=XO(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function XO(e){return(e==null?void 0:e.animationName)||"none"}function Get(e,t=[]){let n=[];function r(s,o){const a=A.createContext(o),u=n.length;n=[...n,o];function l(f){const{scope:d,children:h,...p}=f,m=(d==null?void 0:d[e][u])||a,g=A.useMemo(()=>p,Object.values(p));return A.createElement(m.Provider,{value:g},h)}function c(f,d){const h=(d==null?void 0:d[e][u])||a,p=A.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return l.displayName=s+"Provider",[l,c]}const i=()=>{const s=n.map(o=>A.createContext(o));return function(a){const u=(a==null?void 0:a[e])||s;return A.useMemo(()=>({[`__scope${e}`]:{...a,[e]:u}}),[a,u])}};return i.scopeName=e,[r,Yet(i,...t)]}function Yet(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:u,scopeName:l})=>{const f=u(s)[`__scope${l}`];return{...a,...f}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Ay(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}const Ket=A.createContext(void 0);function Xet(e){const t=A.useContext(Ket);return e||t||"ltr"}function Qet(e,[t,n]){return Math.min(n,Math.max(t,e))}function d1(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function Jet(e,t){return A.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const wSe="ScrollArea",[ESe,lEn]=Get(wSe),[Zet,ac]=ESe(wSe),ett=A.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=e,[a,u]=A.useState(null),[l,c]=A.useState(null),[f,d]=A.useState(null),[h,p]=A.useState(null),[m,g]=A.useState(null),[y,v]=A.useState(0),[_,b]=A.useState(0),[E,w]=A.useState(!1),[x,S]=A.useState(!1),I=Tv(t,O=>u(O)),C=Xet(i);return A.createElement(Zet,{scope:n,type:r,dir:C,scrollHideDelay:s,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:w,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:x,onScrollbarYEnabledChange:S,onCornerWidthChange:v,onCornerHeightChange:b},A.createElement(BC.div,di({dir:C},o,{ref:I,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})))}),ttt="ScrollAreaViewport",ntt=A.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...i}=e,s=ac(ttt,n),o=A.useRef(null),a=Tv(t,o,s.onViewportChange);return A.createElement(A.Fragment,null,A.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),A.createElement(BC.div,di({"data-radix-scroll-area-viewport":""},i,{ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style}}),A.createElement("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),Gp="ScrollAreaScrollbar",rtt=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ac(Gp,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return A.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?A.createElement(itt,di({},r,{ref:t,forceMount:n})):i.type==="scroll"?A.createElement(stt,di({},r,{ref:t,forceMount:n})):i.type==="auto"?A.createElement(xSe,di({},r,{ref:t,forceMount:n})):i.type==="always"?A.createElement(zG,di({},r,{ref:t})):null}),itt=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ac(Gp,e.__scopeScrollArea),[s,o]=A.useState(!1);return A.useEffect(()=>{const a=i.scrollArea;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),A.createElement(jC,{present:n||s},A.createElement(xSe,di({"data-state":s?"visible":"hidden"},r,{ref:t})))}),stt=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ac(Gp,e.__scopeScrollArea),s=e.orientation==="horizontal",o=r6(()=>u("SCROLL_END"),100),[a,u]=Jet("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return A.useEffect(()=>{if(a==="idle"){const l=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[a,i.scrollHideDelay,u]),A.useEffect(()=>{const l=i.viewport,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(u("SCROLL"),o()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u,o]),A.createElement(jC,{present:n||a!=="hidden"},A.createElement(zG,di({"data-state":a==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:d1(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:d1(e.onPointerLeave,()=>u("POINTER_LEAVE"))})))}),xSe=A.forwardRef((e,t)=>{const n=ac(Gp,e.__scopeScrollArea),{forceMount:r,...i}=e,[s,o]=A.useState(!1),a=e.orientation==="horizontal",u=r6(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return dw(n.viewport,u),dw(n.content,u),A.createElement(jC,{present:r||s},A.createElement(zG,di({"data-state":s?"visible":"hidden"},i,{ref:t})))}),zG=A.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=ac(Gp,e.__scopeScrollArea),s=A.useRef(null),o=A.useRef(0),[a,u]=A.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=CSe(a.viewport,a.content),c={...r,sizes:a,onSizesChange:u,hasThumb:l>0&&l<1,onThumbChange:d=>s.current=d,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:d=>o.current=d};function f(d,h){return htt(d,o.current,a,h)}return n==="horizontal"?A.createElement(ott,di({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollLeft,h=pae(d,a,i.dir);s.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollLeft=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollLeft=f(d,i.dir))}})):n==="vertical"?A.createElement(att,di({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollTop,h=pae(d,a);s.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollTop=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollTop=f(d))}})):null}),ott=A.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=ac(Gp,e.__scopeScrollArea),[o,a]=A.useState(),u=A.useRef(null),l=Tv(t,u,s.onScrollbarXChange);return A.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),A.createElement(TSe,di({"data-orientation":"horizontal"},i,{ref:l,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":n6(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.x),onDragScroll:c=>e.onDragScroll(c.x),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollLeft+c.deltaX;e.onWheelScroll(d),OSe(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:HR(o.paddingLeft),paddingEnd:HR(o.paddingRight)}})}}))}),att=A.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=ac(Gp,e.__scopeScrollArea),[o,a]=A.useState(),u=A.useRef(null),l=Tv(t,u,s.onScrollbarYChange);return A.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),A.createElement(TSe,di({"data-orientation":"vertical"},i,{ref:l,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":n6(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.y),onDragScroll:c=>e.onDragScroll(c.y),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollTop+c.deltaY;e.onWheelScroll(d),OSe(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:HR(o.paddingTop),paddingEnd:HR(o.paddingBottom)}})}}))}),[utt,SSe]=ESe(Gp),TSe=A.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:u,onDragScroll:l,onWheelScroll:c,onResize:f,...d}=e,h=ac(Gp,n),[p,m]=A.useState(null),g=Tv(t,I=>m(I)),y=A.useRef(null),v=A.useRef(""),_=h.viewport,b=r.content-r.viewport,E=Ay(c),w=Ay(u),x=r6(f,10);function S(I){if(y.current){const C=I.clientX-y.current.left,O=I.clientY-y.current.top;l({x:C,y:O})}}return A.useEffect(()=>{const I=C=>{const O=C.target;(p==null?void 0:p.contains(O))&&E(C,b)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[_,p,b,E]),A.useEffect(w,[r,w]),dw(p,x),dw(h.content,x),A.createElement(utt,{scope:n,scrollbar:p,hasThumb:i,onThumbChange:Ay(s),onThumbPointerUp:Ay(o),onThumbPositionChange:w,onThumbPointerDown:Ay(a)},A.createElement(BC.div,di({},d,{ref:g,style:{position:"absolute",...d.style},onPointerDown:d1(e.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),y.current=p.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(I))}),onPointerMove:d1(e.onPointerMove,S),onPointerUp:d1(e.onPointerUp,I=>{I.target.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=v.current,y.current=null})})))}),Uz="ScrollAreaThumb",ltt=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=SSe(Uz,e.__scopeScrollArea);return A.createElement(jC,{present:n||i.hasThumb},A.createElement(ctt,di({ref:t},r)))}),ctt=A.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,s=ac(Uz,n),o=SSe(Uz,n),{onThumbPositionChange:a}=o,u=Tv(t,f=>o.onThumbChange(f)),l=A.useRef(),c=r6(()=>{l.current&&(l.current(),l.current=void 0)},100);return A.useEffect(()=>{const f=s.viewport;if(f){const d=()=>{if(c(),!l.current){const h=ptt(f,a);l.current=h,a()}};return a(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[s.viewport,c,a]),A.createElement(BC.div,di({"data-state":o.hasThumb?"visible":"hidden"},i,{ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:d1(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),p=f.clientX-h.left,m=f.clientY-h.top;o.onThumbPointerDown({x:p,y:m})}),onPointerUp:d1(e.onPointerUp,o.onThumbPointerUp)}))}),ASe="ScrollAreaCorner",ftt=A.forwardRef((e,t)=>{const n=ac(ASe,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?A.createElement(dtt,di({},e,{ref:t})):null}),dtt=A.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=ac(ASe,n),[s,o]=A.useState(0),[a,u]=A.useState(0),l=!!(s&&a);return dw(i.scrollbarX,()=>{var c;const f=((c=i.scrollbarX)===null||c===void 0?void 0:c.offsetHeight)||0;i.onCornerHeightChange(f),u(f)}),dw(i.scrollbarY,()=>{var c;const f=((c=i.scrollbarY)===null||c===void 0?void 0:c.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),l?A.createElement(BC.div,di({},r,{ref:t,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}})):null});function HR(e){return e?parseInt(e,10):0}function CSe(e,t){const n=e/t;return isNaN(n)?0:n}function n6(e){const t=CSe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function htt(e,t,n,r="ltr"){const i=n6(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return ISe([u,l],f)(e)}function pae(e,t,n="ltr"){const r=n6(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=Qet(e,u);return ISe([0,o],[0,a])(l)}function ISe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function OSe(e,t){return e>0&&e<t}const ptt=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function r6(e,t){const n=Ay(e),r=A.useRef(0);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),A.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function dw(e,t){const n=Ay(t);zz(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const mtt=ett,gtt=ntt,mae=rtt,gae=ltt,ytt=ftt;var vtt=pt((e,{scrollbarSize:t,offsetScrollbars:n,scrollbarHovered:r,hidden:i},s)=>({root:{overflow:"hidden"},viewport:{width:"100%",height:"100%",paddingRight:n?t:void 0,paddingBottom:n?t:void 0},scrollbar:{display:i?"none":"flex",userSelect:"none",touchAction:"none",boxSizing:"border-box",padding:t/5,transition:"background-color 150ms ease, opacity 150ms ease","&:hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],[`& .${s("thumb")}`]:{backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.5):e.fn.rgba(e.black,.5)}},'&[data-orientation="vertical"]':{width:t},'&[data-orientation="horizontal"]':{flexDirection:"column",height:t},'&[data-state="hidden"]':{display:"none",opacity:0}},thumb:{ref:s("thumb"),flex:1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.4):e.fn.rgba(e.black,.4),borderRadius:t,position:"relative",transition:"background-color 150ms ease",display:i?"none":void 0,"&::before":{content:'""',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%"}},corner:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],transition:"opacity 150ms ease",opacity:r?1:0,display:i?"none":void 0}}));const _tt=vtt;var btt=Object.defineProperty,wtt=Object.defineProperties,Ett=Object.getOwnPropertyDescriptors,qR=Object.getOwnPropertySymbols,PSe=Object.prototype.hasOwnProperty,kSe=Object.prototype.propertyIsEnumerable,yae=(e,t,n)=>t in e?btt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$Se=(e,t)=>{for(var n in t||(t={}))PSe.call(t,n)&&yae(e,n,t[n]);if(qR)for(var n of qR(t))kSe.call(t,n)&&yae(e,n,t[n]);return e},xtt=(e,t)=>wtt(e,Ett(t)),RSe=(e,t)=>{var n={};for(var r in e)PSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qR)for(var r of qR(e))t.indexOf(r)<0&&kSe.call(e,r)&&(n[r]=e[r]);return n};const NSe={scrollbarSize:12,scrollHideDelay:1e3,type:"hover",offsetScrollbars:!1},i6=A.forwardRef((e,t)=>{const n=Ct("ScrollArea",NSe,e),{children:r,className:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p}=n,m=RSe(n,["children","className","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled"]),[g,y]=A.useState(!1),v=us(),{classes:_,cx:b}=_tt({scrollbarSize:a,offsetScrollbars:f,scrollbarHovered:g,hidden:l==="never"},{name:"ScrollArea",classNames:s,styles:o,unstyled:p});return L.createElement(mtt,{type:l==="never"?"always":l,scrollHideDelay:u,dir:c||v.dir,ref:t,asChild:!0},L.createElement(At,$Se({className:b(_.root,i)},m),L.createElement(gtt,{className:_.viewport,ref:d,onScroll:typeof h=="function"?({currentTarget:E})=>h({x:E.scrollLeft,y:E.scrollTop}):void 0},r),L.createElement(mae,{orientation:"horizontal",className:_.scrollbar,forceMount:!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},L.createElement(gae,{className:_.thumb})),L.createElement(mae,{orientation:"vertical",className:_.scrollbar,forceMount:!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},L.createElement(gae,{className:_.thumb})),L.createElement(ytt,{className:_.corner})))}),DSe=A.forwardRef((e,t)=>{const n=Ct("ScrollAreaAutosize",NSe,e),{maxHeight:r,children:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p,sx:m}=n,g=RSe(n,["maxHeight","children","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled","sx"]);return L.createElement(At,xtt($Se({},g),{ref:t,sx:[{display:"flex",maxHeight:r},...N1(m)]}),L.createElement(At,{sx:{display:"flex",flexDirection:"column",flex:1}},L.createElement(i6,{classNames:s,styles:o,scrollHideDelay:u,scrollbarSize:a,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p},i)))});DSe.displayName="@mantine/core/ScrollAreaAutosize";i6.displayName="@mantine/core/ScrollArea";i6.Autosize=DSe;const LSe=i6;var Stt=Object.defineProperty,Ttt=Object.defineProperties,Att=Object.getOwnPropertyDescriptors,WR=Object.getOwnPropertySymbols,MSe=Object.prototype.hasOwnProperty,FSe=Object.prototype.propertyIsEnumerable,vae=(e,t,n)=>t in e?Stt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_ae=(e,t)=>{for(var n in t||(t={}))MSe.call(t,n)&&vae(e,n,t[n]);if(WR)for(var n of WR(t))FSe.call(t,n)&&vae(e,n,t[n]);return e},Ctt=(e,t)=>Ttt(e,Att(t)),Itt=(e,t)=>{var n={};for(var r in e)MSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WR)for(var r of WR(e))t.indexOf(r)<0&&FSe.call(e,r)&&(n[r]=e[r]);return n};const s6=A.forwardRef((e,t)=>{var n=e,{style:r}=n,i=Itt(n,["style"]);return L.createElement(LSe,Ctt(_ae({},i),{style:_ae({width:"100%"},r),viewportRef:t}),i.children)});s6.displayName="@mantine/core/SelectScrollArea";var Ott=pt(()=>({dropdown:{},itemsWrapper:{padding:4,display:"flex",width:"100%",boxSizing:"border-box"}}));const Ptt=Ott;function Sp(e){return e.split("-")[0]}function zC(e){return e.split("-")[1]}function Av(e){return["top","bottom"].includes(Sp(e))?"x":"y"}function UG(e){return e==="y"?"height":"width"}function bae(e,t,n){let{reference:r,floating:i}=e;const s=r.x+r.width/2-i.width/2,o=r.y+r.height/2-i.height/2,a=Av(t),u=UG(a),l=r[u]/2-i[u]/2,c=a==="x";let f;switch(Sp(t)){case"top":f={x:s,y:r.y-i.height};break;case"bottom":f={x:s,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:o};break;case"left":f={x:r.x-i.width,y:o};break;default:f={x:r.x,y:r.y}}switch(zC(t)){case"start":f[a]-=l*(n&&c?-1:1);break;case"end":f[a]+=l*(n&&c?-1:1)}return f}const ktt=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=bae(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:_,data:b,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=_??f,h={...h,[g]:{...h[g],...b}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=bae(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};function VG(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function rA(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function HG(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=t,p=VG(h),m=a[d?f==="floating"?"reference":"floating":f],g=rA(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),y=rA(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f==="floating"?{...o.floating,x:r,y:i}:o.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),strategy:u}):o[f]);return{top:g.top-y.top+p.top,bottom:y.bottom-g.bottom+p.bottom,left:g.left-y.left+p.left,right:y.right-g.right+p.right}}const BSe=Math.min,Im=Math.max;function Vz(e,t,n){return Im(e,BSe(t,n))}const wae=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=e??{},{x:i,y:s,placement:o,rects:a,platform:u}=t;if(n==null)return{};const l=VG(r),c={x:i,y:s},f=Av(o),d=zC(o),h=UG(f),p=await u.getDimensions(n),m=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=a.reference[h]+a.reference[f]-c[f]-a.floating[h],v=c[f]-a.reference[f],_=await(u.getOffsetParent==null?void 0:u.getOffsetParent(n));let b=_?f==="y"?_.clientHeight||0:_.clientWidth||0:0;b===0&&(b=a.floating[h]);const E=y/2-v/2,w=l[m],x=b-p[h]-l[g],S=b/2-p[h]/2+E,I=Vz(w,S,x),C=(d==="start"?l[m]:l[g])>0&&S!==I&&a.reference[h]<=a.floating[h];return{[f]:c[f]-(C?S<w?w-S:x-S:0),data:{[f]:I,centerOffset:S-I}}}}),$tt={left:"right",right:"left",bottom:"top",top:"bottom"};function GR(e){return e.replace(/left|right|bottom|top/g,t=>$tt[t])}function Rtt(e,t,n){n===void 0&&(n=!1);const r=zC(e),i=Av(e),s=UG(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=GR(o)),{main:o,cross:GR(o)}}const Ntt={start:"end",end:"start"};function Eae(e){return e.replace(/start|end/g,t=>Ntt[t])}const Dtt=["top","right","bottom","left"];Dtt.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const jSe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:u}=t,{mainAxis:l=!0,crossAxis:c=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",flipAlignment:h=!0,...p}=e,m=Sp(r),g=f||(m===o||!h?[GR(o)]:function(S){const I=GR(S);return[Eae(S),I,Eae(I)]}(o)),y=[o,...g],v=await HG(t,p),_=[];let b=((n=i.flip)==null?void 0:n.overflows)||[];if(l&&_.push(v[m]),c){const{main:S,cross:I}=Rtt(r,s,await(a.isRTL==null?void 0:a.isRTL(u.floating)));_.push(v[S],v[I])}if(b=[...b,{placement:r,overflows:_}],!_.every(S=>S<=0)){var E,w;const S=((E=(w=i.flip)==null?void 0:w.index)!=null?E:0)+1,I=y[S];if(I)return{data:{index:S,overflows:b},reset:{placement:I}};let C="bottom";switch(d){case"bestFit":{var x;const O=(x=b.map(z=>[z,z.overflows.filter(N=>N>0).reduce((N,$)=>N+$,0)]).sort((z,N)=>z[1]-N[1])[0])==null?void 0:x[0].placement;O&&(C=O);break}case"initialPlacement":C=o}if(r!==C)return{reset:{placement:C}}}return{}}}},zSe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await async function(s,o){const{placement:a,platform:u,elements:l}=s,c=await(u.isRTL==null?void 0:u.isRTL(l.floating)),f=Sp(a),d=zC(a),h=Av(a)==="x",p=["left","top"].includes(f)?-1:1,m=c&&h?-1:1,g=typeof o=="function"?o(s):o;let{mainAxis:y,crossAxis:v,alignmentAxis:_}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return d&&typeof _=="number"&&(v=d==="end"?-1*_:_),h?{x:v*m,y:y*p}:{x:y*p,y:v*m}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function USe(e){return e==="x"?"y":"x"}const qG=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=e,l={x:n,y:r},c=await HG(t,u),f=Av(Sp(i)),d=USe(f);let h=l[f],p=l[d];if(s){const g=f==="y"?"bottom":"right";h=Vz(h+c[f==="y"?"top":"left"],h,h-c[g])}if(o){const g=d==="y"?"bottom":"right";p=Vz(p+c[d==="y"?"top":"left"],p,p-c[g])}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},Ltt=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=e,c={x:n,y:r},f=Av(i),d=USe(f);let h=c[f],p=c[d];const m=typeof a=="function"?a(t):a,g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const E=f==="y"?"height":"width",w=s.reference[f]-s.floating[E]+g.mainAxis,x=s.reference[f]+s.reference[E]-g.mainAxis;h<w?h=w:h>x&&(h=x)}if(l){var y,v,_,b;const E=f==="y"?"width":"height",w=["top","left"].includes(Sp(i)),x=s.reference[d]-s.floating[E]+(w&&(y=(v=o.offset)==null?void 0:v[d])!=null?y:0)+(w?0:g.crossAxis),S=s.reference[d]+s.reference[E]+(w?0:(_=(b=o.offset)==null?void 0:b[d])!=null?_:0)-(w?g.crossAxis:0);p<x?p=x:p>S&&(p=S)}return{[f]:h,[d]:p}}}},Mtt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=e,u=await HG(t,a),l=Sp(n),c=zC(n);let f,d;l==="top"||l==="bottom"?(f=l,d=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(d=l,f=c==="end"?"top":"bottom");const h=Im(u.left,0),p=Im(u.right,0),m=Im(u.top,0),g=Im(u.bottom,0),y={availableHeight:r.floating.height-(["left","right"].includes(n)?2*(m!==0||g!==0?m+g:Im(u.top,u.bottom)):u[f]),availableWidth:r.floating.width-(["top","bottom"].includes(n)?2*(h!==0||p!==0?h+p:Im(u.left,u.right)):u[d])};await o({...t,...y});const v=await i.getDimensions(s.floating);return r.floating.width!==v.width||r.floating.height!==v.height?{reset:{rects:!0}}:{}}}},VSe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){var n;const{placement:r,elements:i,rects:s,platform:o,strategy:a}=t,{padding:u=2,x:l,y:c}=e,f=rA(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:s.reference,offsetParent:await(o.getOffsetParent==null?void 0:o.getOffsetParent(i.floating)),strategy:a}):s.reference),d=(n=await(o.getClientRects==null?void 0:o.getClientRects(i.reference)))!=null?n:[],h=VG(u),p=await o.getElementRects({reference:{getBoundingClientRect:function(){var m;if(d.length===2&&d[0].left>d[1].right&&l!=null&&c!=null)return(m=d.find(g=>l>g.left-h.left&&l<g.right+h.right&&c>g.top-h.top&&c<g.bottom+h.bottom))!=null?m:f;if(d.length>=2){if(Av(r)==="x"){const w=d[0],x=d[d.length-1],S=Sp(r)==="top",I=w.top,C=x.bottom,O=S?w.left:x.left,z=S?w.right:x.right;return{top:I,bottom:C,left:O,right:z,width:z-O,height:C-I,x:O,y:I}}const g=Sp(r)==="left",y=Im(...d.map(w=>w.right)),v=BSe(...d.map(w=>w.left)),_=d.filter(w=>g?w.left===v:w.right===y),b=_[0].top,E=_[_.length-1].bottom;return{top:b,bottom:E,left:v,right:y,width:y-v,height:E-b,x:v,y:b}}return f}},floating:i.floating,strategy:a});return s.reference.x!==p.reference.x||s.reference.y!==p.reference.y||s.reference.width!==p.reference.width||s.reference.height!==p.reference.height?{reset:{rects:p}}:{}}}};function HSe(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function Yp(e){if(e==null)return window;if(!HSe(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function jg(e){return Yp(e).getComputedStyle(e)}function zg(e){return HSe(e)?"":e?(e.nodeName||"").toLowerCase():""}function qSe(){const e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function Tp(e){return e instanceof Yp(e).HTMLElement}function op(e){return e instanceof Yp(e).Element}function xae(e){return typeof ShadowRoot>"u"?!1:e instanceof Yp(e).ShadowRoot||e instanceof ShadowRoot}function o6(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=jg(e);return/auto|scroll|overlay|hidden/.test(t+r+n)&&!["inline","contents"].includes(i)}function Ftt(e){return["table","td","th"].includes(zg(e))}function Hz(e){const t=/firefox/i.test(qSe()),n=jg(e),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const s=n.contain;return s!=null&&s.includes(i)})}function WSe(){return!/^((?!chrome|android).)*safari/i.test(qSe())}function WG(e){return["html","body","#document"].includes(zg(e))}const Sae=Math.min,UT=Math.max,YR=Math.round;function ap(e,t,n){var r,i,s,o;t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect();let u=1,l=1;t&&Tp(e)&&(u=e.offsetWidth>0&&YR(a.width)/e.offsetWidth||1,l=e.offsetHeight>0&&YR(a.height)/e.offsetHeight||1);const c=op(e)?Yp(e):window,f=!WSe()&&n,d=(a.left+(f&&(r=(i=c.visualViewport)==null?void 0:i.offsetLeft)!=null?r:0))/u,h=(a.top+(f&&(s=(o=c.visualViewport)==null?void 0:o.offsetTop)!=null?s:0))/l,p=a.width/u,m=a.height/l;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d,x:d,y:h}}function _g(e){return(t=e,(t instanceof Yp(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function a6(e){return op(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function GSe(e){return ap(_g(e)).left+a6(e).scrollLeft}function Btt(e,t,n){const r=Tp(t),i=_g(t),s=ap(e,r&&function(u){const l=ap(u);return YR(l.width)!==u.offsetWidth||YR(l.height)!==u.offsetHeight}(t),n==="fixed");let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&n!=="fixed")if((zg(t)!=="body"||o6(i))&&(o=a6(t)),Tp(t)){const u=ap(t,!0);a.x=u.x+t.clientLeft,a.y=u.y+t.clientTop}else i&&(a.x=GSe(i));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}function KR(e){if(zg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||(xae(e)?e.host:null)||_g(e);return xae(t)?t.host:t}function Tae(e){return Tp(e)&&jg(e).position!=="fixed"?e.offsetParent:null}function Aae(e){const t=Yp(e);let n=Tae(e);for(;n&&Ftt(n)&&jg(n).position==="static";)n=Tae(n);return n&&(zg(n)==="html"||zg(n)==="body"&&jg(n).position==="static"&&!Hz(n))?t:n||function(r){let i=KR(r);for(;Tp(i)&&!WG(i);){if(Hz(i))return i;i=KR(i)}return null}(e)||t}function Cae(e){if(Tp(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=ap(e);return{width:t.width,height:t.height}}function YSe(e){const t=KR(e);return WG(t)?e.ownerDocument.body:Tp(t)&&o6(t)?t:YSe(t)}function up(e,t){var n;t===void 0&&(t=[]);const r=YSe(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),s=Yp(r),o=i?[s].concat(s.visualViewport||[],o6(r)?r:[]):r,a=t.concat(o);return i?a:a.concat(up(o))}function Iae(e,t,n){return t==="viewport"?rA(function(r,i){const s=Yp(r),o=_g(r),a=s.visualViewport;let u=o.clientWidth,l=o.clientHeight,c=0,f=0;if(a){u=a.width,l=a.height;const d=WSe();(d||!d&&i==="fixed")&&(c=a.offsetLeft,f=a.offsetTop)}return{width:u,height:l,x:c,y:f}}(e,n)):op(t)?function(r,i){const s=ap(r,!1,i==="fixed"),o=s.top+r.clientTop,a=s.left+r.clientLeft;return{top:o,left:a,x:a,y:o,right:a+r.clientWidth,bottom:o+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(t,n):rA(function(r){var i;const s=_g(r),o=a6(r),a=(i=r.ownerDocument)==null?void 0:i.body,u=UT(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),l=UT(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let c=-o.scrollLeft+GSe(r);const f=-o.scrollTop;return jg(a||s).direction==="rtl"&&(c+=UT(s.clientWidth,a?a.clientWidth:0)-u),{width:u,height:l,x:c,y:f}}(_g(e)))}const jtt={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=n==="clippingAncestors"?function(l){let c=up(l).filter(h=>op(h)&&zg(h)!=="body"),f=l,d=null;for(;op(f)&&!WG(f);){const h=jg(f);h.position==="static"&&d&&["absolute","fixed"].includes(d.position)&&!Hz(f)?c=c.filter(p=>p!==f):d=h,f=KR(f)}return c}(t):[].concat(n),o=[...s,r],a=o[0],u=o.reduce((l,c)=>{const f=Iae(t,c,i);return l.top=UT(f.top,l.top),l.right=Sae(f.right,l.right),l.bottom=Sae(f.bottom,l.bottom),l.left=UT(f.left,l.left),l},Iae(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=Tp(n),s=_g(n);if(n===s)return t;let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((i||!i&&r!=="fixed")&&((zg(n)!=="body"||o6(s))&&(o=a6(n)),Tp(n))){const u=ap(n,!0);a.x=u.x+n.clientLeft,a.y=u.y+n.clientTop}return{...t,x:t.x-o.scrollLeft+a.x,y:t.y-o.scrollTop+a.y}},isElement:op,getDimensions:Cae,getOffsetParent:Aae,getDocumentElement:_g,getElementRects:e=>{let{reference:t,floating:n,strategy:r}=e;return{reference:Btt(t,Aae(n),r),floating:{...Cae(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>jg(e).direction==="rtl"};function ztt(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=r,u=i&&!a,l=u||s?[...op(e)?up(e):e.contextElement?up(e.contextElement):[],...up(t)]:[];l.forEach(h=>{u&&h.addEventListener("scroll",n,{passive:!0}),s&&h.addEventListener("resize",n)});let c,f=null;if(o){let h=!0;f=new ResizeObserver(()=>{h||n(),h=!1}),op(e)&&!a&&f.observe(e),op(e)||!e.contextElement||a||f.observe(e.contextElement),f.observe(t)}let d=a?ap(e):null;return a&&function h(){const p=ap(e);!d||p.x===d.x&&p.y===d.y&&p.width===d.width&&p.height===d.height||n(),d=p,c=requestAnimationFrame(h)}(),n(),()=>{var h;l.forEach(p=>{u&&p.removeEventListener("scroll",n),s&&p.removeEventListener("resize",n)}),(h=f)==null||h.disconnect(),f=null,a&&cancelAnimationFrame(c)}}const Utt=(e,t,n)=>ktt(e,t,{platform:jtt,...n});var qz=typeof document<"u"?A.useLayoutEffect:A.useEffect;function XR(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!XR(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!XR(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Vtt(e){const t=A.useRef(e);return qz(()=>{t.current=e}),t}function Htt(e){let{middleware:t=[],placement:n="bottom",strategy:r="absolute",whileElementsMounted:i}=e===void 0?{}:e;const[s,o]=A.useState({x:null,y:null,strategy:r,placement:n,middlewareData:{}}),[a,u]=A.useState(t);XR(a,t)||u(t);const l=A.useRef(null),c=A.useRef(null),f=A.useRef(null),d=A.useRef(s),h=Vtt(i),p=A.useCallback(()=>{!l.current||!c.current||Utt(l.current,c.current,{middleware:a,placement:n,strategy:r}).then(b=>{m.current&&!XR(d.current,b)&&(d.current=b,wv.flushSync(()=>{o(b)}))})},[a,n,r]);qz(()=>{m.current&&p()},[p]);const m=A.useRef(!1);qz(()=>(m.current=!0,()=>{m.current=!1}),[]);const g=A.useCallback(()=>{if(typeof f.current=="function"&&(f.current(),f.current=null),l.current&&c.current)if(h.current){const b=h.current(l.current,c.current,p);f.current=b}else p()},[p,h]),y=A.useCallback(b=>{l.current=b,g()},[g]),v=A.useCallback(b=>{c.current=b,g()},[g]),_=A.useMemo(()=>({reference:l,floating:c}),[]);return A.useMemo(()=>({...s,update:p,refs:_,reference:y,floating:v}),[s,p,_,y,v])}const KSe=e=>{const{element:t,padding:n}=e;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){return r(t)?t.current!=null?wae({element:t.current,padding:n}).fn(i):{}:t?wae({element:t,padding:n}).fn(i):{}}}};var hw=typeof document<"u"?A.useLayoutEffect:A.useEffect;function qtt(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter(r=>r!==n))}}}let i9=!1,Wtt=0;const Oae=()=>"floating-ui-"+Wtt++;function Gtt(){const[e,t]=A.useState(()=>i9?Oae():void 0);return hw(()=>{e==null&&t(Oae())},[]),A.useEffect(()=>{i9||(i9=!0)},[]),e}const Pae=I1.useId,kae=Pae??Gtt,Ytt=A.createContext(null),Ktt=A.createContext(null),XSe=()=>{var e,t;return(e=(t=A.useContext(Ytt))==null?void 0:t.id)!=null?e:null},GG=()=>A.useContext(Ktt);function Fm(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function QSe(e){var t;return(t=Fm(e).defaultView)!=null?t:window}function Hy(e){return e?e instanceof QSe(e).Element:!1}function Xtt(e){return e?e instanceof QSe(e).HTMLElement:!1}const $ae=I1.useInsertionEffect;function Qtt(e){const t=A.useRef(()=>{});return $ae?$ae(()=>{t.current=e}):t.current=e,A.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function YG(e){let{open:t=!1,onOpenChange:n,whileElementsMounted:r,placement:i,middleware:s,strategy:o,nodeId:a}=e===void 0?{}:e;const[u,l]=A.useState(null),c=GG(),f=A.useRef(null),d=A.useRef({}),h=A.useState(()=>qtt())[0],p=Htt({placement:i,middleware:s,strategy:o,whileElementsMounted:r}),m=Qtt(n),g=A.useMemo(()=>({...p.refs,domReference:f}),[p.refs]),y=A.useMemo(()=>({...p,refs:g,dataRef:d,nodeId:a,events:h,open:t,onOpenChange:m,_:{domReference:u}}),[p,a,h,t,m,g,u]);hw(()=>{const b=c==null?void 0:c.nodesRef.current.find(E=>E.id===a);b&&(b.context=y)});const{reference:v}=p,_=A.useCallback(b=>{(Hy(b)||b===null)&&(y.refs.domReference.current=b,l(b)),v(b)},[v,y.refs]);return A.useMemo(()=>({...p,context:y,refs:g,reference:_}),[p,g,y,_])}function s9(e,t,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...e,...t.map(i=>i?i[n]:null).concat(e).reduce((i,s)=>(s&&Object.entries(s).forEach(o=>{let[a,u]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof u=="function"){var l;(l=r.get(a))==null||l.push(u),i[a]=function(){for(var c,f=arguments.length,d=new Array(f),h=0;h<f;h++)d[h]=arguments[h];(c=r.get(a))==null||c.forEach(p=>p(...d))}}}else i[a]=u}),i),{})}}const Jtt=function(e){e===void 0&&(e=[]);const t=e,n=A.useCallback(s=>s9(s,e,"reference"),t),r=A.useCallback(s=>s9(s,e,"floating"),t),i=A.useCallback(s=>s9(s,e,"item"),t);return A.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])};function o9(e,t){var n;let r=(n=e.filter(o=>{var a;return o.parentId===t&&((a=o.context)==null?void 0:a.open)}))!=null?n:[],i=r;for(;i.length;){var s;i=(s=e.filter(o=>{var a;return(a=i)==null?void 0:a.some(u=>{var l;return o.parentId===u.id&&((l=o.context)==null?void 0:l.open)})}))!=null?s:[],r=r.concat(i)}return r}function Ztt(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Rae(e){const t=A.useRef(e);return hw(()=>{t.current=e}),t}function ent(e){const t=A.useRef();return hw(()=>{t.current=e},[e]),t.current}function Hk(e,t,n){return n&&n!=="mouse"?0:typeof e=="number"?e:e==null?void 0:e[t]}const tnt=function(e,t){let{enabled:n=!0,delay:r=0,handleClose:i=null,mouseOnly:s=!1,restMs:o=0,move:a=!0}=t===void 0?{}:t;const{open:u,onOpenChange:l,dataRef:c,events:f,refs:d,_:h}=e,p=GG(),m=XSe(),g=Rae(i),y=Rae(r),v=ent(u),_=A.useRef(),b=A.useRef(),E=A.useRef(),w=A.useRef(),x=A.useRef(!0),S=A.useRef(!1),I=A.useCallback(()=>{var N;const $=(N=c.current.openEvent)==null?void 0:N.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[c]);A.useEffect(()=>{if(!n)return;function N(){clearTimeout(b.current),clearTimeout(w.current),x.current=!0}return f.on("dismiss",N),()=>{f.off("dismiss",N)}},[n,f,d]),A.useEffect(()=>{if(!n||!g.current)return;function N(){I()&&l(!1)}const $=Fm(d.floating.current).documentElement;return $.addEventListener("mouseleave",N),()=>{$.removeEventListener("mouseleave",N)}},[d,l,n,g,c,I]);const C=A.useCallback(function(N){N===void 0&&(N=!0);const $=Hk(y.current,"close",_.current);$&&!E.current?(clearTimeout(b.current),b.current=setTimeout(()=>l(!1),$)):N&&(clearTimeout(b.current),l(!1))},[y,l]),O=A.useCallback(()=>{E.current&&(Fm(d.floating.current).removeEventListener("pointermove",E.current),E.current=void 0)},[d]),z=A.useCallback(()=>{Fm(d.floating.current).body.style.pointerEvents="",S.current=!1},[d]);return A.useEffect(()=>{if(!n)return;function N(){return c.current.openEvent?["click","mousedown"].includes(c.current.openEvent.type):!1}function $(G){if(clearTimeout(b.current),x.current=!1,s&&_.current!=="mouse"||o>0&&Hk(y.current,"open")===0)return;c.current.openEvent=G;const U=Hk(y.current,"open",_.current);U?b.current=setTimeout(()=>{l(!0)},U):l(!0)}function D(G){if(N())return;const U=Fm(d.floating.current);if(clearTimeout(w.current),g.current){clearTimeout(b.current),E.current&&U.removeEventListener("pointermove",E.current),E.current=g.current({...e,tree:p,x:G.clientX,y:G.clientY,onClose(){z(),O(),C()}}),U.addEventListener("pointermove",E.current);return}C()}function B(G){N()||g.current==null||g.current({...e,tree:p,x:G.clientX,y:G.clientY,leave:!0,onClose(){z(),O(),C()}})(G)}const V=d.floating.current,j=d.domReference.current;if(Hy(j))return u&&j.addEventListener("mouseleave",B),V==null||V.addEventListener("mouseleave",B),a&&j.addEventListener("mousemove",$,{once:!0}),j.addEventListener("mouseenter",$),j.addEventListener("mouseleave",D),()=>{u&&j.removeEventListener("mouseleave",B),V==null||V.removeEventListener("mouseleave",B),a&&j.removeEventListener("mousemove",$),j.removeEventListener("mouseenter",$),j.removeEventListener("mouseleave",D)}},[h.domReference,n,e,s,o,a,C,O,z,l,u,p,d,y,g,c]),hw(()=>{if(n&&u&&g.current&&g.current.__options.blockPointerEvents&&I()){Fm(d.floating.current).body.style.pointerEvents="none",S.current=!0;const D=d.domReference.current,B=d.floating.current;if(Hy(D)&&B){var N,$;const V=p==null||(N=p.nodesRef.current.find(j=>j.id===m))==null||($=N.context)==null?void 0:$.refs.floating.current;return V&&(V.style.pointerEvents=""),D.style.pointerEvents="auto",B.style.pointerEvents="auto",()=>{D.style.pointerEvents="",B.style.pointerEvents=""}}}},[n,u,m,d,p,g,c,I]),hw(()=>{v&&!u&&(_.current=void 0,O(),z())}),A.useEffect(()=>()=>{O(),clearTimeout(b.current),clearTimeout(w.current),S.current&&z()},[n,O,z]),A.useMemo(()=>{if(!n)return{};function N($){_.current=$.pointerType}return{reference:{onPointerDown:N,onPointerEnter:N,onMouseMove(){u||o===0||(clearTimeout(w.current),w.current=setTimeout(()=>{x.current||l(!0)},o))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(){C(!1)}}}},[n,o,u,l,C])},JSe=A.createContext({delay:1e3,initialDelay:1e3,currentId:null,setCurrentId:()=>{},setState:()=>{}}),ZSe=()=>A.useContext(JSe),nnt=e=>{let{children:t,delay:n}=e;const[r,i]=A.useState({delay:n,initialDelay:n,currentId:null}),s=A.useCallback(o=>{i(a=>({...a,currentId:o}))},[]);return A.createElement(JSe.Provider,{value:A.useMemo(()=>({...r,setState:i,setCurrentId:s}),[r,i,s])},t)},rnt=(e,t)=>{let{open:n,onOpenChange:r}=e,{id:i}=t;const{currentId:s,initialDelay:o,setState:a}=ZSe();A.useEffect(()=>{s&&(a(u=>({...u,delay:{open:1,close:Hk(o,"close")}})),s!==i&&r(!1))},[i,r,a,s,o]),A.useEffect(()=>{!n&&s===i&&(r(!1),a(u=>({...u,delay:o,currentId:null})))},[n,a,s,i,r,o])},int=function(e,t){let{open:n}=e,{enabled:r=!0,role:i="dialog"}=t===void 0?{}:t;const s=kae(),o=kae();return A.useMemo(()=>{const a={id:s,role:i};return r?i==="tooltip"?{reference:{"aria-describedby":n?s:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?s:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[r,i,n,s,o])};function a9(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}const snt={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},ont={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},ant=function(e,t){let{open:n,onOpenChange:r,refs:i,events:s,nodeId:o}=e,{enabled:a=!0,escapeKey:u=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:f=!1,referencePressEvent:d="pointerdown",ancestorScroll:h=!1,bubbles:p=!0}=t===void 0?{}:t;const m=GG(),g=XSe()!=null,y=A.useRef(!1);return A.useEffect(()=>{if(!n||!a)return;function v(x){if(x.key==="Escape"){if(!p&&m&&o9(m.nodesRef.current,o).length>0)return;s.emit("dismiss",{preventScroll:!1}),r(!1)}}function _(x){const S=y.current;if(y.current=!1,S)return;const I=Ztt(x);if(Hy(I)&&i.floating.current){var C;const z=(C=i.floating.current.ownerDocument.defaultView)!=null?C:window,N=I.scrollWidth>I.clientWidth,$=I.scrollHeight>I.clientHeight;let D=$&&x.offsetX>I.clientWidth;if($&&z.getComputedStyle(I).direction==="rtl"&&(D=x.offsetX<=I.offsetWidth-I.clientWidth),D||N&&x.offsetY>I.clientHeight)return}const O=m&&o9(m.nodesRef.current,o).some(z=>{var N;return a9(x,(N=z.context)==null?void 0:N.refs.floating.current)});a9(x,i.floating.current)||a9(x,i.domReference.current)||O||!p&&m&&o9(m.nodesRef.current,o).length>0||(s.emit("dismiss",g?{preventScroll:!0}:!1),r(!1))}function b(){r(!1)}const E=Fm(i.floating.current);u&&E.addEventListener("keydown",v),l&&E.addEventListener(c,_);let w=[];return h&&(Hy(i.domReference.current)&&(w=up(i.domReference.current)),Hy(i.floating.current)&&(w=w.concat(up(i.floating.current))),!Hy(i.reference.current)&&i.reference.current&&i.reference.current.contextElement&&(w=w.concat(up(i.reference.current.contextElement)))),w=w.filter(x=>{var S;return x!==((S=E.defaultView)==null?void 0:S.visualViewport)}),w.forEach(x=>{x.addEventListener("scroll",b,{passive:!0})}),()=>{u&&E.removeEventListener("keydown",v),l&&E.removeEventListener(c,_),w.forEach(x=>{x.removeEventListener("scroll",b)})}},[u,l,c,s,m,o,n,r,h,a,p,i,g]),A.useEffect(()=>{y.current=!1},[l,c]),A.useMemo(()=>a?{reference:{[snt[d]]:()=>{f&&(s.emit("dismiss"),r(!1))}},floating:{[ont[c]]:()=>{y.current=!0}}}:{},[a,s,f,c,d,r])},unt=function(e,t){let{open:n,onOpenChange:r,dataRef:i,refs:s,events:o}=e,{enabled:a=!0,keyboardOnly:u=!0}=t===void 0?{}:t;const l=A.useRef(""),c=A.useRef(!1),f=A.useRef();return A.useEffect(()=>{var d;if(!a)return;const p=(d=Fm(s.floating.current).defaultView)!=null?d:window;function m(){!n&&Xtt(s.domReference.current)&&s.domReference.current.blur()}return p.addEventListener("blur",m),()=>{p.removeEventListener("blur",m)}},[s,n,a]),A.useEffect(()=>{if(!a)return;function d(){c.current=!0}return o.on("dismiss",d),()=>{o.off("dismiss",d)}},[o,a]),A.useEffect(()=>()=>{clearTimeout(f.current)},[]),A.useMemo(()=>a?{reference:{onPointerDown(d){let{pointerType:h}=d;l.current=h,c.current=!!(h&&u)},onPointerLeave(){c.current=!1},onFocus(d){var h,p,m;c.current||d.type==="focus"&&((h=i.current.openEvent)==null?void 0:h.type)==="mousedown"&&(p=s.domReference.current)!=null&&p.contains((m=i.current.openEvent)==null?void 0:m.target)||(i.current.openEvent=d.nativeEvent,r(!0))},onBlur(d){const h=d.relatedTarget;f.current=setTimeout(()=>{var p,m;(p=s.floating.current)!=null&&p.contains(h)||(m=s.domReference.current)!=null&&m.contains(h)||(c.current=!1,r(!1))})}}}:{},[a,u,s,i,r])};function eTe({opened:e,floating:t,positionDependencies:n}){const[r,i]=A.useState(0);A.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return ztt(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference,t.refs.floating,e,r]),bs(()=>{t.update()},n),bs(()=>{i(s=>s+1)},[e])}function lnt(e){const t=[zSe(e.offset)];return e.middlewares.shift&&t.push(qG({limiter:Ltt()})),e.middlewares.flip&&t.push(jSe()),e.middlewares.inline&&t.push(VSe()),t.push(KSe({element:e.arrowRef})),t}function cnt(e){const[t,n]=Ta({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;(o=e.onClose)==null||o.call(e),n(!1)},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=YG({placement:e.position,middleware:[...lnt(e),...e.width==="target"?[Mtt({apply({rects:o}){var a,u;Object.assign((u=(a=s.refs.floating.current)==null?void 0:a.style)!=null?u:{},{width:`${o.reference.width}px`})}})]:[]]});return eTe({opened:e.opened,positionDependencies:e.positionDependencies,floating:s}),bs(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const tTe={context:"Popover component was not found in the tree",children:"Popover.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[fnt,nTe]=kEe(tTe.context);var dnt=Object.defineProperty,hnt=Object.defineProperties,pnt=Object.getOwnPropertyDescriptors,QR=Object.getOwnPropertySymbols,rTe=Object.prototype.hasOwnProperty,iTe=Object.prototype.propertyIsEnumerable,Nae=(e,t,n)=>t in e?dnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,QO=(e,t)=>{for(var n in t||(t={}))rTe.call(t,n)&&Nae(e,n,t[n]);if(QR)for(var n of QR(t))iTe.call(t,n)&&Nae(e,n,t[n]);return e},mnt=(e,t)=>hnt(e,pnt(t)),gnt=(e,t)=>{var n={};for(var r in e)rTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QR)for(var r of QR(e))t.indexOf(r)<0&&iTe.call(e,r)&&(n[r]=e[r]);return n};const sTe=A.forwardRef((e,t)=>{var n=e,{children:r,refProp:i="ref",popupType:s="dialog"}=n,o=gnt(n,["children","refProp","popupType"]);if(!NC(r))throw new Error(tTe.children);const a=o,u=nTe(),l=As(u.reference,r.ref,t),c=u.withRoles?{"aria-haspopup":s,"aria-expanded":u.opened,"aria-controls":u.getDropdownId(),id:u.getTargetId()}:{};return A.cloneElement(r,QO(mnt(QO(QO(QO({},a),c),u.targetProps),{className:NEe(u.targetProps.className,a.className,r.props.className),[i]:l}),u.controlled?null:{onClick:u.onToggle}))});sTe.displayName="@mantine/core/PopoverTarget";var ynt=pt((e,{radius:t,shadow:n})=>({dropdown:{position:"absolute",backgroundColor:e.white,background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,padding:`${e.spacing.sm}px ${e.spacing.md}px`,boxShadow:e.shadows[n]||n||"none",borderRadius:e.fn.radius(t),"&:focus":{outline:0}},arrow:{backgroundColor:"inherit",border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,zIndex:1}}));const vnt=ynt;var _nt=Object.defineProperty,Dae=Object.getOwnPropertySymbols,bnt=Object.prototype.hasOwnProperty,wnt=Object.prototype.propertyIsEnumerable,Lae=(e,t,n)=>t in e?_nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a_=(e,t)=>{for(var n in t||(t={}))bnt.call(t,n)&&Lae(e,n,t[n]);if(Dae)for(var n of Dae(t))wnt.call(t,n)&&Lae(e,n,t[n]);return e};const Mae={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function oTe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in HO?a_(a_(a_({transitionProperty:HO[e].transitionProperty},i),HO[e].common),HO[e][Mae[t]]):null:a_(a_(a_({transitionProperty:e.transitionProperty},i),e.common),e[Mae[t]])}function aTe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=us(),l=e6(),c=u.respectReducedMotion?l:!1,[f,d]=A.useState(r?"entered":"exited");let h=c?0:e;const p=A.useRef(-1),m=g=>{const y=g?i:s,v=g?o:a;if(d(g?"pre-entering":"pre-exiting"),window.clearTimeout(p.current),h=c?0:g?e:t,h===0)typeof y=="function"&&y(),typeof v=="function"&&v(),d(g?"entered":"exited");else{const _=window.setTimeout(()=>{typeof y=="function"&&y(),d(g?"entering":"exiting")},10);p.current=window.setTimeout(()=>{window.clearTimeout(_),typeof v=="function"&&v(),d(g?"entered":"exited")},h)}};return bs(()=>{m(r)},[r]),A.useEffect(()=>()=>window.clearTimeout(p.current),[]),{transitionDuration:h,transitionStatus:f,transitionTimingFunction:n||u.transitionTimingFunction}}function UC({transition:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=aTe({mounted:r,exitDuration:n,duration:t,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});return c===0?r?L.createElement(L.Fragment,null,i({})):null:f==="exited"?null:L.createElement(L.Fragment,null,i(oTe({transition:e,duration:c,state:f,timingFunction:d})))}UC.displayName="@mantine/core/Transition";function uTe({children:e,active:t=!0,refProp:n="ref"}){const r=fxe(t),i=As(r,e==null?void 0:e.ref);return NC(e)?A.cloneElement(e,{[n]:i}):e}uTe.displayName="@mantine/core/FocusTrap";var Ent=Object.defineProperty,xnt=Object.defineProperties,Snt=Object.getOwnPropertyDescriptors,Fae=Object.getOwnPropertySymbols,Tnt=Object.prototype.hasOwnProperty,Ant=Object.prototype.propertyIsEnumerable,Bae=(e,t,n)=>t in e?Ent(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dm=(e,t)=>{for(var n in t||(t={}))Tnt.call(t,n)&&Bae(e,n,t[n]);if(Fae)for(var n of Fae(t))Ant.call(t,n)&&Bae(e,n,t[n]);return e},JO=(e,t)=>xnt(e,Snt(t));function jae(e,t,n){return e==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function zae(e,t,n,r){return e==="center"?{[r==="ltr"?"left":"right"]:t}:e==="end"?{[r==="ltr"?"right":"left"]:n}:e==="start"?{[r==="ltr"?"left":"right"]:n}:{}}const Cnt={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Int({position:e,withBorder:t,arrowSize:n,arrowOffset:r,arrowRadius:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:n,height:n,transform:"rotate(45deg)",position:"absolute",[Cnt[u]]:i},f=t?-n/2-1:-n/2;return u==="left"?JO(dm(dm({},c),jae(l,o,r)),{right:f,borderLeft:0,borderBottom:0}):u==="right"?JO(dm(dm({},c),jae(l,o,r)),{left:f,borderRight:0,borderTop:0}):u==="top"?JO(dm(dm({},c),zae(l,s,r,a)),{bottom:f,borderTop:0,[a==="ltr"?"borderLeft":"borderRight"]:0}):u==="bottom"?JO(dm(dm({},c),zae(l,s,r,a)),{top:f,borderBottom:0,[a==="ltr"?"borderRight":"borderLeft"]:0}):{}}var Ont=Object.defineProperty,Pnt=Object.defineProperties,knt=Object.getOwnPropertyDescriptors,JR=Object.getOwnPropertySymbols,lTe=Object.prototype.hasOwnProperty,cTe=Object.prototype.propertyIsEnumerable,Uae=(e,t,n)=>t in e?Ont(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$nt=(e,t)=>{for(var n in t||(t={}))lTe.call(t,n)&&Uae(e,n,t[n]);if(JR)for(var n of JR(t))cTe.call(t,n)&&Uae(e,n,t[n]);return e},Rnt=(e,t)=>Pnt(e,knt(t)),Nnt=(e,t)=>{var n={};for(var r in e)lTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JR)for(var r of JR(e))t.indexOf(r)<0&&cTe.call(e,r)&&(n[r]=e[r]);return n};const KG=A.forwardRef((e,t)=>{var n=e,{withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,visible:u,arrowX:l,arrowY:c}=n,f=Nnt(n,["withBorder","position","arrowSize","arrowOffset","arrowRadius","visible","arrowX","arrowY"]);const d=us();return u?L.createElement("div",Rnt($nt({},f),{ref:t,style:Int({withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,dir:d.dir,arrowX:l,arrowY:c})})):null});KG.displayName="@mantine/core/FloatingArrow";var Dnt=Object.defineProperty,Lnt=Object.defineProperties,Mnt=Object.getOwnPropertyDescriptors,ZR=Object.getOwnPropertySymbols,fTe=Object.prototype.hasOwnProperty,dTe=Object.prototype.propertyIsEnumerable,Vae=(e,t,n)=>t in e?Dnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ZO=(e,t)=>{for(var n in t||(t={}))fTe.call(t,n)&&Vae(e,n,t[n]);if(ZR)for(var n of ZR(t))dTe.call(t,n)&&Vae(e,n,t[n]);return e},Hae=(e,t)=>Lnt(e,Mnt(t)),Fnt=(e,t)=>{var n={};for(var r in e)fTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZR)for(var r of ZR(e))t.indexOf(r)<0&&dTe.call(e,r)&&(n[r]=e[r]);return n};function hTe(e){var t=e,{style:n,className:r,children:i,onKeyDownCapture:s}=t,o=Fnt(t,["style","className","children","onKeyDownCapture"]);const{classNames:a,styles:u,unstyled:l,staticSelector:c}=MC(),f=nTe(),{classes:d,cx:h}=vnt({radius:f.radius,shadow:f.shadow},{name:c,classNames:a,styles:u,unstyled:l}),p=axe({opened:f.opened,shouldReturnFocus:f.returnFocus}),m=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog"}:{};return f.disabled?null:L.createElement(FC,{withinPortal:f.withinPortal},L.createElement(UC,{mounted:f.opened,transition:f.transition,duration:f.transitionDuration,exitDuration:typeof f.exitTransitionDuration=="number"?f.exitTransitionDuration:f.transitionDuration},g=>{var y,v;return L.createElement(uTe,{active:f.trapFocus},L.createElement(At,ZO(Hae(ZO({},m),{tabIndex:-1,ref:f.floating,style:Hae(ZO(ZO({},n),g),{zIndex:f.zIndex,top:(y=f.y)!=null?y:0,left:(v=f.x)!=null?v:0,width:f.width==="target"?void 0:f.width}),className:h(d.dropdown,r),onKeyDownCapture:EYe(f.onClose,{active:f.closeOnEscape,onTrigger:p,onKeyDown:s}),"data-position":f.placement}),o),i,L.createElement(KG,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,withBorder:!0,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,className:d.arrow})))}))}hTe.displayName="@mantine/core/PopoverDropdown";function pTe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}var qae=Object.getOwnPropertySymbols,Bnt=Object.prototype.hasOwnProperty,jnt=Object.prototype.propertyIsEnumerable,znt=(e,t)=>{var n={};for(var r in e)Bnt.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qae)for(var r of qae(e))t.indexOf(r)<0&&jnt.call(e,r)&&(n[r]=e[r]);return n};const Unt={position:"bottom",offset:8,positionDependencies:[],transition:"fade",transitionDuration:150,middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,closeOnClickOutside:!0,withinPortal:!1,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Tu("popover"),__staticSelector:"Popover",width:"max-content"};function Vi(e){var t,n,r,i,s,o;const a=A.useRef(null),u=Ct("Popover",Unt,e),{children:l,position:c,offset:f,onPositionChange:d,positionDependencies:h,opened:p,transition:m,transitionDuration:g,width:y,middlewares:v,withArrow:_,arrowSize:b,arrowOffset:E,arrowRadius:w,unstyled:x,classNames:S,styles:I,closeOnClickOutside:C,withinPortal:O,closeOnEscape:z,clickOutsideEvents:N,trapFocus:$,onClose:D,onOpen:B,onChange:V,zIndex:j,radius:G,shadow:U,id:P,defaultOpened:k,exitTransitionDuration:H,__staticSelector:M,withRoles:F,disabled:J,returnFocus:se}=u,ae=znt(u,["children","position","offset","onPositionChange","positionDependencies","opened","transition","transitionDuration","width","middlewares","withArrow","arrowSize","arrowOffset","arrowRadius","unstyled","classNames","styles","closeOnClickOutside","withinPortal","closeOnEscape","clickOutsideEvents","trapFocus","onClose","onOpen","onChange","zIndex","radius","shadow","id","defaultOpened","exitTransitionDuration","__staticSelector","withRoles","disabled","returnFocus"]),[ce,le]=A.useState(null),[ge,ue]=A.useState(null),Fe=vl(P),$e=us(),Ge=cnt({middlewares:v,width:y,position:pTe($e.dir,c),offset:f+(_?b/2:0),arrowRef:a,onPositionChange:d,positionDependencies:h,opened:p,defaultOpened:k,onChange:V,onOpen:B,onClose:D});wXe(()=>C&&Ge.onClose(),N,[ce,ge]);const Re=A.useCallback(Me=>{le(Me),Ge.floating.reference(Me)},[Ge.floating.reference]),Oe=A.useCallback(Me=>{ue(Me),Ge.floating.floating(Me)},[Ge.floating.floating]);return L.createElement(ixe,{classNames:S,styles:I,unstyled:x,staticSelector:M},L.createElement(fnt,{value:{returnFocus:se,disabled:J,controlled:Ge.controlled,reference:Re,floating:Oe,x:Ge.floating.x,y:Ge.floating.y,arrowX:(r=(n=(t=Ge.floating)==null?void 0:t.middlewareData)==null?void 0:n.arrow)==null?void 0:r.x,arrowY:(o=(s=(i=Ge.floating)==null?void 0:i.middlewareData)==null?void 0:s.arrow)==null?void 0:o.y,opened:Ge.opened,arrowRef:a,transition:m,transitionDuration:g,exitTransitionDuration:H,width:y,withArrow:_,arrowSize:b,arrowOffset:E,arrowRadius:w,placement:Ge.floating.placement,trapFocus:$,withinPortal:O,zIndex:j,radius:G,shadow:U,closeOnEscape:z,onClose:Ge.onClose,onToggle:Ge.onToggle,getTargetId:()=>`${Fe}-target`,getDropdownId:()=>`${Fe}-dropdown`,withRoles:F,targetProps:ae}},l))}Vi.Target=sTe;Vi.Dropdown=hTe;Vi.displayName="@mantine/core/Popover";var Vnt=Object.defineProperty,eN=Object.getOwnPropertySymbols,mTe=Object.prototype.hasOwnProperty,gTe=Object.prototype.propertyIsEnumerable,Wae=(e,t,n)=>t in e?Vnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hnt=(e,t)=>{for(var n in t||(t={}))mTe.call(t,n)&&Wae(e,n,t[n]);if(eN)for(var n of eN(t))gTe.call(t,n)&&Wae(e,n,t[n]);return e},qnt=(e,t)=>{var n={};for(var r in e)mTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&eN)for(var r of eN(e))t.indexOf(r)<0&&gTe.call(e,r)&&(n[r]=e[r]);return n};function Wnt(e){var t=e,{children:n,component:r="div",maxHeight:i=220,direction:s="column",id:o,innerRef:a,__staticSelector:u,styles:l,classNames:c,unstyled:f}=t,d=qnt(t,["children","component","maxHeight","direction","id","innerRef","__staticSelector","styles","classNames","unstyled"]);const{classes:h}=Ptt(null,{name:u,styles:l,classNames:c,unstyled:f});return L.createElement(Vi.Dropdown,Hnt({p:0,onMouseDown:p=>p.preventDefault()},d),L.createElement("div",{style:{maxHeight:i,display:"flex"}},L.createElement(At,{component:r||"div",id:`${o}-items`,"aria-labelledby":`${o}-label`,role:"listbox",onMouseDown:p=>p.preventDefault(),style:{flex:1,overflowY:r!==s6?"auto":void 0},"data-combobox-popover":!0,ref:a},L.createElement("div",{className:h.itemsWrapper,style:{flexDirection:s}},n))))}function bg({opened:e,transition:t="fade",transitionDuration:n=0,shadow:r,withinPortal:i,children:s,__staticSelector:o,onDirectionChange:a,switchDirectionOnFlip:u,zIndex:l,dropdownPosition:c,positionDependencies:f=[],classNames:d,styles:h,unstyled:p,readOnly:m}){return L.createElement(Vi,{unstyled:p,classNames:d,styles:h,width:"target",withRoles:!1,opened:e,middlewares:{flip:c==="flip",shift:!1},position:c==="flip"?"bottom":c,positionDependencies:f,zIndex:l,__staticSelector:o,withinPortal:i,transition:t,transitionDuration:n,shadow:r,disabled:m,onPositionChange:g=>u&&(a==null?void 0:a(g==="top"?"column-reverse":"column"))},s)}bg.Target=Vi.Target;bg.Dropdown=Wnt;var Gnt=Object.defineProperty,Ynt=Object.defineProperties,Knt=Object.getOwnPropertyDescriptors,tN=Object.getOwnPropertySymbols,yTe=Object.prototype.hasOwnProperty,vTe=Object.prototype.propertyIsEnumerable,Gae=(e,t,n)=>t in e?Gnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u9=(e,t)=>{for(var n in t||(t={}))yTe.call(t,n)&&Gae(e,n,t[n]);if(tN)for(var n of tN(t))vTe.call(t,n)&&Gae(e,n,t[n]);return e},Xnt=(e,t)=>Ynt(e,Knt(t)),Qnt=(e,t)=>{var n={};for(var r in e)yTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tN)for(var r of tN(e))t.indexOf(r)<0&&vTe.call(e,r)&&(n[r]=e[r]);return n};function _Te(e,t,n){const r=Ct(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:_,style:b,inputContainer:E,inputWrapperOrder:w,withAsterisk:x}=r,S=Qnt(r,["label","description","error","required","classNames","styles","className","unstyled","__staticSelector","sx","errorProps","labelProps","descriptionProps","wrapperProps","id","size","style","inputContainer","inputWrapperOrder","withAsterisk"]),I=vl(v),{systemStyles:C,rest:O}=yf(S);return Xnt(u9({},O),{classNames:u,styles:l,unstyled:f,wrapperProps:u9(u9({label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,id:I,size:_,style:b,inputContainer:E,inputWrapperOrder:w,withAsterisk:x},y),C),inputProps:{required:a,classNames:u,styles:l,unstyled:f,id:I,size:_,__staticSelector:d,invalid:!!o}})}var Jnt=pt((e,{size:t})=>({label:{display:"inline-block",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),fontWeight:500,color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[9],wordBreak:"break-word",cursor:"default",WebkitTapHighlightColor:"transparent"},required:{color:e.fn.variant({variant:"filled",color:"red"}).background}}));const Znt=Jnt;var ert=Object.defineProperty,nN=Object.getOwnPropertySymbols,bTe=Object.prototype.hasOwnProperty,wTe=Object.prototype.propertyIsEnumerable,Yae=(e,t,n)=>t in e?ert(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,trt=(e,t)=>{for(var n in t||(t={}))bTe.call(t,n)&&Yae(e,n,t[n]);if(nN)for(var n of nN(t))wTe.call(t,n)&&Yae(e,n,t[n]);return e},nrt=(e,t)=>{var n={};for(var r in e)bTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nN)for(var r of nN(e))t.indexOf(r)<0&&wTe.call(e,r)&&(n[r]=e[r]);return n};const XG=A.forwardRef((e,t)=>{var n=e,{labelElement:r="label",children:i,required:s,size:o="sm",classNames:a,styles:u,unstyled:l,className:c,htmlFor:f,__staticSelector:d}=n,h=nrt(n,["labelElement","children","required","size","classNames","styles","unstyled","className","htmlFor","__staticSelector"]);const{classes:p,cx:m}=Znt({size:o},{name:["InputWrapper",d],classNames:a,styles:u,unstyled:l});return L.createElement(At,trt({component:r,ref:t,className:m(p.label,c),htmlFor:r==="label"?f:void 0},h),i,s&&L.createElement("span",{className:p.required,"aria-hidden":!0}," *"))});XG.displayName="@mantine/core/InputLabel";var rrt=pt((e,{size:t})=>({error:{wordBreak:"break-word",color:e.fn.variant({variant:"filled",color:"red"}).background,fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}}));const irt=rrt;var srt=Object.defineProperty,rN=Object.getOwnPropertySymbols,ETe=Object.prototype.hasOwnProperty,xTe=Object.prototype.propertyIsEnumerable,Kae=(e,t,n)=>t in e?srt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ort=(e,t)=>{for(var n in t||(t={}))ETe.call(t,n)&&Kae(e,n,t[n]);if(rN)for(var n of rN(t))xTe.call(t,n)&&Kae(e,n,t[n]);return e},art=(e,t)=>{var n={};for(var r in e)ETe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rN)for(var r of rN(e))t.indexOf(r)<0&&xTe.call(e,r)&&(n[r]=e[r]);return n};const QG=A.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u="sm",__staticSelector:l}=n,c=art(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]);const{classes:f,cx:d}=irt({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return L.createElement(Rt,ort({className:d(f.error,i),ref:t,role:"alert"},c),r)});QG.displayName="@mantine/core/InputError";var urt=pt((e,{size:t})=>({description:{wordBreak:"break-word",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}}));const lrt=urt;var crt=Object.defineProperty,iN=Object.getOwnPropertySymbols,STe=Object.prototype.hasOwnProperty,TTe=Object.prototype.propertyIsEnumerable,Xae=(e,t,n)=>t in e?crt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,frt=(e,t)=>{for(var n in t||(t={}))STe.call(t,n)&&Xae(e,n,t[n]);if(iN)for(var n of iN(t))TTe.call(t,n)&&Xae(e,n,t[n]);return e},drt=(e,t)=>{var n={};for(var r in e)STe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iN)for(var r of iN(e))t.indexOf(r)<0&&TTe.call(e,r)&&(n[r]=e[r]);return n};const JG=A.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u="sm",__staticSelector:l}=n,c=drt(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]);const{classes:f,cx:d}=lrt({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return L.createElement(Rt,frt({color:"dimmed",className:d(f.description,i),ref:t,unstyled:a},c),r)});JG.displayName="@mantine/core/InputDescription";const ATe=A.createContext({offsetBottom:!1,offsetTop:!1}),hrt=ATe.Provider,prt=()=>A.useContext(ATe);function mrt(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e[r-1],s=e[r+1];return{offsetBottom:t&&s==="description"||n&&s==="error",offsetTop:t&&i==="description"||n&&i==="error"}}var grt=Object.defineProperty,yrt=Object.defineProperties,vrt=Object.getOwnPropertyDescriptors,Qae=Object.getOwnPropertySymbols,_rt=Object.prototype.hasOwnProperty,brt=Object.prototype.propertyIsEnumerable,Jae=(e,t,n)=>t in e?grt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wrt=(e,t)=>{for(var n in t||(t={}))_rt.call(t,n)&&Jae(e,n,t[n]);if(Qae)for(var n of Qae(t))brt.call(t,n)&&Jae(e,n,t[n]);return e},Ert=(e,t)=>yrt(e,vrt(t)),xrt=pt(e=>({root:Ert(wrt({},e.fn.fontStyles()),{lineHeight:e.lineHeight})}));const Srt=xrt;var Trt=Object.defineProperty,Art=Object.defineProperties,Crt=Object.getOwnPropertyDescriptors,sN=Object.getOwnPropertySymbols,CTe=Object.prototype.hasOwnProperty,ITe=Object.prototype.propertyIsEnumerable,Zae=(e,t,n)=>t in e?Trt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ey=(e,t)=>{for(var n in t||(t={}))CTe.call(t,n)&&Zae(e,n,t[n]);if(sN)for(var n of sN(t))ITe.call(t,n)&&Zae(e,n,t[n]);return e},eue=(e,t)=>Art(e,Crt(t)),Irt=(e,t)=>{var n={};for(var r in e)CTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&sN)for(var r of sN(e))t.indexOf(r)<0&&ITe.call(e,r)&&(n[r]=e[r]);return n};const Ort={labelElement:"label",size:"sm",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},OTe=A.forwardRef((e,t)=>{const n=Ct("InputWrapper",Ort,e),{className:r,label:i,children:s,required:o,id:a,error:u,description:l,labelElement:c,labelProps:f,descriptionProps:d,errorProps:h,classNames:p,styles:m,size:g,inputContainer:y,__staticSelector:v,unstyled:_,inputWrapperOrder:b,withAsterisk:E}=n,w=Irt(n,["className","label","children","required","id","error","description","labelElement","labelProps","descriptionProps","errorProps","classNames","styles","size","inputContainer","__staticSelector","unstyled","inputWrapperOrder","withAsterisk"]),{classes:x,cx:S}=Srt(null,{classNames:p,styles:m,name:["InputWrapper",v],unstyled:_}),I={classNames:p,styles:m,unstyled:_,size:g,__staticSelector:v},C=typeof E=="boolean"?E:o,O=i&&L.createElement(XG,ey(ey({key:"label",labelElement:c,id:a?`${a}-label`:void 0,htmlFor:a,required:C},I),f),i),z=l&&L.createElement(JG,eue(ey(ey({key:"description"},d),I),{size:(d==null?void 0:d.size)||I.size}),l),N=L.createElement(A.Fragment,{key:"input"},y(s)),$=typeof u!="boolean"&&u&&L.createElement(QG,eue(ey(ey({},h),I),{size:(h==null?void 0:h.size)||I.size,key:"error"}),u),D=b.map(B=>{switch(B){case"label":return O;case"input":return N;case"description":return z;case"error":return $;default:return null}});return L.createElement(hrt,{value:mrt(b,{hasDescription:!!z,hasError:!!$})},L.createElement(At,ey({className:S(x.root,r),ref:t},w),D))});OTe.displayName="@mantine/core/InputWrapper";var Prt=Object.defineProperty,krt=Object.defineProperties,$rt=Object.getOwnPropertyDescriptors,tue=Object.getOwnPropertySymbols,Rrt=Object.prototype.hasOwnProperty,Nrt=Object.prototype.propertyIsEnumerable,nue=(e,t,n)=>t in e?Prt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l9=(e,t)=>{for(var n in t||(t={}))Rrt.call(t,n)&&nue(e,n,t[n]);if(tue)for(var n of tue(t))Nrt.call(t,n)&&nue(e,n,t[n]);return e},rue=(e,t)=>krt(e,$rt(t));const Bo={xs:30,sm:36,md:42,lg:50,xl:60};function Drt({theme:e,variant:t}){return t==="default"?{border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,transition:"border-color 100ms ease","&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:t==="filled"?{border:"1px solid transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],"&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:{borderWidth:0,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:"transparent",minHeight:28,outline:0,"&:focus, &:focus-within":{outline:"none",borderColor:"transparent"},"&:disabled":{backgroundColor:"transparent","&:focus, &:focus-within":{outline:"none",borderColor:"transparent"}}}}var Lrt=pt((e,{size:t,multiline:n,radius:r,variant:i,invalid:s,rightSectionWidth:o,withRightSection:a,iconWidth:u,offsetBottom:l,offsetTop:c,pointer:f})=>{const d=e.fn.variant({variant:"filled",color:"red"}).background,h=i==="default"||i==="filled"?{minHeight:e.fn.size({size:t,sizes:Bo}),paddingLeft:e.fn.size({size:t,sizes:Bo})/3,paddingRight:a?o:e.fn.size({size:t,sizes:Bo})/3,borderRadius:e.fn.radius(r)}:null;return{wrapper:{position:"relative",marginTop:c?`calc(${e.spacing.xs}px / 2)`:void 0,marginBottom:l?`calc(${e.spacing.xs}px / 2)`:void 0},input:l9(rue(l9(rue(l9({},e.fn.fontStyles()),{height:n?i==="unstyled"?void 0:"auto":e.fn.size({size:t,sizes:Bo}),WebkitTapHighlightColor:"transparent",lineHeight:n?e.lineHeight:`${e.fn.size({size:t,sizes:Bo})-2}px`,appearance:"none",resize:"none",boxSizing:"border-box",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),width:"100%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"block",textAlign:"left",cursor:f?"pointer":void 0}),h),{"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},"&::placeholder":{opacity:1,userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button, &::-webkit-search-decoration, &::-webkit-search-cancel-button, &::-webkit-search-results-button, &::-webkit-search-results-decoration":{appearance:"none"},"&[type=number]":{MozAppearance:"textfield"}}),Drt({theme:e,variant:i})),withIcon:{paddingLeft:typeof u=="number"?u:e.fn.size({size:t,sizes:Bo})},invalid:{color:d,borderColor:d,"&::placeholder":{opacity:1,color:d}},disabled:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},icon:{pointerEvents:"none",position:"absolute",zIndex:1,left:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:typeof u=="number"?u:e.fn.size({size:t,sizes:Bo}),color:s?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[5]},rightSection:{position:"absolute",top:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center",width:o}}});const Mrt=Lrt;var Frt=Object.defineProperty,Brt=Object.defineProperties,jrt=Object.getOwnPropertyDescriptors,oN=Object.getOwnPropertySymbols,PTe=Object.prototype.hasOwnProperty,kTe=Object.prototype.propertyIsEnumerable,iue=(e,t,n)=>t in e?Frt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eP=(e,t)=>{for(var n in t||(t={}))PTe.call(t,n)&&iue(e,n,t[n]);if(oN)for(var n of oN(t))kTe.call(t,n)&&iue(e,n,t[n]);return e},sue=(e,t)=>Brt(e,jrt(t)),zrt=(e,t)=>{var n={};for(var r in e)PTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oN)for(var r of oN(e))t.indexOf(r)<0&&kTe.call(e,r)&&(n[r]=e[r]);return n};const Urt={rightSectionWidth:36,size:"sm",variant:"default"},CE=A.forwardRef((e,t)=>{const n=Ct("Input",Urt,e),{className:r,invalid:i,required:s,disabled:o,variant:a,icon:u,style:l,rightSectionWidth:c,iconWidth:f,rightSection:d,rightSectionProps:h,radius:p,size:m,wrapperProps:g,classNames:y,styles:v,__staticSelector:_,multiline:b,sx:E,unstyled:w,pointer:x}=n,S=zrt(n,["className","invalid","required","disabled","variant","icon","style","rightSectionWidth","iconWidth","rightSection","rightSectionProps","radius","size","wrapperProps","classNames","styles","__staticSelector","multiline","sx","unstyled","pointer"]),{offsetBottom:I,offsetTop:C}=prt(),{classes:O,cx:z}=Mrt({radius:p,size:m,multiline:b,variant:a,invalid:i,rightSectionWidth:c,iconWidth:f,withRightSection:!!d,offsetBottom:I,offsetTop:C,pointer:x},{classNames:y,styles:v,name:["Input",_],unstyled:w}),{systemStyles:N,rest:$}=yf(S);return L.createElement(At,eP(eP({className:z(O.wrapper,r),sx:E,style:l},N),g),u&&L.createElement("div",{className:O.icon},u),L.createElement(At,sue(eP({component:"input"},$),{ref:t,required:s,"aria-invalid":i,disabled:o,className:z(O[`${a}Variant`],O.input,{[O.withIcon]:u,[O.invalid]:i,[O.disabled]:o})})),d&&L.createElement("div",sue(eP({},h),{className:O.rightSection}),d))});CE.displayName="@mantine/core/Input";CE.Wrapper=OTe;CE.Label=XG;CE.Description=JG;CE.Error=QG;const is=CE;var Vrt=Object.defineProperty,Hrt=Object.defineProperties,qrt=Object.getOwnPropertyDescriptors,oue=Object.getOwnPropertySymbols,Wrt=Object.prototype.hasOwnProperty,Grt=Object.prototype.propertyIsEnumerable,aue=(e,t,n)=>t in e?Vrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c9=(e,t)=>{for(var n in t||(t={}))Wrt.call(t,n)&&aue(e,n,t[n]);if(oue)for(var n of oue(t))Grt.call(t,n)&&aue(e,n,t[n]);return e},Yrt=(e,t)=>Hrt(e,qrt(t));const f9={xs:{fontSize:9,height:16},sm:{fontSize:10,height:18},md:{fontSize:11,height:20},lg:{fontSize:13,height:26},xl:{fontSize:16,height:32}},Krt={xs:4,sm:4,md:6,lg:8,xl:10};function Xrt({theme:e,variant:t,color:n,size:r,gradient:i}){if(t==="dot"){const o=e.fn.size({size:r,sizes:Krt});return{backgroundColor:"transparent",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[3]}`,paddingLeft:e.fn.size({size:r,sizes:e.spacing})/1.5-o/2,"&::before":{content:'""',display:"block",width:o,height:o,borderRadius:o,backgroundColor:e.fn.themeColor(n,e.colorScheme==="dark"?4:e.fn.primaryShade("light"),!0),marginRight:o}}}const s=e.fn.variant({color:n,variant:t,gradient:i});return{background:s.background,color:s.color,border:`${t==="gradient"?0:1}px solid ${s.border}`}}var Qrt=pt((e,{color:t,size:n,radius:r,gradient:i,fullWidth:s,variant:o})=>{const{fontSize:a,height:u}=n in f9?f9[n]:f9.md;return{leftSection:{marginRight:`calc(${e.spacing.xs}px / 2)`},rightSection:{marginLeft:`calc(${e.spacing.xs}px / 2)`},inner:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},root:c9(Yrt(c9(c9({},e.fn.focusStyles()),e.fn.fontStyles()),{fontSize:a,height:u,WebkitTapHighlightColor:"transparent",lineHeight:`${u-2}px`,textDecoration:"none",padding:`0 ${e.fn.size({size:n,sizes:e.spacing})/1.5}px`,boxSizing:"border-box",display:s?"flex":"inline-flex",alignItems:"center",justifyContent:"center",width:s?"100%":"auto",textTransform:"uppercase",borderRadius:e.fn.radius(r),fontWeight:700,letterSpacing:.25,cursor:"inherit",textOverflow:"ellipsis",overflow:"hidden"}),Xrt({theme:e,variant:o,color:t,size:n,gradient:i}))}});const Jrt=Qrt;var Zrt=Object.defineProperty,aN=Object.getOwnPropertySymbols,$Te=Object.prototype.hasOwnProperty,RTe=Object.prototype.propertyIsEnumerable,uue=(e,t,n)=>t in e?Zrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eit=(e,t)=>{for(var n in t||(t={}))$Te.call(t,n)&&uue(e,n,t[n]);if(aN)for(var n of aN(t))RTe.call(t,n)&&uue(e,n,t[n]);return e},tit=(e,t)=>{var n={};for(var r in e)$Te.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&aN)for(var r of aN(e))t.indexOf(r)<0&&RTe.call(e,r)&&(n[r]=e[r]);return n};const nit={variant:"light",size:"md",radius:"xl"},NTe=A.forwardRef((e,t)=>{const n=Ct("Badge",nit,e),{className:r,color:i,variant:s,fullWidth:o,children:a,size:u,leftSection:l,rightSection:c,radius:f,gradient:d,classNames:h,styles:p,unstyled:m}=n,g=tit(n,["className","color","variant","fullWidth","children","size","leftSection","rightSection","radius","gradient","classNames","styles","unstyled"]),{classes:y,cx:v}=Jrt({size:u,fullWidth:o,color:i,radius:f,variant:s,gradient:d},{classNames:h,styles:p,name:"Badge",unstyled:m});return L.createElement(At,eit({className:v(y.root,r),ref:t},g),l&&L.createElement("span",{className:y.leftSection},l),L.createElement("span",{className:y.inner},a),c&&L.createElement("span",{className:y.rightSection},c))});NTe.displayName="@mantine/core/Badge";const VT=NTe;var rit=pt((e,{orientation:t,buttonBorderWidth:n})=>({root:{display:"flex",flexDirection:t==="vertical"?"column":"row","& [data-button]":{"&:first-of-type":{borderBottomRightRadius:0,[t==="vertical"?"borderBottomLeftRadius":"borderTopRightRadius"]:0,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"&:last-of-type":{borderTopLeftRadius:0,[t==="vertical"?"borderTopRightRadius":"borderBottomLeftRadius"]:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2},"&:not(:first-of-type):not(:last-of-type)":{borderRadius:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"& + [data-button]":{[t==="vertical"?"marginTop":"marginLeft"]:-n,"@media (min-resolution: 192dpi)":{[t==="vertical"?"marginTop":"marginLeft"]:0}}}}}));const iit=rit;var sit=Object.defineProperty,uN=Object.getOwnPropertySymbols,DTe=Object.prototype.hasOwnProperty,LTe=Object.prototype.propertyIsEnumerable,lue=(e,t,n)=>t in e?sit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oit=(e,t)=>{for(var n in t||(t={}))DTe.call(t,n)&&lue(e,n,t[n]);if(uN)for(var n of uN(t))LTe.call(t,n)&&lue(e,n,t[n]);return e},ait=(e,t)=>{var n={};for(var r in e)DTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&uN)for(var r of uN(e))t.indexOf(r)<0&&LTe.call(e,r)&&(n[r]=e[r]);return n};const uit={orientation:"horizontal",buttonBorderWidth:1},MTe=A.forwardRef((e,t)=>{const n=Ct("ButtonGroup",uit,e),{className:r,orientation:i,buttonBorderWidth:s,unstyled:o}=n,a=ait(n,["className","orientation","buttonBorderWidth","unstyled"]),{classes:u,cx:l}=iit({orientation:i,buttonBorderWidth:s},{name:"ButtonGroup",unstyled:o});return L.createElement(At,oit({className:l(u.root,r),ref:t},a))});MTe.displayName="@mantine/core/ButtonGroup";var lit=Object.defineProperty,cit=Object.defineProperties,fit=Object.getOwnPropertyDescriptors,cue=Object.getOwnPropertySymbols,dit=Object.prototype.hasOwnProperty,hit=Object.prototype.propertyIsEnumerable,fue=(e,t,n)=>t in e?lit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cy=(e,t)=>{for(var n in t||(t={}))dit.call(t,n)&&fue(e,n,t[n]);if(cue)for(var n of cue(t))hit.call(t,n)&&fue(e,n,t[n]);return e},Wz=(e,t)=>cit(e,fit(t));const Gz={xs:{height:Bo.xs,paddingLeft:14,paddingRight:14},sm:{height:Bo.sm,paddingLeft:18,paddingRight:18},md:{height:Bo.md,paddingLeft:22,paddingRight:22},lg:{height:Bo.lg,paddingLeft:26,paddingRight:26},xl:{height:Bo.xl,paddingLeft:32,paddingRight:32},"compact-xs":{height:22,paddingLeft:7,paddingRight:7},"compact-sm":{height:26,paddingLeft:8,paddingRight:8},"compact-md":{height:30,paddingLeft:10,paddingRight:10},"compact-lg":{height:34,paddingLeft:12,paddingRight:12},"compact-xl":{height:40,paddingLeft:14,paddingRight:14}};function pit({compact:e,size:t,withLeftIcon:n,withRightIcon:r}){if(e)return Gz[`compact-${t}`];const i=Gz[t];return Wz(Cy({},i),{paddingLeft:n?i.paddingLeft/1.5:i.paddingLeft,paddingRight:r?i.paddingRight/1.5:i.paddingRight})}const mit=e=>({display:e?"block":"inline-block",width:e?"100%":"auto"});function git({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:Cy({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var yit=pt((e,{color:t,size:n,radius:r,fullWidth:i,compact:s,gradient:o,variant:a,withLeftIcon:u,withRightIcon:l})=>({root:Wz(Cy(Wz(Cy(Cy(Cy(Cy({},pit({compact:s,size:n,withLeftIcon:u,withRightIcon:l})),e.fn.fontStyles()),e.fn.focusStyles()),mit(i)),{borderRadius:e.fn.radius(r),fontWeight:600,position:"relative",lineHeight:1,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),userSelect:"none",cursor:"pointer"}),git({variant:a,theme:e,color:t,gradient:o})),{"&:active":e.activeStyles,"&:disabled, &[data-disabled]":{borderColor:"transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5],cursor:"not-allowed",backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}}),icon:{display:"flex",alignItems:"center"},leftIcon:{marginRight:10},rightIcon:{marginLeft:10},centerLoader:{position:"absolute",left:"50%",transform:"translateX(-50%)",opacity:.5},inner:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",overflow:"visible"},label:{whiteSpace:"nowrap",height:"100%",overflow:"hidden",display:"flex",alignItems:"center"}}));const vit=yit;var _it=Object.defineProperty,lN=Object.getOwnPropertySymbols,FTe=Object.prototype.hasOwnProperty,BTe=Object.prototype.propertyIsEnumerable,due=(e,t,n)=>t in e?_it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hue=(e,t)=>{for(var n in t||(t={}))FTe.call(t,n)&&due(e,n,t[n]);if(lN)for(var n of lN(t))BTe.call(t,n)&&due(e,n,t[n]);return e},bit=(e,t)=>{var n={};for(var r in e)FTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&lN)for(var r of lN(e))t.indexOf(r)<0&&BTe.call(e,r)&&(n[r]=e[r]);return n};const wit={size:"sm",type:"button",variant:"filled",loaderPosition:"left"},ZG=A.forwardRef((e,t)=>{const n=Ct("Button",wit,e),{className:r,size:i,color:s,type:o,disabled:a,children:u,leftIcon:l,rightIcon:c,fullWidth:f,variant:d,radius:h,uppercase:p,compact:m,loading:g,loaderPosition:y,loaderProps:v,gradient:_,classNames:b,styles:E,unstyled:w}=n,x=bit(n,["className","size","color","type","disabled","children","leftIcon","rightIcon","fullWidth","variant","radius","uppercase","compact","loading","loaderPosition","loaderProps","gradient","classNames","styles","unstyled"]),{classes:S,cx:I,theme:C}=vit({radius:h,color:s,size:i,fullWidth:f,compact:m,gradient:_,variant:d,withLeftIcon:!!l,withRightIcon:!!c},{name:"Button",unstyled:w,classNames:b,styles:E}),O=C.fn.variant({color:s,variant:d}),z=L.createElement(I0,hue({color:O.color,size:C.fn.size({size:i,sizes:Gz}).height/2},v));return L.createElement(xv,hue({className:I(S.root,r),type:o,disabled:a,"data-button":!0,"data-disabled":a||void 0,"data-loading":g||void 0,ref:t,unstyled:w},x),L.createElement("div",{className:S.inner},(l||g&&y==="left")&&L.createElement("span",{className:I(S.icon,S.leftIcon)},g&&y==="left"?z:l),g&&y==="center"&&L.createElement("span",{className:S.centerLoader},z),L.createElement("span",{className:S.label,style:{textTransform:p?"uppercase":void 0}},u),(c||g&&y==="right")&&L.createElement("span",{className:I(S.icon,S.rightIcon)},g&&y==="right"?z:c)))});ZG.displayName="@mantine/core/Button";ZG.Group=MTe;const cu=ZG;var Eit=pt((e,{radius:t,shadow:n,withBorder:r})=>({root:{outline:0,WebkitTapHighlightColor:"transparent",display:"block",textDecoration:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,boxSizing:"border-box",borderRadius:e.fn.radius(t),boxShadow:e.shadows[n]||n||"none",border:r?`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`:void 0}}));const xit=Eit;var Sit=Object.defineProperty,cN=Object.getOwnPropertySymbols,jTe=Object.prototype.hasOwnProperty,zTe=Object.prototype.propertyIsEnumerable,pue=(e,t,n)=>t in e?Sit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tit=(e,t)=>{for(var n in t||(t={}))jTe.call(t,n)&&pue(e,n,t[n]);if(cN)for(var n of cN(t))zTe.call(t,n)&&pue(e,n,t[n]);return e},Ait=(e,t)=>{var n={};for(var r in e)jTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&cN)for(var r of cN(e))t.indexOf(r)<0&&zTe.call(e,r)&&(n[r]=e[r]);return n};const Cit={},UTe=A.forwardRef((e,t)=>{const n=Ct("Paper",Cit,e),{className:r,children:i,radius:s,withBorder:o,shadow:a,unstyled:u}=n,l=Ait(n,["className","children","radius","withBorder","shadow","unstyled"]),{classes:c,cx:f}=xit({radius:s,shadow:a,withBorder:o},{name:"Paper",unstyled:u});return L.createElement(At,Tit({className:f(c.root,r),ref:t},l),i)});UTe.displayName="@mantine/core/Paper";const VTe=UTe,HTe=A.createContext({padding:0}),Iit=HTe.Provider,Oit=()=>A.useContext(HTe).padding;var Pit=pt((e,{padding:t,withBorder:n,inheritPadding:r})=>{const i=e.fn.size({size:t,sizes:e.spacing}),s=-1*i,o=e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3];return{cardSection:{display:"block",marginLeft:s,marginRight:s,paddingLeft:r?i:void 0,paddingRight:r?i:void 0,borderTop:n&&`1px solid ${o}`,borderBottom:n&&`1px solid ${o}`,"& + &":{borderTop:0},"&[data-first]":{marginTop:s,borderTop:0,borderBottom:n&&`1px solid ${o}`},"&[data-last]":{marginBottom:s,borderBottom:0}}}});const kit=Pit;var $it=Object.defineProperty,fN=Object.getOwnPropertySymbols,qTe=Object.prototype.hasOwnProperty,WTe=Object.prototype.propertyIsEnumerable,mue=(e,t,n)=>t in e?$it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rit=(e,t)=>{for(var n in t||(t={}))qTe.call(t,n)&&mue(e,n,t[n]);if(fN)for(var n of fN(t))WTe.call(t,n)&&mue(e,n,t[n]);return e},Nit=(e,t)=>{var n={};for(var r in e)qTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fN)for(var r of fN(e))t.indexOf(r)<0&&WTe.call(e,r)&&(n[r]=e[r]);return n};const GTe=A.forwardRef((e,t)=>{var n=e,{className:r,withBorder:i=!1,inheritPadding:s=!1,unstyled:o}=n,a=Nit(n,["className","withBorder","inheritPadding","unstyled"]);const{classes:u,cx:l}=kit({padding:Oit(),withBorder:i,inheritPadding:s},{name:"Card",unstyled:o});return L.createElement(At,Rit({className:l(u.cardSection,r),ref:t},a))});GTe.displayName="@mantine/core/CardSection";const YTe=GTe;var Dit=pt(e=>({root:{position:"relative",overflow:"hidden",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white}}));const Lit=Dit;var Mit=Object.defineProperty,dN=Object.getOwnPropertySymbols,KTe=Object.prototype.hasOwnProperty,XTe=Object.prototype.propertyIsEnumerable,gue=(e,t,n)=>t in e?Mit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fit=(e,t)=>{for(var n in t||(t={}))KTe.call(t,n)&&gue(e,n,t[n]);if(dN)for(var n of dN(t))XTe.call(t,n)&&gue(e,n,t[n]);return e},Bit=(e,t)=>{var n={};for(var r in e)KTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dN)for(var r of dN(e))t.indexOf(r)<0&&XTe.call(e,r)&&(n[r]=e[r]);return n};const jit={p:"md"},eY=A.forwardRef((e,t)=>{const n=Ct("Card",jit,e),{className:r,p:i,radius:s,children:o,unstyled:a}=n,u=Bit(n,["className","p","radius","children","unstyled"]),{classes:l,cx:c}=Lit(null,{name:"Card",unstyled:a}),f=A.Children.toArray(o),d=f.map((h,p)=>typeof h=="object"&&h&&"type"in h&&h.type===YTe?A.cloneElement(h,{padding:i,"data-first":p===0||void 0,"data-last":p===f.length-1||void 0}):h);return L.createElement(Iit,{value:{padding:i}},L.createElement(VTe,Fit({className:c(l.root,r),radius:s,p:i,ref:t},u),d))});eY.Section=YTe;eY.displayName="@mantine/core/Card";const QTe=eY;var zit=Object.defineProperty,hN=Object.getOwnPropertySymbols,JTe=Object.prototype.hasOwnProperty,ZTe=Object.prototype.propertyIsEnumerable,yue=(e,t,n)=>t in e?zit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uit=(e,t)=>{for(var n in t||(t={}))JTe.call(t,n)&&yue(e,n,t[n]);if(hN)for(var n of hN(t))ZTe.call(t,n)&&yue(e,n,t[n]);return e},Vit=(e,t)=>{var n={};for(var r in e)JTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hN)for(var r of hN(e))t.indexOf(r)<0&&ZTe.call(e,r)&&(n[r]=e[r]);return n};const e2e=A.forwardRef((e,t)=>{const n=Ct("Center",{},e),{inline:r,sx:i}=n,s=Vit(n,["inline","sx"]);return L.createElement(At,Uit({ref:t,sx:[{display:r?"inline-flex":"flex",alignItems:"center",justifyContent:"center"},...N1(i)]},s))});e2e.displayName="@mantine/core/Center";const Ug=e2e,t2e=A.createContext(null),Hit=t2e.Provider,qit=()=>A.useContext(t2e);function Wit(e){return A.Children.toArray(e).filter(Boolean)}const Git={left:"flex-start",center:"center",right:"flex-end",apart:"space-between"};var Yit=pt((e,{spacing:t,position:n,noWrap:r,grow:i,align:s,count:o})=>({root:{boxSizing:"border-box",display:"flex",flexDirection:"row",alignItems:s||"center",flexWrap:r?"nowrap":"wrap",justifyContent:Git[n],gap:e.fn.size({size:t,sizes:e.spacing}),"& > *":{boxSizing:"border-box",maxWidth:i?`calc(${100/o}% - ${e.fn.size({size:t,sizes:e.spacing})-e.fn.size({size:t,sizes:e.spacing})/o}px)`:void 0,flexGrow:i?1:0}}}));const Kit=Yit;var Xit=Object.defineProperty,pN=Object.getOwnPropertySymbols,n2e=Object.prototype.hasOwnProperty,r2e=Object.prototype.propertyIsEnumerable,vue=(e,t,n)=>t in e?Xit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qit=(e,t)=>{for(var n in t||(t={}))n2e.call(t,n)&&vue(e,n,t[n]);if(pN)for(var n of pN(t))r2e.call(t,n)&&vue(e,n,t[n]);return e},Jit=(e,t)=>{var n={};for(var r in e)n2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pN)for(var r of pN(e))t.indexOf(r)<0&&r2e.call(e,r)&&(n[r]=e[r]);return n};const Zit={position:"left",spacing:"md"},Ql=A.forwardRef((e,t)=>{const n=Ct("Group",Zit,e),{className:r,position:i,align:s,children:o,noWrap:a,grow:u,spacing:l,unstyled:c}=n,f=Jit(n,["className","position","align","children","noWrap","grow","spacing","unstyled"]),d=Wit(o),{classes:h,cx:p}=Kit({align:s,grow:u,noWrap:a,spacing:l,position:i,count:d.length},{unstyled:c,name:"Group"});return L.createElement(At,Qit({className:p(h.root,r),ref:t},f),d)});Ql.displayName="@mantine/core/Group";var est=pt((e,{spacing:t,align:n,justify:r})=>({root:{display:"flex",flexDirection:"column",alignItems:n,justifyContent:r,gap:e.fn.size({size:t,sizes:e.spacing})}}));const tst=est;var nst=Object.defineProperty,mN=Object.getOwnPropertySymbols,i2e=Object.prototype.hasOwnProperty,s2e=Object.prototype.propertyIsEnumerable,_ue=(e,t,n)=>t in e?nst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rst=(e,t)=>{for(var n in t||(t={}))i2e.call(t,n)&&_ue(e,n,t[n]);if(mN)for(var n of mN(t))s2e.call(t,n)&&_ue(e,n,t[n]);return e},ist=(e,t)=>{var n={};for(var r in e)i2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mN)for(var r of mN(e))t.indexOf(r)<0&&s2e.call(e,r)&&(n[r]=e[r]);return n};const sst={spacing:"md",align:"stretch",justify:"top"},Qm=A.forwardRef((e,t)=>{const n=Ct("Stack",sst,e),{spacing:r,className:i,align:s,justify:o,unstyled:a}=n,u=ist(n,["spacing","className","align","justify","unstyled"]),{classes:l,cx:c}=tst({spacing:r,align:s,justify:o},{name:"Stack",unstyled:a});return L.createElement(At,rst({className:c(l.root,i),ref:t},u))});Qm.displayName="@mantine/core/Stack";function o2e({spacing:e,offset:t,orientation:n,children:r,role:i,unstyled:s}){return n==="horizontal"?L.createElement(Ql,{pt:t,spacing:e,role:i,unstyled:s},r):L.createElement(Qm,{pt:t,spacing:e,role:i,unstyled:s},r)}var ost=Object.defineProperty,gN=Object.getOwnPropertySymbols,a2e=Object.prototype.hasOwnProperty,u2e=Object.prototype.propertyIsEnumerable,bue=(e,t,n)=>t in e?ost(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wue=(e,t)=>{for(var n in t||(t={}))a2e.call(t,n)&&bue(e,n,t[n]);if(gN)for(var n of gN(t))u2e.call(t,n)&&bue(e,n,t[n]);return e},ast=(e,t)=>{var n={};for(var r in e)a2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gN)for(var r of gN(e))t.indexOf(r)<0&&u2e.call(e,r)&&(n[r]=e[r]);return n};const ust={orientation:"horizontal",spacing:"lg",size:"sm",offset:"xs"},l2e=A.forwardRef((e,t)=>{const n=Ct("CheckboxGroup",ust,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,offset:f}=n,d=ast(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","offset"]),[h,p]=Ta({value:i,defaultValue:s,finalValue:[],onChange:o}),m=g=>{const y=g.currentTarget.value;p(h.includes(y)?h.filter(v=>v!==y):[...h,y])};return L.createElement(Hit,{value:{value:h,onChange:m,size:l}},L.createElement(is.Wrapper,wue(wue({labelElement:"div",size:l,__staticSelector:"CheckboxGroup",ref:t},c),d),L.createElement(o2e,{spacing:u,orientation:a,offset:f},r)))});l2e.displayName="@mantine/core/CheckboxGroup";var lst=Object.defineProperty,yN=Object.getOwnPropertySymbols,c2e=Object.prototype.hasOwnProperty,f2e=Object.prototype.propertyIsEnumerable,Eue=(e,t,n)=>t in e?lst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yz=(e,t)=>{for(var n in t||(t={}))c2e.call(t,n)&&Eue(e,n,t[n]);if(yN)for(var n of yN(t))f2e.call(t,n)&&Eue(e,n,t[n]);return e},cst=(e,t)=>{var n={};for(var r in e)c2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yN)for(var r of yN(e))t.indexOf(r)<0&&f2e.call(e,r)&&(n[r]=e[r]);return n};function fst(e){return L.createElement("svg",Yz({viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),L.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function dst(e){var t=e,{indeterminate:n}=t,r=cst(t,["indeterminate"]);return n?L.createElement("svg",Yz({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6"},r),L.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):L.createElement(fst,Yz({},r))}var hst=Object.defineProperty,pst=Object.defineProperties,mst=Object.getOwnPropertyDescriptors,xue=Object.getOwnPropertySymbols,gst=Object.prototype.hasOwnProperty,yst=Object.prototype.propertyIsEnumerable,Sue=(e,t,n)=>t in e?hst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vst=(e,t)=>{for(var n in t||(t={}))gst.call(t,n)&&Sue(e,n,t[n]);if(xue)for(var n of xue(t))yst.call(t,n)&&Sue(e,n,t[n]);return e},_st=(e,t)=>pst(e,mst(t));const bst={xs:16,sm:20,md:24,lg:30,xl:36},wst={xs:8,sm:10,md:14,lg:16,xl:20};var Est=pt((e,{size:t,radius:n,color:r,transitionDuration:i,labelPosition:s,error:o,indeterminate:a},u)=>{const l=e.fn.size({size:t,sizes:bst}),c=e.fn.variant({variant:"filled",color:r}),f=e.fn.variant({variant:"filled",color:"red"}).background;return{icon:{ref:u("icon"),color:a?"inherit":e.white,transform:a?"none":"translateY(5px) scale(0.5)",opacity:a?1:0,transitionProperty:"opacity, transform",transitionTimingFunction:"ease",transitionDuration:`${i}ms`,pointerEvents:"none",width:e.fn.size({size:t,sizes:wst}),position:"absolute",zIndex:1,top:0,bottom:0,left:0,right:0,margin:"auto","@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},inner:{position:"relative",width:l,height:l,order:s==="left"?2:1},input:_st(vst({},e.fn.focusStyles()),{appearance:"none",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${o?f:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,width:l,height:l,borderRadius:e.fn.radius(n),padding:0,display:"block",margin:0,transition:`border-color ${i}ms ease, background-color ${i}ms ease`,cursor:e.cursorType,"&:checked":{backgroundColor:c.background,borderColor:c.background,[`& + .${u("icon")}`]:{opacity:1,color:e.white,transform:"translateY(0) scale(1)"}},"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[3],cursor:"not-allowed",[`& + .${u("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5]}}})}});const xst=Est;var Sst=Object.defineProperty,Tst=Object.defineProperties,Ast=Object.getOwnPropertyDescriptors,Tue=Object.getOwnPropertySymbols,Cst=Object.prototype.hasOwnProperty,Ist=Object.prototype.propertyIsEnumerable,Aue=(e,t,n)=>t in e?Sst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ost=(e,t)=>{for(var n in t||(t={}))Cst.call(t,n)&&Aue(e,n,t[n]);if(Tue)for(var n of Tue(t))Ist.call(t,n)&&Aue(e,n,t[n]);return e},Pst=(e,t)=>Tst(e,Ast(t));const kst={xs:16,sm:20,md:24,lg:30,xl:36};var $st=pt((e,{labelPosition:t,size:n})=>({root:{},body:{display:"inline-flex"},labelWrapper:Pst(Ost({},e.fn.fontStyles()),{display:"inline-flex",flexDirection:"column",WebkitTapHighlightColor:"transparent",fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:`${e.fn.size({size:n,sizes:kst})}px`,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,cursor:e.cursorType,order:t==="left"?1:2}),description:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},error:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},label:{cursor:e.cursorType,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm,"&[data-disabled]":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}}));const Rst=$st;var Nst=Object.defineProperty,vN=Object.getOwnPropertySymbols,d2e=Object.prototype.hasOwnProperty,h2e=Object.prototype.propertyIsEnumerable,Cue=(e,t,n)=>t in e?Nst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dst=(e,t)=>{for(var n in t||(t={}))d2e.call(t,n)&&Cue(e,n,t[n]);if(vN)for(var n of vN(t))h2e.call(t,n)&&Cue(e,n,t[n]);return e},Lst=(e,t)=>{var n={};for(var r in e)d2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vN)for(var r of vN(e))t.indexOf(r)<0&&h2e.call(e,r)&&(n[r]=e[r]);return n};function tY(e){var t=e,{__staticSelector:n,className:r,classNames:i,styles:s,unstyled:o,children:a,label:u,description:l,id:c,disabled:f,error:d,size:h,labelPosition:p}=t,m=Lst(t,["__staticSelector","className","classNames","styles","unstyled","children","label","description","id","disabled","error","size","labelPosition"]);const{classes:g,cx:y}=Rst({size:h,labelPosition:p},{name:n,styles:s,classNames:i,unstyled:o});return L.createElement(At,Dst({className:y(g.root,r)},m),L.createElement("div",{className:y(g.body)},a,L.createElement("div",{className:g.labelWrapper},u&&L.createElement("label",{className:g.label,"data-disabled":f||void 0,htmlFor:c},u),l&&L.createElement(is.Description,{className:g.description},l),d&&d!=="boolean"&&L.createElement(is.Error,{className:g.error},d))))}tY.displayName="@mantine/core/InlineInput";var Mst=Object.defineProperty,_N=Object.getOwnPropertySymbols,p2e=Object.prototype.hasOwnProperty,m2e=Object.prototype.propertyIsEnumerable,Iue=(e,t,n)=>t in e?Mst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tP=(e,t)=>{for(var n in t||(t={}))p2e.call(t,n)&&Iue(e,n,t[n]);if(_N)for(var n of _N(t))m2e.call(t,n)&&Iue(e,n,t[n]);return e},Fst=(e,t)=>{var n={};for(var r in e)p2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_N)for(var r of _N(e))t.indexOf(r)<0&&m2e.call(e,r)&&(n[r]=e[r]);return n};const Bst={size:"sm",transitionDuration:100,icon:dst,labelPosition:"right"},bN=A.forwardRef((e,t)=>{const n=Ct("Checkbox",Bst,e),{className:r,style:i,sx:s,checked:o,disabled:a,color:u,label:l,indeterminate:c,id:f,size:d,radius:h,wrapperProps:p,children:m,classNames:g,styles:y,transitionDuration:v,icon:_,unstyled:b,labelPosition:E,description:w,error:x}=n,S=Fst(n,["className","style","sx","checked","disabled","color","label","indeterminate","id","size","radius","wrapperProps","children","classNames","styles","transitionDuration","icon","unstyled","labelPosition","description","error"]),I=qit(),C=vl(f),{systemStyles:O,rest:z}=yf(S),{classes:N}=xst({size:(I==null?void 0:I.size)||d,radius:h,color:u,transitionDuration:v,labelPosition:E,error:!!x,indeterminate:c},{name:"Checkbox",classNames:g,styles:y,unstyled:b}),$=I?{checked:I.value.includes(z.value),onChange:I.onChange}:{};return L.createElement(tY,tP(tP({className:r,sx:s,style:i,id:C,size:(I==null?void 0:I.size)||d,labelPosition:E,label:l,description:w,error:x,disabled:a,__staticSelector:"Checkbox",classNames:g,styles:y,unstyled:b,"data-checked":$.checked||void 0},O),p),L.createElement("div",{className:N.inner},L.createElement("input",tP(tP({id:C,ref:t,type:"checkbox",className:N.input,checked:o,disabled:a},z),$)),L.createElement(_,{indeterminate:c,className:N.icon})))});bN.displayName="@mantine/core/Checkbox";bN.Group=l2e;var jst=pt((e,{fluid:t,size:n,sizes:r})=>({root:{paddingLeft:e.spacing.md,paddingRight:e.spacing.md,maxWidth:t?"100%":e.fn.size({size:n,sizes:r}),marginLeft:"auto",marginRight:"auto"}}));const zst=jst;var Ust=Object.defineProperty,wN=Object.getOwnPropertySymbols,g2e=Object.prototype.hasOwnProperty,y2e=Object.prototype.propertyIsEnumerable,Oue=(e,t,n)=>t in e?Ust(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vst=(e,t)=>{for(var n in t||(t={}))g2e.call(t,n)&&Oue(e,n,t[n]);if(wN)for(var n of wN(t))y2e.call(t,n)&&Oue(e,n,t[n]);return e},Hst=(e,t)=>{var n={};for(var r in e)g2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wN)for(var r of wN(e))t.indexOf(r)<0&&y2e.call(e,r)&&(n[r]=e[r]);return n};const qst={sizes:{xs:540,sm:720,md:960,lg:1140,xl:1320}},u6=A.forwardRef((e,t)=>{const n=Ct("Container",qst,e),{className:r,fluid:i,size:s,unstyled:o,sizes:a}=n,u=Hst(n,["className","fluid","size","unstyled","sizes"]),{classes:l,cx:c}=zst({fluid:i,size:s,sizes:a},{unstyled:o,name:"Container"});return L.createElement(At,Vst({className:c(l.root,r),ref:t},u))});u6.displayName="@mantine/core/Container";function v2e({transitions:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=aTe({mounted:r,duration:t,exitDuration:n,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});if(c===0)return r?L.createElement(L.Fragment,null,i({})):null;if(f==="exited")return null;const h=Object.keys(e).reduce((p,m)=>(p[m]=oTe({duration:e[m].duration,transition:e[m].transition,timingFunction:e[m].timingFunction||d,state:f}),p),{});return L.createElement(L.Fragment,null,i(h))}v2e.displayName="@mantine/core/GroupedTransition";var Wst=pt((e,{zIndex:t})=>({root:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:t}}));const Gst=Wst;var Yst=Object.defineProperty,Kst=Object.defineProperties,Xst=Object.getOwnPropertyDescriptors,EN=Object.getOwnPropertySymbols,_2e=Object.prototype.hasOwnProperty,b2e=Object.prototype.propertyIsEnumerable,Pue=(e,t,n)=>t in e?Yst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d9=(e,t)=>{for(var n in t||(t={}))_2e.call(t,n)&&Pue(e,n,t[n]);if(EN)for(var n of EN(t))b2e.call(t,n)&&Pue(e,n,t[n]);return e},Qst=(e,t)=>Kst(e,Xst(t)),Jst=(e,t)=>{var n={};for(var r in e)_2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&EN)for(var r of EN(e))t.indexOf(r)<0&&b2e.call(e,r)&&(n[r]=e[r]);return n};const Zst={opacity:.6,color:"#fff",zIndex:Tu("modal"),radius:0,blur:0},w2e=A.forwardRef((e,t)=>{const n=Ct("Overlay",Zst,e),{opacity:r,blur:i,color:s,gradient:o,zIndex:a,radius:u,sx:l,unstyled:c,className:f}=n,d=Jst(n,["opacity","blur","color","gradient","zIndex","radius","sx","unstyled","className"]),{classes:h,cx:p}=Gst({zIndex:a},{name:"Overlay",unstyled:c}),m=o?{backgroundImage:o}:{backgroundColor:s},g=y=>L.createElement(At,d9({ref:t,className:p(h.root,f),sx:[v=>Qst(d9({},m),{opacity:r,borderRadius:v.fn.size({size:u,sizes:v.radius})}),...N1(l)]},y));return i?L.createElement(At,d9({className:p(h.root,f),sx:[{backdropFilter:`blur(${i}px)`},...N1(l)]},d),g()):g(d)});w2e.displayName="@mantine/core/Overlay";const E2e=w2e,eot={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"default",property:"alignItems"},justify:{type:"default",property:"justifyContent"},wrap:{type:"default",property:"flexWrap"},direction:{type:"default",property:"flexDirection"}};var tot=Object.defineProperty,not=Object.defineProperties,rot=Object.getOwnPropertyDescriptors,xN=Object.getOwnPropertySymbols,x2e=Object.prototype.hasOwnProperty,S2e=Object.prototype.propertyIsEnumerable,kue=(e,t,n)=>t in e?tot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iot=(e,t)=>{for(var n in t||(t={}))x2e.call(t,n)&&kue(e,n,t[n]);if(xN)for(var n of xN(t))S2e.call(t,n)&&kue(e,n,t[n]);return e},sot=(e,t)=>not(e,rot(t)),oot=(e,t)=>{var n={};for(var r in e)x2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xN)for(var r of xN(e))t.indexOf(r)<0&&S2e.call(e,r)&&(n[r]=e[r]);return n};const aot={},lp=A.forwardRef((e,t)=>{const n=Ct("Flex",aot,e),{gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l,sx:c}=n,f=oot(n,["gap","rowGap","columnGap","align","justify","wrap","direction","sx"]);return L.createElement(At,sot(iot({},f),{sx:[{display:"flex"},d=>Fz({gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l},d,eot),...N1(c)],ref:t}))});lp.displayName="@mantine/core/Flex";const T2e=A.createContext(null),uot=T2e.Provider,lot=()=>A.useContext(T2e);var cot=Object.defineProperty,$ue=Object.getOwnPropertySymbols,fot=Object.prototype.hasOwnProperty,dot=Object.prototype.propertyIsEnumerable,Rue=(e,t,n)=>t in e?cot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hot=(e,t)=>{for(var n in t||(t={}))fot.call(t,n)&&Rue(e,n,t[n]);if($ue)for(var n of $ue(t))dot.call(t,n)&&Rue(e,n,t[n]);return e};const nY=(e,t)=>e==="content"?"auto":e==="auto"?"0px":e?`${100/(t/e)}%`:void 0,A2e=(e,t,n)=>n||e==="auto"||e==="content"?"unset":nY(e,t),C2e=(e,t)=>{if(e)return e==="auto"||t?1:0},I2e=(e,t)=>e===0?0:e?`${100/(t/e)}%`:void 0;function pot({sizes:e,offsets:t,orders:n,theme:r,columns:i,grow:s}){return ZYe.reduce((o,a)=>(o[`@media (min-width: ${r.breakpoints[a]}px)`]={order:n[a],flexBasis:nY(e[a],i),flexShrink:0,width:e[a]==="content"?"auto":void 0,maxWidth:A2e(e[a],i,s),marginLeft:I2e(t[a],i),flexGrow:C2e(e[a],s)},o),{})}var mot=pt((e,{gutter:t,grow:n,offset:r,offsetXs:i,offsetSm:s,offsetMd:o,offsetLg:a,offsetXl:u,columns:l,span:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:b,orderXl:E})=>({root:hot({boxSizing:"border-box",flexGrow:C2e(c,n),order:g,padding:e.fn.size({size:t,sizes:e.spacing})/2,marginLeft:I2e(r,l),flexBasis:nY(c,l),flexShrink:0,width:c==="content"?"auto":void 0,maxWidth:A2e(c,l,n)},pot({sizes:{xs:f,sm:d,md:h,lg:p,xl:m},offsets:{xs:i,sm:s,md:o,lg:a,xl:u},orders:{xs:y,sm:v,md:_,lg:b,xl:E},theme:e,columns:l,grow:n}))}));const got=mot;var yot=Object.defineProperty,SN=Object.getOwnPropertySymbols,O2e=Object.prototype.hasOwnProperty,P2e=Object.prototype.propertyIsEnumerable,Nue=(e,t,n)=>t in e?yot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vot=(e,t)=>{for(var n in t||(t={}))O2e.call(t,n)&&Nue(e,n,t[n]);if(SN)for(var n of SN(t))P2e.call(t,n)&&Nue(e,n,t[n]);return e},_ot=(e,t)=>{var n={};for(var r in e)O2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SN)for(var r of SN(e))t.indexOf(r)<0&&P2e.call(e,r)&&(n[r]=e[r]);return n};const bot={};function wot(e){return e==="auto"||e==="content"?!0:typeof e=="number"&&e>0&&e%1===0}const k2e=A.forwardRef((e,t)=>{const n=Ct("Grid.Col",bot,e),{children:r,span:i,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:b,orderXl:E,className:w,id:x,unstyled:S}=n,I=_ot(n,["children","span","offset","offsetXs","offsetSm","offsetMd","offsetLg","offsetXl","xs","sm","md","lg","xl","order","orderXs","orderSm","orderMd","orderLg","orderXl","className","id","unstyled"]),C=lot();if(!C)throw new Error("[@mantine/core] Grid.Col was used outside of Grid context");const O=i||C.columns,{classes:z,cx:N}=got({gutter:C.gutter,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:b,orderXl:E,grow:C.grow,columns:C.columns,span:O},{unstyled:S,name:"Col"});return!wot(O)||O>C.columns?null:L.createElement(At,vot({className:N(z.root,w),ref:t},I),r)});k2e.displayName="@mantine/core/Col";var Eot=pt((e,{justify:t,align:n,gutter:r})=>({root:{margin:-e.fn.size({size:r,sizes:e.spacing})/2,display:"flex",flexWrap:"wrap",justifyContent:t,alignItems:n}}));const xot=Eot;var Sot=Object.defineProperty,TN=Object.getOwnPropertySymbols,$2e=Object.prototype.hasOwnProperty,R2e=Object.prototype.propertyIsEnumerable,Due=(e,t,n)=>t in e?Sot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tot=(e,t)=>{for(var n in t||(t={}))$2e.call(t,n)&&Due(e,n,t[n]);if(TN)for(var n of TN(t))R2e.call(t,n)&&Due(e,n,t[n]);return e},Aot=(e,t)=>{var n={};for(var r in e)$2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TN)for(var r of TN(e))t.indexOf(r)<0&&R2e.call(e,r)&&(n[r]=e[r]);return n};const Cot={gutter:"md",justify:"flex-start",align:"stretch",columns:12},Gu=A.forwardRef((e,t)=>{const n=Ct("Grid",Cot,e),{gutter:r,children:i,grow:s,justify:o,align:a,columns:u,className:l,id:c,unstyled:f}=n,d=Aot(n,["gutter","children","grow","justify","align","columns","className","id","unstyled"]),{classes:h,cx:p}=xot({gutter:r,justify:o,align:a},{unstyled:f,name:"Grid"});return L.createElement(uot,{value:{gutter:r,grow:s,columns:u}},L.createElement(At,Tot({className:p(h.root,l),ref:t},d),i))});Gu.Col=k2e;Gu.displayName="@mantine/core/Grid";function Iot({open:e,close:t,openDelay:n,closeDelay:r}){const i=A.useRef(-1),s=A.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0?t():s.current=window.setTimeout(t,r)};return A.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}var Oot=Object.defineProperty,Lue=Object.getOwnPropertySymbols,Pot=Object.prototype.hasOwnProperty,kot=Object.prototype.propertyIsEnumerable,Mue=(e,t,n)=>t in e?Oot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$ot=(e,t)=>{for(var n in t||(t={}))Pot.call(t,n)&&Mue(e,n,t[n]);if(Lue)for(var n of Lue(t))kot.call(t,n)&&Mue(e,n,t[n]);return e};function Rot(e){return L.createElement("svg",$ot({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),L.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var Not=Object.defineProperty,Dot=Object.defineProperties,Lot=Object.getOwnPropertyDescriptors,Fue=Object.getOwnPropertySymbols,Mot=Object.prototype.hasOwnProperty,Fot=Object.prototype.propertyIsEnumerable,Bue=(e,t,n)=>t in e?Not(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jue=(e,t)=>{for(var n in t||(t={}))Mot.call(t,n)&&Bue(e,n,t[n]);if(Fue)for(var n of Fue(t))Fot.call(t,n)&&Bue(e,n,t[n]);return e},zue=(e,t)=>Dot(e,Lot(t)),Bot=pt((e,{radius:t})=>({root:{},imageWrapper:{position:"relative"},figure:{margin:0},image:zue(jue({},e.fn.fontStyles()),{display:"block",width:"100%",height:"100%",border:0,borderRadius:e.fn.size({size:t,sizes:e.radius})}),caption:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],marginTop:e.spacing.xs},placeholder:zue(jue({},e.fn.cover()),{display:"flex",alignItems:"center",justifyContent:"center",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],borderRadius:e.fn.size({size:t,sizes:e.radius})})}));const jot=Bot;var zot=Object.defineProperty,AN=Object.getOwnPropertySymbols,N2e=Object.prototype.hasOwnProperty,D2e=Object.prototype.propertyIsEnumerable,Uue=(e,t,n)=>t in e?zot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h9=(e,t)=>{for(var n in t||(t={}))N2e.call(t,n)&&Uue(e,n,t[n]);if(AN)for(var n of AN(t))D2e.call(t,n)&&Uue(e,n,t[n]);return e},Uot=(e,t)=>{var n={};for(var r in e)N2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AN)for(var r of AN(e))t.indexOf(r)<0&&D2e.call(e,r)&&(n[r]=e[r]);return n};const Vot={fit:"cover",width:"100%",height:"auto",radius:0},IE=A.forwardRef((e,t)=>{const n=Ct("Image",Vot,e),{className:r,alt:i,src:s,fit:o,width:a,height:u,radius:l,imageProps:c,withPlaceholder:f,placeholder:d,imageRef:h,classNames:p,styles:m,caption:g,unstyled:y,style:v}=n,_=Uot(n,["className","alt","src","fit","width","height","radius","imageProps","withPlaceholder","placeholder","imageRef","classNames","styles","caption","unstyled","style"]),{classes:b,cx:E}=jot({radius:l},{classNames:p,styles:m,unstyled:y,name:"Image"}),[w,x]=A.useState(!s),S=f&&w;return bs(()=>{x(!1)},[s]),L.createElement(At,h9({className:E(b.root,r),ref:t,style:h9({width:a},v)},_),L.createElement("figure",{className:b.figure},L.createElement("div",{className:b.imageWrapper},L.createElement("img",h9({className:b.image,src:s,alt:i,style:{objectFit:o,width:a,height:u},ref:h,onError:I=>{x(!0),typeof(c==null?void 0:c.onError)=="function"&&c.onError(I)}},c)),S&&L.createElement("div",{className:b.placeholder,title:i},d||L.createElement("div",null,L.createElement(Rot,{style:{width:40,height:40}})))),!!g&&L.createElement(Rt,{component:"figcaption",size:"sm",align:"center",className:b.caption},g)))});IE.displayName="@mantine/core/Image";function Hot(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var qot=A.useLayoutEffect,Wot=function(t){var n=A.useRef(t);return qot(function(){n.current=t}),n},Vue=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Got=function(t,n){var r=A.useRef();return A.useCallback(function(i){t.current=i,r.current&&Vue(r.current,null),r.current=n,n&&Vue(n,i)},[n])},Hue={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},que=function(t){Object.keys(Hue).forEach(function(n){t.style.setProperty(n,Hue[n],"important")})},Nu=null,Yot=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Kot(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Nu||(Nu=document.createElement("textarea"),Nu.setAttribute("tabindex","-1"),Nu.setAttribute("aria-hidden","true"),que(Nu)),Nu.parentNode===null&&document.body.appendChild(Nu);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Nu.style[h]=o[h]}),que(Nu),Nu.value=t;var u=Yot(Nu,e);Nu.value="x";var l=Nu.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Wue=function(){},Xot=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},Qot=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Jot=!!document.documentElement.currentStyle,Zot=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Xot(Qot,n),i=r.boxSizing;if(i==="")return null;Jot&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},eat=function(t){var n=Wot(t);A.useLayoutEffect(function(){var r=function(s){n.current(s)};return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[])},tat=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Wue:o,u=t.onHeightChange,l=u===void 0?Wue:u,c=Hot(t,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),f=c.value!==void 0,d=A.useRef(null),h=Got(d,n),p=A.useRef(0),m=A.useRef(),g=function(){var _=d.current,b=r&&m.current?m.current:Zot(_);if(b){m.current=b;var E=Kot(b,_.value||_.placeholder||"x",s,i),w=E[0],x=E[1];p.current!==w&&(p.current=w,_.style.setProperty("height",w+"px","important"),l(w,{rowHeight:x}))}},y=function(_){f||g(),a(_)};return A.useLayoutEffect(g),eat(g),A.createElement("textarea",di({},c,{onChange:y,ref:h}))},nat=A.forwardRef(tat);const rat=nat;var iat=pt(e=>({input:{paddingTop:e.spacing.xs,paddingBottom:e.spacing.xs}}));const sat=iat;var oat=Object.defineProperty,aat=Object.defineProperties,uat=Object.getOwnPropertyDescriptors,CN=Object.getOwnPropertySymbols,L2e=Object.prototype.hasOwnProperty,M2e=Object.prototype.propertyIsEnumerable,Gue=(e,t,n)=>t in e?oat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u_=(e,t)=>{for(var n in t||(t={}))L2e.call(t,n)&&Gue(e,n,t[n]);if(CN)for(var n of CN(t))M2e.call(t,n)&&Gue(e,n,t[n]);return e},p9=(e,t)=>aat(e,uat(t)),lat=(e,t)=>{var n={};for(var r in e)L2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CN)for(var r of CN(e))t.indexOf(r)<0&&M2e.call(e,r)&&(n[r]=e[r]);return n};const cat={autosize:!1,size:"sm",__staticSelector:"Textarea"},F2e=A.forwardRef((e,t)=>{const n=Ct("Textarea",cat,e),{autosize:r,maxRows:i,minRows:s,label:o,error:a,description:u,id:l,className:c,required:f,style:d,wrapperProps:h,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,descriptionProps:b,labelProps:E,inputWrapperOrder:w,inputContainer:x,unstyled:S,withAsterisk:I}=n,C=lat(n,["autosize","maxRows","minRows","label","error","description","id","className","required","style","wrapperProps","classNames","styles","size","__staticSelector","sx","errorProps","descriptionProps","labelProps","inputWrapperOrder","inputContainer","unstyled","withAsterisk"]),O=vl(l),{classes:z,cx:N}=sat(),{systemStyles:$,rest:D}=yf(C),B=u_({required:f,ref:t,invalid:!!a,id:O,classNames:p9(u_({},p),{input:N(z.input,p==null?void 0:p.input)}),styles:m,__staticSelector:y,size:g,multiline:!0,unstyled:S},D);return L.createElement(is.Wrapper,u_(u_({label:o,error:a,id:O,description:u,required:f,style:d,className:c,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,labelProps:E,descriptionProps:b,inputContainer:x,inputWrapperOrder:w,unstyled:S,withAsterisk:I},$),h),r?L.createElement(is,p9(u_({},B),{component:rat,maxRows:i,minRows:s})):L.createElement(is,p9(u_({},B),{component:"textarea",rows:s})))});F2e.displayName="@mantine/core/Textarea";const B2e=A.createContext(null);function fat(){return A.useContext(B2e)||{}}var dat=pt((e,{spacing:t,center:n},r)=>({itemWrapper:{ref:r("itemWrapper"),display:"inline-flex",flexDirection:"column",whiteSpace:"normal"},item:{whiteSpace:"nowrap",lineHeight:n?1:e.lineHeight,"&:not(:first-of-type)":{marginTop:e.fn.size({size:t,sizes:e.spacing})}},withIcon:{listStyle:"none",[`& .${r("itemWrapper")}`]:{display:"inline-flex",alignItems:n?"center":"flex-start",flexDirection:"row"}},itemIcon:{display:"inline-block",verticalAlign:"middle",marginRight:e.spacing.sm}}));const hat=dat;var pat=Object.defineProperty,IN=Object.getOwnPropertySymbols,j2e=Object.prototype.hasOwnProperty,z2e=Object.prototype.propertyIsEnumerable,Yue=(e,t,n)=>t in e?pat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mat=(e,t)=>{for(var n in t||(t={}))j2e.call(t,n)&&Yue(e,n,t[n]);if(IN)for(var n of IN(t))z2e.call(t,n)&&Yue(e,n,t[n]);return e},gat=(e,t)=>{var n={};for(var r in e)j2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&IN)for(var r of IN(e))t.indexOf(r)<0&&z2e.call(e,r)&&(n[r]=e[r]);return n};function U2e(e){var t=e,{className:n,children:r,icon:i}=t,s=gat(t,["className","children","icon"]);const{icon:o,spacing:a,center:u,listStyleType:l,size:c,withPadding:f}=fat(),{classNames:d,styles:h,unstyled:p}=MC(),m=i||o,{classes:g,cx:y}=hat({withPadding:f,size:c,listStyleType:l,center:u,spacing:a},{classNames:d,styles:h,unstyled:p,name:"List"});return L.createElement(At,mat({component:"li",className:y(g.item,{[g.withIcon]:m},n)},s),L.createElement("div",{className:g.itemWrapper},m&&L.createElement("span",{className:g.itemIcon},m),L.createElement("span",null,r)))}U2e.displayName="@mantine/core/ListItem";var yat=Object.defineProperty,vat=Object.defineProperties,_at=Object.getOwnPropertyDescriptors,Kue=Object.getOwnPropertySymbols,bat=Object.prototype.hasOwnProperty,wat=Object.prototype.propertyIsEnumerable,Xue=(e,t,n)=>t in e?yat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Eat=(e,t)=>{for(var n in t||(t={}))bat.call(t,n)&&Xue(e,n,t[n]);if(Kue)for(var n of Kue(t))wat.call(t,n)&&Xue(e,n,t[n]);return e},xat=(e,t)=>vat(e,_at(t)),Sat=pt((e,{withPadding:t,size:n,listStyleType:r})=>({root:xat(Eat({},e.fn.fontStyles()),{listStyleType:r,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:e.lineHeight,margin:0,paddingLeft:t?e.spacing.xl:0,listStylePosition:"inside"})}));const Tat=Sat;var Aat=Object.defineProperty,ON=Object.getOwnPropertySymbols,V2e=Object.prototype.hasOwnProperty,H2e=Object.prototype.propertyIsEnumerable,Que=(e,t,n)=>t in e?Aat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cat=(e,t)=>{for(var n in t||(t={}))V2e.call(t,n)&&Que(e,n,t[n]);if(ON)for(var n of ON(t))H2e.call(t,n)&&Que(e,n,t[n]);return e},Iat=(e,t)=>{var n={};for(var r in e)V2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ON)for(var r of ON(e))t.indexOf(r)<0&&H2e.call(e,r)&&(n[r]=e[r]);return n};const Oat={type:"unordered",size:"md",spacing:0},pw=A.forwardRef((e,t)=>{const n=Ct("List",Oat,e),{children:r,type:i,size:s,listStyleType:o,withPadding:a,center:u,spacing:l,icon:c,className:f,styles:d,classNames:h,unstyled:p}=n,m=Iat(n,["children","type","size","listStyleType","withPadding","center","spacing","icon","className","styles","classNames","unstyled"]),{classes:g,cx:y}=Tat({withPadding:a,size:s,listStyleType:o,center:u,spacing:l},{classNames:h,styles:d,name:"List",unstyled:p});return L.createElement(ixe,{classNames:h,styles:d,unstyled:p},L.createElement(B2e.Provider,{value:{spacing:l,center:u,icon:c,listStyleType:o,size:s,withPadding:a}},L.createElement(At,Cat({component:i==="unordered"?"ul":"ol",className:y(g.root,f),ref:t},m),r)))});pw.Item=U2e;pw.displayName="@mantine/core/List";var Pat=pt({root:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}});const kat=Pat;var $at=Object.defineProperty,Rat=Object.defineProperties,Nat=Object.getOwnPropertyDescriptors,PN=Object.getOwnPropertySymbols,q2e=Object.prototype.hasOwnProperty,W2e=Object.prototype.propertyIsEnumerable,Jue=(e,t,n)=>t in e?$at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nP=(e,t)=>{for(var n in t||(t={}))q2e.call(t,n)&&Jue(e,n,t[n]);if(PN)for(var n of PN(t))W2e.call(t,n)&&Jue(e,n,t[n]);return e},Dat=(e,t)=>Rat(e,Nat(t)),Lat=(e,t)=>{var n={};for(var r in e)q2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PN)for(var r of PN(e))t.indexOf(r)<0&&W2e.call(e,r)&&(n[r]=e[r]);return n};const Mat={overlayOpacity:.75,transitionDuration:0,zIndex:Tu("overlay")},G2e=A.forwardRef((e,t)=>{const n=Ct("LoadingOverlay",Mat,e),{className:r,visible:i,loaderProps:s,overlayOpacity:o,overlayColor:a,transitionDuration:u,exitTransitionDuration:l,zIndex:c,style:f,loader:d,radius:h,overlayBlur:p,unstyled:m}=n,g=Lat(n,["className","visible","loaderProps","overlayOpacity","overlayColor","transitionDuration","exitTransitionDuration","zIndex","style","loader","radius","overlayBlur","unstyled"]),{classes:y,cx:v,theme:_}=kat(null,{name:"LoadingOverlay",unstyled:m}),b=`calc(${c} + 1)`;return L.createElement(UC,{duration:u,exitDuration:l,mounted:i,transition:"fade"},E=>L.createElement(At,nP({className:v(y.root,r),style:Dat(nP(nP({},E),f),{zIndex:c}),ref:t},g),d?L.createElement("div",{style:{zIndex:b}},d):L.createElement(I0,nP({style:{zIndex:b}},s)),L.createElement(E2e,{opacity:o,zIndex:c,radius:h,blur:p,unstyled:m,color:a||(_.colorScheme==="dark"?_.colors.dark[5]:_.white)})))});G2e.displayName="@mantine/core/LoadingOverlay";var Fat=pt(e=>({divider:{margin:`calc(${e.spacing.xs}px / 2) -5px`,borderTop:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`}}));const Bat=Fat;var jat=Object.defineProperty,kN=Object.getOwnPropertySymbols,Y2e=Object.prototype.hasOwnProperty,K2e=Object.prototype.propertyIsEnumerable,Zue=(e,t,n)=>t in e?jat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zat=(e,t)=>{for(var n in t||(t={}))Y2e.call(t,n)&&Zue(e,n,t[n]);if(kN)for(var n of kN(t))K2e.call(t,n)&&Zue(e,n,t[n]);return e},Uat=(e,t)=>{var n={};for(var r in e)Y2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kN)for(var r of kN(e))t.indexOf(r)<0&&K2e.call(e,r)&&(n[r]=e[r]);return n};function X2e(e){var t=e,{children:n,className:r}=t,i=Uat(t,["children","className"]);const{classNames:s,styles:o,unstyled:a}=MC(),{classes:u,cx:l}=Bat(null,{name:"Menu",classNames:s,styles:o,unstyled:a});return L.createElement(At,zat({className:l(u.divider,r)},i))}X2e.displayName="@mantine/core/MenuDivider";const Q2e={context:"Menu component was not found in the tree",children:"Menu.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[Vat,rY]=kEe(Q2e.context);var Hat=Object.defineProperty,$N=Object.getOwnPropertySymbols,J2e=Object.prototype.hasOwnProperty,Z2e=Object.prototype.propertyIsEnumerable,ele=(e,t,n)=>t in e?Hat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qat=(e,t)=>{for(var n in t||(t={}))J2e.call(t,n)&&ele(e,n,t[n]);if($N)for(var n of $N(t))Z2e.call(t,n)&&ele(e,n,t[n]);return e},Wat=(e,t)=>{var n={};for(var r in e)J2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$N)for(var r of $N(e))t.indexOf(r)<0&&Z2e.call(e,r)&&(n[r]=e[r]);return n};function eAe(e){var t=e,{children:n,onMouseEnter:r,onMouseLeave:i}=t,s=Wat(t,["children","onMouseEnter","onMouseLeave"]);const o=A.useRef(),a=rY(),u=f=>{(f.key==="ArrowUp"||f.key==="ArrowDown")&&(f.preventDefault(),o.current.querySelectorAll("[data-menu-item]")[0].focus())},l=Wh(r,()=>a.trigger==="hover"&&a.openDropdown()),c=Wh(i,()=>a.trigger==="hover"&&a.closeDropdown());return L.createElement(Vi.Dropdown,qat({onMouseEnter:l,onMouseLeave:c,role:"menu","aria-orientation":"vertical"},s),L.createElement("div",{tabIndex:-1,"data-menu-dropdown":!0,"data-autofocus":!0,onKeyDown:u,ref:o,style:{outline:0}},n))}eAe.displayName="@mantine/core/MenuDropdown";var Gat=Object.defineProperty,Yat=Object.defineProperties,Kat=Object.getOwnPropertyDescriptors,tle=Object.getOwnPropertySymbols,Xat=Object.prototype.hasOwnProperty,Qat=Object.prototype.propertyIsEnumerable,nle=(e,t,n)=>t in e?Gat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jat=(e,t)=>{for(var n in t||(t={}))Xat.call(t,n)&&nle(e,n,t[n]);if(tle)for(var n of tle(t))Qat.call(t,n)&&nle(e,n,t[n]);return e},Zat=(e,t)=>Yat(e,Kat(t)),eut=pt((e,{color:t,radius:n})=>({item:Zat(Jat({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",fontSize:e.fontSizes.sm,border:0,backgroundColor:"transparent",outline:0,width:"100%",textAlign:"left",textDecoration:"none",boxSizing:"border-box",padding:`${e.spacing.xs}px ${e.spacing.sm}px`,cursor:"pointer",borderRadius:e.fn.radius(n),color:t?e.fn.variant({variant:"filled",primaryFallback:!1,color:t}).background:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"flex",alignItems:"center","&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],pointerEvents:"none",userSelect:"none"},"&[data-hovered]":{backgroundColor:t?e.fn.variant({variant:"light",color:t}).background:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[3],.35):e.colors.gray[0]}}),itemLabel:{flex:1},itemIcon:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:e.spacing.xs},itemRightSection:{}}));const tut=eut;var nut=Object.defineProperty,rut=Object.defineProperties,iut=Object.getOwnPropertyDescriptors,RN=Object.getOwnPropertySymbols,tAe=Object.prototype.hasOwnProperty,nAe=Object.prototype.propertyIsEnumerable,rle=(e,t,n)=>t in e?nut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sut=(e,t)=>{for(var n in t||(t={}))tAe.call(t,n)&&rle(e,n,t[n]);if(RN)for(var n of RN(t))nAe.call(t,n)&&rle(e,n,t[n]);return e},out=(e,t)=>rut(e,iut(t)),aut=(e,t)=>{var n={};for(var r in e)tAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RN)for(var r of RN(e))t.indexOf(r)<0&&nAe.call(e,r)&&(n[r]=e[r]);return n};const rAe=A.forwardRef((e,t)=>{var n=e,{children:r,className:i,color:s,closeMenuOnClick:o,icon:a,rightSection:u}=n,l=aut(n,["children","className","color","closeMenuOnClick","icon","rightSection"]);const c=rY(),{classNames:f,styles:d,unstyled:h}=MC(),{classes:p,cx:m,theme:g}=tut({radius:c.radius,color:s},{name:"Menu",classNames:f,styles:d,unstyled:h}),y=A.useRef(),v=c.getItemIndex(y.current),_=l,b=Wh(_.onMouseLeave,()=>c.setHovered(-1)),E=Wh(_.onMouseEnter,()=>c.setHovered(c.getItemIndex(y.current))),w=Wh(_.onClick,()=>{typeof o=="boolean"?o&&c.closeDropdownImmediately():c.closeOnItemClick&&c.closeDropdownImmediately()}),x=Wh(_.onFocus,()=>c.setHovered(c.getItemIndex(y.current)));return L.createElement(At,out(sut({component:"button",type:"button"},l),{tabIndex:-1,onFocus:x,className:m(p.item,i),ref:As(y,t),role:"menuitem","data-menu-item":!0,"data-hovered":c.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:b,onClick:w,onKeyDown:_Ye({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:c.loop,dir:g.dir,orientation:"vertical",onKeyDown:_.onKeydown})}),a&&L.createElement("div",{className:p.itemIcon},a),r&&L.createElement("div",{className:p.itemLabel},r),u&&L.createElement("div",{className:p.itemRightSection},u))});rAe.displayName="@mantine/core/MenuItem";const uut=rAe;var lut=pt(e=>({label:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontWeight:500,fontSize:e.fontSizes.xs,padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.sm}px`,cursor:"default"}}));const cut=lut;var fut=Object.defineProperty,NN=Object.getOwnPropertySymbols,iAe=Object.prototype.hasOwnProperty,sAe=Object.prototype.propertyIsEnumerable,ile=(e,t,n)=>t in e?fut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dut=(e,t)=>{for(var n in t||(t={}))iAe.call(t,n)&&ile(e,n,t[n]);if(NN)for(var n of NN(t))sAe.call(t,n)&&ile(e,n,t[n]);return e},hut=(e,t)=>{var n={};for(var r in e)iAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NN)for(var r of NN(e))t.indexOf(r)<0&&sAe.call(e,r)&&(n[r]=e[r]);return n};function oAe(e){var t=e,{children:n,className:r}=t,i=hut(t,["children","className"]);const{classNames:s,styles:o,unstyled:a}=MC(),{classes:u,cx:l}=cut(null,{name:"Menu",classNames:s,styles:o,unstyled:a});return L.createElement(Rt,dut({className:l(u.label,r)},i),n)}oAe.displayName="@mantine/core/MenuLabel";var put=Object.defineProperty,DN=Object.getOwnPropertySymbols,aAe=Object.prototype.hasOwnProperty,uAe=Object.prototype.propertyIsEnumerable,sle=(e,t,n)=>t in e?put(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mut=(e,t)=>{for(var n in t||(t={}))aAe.call(t,n)&&sle(e,n,t[n]);if(DN)for(var n of DN(t))uAe.call(t,n)&&sle(e,n,t[n]);return e},gut=(e,t)=>{var n={};for(var r in e)aAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DN)for(var r of DN(e))t.indexOf(r)<0&&uAe.call(e,r)&&(n[r]=e[r]);return n};const lAe=A.forwardRef((e,t)=>{var n=e,{children:r,refProp:i="ref"}=n,s=gut(n,["children","refProp"]);if(!NC(r))throw new Error(Q2e.children);const o=rY(),a=Wh(r.props.onClick,()=>o.trigger==="click"&&o.toggleDropdown()),u=Wh(r.props.onMouseEnter,()=>o.trigger==="hover"&&o.openDropdown()),l=Wh(r.props.onMouseLeave,()=>o.trigger==="hover"&&o.closeDropdown());return L.createElement(Vi.Target,mut({refProp:i,popupType:"menu",ref:t},s),A.cloneElement(r,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":o.opened?!0:void 0}))});lAe.displayName="@mantine/core/MenuTarget";var yut=pt({dropdown:{padding:4}});const vut=yut;var _ut=Object.defineProperty,but=Object.defineProperties,wut=Object.getOwnPropertyDescriptors,LN=Object.getOwnPropertySymbols,cAe=Object.prototype.hasOwnProperty,fAe=Object.prototype.propertyIsEnumerable,ole=(e,t,n)=>t in e?_ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ale=(e,t)=>{for(var n in t||(t={}))cAe.call(t,n)&&ole(e,n,t[n]);if(LN)for(var n of LN(t))fAe.call(t,n)&&ole(e,n,t[n]);return e},ule=(e,t)=>but(e,wut(t)),Eut=(e,t)=>{var n={};for(var r in e)cAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LN)for(var r of LN(e))t.indexOf(r)<0&&fAe.call(e,r)&&(n[r]=e[r]);return n};const xut={closeOnItemClick:!0,loop:!0,trigger:"click",openDelay:0,closeDelay:100};function $l(e){const t=Ct("Menu",xut,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,onChange:a,closeOnItemClick:u,loop:l,closeOnEscape:c,trigger:f,openDelay:d,closeDelay:h,classNames:p,styles:m,unstyled:g,radius:y}=t,v=Eut(t,["children","onOpen","onClose","opened","defaultOpened","onChange","closeOnItemClick","loop","closeOnEscape","trigger","openDelay","closeDelay","classNames","styles","unstyled","radius"]),{classes:_,cx:b}=vut(),[E,{setHovered:w,resetHovered:x}]=xYe(),[S,I]=Ta({value:s,defaultValue:o,finalValue:!1,onChange:a}),C=()=>{I(!1),S&&(i==null||i())},O=()=>{I(!0),!S&&(r==null||r())},z=()=>S?C():O(),{openDropdown:N,closeDropdown:$}=Iot({open:O,close:C,closeDelay:h,openDelay:d}),D=B=>bYe("[data-menu-item]","[data-menu-dropdown]",B);return bs(()=>{x()},[S]),L.createElement(Vat,{value:{opened:S,toggleDropdown:z,getItemIndex:D,hovered:E,setHovered:w,closeOnItemClick:u,closeDropdown:f==="click"?C:$,openDropdown:f==="click"?O:N,closeDropdownImmediately:C,loop:l,trigger:f,radius:y}},L.createElement(Vi,ule(ale({},v),{radius:y,opened:S,onChange:I,defaultOpened:o,trapFocus:f==="click",closeOnEscape:c&&f==="click",__staticSelector:"Menu",classNames:ule(ale({},p),{dropdown:b(_.dropdown,p==null?void 0:p.dropdown)}),styles:m,unstyled:g,onClose:C,onOpen:O}),n))}$l.displayName="@mantine/core/Menu";$l.Item=uut;$l.Label=oAe;$l.Dropdown=eAe;$l.Target=lAe;$l.Divider=X2e;var Sut=Object.defineProperty,lle=Object.getOwnPropertySymbols,Tut=Object.prototype.hasOwnProperty,Aut=Object.prototype.propertyIsEnumerable,cle=(e,t,n)=>t in e?Sut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cut=(e,t)=>{for(var n in t||(t={}))Tut.call(t,n)&&cle(e,n,t[n]);if(lle)for(var n of lle(t))Aut.call(t,n)&&cle(e,n,t[n]);return e};const Iut={xs:320,sm:380,md:440,lg:620,xl:780};function Out(e){return e?{position:"absolute",top:0,left:0,right:0,bottom:0,maxHeight:"100vh",overflowY:"auto"}:{}}var Put=pt((e,{overflow:t,size:n,centered:r,zIndex:i,fullScreen:s})=>({close:{},overlay:{display:s?"none":void 0},root:{position:"fixed",zIndex:i,top:0,left:0,right:0,bottom:0},inner:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowY:"auto",padding:s?0:`${e.spacing.xl*2}px ${e.spacing.md}px`,display:"flex",justifyContent:"center",alignItems:r?"center":"flex-start"},title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},modal:Cut({position:"relative",width:s?"100vw":e.fn.size({sizes:Iut,size:n}),borderRadius:s?0:void 0,outline:0,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,marginTop:r?"auto":void 0,marginBottom:r?"auto":void 0,zIndex:1},Out(s)),header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md,marginRight:-9},body:{maxHeight:t==="inside"?"calc(100vh - 185px)":null,overflowY:t==="inside"?"auto":null,wordBreak:"break-word"}}));const kut=Put;var $ut=Object.defineProperty,MN=Object.getOwnPropertySymbols,dAe=Object.prototype.hasOwnProperty,hAe=Object.prototype.propertyIsEnumerable,fle=(e,t,n)=>t in e?$ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rut=(e,t)=>{for(var n in t||(t={}))dAe.call(t,n)&&fle(e,n,t[n]);if(MN)for(var n of MN(t))hAe.call(t,n)&&fle(e,n,t[n]);return e},Nut=(e,t)=>{var n={};for(var r in e)dAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MN)for(var r of MN(e))t.indexOf(r)<0&&hAe.call(e,r)&&(n[r]=e[r]);return n};const Dut={size:"md",transitionDuration:250,overflow:"outside",padding:"lg",shadow:"lg",closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withCloseButton:!0,withinPortal:!0,lockScroll:!0,withFocusReturn:!0,overlayBlur:0,zIndex:Tu("modal"),exitTransitionDuration:0};function VC(e){const t=Ct("Modal",Dut,e),{className:n,opened:r,title:i,onClose:s,children:o,withCloseButton:a,overlayOpacity:u,size:l,transitionDuration:c,exitTransitionDuration:f,closeButtonLabel:d,overlayColor:h,overflow:p,transition:m,padding:g,shadow:y,radius:v,id:_,classNames:b,styles:E,closeOnClickOutside:w,trapFocus:x,closeOnEscape:S,centered:I,target:C,withinPortal:O,zIndex:z,overlayBlur:N,transitionTimingFunction:$,fullScreen:D,unstyled:B,lockScroll:V,withFocusReturn:j}=t,G=Nut(t,["className","opened","title","onClose","children","withCloseButton","overlayOpacity","size","transitionDuration","exitTransitionDuration","closeButtonLabel","overlayColor","overflow","transition","padding","shadow","radius","id","classNames","styles","closeOnClickOutside","trapFocus","closeOnEscape","centered","target","withinPortal","zIndex","overlayBlur","transitionTimingFunction","fullScreen","unstyled","lockScroll","withFocusReturn"]),U=vl(_),P=`${U}-title`,k=`${U}-body`,{classes:H,cx:M,theme:F}=kut({size:l,overflow:p,centered:I,zIndex:z,fullScreen:D},{unstyled:B,classNames:b,styles:E,name:"Modal"}),J=fxe(x&&r),se=A.useRef(null),ae=As(J,se),ce=typeof u=="number"?u:F.colorScheme==="dark"?.85:.75;qXe(V&&r);const le=Fe=>{!x&&Fe.key==="Escape"&&S&&s()};A.useEffect(()=>{if(!x)return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[x]),axe({opened:r,shouldReturnFocus:x&&j});const ge=A.useRef(null);Mz("mousedown",Fe=>{ge.current=Fe.target});const ue=()=>{ge.current===se.current&&w&&s()};return L.createElement(FC,{withinPortal:O,target:C},L.createElement(v2e,{mounted:r,duration:c,exitDuration:f,timingFunction:$,transitions:{modal:{duration:c,transition:m||(D?"fade":"pop")},overlay:{duration:c/2,transition:"fade",timingFunction:"ease"}}},Fe=>L.createElement(L.Fragment,null,L.createElement(At,Rut({id:U,className:M(H.root,n)},G),L.createElement("div",{style:Fe.overlay},L.createElement(E2e,{className:H.overlay,sx:{position:"fixed"},zIndex:0,blur:N,color:h||(F.colorScheme==="dark"?F.colors.dark[9]:F.black),opacity:ce,unstyled:B})),L.createElement("div",{role:"presentation",className:H.inner,onClick:ue,onKeyDown:$e=>{var Ge;((Ge=$e.target)==null?void 0:Ge.getAttribute("data-mantine-stop-propagation"))!=="true"&&$e.key==="Escape"&&S&&s()},ref:ae},L.createElement(VTe,{className:H.modal,shadow:y,p:g,radius:v,role:"dialog","aria-labelledby":P,"aria-describedby":k,"aria-modal":!0,tabIndex:-1,style:Fe.modal,unstyled:B,onClick:$e=>$e.stopPropagation()},(i||a)&&L.createElement("div",{className:H.header},L.createElement(Rt,{id:P,className:H.title},i),a&&L.createElement(Sv,{iconSize:16,onClick:s,"aria-label":d,className:H.close})),L.createElement("div",{id:k,className:H.body},o)))))))}VC.displayName="@mantine/core/Modal";const Lut={xs:16,sm:22,md:26,lg:30,xl:36},Mut={xs:10,sm:12,md:14,lg:16,xl:18};var Fut=pt((e,{size:t,disabled:n,radius:r,readOnly:i,variant:s})=>({defaultValue:{display:"flex",alignItems:"center",backgroundColor:n?e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[3]:e.colorScheme==="dark"?e.colors.dark[7]:s==="filled"?e.white:e.colors.gray[1],color:n?e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7]:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],height:e.fn.size({size:t,sizes:Lut}),paddingLeft:e.fn.size({size:t,sizes:e.spacing}),paddingRight:n||i?e.fn.size({size:t,sizes:e.spacing}):0,fontWeight:500,fontSize:e.fn.size({size:t,sizes:Mut}),borderRadius:e.fn.size({size:r,sizes:e.radius}),cursor:n?"not-allowed":"default",userSelect:"none",maxWidth:"calc(100% - 20px)"},defaultValueRemove:{color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],marginLeft:e.fn.size({size:t,sizes:e.spacing})/6},defaultValueLabel:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}));const But=Fut;var jut=Object.defineProperty,FN=Object.getOwnPropertySymbols,pAe=Object.prototype.hasOwnProperty,mAe=Object.prototype.propertyIsEnumerable,dle=(e,t,n)=>t in e?jut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zut=(e,t)=>{for(var n in t||(t={}))pAe.call(t,n)&&dle(e,n,t[n]);if(FN)for(var n of FN(t))mAe.call(t,n)&&dle(e,n,t[n]);return e},Uut=(e,t)=>{var n={};for(var r in e)pAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FN)for(var r of FN(e))t.indexOf(r)<0&&mAe.call(e,r)&&(n[r]=e[r]);return n};const hle={xs:16,sm:22,md:24,lg:26,xl:30};function gAe(e){var t=e,{label:n,classNames:r,styles:i,className:s,onRemove:o,disabled:a,readOnly:u,size:l,radius:c="sm",variant:f}=t,d=Uut(t,["label","classNames","styles","className","onRemove","disabled","readOnly","size","radius","variant"]);const{classes:h,cx:p}=But({size:l,disabled:a,readOnly:u,radius:c,variant:f},{classNames:r,styles:i,name:"MultiSelect"});return L.createElement("div",zut({className:p(h.defaultValue,s)},d),L.createElement("span",{className:h.defaultValueLabel},n),!a&&!u&&L.createElement(Sv,{"aria-hidden":!0,onMouseDown:o,size:hle[l],radius:2,color:"blue",variant:"transparent",iconSize:hle[l]/2,className:h.defaultValueRemove,tabIndex:-1}))}gAe.displayName="@mantine/core/MultiSelect/DefaultValue";function Vut({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s}){if(!t&&s.length===0)return e;if(!t){const a=[];for(let u=0;u<e.length;u+=1)s.some(l=>l===e[u].value&&!e[u].disabled)||a.push(e[u]);return a}const o=[];for(let a=0;a<e.length&&(i(r,s.some(u=>u===e[a].value&&!e[a].disabled),e[a])&&o.push(e[a]),!(o.length>=n));a+=1);return o}var Hut=Object.defineProperty,BN=Object.getOwnPropertySymbols,yAe=Object.prototype.hasOwnProperty,vAe=Object.prototype.propertyIsEnumerable,ple=(e,t,n)=>t in e?Hut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mle=(e,t)=>{for(var n in t||(t={}))yAe.call(t,n)&&ple(e,n,t[n]);if(BN)for(var n of BN(t))vAe.call(t,n)&&ple(e,n,t[n]);return e},qut=(e,t)=>{var n={};for(var r in e)yAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BN)for(var r of BN(e))t.indexOf(r)<0&&vAe.call(e,r)&&(n[r]=e[r]);return n};const Wut={xs:14,sm:18,md:20,lg:24,xl:28};function _Ae(e){var t=e,{size:n,error:r,style:i}=t,s=qut(t,["size","error","style"]);const o=us(),a=o.fn.size({size:n,sizes:Wut});return L.createElement("svg",mle({width:a,height:a,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:mle({color:r?o.colors.red[6]:o.colors.gray[6]},i),"data-chevron":!0},s),L.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function bAe({shouldClear:e,clearButtonLabel:t,onClear:n,size:r,error:i,clearButtonTabIndex:s}){return e?L.createElement(Sv,{variant:"transparent","aria-label":t,onClick:n,size:r,tabIndex:s,onMouseDown:o=>o.preventDefault()}):L.createElement(_Ae,{error:i,size:r})}bAe.displayName="@mantine/core/SelectRightSection";var Gut=Object.defineProperty,Yut=Object.defineProperties,Kut=Object.getOwnPropertyDescriptors,jN=Object.getOwnPropertySymbols,wAe=Object.prototype.hasOwnProperty,EAe=Object.prototype.propertyIsEnumerable,gle=(e,t,n)=>t in e?Gut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m9=(e,t)=>{for(var n in t||(t={}))wAe.call(t,n)&&gle(e,n,t[n]);if(jN)for(var n of jN(t))EAe.call(t,n)&&gle(e,n,t[n]);return e},yle=(e,t)=>Yut(e,Kut(t)),Xut=(e,t)=>{var n={};for(var r in e)wAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jN)for(var r of jN(e))t.indexOf(r)<0&&EAe.call(e,r)&&(n[r]=e[r]);return n};const Qut={xs:24,sm:30,md:34,lg:44,xl:54};function xAe(e){var t=e,{styles:n,rightSection:r,rightSectionWidth:i,theme:s}=t,o=Xut(t,["styles","rightSection","rightSectionWidth","theme"]);if(r)return{rightSection:r,rightSectionWidth:i,styles:n};const a=typeof n=="function"?n(s):n;return{rightSectionWidth:s.fn.size({size:o.size,sizes:Qut}),rightSection:!o.readOnly&&!(o.disabled&&o.shouldClear)&&L.createElement(bAe,m9({},o)),styles:yle(m9({},a),{rightSection:yle(m9({},a==null?void 0:a.rightSection),{pointerEvents:o.shouldClear?void 0:"none"})})}}var Jut=Object.defineProperty,Zut=Object.defineProperties,elt=Object.getOwnPropertyDescriptors,vle=Object.getOwnPropertySymbols,tlt=Object.prototype.hasOwnProperty,nlt=Object.prototype.propertyIsEnumerable,_le=(e,t,n)=>t in e?Jut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rlt=(e,t)=>{for(var n in t||(t={}))tlt.call(t,n)&&_le(e,n,t[n]);if(vle)for(var n of vle(t))nlt.call(t,n)&&_le(e,n,t[n]);return e},ilt=(e,t)=>Zut(e,elt(t)),slt=pt((e,{size:t,invalid:n})=>({wrapper:{position:"relative"},values:{minHeight:e.fn.size({size:t,sizes:Bo})-2,display:"flex",alignItems:"center",flexWrap:"wrap",marginLeft:`calc(${-e.spacing.xs}px / 2)`,boxSizing:"border-box"},value:{margin:`calc(${e.spacing.xs}px / 2 - 2px) calc(${e.spacing.xs}px / 2)`},searchInput:ilt(rlt({},e.fn.fontStyles()),{flex:1,minWidth:60,backgroundColor:"transparent",border:0,outline:0,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,marginLeft:`calc(${e.spacing.xs}px / 2)`,appearance:"none",color:"inherit",lineHeight:`${e.fn.size({size:t,sizes:Bo})-2}px`,"&::placeholder":{opacity:1,color:n?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&:disabled":{cursor:"not-allowed"}}),searchInputEmpty:{width:"100%"},searchInputInputHidden:{width:0,height:0,margin:0,overflow:"hidden"},searchInputPointer:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}},input:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}}}));const olt=slt;var alt=Object.defineProperty,ult=Object.defineProperties,llt=Object.getOwnPropertyDescriptors,zN=Object.getOwnPropertySymbols,SAe=Object.prototype.hasOwnProperty,TAe=Object.prototype.propertyIsEnumerable,ble=(e,t,n)=>t in e?alt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l_=(e,t)=>{for(var n in t||(t={}))SAe.call(t,n)&&ble(e,n,t[n]);if(zN)for(var n of zN(t))TAe.call(t,n)&&ble(e,n,t[n]);return e},wle=(e,t)=>ult(e,llt(t)),clt=(e,t)=>{var n={};for(var r in e)SAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zN)for(var r of zN(e))t.indexOf(r)<0&&TAe.call(e,r)&&(n[r]=e[r]);return n};function flt(e,t,n){return t?!1:n.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function dlt(e,t){return!!e&&!t.some(n=>n.value.toLowerCase()===e.toLowerCase())}function Ele(e,t){if(!Array.isArray(e))return;if(t.length===0)return[];const n=typeof t[0]=="object"?t.map(r=>r.value):t;return e.filter(r=>n.includes(r))}const hlt={size:"sm",valueComponent:gAe,itemComponent:jG,transition:"pop-top-left",transitionDuration:0,maxDropdownHeight:220,shadow:"sm",searchable:!1,filter:flt,limit:1/0,clearSearchOnChange:!0,clearable:!1,clearSearchOnBlur:!1,disabled:!1,initiallyOpened:!1,creatable:!1,shouldCreate:dlt,switchDirectionOnFlip:!1,zIndex:Tu("popover"),selectOnBlur:!1,clearButtonTabIndex:0,positionDependencies:[]},AAe=A.forwardRef((e,t)=>{const n=Ct("MultiSelect",hlt,e),{className:r,style:i,required:s,label:o,description:a,size:u,error:l,classNames:c,styles:f,wrapperProps:d,value:h,defaultValue:p,data:m,onChange:g,valueComponent:y,itemComponent:v,id:_,transition:b,transitionDuration:E,transitionTimingFunction:w,maxDropdownHeight:x,shadow:S,nothingFound:I,onFocus:C,onBlur:O,searchable:z,placeholder:N,filter:$,limit:D,clearSearchOnChange:B,clearable:V,clearSearchOnBlur:j,clearButtonLabel:G,variant:U,onSearchChange:P,searchValue:k,disabled:H,initiallyOpened:M,radius:F,icon:J,rightSection:se,rightSectionWidth:ae,creatable:ce,getCreateLabel:le,shouldCreate:ge,onCreate:ue,sx:Fe,dropdownComponent:$e,onDropdownClose:Ge,onDropdownOpen:Re,maxSelectedValues:Oe,withinPortal:Me,switchDirectionOnFlip:Ut,zIndex:Qe,selectOnBlur:je,name:wt,dropdownPosition:et,errorProps:ct,labelProps:ft,descriptionProps:jt,clearButtonTabIndex:Dn,form:he,positionDependencies:_e,onKeyDown:ke,unstyled:it,inputContainer:Ye,inputWrapperOrder:ut,readOnly:tt,withAsterisk:_t}=n,In=clt(n,["className","style","required","label","description","size","error","classNames","styles","wrapperProps","value","defaultValue","data","onChange","valueComponent","itemComponent","id","transition","transitionDuration","transitionTimingFunction","maxDropdownHeight","shadow","nothingFound","onFocus","onBlur","searchable","placeholder","filter","limit","clearSearchOnChange","clearable","clearSearchOnBlur","clearButtonLabel","variant","onSearchChange","searchValue","disabled","initiallyOpened","radius","icon","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","onCreate","sx","dropdownComponent","onDropdownClose","onDropdownOpen","maxSelectedValues","withinPortal","switchDirectionOnFlip","zIndex","selectOnBlur","name","dropdownPosition","errorProps","labelProps","descriptionProps","clearButtonTabIndex","form","positionDependencies","onKeyDown","unstyled","inputContainer","inputWrapperOrder","readOnly","withAsterisk"]),{classes:Wt,cx:Vt,theme:hr}=olt({size:u,invalid:!!l},{classNames:c,styles:f,unstyled:it,name:"MultiSelect"}),{systemStyles:Yn,rest:ku}=yf(In),Mr=A.useRef(),ls=A.useRef(),ti=A.useRef({}),Ei=vl(_),[qr,yr]=A.useState(M),[yt,Fr]=A.useState(-1),[xi,Yi]=A.useState("column"),[Js,Ma]=Ta({value:k,defaultValue:"",finalValue:void 0,onChange:P}),[ne,Q]=A.useState(!1),{scrollIntoView:ie,targetRef:ve,scrollableRef:ye}=mxe({duration:0,offset:5,cancelable:!1,isList:!0}),mt=ce&&typeof le=="function";let Ce=null;const dt=m.map(vt=>typeof vt=="string"?{label:vt,value:vt}:vt),Bt=$Ee({data:dt}),[St,Ht]=Ta({value:Ele(h,m),defaultValue:Ele(p,m),finalValue:[],onChange:g}),fn=A.useRef(!!Oe&&Oe<St.length),Tr=vt=>{if(!tt){const wn=St.filter(Br=>Br!==vt);Ht(wn),Oe&&wn.length<Oe&&(fn.current=!1)}},zt=vt=>{Ma(vt.currentTarget.value),!H&&!fn.current&&z&&yr(!0)},pr=vt=>{typeof C=="function"&&C(vt),!H&&!fn.current&&z&&yr(!0)},Qt=Vut({data:Bt,searchable:z,searchValue:Js,limit:D,filter:$,value:St}),er=(vt,wn,Br)=>{let Os=vt;for(;Br(Os);)if(Os=wn(Os),!Qt[Os].disabled)return Os;return vt};bs(()=>{Fr(-1)},[Js]),bs(()=>{!H&&St.length>m.length&&yr(!1),Oe&&St.length<Oe&&(fn.current=!1),Oe&&St.length>=Oe&&(fn.current=!0,yr(!1))},[St]);const ni=vt=>{if(!tt)if(B&&Ma(""),St.includes(vt.value))Tr(vt.value);else{if(vt.creatable&&typeof ue=="function"){const wn=ue(vt.value);typeof wn<"u"&&wn!==null&&Ht(typeof wn=="string"?[...St,wn]:[...St,wn.value])}else Ht([...St,vt.value]);St.length===Oe-1&&(fn.current=!0,yr(!1)),yt===Qt.length-1&&Fr(Qt.length-2),Qt.length===1&&yr(!1)}},cs=vt=>{typeof O=="function"&&O(vt),je&&Qt[yt]&&qr&&ni(Qt[yt]),j&&Ma(""),yr(!1)},Fi=vt=>{if(ne||(ke==null||ke(vt),tt)||vt.key!=="Backspace"&&Oe&&fn.current)return;const wn=xi==="column",Br=()=>{Fr(Fa=>{var q;const te=er(Fa,K=>K+1,K=>K<Qt.length-1);return qr&&(ve.current=ti.current[(q=Qt[te])==null?void 0:q.value],ie({alignment:wn?"end":"start"})),te})},Os=()=>{Fr(Fa=>{var q;const te=er(Fa,K=>K-1,K=>K>0);return qr&&(ve.current=ti.current[(q=Qt[te])==null?void 0:q.value],ie({alignment:wn?"start":"end"})),te})};switch(vt.key){case"ArrowUp":{vt.preventDefault(),yr(!0),wn?Os():Br();break}case"ArrowDown":{vt.preventDefault(),yr(!0),wn?Br():Os();break}case"Enter":{vt.preventDefault(),Qt[yt]&&qr?ni(Qt[yt]):yr(!0);break}case" ":{z||(vt.preventDefault(),Qt[yt]&&qr?ni(Qt[yt]):yr(!0));break}case"Backspace":{St.length>0&&Js.length===0&&(Ht(St.slice(0,-1)),yr(!0),Oe&&(fn.current=!1));break}case"Home":{if(!z){vt.preventDefault(),qr||yr(!0);const Fa=Qt.findIndex(q=>!q.disabled);Fr(Fa),ie({alignment:wn?"end":"start"})}break}case"End":{if(!z){vt.preventDefault(),qr||yr(!0);const Fa=Qt.map(q=>!!q.disabled).lastIndexOf(!1);Fr(Fa),ie({alignment:wn?"end":"start"})}break}case"Escape":yr(!1)}},aa=St.map(vt=>{let wn=Bt.find(Br=>Br.value===vt&&!Br.disabled);return!wn&&mt&&(wn={value:vt,label:vt}),wn}).filter(vt=>!!vt).map(vt=>L.createElement(y,wle(l_({},vt),{variant:U,disabled:H,className:Wt.value,readOnly:tt,onRemove:wn=>{wn.preventDefault(),wn.stopPropagation(),Tr(vt.value)},key:vt.value,size:u,styles:f,classNames:c,radius:F}))),Zs=()=>{var vt;Ma(""),Ht([]),(vt=Mr.current)==null||vt.focus(),Oe&&(fn.current=!1)};mt&&ge(Js,Bt)&&(Ce=le(Js),Qt.push({label:Js,value:Js,creatable:!0}));const mi=!tt&&(Qt.length>0?qr:qr&&!!I);return bs(()=>{const vt=mi?Re:Ge;typeof vt=="function"&&vt()},[mi]),L.createElement(is.Wrapper,l_(l_({required:s,id:Ei,label:o,error:l,description:a,size:u,className:r,style:i,classNames:c,styles:f,__staticSelector:"MultiSelect",sx:Fe,errorProps:ct,descriptionProps:jt,labelProps:ft,inputContainer:Ye,inputWrapperOrder:ut,unstyled:it,withAsterisk:_t},Yn),d),L.createElement(bg,{opened:mi,transition:b,transitionDuration:E,shadow:"sm",withinPortal:Me,__staticSelector:"MultiSelect",onDirectionChange:Yi,switchDirectionOnFlip:Ut,zIndex:Qe,dropdownPosition:et,positionDependencies:_e,classNames:c,styles:f,unstyled:it},L.createElement(bg.Target,null,L.createElement("div",{className:Wt.wrapper,role:"combobox","aria-haspopup":"listbox","aria-owns":qr&&mi?`${Ei}-items`:null,"aria-controls":Ei,"aria-expanded":qr,onMouseLeave:()=>Fr(-1),tabIndex:-1,ref:ls},L.createElement("input",{type:"hidden",name:wt,value:St.join(","),form:he,disabled:H}),L.createElement(is,l_({__staticSelector:"MultiSelect",style:{overflow:"hidden"},component:"div",multiline:!0,size:u,variant:U,disabled:H,invalid:!!l,required:s,radius:F,icon:J,unstyled:it,onMouseDown:vt=>{var wn;vt.preventDefault(),!H&&!fn.current&&yr(!qr),(wn=Mr.current)==null||wn.focus()},classNames:wle(l_({},c),{input:Vt({[Wt.input]:!z},c==null?void 0:c.input)})},xAe({theme:hr,rightSection:se,rightSectionWidth:ae,styles:f,size:u,shouldClear:V&&St.length>0,clearButtonLabel:G,onClear:Zs,error:l,disabled:H,clearButtonTabIndex:Dn,readOnly:tt})),L.createElement("div",{className:Wt.values},aa,L.createElement("input",l_({ref:As(t,Mr),type:"search",id:Ei,className:Vt(Wt.searchInput,{[Wt.searchInputPointer]:!z,[Wt.searchInputInputHidden]:!qr&&St.length>0||!z&&St.length>0,[Wt.searchInputEmpty]:St.length===0}),onKeyDown:Fi,value:Js,onChange:zt,onFocus:pr,onBlur:cs,readOnly:!z||fn.current||tt,placeholder:St.length===0?N:void 0,disabled:H,"data-mantine-stop-propagation":qr,autoComplete:"off",onCompositionStart:()=>Q(!0),onCompositionEnd:()=>Q(!1)},ku)))))),L.createElement(bg.Dropdown,{component:$e||s6,maxHeight:x,direction:xi,id:Ei,innerRef:ye,__staticSelector:"MultiSelect",classNames:c,styles:f},L.createElement(BG,{data:Qt,hovered:yt,classNames:c,styles:f,uuid:Ei,__staticSelector:"MultiSelect",onItemHover:Fr,onItemSelect:ni,itemsRefs:ti,itemComponent:v,size:u,nothingFound:I,creatable:ce&&!!Ce,createLabel:Ce,unstyled:it}))))});AAe.displayName="@mantine/core/MultiSelect";var plt=Object.defineProperty,mlt=Object.defineProperties,glt=Object.getOwnPropertyDescriptors,xle=Object.getOwnPropertySymbols,ylt=Object.prototype.hasOwnProperty,vlt=Object.prototype.propertyIsEnumerable,Sle=(e,t,n)=>t in e?plt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tle=(e,t)=>{for(var n in t||(t={}))ylt.call(t,n)&&Sle(e,n,t[n]);if(xle)for(var n of xle(t))vlt.call(t,n)&&Sle(e,n,t[n]);return e},_lt=(e,t)=>mlt(e,glt(t)),blt=pt((e,{color:t,variant:n,noWrap:r,childrenOffset:i,alignIcon:s})=>{const o=e.fn.variant({variant:n,color:t});return{root:_lt(Tle({display:"flex",alignItems:"center",width:"100%",padding:`8px ${e.spacing.sm}px`,userSelect:"none"},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]})),{"&[data-active]":Tle({backgroundColor:o.background,color:o.color},e.fn.hover({backgroundColor:o.hover})),"&[data-disabled]":{opacity:.4,pointerEvents:"none"}}),icon:{marginRight:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",alignSelf:s==="center"?"center":"flex-start",paddingTop:s==="center"?void 0:4},rightSection:{marginLeft:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",transition:`transform 150ms ${e.transitionTimingFunction}`,"&[data-rotate]":{transform:"rotate(90deg)"}},body:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:r?"nowrap":void 0},label:{},description:{display:"block","&[data-active]":{color:"inherit"}},children:{paddingLeft:e.fn.size({size:i,sizes:e.spacing})}}});const wlt=blt;var Elt=Object.defineProperty,UN=Object.getOwnPropertySymbols,CAe=Object.prototype.hasOwnProperty,IAe=Object.prototype.propertyIsEnumerable,Ale=(e,t,n)=>t in e?Elt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xlt=(e,t)=>{for(var n in t||(t={}))CAe.call(t,n)&&Ale(e,n,t[n]);if(UN)for(var n of UN(t))IAe.call(t,n)&&Ale(e,n,t[n]);return e},Slt=(e,t)=>{var n={};for(var r in e)CAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UN)for(var r of UN(e))t.indexOf(r)<0&&IAe.call(e,r)&&(n[r]=e[r]);return n};const Tlt={variant:"light",childrenOffset:"lg"},OAe=A.forwardRef((e,t)=>{const n=Ct("NavLink",Tlt,e),{label:r,description:i,icon:s,rightSection:o,className:a,classNames:u,styles:l,unstyled:c,active:f,color:d,variant:h,noWrap:p,children:m,opened:g,defaultOpened:y,onChange:v,disableRightSectionRotation:_,childrenOffset:b,disabled:E,onClick:w}=n,x=Slt(n,["label","description","icon","rightSection","className","classNames","styles","unstyled","active","color","variant","noWrap","children","opened","defaultOpened","onChange","disableRightSectionRotation","childrenOffset","disabled","onClick"]),{classes:S,cx:I}=wlt({color:d,variant:h,noWrap:p,childrenOffset:b,alignIcon:i?"top":"center"},{name:"NavLink",classNames:u,styles:l,unstyled:c}),[C,O]=Ta({value:g,defaultValue:y,finalValue:!1,onChange:v}),z=!!m,N=$=>{z?($.preventDefault(),w==null||w($),O(!C)):w==null||w($)};return L.createElement(L.Fragment,null,L.createElement(xv,xlt({ref:t,className:I(S.root,a),"data-active":f||void 0,onClick:N,unstyled:c,"data-expanded":C||void 0,"data-disabled":E||void 0,disabled:E},x),s&&L.createElement("span",{className:S.icon},s),L.createElement("span",{className:S.body},L.createElement(Rt,{component:"span",size:"sm",className:S.label},r),L.createElement(Rt,{component:"span",color:"dimmed",size:"xs","data-active":f||void 0,className:S.description},i)),(z||o)&&L.createElement("span",{className:S.rightSection,"data-rotate":C&&!_||void 0},z?o||L.createElement(JQe,{width:14,height:14,style:{transform:"rotate(-90deg)"}}):o)),L.createElement(Axe,{in:C},L.createElement("div",{className:S.children},m)))});OAe.displayName="@mantine/core/NavLink";const HT=OAe,Alt=(e,t,n)=>Number.isInteger(e)&&e>=0&&t===0?"numeric":!Number.isInteger(e)&&e>=0&&t!==0?"decimal":Number.isInteger(e)&&e<0&&t===0||!Number.isInteger(e)&&e<0&&t!==0?n==="ios"?"text":"decimal":"numeric";function Cle({direction:e,size:t}){return L.createElement("svg",{style:{transform:e==="up"?"rotate(180deg)":void 0},width:t,height:t,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},L.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}const PAe={xs:20,sm:24,md:30,lg:34,xl:36};var Clt=pt((e,{radius:t,size:n})=>({rightSection:{display:"flex",flexDirection:"column",height:"calc(100% - 2px)",margin:1,marginRight:1,overflow:"hidden",borderTopRightRadius:e.fn.radius(t),borderBottomRightRadius:e.fn.radius(t)},control:{margin:0,position:"relative",flex:"0 0 50%",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",width:e.fn.size({size:n,sizes:PAe}),padding:0,WebkitTapHighlightColor:"transparent",borderBottom:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderLeft:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderTop:0,borderRight:0,backgroundColor:"transparent",marginRight:1,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,"&:not(:disabled):hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]},"&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}},controlUp:{},controlDown:{borderBottom:0}}));const Ilt=Clt;var Olt=Object.defineProperty,Plt=Object.defineProperties,klt=Object.getOwnPropertyDescriptors,VN=Object.getOwnPropertySymbols,kAe=Object.prototype.hasOwnProperty,$Ae=Object.prototype.propertyIsEnumerable,Ile=(e,t,n)=>t in e?Olt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g9=(e,t)=>{for(var n in t||(t={}))kAe.call(t,n)&&Ile(e,n,t[n]);if(VN)for(var n of VN(t))$Ae.call(t,n)&&Ile(e,n,t[n]);return e},$lt=(e,t)=>Plt(e,klt(t)),Rlt=(e,t)=>{var n={};for(var r in e)kAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VN)for(var r of VN(e))t.indexOf(r)<0&&$Ae.call(e,r)&&(n[r]=e[r]);return n};const Nlt={type:"text",size:"sm",__staticSelector:"TextInput"},iY=A.forwardRef((e,t)=>{const n=_Te("TextInput",Nlt,e),{inputProps:r,wrapperProps:i}=n,s=Rlt(n,["inputProps","wrapperProps"]);return L.createElement(is.Wrapper,g9({},i),L.createElement(is,$lt(g9(g9({},r),s),{ref:t})))});iY.displayName="@mantine/core/TextInput";var Dlt=Object.defineProperty,Llt=Object.defineProperties,Mlt=Object.getOwnPropertyDescriptors,HN=Object.getOwnPropertySymbols,RAe=Object.prototype.hasOwnProperty,NAe=Object.prototype.propertyIsEnumerable,Ole=(e,t,n)=>t in e?Dlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Flt=(e,t)=>{for(var n in t||(t={}))RAe.call(t,n)&&Ole(e,n,t[n]);if(HN)for(var n of HN(t))NAe.call(t,n)&&Ole(e,n,t[n]);return e},Blt=(e,t)=>Llt(e,Mlt(t)),jlt=(e,t)=>{var n={};for(var r in e)RAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HN)for(var r of HN(e))t.indexOf(r)<0&&NAe.call(e,r)&&(n[r]=e[r]);return n};const zlt=e=>e||"",Ult=e=>{if(e==="-")return e;let t=e;t[0]==="."&&(t=`0${e}`);const n=parseFloat(t);if(!Number.isNaN(n))return e},Ple={xs:10,sm:14,md:16,lg:18,xl:20},Vlt={step:1,hideControls:!1,size:"sm",precision:0,noClampOnBlur:!1,removeTrailingZeros:!1,formatter:zlt,parser:Ult,type:"text"},DAe=A.forwardRef((e,t)=>{const n=Ct("NumberInput",Vlt,e),{disabled:r,value:i,onChange:s,decimalSeparator:o,min:a,max:u,startValue:l,step:c,stepHoldInterval:f,stepHoldDelay:d,onBlur:h,onFocus:p,onKeyDown:m,onKeyUp:g,hideControls:y,radius:v,variant:_,precision:b,removeTrailingZeros:E,defaultValue:w,noClampOnBlur:x,handlersRef:S,classNames:I,styles:C,size:O,rightSection:z,rightSectionWidth:N,formatter:$,parser:D,inputMode:B,unstyled:V,type:j}=n,G=jlt(n,["disabled","value","onChange","decimalSeparator","min","max","startValue","step","stepHoldInterval","stepHoldDelay","onBlur","onFocus","onKeyDown","onKeyUp","hideControls","radius","variant","precision","removeTrailingZeros","defaultValue","noClampOnBlur","handlersRef","classNames","styles","size","rightSection","rightSectionWidth","formatter","parser","inputMode","unstyled","type"]),{classes:U,cx:P,theme:k}=Ilt({radius:v,size:O},{classNames:I,styles:C,unstyled:V,name:"NumberInput"}),H=Ye=>{if(Ye===void 0)return;let ut=Ye.toFixed(b);return E&&b>0&&(ut=ut.replace(new RegExp(`[0]{0,${b}}$`),""),(ut.endsWith(".")||ut.endsWith(o))&&(ut=ut.slice(0,-1))),ut},[M,F]=A.useState(!1),[J,se]=A.useState(typeof i=="number"?i:typeof w=="number"?w:void 0),ae=typeof i=="number"?i:J,[ce,le]=A.useState(typeof ae=="number"?H(ae):""),ge=A.useRef(),ue=Ye=>{Ye!==J&&!Number.isNaN(Ye)&&(typeof s=="function"&&s(Ye),se(Ye))},Fe=(Ye="")=>{let ut=typeof Ye=="number"?String(Ye):Ye;return o&&(ut=ut.replace(/\./g,o)),$(ut)},$e=Ye=>{let ut=Ye;return o&&(ut=ut.replace(new RegExp(`\\${o}`,"g"),".")),D(ut)},Ge=typeof a=="number"?a:-1/0,Re=typeof u=="number"?u:1/0,Oe=A.useRef();Oe.current=()=>{var Ye,ut,tt;if(J===void 0)ue((Ye=l??a)!=null?Ye:0),le((tt=(ut=H(l))!=null?ut:H(a))!=null?tt:"0");else{const _t=H(ef(J+c,Ge,Re));ue(parseFloat(_t)),le(_t)}};const Me=A.useRef();Me.current=()=>{var Ye,ut,tt;if(J===void 0)ue((Ye=l??a)!=null?Ye:0),le((tt=(ut=H(l))!=null?ut:H(a))!=null?tt:"0");else{const _t=H(ef(J-c,Ge,Re));ue(parseFloat(_t)),le(_t)}},dxe(S,{increment:Oe.current,decrement:Me.current}),A.useEffect(()=>{typeof i=="number"&&!M&&(se(i),le(H(i))),w===void 0&&i===void 0&&!M&&(se(i),le(""))},[i]);const Ut=d!==void 0&&f!==void 0,Qe=A.useRef(null),je=A.useRef(0),wt=()=>{Qe.current&&window.clearTimeout(Qe.current),Qe.current=null,je.current=0},et=Ye=>{Ye?Oe.current():Me.current(),je.current+=1},ct=Ye=>{if(et(Ye),Ut){const ut=typeof f=="number"?f:f(je.current);Qe.current=window.setTimeout(()=>ct(Ye),ut)}},ft=(Ye,ut)=>{Ye.preventDefault(),ge.current.focus(),et(ut),Ut&&(Qe.current=window.setTimeout(()=>ct(ut),d))};A.useEffect(()=>(wt(),wt),[]);const jt=L.createElement("div",{className:U.rightSection},L.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:ae>=u,className:P(U.control,U.controlUp),onPointerDown:Ye=>{ft(Ye,!0)},onPointerUp:wt,onPointerLeave:wt},L.createElement(Cle,{size:k.fn.size({size:O,sizes:Ple}),direction:"up"})),L.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:ae<=a,className:P(U.control,U.controlDown),onPointerDown:Ye=>{ft(Ye,!1)},onPointerUp:wt,onPointerLeave:wt},L.createElement(Cle,{size:k.fn.size({size:O,sizes:Ple}),direction:"down"}))),Dn=Ye=>{if(Ye.nativeEvent.isComposing)return;const tt=Ye.target.value,_t=$e(tt);le(_t),tt===""||tt==="-"?ue(void 0):tt.trim()!==""&&!Number.isNaN(_t)&&ue(parseFloat(_t))},he=Ye=>{var ut;if(Ye.target.value==="")le(""),ue(void 0);else{let tt=Ye.target.value;(tt[0]===`${o}`||tt[0]===".")&&(tt=`0${tt}`);const _t=$e(tt),In=ef(parseFloat(_t),Ge,Re);Number.isNaN(In)?le((ut=H(ae))!=null?ut:""):x||(le(H(In)),ue(parseFloat(H(In))))}F(!1),typeof h=="function"&&h(Ye)},_e=Ye=>{F(!0),typeof p=="function"&&p(Ye)},ke=Ye=>{if(typeof m=="function"&&m(Ye),Ye.repeat&&Ut&&(Ye.key==="ArrowUp"||Ye.key==="ArrowDown")){Ye.preventDefault();return}Ye.key==="ArrowUp"?ft(Ye,!0):Ye.key==="ArrowDown"&&ft(Ye,!1)},it=Ye=>{typeof g=="function"&&g(Ye),(Ye.key==="ArrowUp"||Ye.key==="ArrowDown")&&wt()};return L.createElement(iY,Blt(Flt({},G),{type:j,variant:_,value:Fe(ce),disabled:r,ref:As(ge,t),onChange:Dn,onBlur:he,onFocus:_e,onKeyDown:ke,onKeyUp:it,rightSection:z||(r||y||_==="unstyled"?null:jt),rightSectionWidth:N||k.fn.size({size:O,sizes:PAe})+1,radius:v,max:u,min:a,step:c,size:O,styles:C,classNames:I,inputMode:B||Alt(c,b,iQe()),__staticSelector:"NumberInput",unstyled:V}))});DAe.displayName="@mantine/core/NumberInput";const kle={xs:3,sm:5,md:8,lg:12,xl:16},Hlt=XKe({from:{backgroundPosition:"0 0"},to:{backgroundPosition:"40px 0"}});var qlt=pt((e,{color:t,radius:n,size:r,striped:i,animate:s})=>({root:{position:"relative",height:e.fn.size({size:r,sizes:kle}),backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderRadius:e.fn.size({size:n,sizes:e.radius}),overflow:"hidden"},bar:{position:"absolute",top:0,bottom:0,left:0,height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:e.fn.variant({variant:"filled",primaryFallback:!1,color:t||e.primaryColor}).background,transition:"width 100ms linear",animation:s?`${Hlt} 1000ms linear infinite`:"none",backgroundSize:"20px 20px",backgroundImage:i?"linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent)":"none","&:last-of-type":{borderTopRightRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomRightRadius:e.fn.size({size:n,sizes:e.radius})},"&:first-of-type":{borderTopLeftRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomLeftRadius:e.fn.size({size:n,sizes:e.radius})},"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},label:{color:e.white,fontSize:e.fn.size({size:r,sizes:kle})*.65,fontWeight:700,userSelect:"none",overflow:"hidden",whiteSpace:"nowrap"}}));const Wlt=qlt,LAe=A.createContext(!1),Glt=LAe.Provider,Ylt=()=>A.useContext(LAe);function MAe({children:e,openDelay:t=0,closeDelay:n=0}){return L.createElement(Glt,{value:!0},L.createElement(nnt,{delay:{open:t,close:n}},e))}MAe.displayName="@mantine/core/TooltipGroup";var Klt=Object.defineProperty,Xlt=Object.defineProperties,Qlt=Object.getOwnPropertyDescriptors,$le=Object.getOwnPropertySymbols,Jlt=Object.prototype.hasOwnProperty,Zlt=Object.prototype.propertyIsEnumerable,Rle=(e,t,n)=>t in e?Klt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nle=(e,t)=>{for(var n in t||(t={}))Jlt.call(t,n)&&Rle(e,n,t[n]);if($le)for(var n of $le(t))Zlt.call(t,n)&&Rle(e,n,t[n]);return e},ect=(e,t)=>Xlt(e,Qlt(t));function tct(e,t){if(!t)return{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[9],color:e.white};const n=e.fn.variant({variant:"filled",color:t,primaryFallback:!1});return{backgroundColor:n.background,color:n.color}}var nct=pt((e,{color:t,radius:n,width:r,multiline:i})=>({tooltip:ect(Nle(Nle({},e.fn.fontStyles()),tct(e,t)),{lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,borderRadius:e.fn.radius(n),padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.xs}px`,position:"absolute",whiteSpace:i?"unset":"nowrap",pointerEvents:"none",width:r}),arrow:{backgroundColor:"inherit",border:0,zIndex:1}}));const FAe=nct,BAe={children:"Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"};function rct({offset:e,position:t}){const[n,r]=A.useState(!1),i=A.useRef(),{x:s,y:o,reference:a,floating:u,refs:l,update:c,placement:f}=YG({placement:t,middleware:[qG({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=A.useCallback(({clientX:m,clientY:g})=>{a({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[a]);return A.useEffect(()=>{if(l.floating.current){const m=i.current;m.addEventListener("mousemove",p);const g=up(l.floating.current);return g.forEach(y=>{y.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(y=>{y.removeEventListener("scroll",c)})}}},[a,l.floating,c,p,n]),{handleMouseMove:p,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u}}var ict=Object.defineProperty,sct=Object.defineProperties,oct=Object.getOwnPropertyDescriptors,qN=Object.getOwnPropertySymbols,jAe=Object.prototype.hasOwnProperty,zAe=Object.prototype.propertyIsEnumerable,Dle=(e,t,n)=>t in e?ict(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y9=(e,t)=>{for(var n in t||(t={}))jAe.call(t,n)&&Dle(e,n,t[n]);if(qN)for(var n of qN(t))zAe.call(t,n)&&Dle(e,n,t[n]);return e},v9=(e,t)=>sct(e,oct(t)),act=(e,t)=>{var n={};for(var r in e)jAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qN)for(var r of qN(e))t.indexOf(r)<0&&zAe.call(e,r)&&(n[r]=e[r]);return n};const uct={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Tu("popover")};function UAe(e){var t;const n=Ct("TooltipFloating",uct,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,width:y,zIndex:v,disabled:_}=n,b=act(n,["children","refProp","withinPortal","style","className","classNames","styles","unstyled","radius","color","label","offset","position","multiline","width","zIndex","disabled"]),{handleMouseMove:E,x:w,y:x,opened:S,boundaryRef:I,floating:C,setOpened:O}=rct({offset:p,position:m}),{classes:z,cx:N}=FAe({radius:f,color:d,multiline:g,width:y},{name:"Tooltip",classNames:u,styles:l,unstyled:c});if(!NC(r))throw new Error(BAe.children);const $=As(I,r.ref),D=V=>{var j,G;(G=(j=r.props).onMouseEnter)==null||G.call(j,V),E(V),O(!0)},B=V=>{var j,G;(G=(j=r.props).onMouseLeave)==null||G.call(j,V),O(!1)};return _?L.createElement(L.Fragment,null,r):L.createElement(L.Fragment,null,L.createElement(FC,{withinPortal:s},L.createElement(At,v9(y9({},b),{ref:C,className:N(z.tooltip,a),style:v9(y9({},o),{zIndex:v,display:S?"block":"none",top:x??"",left:(t=Math.round(w))!=null?t:""})}),h)),A.cloneElement(r,v9(y9({},r.props),{[i]:$,onMouseEnter:D,onMouseLeave:B})))}UAe.displayName="@mantine/core/TooltipFloating";function lct(e){const[t,n]=A.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=Ylt(),o=vl(),{delay:a,currentId:u,setCurrentId:l}=ZSe(),c=A.useCallback(S=>{n(S),S&&l(o)},[l,o]),{x:f,y:d,reference:h,floating:p,context:m,refs:g,update:y,placement:v,middlewareData:{arrow:{x:_,y:b}={}}}=YG({placement:e.position,open:i,onOpenChange:c,middleware:[zSe(e.offset),qG({padding:8}),jSe(),KSe({element:e.arrowRef}),...e.inline?[VSe()]:[]]}),{getReferenceProps:E,getFloatingProps:w}=Jtt([tnt(m,{enabled:e.events.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events.touch}),unt(m,{enabled:e.events.focus,keyboardOnly:!0}),int(m,{role:"tooltip"}),ant(m,{enabled:typeof e.opened===void 0}),rnt(m,{id:o})]);return eTe({opened:i,positionDependencies:e.positionDependencies,floating:{refs:g,update:y}}),bs(()=>{var S;(S=e.onPositionChange)==null||S.call(e,v)},[v]),{x:f,y:d,arrowX:_,arrowY:b,reference:h,floating:p,getFloatingProps:w,getReferenceProps:E,isGroupPhase:i&&u&&u!==o,opened:i,placement:v}}var cct=Object.defineProperty,fct=Object.defineProperties,dct=Object.getOwnPropertyDescriptors,WN=Object.getOwnPropertySymbols,VAe=Object.prototype.hasOwnProperty,HAe=Object.prototype.propertyIsEnumerable,Lle=(e,t,n)=>t in e?cct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kx=(e,t)=>{for(var n in t||(t={}))VAe.call(t,n)&&Lle(e,n,t[n]);if(WN)for(var n of WN(t))HAe.call(t,n)&&Lle(e,n,t[n]);return e},hct=(e,t)=>fct(e,dct(t)),pct=(e,t)=>{var n={};for(var r in e)VAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WN)for(var r of WN(e))t.indexOf(r)<0&&HAe.call(e,r)&&(n[r]=e[r]);return n};const mct={position:"top",refProp:"ref",withinPortal:!1,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,offset:5,transition:"fade",transitionDuration:100,width:"auto",events:{hover:!0,focus:!1,touch:!1},zIndex:Tu("popover"),positionDependencies:[]},l6=A.forwardRef((e,t)=>{const n=A.useRef(null),r=Ct("Tooltip",mct,e),{children:i,position:s,refProp:o,label:a,openDelay:u,closeDelay:l,onPositionChange:c,opened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:y,style:v,className:_,withArrow:b,arrowSize:E,arrowOffset:w,arrowRadius:x,offset:S,transition:I,transitionDuration:C,multiline:O,width:z,events:N,zIndex:$,disabled:D,positionDependencies:B,onClick:V,onMouseEnter:j,onMouseLeave:G,inline:U}=r,P=pct(r,["children","position","refProp","label","openDelay","closeDelay","onPositionChange","opened","withinPortal","radius","color","classNames","styles","unstyled","style","className","withArrow","arrowSize","arrowOffset","arrowRadius","offset","transition","transitionDuration","multiline","width","events","zIndex","disabled","positionDependencies","onClick","onMouseEnter","onMouseLeave","inline"]),{classes:k,cx:H,theme:M}=FAe({radius:h,color:p,width:z,multiline:O},{name:"Tooltip",classNames:m,styles:g,unstyled:y}),F=lct({position:pTe(M.dir,s),closeDelay:l,openDelay:u,onPositionChange:c,opened:f,events:N,arrowRef:n,offset:S+(b?E/2:0),positionDependencies:[...B,i],inline:U});if(!NC(i))throw new Error(BAe.children);const J=As(F.reference,i.ref,t);return L.createElement(L.Fragment,null,L.createElement(FC,{withinPortal:d},L.createElement(UC,{mounted:!D&&F.opened,transition:I,duration:F.isGroupPhase?10:C},se=>{var ae,ce;return L.createElement(At,Kx(Kx({},P),F.getFloatingProps({ref:F.floating,className:k.tooltip,style:hct(Kx(Kx({},v),se),{zIndex:$,top:(ae=F.y)!=null?ae:0,left:(ce=F.x)!=null?ce:0})})),a,L.createElement(KG,{ref:n,arrowX:F.arrowX,arrowY:F.arrowY,visible:b,withBorder:!1,position:F.placement,arrowSize:E,arrowOffset:w,arrowRadius:x,className:k.arrow}))})),A.cloneElement(i,F.getReferenceProps(Kx({onClick:V,onMouseEnter:j,onMouseLeave:G,onMouseMove:e.onMouseMove,onPointerDown:e.onPointerDown,onPointerEnter:e.onPointerEnter,[o]:J,className:H(_,i.props.className)},i.props))))});l6.Group=MAe;l6.Floating=UAe;l6.displayName="@mantine/core/Tooltip";const qAe=l6;var gct=Object.defineProperty,yct=Object.defineProperties,vct=Object.getOwnPropertyDescriptors,GN=Object.getOwnPropertySymbols,WAe=Object.prototype.hasOwnProperty,GAe=Object.prototype.propertyIsEnumerable,Mle=(e,t,n)=>t in e?gct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kz=(e,t)=>{for(var n in t||(t={}))WAe.call(t,n)&&Mle(e,n,t[n]);if(GN)for(var n of GN(t))GAe.call(t,n)&&Mle(e,n,t[n]);return e},YAe=(e,t)=>yct(e,vct(t)),Fle=(e,t)=>{var n={};for(var r in e)WAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GN)for(var r of GN(e))t.indexOf(r)<0&&GAe.call(e,r)&&(n[r]=e[r]);return n};function _ct(e){return e.reduce((t,n)=>(t.sections.push(YAe(Kz({},n),{accumulated:t.accumulated})),t.accumulated+=n.value,t),{accumulated:0,sections:[]}).sections}const bct={size:"md",radius:"sm",striped:!1,animate:!1,label:""},KAe=A.forwardRef((e,t)=>{const n=Ct("Progress",bct,e),{className:r,value:i,color:s,size:o,radius:a,striped:u,animate:l,label:c,"aria-label":f,classNames:d,styles:h,sections:p,unstyled:m}=n,g=Fle(n,["className","value","color","size","radius","striped","animate","label","aria-label","classNames","styles","sections","unstyled"]),{classes:y,cx:v,theme:_}=Wlt({color:s,size:o,radius:a,striped:u||l,animate:l},{classNames:d,styles:h,unstyled:m,name:"Progress"}),b=Array.isArray(p)?_ct(p).map((E,w)=>{var x=E,{tooltip:S,accumulated:I,value:C,label:O,color:z}=x,N=Fle(x,["tooltip","accumulated","value","label","color"]);return L.createElement(qAe.Floating,{label:S,disabled:!S,key:w},L.createElement(At,YAe(Kz({},N),{className:v(y.bar,N.className),sx:{width:`${C}%`,left:`${I}%`,backgroundColor:_.fn.variant({variant:"filled",primaryFallback:!1,color:z||_.primaryColor}).background}}),O&&L.createElement(Rt,{className:y.label},O)))}):null;return L.createElement(At,Kz({className:v(y.root,r),ref:t},g),b||L.createElement("div",{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":i,"aria-label":f,className:y.bar,style:{width:`${i}%`}},c?L.createElement(Rt,{className:y.label},c):""))});KAe.displayName="@mantine/core/Progress";var wct=Object.defineProperty,Ble=Object.getOwnPropertySymbols,Ect=Object.prototype.hasOwnProperty,xct=Object.prototype.propertyIsEnumerable,jle=(e,t,n)=>t in e?wct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sct=(e,t)=>{for(var n in t||(t={}))Ect.call(t,n)&&jle(e,n,t[n]);if(Ble)for(var n of Ble(t))xct.call(t,n)&&jle(e,n,t[n]);return e};function Tct(e){return L.createElement("svg",Sct({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5"},e),L.createElement("path",{fill:"currentColor",d:"M0 2.5a2.5 2.5 0 115 0 2.5 2.5 0 01-5 0z"}))}const XAe=A.createContext(null),Act=XAe.Provider,Cct=()=>A.useContext(XAe);var Ict=Object.defineProperty,YN=Object.getOwnPropertySymbols,QAe=Object.prototype.hasOwnProperty,JAe=Object.prototype.propertyIsEnumerable,zle=(e,t,n)=>t in e?Ict(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ule=(e,t)=>{for(var n in t||(t={}))QAe.call(t,n)&&zle(e,n,t[n]);if(YN)for(var n of YN(t))JAe.call(t,n)&&zle(e,n,t[n]);return e},Oct=(e,t)=>{var n={};for(var r in e)QAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YN)for(var r of YN(e))t.indexOf(r)<0&&JAe.call(e,r)&&(n[r]=e[r]);return n};const Pct={orientation:"horizontal",spacing:"lg",offset:"xs",size:"sm"},ZAe=A.forwardRef((e,t)=>{const n=Ct("RadioGroup",Pct,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,unstyled:f,offset:d,name:h}=n,p=Oct(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","unstyled","offset","name"]),[m,g]=Ta({value:i,defaultValue:s,finalValue:"",onChange:o}),y=v=>g(v.currentTarget.value);return L.createElement(Act,{value:{value:m,onChange:y,size:l,name:h}},L.createElement(is.Wrapper,Ule(Ule({labelElement:"div",size:l,__staticSelector:"RadioGroup",ref:t,unstyled:f},c),p),L.createElement(o2e,{spacing:u,orientation:a,unstyled:f,role:"radiogroup",offset:d},r)))});ZAe.displayName="@mantine/core/RadioGroup";var kct=Object.defineProperty,$ct=Object.defineProperties,Rct=Object.getOwnPropertyDescriptors,Vle=Object.getOwnPropertySymbols,Nct=Object.prototype.hasOwnProperty,Dct=Object.prototype.propertyIsEnumerable,Hle=(e,t,n)=>t in e?kct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lct=(e,t)=>{for(var n in t||(t={}))Nct.call(t,n)&&Hle(e,n,t[n]);if(Vle)for(var n of Vle(t))Dct.call(t,n)&&Hle(e,n,t[n]);return e},Mct=(e,t)=>$ct(e,Rct(t));const _9={xs:16,sm:20,md:24,lg:30,xl:36},rP={xs:6,sm:8,md:10,lg:14,xl:16};var Fct=pt((e,{size:t,color:n,transitionDuration:r,labelPosition:i,error:s},o)=>{const a=e.fn.variant({variant:"filled",color:n}),u=e.fn.variant({variant:"filled",color:"red"}).background;return{inner:{order:i==="left"?2:1,position:"relative",alignSelf:"flex-start"},icon:{ref:o("icon"),color:e.white,opacity:0,transform:"scale(0.75) translateY(2px)",transition:`opacity ${r}ms ${e.transitionTimingFunction}`,pointerEvents:"none",width:e.fn.size({sizes:rP,size:t}),height:e.fn.size({sizes:rP,size:t}),position:"absolute",top:`calc(50% - ${e.fn.size({sizes:rP,size:t})/2}px)`,left:`calc(50% - ${e.fn.size({sizes:rP,size:t})/2}px)`},radio:Mct(Lct({},e.fn.focusStyles()),{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${s?u:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,position:"relative",appearance:"none",width:e.fn.size({sizes:_9,size:t}),height:e.fn.size({sizes:_9,size:t}),borderRadius:e.fn.size({sizes:_9,size:t}),margin:0,display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"background-color, border-color",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${r}ms`,cursor:e.cursorType,"&:checked":{background:a.background,borderColor:a.background,[`& + .${o("icon")}`]:{opacity:1,transform:"scale(1)"}},"&:disabled":{borderColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[4],backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],[`& + .${o("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[4]}}})}});const Bct=Fct;var jct=Object.defineProperty,KN=Object.getOwnPropertySymbols,eCe=Object.prototype.hasOwnProperty,tCe=Object.prototype.propertyIsEnumerable,qle=(e,t,n)=>t in e?jct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iP=(e,t)=>{for(var n in t||(t={}))eCe.call(t,n)&&qle(e,n,t[n]);if(KN)for(var n of KN(t))tCe.call(t,n)&&qle(e,n,t[n]);return e},zct=(e,t)=>{var n={};for(var r in e)eCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KN)for(var r of KN(e))t.indexOf(r)<0&&tCe.call(e,r)&&(n[r]=e[r]);return n};const Uct={icon:Tct,transitionDuration:100,size:"sm",labelPosition:"right"},XN=A.forwardRef((e,t)=>{var n,r;const i=Ct("Radio",Uct,e),{className:s,style:o,id:a,label:u,size:l,title:c,disabled:f,color:d,classNames:h,styles:p,sx:m,icon:g,transitionDuration:y,wrapperProps:v,unstyled:_,labelPosition:b,description:E,error:w}=i,x=zct(i,["className","style","id","label","size","title","disabled","color","classNames","styles","sx","icon","transitionDuration","wrapperProps","unstyled","labelPosition","description","error"]),S=Cct(),I=(n=S==null?void 0:S.size)!=null?n:l,C=e.size?l:I,{classes:O}=Bct({color:d,size:C,transitionDuration:y,labelPosition:b,error:!!w},{classNames:h,styles:p,unstyled:_,name:"Radio"}),{systemStyles:z,rest:N}=yf(x),$=vl(a),D=S?{checked:S.value===N.value,name:(r=N.name)!=null?r:S.name,onChange:S.onChange}:{};return L.createElement(tY,iP(iP({className:s,sx:m,style:o,id:$,size:C,labelPosition:b,label:u,description:E,error:w,disabled:f,__staticSelector:"Radio",classNames:h,styles:p,unstyled:_,"data-checked":D.checked||void 0},z),v),L.createElement("div",{className:O.inner},L.createElement("input",iP(iP({ref:t,className:O.radio,type:"radio",id:$,disabled:f},N),D)),L.createElement(g,{className:O.icon,"aria-hidden":!0})))});XN.displayName="@mantine/core/Radio";XN.Group=ZAe;var Vct=Object.defineProperty,Hct=Object.defineProperties,qct=Object.getOwnPropertyDescriptors,Wle=Object.getOwnPropertySymbols,Wct=Object.prototype.hasOwnProperty,Gct=Object.prototype.propertyIsEnumerable,Gle=(e,t,n)=>t in e?Vct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sP=(e,t)=>{for(var n in t||(t={}))Wct.call(t,n)&&Gle(e,n,t[n]);if(Wle)for(var n of Wle(t))Gct.call(t,n)&&Gle(e,n,t[n]);return e},Yct=(e,t)=>Hct(e,qct(t));const qk=4,Yle={xs:"3px 6px",sm:"5px 10px",md:"7px 14px",lg:"9px 16px",xl:"12px 20px"};var Kct=pt((e,{fullWidth:t,color:n,radius:r,shouldAnimate:i,transitionDuration:s,transitionTimingFunction:o,size:a,orientation:u},l)=>{const c=u==="vertical",f=e.fn.variant({variant:"filled",color:n});return{label:Yct(sP(sP({ref:l("label")},e.fn.focusStyles()),e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",borderRadius:e.fn.radius(r),fontWeight:500,fontSize:a in e.fontSizes?e.fontSizes[a]:e.fontSizes.sm,cursor:"pointer",display:"block",textAlign:"center",padding:Yle[a in Yle?a:"sm"],whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7],transition:`color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:hover":{color:e.colorScheme==="dark"?e.colors.dark[0]:e.black}}),control:{ref:l("control"),position:"relative",boxSizing:"border-box",flex:1,zIndex:2,transition:`border-left-color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:not(:first-of-type)":{borderStyle:"solid",borderWidth:c?"1px 0 0 0":"0 0 0 1px",borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}},input:{height:0,width:0,position:"absolute",overflow:"hidden",whiteSpace:"nowrap",opacity:0,"&:focus":{outline:"none",[`& + .${l("label")}`]:sP({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),"&:focus:not(:focus-visible)":{[`& + .${l("label")}`]:sP({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)}}},root:{position:"relative",display:t||c?"flex":"inline-flex",width:c&&!t?"max-content":"auto",flexDirection:c?"column":"row",backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[1],borderRadius:e.fn.radius(r),overflow:"hidden",padding:qk},controlActive:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important",[`& + .${l("control")}`]:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important"},borderRadius:e.fn.radius(r),boxShadow:i?n||e.colorScheme==="dark"?"none":e.shadows.xs:void 0,backgroundColor:i?n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white:void 0},labelActive:{"&, &:hover":{color:n||e.colorScheme==="dark"?e.white:e.black}},disabled:{"&, &:hover":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],cursor:"not-allowed"}},active:{boxSizing:"border-box",borderRadius:e.fn.radius(r),position:"absolute",zIndex:1,boxShadow:n||e.colorScheme==="dark"?"none":e.shadows.xs,transition:`transform ${i?0:s}ms ${e.transitionTimingFunction}, width ${i?0:s/2}ms ${o||e.transitionTimingFunction}`,backgroundColor:n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white}}});const Xct=Kct;var Qct=Object.defineProperty,QN=Object.getOwnPropertySymbols,nCe=Object.prototype.hasOwnProperty,rCe=Object.prototype.propertyIsEnumerable,Kle=(e,t,n)=>t in e?Qct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jct=(e,t)=>{for(var n in t||(t={}))nCe.call(t,n)&&Kle(e,n,t[n]);if(QN)for(var n of QN(t))rCe.call(t,n)&&Kle(e,n,t[n]);return e},Zct=(e,t)=>{var n={};for(var r in e)nCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QN)for(var r of QN(e))t.indexOf(r)<0&&rCe.call(e,r)&&(n[r]=e[r]);return n};const eft={disabled:!1,size:"sm",transitionDuration:200},iCe=A.forwardRef((e,t)=>{var n,r,i,s;const o=Ct("SegmentedControl",eft,e),{className:a,disabled:u,data:l,name:c,value:f,onChange:d,color:h,fullWidth:p,radius:m,size:g,transitionDuration:y,transitionTimingFunction:v,classNames:_,styles:b,defaultValue:E,orientation:w,unstyled:x}=o,S=Zct(o,["className","disabled","data","name","value","onChange","color","fullWidth","radius","size","transitionDuration","transitionTimingFunction","classNames","styles","defaultValue","orientation","unstyled"]),I=us(),C=e6(),O=I.respectReducedMotion?C:!1,z=l.map(ae=>typeof ae=="string"?{label:ae,value:ae}:ae),N=A.useRef(),[$,D]=A.useState(!1),[B,V]=Ta({value:f,defaultValue:E,finalValue:Array.isArray(z)&&(s=(i=(n=z.find(ae=>!ae.disabled))==null?void 0:n.value)!=null?i:(r=z[0])==null?void 0:r.value)!=null?s:null,onChange:d}),{classes:j,cx:G}=Xct({size:g,fullWidth:p,color:h,radius:m,shouldAnimate:O||!$,transitionDuration:y,transitionTimingFunction:v,orientation:w},{classNames:_,styles:b,unstyled:x,name:"SegmentedControl"}),[U,P]=A.useState({width:0,height:0,translate:[0,0]}),k=vl(c),H=A.useRef({}),[M,F]=Tb();NG(()=>{N.current?D(!0):(N.current=!0,D(!1))}),A.useEffect(()=>{if(B in H.current&&M.current){const ae=H.current[B],ce=ae.getBoundingClientRect(),le=ae.offsetWidth/ce.width,ge=ce.width*le||0,ue=ce.height*le||0,Fe=F.width-ae.parentElement.offsetLeft+qk-ge,$e=ae.parentElement.offsetLeft-qk;P({width:ge,height:ue,translate:[I.dir==="rtl"?Fe:$e,ae.parentElement.offsetTop-qk]})}},[B,F]);const J=z.map(ae=>L.createElement("div",{className:G(j.control,{[j.controlActive]:B===ae.value}),key:ae.value},L.createElement("input",{className:j.input,disabled:u||ae.disabled,type:"radio",name:k,value:ae.value,id:`${k}-${ae.value}`,checked:B===ae.value,onChange:()=>V(ae.value)}),L.createElement("label",{className:G(j.label,{[j.labelActive]:B===ae.value,[j.disabled]:u||ae.disabled}),htmlFor:`${k}-${ae.value}`,ref:ce=>{H.current[ae.value]=ce}},ae.label))),se=As(M,t);return z.length===0?null:L.createElement(At,Jct({className:G(j.root,a),ref:se},S),typeof B=="string"&&$&&L.createElement(At,{component:"span",className:j.active,sx:{width:U.width,height:U.height,transform:`translate(${U.translate[0]}px, ${U.translate[1]}px )`}}),J)});iCe.displayName="@mantine/core/SegmentedControl";function tft({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s,filterDataOnExactSearchMatch:o}){if(!t)return e;const a=s!=null&&e.find(l=>l.value===s)||null;if(a&&!o&&(a==null?void 0:a.label)===r)return e;const u=[];for(let l=0;l<e.length&&(i(r,e[l])&&u.push(e[l]),!(u.length>=n));l+=1);return u}var nft=pt(()=>({input:{"&:not(:disabled)":{cursor:"pointer","&::selection":{backgroundColor:"transparent"}}}}));const rft=nft;var ift=Object.defineProperty,sft=Object.defineProperties,oft=Object.getOwnPropertyDescriptors,JN=Object.getOwnPropertySymbols,sCe=Object.prototype.hasOwnProperty,oCe=Object.prototype.propertyIsEnumerable,Xle=(e,t,n)=>t in e?ift(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xx=(e,t)=>{for(var n in t||(t={}))sCe.call(t,n)&&Xle(e,n,t[n]);if(JN)for(var n of JN(t))oCe.call(t,n)&&Xle(e,n,t[n]);return e},b9=(e,t)=>sft(e,oft(t)),aft=(e,t)=>{var n={};for(var r in e)sCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JN)for(var r of JN(e))t.indexOf(r)<0&&oCe.call(e,r)&&(n[r]=e[r]);return n};function uft(e,t){return t.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function lft(e,t){return!!e&&!t.some(n=>n.label.toLowerCase()===e.toLowerCase())}const cft={required:!1,size:"sm",shadow:"sm",itemComponent:jG,transition:"fade",transitionDuration:0,initiallyOpened:!1,filter:uft,maxDropdownHeight:220,searchable:!1,clearable:!1,limit:1/0,disabled:!1,creatable:!1,shouldCreate:lft,selectOnBlur:!1,switchDirectionOnFlip:!1,filterDataOnExactSearchMatch:!1,zIndex:Tu("popover"),clearButtonTabIndex:0,positionDependencies:[],dropdownPosition:"flip"},aCe=A.forwardRef((e,t)=>{const n=_Te("Select",cft,e),{inputProps:r,wrapperProps:i,shadow:s,data:o,value:a,defaultValue:u,onChange:l,itemComponent:c,onKeyDown:f,onBlur:d,onFocus:h,transition:p,transitionDuration:m,initiallyOpened:g,transitionTimingFunction:y,unstyled:v,classNames:_,styles:b,filter:E,maxDropdownHeight:w,searchable:x,clearable:S,nothingFound:I,clearButtonLabel:C,limit:O,disabled:z,onSearchChange:N,searchValue:$,rightSection:D,rightSectionWidth:B,creatable:V,getCreateLabel:j,shouldCreate:G,selectOnBlur:U,onCreate:P,dropdownComponent:k,onDropdownClose:H,onDropdownOpen:M,withinPortal:F,switchDirectionOnFlip:J,zIndex:se,name:ae,dropdownPosition:ce,allowDeselect:le,placeholder:ge,filterDataOnExactSearchMatch:ue,clearButtonTabIndex:Fe,form:$e,positionDependencies:Ge,readOnly:Re}=n,Oe=aft(n,["inputProps","wrapperProps","shadow","data","value","defaultValue","onChange","itemComponent","onKeyDown","onBlur","onFocus","transition","transitionDuration","initiallyOpened","transitionTimingFunction","unstyled","classNames","styles","filter","maxDropdownHeight","searchable","clearable","nothingFound","clearButtonLabel","limit","disabled","onSearchChange","searchValue","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","selectOnBlur","onCreate","dropdownComponent","onDropdownClose","onDropdownOpen","withinPortal","switchDirectionOnFlip","zIndex","name","dropdownPosition","allowDeselect","placeholder","filterDataOnExactSearchMatch","clearButtonTabIndex","form","positionDependencies","readOnly"]),{classes:Me,cx:Ut,theme:Qe}=rft(),[je,wt]=A.useState(g),[et,ct]=A.useState(-1),ft=A.useRef(),jt=A.useRef({}),[Dn,he]=A.useState("column"),_e=Dn==="column",{scrollIntoView:ke,targetRef:it,scrollableRef:Ye}=mxe({duration:0,offset:5,cancelable:!1,isList:!0}),ut=le===void 0?S:le,tt=Ce=>{if(je!==Ce){wt(Ce);const dt=Ce?M:H;typeof dt=="function"&&dt()}},_t=V&&typeof j=="function";let In=null;const Wt=o.map(Ce=>typeof Ce=="string"?{label:Ce,value:Ce}:Ce),Vt=$Ee({data:Wt}),[hr,Yn,ku]=Ta({value:a,defaultValue:u,finalValue:null,onChange:l}),Mr=Vt.find(Ce=>Ce.value===hr),[ls,ti]=Ta({value:$,defaultValue:(Mr==null?void 0:Mr.label)||"",finalValue:void 0,onChange:N}),Ei=Ce=>{ti(Ce),x&&typeof N=="function"&&N(Ce)},qr=()=>{var Ce;Re||(Yn(null),ku||Ei(""),(Ce=ft.current)==null||Ce.focus())};A.useEffect(()=>{const Ce=Vt.find(dt=>dt.value===hr);Ce?Ei(Ce.label):(!_t||!hr)&&Ei("")},[hr]),A.useEffect(()=>{Mr&&(!x||!je)&&Ei(Mr.label)},[Mr==null?void 0:Mr.label]);const yr=Ce=>{if(!Re)if(ut&&(Mr==null?void 0:Mr.value)===Ce.value)Yn(null),tt(!1);else{if(Ce.creatable&&typeof P=="function"){const dt=P(Ce.value);typeof dt<"u"&&dt!==null&&Yn(typeof dt=="string"?dt:dt.value)}else Yn(Ce.value);ku||Ei(Ce.label),ct(-1),tt(!1),ft.current.focus()}},yt=tft({data:Vt,searchable:x,limit:O,searchValue:ls,filter:E,filterDataOnExactSearchMatch:ue,value:hr});_t&&G(ls,yt)&&(In=j(ls),yt.push({label:ls,value:ls,creatable:!0}));const Fr=(Ce,dt,Bt)=>{let St=Ce;for(;Bt(St);)if(St=dt(St),!yt[St].disabled)return St;return Ce};bs(()=>{ct(-1)},[ls]);const xi=hr?yt.findIndex(Ce=>Ce.value===hr):0,Yi=!Re&&(yt.length>0?je:je&&!!I),Js=()=>{ct(Ce=>{var dt;const Bt=Fr(Ce,St=>St-1,St=>St>0);return it.current=jt.current[(dt=yt[Bt])==null?void 0:dt.value],Yi&&ke({alignment:_e?"start":"end"}),Bt})},Ma=()=>{ct(Ce=>{var dt;const Bt=Fr(Ce,St=>St+1,St=>St<yt.length-1);return it.current=jt.current[(dt=yt[Bt])==null?void 0:dt.value],Yi&&ke({alignment:_e?"end":"start"}),Bt})},ne=()=>window.setTimeout(()=>{var Ce;it.current=jt.current[(Ce=yt[xi])==null?void 0:Ce.value],ke({alignment:_e?"end":"start"})},0);bs(()=>{Yi&&ne()},[Yi]);const Q=Ce=>{switch(typeof f=="function"&&f(Ce),Ce.key){case"ArrowUp":{Ce.preventDefault(),je?_e?Js():Ma():(ct(xi),tt(!0),ne());break}case"ArrowDown":{Ce.preventDefault(),je?_e?Ma():Js():(ct(xi),tt(!0),ne());break}case"Home":{if(!x){Ce.preventDefault(),je||tt(!0);const dt=yt.findIndex(Bt=>!Bt.disabled);ct(dt),Yi&&ke({alignment:_e?"end":"start"})}break}case"End":{if(!x){Ce.preventDefault(),je||tt(!0);const dt=yt.map(Bt=>!!Bt.disabled).lastIndexOf(!1);ct(dt),Yi&&ke({alignment:_e?"end":"start"})}break}case"Escape":{Ce.preventDefault(),tt(!1),ct(-1);break}case" ":{x||(Ce.preventDefault(),yt[et]&&je?yr(yt[et]):(tt(!0),ct(xi),ne()));break}case"Enter":x||Ce.preventDefault(),yt[et]&&je&&(Ce.preventDefault(),yr(yt[et]))}},ie=Ce=>{typeof d=="function"&&d(Ce);const dt=Vt.find(Bt=>Bt.value===hr);U&&yt[et]&&je&&yr(yt[et]),Ei((dt==null?void 0:dt.label)||""),tt(!1)},ve=Ce=>{typeof h=="function"&&h(Ce),x&&tt(!0)},ye=Ce=>{Re||(Ei(Ce.currentTarget.value),S&&Ce.currentTarget.value===""&&Yn(null),ct(-1),tt(!0))},mt=()=>{Re||(tt(!je),hr&&!je&&ct(xi))};return L.createElement(is.Wrapper,b9(Xx({},i),{__staticSelector:"Select"}),L.createElement(bg,{opened:Yi,transition:p,transitionDuration:m,shadow:"sm",withinPortal:F,__staticSelector:"Select",onDirectionChange:he,switchDirectionOnFlip:J,zIndex:se,dropdownPosition:ce,positionDependencies:Ge,classNames:_,styles:b,unstyled:v},L.createElement(bg.Target,null,L.createElement("div",{role:"combobox","aria-haspopup":"listbox","aria-owns":Yi?`${r.id}-items`:null,"aria-controls":r.id,"aria-expanded":Yi,onMouseLeave:()=>ct(-1),tabIndex:-1},L.createElement("input",{type:"hidden",name:ae,value:hr||"",form:$e,disabled:z}),L.createElement(is,Xx(b9(Xx(Xx({autoComplete:"off",type:"search"},r),Oe),{ref:As(t,ft),onKeyDown:Q,__staticSelector:"Select",value:ls,placeholder:ge,onChange:ye,"aria-autocomplete":"list","aria-controls":Yi?`${r.id}-items`:null,"aria-activedescendant":et>=0?`${r.id}-${et}`:null,onMouseDown:mt,onBlur:ie,onFocus:ve,readOnly:!x||Re,disabled:z,"data-mantine-stop-propagation":Yi,name:null,classNames:b9(Xx({},_),{input:Ut({[Me.input]:!x},_==null?void 0:_.input)})}),xAe({theme:Qe,rightSection:D,rightSectionWidth:B,styles:b,size:r.size,shouldClear:S&&!!Mr,clearButtonLabel:C,onClear:qr,error:i.error,clearButtonTabIndex:Fe,disabled:z,readOnly:Re}))))),L.createElement(bg.Dropdown,{component:k||s6,maxHeight:w,direction:Dn,id:r.id,innerRef:Ye,__staticSelector:"Select",classNames:_,styles:b},L.createElement(BG,{data:yt,hovered:et,classNames:_,styles:b,isItemSelected:Ce=>Ce===hr,uuid:r.id,__staticSelector:"Select",onItemHover:ct,onItemSelect:yr,itemsRefs:jt,itemComponent:c,size:r.size,nothingFound:I,creatable:_t&&!!In,createLabel:In,"aria-label":i.label,unstyled:v}))))});aCe.displayName="@mantine/core/Select";function ZN({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function Xz({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}var fft=Object.defineProperty,dft=Object.defineProperties,hft=Object.getOwnPropertyDescriptors,Qle=Object.getOwnPropertySymbols,pft=Object.prototype.hasOwnProperty,mft=Object.prototype.propertyIsEnumerable,Jle=(e,t,n)=>t in e?fft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gft=(e,t)=>{for(var n in t||(t={}))pft.call(t,n)&&Jle(e,n,t[n]);if(Qle)for(var n of Qle(t))mft.call(t,n)&&Jle(e,n,t[n]);return e},yft=(e,t)=>dft(e,hft(t));const Za={xs:4,sm:6,md:8,lg:10,xl:12};var vft=pt((e,{size:t,disabled:n})=>({root:yft(gft({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",outline:0,height:e.fn.size({sizes:Za,size:t})*2,display:"flex",alignItems:"center",cursor:n?"not-allowed":"pointer",touchAction:"none"})}));const _ft=vft;var bft=Object.defineProperty,wft=Object.defineProperties,Eft=Object.getOwnPropertyDescriptors,Zle=Object.getOwnPropertySymbols,xft=Object.prototype.hasOwnProperty,Sft=Object.prototype.propertyIsEnumerable,ece=(e,t,n)=>t in e?bft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tft=(e,t)=>{for(var n in t||(t={}))xft.call(t,n)&&ece(e,n,t[n]);if(Zle)for(var n of Zle(t))Sft.call(t,n)&&ece(e,n,t[n]);return e},Aft=(e,t)=>wft(e,Eft(t)),Cft=pt((e,{color:t,size:n,disabled:r,thumbSize:i})=>({label:{position:"absolute",top:-36,backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[9],fontSize:e.fontSizes.xs,color:e.white,padding:`calc(${e.spacing.xs}px / 2)`,borderRadius:e.radius.sm,whiteSpace:"nowrap",pointerEvents:"none",userSelect:"none",touchAction:"none"},thumb:Aft(Tft({},e.fn.focusStyles()),{boxSizing:"border-box",position:"absolute",display:r?"none":"flex",height:i||e.fn.size({sizes:Za,size:n})*2,width:i||e.fn.size({sizes:Za,size:n})*2,backgroundColor:e.colorScheme==="dark"?e.fn.themeColor(t,e.fn.primaryShade()):e.white,border:`4px solid ${e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade())}`,color:e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade()),transform:"translate(-50%, -50%)",top:"50%",cursor:"pointer",borderRadius:1e3,alignItems:"center",justifyContent:"center",transitionDuration:"100ms",transitionProperty:"box-shadow, transform",transitionTimingFunction:e.transitionTimingFunction,zIndex:3,userSelect:"none",touchAction:"none"}),dragging:{transform:"translate(-50%, -50%) scale(1.05)",boxShadow:e.shadows.sm}}));const Ift=Cft,eD=A.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,color:a,classNames:u,styles:l,size:c,labelTransition:f,labelTransitionDuration:d,labelTransitionTimingFunction:h,labelAlwaysOn:p,thumbLabel:m,onFocus:g,onBlur:y,showLabelOnHover:v,children:_=null,disabled:b,unstyled:E,thumbSize:w},x)=>{const{classes:S,cx:I,theme:C}=Ift({color:a,size:c,disabled:b,thumbSize:w},{classNames:u,styles:l,unstyled:E,name:"Slider"}),[O,z]=A.useState(!1),N=p||s||O||v;return L.createElement(At,{tabIndex:0,role:"slider","aria-label":m,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:x,className:I(S.thumb,{[S.dragging]:s}),onFocus:()=>{z(!0),typeof g=="function"&&g()},onBlur:()=>{z(!1),typeof y=="function"&&y()},onTouchStart:o,onMouseDown:o,onClick:$=>$.stopPropagation(),style:{[C.dir==="rtl"?"right":"left"]:`${r}%`}},_,L.createElement(UC,{mounted:i!=null&&N,duration:d,transition:f,timingFunction:h||C.transitionTimingFunction},$=>L.createElement("div",{style:$,className:S.label},i)))});eD.displayName="@mantine/core/SliderThumb";function Oft({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}var Pft=pt((e,{size:t,color:n,disabled:r})=>({markWrapper:{position:"absolute",top:0,zIndex:2},mark:{boxSizing:"border-box",border:`${e.fn.size({size:t,sizes:Za})>=8?"2px":"1px"} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,height:e.fn.size({sizes:Za,size:t}),width:e.fn.size({sizes:Za,size:t}),borderRadius:1e3,transform:`translateX(-${e.fn.size({sizes:Za,size:t})/2}px)`,backgroundColor:e.white},markFilled:{borderColor:r?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:n}).background},markLabel:{transform:"translate(-50%, 0)",fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],marginTop:`calc(${e.spacing.xs}px / 2)`,whiteSpace:"nowrap"}}));const kft=Pft;function uCe({marks:e,color:t,size:n,min:r,max:i,value:s,classNames:o,styles:a,offset:u,onChange:l,disabled:c,unstyled:f,inverted:d}){const{classes:h,cx:p}=kft({size:n,color:t,disabled:c},{classNames:o,styles:a,unstyled:f,name:"Slider"}),m=e.map((g,y)=>L.createElement(At,{className:h.markWrapper,sx:{left:`${ZN({value:g.value,min:r,max:i})}%`},key:y},L.createElement("div",{className:p(h.mark,{[h.markFilled]:Oft({mark:g,value:s,offset:u,inverted:d})})}),g.label&&L.createElement("div",{className:h.markLabel,onMouseDown:v=>{v.stopPropagation(),l(g.value)},onTouchStart:v=>{v.stopPropagation(),l(g.value)}},g.label)));return L.createElement("div",null,m)}uCe.displayName="@mantine/core/SliderMarks";var $ft=pt((e,{radius:t,size:n,color:r,disabled:i,inverted:s})=>({track:{position:"relative",height:e.fn.size({sizes:Za,size:n}),width:"100%",marginRight:e.fn.size({size:n,sizes:Za}),marginLeft:e.fn.size({size:n,sizes:Za}),"&::before":{content:'""',position:"absolute",top:0,bottom:0,borderRadius:e.fn.size({size:t,sizes:e.radius}),right:-e.fn.size({size:n,sizes:Za}),left:-e.fn.size({size:n,sizes:Za}),backgroundColor:s?i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],zIndex:0}},bar:{position:"absolute",zIndex:1,top:0,bottom:0,backgroundColor:s?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]:i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background,borderRadius:e.fn.size({size:t,sizes:e.radius})}}));const Rft=$ft;var Nft=Object.defineProperty,Dft=Object.defineProperties,Lft=Object.getOwnPropertyDescriptors,tD=Object.getOwnPropertySymbols,lCe=Object.prototype.hasOwnProperty,cCe=Object.prototype.propertyIsEnumerable,tce=(e,t,n)=>t in e?Nft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mft=(e,t)=>{for(var n in t||(t={}))lCe.call(t,n)&&tce(e,n,t[n]);if(tD)for(var n of tD(t))cCe.call(t,n)&&tce(e,n,t[n]);return e},Fft=(e,t)=>Dft(e,Lft(t)),Bft=(e,t)=>{var n={};for(var r in e)lCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tD)for(var r of tD(e))t.indexOf(r)<0&&cCe.call(e,r)&&(n[r]=e[r]);return n};function sY(e){var t=e,{filled:n,size:r,color:i,classNames:s,styles:o,radius:a,children:u,offset:l,onMouseLeave:c,onMouseEnter:f,disabled:d,marksOffset:h,unstyled:p,inverted:m}=t,g=Bft(t,["filled","size","color","classNames","styles","radius","children","offset","onMouseLeave","onMouseEnter","disabled","marksOffset","unstyled","inverted"]);const{classes:y}=Rft({color:i,size:r,radius:a,disabled:d,inverted:m},{classNames:s,styles:o,unstyled:p,name:"Slider"});return L.createElement("div",{className:y.track,onMouseLeave:c,onMouseEnter:f},L.createElement(At,{className:y.bar,sx:v=>({left:`calc(${l}% - ${v.fn.size({size:r,sizes:Za})}px)`,width:`calc(${n}% + ${v.fn.size({size:r,sizes:Za})}px)`})}),u,L.createElement(uCe,Fft(Mft({},g),{size:r,color:i,offset:h,classNames:s,styles:o,disabled:d,unstyled:p,inverted:m})))}sY.displayName="@mantine/core/SliderTrack";var jft=Object.defineProperty,zft=Object.defineProperties,Uft=Object.getOwnPropertyDescriptors,nD=Object.getOwnPropertySymbols,fCe=Object.prototype.hasOwnProperty,dCe=Object.prototype.propertyIsEnumerable,nce=(e,t,n)=>t in e?jft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vft=(e,t)=>{for(var n in t||(t={}))fCe.call(t,n)&&nce(e,n,t[n]);if(nD)for(var n of nD(t))dCe.call(t,n)&&nce(e,n,t[n]);return e},Hft=(e,t)=>zft(e,Uft(t)),qft=(e,t)=>{var n={};for(var r in e)fCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nD)for(var r of nD(e))t.indexOf(r)<0&&dCe.call(e,r)&&(n[r]=e[r]);return n};const oY=A.forwardRef((e,t)=>{var n=e,{className:r,size:i,classNames:s,styles:o,disabled:a,unstyled:u}=n,l=qft(n,["className","size","classNames","styles","disabled","unstyled"]);const{classes:c,cx:f}=_ft({size:i,disabled:a},{classNames:s,styles:o,unstyled:u,name:"Slider"});return L.createElement(At,Hft(Vft({},l),{tabIndex:-1,className:f(c.root,r),ref:t}))});oY.displayName="@mantine/core/SliderRoot";var Wft=Object.defineProperty,Gft=Object.defineProperties,Yft=Object.getOwnPropertyDescriptors,rD=Object.getOwnPropertySymbols,hCe=Object.prototype.hasOwnProperty,pCe=Object.prototype.propertyIsEnumerable,rce=(e,t,n)=>t in e?Wft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kft=(e,t)=>{for(var n in t||(t={}))hCe.call(t,n)&&rce(e,n,t[n]);if(rD)for(var n of rD(t))pCe.call(t,n)&&rce(e,n,t[n]);return e},Xft=(e,t)=>Gft(e,Yft(t)),Qft=(e,t)=>{var n={};for(var r in e)hCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rD)for(var r of rD(e))t.indexOf(r)<0&&pCe.call(e,r)&&(n[r]=e[r]);return n};const Jft={size:"md",radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},aY=A.forwardRef((e,t)=>{const n=Ct("Slider",Jft,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransition:_,labelTransitionDuration:b,labelTransitionTimingFunction:E,labelAlwaysOn:w,thumbLabel:x,showLabelOnHover:S,thumbChildren:I,disabled:C,unstyled:O,thumbSize:z,scale:N,inverted:$}=n,D=Qft(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),B=us(),[V,j]=A.useState(!1),[G,U]=Ta({value:typeof o=="number"?ef(o,f,d):o,defaultValue:typeof m=="number"?ef(m,f,d):m,finalValue:ef(0,f,d),onChange:a}),P=A.useRef(G),k=A.useRef(),H=ZN({value:G,min:f,max:d}),M=N(G),F=typeof v=="function"?v(M):v,J=A.useCallback(({x:ge})=>{if(!C){const ue=Xz({value:ge,min:f,max:d,step:h,precision:p});U(ue),P.current=ue}},[C,f,d,h,p]),{ref:se,active:ae}=pxe(J,{onScrubEnd:()=>u==null?void 0:u(P.current)},B.dir),ce=ge=>{ge.stopPropagation()},le=ge=>{if(!C)switch(ge.key){case"ArrowUp":{ge.preventDefault(),k.current.focus();const ue=Math.min(Math.max(G+h,f),d);u==null||u(ue),U(ue);break}case"ArrowRight":{ge.preventDefault(),k.current.focus();const ue=Math.min(Math.max(B.dir==="rtl"?G-h:G+h,f),d);u==null||u(ue),U(ue);break}case"ArrowDown":{ge.preventDefault(),k.current.focus();const ue=Math.min(Math.max(G-h,f),d);u==null||u(ue),U(ue);break}case"ArrowLeft":{ge.preventDefault(),k.current.focus();const ue=Math.min(Math.max(B.dir==="rtl"?G+h:G-h,f),d);u==null||u(ue),U(ue);break}case"Home":{ge.preventDefault(),k.current.focus(),u==null||u(f),U(f);break}case"End":{ge.preventDefault(),k.current.focus(),u==null||u(d),U(d);break}}};return L.createElement(oY,Xft(Kft({},D),{size:l,ref:As(se,t),onKeyDownCapture:le,onMouseDownCapture:()=>{var ge;return(ge=se.current)==null?void 0:ge.focus()},classNames:r,styles:i,disabled:C,unstyled:O}),L.createElement(sY,{inverted:$,offset:0,filled:H,marks:y,size:l,radius:c,color:s,min:f,max:d,value:M,onChange:U,onMouseEnter:S?()=>j(!0):void 0,onMouseLeave:S?()=>j(!1):void 0,classNames:r,styles:i,disabled:C,unstyled:O},L.createElement(eD,{max:d,min:f,value:M,position:H,dragging:ae,color:s,size:l,label:F,ref:k,onMouseDown:ce,labelTransition:_,labelTransitionDuration:b,labelTransitionTimingFunction:E,labelAlwaysOn:w,classNames:r,styles:i,thumbLabel:x,showLabelOnHover:S&&V,disabled:C,unstyled:O,thumbSize:z},I)),L.createElement("input",{type:"hidden",name:g,value:M}))});aY.displayName="@mantine/core/Slider";function Zft(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}var edt=Object.defineProperty,tdt=Object.defineProperties,ndt=Object.getOwnPropertyDescriptors,iD=Object.getOwnPropertySymbols,mCe=Object.prototype.hasOwnProperty,gCe=Object.prototype.propertyIsEnumerable,ice=(e,t,n)=>t in e?edt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w9=(e,t)=>{for(var n in t||(t={}))mCe.call(t,n)&&ice(e,n,t[n]);if(iD)for(var n of iD(t))gCe.call(t,n)&&ice(e,n,t[n]);return e},E9=(e,t)=>tdt(e,ndt(t)),rdt=(e,t)=>{var n={};for(var r in e)mCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iD)for(var r of iD(e))t.indexOf(r)<0&&gCe.call(e,r)&&(n[r]=e[r]);return n};const idt={size:"md",radius:"xl",min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbFromLabel:"",thumbToLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},Qz=A.forwardRef((e,t)=>{const n=Ct("RangeSlider",idt,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,minRange:h,step:p,precision:m,defaultValue:g,name:y,marks:v,label:_,labelTransition:b,labelTransitionDuration:E,labelTransitionTimingFunction:w,labelAlwaysOn:x,thumbFromLabel:S,thumbToLabel:I,showLabelOnHover:C,thumbChildren:O,disabled:z,unstyled:N,thumbSize:$,scale:D,inverted:B}=n,V=rdt(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","minRange","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbFromLabel","thumbToLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),j=us(),[G,U]=A.useState(-1),[P,k]=A.useState(!1),[H,M]=Ta({value:o,defaultValue:g,finalValue:[f,d],onChange:a}),F=A.useRef(H),J=A.useRef([]),se=A.useRef(void 0),ae=[ZN({value:H[0],min:f,max:d}),ZN({value:H[1],min:f,max:d})],ce=Qe=>{M(Qe),F.current=Qe};A.useEffect(()=>{Array.isArray(o)&&(F.current=o)},Array.isArray(o)?[o[0],o[1]]:[null,null]);const le=(Qe,je,wt)=>{const et=[...F.current];et[je]=Qe,je===0&&(Qe>et[1]-(h-1e-9)&&(et[1]=Math.min(Qe+h,d)),Qe>(d-(h-1e-9)||f)&&(et[je]=F.current[je])),je===1&&(Qe<et[0]+h&&(et[0]=Math.max(Qe-h,f)),Qe<et[0]+h&&(et[je]=F.current[je])),ce(et),wt&&(u==null||u(F.current))},ge=Qe=>{if(!z){const je=Xz({value:Qe,min:f,max:d,step:p,precision:m});le(je,se.current,!1)}},{ref:ue,active:Fe}=pxe(({x:Qe})=>ge(Qe),{onScrubEnd:()=>u==null?void 0:u(F.current)},j.dir);function $e(Qe,je){Qe.stopPropagation(),se.current=je}const Ge=Qe=>{ue.current.focus();const je=ue.current.getBoundingClientRect(),wt=Zft(Qe.nativeEvent),et=Xz({value:wt-je.left,max:d,min:f,step:p,containerWidth:je.width}),ct=Math.abs(H[0]-et)>Math.abs(H[1]-et)?1:0,ft=j.dir==="ltr"?ct:ct===1?0:1;se.current=ft},Re=()=>G!==1&&G!==0?(U(0),0):G,Oe=Qe=>{if(!z)switch(Qe.key){case"ArrowUp":{Qe.preventDefault();const je=Re();J.current[je].focus(),le(Math.min(Math.max(F.current[je]+p,f),d),je,!0);break}case"ArrowRight":{Qe.preventDefault();const je=Re();J.current[je].focus(),le(Math.min(Math.max(j.dir==="rtl"?F.current[je]-p:F.current[je]+p,f),d),je,!0);break}case"ArrowDown":{Qe.preventDefault();const je=Re();J.current[je].focus(),le(Math.min(Math.max(F.current[je]-p,f),d),je,!0);break}case"ArrowLeft":{Qe.preventDefault();const je=Re();J.current[je].focus(),le(Math.min(Math.max(j.dir==="rtl"?F.current[je]+p:F.current[je]-p,f),d),je,!0);break}}},Me={max:d,min:f,color:s,size:l,labelTransition:b,labelTransitionDuration:E,labelTransitionTimingFunction:w,labelAlwaysOn:x,onBlur:()=>U(-1),classNames:r,styles:i},Ut=Array.isArray(O);return L.createElement(oY,E9(w9({},V),{size:l,ref:As(ue,t),onTouchStartCapture:Ge,onTouchEndCapture:()=>{se.current=-1},onMouseDownCapture:Ge,onMouseUpCapture:()=>{se.current=-1},onKeyDownCapture:Oe,styles:i,classNames:r,disabled:z,unstyled:N}),L.createElement(sY,{offset:ae[0],marksOffset:H[0],filled:ae[1]-ae[0],marks:v,inverted:B,size:l,radius:c,color:s,min:f,max:d,value:H[1],styles:i,classNames:r,onMouseEnter:C?()=>k(!0):void 0,onMouseLeave:C?()=>k(!1):void 0,onChange:Qe=>{const je=Math.abs(H[0]-Qe)>Math.abs(H[1]-Qe)?1:0,wt=[...H];wt[je]=Qe,ce(wt)},disabled:z,unstyled:N},L.createElement(eD,E9(w9({},Me),{value:D(H[0]),position:ae[0],dragging:Fe,label:typeof _=="function"?_(D(H[0])):_,ref:Qe=>{J.current[0]=Qe},thumbLabel:S,onMouseDown:Qe=>$e(Qe,0),onFocus:()=>U(0),showLabelOnHover:C&&P,disabled:z,unstyled:N,thumbSize:$}),Ut?O[0]:O),L.createElement(eD,E9(w9({},Me),{thumbLabel:I,value:D(H[1]),position:ae[1],dragging:Fe,label:typeof _=="function"?_(D(H[1])):_,ref:Qe=>{J.current[1]=Qe},onMouseDown:Qe=>$e(Qe,1),onFocus:()=>U(1),showLabelOnHover:C&&P,disabled:z,unstyled:N,thumbSize:$}),Ut?O[1]:O)),L.createElement("input",{type:"hidden",name:`${y}_from`,value:H[0]}),L.createElement("input",{type:"hidden",name:`${y}_to`,value:H[1]}))});Qz.displayName="@mantine/core/RangeSlider";var sdt=Object.defineProperty,sD=Object.getOwnPropertySymbols,yCe=Object.prototype.hasOwnProperty,vCe=Object.prototype.propertyIsEnumerable,sce=(e,t,n)=>t in e?sdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,odt=(e,t)=>{for(var n in t||(t={}))yCe.call(t,n)&&sce(e,n,t[n]);if(sD)for(var n of sD(t))vCe.call(t,n)&&sce(e,n,t[n]);return e},adt=(e,t)=>{var n={};for(var r in e)yCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&sD)for(var r of sD(e))t.indexOf(r)<0&&vCe.call(e,r)&&(n[r]=e[r]);return n};const udt={w:0,h:0},iA=A.forwardRef((e,t)=>{const n=Ct("Space",udt,e),{w:r,h:i,sx:s}=n,o=adt(n,["w","h","sx"]);return L.createElement(At,odt({ref:t,sx:[a=>{const u=a.fn.size({size:r,sizes:a.spacing}),l=a.fn.size({size:i,sizes:a.spacing});return{width:u,height:l,minWidth:u,minHeight:l}},...N1(s)]},o))});iA.displayName="@mantine/core/Space";var ldt=Object.defineProperty,cdt=Object.defineProperties,fdt=Object.getOwnPropertyDescriptors,oce=Object.getOwnPropertySymbols,ddt=Object.prototype.hasOwnProperty,hdt=Object.prototype.propertyIsEnumerable,ace=(e,t,n)=>t in e?ldt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pdt=(e,t)=>{for(var n in t||(t={}))ddt.call(t,n)&&ace(e,n,t[n]);if(oce)for(var n of oce(t))hdt.call(t,n)&&ace(e,n,t[n]);return e},mdt=(e,t)=>cdt(e,fdt(t));function gdt(e,t,n){return typeof e<"u"?e in n.headings.sizes?n.headings.sizes[e].fontSize:e:n.headings.sizes[t].fontSize}function ydt(e,t,n){return typeof e<"u"&&e in n.headings.sizes?n.headings.sizes[e].lineHeight:n.headings.sizes[t].lineHeight}var vdt=pt((e,{element:t,weight:n,size:r,inline:i})=>({root:mdt(pdt({},e.fn.fontStyles()),{fontFamily:e.headings.fontFamily,fontWeight:n||e.headings.sizes[t].fontWeight||e.headings.fontWeight,fontSize:gdt(r,t,e),lineHeight:i?1:ydt(r,t,e),margin:0})}));const _dt=vdt;var bdt=Object.defineProperty,oD=Object.getOwnPropertySymbols,_Ce=Object.prototype.hasOwnProperty,bCe=Object.prototype.propertyIsEnumerable,uce=(e,t,n)=>t in e?bdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wdt=(e,t)=>{for(var n in t||(t={}))_Ce.call(t,n)&&uce(e,n,t[n]);if(oD)for(var n of oD(t))bCe.call(t,n)&&uce(e,n,t[n]);return e},Edt=(e,t)=>{var n={};for(var r in e)_Ce.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oD)for(var r of oD(e))t.indexOf(r)<0&&bCe.call(e,r)&&(n[r]=e[r]);return n};const xdt={order:1},Lc=A.forwardRef((e,t)=>{const n=Ct("Title",xdt,e),{className:r,order:i,children:s,unstyled:o,size:a,weight:u,inline:l}=n,c=Edt(n,["className","order","children","unstyled","size","weight","inline"]),{classes:f,cx:d}=_dt({element:`h${i}`,weight:u,size:a,inline:l},{name:"Title",unstyled:o});return[1,2,3,4,5,6].includes(i)?L.createElement(Rt,wdt({component:`h${i}`,ref:t,className:d(f.root,r)},c),s):null});Lc.displayName="@mantine/core/Title";function uY(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const vf="/Surprise_Map_Recreation/",Sdt="https://github.com/revisit-studies/study/tree/main/public/";function Tdt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Ev();return R.jsxs(u6,{size:"xs",px:"xs",style:{marginTop:100,marginBottom:100},children:[R.jsx(IE,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${vf}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),R.jsx(Rt,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=uY(i);return R.jsx(xv,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:R.jsxs(QTe,{shadow:"sm",radius:"md",withBorder:!0,children:[R.jsx(Rt,{fw:"bold",children:s.studyMetadata.title}),R.jsxs(Rt,{c:"dimmed",children:["Authors:",s.studyMetadata.authors]}),R.jsx(Rt,{c:"dimmed",children:s.studyMetadata.description}),R.jsx(Rt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:R.jsxs(tSe,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${Sdt}${o}`,children:["View source:"," ",o]})})]})},i)})]})}var wCe={exports:{}},ECe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw=A;function Adt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cdt=typeof Object.is=="function"?Object.is:Adt,Idt=mw.useState,Odt=mw.useEffect,Pdt=mw.useLayoutEffect,kdt=mw.useDebugValue;function $dt(e,t){var n=t(),r=Idt({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return Pdt(function(){i.value=n,i.getSnapshot=t,x9(i)&&s({inst:i})},[e,n,t]),Odt(function(){return x9(i)&&s({inst:i}),e(function(){x9(i)&&s({inst:i})})},[e]),kdt(n),n}function x9(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Cdt(e,n)}catch{return!0}}function Rdt(e,t){return t()}var Ndt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Rdt:$dt;ECe.useSyncExternalStore=mw.useSyncExternalStore!==void 0?mw.useSyncExternalStore:Ndt;wCe.exports=ECe;var Ddt=wCe.exports,xCe={exports:{}},SCe={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c6=A,Ldt=Ddt;function Mdt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fdt=typeof Object.is=="function"?Object.is:Mdt,Bdt=Ldt.useSyncExternalStore,jdt=c6.useRef,zdt=c6.useEffect,Udt=c6.useMemo,Vdt=c6.useDebugValue;SCe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=jdt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Udt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Fdt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Bdt(e,s[0],s[1]);return zdt(function(){o.hasValue=!0,o.value=a},[a]),Vdt(a),a};xCe.exports=SCe;var Hdt=xCe.exports;function qdt(e){e()}let TCe=qdt;const Wdt=e=>TCe=e,Gdt=()=>TCe,Vg=A.createContext(null);function ACe(){return A.useContext(Vg)}const Ydt=()=>{throw new Error("uSES not initialized!")};let CCe=Ydt;const Kdt=e=>{CCe=e},Xdt=(e,t)=>e===t;function Qdt(e=Vg){const t=e===Vg?ACe:()=>A.useContext(e);return function(r,i=Xdt){const{store:s,subscription:o,getServerState:a}=t(),u=CCe(o.addNestedSub,s.getState,a||s.getState,r,i);return A.useDebugValue(u),u}}const Jdt=Qdt();var kr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lY=Symbol.for("react.element"),cY=Symbol.for("react.portal"),f6=Symbol.for("react.fragment"),d6=Symbol.for("react.strict_mode"),h6=Symbol.for("react.profiler"),p6=Symbol.for("react.provider"),m6=Symbol.for("react.context"),Zdt=Symbol.for("react.server_context"),g6=Symbol.for("react.forward_ref"),y6=Symbol.for("react.suspense"),v6=Symbol.for("react.suspense_list"),_6=Symbol.for("react.memo"),b6=Symbol.for("react.lazy"),eht=Symbol.for("react.offscreen"),ICe;ICe=Symbol.for("react.module.reference");function uc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case lY:switch(e=e.type,e){case f6:case h6:case d6:case y6:case v6:return e;default:switch(e=e&&e.$$typeof,e){case Zdt:case m6:case g6:case b6:case _6:case p6:return e;default:return t}}case cY:return t}}}kr.ContextConsumer=m6;kr.ContextProvider=p6;kr.Element=lY;kr.ForwardRef=g6;kr.Fragment=f6;kr.Lazy=b6;kr.Memo=_6;kr.Portal=cY;kr.Profiler=h6;kr.StrictMode=d6;kr.Suspense=y6;kr.SuspenseList=v6;kr.isAsyncMode=function(){return!1};kr.isConcurrentMode=function(){return!1};kr.isContextConsumer=function(e){return uc(e)===m6};kr.isContextProvider=function(e){return uc(e)===p6};kr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===lY};kr.isForwardRef=function(e){return uc(e)===g6};kr.isFragment=function(e){return uc(e)===f6};kr.isLazy=function(e){return uc(e)===b6};kr.isMemo=function(e){return uc(e)===_6};kr.isPortal=function(e){return uc(e)===cY};kr.isProfiler=function(e){return uc(e)===h6};kr.isStrictMode=function(e){return uc(e)===d6};kr.isSuspense=function(e){return uc(e)===y6};kr.isSuspenseList=function(e){return uc(e)===v6};kr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===f6||e===h6||e===d6||e===y6||e===v6||e===eht||typeof e=="object"&&e!==null&&(e.$$typeof===b6||e.$$typeof===_6||e.$$typeof===p6||e.$$typeof===m6||e.$$typeof===g6||e.$$typeof===ICe||e.getModuleId!==void 0)};kr.typeOf=uc;function tht(){const e=Gdt();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:t=s,function(){!i||t===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}const lce={notify(){},get:()=>[]};function nht(e,t){let n,r=lce;function i(f){return u(),r.subscribe(f)}function s(){r.notify()}function o(){c.onStateChange&&c.onStateChange()}function a(){return!!n}function u(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=tht())}function l(){n&&(n(),n=void 0,r.clear(),r=lce)}const c={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:u,tryUnsubscribe:l,getListeners:()=>r};return c}const rht=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iht=rht?A.useLayoutEffect:A.useEffect;function sht({store:e,context:t,children:n,serverState:r}){const i=A.useMemo(()=>{const a=nht(e);return{store:e,subscription:a,getServerState:r?()=>r:void 0}},[e,r]),s=A.useMemo(()=>e.getState(),[e]);iht(()=>{const{subscription:a}=i;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),s!==e.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[i,s]);const o=t||Vg;return L.createElement(o.Provider,{value:i},n)}function OCe(e=Vg){const t=e===Vg?ACe:()=>A.useContext(e);return function(){const{store:r}=t();return r}}const oht=OCe();function aht(e=Vg){const t=e===Vg?oht:OCe(e);return function(){return t().dispatch}}const PCe=aht();Kdt(Hdt.useSyncExternalStoreWithSelector);Wdt(wv.unstable_batchedUpdates);function w6(){const{studyId:e}=jM();return`${e}`}function lc(){const{index:e}=jM();return parseInt(e||"0",10)}function Bc(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Hg(e){return!!e&&!!e[li]}function Ap(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===ght}(e)||Array.isArray(e)||!!e[gce]||!!(!((t=e.constructor)===null||t===void 0)&&t[gce])||fY(e)||dY(e))}function D1(e,t,n){n===void 0&&(n=!1),OE(e)===0?(n?Object.keys:Cb)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function OE(e){var t=e[li];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:fY(e)?2:dY(e)?3:0}function Ab(e,t){return OE(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function uht(e,t){return OE(e)===2?e.get(t):e[t]}function kCe(e,t,n){var r=OE(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function $Ce(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function fY(e){return pht&&e instanceof Map}function dY(e){return mht&&e instanceof Set}function my(e){return e.o||e.t}function hY(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=NCe(e);delete t[li];for(var n=Cb(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function pY(e,t){return t===void 0&&(t=!1),mY(e)||Hg(e)||!Ap(e)||(OE(e)>1&&(e.set=e.add=e.clear=e.delete=lht),Object.freeze(e),t&&D1(e,function(n,r){return pY(r,!0)},!0)),e}function lht(){Bc(2)}function mY(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ed(e){var t=tU[e];return t||Bc(18,e),t}function cht(e,t){tU[e]||(tU[e]=t)}function Jz(){return sA}function S9(e,t){t&&(Ed("Patches"),e.u=[],e.s=[],e.v=t)}function aD(e){Zz(e),e.p.forEach(fht),e.p=null}function Zz(e){e===sA&&(sA=e.l)}function cce(e){return sA={p:[],l:sA,h:e,m:!0,_:0}}function fht(e){var t=e[li];t.i===0||t.i===1?t.j():t.O=!0}function T9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Ed("ES5").S(t,e,r),r?(n[li].P&&(aD(t),Bc(4)),Ap(e)&&(e=uD(t,e),t.l||lD(t,e)),t.u&&Ed("Patches").M(n[li].t,e,t.u,t.s)):e=uD(t,n,[]),aD(t),t.u&&t.v(t.u,t.s),e!==RCe?e:void 0}function uD(e,t,n){if(mY(t))return t;var r=t[li];if(!r)return D1(t,function(a,u){return fce(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return lD(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=hY(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),D1(s,function(a,u){return fce(e,r,i,a,u,n,o)}),lD(e,i,!1),n&&e.u&&Ed("Patches").N(r,n,e.u,e.s)}return r.o}function fce(e,t,n,r,i,s,o){if(Hg(i)){var a=uD(e,i,s&&t&&t.i!==3&&!Ab(t.R,r)?s.concat(r):void 0);if(kCe(n,r,a),!Hg(a))return;e.m=!1}else o&&n.add(i);if(Ap(i)&&!mY(i)){if(!e.h.D&&e._<1)return;uD(e,i),t&&t.A.l||lD(e,i)}}function lD(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&pY(t,n)}function A9(e,t){var n=e[li];return(n?my(n):e)[t]}function dce(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Bm(e){e.P||(e.P=!0,e.l&&Bm(e.l))}function C9(e){e.o||(e.o=hY(e.t))}function eU(e,t,n){var r=fY(t)?Ed("MapSet").F(t,n):dY(t)?Ed("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Jz(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=oA;o&&(u=[a],l=WS);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Ed("ES5").J(t,n);return(n?n.A:Jz()).p.push(r),r}function dht(e){return Hg(e)||Bc(22,e),function t(n){if(!Ap(n))return n;var r,i=n[li],s=OE(n);if(i){if(!i.P&&(i.i<4||!Ed("ES5").K(i)))return i.t;i.I=!0,r=hce(n,s),i.I=!1}else r=hce(n,s);return D1(r,function(o,a){i&&uht(i.t,o)===a||kCe(r,o,t(a))}),s===3?new Set(r):r}(e)}function hce(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return hY(e)}function hht(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[li];return oA.get(u,s)},set:function(u){var l=this[li];oA.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][li];if(!a.P)switch(a.i){case 5:r(a)&&Bm(a);break;case 4:n(a)&&Bm(a)}}}function n(s){for(var o=s.t,a=s.k,u=Cb(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==li){var f=o[c];if(f===void 0&&!Ab(o,c))return!0;var d=a[c],h=d&&d[li];if(h?h.t!==f:!$Ce(d,f))return!0}}var p=!!o[li];return u.length!==Cb(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};cht("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=NCe(f);delete p[li];for(var m=Cb(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:Jz(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,O:!1,C:!1};return Object.defineProperty(u,li,{value:l,writable:!0}),u},S:function(s,o,a){a?Hg(o)&&o[li].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[li];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)D1(d,function(_){_!==li&&(f[_]!==void 0||Ab(f,_)?h[_]||u(d[_]):(h[_]=!0,Bm(c)))}),D1(f,function(_){d[_]!==void 0||Ab(d,_)||(h[_]=!1,Bm(c))});else if(p===5){if(r(c)&&(Bm(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var pce,sA,gY=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",pht=typeof Map<"u",mht=typeof Set<"u",mce=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",RCe=gY?Symbol.for("immer-nothing"):((pce={})["immer-nothing"]=!0,pce),gce=gY?Symbol.for("immer-draftable"):"__$immer_draftable",li=gY?Symbol.for("immer-state"):"__$immer_state",ght=""+Object.prototype.constructor,Cb=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,NCe=Object.getOwnPropertyDescriptors||function(e){var t={};return Cb(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},tU={},oA={get:function(e,t){if(t===li)return e;var n=my(e);if(!Ab(n,t))return function(i,s,o){var a,u=dce(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Ap(r)?r:r===A9(e.t,t)?(C9(e),e.o[t]=eU(e.A.h,r,e)):r},has:function(e,t){return t in my(e)},ownKeys:function(e){return Reflect.ownKeys(my(e))},set:function(e,t,n){var r=dce(my(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=A9(my(e),t),s=i==null?void 0:i[li];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if($Ce(n,i)&&(n!==void 0||Ab(e.t,t)))return!0;C9(e),Bm(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return A9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,C9(e),Bm(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=my(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Bc(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Bc(12)}},WS={};D1(oA,function(e,t){WS[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),WS.deleteProperty=function(e,t){return WS.set.call(this,e,t,void 0)},WS.set=function(e,t,n){return oA.set.call(this,e[0],t,n,e[0])};var yht=function(){function e(n){var r=this;this.g=mce,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(b){var E;return(E=s).call.apply(E,[g,b].concat(v))})}}var l;if(typeof s!="function"&&Bc(6),o!==void 0&&typeof o!="function"&&Bc(7),Ap(i)){var c=cce(r),f=eU(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?aD(c):Zz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return S9(c,o),T9(m,c)},function(m){throw aD(c),m}):(S9(c,o),T9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===RCe&&(l=void 0),r.D&&pY(l,!0),o){var h=[],p=[];Ed("Patches").M(i,l,h,p),o(h,p)}return l}Bc(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Ap(n)||Bc(8),Hg(n)&&(n=dht(n));var r=cce(this),i=eU(this,n,void 0);return i[li].C=!0,Zz(r),i},t.finishDraft=function(n,r){var i=n&&n[li],s=i.A;return S9(s,r),T9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!mce&&Bc(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Ed("Patches").$;return Hg(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),il=new yht,DCe=il.produce;il.produceWithPatches.bind(il);il.setAutoFreeze.bind(il);il.setUseProxies.bind(il);il.applyPatches.bind(il);il.createDraft.bind(il);il.finishDraft.bind(il);function aA(e){"@babel/helpers - typeof";return aA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aA(e)}function vht(e,t){if(aA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(aA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _ht(e){var t=vht(e,"string");return aA(t)=="symbol"?t:String(t)}function bht(e,t,n){return t=_ht(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yce(Object(n),!0).forEach(function(r){bht(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yce(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mo(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var _ce=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),I9=function(){return Math.random().toString(36).substring(7).split("").join(".")},cD={INIT:"@@redux/INIT"+I9(),REPLACE:"@@redux/REPLACE"+I9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+I9()}};function wht(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function LCe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Mo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Mo(1));return n(LCe)(e,t)}if(typeof e!="function")throw new Error(Mo(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Mo(3));return s}function f(m){if(typeof m!="function")throw new Error(Mo(4));if(u)throw new Error(Mo(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Mo(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!wht(m))throw new Error(Mo(7));if(typeof m.type>"u")throw new Error(Mo(8));if(u)throw new Error(Mo(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(Mo(10));i=m,d({type:cD.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Mo(11));function _(){v.next&&v.next(c())}_();var b=g(_);return{unsubscribe:b}}},m[_ce]=function(){return this},m}return d({type:cD.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[_ce]=p,r}function Eht(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:cD.INIT});if(typeof r>"u")throw new Error(Mo(12));if(typeof n(void 0,{type:cD.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mo(13))})}function xht(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{Eht(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Mo(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function fD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Sht(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Mo(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=fD.apply(void 0,a)(i.dispatch),vce(vce({},i),{},{dispatch:s})}}}function MCe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var FCe=MCe();FCe.withExtraArgument=MCe;const bce=FCe;var Tht=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),HC=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},uA=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Aht=Object.defineProperty,Cht=Object.defineProperties,Iht=Object.getOwnPropertyDescriptors,wce=Object.getOwnPropertySymbols,Oht=Object.prototype.hasOwnProperty,Pht=Object.prototype.propertyIsEnumerable,Ece=function(e,t,n){return t in e?Aht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},wg=function(e,t){for(var n in t||(t={}))Oht.call(t,n)&&Ece(e,n,t[n]);if(wce)for(var r=0,i=wce(t);r<i.length;r++){var n=i[r];Pht.call(t,n)&&Ece(e,n,t[n])}return e},O9=function(e,t){return Cht(e,Iht(t))},qC=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},kht=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?fD:fD.apply(null,arguments)};function $ht(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var Rht=function(e){Tht(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,uA([void 0],n[0].concat(this)))):new(t.bind.apply(t,uA([void 0],n.concat(this))))},t}(Array);function nU(e){return Ap(e)?DCe(e,function(){}):e}function Nht(e){return typeof e=="boolean"}function Dht(){return function(t){return Lht(t)}}function Lht(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var r=new Rht;return n&&(Nht(n)?r.push(bce):r.push(bce.withExtraArgument(n.extraArgument))),r}var Mht=!0;function BCe(e){var t=Dht(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if($ht(i))h=xht(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=Sht.apply(void 0,p),g=fD;u&&(g=kht(wg({trace:!Mht},typeof u=="object"&&u)));var y=[m];Array.isArray(d)?y=uA([m],d):typeof d=="function"&&(y=d(y));var v=g.apply(void 0,y);return LCe(h,c,v)}function xd(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return wg(wg({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function jCe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function Fht(e){return typeof e=="function"}function Bht(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?jCe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(Fht(e))u=function(){return nU(e())};else{var l=nU(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=uA([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Hg(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Ap(p))return DCe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function jht(e,t){return e+"/"+t}function zCe(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:nU(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=jht(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?xd(d,p):xd(d)});function u(){var c=typeof e.extraReducers=="function"?jCe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=wg(wg({},d),o);return Bht(n,function(v){for(var _ in y)v.addCase(_,y[_]);for(var b=0,E=p;b<E.length;b++){var w=E[b];v.addMatcher(w.matcher,w.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var zht="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",UCe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=zht[Math.random()*64|0];return t},Uht=["name","message","stack","code"],P9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),xce=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Vht=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=Uht;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=xd(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:O9(wg({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=xd(t+"/pending",function(l,c,f){return{payload:void 0,meta:O9(wg({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=xd(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||Vht)(l||"Rejected"),meta:O9(wg({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):UCe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return qC(this,null,function(){var v,_,b,E,w,x,S;return HC(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),qht(E)?[4,E]:[3,2];case 1:E=I.sent(),I.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return w=new Promise(function(C,O){return p.signal.addEventListener("abort",function(){return O({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([w,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(C,O){return new P9(C,O)},fulfillWithValue:function(C,O){return new xce(C,O)}})).then(function(C){if(C instanceof P9)throw C;return C instanceof xce?i(C.payload,h,l,C.meta):i(C,h,l)})])];case 3:return b=I.sent(),[3,5];case 4:return x=I.sent(),b=x instanceof P9?o(null,h,l,x.payload,x.meta):o(x,h,l),[3,5];case 5:return S=r&&!r.dispatchConditionRejection&&o.match(b)&&b.meta.condition,S||c(b),[2,b]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(Hht)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function Hht(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function qht(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Wht=function(e){return e&&typeof e.match=="function"},Ght=function(e,t){return Wht(e)?e.match(t):e(t)};function Sce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return Ght(r,n)})}}var yY=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},rU=function(){},VCe=function(e,t){return t===void 0&&(t=rU),e.catch(t),e},HCe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Ib=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Yht="task",qCe="listener",WCe="completed",vY="cancelled",Kht="task-"+vY,Xht="task-"+WCe,GCe=qCe+"-"+vY,Qht=qCe+"-"+WCe,E6=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=Yht+" "+vY+" (reason: "+t+")"}return e}(),Ob=function(e){if(e.aborted)throw new E6(e.reason)};function YCe(e,t){var n=rU;return new Promise(function(r,i){var s=function(){return i(new E6(e.reason))};if(e.aborted){s();return}n=HCe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=rU})}var Jht=function(e,t){return qC(void 0,null,function(){var n,r;return HC(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof E6?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},dD=function(e){return function(t){return VCe(YCe(e,t).then(function(n){return Ob(e),n}))}},KCe=function(e){var t=dD(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},Zht=Object.assign,Tce={},WC="listenerMiddleware",ept=function(e){var t=function(n){return HCe(e,function(){return Ib(n,e.reason)})};return function(n){yY(n,"taskExecutor");var r=new AbortController;t(r);var i=Jht(function(){return qC(void 0,null,function(){var s;return HC(this,function(o){switch(o.label){case 0:return Ob(e),Ob(r.signal),[4,n({pause:dD(r.signal),delay:KCe(r.signal),signal:r.signal})];case 1:return s=o.sent(),Ob(r.signal),[2,s]}})})},function(){return Ib(r,Xht)});return{result:dD(e)(i),cancel:function(){Ib(r,Kht)}}}},tpt=function(e,t){var n=function(r,i){return qC(void 0,null,function(){var s,o,a,u;return HC(this,function(l){switch(l.label){case 0:Ob(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,YCe(t,Promise.race(a))];case 2:return u=l.sent(),Ob(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return VCe(n(r,i))}},XCe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=xd(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return yY(s,"options.listener"),{predicate:i,type:t,effect:s}},npt=function(e){var t=XCe(e),n=t.type,r=t.predicate,i=t.effect,s=UCe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},iU=function(e){e.pending.forEach(function(t){Ib(t,GCe)})},rpt=function(e){return function(){e.forEach(iU),e.clear()}},Ace=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},ipt=xd(WC+"/add"),spt=xd(WC+"/removeAll"),opt=xd(WC+"/remove"),apt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,uA([WC+"/error"],e))};function upt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?apt:i;yY(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&iU(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=npt(h)),o(p)},l=function(h){var p=XCe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(_){var b=typeof m=="string"?_.type===m:_.predicate===y;return b&&_.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&iU(v)),!!v},c=function(h,p,m,g){return qC(t,null,function(){var y,v,_;return HC(this,function(b){switch(b.label){case 0:y=new AbortController,v=tpt(u,y.signal),b.label=1;case 1:return b.trys.push([1,3,4,5]),h.pending.add(y),[4,Promise.resolve(h.effect(p,Zht({},m,{getOriginalState:g,condition:function(E,w){return v(E,w).then(Boolean)},take:v,delay:KCe(y.signal),pause:dD(y.signal),extra:r,signal:y.signal,fork:ept(y.signal),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(E,w,x){E!==y&&(Ib(E,GCe),x.delete(E))})}})))];case 2:return b.sent(),[3,5];case 3:return _=b.sent(),_ instanceof E6||Ace(s,_,{raisedBy:"effect"}),[3,5];case 4:return Ib(y,Qht),h.pending.delete(y),[7];case 5:return[2]}})})},f=rpt(n),d=function(h){return function(p){return function(m){if(ipt.match(m))return u(m.payload);if(spt.match(m)){f();return}if(opt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Tce)throw new Error(WC+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var _=h.getState(),b=Array.from(n.values()),E=0,w=b;E<w.length;E++){var x=w[E],S=!1;try{S=x.predicate(m,_,g)}catch(I){S=!1,Ace(s,I,{raisedBy:"predicate"})}S&&c(x,m,h,y)}}finally{g=Tce}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Cce;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);hht();function qg(e){return e.components.flatMap(t=>typeof t=="string"?t:qg(t))}async function lpt(e,t,n,r){const i=qg(n),s={...i.map(f=>({[f]:{}}))},o=Object.assign({},...i.map((f,d)=>({[`${f}_${d}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),a=Object.assign({},...i.map((f,d)=>({[`${f}_${d}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),u={studyId:e,answers:r||s,sequence:n,config:t,showAdmin:!1,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:r?a:o,iframeAnswers:[]},l=zCe({name:"storeSlice",initialState:u,reducers:{setConfig(f,d){f.config=d.payload},toggleShowAdmin:f=>{f.showAdmin=!f.showAdmin},toggleShowHelpText:f=>{f.showHelpText=!f.showHelpText},setAlertModal:(f,d)=>{f.alertModal=d.payload},setIframeAnswers:(f,d)=>{f.iframeAnswers=d.payload},updateResponseBlockValidation:(f,{payload:d})=>{f.trialValidation[d.identifier]||(f.trialValidation[d.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),f.trialValidation[d.identifier][d.location]={valid:d.status,values:d.values},d.provenanceGraph&&(f.trialValidation[d.identifier].provenanceGraph=d.provenanceGraph)},saveTrialAnswer(f,{payload:d}){const{identifier:h,answer:p,startTime:m,endTime:g,provenanceGraph:y,windowEvents:v}=d;f.answers[h]={answer:p,startTime:m,endTime:g,provenanceGraph:y,windowEvents:v}}}});return{store:BCe({reducer:l.reducer,preloadedState:u}),actions:l.actions}}const QCe=A.createContext(null);function Kp(){return A.useContext(QCe).actions}const Xp=PCe,_f=Jdt;function cpt(e){return _f(t=>{const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function rh(){return _f(e=>qg(e.sequence))}var hD={exports:{}};hD.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Proxy]",b="[object RegExp]",E="[object Set]",w="[object String]",x="[object Undefined]",S="[object WeakMap]",I="[object ArrayBuffer]",C="[object DataView]",O="[object Float32Array]",z="[object Float64Array]",N="[object Int8Array]",$="[object Int16Array]",D="[object Int32Array]",B="[object Uint8Array]",V="[object Uint8ClampedArray]",j="[object Uint16Array]",G="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,P=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,H={};H[O]=H[z]=H[N]=H[$]=H[D]=H[B]=H[V]=H[j]=H[G]=!0,H[a]=H[u]=H[I]=H[c]=H[C]=H[f]=H[d]=H[h]=H[m]=H[g]=H[v]=H[b]=H[E]=H[w]=H[S]=!1;var M=typeof nu=="object"&&nu&&nu.Object===Object&&nu,F=typeof self=="object"&&self&&self.Object===Object&&self,J=M||F||Function("return this")(),se=t&&!t.nodeType&&t,ae=se&&!0&&e&&!e.nodeType&&e,ce=ae&&ae.exports===se,le=ce&&M.process,ge=function(){try{var Z=ae&&ae.require&&ae.require("util").types;return Z||le&&le.binding&&le.binding("util")}catch{}}(),ue=ge&&ge.isTypedArray;function Fe(Z,de,be){switch(be.length){case 0:return Z.call(de);case 1:return Z.call(de,be[0]);case 2:return Z.call(de,be[0],be[1]);case 3:return Z.call(de,be[0],be[1],be[2])}return Z.apply(de,be)}function $e(Z,de){for(var be=-1,gt=Array(Z);++be<Z;)gt[be]=de(be);return gt}function Ge(Z){return function(de){return Z(de)}}function Re(Z,de){return Z==null?void 0:Z[de]}function Oe(Z,de){return function(be){return Z(de(be))}}var Me=Array.prototype,Ut=Function.prototype,Qe=Object.prototype,je=J["__core-js_shared__"],wt=Ut.toString,et=Qe.hasOwnProperty,ct=function(){var Z=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}(),ft=Qe.toString,jt=wt.call(Object),Dn=RegExp("^"+wt.call(et).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=ce?J.Buffer:void 0,_e=J.Symbol,ke=J.Uint8Array,it=he?he.allocUnsafe:void 0,Ye=Oe(Object.getPrototypeOf,Object),ut=Object.create,tt=Qe.propertyIsEnumerable,_t=Me.splice,In=_e?_e.toStringTag:void 0,Wt=function(){try{var Z=He(Object,"defineProperty");return Z({},"",{}),Z}catch{}}(),Vt=he?he.isBuffer:void 0,hr=Math.max,Yn=Date.now,ku=He(J,"Map"),Mr=He(Object,"create"),ls=function(){function Z(){}return function(de){if(!Z0(de))return{};if(ut)return ut(de);Z.prototype=de;var be=new Z;return Z.prototype=void 0,be}}();function ti(Z){var de=-1,be=Z==null?0:Z.length;for(this.clear();++de<be;){var gt=Z[de];this.set(gt[0],gt[1])}}function Ei(){this.__data__=Mr?Mr(null):{},this.size=0}function qr(Z){var de=this.has(Z)&&delete this.__data__[Z];return this.size-=de?1:0,de}function yr(Z){var de=this.__data__;if(Mr){var be=de[Z];return be===r?void 0:be}return et.call(de,Z)?de[Z]:void 0}function yt(Z){var de=this.__data__;return Mr?de[Z]!==void 0:et.call(de,Z)}function Fr(Z,de){var be=this.__data__;return this.size+=this.has(Z)?0:1,be[Z]=Mr&&de===void 0?r:de,this}ti.prototype.clear=Ei,ti.prototype.delete=qr,ti.prototype.get=yr,ti.prototype.has=yt,ti.prototype.set=Fr;function xi(Z){var de=-1,be=Z==null?0:Z.length;for(this.clear();++de<be;){var gt=Z[de];this.set(gt[0],gt[1])}}function Yi(){this.__data__=[],this.size=0}function Js(Z){var de=this.__data__,be=ni(de,Z);if(be<0)return!1;var gt=de.length-1;return be==gt?de.pop():_t.call(de,be,1),--this.size,!0}function Ma(Z){var de=this.__data__,be=ni(de,Z);return be<0?void 0:de[be][1]}function ne(Z){return ni(this.__data__,Z)>-1}function Q(Z,de){var be=this.__data__,gt=ni(be,Z);return gt<0?(++this.size,be.push([Z,de])):be[gt][1]=de,this}xi.prototype.clear=Yi,xi.prototype.delete=Js,xi.prototype.get=Ma,xi.prototype.has=ne,xi.prototype.set=Q;function ie(Z){var de=-1,be=Z==null?0:Z.length;for(this.clear();++de<be;){var gt=Z[de];this.set(gt[0],gt[1])}}function ve(){this.size=0,this.__data__={hash:new ti,map:new(ku||xi),string:new ti}}function ye(Z){var de=ze(this,Z).delete(Z);return this.size-=de?1:0,de}function mt(Z){return ze(this,Z).get(Z)}function Ce(Z){return ze(this,Z).has(Z)}function dt(Z,de){var be=ze(this,Z),gt=be.size;return be.set(Z,de),this.size+=be.size==gt?0:1,this}ie.prototype.clear=ve,ie.prototype.delete=ye,ie.prototype.get=mt,ie.prototype.has=Ce,ie.prototype.set=dt;function Bt(Z){var de=this.__data__=new xi(Z);this.size=de.size}function St(){this.__data__=new xi,this.size=0}function Ht(Z){var de=this.__data__,be=de.delete(Z);return this.size=de.size,be}function fn(Z){return this.__data__.get(Z)}function Tr(Z){return this.__data__.has(Z)}function zt(Z,de){var be=this.__data__;if(be instanceof xi){var gt=be.__data__;if(!ku||gt.length<n-1)return gt.push([Z,de]),this.size=++be.size,this;be=this.__data__=new ie(gt)}return be.set(Z,de),this.size=be.size,this}Bt.prototype.clear=St,Bt.prototype.delete=Ht,Bt.prototype.get=fn,Bt.prototype.has=Tr,Bt.prototype.set=zt;function pr(Z,de){var be=y8(Z),gt=!be&&s_(Z),Hn=!be&&!gt&&die(Z),Rr=!be&&!gt&&!Hn&&pie(Z),ii=be||gt||Hn||Rr,Ln=ii?$e(Z.length,String):[],si=Ln.length;for(var wl in Z)(de||et.call(Z,wl))&&!(ii&&(wl=="length"||Hn&&(wl=="offset"||wl=="parent")||Rr&&(wl=="buffer"||wl=="byteLength"||wl=="byteOffset")||gn(wl,si)))&&Ln.push(wl);return Ln}function Qt(Z,de,be){(be!==void 0&&!i_(Z[de],be)||be===void 0&&!(de in Z))&&cs(Z,de,be)}function er(Z,de,be){var gt=Z[de];(!(et.call(Z,de)&&i_(gt,be))||be===void 0&&!(de in Z))&&cs(Z,de,be)}function ni(Z,de){for(var be=Z.length;be--;)if(i_(Z[be][0],de))return be;return-1}function cs(Z,de,be){de=="__proto__"&&Wt?Wt(Z,de,{configurable:!0,enumerable:!0,value:be,writable:!0}):Z[de]=be}var Fi=Le();function aa(Z){return Z==null?Z===void 0?x:y:In&&In in Object(Z)?Ze(Z):J0(Z)}function Zs(Z){return Nx(Z)&&aa(Z)==a}function mi(Z){if(!Z0(Z)||Si(Z))return!1;var de=_8(Z)?Dn:P;return de.test(g8(Z))}function vt(Z){return Nx(Z)&&hie(Z.length)&&!!H[aa(Z)]}function wn(Z){if(!Z0(Z))return Ba(Z);var de=ri(Z),be=[];for(var gt in Z)gt=="constructor"&&(de||!et.call(Z,gt))||be.push(gt);return be}function Br(Z,de,be,gt,Hn){Z!==de&&Fi(de,function(Rr,ii){if(Hn||(Hn=new Bt),Z0(Rr))Os(Z,de,ii,be,Br,gt,Hn);else{var Ln=gt?gt($x(Z,ii),Rr,ii+"",Z,de,Hn):void 0;Ln===void 0&&(Ln=Rr),Qt(Z,ii,Ln)}},mie)}function Os(Z,de,be,gt,Hn,Rr,ii){var Ln=$x(Z,be),si=$x(de,be),wl=ii.get(si);if(wl){Qt(Z,be,wl);return}var $u=Rr?Rr(Ln,si,be+"",Z,de,ii):void 0,Dx=$u===void 0;if(Dx){var b8=y8(si),w8=!b8&&die(si),yie=!b8&&!w8&&pie(si);$u=si,b8||w8||yie?y8(Ln)?$u=Ln:NHe(Ln)?$u=pe(Ln):w8?(Dx=!1,$u=te(si,!0)):yie?(Dx=!1,$u=fe(si,!0)):$u=[]:DHe(si)||s_(si)?($u=Ln,s_(Ln)?$u=LHe(Ln):(!Z0(Ln)||_8(Ln))&&($u=Et(si))):Dx=!1}Dx&&(ii.set(si,$u),Hn($u,si,gt,Rr,ii),ii.delete(si)),Qt(Z,be,$u)}function Fa(Z,de){return Rx(kx(Z,de,gie),Z+"")}var q=Wt?function(Z,de){return Wt(Z,"toString",{configurable:!0,enumerable:!1,value:FHe(de),writable:!0})}:gie;function te(Z,de){if(de)return Z.slice();var be=Z.length,gt=it?it(be):new Z.constructor(be);return Z.copy(gt),gt}function K(Z){var de=new Z.constructor(Z.byteLength);return new ke(de).set(new ke(Z)),de}function fe(Z,de){var be=de?K(Z.buffer):Z.buffer;return new Z.constructor(be,Z.byteOffset,Z.length)}function pe(Z,de){var be=-1,gt=Z.length;for(de||(de=Array(gt));++be<gt;)de[be]=Z[be];return de}function oe(Z,de,be,gt){var Hn=!be;be||(be={});for(var Rr=-1,ii=de.length;++Rr<ii;){var Ln=de[Rr],si=gt?gt(be[Ln],Z[Ln],Ln,be,Z):void 0;si===void 0&&(si=Z[Ln]),Hn?cs(be,Ln,si):er(be,Ln,si)}return be}function Se(Z){return Fa(function(de,be){var gt=-1,Hn=be.length,Rr=Hn>1?be[Hn-1]:void 0,ii=Hn>2?be[2]:void 0;for(Rr=Z.length>3&&typeof Rr=="function"?(Hn--,Rr):void 0,ii&&tr(be[0],be[1],ii)&&(Rr=Hn<3?void 0:Rr,Hn=1),de=Object(de);++gt<Hn;){var Ln=be[gt];Ln&&Z(de,Ln,gt,Rr)}return de})}function Le(Z){return function(de,be,gt){for(var Hn=-1,Rr=Object(de),ii=gt(de),Ln=ii.length;Ln--;){var si=ii[Z?Ln:++Hn];if(be(Rr[si],si,Rr)===!1)break}return de}}function ze(Z,de){var be=Z.__data__;return ur(de)?be[typeof de=="string"?"string":"hash"]:be.map}function He(Z,de){var be=Re(Z,de);return mi(be)?be:void 0}function Ze(Z){var de=et.call(Z,In),be=Z[In];try{Z[In]=void 0;var gt=!0}catch{}var Hn=ft.call(Z);return gt&&(de?Z[In]=be:delete Z[In]),Hn}function Et(Z){return typeof Z.constructor=="function"&&!ri(Z)?ls(Ye(Z)):{}}function gn(Z,de){var be=typeof Z;return de=de??o,!!de&&(be=="number"||be!="symbol"&&k.test(Z))&&Z>-1&&Z%1==0&&Z<de}function tr(Z,de,be){if(!Z0(be))return!1;var gt=typeof de;return(gt=="number"?v8(be)&&gn(de,be.length):gt=="string"&&de in be)?i_(be[de],Z):!1}function ur(Z){var de=typeof Z;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?Z!=="__proto__":Z===null}function Si(Z){return!!ct&&ct in Z}function ri(Z){var de=Z&&Z.constructor,be=typeof de=="function"&&de.prototype||Qe;return Z===be}function Ba(Z){var de=[];if(Z!=null)for(var be in Object(Z))de.push(be);return de}function J0(Z){return ft.call(Z)}function kx(Z,de,be){return de=hr(de===void 0?Z.length-1:de,0),function(){for(var gt=arguments,Hn=-1,Rr=hr(gt.length-de,0),ii=Array(Rr);++Hn<Rr;)ii[Hn]=gt[de+Hn];Hn=-1;for(var Ln=Array(de+1);++Hn<de;)Ln[Hn]=gt[Hn];return Ln[de]=be(ii),Fe(Z,this,Ln)}}function $x(Z,de){if(!(de==="constructor"&&typeof Z[de]=="function")&&de!="__proto__")return Z[de]}var Rx=fie(q);function fie(Z){var de=0,be=0;return function(){var gt=Yn(),Hn=s-(gt-be);if(be=gt,Hn>0){if(++de>=i)return arguments[0]}else de=0;return Z.apply(void 0,arguments)}}function g8(Z){if(Z!=null){try{return wt.call(Z)}catch{}try{return Z+""}catch{}}return""}function i_(Z,de){return Z===de||Z!==Z&&de!==de}var s_=Zs(function(){return arguments}())?Zs:function(Z){return Nx(Z)&&et.call(Z,"callee")&&!tt.call(Z,"callee")},y8=Array.isArray;function v8(Z){return Z!=null&&hie(Z.length)&&!_8(Z)}function NHe(Z){return Nx(Z)&&v8(Z)}var die=Vt||BHe;function _8(Z){if(!Z0(Z))return!1;var de=aa(Z);return de==h||de==p||de==l||de==_}function hie(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=o}function Z0(Z){var de=typeof Z;return Z!=null&&(de=="object"||de=="function")}function Nx(Z){return Z!=null&&typeof Z=="object"}function DHe(Z){if(!Nx(Z)||aa(Z)!=v)return!1;var de=Ye(Z);if(de===null)return!0;var be=et.call(de,"constructor")&&de.constructor;return typeof be=="function"&&be instanceof be&&wt.call(be)==jt}var pie=ue?Ge(ue):vt;function LHe(Z){return oe(Z,mie(Z))}function mie(Z){return v8(Z)?pr(Z,!0):wn(Z)}var MHe=Se(function(Z,de,be){Br(Z,de,be)});function FHe(Z){return function(){return Z}}function gie(Z){return Z}function BHe(){return!1}e.exports=MHe})(hD,hD.exports);var fpt=hD.exports;const _Y=pl(fpt);function h1(e){return structuredClone(e)}function bY(){const{answers:e}=_f(i=>i),t=lc(),r=`${rh()[t]}_${t}`;return e[r]}const JCe=A.createContext(null);function dpt(){const e=A.useContext(JCe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function ZCe(){const e=lc(),n=`${rh()[e]}_${e}`,{trialValidation:r}=_f(v=>v),i=bY(),s=Xp(),{saveTrialAnswer:o,setIframeAnswers:a}=Kp(),{storageEngine:u}=A0(),c=!cpt(n),f=i==null?void 0:i.answer,d=Ev(),h=A.useMemo(()=>e+1,[e]),p=`/${w6()}/${h}`,m=A.useMemo(()=>Date.now(),[]),g=dpt(),y=A.useCallback(()=>{const v=h1(r[n]),_=Object.values(v).reduce((x,S)=>Object.hasOwn(S,"values")?{...x,...S.values}:x,{}),{provenanceGraph:b}=v,E=Date.now(),w=g&&"current"in g&&g.current?g.current.splice(0,g.current.length):[];Object.keys(f||{}).length===0&&(s(o({identifier:n,answer:_,startTime:m,endTime:E,provenanceGraph:b,windowEvents:w})),u&&u.saveAnswer(n,{answer:_,startTime:m,endTime:E,provenanceGraph:b,windowEvents:w}),s(a([]))),d(`${p}${window.location.search}`)},[a,u,s,f,r,d,m,e,o,p,g,n]);return{nextStep:h,isNextDisabled:c,goToNextStep:y}}function hpt({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=ZCe(),o=A.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return R.jsx(cu,{type:"submit",disabled:t||i,onClick:o,children:e})}var wY=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const sU=pl(wY);function oU(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}var ppt=Object.defineProperty,Ice=Object.getOwnPropertySymbols,mpt=Object.prototype.hasOwnProperty,gpt=Object.prototype.propertyIsEnumerable,Oce=(e,t,n)=>t in e?ppt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ypt=(e,t)=>{for(var n in t||(t={}))mpt.call(t,n)&&Oce(e,n,t[n]);if(Ice)for(var n of Ice(t))gpt.call(t,n)&&Oce(e,n,t[n]);return e};function eIe(e,t){if(t===null||typeof t!="object")return{};const n=ypt({},t);return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}const vpt="__MANTINE_FORM_INDEX__";function Pce(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${vpt}`)):!1:!1}function kce(e,t,n){typeof n.value=="object"&&(n.value=tb(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function tb(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(tb(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(tb(a),tb(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(tb(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)kce(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||kce(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function tIe(e){return typeof e!="string"?[]:e.split(".")}function x6(e,t,n){const r=tIe(e);if(r.length===0)return n;const i=tb(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Fh(e,t){const n=tIe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function $ce(e){const t=oU(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function aU(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Fh(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>aU(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||aU(o,t,a,i)),i},r)}function uU(e,t){return $ce(typeof e=="function"?e(t):aU(e,t))}function oP(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=uU(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}function _pt(e,{from:t,to:n},r){const i=Fh(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),x6(e,s,r)}var bpt=Object.defineProperty,Rce=Object.getOwnPropertySymbols,wpt=Object.prototype.hasOwnProperty,Ept=Object.prototype.propertyIsEnumerable,Nce=(e,t,n)=>t in e?bpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xpt=(e,t)=>{for(var n in t||(t={}))wpt.call(t,n)&&Nce(e,n,t[n]);if(Rce)for(var n of Rce(t))Ept.call(t,n)&&Nce(e,n,t[n]);return e};function Spt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o=xpt({},r);return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Tpt(e,t,n){const r=Fh(e,n);return Array.isArray(r)?x6(e,r.filter((i,s)=>s!==t),n):n}var Apt=Object.defineProperty,Dce=Object.getOwnPropertySymbols,Cpt=Object.prototype.hasOwnProperty,Ipt=Object.prototype.propertyIsEnumerable,Lce=(e,t,n)=>t in e?Apt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Opt=(e,t)=>{for(var n in t||(t={}))Cpt.call(t,n)&&Lce(e,n,t[n]);if(Dce)for(var n of Dce(t))Ipt.call(t,n)&&Lce(e,n,t[n]);return e};function Mce(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Fce(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=eIe(`${i}.${t}`,s));const o=Opt({},s),a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Mce(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Mce(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Ppt(e,t,n,r){const i=Fh(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),x6(e,s,r)}function Bce(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function kpt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}var $pt=Object.defineProperty,Rpt=Object.defineProperties,Npt=Object.getOwnPropertyDescriptors,jce=Object.getOwnPropertySymbols,Dpt=Object.prototype.hasOwnProperty,Lpt=Object.prototype.propertyIsEnumerable,zce=(e,t,n)=>t in e?$pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hm=(e,t)=>{for(var n in t||(t={}))Dpt.call(t,n)&&zce(e,n,t[n]);if(jce)for(var n of jce(t))Lpt.call(t,n)&&zce(e,n,t[n]);return e},k9=(e,t)=>Rpt(e,Npt(t));function Mpt({initialValues:e={},initialErrors:t={},initialDirty:n={},initialTouched:r={},clearInputErrorOnChange:i=!0,validateInputOnChange:s=!1,validateInputOnBlur:o=!1,transformValues:a=l=>l,validate:u}={}){const[l,c]=A.useState(r),[f,d]=A.useState(n),[h,p]=A.useState(e),[m,g]=A.useState(oU(t)),y=A.useRef(e),v=F=>{y.current=F},_=A.useCallback(()=>c({}),[]),b=F=>{const J=F?hm(hm({},h),F):h;v(J),d({})},E=A.useCallback(F=>g(J=>oU(typeof F=="function"?F(J):F)),[]),w=A.useCallback(()=>g({}),[]),x=A.useCallback(()=>{p(e),w(),v(e),d({}),_()},[]),S=A.useCallback((F,J)=>E(se=>k9(hm({},se),{[F]:J})),[]),I=A.useCallback(F=>E(J=>{if(typeof F!="string")return J;const se=hm({},J);return delete se[F],se}),[]),C=A.useCallback(F=>d(J=>{if(typeof F!="string")return J;const se=eIe(F,J);return delete se[F],se}),[]),O=A.useCallback((F,J)=>{const se=Pce(F,s);C(F),c(ae=>k9(hm({},ae),{[F]:!0})),p(ae=>{const ce=x6(F,J,ae);if(se){const le=oP(F,u,ce);le.hasError?S(F,le.error):I(F)}return ce}),!se&&i&&S(F,null)},[]),z=A.useCallback(F=>{p(J=>{const se=typeof F=="function"?F(J):F;return hm(hm({},J),se)}),i&&w()},[]),N=A.useCallback((F,J)=>{C(F),p(se=>_pt(F,J,se)),g(se=>Spt(F,J,se))},[]),$=A.useCallback((F,J)=>{C(F),p(se=>Tpt(F,J,se)),g(se=>Fce(F,J,se,-1))},[]),D=A.useCallback((F,J,se)=>{C(F),p(ae=>Ppt(F,J,se,ae)),g(ae=>Fce(F,se,ae,1))},[]),B=A.useCallback(()=>{const F=uU(u,h);return g(F.errors),F},[h,u]),V=A.useCallback(F=>{const J=oP(F,u,h);return J.hasError?S(F,J.error):I(F),J},[h,u]),j=(F,{type:J="input",withError:se=!0,withFocus:ae=!0}={})=>{const le={onChange:kpt(ge=>O(F,ge))};return se&&(le.error=m[F]),J==="checkbox"?le.checked=Fh(F,h):le.value=Fh(F,h),ae&&(le.onFocus=()=>c(ge=>k9(hm({},ge),{[F]:!0})),le.onBlur=()=>{if(Pce(F,o)){const ge=oP(F,u,h);ge.hasError?S(F,ge.error):I(F)}}),le},G=(F,J)=>se=>{se==null||se.preventDefault();const ae=B();ae.hasErrors?J==null||J(ae.errors,h,se):F==null||F(a(h),se)},U=F=>a(F||h),P=A.useCallback(F=>{F.preventDefault(),x()},[]),k=F=>{if(F){const se=Fh(F,f);if(typeof se=="boolean")return se;const ae=Fh(F,h),ce=Fh(F,y.current);return!sU(ae,ce)}return Object.keys(f).length>0?Bce(f):!sU(h,y.current)},H=A.useCallback(F=>Bce(l,F),[l]),M=A.useCallback(F=>F?!oP(F,u,h).hasError:!uU(u,h).hasErrors,[h,u]);return{values:h,errors:m,setValues:z,setErrors:E,setFieldValue:O,setFieldError:S,clearFieldError:I,clearErrors:w,reset:x,validate:B,validateField:V,reorderListItem:N,removeListItem:$,insertListItem:D,getInputProps:j,onSubmit:G,onReset:P,isDirty:k,isTouched:H,setTouched:c,setDirty:d,resetTouched:_,resetDirty:b,isValid:M,getTransformedValues:U}}const Fpt=new URLSearchParams(window.location.search),Bpt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?Fpt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},jpt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function zpt(e,t,n){const[r,i]=A.useState(null),s=Mpt({initialValues:Bpt(e,n),validate:jpt(e)});return A.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Cv(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}const Uce=["http","https","mailto","tel"];function Upt(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let i=-1;for(;++i<Uce.length;){const s=Uce[i];if(r===s.length&&t.slice(0,s.length).toLowerCase()===s)return t}return i=t.indexOf("?"),i!==-1&&r>i||(i=t.indexOf("#"),i!==-1&&r>i)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Vpt=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const EY=pl(Vpt);function Pb(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Vce(e.position):"start"in e||"end"in e?Vce(e):"line"in e||"column"in e?lU(e):""}function lU(e){return Hce(e&&e.line)+":"+Hce(e&&e.column)}function Vce(e){return lU(e&&e.start)+"-"+lU(e&&e.end)}function Hce(e){return e&&typeof e=="number"?e:1}let cc=class extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=Pb(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}};cc.prototype.file="";cc.prototype.name="";cc.prototype.reason="";cc.prototype.message="";cc.prototype.stack="";cc.prototype.fatal=null;cc.prototype.column=null;cc.prototype.line=null;cc.prototype.source=null;cc.prototype.ruleId=null;cc.prototype.position=null;const Uf={basename:Hpt,dirname:qpt,extname:Wpt,join:Gpt,sep:"/"};function Hpt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');GC(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function qpt(e){if(GC(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function Wpt(e){GC(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Gpt(...e){let t=-1,n;for(;++t<e.length;)GC(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Ypt(n)}function Ypt(e){GC(e);const t=e.charCodeAt(0)===47;let n=Kpt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Kpt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function GC(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Xpt={cwd:Qpt};function Qpt(){return"/"}function cU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function Jpt(e){if(typeof e=="string")e=new URL(e);else if(!cU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Zpt(e)}function Zpt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const $9=["history","path","basename","stem","extname","dirname"];let emt=class{constructor(t){let n;t?typeof t=="string"||EY(t)?n={value:t}:cU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=Xpt.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<$9.length;){const s=$9[r];s in n&&n[s]!==void 0&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)$9.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){cU(t)&&(t=Jpt(t)),N9(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Uf.dirname(this.path):void 0}set dirname(t){qce(this.basename,"dirname"),this.path=Uf.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Uf.basename(this.path):void 0}set basename(t){N9(t,"basename"),R9(t,"basename"),this.path=Uf.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Uf.extname(this.path):void 0}set extname(t){if(R9(t,"extname"),qce(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Uf.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Uf.basename(this.path,this.extname):void 0}set stem(t){N9(t,"stem"),R9(t,"stem"),this.path=Uf.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new cc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}};function R9(e,t){if(e&&e.includes(Uf.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Uf.sep+"`")}function N9(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function qce(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Wce(e){if(e)throw e}var Wk=Object.prototype.hasOwnProperty,nIe=Object.prototype.toString,Gce=Object.defineProperty,Yce=Object.getOwnPropertyDescriptor,Kce=function(t){return typeof Array.isArray=="function"?Array.isArray(t):nIe.call(t)==="[object Array]"},Xce=function(t){if(!t||nIe.call(t)!=="[object Object]")return!1;var n=Wk.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&Wk.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||Wk.call(t,i)},Qce=function(t,n){Gce&&n.name==="__proto__"?Gce(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Jce=function(t,n){if(n==="__proto__")if(Wk.call(t,n)){if(Yce)return Yce(t,n).value}else return;return t[n]},tmt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=Jce(a,n),i=Jce(t,n),a!==i&&(c&&i&&(Xce(i)||(s=Kce(i)))?(s?(s=!1,o=r&&Kce(r)?r:[]):o=r&&Xce(r)?r:{},Qce(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Qce(a,{name:n,newValue:i}));return a};const Zce=pl(tmt);function fU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function nmt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?rmt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function rmt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u instanceof Promise?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}class fc extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=Pb(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}fc.prototype.file="";fc.prototype.name="";fc.prototype.reason="";fc.prototype.message="";fc.prototype.stack="";fc.prototype.fatal=null;fc.prototype.column=null;fc.prototype.line=null;fc.prototype.source=null;fc.prototype.ruleId=null;fc.prototype.position=null;const Vf={basename:imt,dirname:smt,extname:omt,join:amt,sep:"/"};function imt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');YC(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function smt(e){if(YC(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function omt(e){YC(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function amt(...e){let t=-1,n;for(;++t<e.length;)YC(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":umt(n)}function umt(e){YC(e);const t=e.charCodeAt(0)===47;let n=lmt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function lmt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function YC(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const cmt={cwd:fmt};function fmt(){return"/"}function dU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function dmt(e){if(typeof e=="string")e=new URL(e);else if(!dU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return hmt(e)}function hmt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const D9=["history","path","basename","stem","extname","dirname"];class pmt{constructor(t){let n;t?typeof t=="string"||EY(t)?n={value:t}:dU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=cmt.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<D9.length;){const s=D9[r];s in n&&n[s]!==void 0&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)D9.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){dU(t)&&(t=dmt(t)),M9(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Vf.dirname(this.path):void 0}set dirname(t){efe(this.basename,"dirname"),this.path=Vf.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Vf.basename(this.path):void 0}set basename(t){M9(t,"basename"),L9(t,"basename"),this.path=Vf.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Vf.extname(this.path):void 0}set extname(t){if(L9(t,"extname"),efe(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Vf.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Vf.basename(this.path,this.extname):void 0}set stem(t){M9(t,"stem"),L9(t,"stem"),this.path=Vf.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new fc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}}function L9(e,t){if(e&&e.includes(Vf.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Vf.sep+"`")}function M9(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function efe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const mmt=iIe().freeze(),rIe={}.hasOwnProperty;function iIe(){const e=nmt(),t=[];let n={},r,i=-1;return s.data=o,s.Parser=void 0,s.Compiler=void 0,s.freeze=a,s.attachers=t,s.use=u,s.parse=l,s.stringify=c,s.run=f,s.runSync=d,s.process=h,s.processSync=p,s;function s(){const m=iIe();let g=-1;for(;++g<t.length;)m.use(...t[g]);return m.data(Zce(!0,{},n)),m}function o(m,g){return typeof m=="string"?arguments.length===2?(j9("data",r),n[m]=g,s):rIe.call(n,m)&&n[m]||null:m?(j9("data",r),n=m,s):n}function a(){if(r)return s;for(;++i<t.length;){const[m,...g]=t[i];if(g[0]===!1)continue;g[0]===!0&&(g[0]=void 0);const y=m.call(s,...g);typeof y=="function"&&e.use(y)}return r=!0,i=Number.POSITIVE_INFINITY,s}function u(m,...g){let y;if(j9("use",r),m!=null)if(typeof m=="function")E(m,...g);else if(typeof m=="object")Array.isArray(m)?b(m):_(m);else throw new TypeError("Expected usable value, not `"+m+"`");return y&&(n.settings=Object.assign(n.settings||{},y)),s;function v(w){if(typeof w=="function")E(w);else if(typeof w=="object")if(Array.isArray(w)){const[x,...S]=w;E(x,...S)}else _(w);else throw new TypeError("Expected usable value, not `"+w+"`")}function _(w){b(w.plugins),w.settings&&(y=Object.assign(y||{},w.settings))}function b(w){let x=-1;if(w!=null)if(Array.isArray(w))for(;++x<w.length;){const S=w[x];v(S)}else throw new TypeError("Expected a list of plugins, not `"+w+"`")}function E(w,x){let S=-1,I;for(;++S<t.length;)if(t[S][0]===w){I=t[S];break}I?(fU(I[1])&&fU(x)&&(x=Zce(!0,I[1],x)),I[1]=x):t.push([...arguments])}}function l(m){s.freeze();const g=Qx(m),y=s.Parser;return F9("parse",y),tfe(y,"parse")?new y(String(g),g).parse():y(String(g),g)}function c(m,g){s.freeze();const y=Qx(g),v=s.Compiler;return B9("stringify",v),nfe(m),tfe(v,"compile")?new v(m,y).compile():v(m,y)}function f(m,g,y){if(nfe(m),s.freeze(),!y&&typeof g=="function"&&(y=g,g=void 0),!y)return new Promise(v);v(null,y);function v(_,b){e.run(m,Qx(g),E);function E(w,x,S){x=x||m,w?b(w):_?_(x):y(null,x,S)}}}function d(m,g){let y,v;return s.run(m,g,_),rfe("runSync","run",v),y;function _(b,E){Wce(b),y=E,v=!0}}function h(m,g){if(s.freeze(),F9("process",s.Parser),B9("process",s.Compiler),!g)return new Promise(y);y(null,g);function y(v,_){const b=Qx(m);s.run(s.parse(b),b,(w,x,S)=>{if(w||!x||!S)E(w);else{const I=s.stringify(x,S);I==null||(vmt(I)?S.value=I:S.result=I),E(w,S)}});function E(w,x){w||!x?_(w):v?v(x):g(null,x)}}}function p(m){let g;s.freeze(),F9("processSync",s.Parser),B9("processSync",s.Compiler);const y=Qx(m);return s.process(y,v),rfe("processSync","process",g),y;function v(_){g=!0,Wce(_)}}}function tfe(e,t){return typeof e=="function"&&e.prototype&&(gmt(e.prototype)||t in e.prototype)}function gmt(e){let t;for(t in e)if(rIe.call(e,t))return!0;return!1}function F9(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function B9(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function j9(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function nfe(e){if(!fU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function rfe(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Qx(e){return ymt(e)?e:new pmt(e)}function ymt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function vmt(e){return typeof e=="string"||EY(e)}function _mt(e,t){var{includeImageAlt:n=!0}=t||{};return sIe(e,n)}function sIe(e,t){return e&&typeof e=="object"&&(e.value||(t?e.alt:"")||"children"in e&&ife(e.children,t)||Array.isArray(e)&&ife(e,t))||""}function ife(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=sIe(e[r],t);return n.join("")}function Fd(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),[].splice.apply(e,o);else for(n&&[].splice.apply(e,[t,n]);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),[].splice.apply(e,o),s+=1e4,t+=1e4}function Rl(e,t){return e.length>0?(Fd(e,e.length,0,t),e):t}const sfe={}.hasOwnProperty;function bmt(e){const t={};let n=-1;for(;++n<e.length;)wmt(t,e[n]);return t}function wmt(e,t){let n;for(n in t){const i=(sfe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;for(o in s){sfe.call(i,o)||(i[o]=[]);const a=s[o];Emt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Emt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Fd(e,0,0,r)}const xmt=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,ed=O0(/[A-Za-z]/),hU=O0(/\d/),Smt=O0(/[\dA-Fa-f]/),Yu=O0(/[\dA-Za-z]/),Tmt=O0(/[!-/:-@[-`{-~]/),ofe=O0(/[#-'*+\--9=?A-Z^-~]/);function pU(e){return e!==null&&(e<32||e===127)}function Wl(e){return e!==null&&(e<0||e===32)}function Zt(e){return e!==null&&e<-2}function es(e){return e===-2||e===-1||e===32}const Amt=O0(/\s/),Cmt=O0(xmt);function O0(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function Nr(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return es(u)?(e.enter(n),a(u)):t(u)}function a(u){return es(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const Imt={tokenize:Omt};function Omt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Nr(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Zt(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const Pmt={tokenize:kmt},afe={tokenize:$mt};function kmt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const b=n[r];return t.containerState=b[1],e.attempt(b[0].continuation,u,l)(_)}return l(_)}function u(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const b=t.events.length;let E=b,w;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){w=t.events[E][1].end;break}y(r);let x=b;for(;x<t.events.length;)t.events[x][1].end=Object.assign({},w),x++;return Fd(t.events,E+1,0,t.events.slice(b)),t.events.length=x,l(_)}return a(_)}function l(_){if(r===n.length){if(!i)return d(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(afe,c,f)(_)}function c(_){return i&&v(),y(r),d(_)}function f(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function d(_){return t.containerState={},e.attempt(afe,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),d(_)}function p(_){if(_===null){i&&v(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return Zt(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,b){const E=t.sliceStream(_);if(b&&E.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(E),t.parser.lazy[_.start.line]){let w=i.events.length;for(;w--;)if(i.events[w][1].start.offset<o&&(!i.events[w][1].end||i.events[w][1].end.offset>o))return;const x=t.events.length;let S=x,I,C;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){if(I){C=t.events[S][1].end;break}I=!0}for(y(r),w=x;w<t.events.length;)t.events[w][1].end=Object.assign({},C),w++;Fd(t.events,S+1,0,t.events.slice(x)),t.events.length=w}}function y(_){let b=n.length;for(;b-- >_;){const E=n[b];t.containerState=E[1],E[0].exit.call(t,e)}n.length=_}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function $mt(e,t,n){return Nr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ufe(e){if(e===null||Wl(e)||Amt(e))return 1;if(Cmt(e))return 2}function xY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const mU={name:"attention",tokenize:Nmt,resolveAll:Rmt};function Rmt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);lfe(f,-u),lfe(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Rl(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Rl(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Rl(l,xY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Rl(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Rl(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Fd(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Nmt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=ufe(r);let s;return o;function o(u){return e.enter("attentionSequence"),s=u,a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=ufe(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function lfe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Dmt={name:"autolink",tokenize:Lmt};function Lmt(e,t,n){let r=1;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(p){return ed(p)?(e.consume(p),o):ofe(p)?l(p):n(p)}function o(p){return p===43||p===45||p===46||Yu(p)?a(p):l(p)}function a(p){return p===58?(e.consume(p),u):(p===43||p===45||p===46||Yu(p))&&r++<32?(e.consume(p),a):l(p)}function u(p){return p===62?(e.exit("autolinkProtocol"),h(p)):p===null||p===32||p===60||pU(p)?n(p):(e.consume(p),u)}function l(p){return p===64?(e.consume(p),r=0,c):ofe(p)?(e.consume(p),l):n(p)}function c(p){return Yu(p)?f(p):n(p)}function f(p){return p===46?(e.consume(p),r=0,c):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",h(p)):d(p)}function d(p){return(p===45||Yu(p))&&r++<63?(e.consume(p),p===45?d:f):n(p)}function h(p){return e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t}}const S6={tokenize:Mmt,partial:!0};function Mmt(e,t,n){return Nr(e,r,"linePrefix");function r(i){return i===null||Zt(i)?t(i):n(i)}}const oIe={name:"blockQuote",tokenize:Fmt,continuation:{tokenize:Bmt},exit:jmt};function Fmt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return es(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Bmt(e,t,n){return Nr(e,e.attempt(oIe,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function jmt(e){e.exit("blockQuote")}const aIe={name:"characterEscape",tokenize:zmt};function zmt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Tmt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const cfe=document.createElement("i");function SY(e){const t="&"+e+";";cfe.innerHTML=t;const n=cfe.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const uIe={name:"characterReference",tokenize:Umt};function Umt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Yu,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Smt,c):(e.enter("characterReferenceValue"),s=7,o=hU,c(f))}function c(f){let d;return f===59&&i?(d=e.exit("characterReferenceValue"),o===Yu&&!SY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):o(f)&&i++<s?(e.consume(f),c):n(f)}}const ffe={name:"codeFenced",tokenize:Vmt,concrete:!0};function Vmt(e,t,n){const r=this,i={tokenize:E,partial:!0},s={tokenize:b,partial:!0},o=this.events[this.events.length-1],a=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0;let u=0,l;return c;function c(w){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l=w,f(w)}function f(w){return w===l?(e.consume(w),u++,f):(e.exit("codeFencedFenceSequence"),u<3?n(w):Nr(e,d,"whitespace")(w))}function d(w){return w===null||Zt(w)?g(w):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(w))}function h(w){return w===null||Wl(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Nr(e,p,"whitespace")(w)):w===96&&w===l?n(w):(e.consume(w),h)}function p(w){return w===null||Zt(w)?g(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(w))}function m(w){return w===null||Zt(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),g(w)):w===96&&w===l?n(w):(e.consume(w),m)}function g(w){return e.exit("codeFencedFence"),r.interrupt?t(w):y(w)}function y(w){return w===null?_(w):Zt(w)?e.attempt(s,e.attempt(i,_,a?Nr(e,y,"linePrefix",a+1):y),_)(w):(e.enter("codeFlowValue"),v(w))}function v(w){return w===null||Zt(w)?(e.exit("codeFlowValue"),y(w)):(e.consume(w),v)}function _(w){return e.exit("codeFenced"),t(w)}function b(w,x,S){const I=this;return C;function C(z){return w.enter("lineEnding"),w.consume(z),w.exit("lineEnding"),O}function O(z){return I.parser.lazy[I.now().line]?S(z):x(z)}}function E(w,x,S){let I=0;return Nr(w,C,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function C(N){return w.enter("codeFencedFence"),w.enter("codeFencedFenceSequence"),O(N)}function O(N){return N===l?(w.consume(N),I++,O):I<u?S(N):(w.exit("codeFencedFenceSequence"),Nr(w,z,"whitespace")(N))}function z(N){return N===null||Zt(N)?(w.exit("codeFencedFence"),x(N)):S(N)}}}const z9={name:"codeIndented",tokenize:qmt},Hmt={tokenize:Wmt,partial:!0};function qmt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Nr(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Zt(l)?e.attempt(Hmt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Zt(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function Wmt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Zt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Nr(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Zt(o)?i(o):n(o)}}const Gmt={name:"codeText",tokenize:Xmt,resolve:Ymt,previous:Kmt};function Ymt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Kmt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Xmt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):Zt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Zt(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}function lIe(e){const t={};let n=-1,r,i,s,o,a,u,l;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Qmt(e,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=e[s],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},e[i][1].start),a=e.slice(i,n),a.unshift(r),Fd(e,i,n-i+1,a))}}return!l}function Qmt(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e[++i][1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.unshift([v,v+y.length-1]),Fd(e,v,2,y)}for(d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const Jmt={tokenize:tgt,resolve:egt},Zmt={tokenize:ngt,partial:!0};function egt(e){return lIe(e),e}function tgt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Zt(a)?e.check(Zmt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function ngt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Nr(e,s,"linePrefix")}function s(o){if(o===null||Zt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function cIe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===41||pU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Zt(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return y===40?++c>l?n(y):(e.consume(y),m):y===41?c--?(e.consume(y),m):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):y===null||Wl(y)?c?n(y):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):pU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function fIe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs||a>999?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Zt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Zt(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u=u||!es(h),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function dIe(e,t,n,r,i,s){let o;return a;function a(d){return e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Zt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Nr(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Zt(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function qT(e,t){let n;return r;function r(i){return Zt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):es(i)?Nr(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function kb(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const rgt={name:"definition",tokenize:sgt},igt={tokenize:ogt,partial:!0};function sgt(e,t,n){const r=this;let i;return s;function s(u){return e.enter("definition"),fIe.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(u)}function o(u){return i=kb(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),u===58?(e.enter("definitionMarker"),e.consume(u),e.exit("definitionMarker"),qT(e,cIe(e,e.attempt(igt,Nr(e,a,"whitespace"),Nr(e,a,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(u)}function a(u){return u===null||Zt(u)?(e.exit("definition"),r.parser.defined.includes(i)||r.parser.defined.push(i),t(u)):n(u)}}function ogt(e,t,n){return r;function r(o){return Wl(o)?qT(e,i)(o):n(o)}function i(o){return o===34||o===39||o===40?dIe(e,Nr(e,s,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o):n(o)}function s(o){return o===null||Zt(o)?t(o):n(o)}}const agt={name:"hardBreakEscape",tokenize:ugt};function ugt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(s),i}function i(s){return Zt(s)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(s)):n(s)}}const lgt={name:"headingAtx",tokenize:fgt,resolve:cgt};function cgt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Fd(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function fgt(e,t,n){const r=this;let i=0;return s;function s(c){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&i++<6?(e.consume(c),o):c===null||Wl(c)?(e.exit("atxHeadingSequence"),r.interrupt?t(c):a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Zt(c)?(e.exit("atxHeading"),t(c)):es(c)?Nr(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Wl(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const dgt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],dfe=["pre","script","style","textarea"],hgt={name:"htmlFlow",tokenize:ggt,resolveTo:mgt,concrete:!0},pgt={tokenize:ygt,partial:!0};function mgt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function ggt(e,t,n){const r=this;let i,s,o,a,u;return l;function l(k){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(k),c}function c(k){return k===33?(e.consume(k),f):k===47?(e.consume(k),p):k===63?(e.consume(k),i=3,r.interrupt?t:G):ed(k)?(e.consume(k),o=String.fromCharCode(k),s=!0,m):n(k)}function f(k){return k===45?(e.consume(k),i=2,d):k===91?(e.consume(k),i=5,o="CDATA[",a=0,h):ed(k)?(e.consume(k),i=4,r.interrupt?t:G):n(k)}function d(k){return k===45?(e.consume(k),r.interrupt?t:G):n(k)}function h(k){return k===o.charCodeAt(a++)?(e.consume(k),a===o.length?r.interrupt?t:O:h):n(k)}function p(k){return ed(k)?(e.consume(k),o=String.fromCharCode(k),m):n(k)}function m(k){return k===null||k===47||k===62||Wl(k)?k!==47&&s&&dfe.includes(o.toLowerCase())?(i=1,r.interrupt?t(k):O(k)):dgt.includes(o.toLowerCase())?(i=6,k===47?(e.consume(k),g):r.interrupt?t(k):O(k)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(k):s?v(k):y(k)):k===45||Yu(k)?(e.consume(k),o+=String.fromCharCode(k),m):n(k)}function g(k){return k===62?(e.consume(k),r.interrupt?t:O):n(k)}function y(k){return es(k)?(e.consume(k),y):I(k)}function v(k){return k===47?(e.consume(k),I):k===58||k===95||ed(k)?(e.consume(k),_):es(k)?(e.consume(k),v):I(k)}function _(k){return k===45||k===46||k===58||k===95||Yu(k)?(e.consume(k),_):b(k)}function b(k){return k===61?(e.consume(k),E):es(k)?(e.consume(k),b):v(k)}function E(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),u=k,w):es(k)?(e.consume(k),E):(u=null,x(k))}function w(k){return k===null||Zt(k)?n(k):k===u?(e.consume(k),S):(e.consume(k),w)}function x(k){return k===null||k===34||k===39||k===60||k===61||k===62||k===96||Wl(k)?b(k):(e.consume(k),x)}function S(k){return k===47||k===62||es(k)?v(k):n(k)}function I(k){return k===62?(e.consume(k),C):n(k)}function C(k){return es(k)?(e.consume(k),C):k===null||Zt(k)?O(k):n(k)}function O(k){return k===45&&i===2?(e.consume(k),D):k===60&&i===1?(e.consume(k),B):k===62&&i===4?(e.consume(k),U):k===63&&i===3?(e.consume(k),G):k===93&&i===5?(e.consume(k),j):Zt(k)&&(i===6||i===7)?e.check(pgt,U,z)(k):k===null||Zt(k)?z(k):(e.consume(k),O)}function z(k){return e.exit("htmlFlowData"),N(k)}function N(k){return k===null?P(k):Zt(k)?e.attempt({tokenize:$,partial:!0},N,P)(k):(e.enter("htmlFlowData"),O(k))}function $(k,H,M){return F;function F(se){return k.enter("lineEnding"),k.consume(se),k.exit("lineEnding"),J}function J(se){return r.parser.lazy[r.now().line]?M(se):H(se)}}function D(k){return k===45?(e.consume(k),G):O(k)}function B(k){return k===47?(e.consume(k),o="",V):O(k)}function V(k){return k===62&&dfe.includes(o.toLowerCase())?(e.consume(k),U):ed(k)&&o.length<8?(e.consume(k),o+=String.fromCharCode(k),V):O(k)}function j(k){return k===93?(e.consume(k),G):O(k)}function G(k){return k===62?(e.consume(k),U):k===45&&i===2?(e.consume(k),G):O(k)}function U(k){return k===null||Zt(k)?(e.exit("htmlFlowData"),P(k)):(e.consume(k),U)}function P(k){return e.exit("htmlFlow"),t(k)}}function ygt(e,t,n){return r;function r(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(S6,t,n)}}const vgt={name:"htmlText",tokenize:_gt};function _gt(e,t,n){const r=this;let i,s,o,a;return u;function u(P){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(P),l}function l(P){return P===33?(e.consume(P),c):P===47?(e.consume(P),x):P===63?(e.consume(P),E):ed(P)?(e.consume(P),C):n(P)}function c(P){return P===45?(e.consume(P),f):P===91?(e.consume(P),s="CDATA[",o=0,g):ed(P)?(e.consume(P),b):n(P)}function f(P){return P===45?(e.consume(P),d):n(P)}function d(P){return P===null||P===62?n(P):P===45?(e.consume(P),h):p(P)}function h(P){return P===null||P===62?n(P):p(P)}function p(P){return P===null?n(P):P===45?(e.consume(P),m):Zt(P)?(a=p,j(P)):(e.consume(P),p)}function m(P){return P===45?(e.consume(P),U):p(P)}function g(P){return P===s.charCodeAt(o++)?(e.consume(P),o===s.length?y:g):n(P)}function y(P){return P===null?n(P):P===93?(e.consume(P),v):Zt(P)?(a=y,j(P)):(e.consume(P),y)}function v(P){return P===93?(e.consume(P),_):y(P)}function _(P){return P===62?U(P):P===93?(e.consume(P),_):y(P)}function b(P){return P===null||P===62?U(P):Zt(P)?(a=b,j(P)):(e.consume(P),b)}function E(P){return P===null?n(P):P===63?(e.consume(P),w):Zt(P)?(a=E,j(P)):(e.consume(P),E)}function w(P){return P===62?U(P):E(P)}function x(P){return ed(P)?(e.consume(P),S):n(P)}function S(P){return P===45||Yu(P)?(e.consume(P),S):I(P)}function I(P){return Zt(P)?(a=I,j(P)):es(P)?(e.consume(P),I):U(P)}function C(P){return P===45||Yu(P)?(e.consume(P),C):P===47||P===62||Wl(P)?O(P):n(P)}function O(P){return P===47?(e.consume(P),U):P===58||P===95||ed(P)?(e.consume(P),z):Zt(P)?(a=O,j(P)):es(P)?(e.consume(P),O):U(P)}function z(P){return P===45||P===46||P===58||P===95||Yu(P)?(e.consume(P),z):N(P)}function N(P){return P===61?(e.consume(P),$):Zt(P)?(a=N,j(P)):es(P)?(e.consume(P),N):O(P)}function $(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),i=P,D):Zt(P)?(a=$,j(P)):es(P)?(e.consume(P),$):(e.consume(P),i=void 0,V)}function D(P){return P===i?(e.consume(P),B):P===null?n(P):Zt(P)?(a=D,j(P)):(e.consume(P),D)}function B(P){return P===62||P===47||Wl(P)?O(P):n(P)}function V(P){return P===null||P===34||P===39||P===60||P===61||P===96?n(P):P===62||Wl(P)?O(P):(e.consume(P),V)}function j(P){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),Nr(e,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function G(P){return e.enter("htmlTextData"),a(P)}function U(P){return P===62?(e.consume(P),e.exit("htmlTextData"),e.exit("htmlText"),t):n(P)}}const TY={name:"labelEnd",tokenize:Tgt,resolveTo:Sgt,resolveAll:xgt},bgt={tokenize:Agt},wgt={tokenize:Cgt},Egt={tokenize:Igt};function xgt(e){let t=-1,n;for(;++t<e.length;)n=e[t][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++);return e}function Sgt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Rl(a,e.slice(s+1,s+r+3)),a=Rl(a,[["enter",c,t]]),a=Rl(a,xY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Rl(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Rl(a,e.slice(o+1)),a=Rl(a,[["exit",u,t]]),Fd(e,s,e.length,a),e}function Tgt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(c){return s?s._inactive?l(c):(o=r.parser.defined.includes(kb(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelEnd"),u):n(c)}function u(c){return c===40?e.attempt(bgt,t,o?t:l)(c):c===91?e.attempt(wgt,t,o?e.attempt(Egt,t,l):l)(c):o?t(c):l(c)}function l(c){return s._balanced=!0,n(c)}}function Agt(e,t,n){return r;function r(u){return e.enter("resource"),e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),qT(e,i)}function i(u){return u===41?a(u):cIe(e,s,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(u)}function s(u){return Wl(u)?qT(e,o)(u):a(u)}function o(u){return u===34||u===39||u===40?dIe(e,qT(e,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(u):a(u)}function a(u){return u===41?(e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),e.exit("resource"),t):n(u)}}function Cgt(e,t,n){const r=this;return i;function i(o){return fIe.call(r,e,s,n,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(kb(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}}function Igt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Ogt={name:"labelStartImage",tokenize:Pgt,resolveAll:TY.resolveAll};function Pgt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const kgt={name:"labelStartLink",tokenize:$gt,resolveAll:TY.resolveAll};function $gt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const U9={name:"lineEnding",tokenize:Rgt};function Rgt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Nr(e,t,"linePrefix")}}const Gk={name:"thematicBreak",tokenize:Ngt};function Ngt(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),i=u,o(u)}function o(u){return u===i?(e.enter("thematicBreakSequence"),a(u)):es(u)?Nr(e,o,"whitespace")(u):r<3||u!==null&&!Zt(u)?n(u):(e.exit("thematicBreak"),t(u))}function a(u){return u===i?(e.consume(u),r++,a):(e.exit("thematicBreakSequence"),o(u))}}const Ua={name:"list",tokenize:Mgt,continuation:{tokenize:Fgt},exit:jgt},Dgt={tokenize:zgt,partial:!0},Lgt={tokenize:Bgt,partial:!0};function Mgt(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:hU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(Gk,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return hU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(S6,r.interrupt?n:c,e.attempt(Dgt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return es(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function Fgt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(S6,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Nr(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!es(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Lgt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Nr(e,e.attempt(Ua,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Bgt(e,t,n){const r=this;return Nr(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function jgt(e){e.exit(this.containerState.type)}function zgt(e,t,n){const r=this;return Nr(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!es(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const hfe={name:"setextUnderline",tokenize:Vgt,resolveTo:Ugt};function Ugt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Vgt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if(r.events[i][1].type!=="lineEnding"&&r.events[i][1].type!=="linePrefix"&&r.events[i][1].type!=="content"){o=r.events[i][1].type==="paragraph";break}return a;function a(c){return!r.parser.lazy[r.now().line]&&(r.interrupt||o)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),s=c,u(c)):n(c)}function u(c){return c===s?(e.consume(c),u):(e.exit("setextHeadingLineSequence"),Nr(e,l,"lineSuffix")(c))}function l(c){return c===null||Zt(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const Hgt={tokenize:qgt};function qgt(e){const t=this,n=e.attempt(S6,r,e.attempt(this.parser.constructs.flowInitial,i,Nr(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Jmt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Wgt={resolveAll:pIe()},Ggt=hIe("string"),Ygt=hIe("text");function hIe(e){return{tokenize:t,resolveAll:pIe(e==="text"?Kgt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function pIe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Kgt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Xgt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:_,exit:b,attempt:x(E),check:x(w),interrupt:x(w,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(O){return o=Rl(o,O),g(),o[o.length-1]!==null?[]:(S(t,0),l.events=xY(s,l.events,l),l.events)}function d(O,z){return Jgt(h(O),z)}function h(O){return Qgt(o,O)}function p(){return Object.assign({},r)}function m(O){i[O.line]=O.column,C()}function g(){let O;for(;r._index<o.length;){const z=o[r._index];if(typeof z=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<z.length;)y(z.charCodeAt(r._bufferIndex));else y(z)}}function y(O){c=c(O)}function v(O){Zt(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,C()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=O}function _(O,z){const N=z||{};return N.type=O,N.start=p(),l.events.push(["enter",N,l]),a.push(N),N}function b(O){const z=a.pop();return z.end=p(),l.events.push(["exit",z,l]),z}function E(O,z){S(O,z.from)}function w(O,z){z.restore()}function x(O,z){return N;function N($,D,B){let V,j,G,U;return Array.isArray($)?k($):"tokenize"in $?k([$]):P($);function P(J){return se;function se(ae){const ce=ae!==null&&J[ae],le=ae!==null&&J.null,ge=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(le)?le:le?[le]:[]];return k(ge)(ae)}}function k(J){return V=J,j=0,J.length===0?B:H(J[j])}function H(J){return se;function se(ae){return U=I(),G=J,J.partial||(l.currentConstruct=J),J.name&&l.parser.constructs.disable.null.includes(J.name)?F():J.tokenize.call(z?Object.assign(Object.create(l),z):l,u,M,F)(ae)}}function M(J){return O(G,U),D}function F(J){return U.restore(),++j<V.length?H(V[j]):B}}}function S(O,z){O.resolveAll&&!s.includes(O)&&s.push(O),O.resolve&&Fd(l.events,z,l.events.length-z,O.resolve(l.events.slice(z),l)),O.resolveTo&&(l.events=O.resolveTo(l.events,l))}function I(){const O=p(),z=l.previous,N=l.currentConstruct,$=l.events.length,D=Array.from(a);return{restore:B,from:$};function B(){r=O,l.previous=z,l.currentConstruct=N,l.events.length=$,a=D,C()}}function C(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Qgt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;return n===i?o=[e[n].slice(r,s)]:(o=e.slice(n,i),r>-1&&(o[0]=o[0].slice(r)),s>0&&o.push(e[i].slice(0,s))),o}function Jgt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Zgt={42:Ua,43:Ua,45:Ua,48:Ua,49:Ua,50:Ua,51:Ua,52:Ua,53:Ua,54:Ua,55:Ua,56:Ua,57:Ua,62:oIe},e0t={91:rgt},t0t={[-2]:z9,[-1]:z9,32:z9},n0t={35:lgt,42:Gk,45:[hfe,Gk],60:hgt,61:hfe,95:Gk,96:ffe,126:ffe},r0t={38:uIe,92:aIe},i0t={[-5]:U9,[-4]:U9,[-3]:U9,33:Ogt,38:uIe,42:mU,60:[Dmt,vgt],91:kgt,92:[agt,aIe],93:TY,95:mU,96:Gmt},s0t={null:[mU,Wgt]},o0t={null:[42,95]},a0t={null:[]},u0t=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:o0t,contentInitial:e0t,disable:a0t,document:Zgt,flow:n0t,flowInitial:t0t,insideSpan:s0t,string:r0t,text:i0t},Symbol.toStringTag,{value:"Module"}));function l0t(e={}){const t=bmt([u0t].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:r(Imt),document:r(Pmt),flow:r(Hgt),string:r(Ggt),text:r(Ygt)};return n;function r(i){return s;function s(o){return Xgt(n,i,o)}}}const pfe=/[\0\t\n\r]/g;function c0t(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+s.toString(o),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(pfe.lastIndex=f,l=pfe.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}function f0t(e){for(;!lIe(e););return e}function mIe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const d0t=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function h0t(e){return e.replace(d0t,p0t)}function p0t(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return mIe(n.slice(s?2:1),s?16:10)}return SY(n)||e}const gU={}.hasOwnProperty,m0t=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),g0t(n)(f0t(l0t(n).document().write(c0t()(e,t,!0))))};function g0t(e={}){const t=gIe({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(je),autolinkProtocol:z,autolinkEmail:z,atxHeading:u(Oe),blockQuote:u(ue),characterEscape:z,characterReference:z,codeFenced:u(Fe),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:u(Fe,l),codeText:u($e,l),codeTextData:z,data:z,codeFlowValue:z,definition:u(Ge),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:u(Re),hardBreakEscape:u(Me),hardBreakTrailing:u(Me),htmlFlow:u(Ut,l),htmlFlowData:z,htmlText:u(Ut,l),htmlTextData:z,image:u(Qe),label:l,link:u(je),listItem:u(et),listItemValue:m,listOrdered:u(wt,p),listUnordered:u(wt),paragraph:u(ct),reference:J,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:u(Oe),strong:u(ft),thematicBreak:u(Dn)},exit:{atxHeading:f(),atxHeadingSequence:S,autolink:f(),autolinkEmail:ge,autolinkProtocol:le,blockQuote:f(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:ae,characterReferenceMarkerNumeric:ae,characterReferenceValue:ce,codeFenced:f(_),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:N,codeIndented:f(b),codeText:f(j),codeTextData:N,data:N,definition:f(),definitionDestinationString:x,definitionLabelString:E,definitionTitleString:w,emphasis:f(),hardBreakEscape:f(D),hardBreakTrailing:f(D),htmlFlow:f(B),htmlFlowData:N,htmlText:f(V),htmlTextData:N,image:f(U),label:k,labelText:P,lineEnding:$,link:f(G),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:se,resourceDestinationString:H,resourceTitleString:M,resource:F,setextHeading:f(O),setextHeadingLineSequence:C,setextHeadingText:I,strong:f(),thematicBreak:f()}},e.mdastExtensions||[]),n={};return r;function r(he){let _e={type:"root",children:[]};const ke=[_e],it=[],Ye=[],ut={stack:ke,tokenStack:it,config:t,enter:c,exit:d,buffer:l,resume:h,setData:s,getData:o};let tt=-1;for(;++tt<he.length;)if(he[tt][1].type==="listOrdered"||he[tt][1].type==="listUnordered")if(he[tt][0]==="enter")Ye.push(tt);else{const _t=Ye.pop();tt=i(he,_t,tt)}for(tt=-1;++tt<he.length;){const _t=t[he[tt][0]];gU.call(_t,he[tt][1].type)&&_t[he[tt][1].type].call(Object.assign({sliceSerialize:he[tt][2].sliceSerialize},ut),he[tt][1])}if(it.length>0){const _t=it[it.length-1];(_t[1]||mfe).call(ut,void 0,_t[0])}for(_e.position={start:a(he.length>0?he[0][1].start:{line:1,column:1,offset:0}),end:a(he.length>0?he[he.length-2][1].end:{line:1,column:1,offset:0})},tt=-1;++tt<t.transforms.length;)_e=t.transforms[tt](_e)||_e;return _e}function i(he,_e,ke){let it=_e-1,Ye=-1,ut=!1,tt,_t,In,Wt;for(;++it<=ke;){const Vt=he[it];if(Vt[1].type==="listUnordered"||Vt[1].type==="listOrdered"||Vt[1].type==="blockQuote"?(Vt[0]==="enter"?Ye++:Ye--,Wt=void 0):Vt[1].type==="lineEndingBlank"?Vt[0]==="enter"&&(tt&&!Wt&&!Ye&&!In&&(In=it),Wt=void 0):Vt[1].type==="linePrefix"||Vt[1].type==="listItemValue"||Vt[1].type==="listItemMarker"||Vt[1].type==="listItemPrefix"||Vt[1].type==="listItemPrefixWhitespace"||(Wt=void 0),!Ye&&Vt[0]==="enter"&&Vt[1].type==="listItemPrefix"||Ye===-1&&Vt[0]==="exit"&&(Vt[1].type==="listUnordered"||Vt[1].type==="listOrdered")){if(tt){let hr=it;for(_t=void 0;hr--;){const Yn=he[hr];if(Yn[1].type==="lineEnding"||Yn[1].type==="lineEndingBlank"){if(Yn[0]==="exit")continue;_t&&(he[_t][1].type="lineEndingBlank",ut=!0),Yn[1].type="lineEnding",_t=hr}else if(!(Yn[1].type==="linePrefix"||Yn[1].type==="blockQuotePrefix"||Yn[1].type==="blockQuotePrefixWhitespace"||Yn[1].type==="blockQuoteMarker"||Yn[1].type==="listItemIndent"))break}In&&(!_t||In<_t)&&(tt._spread=!0),tt.end=Object.assign({},_t?he[_t][1].start:Vt[1].end),he.splice(_t||it,0,["exit",tt,Vt[2]]),it++,ke++}Vt[1].type==="listItemPrefix"&&(tt={type:"listItem",_spread:!1,start:Object.assign({},Vt[1].start)},he.splice(it,0,["enter",tt,Vt[2]]),it++,ke++,In=void 0,Wt=!0)}}return he[_e][1]._spread=ut,ke}function s(he,_e){n[he]=_e}function o(he){return n[he]}function a(he){return{line:he.line,column:he.column,offset:he.offset}}function u(he,_e){return ke;function ke(it){c.call(this,he(it),it),_e&&_e.call(this,it)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(he,_e,ke){return this.stack[this.stack.length-1].children.push(he),this.stack.push(he),this.tokenStack.push([_e,ke]),he.position={start:a(_e.start)},he}function f(he){return _e;function _e(ke){he&&he.call(this,ke),d.call(this,ke)}}function d(he,_e){const ke=this.stack.pop(),it=this.tokenStack.pop();if(it)it[0].type!==he.type&&(_e?_e.call(this,he,it[0]):(it[1]||mfe).call(this,he,it[0]));else throw new Error("Cannot close `"+he.type+"` ("+Pb({start:he.start,end:he.end})+"): its not open");return ke.position.end=a(he.end),ke}function h(){return _mt(this.stack.pop())}function p(){s("expectingFirstListItemValue",!0)}function m(he){if(o("expectingFirstListItemValue")){const _e=this.stack[this.stack.length-2];_e.start=Number.parseInt(this.sliceSerialize(he),10),s("expectingFirstListItemValue")}}function g(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.lang=he}function y(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.meta=he}function v(){o("flowCodeInside")||(this.buffer(),s("flowCodeInside",!0))}function _(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),s("flowCodeInside")}function b(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he.replace(/(\r?\n|\r)$/g,"")}function E(he){const _e=this.resume(),ke=this.stack[this.stack.length-1];ke.label=_e,ke.identifier=kb(this.sliceSerialize(he)).toLowerCase()}function w(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.title=he}function x(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.url=he}function S(he){const _e=this.stack[this.stack.length-1];if(!_e.depth){const ke=this.sliceSerialize(he).length;_e.depth=ke}}function I(){s("setextHeadingSlurpLineEnding",!0)}function C(he){const _e=this.stack[this.stack.length-1];_e.depth=this.sliceSerialize(he).charCodeAt(0)===61?1:2}function O(){s("setextHeadingSlurpLineEnding")}function z(he){const _e=this.stack[this.stack.length-1];let ke=_e.children[_e.children.length-1];(!ke||ke.type!=="text")&&(ke=jt(),ke.position={start:a(he.start)},_e.children.push(ke)),this.stack.push(ke)}function N(he){const _e=this.stack.pop();_e.value+=this.sliceSerialize(he),_e.position.end=a(he.end)}function $(he){const _e=this.stack[this.stack.length-1];if(o("atHardBreak")){const ke=_e.children[_e.children.length-1];ke.position.end=a(he.end),s("atHardBreak");return}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(_e.type)&&(z.call(this,he),N.call(this,he))}function D(){s("atHardBreak",!0)}function B(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he}function V(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he}function j(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.value=he}function G(){const he=this.stack[this.stack.length-1];o("inReference")?(he.type+="Reference",he.referenceType=o("referenceType")||"shortcut",delete he.url,delete he.title):(delete he.identifier,delete he.label),s("referenceType")}function U(){const he=this.stack[this.stack.length-1];o("inReference")?(he.type+="Reference",he.referenceType=o("referenceType")||"shortcut",delete he.url,delete he.title):(delete he.identifier,delete he.label),s("referenceType")}function P(he){const _e=this.stack[this.stack.length-2],ke=this.sliceSerialize(he);_e.label=h0t(ke),_e.identifier=kb(ke).toLowerCase()}function k(){const he=this.stack[this.stack.length-1],_e=this.resume(),ke=this.stack[this.stack.length-1];s("inReference",!0),ke.type==="link"?ke.children=he.children:ke.alt=_e}function H(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.url=he}function M(){const he=this.resume(),_e=this.stack[this.stack.length-1];_e.title=he}function F(){s("inReference")}function J(){s("referenceType","collapsed")}function se(he){const _e=this.resume(),ke=this.stack[this.stack.length-1];ke.label=_e,ke.identifier=kb(this.sliceSerialize(he)).toLowerCase(),s("referenceType","full")}function ae(he){s("characterReferenceType",he.type)}function ce(he){const _e=this.sliceSerialize(he),ke=o("characterReferenceType");let it;ke?(it=mIe(_e,ke==="characterReferenceMarkerNumeric"?10:16),s("characterReferenceType")):it=SY(_e);const Ye=this.stack.pop();Ye.value+=it,Ye.position.end=a(he.end)}function le(he){N.call(this,he);const _e=this.stack[this.stack.length-1];_e.url=this.sliceSerialize(he)}function ge(he){N.call(this,he);const _e=this.stack[this.stack.length-1];_e.url="mailto:"+this.sliceSerialize(he)}function ue(){return{type:"blockquote",children:[]}}function Fe(){return{type:"code",lang:null,meta:null,value:""}}function $e(){return{type:"inlineCode",value:""}}function Ge(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Re(){return{type:"emphasis",children:[]}}function Oe(){return{type:"heading",depth:void 0,children:[]}}function Me(){return{type:"break"}}function Ut(){return{type:"html",value:""}}function Qe(){return{type:"image",title:null,url:"",alt:null}}function je(){return{type:"link",title:null,url:"",children:[]}}function wt(he){return{type:"list",ordered:he.type==="listOrdered",start:null,spread:he._spread,children:[]}}function et(he){return{type:"listItem",spread:he._spread,checked:null,children:[]}}function ct(){return{type:"paragraph",children:[]}}function ft(){return{type:"strong",children:[]}}function jt(){return{type:"text",value:""}}function Dn(){return{type:"thematicBreak"}}}function gIe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?gIe(e,r):y0t(e,r)}return e}function y0t(e,t){let n;for(n in t)if(gU.call(t,n)){const r=n==="canContainEols"||n==="transforms",s=(gU.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),o=t[n];o&&(r?e[n]=[...s,...o]:Object.assign(s,o))}}function mfe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Pb({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Pb({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Pb({start:t.start,end:t.end})+") is still open")}function v0t(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return m0t(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var ws=function(e,t,n){var r={type:String(e)};return n==null&&(typeof t=="string"||Array.isArray(t))?n=t:Object.assign(r,t),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r};const Yk={}.hasOwnProperty;function _0t(e,t){const n=t.data||{};return"value"in t&&!(Yk.call(n,"hName")||Yk.call(n,"hProperties")||Yk.call(n,"hChildren"))?e.augment(t,ws("text",t.value)):e(t,"div",sa(e,t))}function yIe(e,t,n){const r=t&&t.type;let i;if(!r)throw new Error("Expected node, got `"+t+"`");return Yk.call(e.handlers,r)?i=e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?i=b0t:i=e.unknownHandler,(typeof i=="function"?i:_0t)(e,t,n)}function b0t(e,t){return"children"in t?{...t,children:sa(e,t)}:t}function sa(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const s=yIe(e,r[i],t);if(s){if(i&&r[i-1].type==="break"&&(!Array.isArray(s)&&s.type==="text"&&(s.value=s.value.replace(/^\s+/,"")),!Array.isArray(s)&&s.type==="element")){const o=s.children[0];o&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(s)?n.push(...s):n.push(s)}}}return n}const vIe=function(e){if(e==null)return S0t;if(typeof e=="string")return x0t(e);if(typeof e=="object")return Array.isArray(e)?w0t(e):E0t(e);if(typeof e=="function")return T6(e);throw new Error("Expected function, string, or object as test")};function w0t(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=vIe(e[n]);return T6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].call(this,...i))return!0;return!1}}function E0t(e){return T6(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function x0t(e){return T6(t);function t(n){return n&&n.type===e}}function T6(e){return t;function t(...n){return!!e.call(this,...n)}}function S0t(){return!0}const T0t=!0,A0t="skip",gfe=!1,C0t=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const i=vIe(t),s=r?-1:1;o(e,null,[])();function o(a,u,l){const c=typeof a=="object"&&a!==null?a:{};let f;return typeof c.type=="string"&&(f=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0,Object.defineProperty(d,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})),d;function d(){let h=[],p,m,g;if((!t||i(a,u,l[l.length-1]||null))&&(h=I0t(n(a,l)),h[0]===gfe))return h;if(a.children&&h[0]!==A0t)for(m=(r?a.children.length:-1)+s,g=l.concat(a);m>-1&&m<a.children.length;){if(p=o(a.children[m],m,g)(),p[0]===gfe)return p;m=typeof p[1]=="number"?p[1]:m+s}return h}}};function I0t(e){return Array.isArray(e)?e:typeof e=="number"?[T0t,e]:[e]}const AY=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),C0t(e,t,i,r);function i(s,o){const a=o[o.length-1];return n(s,a?a.children.indexOf(s):null,a)}},_Ie=wIe("start"),bIe=wIe("end");function wIe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function O0t(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const yfe={}.hasOwnProperty;function P0t(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return AY(e,"definition",r=>{const i=vfe(r.identifier);i&&!yfe.call(t,i)&&(t[i]=r)}),n;function n(r){const i=vfe(r);return i&&yfe.call(t,i)?t[i]:null}}function vfe(e){return String(e||"").toUpperCase()}function PE(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Yu(e.charCodeAt(n+1))&&Yu(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Gh(e,t){const n=[];let r=-1;for(t&&n.push(ws("text",`
`));++r<e.length;)r&&n.push(ws("text",`
`)),n.push(e[r]);return t&&e.length>0&&n.push(ws("text",`
`)),n}function k0t(e){let t=-1;const n=[];for(;++t<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[t].toUpperCase()];if(!r)continue;const i=sa(e,r),s=String(r.identifier),o=PE(s.toLowerCase());let a=0;const u=[];for(;++a<=e.footnoteCounts[s];){const f={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};a>1&&f.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(a)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(f)}const l=i[i.length-1];if(l&&l.type==="element"&&l.tagName==="p"){const f=l.children[l.children.length-1];f&&f.type==="text"?f.value+=" ":l.children.push({type:"text",value:" "}),l.children.push(...u)}else i.push(...u);const c={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+o},children:Gh(i,!0)};r.position&&(c.position=r.position),n.push(c)}return n.length===0?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[ws("text",e.footnoteLabel)]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:Gh(n,!0)},{type:"text",value:`
`}]}}function $0t(e,t){return e(t,"blockquote",Gh(sa(e,t),!0))}function R0t(e,t){return[e(t,"br"),ws("text",`
`)]}function N0t(e,t){const n=t.value?t.value+`
`:"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),i={};r&&(i.className=["language-"+r]);const s=e(t,"code",i,[ws("text",n)]);return t.meta&&(s.data={meta:t.meta}),e(t.position,"pre",[s])}function D0t(e,t){return e(t,"del",sa(e,t))}function L0t(e,t){return e(t,"em",sa(e,t))}function EIe(e,t){const n=String(t.identifier),r=PE(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let s;i===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,s=e.footnoteOrder.length):(e.footnoteCounts[n]++,s=i+1);const o=e.footnoteCounts[n];return e(t,"sup",[e(t.position,"a",{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[ws("text",String(s))])])}function M0t(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const i=String(r);return n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:t.children}],position:t.position},EIe(e,{type:"footnoteReference",identifier:i,position:t.position})}function F0t(e,t){return e(t,"h"+t.depth,sa(e,t))}function B0t(e,t){return e.dangerous?e.augment(t,ws("raw",t.value)):null}function xIe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return ws("text","!["+t.alt+r);const i=sa(e,t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift(ws("text","["));const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push(ws("text",r)),i}function j0t(e,t){const n=e.definition(t.identifier);if(!n)return xIe(e,t);const r={src:PE(n.url||""),alt:t.alt};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"img",r)}function z0t(e,t){const n={src:PE(t.url),alt:t.alt};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"img",n)}function U0t(e,t){return e(t,"code",[ws("text",t.value.replace(/\r?\n|\r/g," "))])}function V0t(e,t){const n=e.definition(t.identifier);if(!n)return xIe(e,t);const r={href:PE(n.url||"")};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"a",r,sa(e,t))}function H0t(e,t){const n={href:PE(t.url)};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"a",n,sa(e,t))}function q0t(e,t,n){const r=sa(e,t),i=n?W0t(n):SIe(t),s={},o=[];if(typeof t.checked=="boolean"){let l;r[0]&&r[0].type==="element"&&r[0].tagName==="p"?l=r[0]:(l=e(null,"p",[]),r.unshift(l)),l.children.length>0&&l.children.unshift(ws("text"," ")),l.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const l=r[a];(i||a!==0||l.type!=="element"||l.tagName!=="p")&&o.push(ws("text",`
`)),l.type==="element"&&l.tagName==="p"&&!i?o.push(...l.children):o.push(l)}const u=r[r.length-1];return u&&(i||!("tagName"in u)||u.tagName!=="p")&&o.push(ws("text",`
`)),e(t,"li",s,o)}function W0t(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=SIe(n[r]);return!!t}function SIe(e){const t=e.spread;return t??e.children.length>1}function G0t(e,t){const n={},r=t.ordered?"ol":"ul",i=sa(e,t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<i.length;){const o=i[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,Gh(i,!0))}function Y0t(e,t){return e(t,"p",sa(e,t))}function K0t(e,t){return e.augment(t,ws("root",Gh(sa(e,t))))}function X0t(e,t){return e(t,"strong",sa(e,t))}function Q0t(e,t){const n=t.children;let r=-1;const i=t.align||[],s=[];for(;++r<n.length;){const o=n[r].children,a=r===0?"th":"td",u=[];let l=-1;const c=t.align?i.length:o.length;for(;++l<c;){const f=o[l];u.push(e(f,a,{align:i[l]},f?sa(e,f):[]))}s[r]=e(n[r],"tr",Gh(u,!0))}return e(t,"table",Gh([e(s[0].position,"thead",Gh([s[0]],!0))].concat(s[1]?e({start:_Ie(s[1]),end:bIe(s[s.length-1])},"tbody",Gh(s.slice(1),!0)):[]),!0))}const _fe=9,bfe=32;function J0t(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(wfe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(wfe(t.slice(i),i>0,!1)),s.join("")}function wfe(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===_fe||s===bfe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===_fe||s===bfe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Z0t(e,t){return e.augment(t,ws("text",J0t(String(t.value))))}function eyt(e,t){return e(t,"hr")}const tyt={blockquote:$0t,break:R0t,code:N0t,delete:D0t,emphasis:L0t,footnoteReference:EIe,footnote:M0t,heading:F0t,html:B0t,imageReference:j0t,image:z0t,inlineCode:U0t,linkReference:V0t,link:H0t,listItem:q0t,list:G0t,paragraph:Y0t,root:K0t,strong:X0t,table:Q0t,text:Z0t,thematicBreak:eyt,toml:aP,yaml:aP,definition:aP,footnoteDefinition:aP};function aP(){return null}const nyt={}.hasOwnProperty;function ryt(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,o.footnoteLabel=n.footnoteLabel||"Footnotes",o.footnoteLabelTagName=n.footnoteLabelTagName||"h2",o.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},o.footnoteBackLabel=n.footnoteBackLabel||"Back to content",o.definition=P0t(e),o.footnoteById=i,o.footnoteOrder=[],o.footnoteCounts={},o.augment=s,o.handlers={...tyt,...n.handlers},o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,AY(e,"footnoteDefinition",a=>{const u=String(a.identifier).toUpperCase();nyt.call(i,u)||(i[u]=a)}),o;function s(a,u){if(a&&"data"in a&&a.data){const l=a.data;l.hName&&(u.type!=="element"&&(u={type:"element",tagName:"",properties:{},children:[]}),u.tagName=l.hName),u.type==="element"&&l.hProperties&&(u.properties={...u.properties,...l.hProperties}),"children"in u&&u.children&&l.hChildren&&(u.children=l.hChildren)}if(a){const l="type"in a?a:{position:a};O0t(l)||(u.position={start:_Ie(l),end:bIe(l)})}return u}function o(a,u,l,c){return Array.isArray(l)&&(c=l,l={}),s(a,{type:"element",tagName:u,properties:l||{},children:c||[]})}}function TIe(e,t){const n=ryt(e,t),r=yIe(n,e,null),i=k0t(n);return i&&r.children.push(ws("text",`
`),i),Array.isArray(r)?{type:"root",children:r}:r}const iyt=function(e,t){return e&&"run"in e?oyt(e,t):ayt(e||t)},syt=iyt;function oyt(e,t){return(n,r,i)=>{e.run(TIe(n,t),r,s=>{i(s)})}}function ayt(e){return t=>TIe(t,e)}var AIe={exports:{}},uyt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",lyt=uyt,cyt=lyt;function CIe(){}function IIe(){}IIe.resetWarningCache=CIe;var fyt=function(){function e(r,i,s,o,a,u){if(u!==cyt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:IIe,resetWarningCache:CIe};return n.PropTypes=n,n};AIe.exports=fyt();var dyt=AIe.exports;const Mt=pl(dyt);let KC=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};KC.prototype.property={};KC.prototype.normal={};KC.prototype.space=null;function OIe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new KC(n,r,t)}function lA(e){return e.toLowerCase()}let dc=class{constructor(t,n){this.property=t,this.attribute=n}};dc.prototype.space=null;dc.prototype.boolean=!1;dc.prototype.booleanish=!1;dc.prototype.overloadedBoolean=!1;dc.prototype.number=!1;dc.prototype.commaSeparated=!1;dc.prototype.spaceSeparated=!1;dc.prototype.commaOrSpaceSeparated=!1;dc.prototype.mustUseProperty=!1;dc.prototype.defined=!1;let hyt=0;const _n=Iv(),Xi=Iv(),PIe=Iv(),Ke=Iv(),Gr=Iv(),$b=Iv(),Du=Iv();function Iv(){return 2**++hyt}const yU=Object.freeze(Object.defineProperty({__proto__:null,boolean:_n,booleanish:Xi,commaOrSpaceSeparated:Du,commaSeparated:$b,number:Ke,overloadedBoolean:PIe,spaceSeparated:Gr},Symbol.toStringTag,{value:"Module"})),V9=Object.keys(yU);class CY extends dc{constructor(t,n,r,i){let s=-1;if(super(t,n),Efe(this,"space",i),typeof r=="number")for(;++s<V9.length;){const o=V9[s];Efe(this,V9[s],(r&yU[o])===yU[o])}}}CY.prototype.defined=!0;function Efe(e,t,n){n&&(e[t]=n)}const pyt={}.hasOwnProperty;function kE(e){const t={},n={};let r;for(r in e.properties)if(pyt.call(e.properties,r)){const i=e.properties[r],s=new CY(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[lA(r)]=r,n[lA(s.attribute)]=r}return new KC(t,n,e.space)}const kIe=kE({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),$Ie=kE({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function RIe(e,t){return t in e?e[t]:t}function NIe(e,t){return RIe(e,t.toLowerCase())}const DIe=kE({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:NIe,properties:{xmlns:null,xmlnsXLink:null}}),LIe=kE({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Xi,ariaAutoComplete:null,ariaBusy:Xi,ariaChecked:Xi,ariaColCount:Ke,ariaColIndex:Ke,ariaColSpan:Ke,ariaControls:Gr,ariaCurrent:null,ariaDescribedBy:Gr,ariaDetails:null,ariaDisabled:Xi,ariaDropEffect:Gr,ariaErrorMessage:null,ariaExpanded:Xi,ariaFlowTo:Gr,ariaGrabbed:Xi,ariaHasPopup:null,ariaHidden:Xi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Gr,ariaLevel:Ke,ariaLive:null,ariaModal:Xi,ariaMultiLine:Xi,ariaMultiSelectable:Xi,ariaOrientation:null,ariaOwns:Gr,ariaPlaceholder:null,ariaPosInSet:Ke,ariaPressed:Xi,ariaReadOnly:Xi,ariaRelevant:null,ariaRequired:Xi,ariaRoleDescription:Gr,ariaRowCount:Ke,ariaRowIndex:Ke,ariaRowSpan:Ke,ariaSelected:Xi,ariaSetSize:Ke,ariaSort:null,ariaValueMax:Ke,ariaValueMin:Ke,ariaValueNow:Ke,ariaValueText:null,role:null}}),myt=kE({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:NIe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:$b,acceptCharset:Gr,accessKey:Gr,action:null,allow:null,allowFullScreen:_n,allowPaymentRequest:_n,allowUserMedia:_n,alt:null,as:null,async:_n,autoCapitalize:null,autoComplete:Gr,autoFocus:_n,autoPlay:_n,capture:_n,charSet:null,checked:_n,cite:null,className:Gr,cols:Ke,colSpan:null,content:null,contentEditable:Xi,controls:_n,controlsList:Gr,coords:Ke|$b,crossOrigin:null,data:null,dateTime:null,decoding:null,default:_n,defer:_n,dir:null,dirName:null,disabled:_n,download:PIe,draggable:Xi,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:_n,formTarget:null,headers:Gr,height:Ke,hidden:_n,high:Ke,href:null,hrefLang:null,htmlFor:Gr,httpEquiv:Gr,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:_n,itemId:null,itemProp:Gr,itemRef:Gr,itemScope:_n,itemType:Gr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:_n,low:Ke,manifest:null,max:null,maxLength:Ke,media:null,method:null,min:null,minLength:Ke,multiple:_n,muted:_n,name:null,nonce:null,noModule:_n,noValidate:_n,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:_n,optimum:Ke,pattern:null,ping:Gr,placeholder:null,playsInline:_n,poster:null,preload:null,readOnly:_n,referrerPolicy:null,rel:Gr,required:_n,reversed:_n,rows:Ke,rowSpan:Ke,sandbox:Gr,scope:null,scoped:_n,seamless:_n,selected:_n,shape:null,size:Ke,sizes:null,slot:null,span:Ke,spellCheck:Xi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ke,step:null,style:null,tabIndex:Ke,target:null,title:null,translate:null,type:null,typeMustMatch:_n,useMap:null,value:Xi,width:Ke,wrap:null,align:null,aLink:null,archive:Gr,axis:null,background:null,bgColor:null,border:Ke,borderColor:null,bottomMargin:Ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:_n,declare:_n,event:null,face:null,frame:null,frameBorder:null,hSpace:Ke,leftMargin:Ke,link:null,longDesc:null,lowSrc:null,marginHeight:Ke,marginWidth:Ke,noResize:_n,noHref:_n,noShade:_n,noWrap:_n,object:null,profile:null,prompt:null,rev:null,rightMargin:Ke,rules:null,scheme:null,scrolling:Xi,standby:null,summary:null,text:null,topMargin:Ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:_n,disableRemotePlayback:_n,prefix:null,property:null,results:Ke,security:null,unselectable:null}}),gyt=kE({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:RIe,properties:{about:Du,accentHeight:Ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ke,amplitude:Ke,arabicForm:null,ascent:Ke,attributeName:null,attributeType:null,azimuth:Ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ke,by:null,calcMode:null,capHeight:Ke,className:Gr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ke,diffuseConstant:Ke,direction:null,display:null,dur:null,divisor:Ke,dominantBaseline:null,download:_n,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ke,enableBackground:null,end:null,event:null,exponent:Ke,externalResourcesRequired:null,fill:null,fillOpacity:Ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:$b,g2:$b,glyphName:$b,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ke,horizOriginX:Ke,horizOriginY:Ke,id:null,ideographic:Ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ke,k:Ke,k1:Ke,k2:Ke,k3:Ke,k4:Ke,kernelMatrix:Du,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ke,overlineThickness:Ke,paintOrder:null,panose1:null,path:null,pathLength:Ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Gr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ke,pointsAtY:Ke,pointsAtZ:Ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Du,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Du,rev:Du,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Du,requiredFeatures:Du,requiredFonts:Du,requiredFormats:Du,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ke,specularExponent:Ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ke,strikethroughThickness:Ke,string:null,stroke:null,strokeDashArray:Du,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ke,strokeOpacity:Ke,strokeWidth:null,style:null,surfaceScale:Ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Du,tabIndex:Ke,tableValues:null,target:null,targetX:Ke,targetY:Ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Du,to:null,transform:null,u1:null,u2:null,underlinePosition:Ke,underlineThickness:Ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ke,values:null,vAlphabetic:Ke,vMathematical:Ke,vectorEffect:null,vHanging:Ke,vIdeographic:Ke,version:null,vertAdvY:Ke,vertOriginX:Ke,vertOriginY:Ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),yyt=/^data[-\w.:]+$/i,xfe=/-[a-z]/g,vyt=/[A-Z]/g;function A6(e,t){const n=lA(t);let r=t,i=dc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&yyt.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(xfe,byt);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!xfe.test(s)){let o=s.replace(vyt,_yt);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=CY}return new i(r,t)}function _yt(e){return"-"+e.toLowerCase()}function byt(e){return e.charAt(1).toUpperCase()}const Sfe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},XC=OIe([$Ie,kIe,DIe,LIe,myt],"html"),$E=OIe([$Ie,kIe,DIe,LIe,gyt],"svg");function wyt(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{AY(t,"element",(n,r,i)=>{const s=i;let o;if(e.allowedElements?o=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(o=e.disallowedElements.includes(n.tagName)),!o&&e.allowElement&&typeof r=="number"&&(o=!e.allowElement(n,r,s)),o&&typeof r=="number")return e.unwrapDisallowed&&n.children?s.children.splice(r,1,...n.children):s.children.splice(r,1),r})}}var MIe={exports:{}},xr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IY=Symbol.for("react.element"),OY=Symbol.for("react.portal"),C6=Symbol.for("react.fragment"),I6=Symbol.for("react.strict_mode"),O6=Symbol.for("react.profiler"),P6=Symbol.for("react.provider"),k6=Symbol.for("react.context"),Eyt=Symbol.for("react.server_context"),$6=Symbol.for("react.forward_ref"),R6=Symbol.for("react.suspense"),N6=Symbol.for("react.suspense_list"),D6=Symbol.for("react.memo"),L6=Symbol.for("react.lazy"),xyt=Symbol.for("react.offscreen"),FIe;FIe=Symbol.for("react.module.reference");function hc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case IY:switch(e=e.type,e){case C6:case O6:case I6:case R6:case N6:return e;default:switch(e=e&&e.$$typeof,e){case Eyt:case k6:case $6:case L6:case D6:case P6:return e;default:return t}}case OY:return t}}}xr.ContextConsumer=k6;xr.ContextProvider=P6;xr.Element=IY;xr.ForwardRef=$6;xr.Fragment=C6;xr.Lazy=L6;xr.Memo=D6;xr.Portal=OY;xr.Profiler=O6;xr.StrictMode=I6;xr.Suspense=R6;xr.SuspenseList=N6;xr.isAsyncMode=function(){return!1};xr.isConcurrentMode=function(){return!1};xr.isContextConsumer=function(e){return hc(e)===k6};xr.isContextProvider=function(e){return hc(e)===P6};xr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===IY};xr.isForwardRef=function(e){return hc(e)===$6};xr.isFragment=function(e){return hc(e)===C6};xr.isLazy=function(e){return hc(e)===L6};xr.isMemo=function(e){return hc(e)===D6};xr.isPortal=function(e){return hc(e)===OY};xr.isProfiler=function(e){return hc(e)===O6};xr.isStrictMode=function(e){return hc(e)===I6};xr.isSuspense=function(e){return hc(e)===R6};xr.isSuspenseList=function(e){return hc(e)===N6};xr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===C6||e===O6||e===I6||e===R6||e===N6||e===xyt||typeof e=="object"&&e!==null&&(e.$$typeof===L6||e.$$typeof===D6||e.$$typeof===P6||e.$$typeof===k6||e.$$typeof===$6||e.$$typeof===FIe||e.getModuleId!==void 0)};xr.typeOf=hc;MIe.exports=xr;var Syt=MIe.exports;const Tyt=pl(Syt);function Ayt(e){const t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function Tfe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function BIe(e){return e.join(" ").trim()}function Afe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function jIe(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var PY={exports:{}},Cfe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Cyt=/\n/g,Iyt=/^\s*/,Oyt=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Pyt=/^:\s*/,kyt=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,$yt=/^[;\s]*/,Ryt=/^\s+|\s+$/g,Nyt=`
`,Ife="/",Ofe="*",Iy="",Dyt="comment",Lyt="declaration",Myt=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(Cyt);m&&(n+=m.length);var g=p.lastIndexOf(Nyt);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(Iyt)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Ife!=e.charAt(0)||Ofe!=e.charAt(1))){for(var m=2;Iy!=e.charAt(m)&&(Ofe!=e.charAt(m)||Ife!=e.charAt(m+1));)++m;if(m+=2,Iy===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:Dyt,comment:g})}}function d(){var p=s(),m=u(Oyt);if(m){if(f(),!u(Pyt))return a("property missing ':'");var g=u(kyt),y=p({type:Lyt,property:Pfe(m[0].replace(Cfe,Iy)),value:g?Pfe(g[0].replace(Cfe,Iy)):Iy});return u($yt),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Pfe(e){return e?e.replace(Ryt,Iy):Iy}var Fyt=Myt;function zIe(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,i=Fyt(e),s=typeof t=="function",o,a,u=0,l=i.length;u<l;u++)r=i[u],o=r.property,a=r.value,s?t(o,a,r):a&&(n||(n={}),n[o]=a);return n}PY.exports=zIe;PY.exports.default=zIe;var Byt=PY.exports;const jyt=pl(Byt),vU={}.hasOwnProperty,zyt=new Set(["table","thead","tbody","tfoot","tr"]);function UIe(e,t){const n=[];let r=-1,i;for(;++r<t.children.length;)i=t.children[r],i.type==="element"?n.push(Uyt(e,i,r,t)):i.type==="text"?(t.type!=="element"||!zyt.has(t.tagName)||!Ayt(i))&&n.push(i.value):i.type==="raw"&&!e.options.skipHtml&&n.push(i.value);return n}function Uyt(e,t,n,r){const i=e.options,s=i.transformLinkUri===void 0?Upt:i.transformLinkUri,o=e.schema,a=t.tagName,u={};let l=o,c;if(o.space==="html"&&a==="svg"&&(l=$E,e.schema=l),t.properties)for(c in t.properties)vU.call(t.properties,c)&&Hyt(u,c,t.properties[c],e);(a==="ol"||a==="ul")&&e.listDepth++;const f=UIe(e,t);(a==="ol"||a==="ul")&&e.listDepth--,e.schema=o;const d=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},h=i.components&&vU.call(i.components,a)?i.components[a]:a,p=typeof h=="string"||h===L.Fragment;if(!Tyt.isValidElementType(h))throw new TypeError(`Component for name \`${a}\` not defined or is not renderable`);if(u.key=[a,d.start.line,d.start.column,n].join("-"),a==="a"&&i.linkTarget&&(u.target=typeof i.linkTarget=="function"?i.linkTarget(String(u.href||""),t.children,typeof u.title=="string"?u.title:null):i.linkTarget),a==="a"&&s&&(u.href=s(String(u.href||""),t.children,typeof u.title=="string"?u.title:null)),!p&&a==="code"&&r.type==="element"&&r.tagName!=="pre"&&(u.inline=!0),!p&&(a==="h1"||a==="h2"||a==="h3"||a==="h4"||a==="h5"||a==="h6")&&(u.level=Number.parseInt(a.charAt(1),10)),a==="img"&&i.transformImageUri&&(u.src=i.transformImageUri(String(u.src||""),String(u.alt||""),typeof u.title=="string"?u.title:null)),!p&&a==="li"&&r.type==="element"){const m=Vyt(t);u.checked=m&&m.properties?!!m.properties.checked:null,u.index=H9(r,t),u.ordered=r.tagName==="ol"}return!p&&(a==="ol"||a==="ul")&&(u.ordered=a==="ol",u.depth=e.listDepth),(a==="td"||a==="th")&&(u.align&&(u.style||(u.style={}),u.style.textAlign=u.align,delete u.align),p||(u.isHeader=a==="th")),!p&&a==="tr"&&r.type==="element"&&(u.isHeader=r.tagName==="thead"),i.sourcePos&&(u["data-sourcepos"]=Gyt(d)),!p&&i.rawSourcePos&&(u.sourcePosition=t.position),!p&&i.includeElementIndex&&(u.index=H9(r,t),u.siblingCount=H9(r)),p||(u.node=t),f.length>0?L.createElement(h,u,f):L.createElement(h,u)}function Vyt(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function H9(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function Hyt(e,t,n,r){const i=A6(r.schema,t);let s=n;s==null||s!==s||(Array.isArray(s)&&(s=i.commaSeparated?jIe(s):BIe(s)),i.property==="style"&&typeof s=="string"&&(s=qyt(s)),i.space&&i.property?e[vU.call(Sfe,i.property)?Sfe[i.property]:i.property]=s:i.attribute&&(e[i.attribute]=s))}function qyt(e){const t={};try{jyt(e,n)}catch{}return t;function n(r,i){const s=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[s.replace(/-([a-z])/g,Wyt)]=i}}function Wyt(e,t){return t.toUpperCase()}function Gyt(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const kfe={}.hasOwnProperty,Yyt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",uP={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function VIe(e){for(const s in uP)if(kfe.call(uP,s)&&kfe.call(e,s)){const o=uP[s];console.warn(`[react-markdown] Warning: please ${o.to?`use \`${o.to}\` instead of`:"remove"} \`${s}\` (see <${Yyt}#${o.id}> for more info)`),delete uP[s]}const t=mmt().use(v0t).use(e.remarkPlugins||[]).use(syt,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(wyt,e),n=new emt;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let i=L.createElement(L.Fragment,{},UIe({options:e,schema:XC,listDepth:0},r));return e.className&&(i=L.createElement("div",{className:e.className},i)),i}VIe.propTypes={children:Mt.string,className:Mt.string,allowElement:Mt.func,allowedElements:Mt.arrayOf(Mt.string),disallowedElements:Mt.arrayOf(Mt.string),unwrapDisallowed:Mt.bool,remarkPlugins:Mt.arrayOf(Mt.oneOfType([Mt.object,Mt.func,Mt.arrayOf(Mt.oneOfType([Mt.bool,Mt.string,Mt.object,Mt.func,Mt.arrayOf(Mt.any)]))])),rehypePlugins:Mt.arrayOf(Mt.oneOfType([Mt.object,Mt.func,Mt.arrayOf(Mt.oneOfType([Mt.bool,Mt.string,Mt.object,Mt.func,Mt.arrayOf(Mt.any)]))])),sourcePos:Mt.bool,rawSourcePos:Mt.bool,skipHtml:Mt.bool,includeElementIndex:Mt.bool,transformLinkUri:Mt.oneOfType([Mt.func,Mt.bool]),linkTarget:Mt.oneOfType([Mt.func,Mt.string]),transformImageUri:Mt.func,components:Mt.object};const HIe=-1,M6=0,pD=1,mD=2,kY=3,$Y=4,RY=5,NY=6,qIe=7,WIe=8,$fe=typeof self=="object"?self:globalThis,Kyt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case M6:case HIe:return n(o,i);case pD:{const a=n([],i);for(const u of o)a.push(r(u));return a}case mD:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case kY:return n(new Date(o),i);case $Y:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case RY:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case NY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case qIe:{const{name:a,message:u}=o;return n(new $fe[a](u),i)}case WIe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new $fe[s](o),i)};return r},Rfe=e=>Kyt(new Map,e)(0),c_="",{toString:Xyt}={},{keys:Qyt}=Object,Jx=e=>{const t=typeof e;if(t!=="object"||!e)return[M6,t];const n=Xyt.call(e).slice(8,-1);switch(n){case"Array":return[pD,c_];case"Object":return[mD,c_];case"Date":return[kY,c_];case"RegExp":return[$Y,c_];case"Map":return[RY,c_];case"Set":return[NY,c_]}return n.includes("Array")?[pD,n]:n.includes("Error")?[qIe,n]:[mD,n]},lP=([e,t])=>e===M6&&(t==="function"||t==="symbol"),Jyt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=Jx(o);switch(a){case M6:{let c=o;switch(u){case"bigint":a=WIe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([HIe],o)}return i([a,c],o)}case pD:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case mD:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of Qyt(o))(e||!lP(Jx(o[d])))&&c.push([s(d),s(o[d])]);return f}case kY:return i([a,o.toISOString()],o);case $Y:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case RY:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(lP(Jx(d))||lP(Jx(h))))&&c.push([s(d),s(h)]);return f}case NY:{const c=[],f=i([a,c],o);for(const d of o)(e||!lP(Jx(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Nfe=(e,{json:t,lossy:n}={})=>{const r=[];return Jyt(!(t||n),!!t,new Map,r)(e),r},Dfe=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Rfe(Nfe(e,t)):structuredClone(e):(e,t)=>Rfe(Nfe(e,t)),Lfe=/[#.]/g;function Zyt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Lfe.lastIndex=i;const a=Lfe.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const e1t=new Set(["button","menu","reset","submit"]),_U={}.hasOwnProperty;function GIe(e,t,n){const r=n&&i1t(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=Zyt(s,t),l.tagName=l.tagName.toLowerCase(),r&&_U.call(r,l.tagName)&&(l.tagName=r[l.tagName]),t1t(o,l.tagName)){let c;for(c in o)_U.call(o,c)&&n1t(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)bU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function t1t(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?e1t.has(e.type.toLowerCase()):!("value"in e)}function n1t(e,t,n,r){const i=A6(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Tfe(r):i.commaSeparated?o=Afe(r):i.commaOrSpaceSeparated?o=Tfe(Afe(r).join(" ")):o=Mfe(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?r1t(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Mfe(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function bU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)bU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?bU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Mfe(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||lA(n)===lA(t)))return!0}return n}function r1t(e){const t=[];let n;for(n in e)_U.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function i1t(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const s1t=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],o1t=GIe(XC,"div"),a1t=GIe($E,"g",s1t),q9=/\r?\n|\r/g;function u1t(e){const t=String(e),n=[];for(q9.lastIndex=0;q9.test(t);)n.push(q9.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const qy={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},YIe={}.hasOwnProperty,l1t=Object.prototype;function c1t(e,t){const n=t||{};return DY({file:n.file||void 0,location:!1,schema:n.space==="svg"?$E:XC,verbose:n.verbose||!1},e)}function DY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},Kk(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:KIe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=u1t(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},Kk(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},Kk(e,r,n),n}default:return n=f1t(e,t),n}}function KIe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=DY(e,t[n]);r.push(i)}return r}function f1t(e,t){const n=e.schema;e.schema=t.namespaceURI===qy.svg?$E:XC;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;YIe.call(l1t,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?a1t:o1t)(t.tagName,i,KIe(e,t.childNodes));if(Kk(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&nb(u.startTag),c=u&&u.endTag&&nb(u.endTag),f=DY(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function Kk(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=d1t(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function d1t(e,t,n){const r=nb(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)YIe.call(n.attrs,o)&&(s[A6(e.schema,o).property]=nb(n.attrs[o]));n.startTag;const a=nb(n.startTag),u=n.endTag?nb(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function nb(e){const t=Ffe({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Ffe({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Ffe(e){return e.line&&e.column?e:void 0}const Bfe={}.hasOwnProperty;function XIe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Bfe.call(i,e)){const u=String(i[e]);o=Bfe.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const h1t={},p1t={}.hasOwnProperty,QIe=XIe("type",{handlers:{root:g1t,element:w1t,text:_1t,comment:b1t,doctype:v1t}});function m1t(e,t){const r=(t||h1t).space;return QIe(e,r==="svg"?$E:XC)}function g1t(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=LY(e.children,n,t),RE(e,n),n}function y1t(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=LY(e.children,n,t),RE(e,n),n}function v1t(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return RE(e,t),t}function _1t(e){const t={nodeName:"#text",value:e.value,parentNode:null};return RE(e,t),t}function b1t(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return RE(e,t),t}function w1t(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=$E);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&p1t.call(e.properties,s)){const u=E1t(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:qy[o],childNodes:[],parentNode:null};return a.childNodes=LY(e.children,a,r),RE(e,a),e.tagName==="template"&&e.content&&(a.content=y1t(e.content,r)),a}function E1t(e,t,n){const r=A6(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?jIe(n):BIe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=qy[r.space]}return i}function LY(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=QIe(e[r],n);s.parentNode=t,i.push(s)}return i}function RE(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const x1t=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],S1t=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),ai="";var Y;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(Y=Y||(Y={}));const ja={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function JIe(e){return e>=55296&&e<=57343}function T1t(e){return e>=56320&&e<=57343}function A1t(e,t){return(e-55296)*1024+9216+t}function ZIe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function eOe(e){return e>=64976&&e<=65007||S1t.has(e)}var we;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(we=we||(we={}));const C1t=65536;class I1t{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=C1t,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(T1t(n))return this.pos++,this._addGap(),A1t(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Y.EOF;return this._err(we.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Y.EOF;const r=this.html.charCodeAt(n);return r===Y.CARRIAGE_RETURN?Y.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Y.EOF;let t=this.html.charCodeAt(this.pos);return t===Y.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Y.LINE_FEED):t===Y.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,JIe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===Y.LINE_FEED||t===Y.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){ZIe(t)?this._err(we.controlCharacterInInputStream):eOe(t)&&this._err(we.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var En;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(En=En||(En={}));function tOe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const bm=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),O1t=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var W9;const P1t=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),k1t=(W9=String.fromCodePoint)!==null&&W9!==void 0?W9:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function $1t(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=P1t.get(e))!==null&&t!==void 0?t:e}var Ms;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ms||(Ms={}));const R1t=32;var dd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(dd||(dd={}));function wU(e){return e>=Ms.ZERO&&e<=Ms.NINE}function N1t(e){return e>=Ms.UPPER_A&&e<=Ms.UPPER_F||e>=Ms.LOWER_A&&e<=Ms.LOWER_F}function D1t(e){return e>=Ms.UPPER_A&&e<=Ms.UPPER_Z||e>=Ms.LOWER_A&&e<=Ms.LOWER_Z||wU(e)}function L1t(e){return e===Ms.EQUALS||D1t(e)}var ks;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(ks||(ks={}));var Oy;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Oy||(Oy={}));class M1t{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=ks.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Oy.Strict}startEntity(t){this.decodeMode=t,this.state=ks.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case ks.EntityStart:return t.charCodeAt(n)===Ms.NUM?(this.state=ks.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=ks.NamedEntity,this.stateNamedEntity(t,n));case ks.NumericStart:return this.stateNumericStart(t,n);case ks.NumericDecimal:return this.stateNumericDecimal(t,n);case ks.NumericHex:return this.stateNumericHex(t,n);case ks.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|R1t)===Ms.LOWER_X?(this.state=ks.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=ks.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(wU(i)||N1t(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(wU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ms.SEMI)this.consumed+=1;else if(this.decodeMode===Oy.Strict)return 0;return this.emitCodePoint($1t(this.result),this.consumed),this.errors&&(t!==Ms.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&dd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=rOe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Oy.Attribute&&(s===0||L1t(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&dd.VALUE_LENGTH)>>14,s!==0){if(o===Ms.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Oy.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&dd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~dd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case ks.NamedEntity:return this.result!==0&&(this.decodeMode!==Oy.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ks.NumericDecimal:return this.emitNumericEntity(0,2);case ks.NumericHex:return this.emitNumericEntity(0,3);case ks.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ks.EntityStart:return 0}}}function nOe(e){let t="";const n=new M1t(e,r=>t+=k1t(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function rOe(e,t,n,r){const i=(t&dd.BRANCH_LENGTH)>>7,s=t&dd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}nOe(bm);nOe(O1t);var Ae;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Ae=Ae||(Ae={}));var Eg;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Eg=Eg||(Eg={}));var ju;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(ju=ju||(ju={}));var me;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(me=me||(me={}));var T;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(T=T||(T={}));const F1t=new Map([[me.A,T.A],[me.ADDRESS,T.ADDRESS],[me.ANNOTATION_XML,T.ANNOTATION_XML],[me.APPLET,T.APPLET],[me.AREA,T.AREA],[me.ARTICLE,T.ARTICLE],[me.ASIDE,T.ASIDE],[me.B,T.B],[me.BASE,T.BASE],[me.BASEFONT,T.BASEFONT],[me.BGSOUND,T.BGSOUND],[me.BIG,T.BIG],[me.BLOCKQUOTE,T.BLOCKQUOTE],[me.BODY,T.BODY],[me.BR,T.BR],[me.BUTTON,T.BUTTON],[me.CAPTION,T.CAPTION],[me.CENTER,T.CENTER],[me.CODE,T.CODE],[me.COL,T.COL],[me.COLGROUP,T.COLGROUP],[me.DD,T.DD],[me.DESC,T.DESC],[me.DETAILS,T.DETAILS],[me.DIALOG,T.DIALOG],[me.DIR,T.DIR],[me.DIV,T.DIV],[me.DL,T.DL],[me.DT,T.DT],[me.EM,T.EM],[me.EMBED,T.EMBED],[me.FIELDSET,T.FIELDSET],[me.FIGCAPTION,T.FIGCAPTION],[me.FIGURE,T.FIGURE],[me.FONT,T.FONT],[me.FOOTER,T.FOOTER],[me.FOREIGN_OBJECT,T.FOREIGN_OBJECT],[me.FORM,T.FORM],[me.FRAME,T.FRAME],[me.FRAMESET,T.FRAMESET],[me.H1,T.H1],[me.H2,T.H2],[me.H3,T.H3],[me.H4,T.H4],[me.H5,T.H5],[me.H6,T.H6],[me.HEAD,T.HEAD],[me.HEADER,T.HEADER],[me.HGROUP,T.HGROUP],[me.HR,T.HR],[me.HTML,T.HTML],[me.I,T.I],[me.IMG,T.IMG],[me.IMAGE,T.IMAGE],[me.INPUT,T.INPUT],[me.IFRAME,T.IFRAME],[me.KEYGEN,T.KEYGEN],[me.LABEL,T.LABEL],[me.LI,T.LI],[me.LINK,T.LINK],[me.LISTING,T.LISTING],[me.MAIN,T.MAIN],[me.MALIGNMARK,T.MALIGNMARK],[me.MARQUEE,T.MARQUEE],[me.MATH,T.MATH],[me.MENU,T.MENU],[me.META,T.META],[me.MGLYPH,T.MGLYPH],[me.MI,T.MI],[me.MO,T.MO],[me.MN,T.MN],[me.MS,T.MS],[me.MTEXT,T.MTEXT],[me.NAV,T.NAV],[me.NOBR,T.NOBR],[me.NOFRAMES,T.NOFRAMES],[me.NOEMBED,T.NOEMBED],[me.NOSCRIPT,T.NOSCRIPT],[me.OBJECT,T.OBJECT],[me.OL,T.OL],[me.OPTGROUP,T.OPTGROUP],[me.OPTION,T.OPTION],[me.P,T.P],[me.PARAM,T.PARAM],[me.PLAINTEXT,T.PLAINTEXT],[me.PRE,T.PRE],[me.RB,T.RB],[me.RP,T.RP],[me.RT,T.RT],[me.RTC,T.RTC],[me.RUBY,T.RUBY],[me.S,T.S],[me.SCRIPT,T.SCRIPT],[me.SECTION,T.SECTION],[me.SELECT,T.SELECT],[me.SOURCE,T.SOURCE],[me.SMALL,T.SMALL],[me.SPAN,T.SPAN],[me.STRIKE,T.STRIKE],[me.STRONG,T.STRONG],[me.STYLE,T.STYLE],[me.SUB,T.SUB],[me.SUMMARY,T.SUMMARY],[me.SUP,T.SUP],[me.TABLE,T.TABLE],[me.TBODY,T.TBODY],[me.TEMPLATE,T.TEMPLATE],[me.TEXTAREA,T.TEXTAREA],[me.TFOOT,T.TFOOT],[me.TD,T.TD],[me.TH,T.TH],[me.THEAD,T.THEAD],[me.TITLE,T.TITLE],[me.TR,T.TR],[me.TRACK,T.TRACK],[me.TT,T.TT],[me.U,T.U],[me.UL,T.UL],[me.SVG,T.SVG],[me.VAR,T.VAR],[me.WBR,T.WBR],[me.XMP,T.XMP]]);function NE(e){var t;return(t=F1t.get(e))!==null&&t!==void 0?t:T.UNKNOWN}const Be=T,B1t={[Ae.HTML]:new Set([Be.ADDRESS,Be.APPLET,Be.AREA,Be.ARTICLE,Be.ASIDE,Be.BASE,Be.BASEFONT,Be.BGSOUND,Be.BLOCKQUOTE,Be.BODY,Be.BR,Be.BUTTON,Be.CAPTION,Be.CENTER,Be.COL,Be.COLGROUP,Be.DD,Be.DETAILS,Be.DIR,Be.DIV,Be.DL,Be.DT,Be.EMBED,Be.FIELDSET,Be.FIGCAPTION,Be.FIGURE,Be.FOOTER,Be.FORM,Be.FRAME,Be.FRAMESET,Be.H1,Be.H2,Be.H3,Be.H4,Be.H5,Be.H6,Be.HEAD,Be.HEADER,Be.HGROUP,Be.HR,Be.HTML,Be.IFRAME,Be.IMG,Be.INPUT,Be.LI,Be.LINK,Be.LISTING,Be.MAIN,Be.MARQUEE,Be.MENU,Be.META,Be.NAV,Be.NOEMBED,Be.NOFRAMES,Be.NOSCRIPT,Be.OBJECT,Be.OL,Be.P,Be.PARAM,Be.PLAINTEXT,Be.PRE,Be.SCRIPT,Be.SECTION,Be.SELECT,Be.SOURCE,Be.STYLE,Be.SUMMARY,Be.TABLE,Be.TBODY,Be.TD,Be.TEMPLATE,Be.TEXTAREA,Be.TFOOT,Be.TH,Be.THEAD,Be.TITLE,Be.TR,Be.TRACK,Be.UL,Be.WBR,Be.XMP]),[Ae.MATHML]:new Set([Be.MI,Be.MO,Be.MN,Be.MS,Be.MTEXT,Be.ANNOTATION_XML]),[Ae.SVG]:new Set([Be.TITLE,Be.FOREIGN_OBJECT,Be.DESC]),[Ae.XLINK]:new Set,[Ae.XML]:new Set,[Ae.XMLNS]:new Set};function iOe(e){return e===Be.H1||e===Be.H2||e===Be.H3||e===Be.H4||e===Be.H5||e===Be.H6}me.STYLE,me.SCRIPT,me.XMP,me.IFRAME,me.NOEMBED,me.NOFRAMES,me.PLAINTEXT;const j1t=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var X;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(X||(X={}));const Hi={DATA:X.DATA,RCDATA:X.RCDATA,RAWTEXT:X.RAWTEXT,SCRIPT_DATA:X.SCRIPT_DATA,PLAINTEXT:X.PLAINTEXT,CDATA_SECTION:X.CDATA_SECTION};function WT(e){return e>=Y.DIGIT_0&&e<=Y.DIGIT_9}function GS(e){return e>=Y.LATIN_CAPITAL_A&&e<=Y.LATIN_CAPITAL_Z}function z1t(e){return e>=Y.LATIN_SMALL_A&&e<=Y.LATIN_SMALL_Z}function wm(e){return z1t(e)||GS(e)}function EU(e){return wm(e)||WT(e)}function sOe(e){return e>=Y.LATIN_CAPITAL_A&&e<=Y.LATIN_CAPITAL_F}function oOe(e){return e>=Y.LATIN_SMALL_A&&e<=Y.LATIN_SMALL_F}function U1t(e){return WT(e)||sOe(e)||oOe(e)}function cP(e){return e+32}function aOe(e){return e===Y.SPACE||e===Y.LINE_FEED||e===Y.TABULATION||e===Y.FORM_FEED}function V1t(e){return e===Y.EQUALS_SIGN||EU(e)}function jfe(e){return aOe(e)||e===Y.SOLIDUS||e===Y.GREATER_THAN_SIGN}class H1t{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=X.DATA,this.returnState=X.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new I1t(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:En.START_TAG,tagName:"",tagID:T.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:En.END_TAG,tagName:"",tagID:T.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:En.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:En.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(tOe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(we.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=NE(t.tagName),t.type===En.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(we.endTagWithAttributes),t.selfClosing&&this._err(we.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case En.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case En.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case En.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:En.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=aOe(t)?En.WHITESPACE_CHARACTER:t===Y.NULL?En.NULL_CHARACTER:En.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(En.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=bm[0];s>=0&&(s=rOe(bm,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=bm[s];const a=o&dd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==Y.SEMICOLON&&this._isCharacterReferenceInAttribute()&&V1t(this.preprocessor.peek(1))?(n=[Y.AMPERSAND],s+=u):(n=u===0?[bm[s]&~dd.VALUE_LENGTH]:u===1?[bm[++s]]:[bm[++s],bm[++s]],r=0,i=t!==Y.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(we.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===X.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case X.DATA:{this._stateData(t);break}case X.RCDATA:{this._stateRcdata(t);break}case X.RAWTEXT:{this._stateRawtext(t);break}case X.SCRIPT_DATA:{this._stateScriptData(t);break}case X.PLAINTEXT:{this._statePlaintext(t);break}case X.TAG_OPEN:{this._stateTagOpen(t);break}case X.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case X.TAG_NAME:{this._stateTagName(t);break}case X.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case X.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case X.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case X.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case X.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case X.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case X.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case X.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case X.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case X.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case X.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case X.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case X.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case X.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case X.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case X.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case X.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case X.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case X.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case X.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case X.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case X.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case X.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case X.BOGUS_COMMENT:{this._stateBogusComment(t);break}case X.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case X.COMMENT_START:{this._stateCommentStart(t);break}case X.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case X.COMMENT:{this._stateComment(t);break}case X.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case X.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case X.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case X.COMMENT_END:{this._stateCommentEnd(t);break}case X.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case X.DOCTYPE:{this._stateDoctype(t);break}case X.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case X.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case X.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case X.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case X.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case X.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case X.CDATA_SECTION:{this._stateCdataSection(t);break}case X.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case X.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case X.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case X.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case X.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case X.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case X.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case X.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case X.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case X.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case Y.LESS_THAN_SIGN:{this.state=X.TAG_OPEN;break}case Y.AMPERSAND:{this.returnState=X.DATA,this.state=X.CHARACTER_REFERENCE;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitCodePoint(t);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case Y.AMPERSAND:{this.returnState=X.RCDATA,this.state=X.CHARACTER_REFERENCE;break}case Y.LESS_THAN_SIGN:{this.state=X.RCDATA_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case Y.LESS_THAN_SIGN:{this.state=X.RAWTEXT_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(wm(t))this._createStartTagToken(),this.state=X.TAG_NAME,this._stateTagName(t);else switch(t){case Y.EXCLAMATION_MARK:{this.state=X.MARKUP_DECLARATION_OPEN;break}case Y.SOLIDUS:{this.state=X.END_TAG_OPEN;break}case Y.QUESTION_MARK:{this._err(we.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=X.BOGUS_COMMENT,this._stateBogusComment(t);break}case Y.EOF:{this._err(we.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(we.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=X.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(wm(t))this._createEndTagToken(),this.state=X.TAG_NAME,this._stateTagName(t);else switch(t){case Y.GREATER_THAN_SIGN:{this._err(we.missingEndTagName),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(we.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_ATTRIBUTE_NAME;break}case Y.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.tagName+=ai;break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(GS(t)?cP(t):t)}}_stateRcdataLessThanSign(t){t===Y.SOLIDUS?this.state=X.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){wm(t)?(this.state=X.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=X.BEFORE_ATTRIBUTE_NAME,!1;case Y.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=X.SELF_CLOSING_START_TAG,!1;case Y.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=X.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===Y.SOLIDUS?this.state=X.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){wm(t)?(this.state=X.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case Y.SOLIDUS:{this.state=X.SCRIPT_DATA_END_TAG_OPEN;break}case Y.EXCLAMATION_MARK:{this.state=X.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=X.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){wm(t)?(this.state=X.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===Y.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===Y.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case Y.HYPHEN_MINUS:{this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===Y.SOLIDUS?this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:wm(t)?(this._emitChars("<"),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){wm(t)?(this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(ja.SCRIPT,!1)&&jfe(this.preprocessor.peek(ja.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<ja.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case Y.HYPHEN_MINUS:{this._emitChars("-");break}case Y.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ai);break}case Y.EOF:{this._err(we.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===Y.SOLIDUS?(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(ja.SCRIPT,!1)&&jfe(this.preprocessor.peek(ja.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<ja.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.SOLIDUS:case Y.GREATER_THAN_SIGN:case Y.EOF:{this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Y.EQUALS_SIGN:{this._err(we.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=X.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:case Y.SOLIDUS:case Y.GREATER_THAN_SIGN:case Y.EOF:{this._leaveAttrName(),this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Y.EQUALS_SIGN:{this._leaveAttrName(),this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case Y.QUOTATION_MARK:case Y.APOSTROPHE:case Y.LESS_THAN_SIGN:{this._err(we.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.name+=ai;break}default:this.currentAttr.name+=String.fromCodePoint(GS(t)?cP(t):t)}}_stateAfterAttributeName(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case Y.EQUALS_SIGN:{this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.QUOTATION_MARK:{this.state=X.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this.state=X.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingAttributeValue),this.state=X.DATA,this.emitCurrentTagToken();break}default:this.state=X.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case Y.QUOTATION_MARK:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Y.AMPERSAND:{this.returnState=X.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=X.CHARACTER_REFERENCE;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=ai;break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case Y.APOSTROPHE:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Y.AMPERSAND:{this.returnState=X.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=X.CHARACTER_REFERENCE;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=ai;break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case Y.AMPERSAND:{this.returnState=X.ATTRIBUTE_VALUE_UNQUOTED,this.state=X.CHARACTER_REFERENCE;break}case Y.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case Y.NULL:{this._err(we.unexpectedNullCharacter),this.currentAttr.value+=ai;break}case Y.QUOTATION_MARK:case Y.APOSTROPHE:case Y.LESS_THAN_SIGN:case Y.EQUALS_SIGN:case Y.GRAVE_ACCENT:{this._err(we.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case Y.SOLIDUS:{this._leaveAttrValue(),this.state=X.SELF_CLOSING_START_TAG;break}case Y.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._err(we.missingWhitespaceBetweenAttributes),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case Y.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=X.DATA,this.emitCurrentTagToken();break}case Y.EOF:{this._err(we.eofInTag),this._emitEOFToken();break}default:this._err(we.unexpectedSolidusInTag),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.data+=ai;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(ja.DASH_DASH,!0)?(this._createCommentToken(ja.DASH_DASH.length+1),this.state=X.COMMENT_START):this._consumeSequenceIfMatch(ja.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(ja.DOCTYPE.length+1),this.state=X.DOCTYPE):this._consumeSequenceIfMatch(ja.CDATA_START,!0)?this.inForeignNode?this.state=X.CDATA_SECTION:(this._err(we.cdataInHtmlContent),this._createCommentToken(ja.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=X.BOGUS_COMMENT):this._ensureHibernation()||(this._err(we.incorrectlyOpenedComment),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_START_DASH;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptClosingOfEmptyComment),this.state=X.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=X.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptClosingOfEmptyComment),this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_END_DASH;break}case Y.LESS_THAN_SIGN:{n.data+="<",this.state=X.COMMENT_LESS_THAN_SIGN;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.data+=ai;break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case Y.EXCLAMATION_MARK:{n.data+="!",this.state=X.COMMENT_LESS_THAN_SIGN_BANG;break}case Y.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=X.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===Y.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=X.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===Y.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=X.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==Y.GREATER_THAN_SIGN&&t!==Y.EOF&&this._err(we.nestedComment),this.state=X.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EXCLAMATION_MARK:{this.state=X.COMMENT_END_BANG;break}case Y.HYPHEN_MINUS:{n.data+="-";break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=X.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case Y.HYPHEN_MINUS:{n.data+="--!",this.state=X.COMMENT_END_DASH;break}case Y.GREATER_THAN_SIGN:{this._err(we.incorrectlyClosedComment),this.state=X.DATA,this.emitCurrentComment(n);break}case Y.EOF:{this._err(we.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=X.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_NAME;break}case Y.GREATER_THAN_SIGN:{this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case Y.EOF:{this._err(we.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingWhitespaceBeforeDoctypeName),this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(GS(t))this._createDoctypeToken(String.fromCharCode(cP(t))),this.state=X.DOCTYPE_NAME;else switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.NULL:{this._err(we.unexpectedNullCharacter),this._createDoctypeToken(ai),this.state=X.DOCTYPE_NAME;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=X.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.AFTER_DOCTYPE_NAME;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.name+=ai;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(GS(t)?cP(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(ja.PUBLIC,!1)?this.state=X.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(ja.SYSTEM,!1)?this.state=X.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(we.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.QUOTATION_MARK:{this._err(we.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this._err(we.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.QUOTATION_MARK:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case Y.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.publicId+=ai;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case Y.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.publicId+=ai;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case Y.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.QUOTATION_MARK:{this._err(we.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this._err(we.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.QUOTATION_MARK:{this._err(we.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{this._err(we.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.GREATER_THAN_SIGN:{this._err(we.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case Y.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.systemId+=ai;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case Y.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.NULL:{this._err(we.unexpectedNullCharacter),n.systemId+=ai;break}case Y.GREATER_THAN_SIGN:{this._err(we.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case Y.SPACE:case Y.LINE_FEED:case Y.TABULATION:case Y.FORM_FEED:break;case Y.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.EOF:{this._err(we.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(we.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case Y.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case Y.NULL:{this._err(we.unexpectedNullCharacter);break}case Y.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case Y.RIGHT_SQUARE_BRACKET:{this.state=X.CDATA_SECTION_BRACKET;break}case Y.EOF:{this._err(we.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===Y.RIGHT_SQUARE_BRACKET?this.state=X.CDATA_SECTION_END:(this._emitChars("]"),this.state=X.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case Y.GREATER_THAN_SIGN:{this.state=X.DATA;break}case Y.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=X.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===Y.NUMBER_SIGN?this.state=X.NUMERIC_CHARACTER_REFERENCE:EU(t)?(this.state=X.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this.state=X.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){EU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===Y.SEMICOLON&&this._err(we.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===Y.LATIN_SMALL_X||t===Y.LATIN_CAPITAL_X?this.state=X.HEXADEMICAL_CHARACTER_REFERENCE_START:WT(t)?(this.state=X.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(we.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Y.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){U1t(t)?(this.state=X.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(we.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Y.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Y.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){sOe(t)?this.charRefCode=this.charRefCode*16+t-55:oOe(t)?this.charRefCode=this.charRefCode*16+t-87:WT(t)?this.charRefCode=this.charRefCode*16+t-48:t===Y.SEMICOLON?this.state=X.NUMERIC_CHARACTER_REFERENCE_END:(this._err(we.missingSemicolonAfterCharacterReference),this.state=X.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){WT(t)?this.charRefCode=this.charRefCode*10+t-48:t===Y.SEMICOLON?this.state=X.NUMERIC_CHARACTER_REFERENCE_END:(this._err(we.missingSemicolonAfterCharacterReference),this.state=X.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===Y.NULL)this._err(we.nullCharacterReference),this.charRefCode=Y.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(we.characterReferenceOutsideUnicodeRange),this.charRefCode=Y.REPLACEMENT_CHARACTER;else if(JIe(this.charRefCode))this._err(we.surrogateCharacterReference),this.charRefCode=Y.REPLACEMENT_CHARACTER;else if(eOe(this.charRefCode))this._err(we.noncharacterCharacterReference);else if(ZIe(this.charRefCode)||this.charRefCode===Y.CARRIAGE_RETURN){this._err(we.controlCharacterReference);const n=j1t.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const uOe=new Set([T.DD,T.DT,T.LI,T.OPTGROUP,T.OPTION,T.P,T.RB,T.RP,T.RT,T.RTC]),zfe=new Set([...uOe,T.CAPTION,T.COLGROUP,T.TBODY,T.TD,T.TFOOT,T.TH,T.THEAD,T.TR]),fP=new Map([[T.APPLET,Ae.HTML],[T.CAPTION,Ae.HTML],[T.HTML,Ae.HTML],[T.MARQUEE,Ae.HTML],[T.OBJECT,Ae.HTML],[T.TABLE,Ae.HTML],[T.TD,Ae.HTML],[T.TEMPLATE,Ae.HTML],[T.TH,Ae.HTML],[T.ANNOTATION_XML,Ae.MATHML],[T.MI,Ae.MATHML],[T.MN,Ae.MATHML],[T.MO,Ae.MATHML],[T.MS,Ae.MATHML],[T.MTEXT,Ae.MATHML],[T.DESC,Ae.SVG],[T.FOREIGN_OBJECT,Ae.SVG],[T.TITLE,Ae.SVG]]),q1t=[T.H1,T.H2,T.H3,T.H4,T.H5,T.H6],W1t=[T.TR,T.TEMPLATE,T.HTML],G1t=[T.TBODY,T.TFOOT,T.THEAD,T.TEMPLATE,T.HTML],Y1t=[T.TABLE,T.TEMPLATE,T.HTML],K1t=[T.TD,T.TH];class X1t{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=T.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===T.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ae.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Ae.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(q1t,Ae.HTML)}popUntilTableCellPopped(){this.popUntilPopped(K1t,Ae.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Y1t,Ae.HTML)}clearBackToTableBodyContext(){this.clearBackTo(G1t,Ae.HTML)}clearBackToTableRowContext(){this.clearBackTo(W1t,Ae.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===T.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===T.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ae.HTML)return!0;if(fP.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(iOe(n)&&r===Ae.HTML)return!0;if(fP.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ae.HTML)return!0;if((r===T.UL||r===T.OL)&&i===Ae.HTML||fP.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ae.HTML)return!0;if(r===T.BUTTON&&i===Ae.HTML||fP.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ae.HTML){if(r===t)return!0;if(r===T.TABLE||r===T.TEMPLATE||r===T.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Ae.HTML){if(n===T.TBODY||n===T.THEAD||n===T.TFOOT)return!0;if(n===T.TABLE||n===T.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ae.HTML){if(r===t)return!0;if(r!==T.OPTION&&r!==T.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;uOe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;zfe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&zfe.has(this.currentTagId);)this.pop()}}const G9=3;var Mc;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Mc=Mc||(Mc={}));const Ufe={type:Mc.Marker};class Q1t{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Mc.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<G9)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<G9)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=G9&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Ufe)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Mc.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Mc.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Ufe);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Mc.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Mc.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Mc.Element&&n.element===t)}}function Vfe(e){return{nodeName:"#text",value:e,parentNode:null}}const $_={createDocument(){return{nodeName:"#document",mode:ju.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};$_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if($_.isTextNode(n)){n.value+=t;return}}$_.appendChild(e,Vfe(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&$_.isTextNode(r)?r.value+=t:$_.insertBefore(e,Vfe(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},lOe="html",J1t="about:legacy-compat",Z1t="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",cOe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],evt=[...cOe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],tvt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),fOe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],nvt=[...fOe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Hfe(e,t){return t.some(n=>e.startsWith(n))}function rvt(e){return e.name===lOe&&e.publicId===null&&(e.systemId===null||e.systemId===J1t)}function ivt(e){if(e.name!==lOe)return ju.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Z1t)return ju.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),tvt.has(n))return ju.QUIRKS;let r=t===null?evt:cOe;if(Hfe(n,r))return ju.QUIRKS;if(r=t===null?fOe:nvt,Hfe(n,r))return ju.LIMITED_QUIRKS}return ju.NO_QUIRKS}const qfe={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},svt="definitionurl",ovt="definitionURL",avt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),uvt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ae.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ae.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ae.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ae.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ae.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ae.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ae.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Ae.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ae.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ae.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ae.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ae.XMLNS}]]),lvt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),cvt=new Set([T.B,T.BIG,T.BLOCKQUOTE,T.BODY,T.BR,T.CENTER,T.CODE,T.DD,T.DIV,T.DL,T.DT,T.EM,T.EMBED,T.H1,T.H2,T.H3,T.H4,T.H5,T.H6,T.HEAD,T.HR,T.I,T.IMG,T.LI,T.LISTING,T.MENU,T.META,T.NOBR,T.OL,T.P,T.PRE,T.RUBY,T.S,T.SMALL,T.SPAN,T.STRONG,T.STRIKE,T.SUB,T.SUP,T.TABLE,T.TT,T.U,T.UL,T.VAR]);function fvt(e){const t=e.tagID;return t===T.FONT&&e.attrs.some(({name:r})=>r===Eg.COLOR||r===Eg.SIZE||r===Eg.FACE)||cvt.has(t)}function dOe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===svt){e.attrs[t].name=ovt;break}}function hOe(e){for(let t=0;t<e.attrs.length;t++){const n=avt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function MY(e){for(let t=0;t<e.attrs.length;t++){const n=uvt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function dvt(e){const t=lvt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=NE(e.tagName))}function hvt(e,t){return t===Ae.MATHML&&(e===T.MI||e===T.MO||e===T.MN||e===T.MS||e===T.MTEXT)}function pvt(e,t,n){if(t===Ae.MATHML&&e===T.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Eg.ENCODING){const i=n[r].value.toLowerCase();return i===qfe.TEXT_HTML||i===qfe.APPLICATION_XML}}return t===Ae.SVG&&(e===T.FOREIGN_OBJECT||e===T.DESC||e===T.TITLE)}function mvt(e,t,n,r){return(!r||r===Ae.HTML)&&pvt(e,t,n)||(!r||r===Ae.MATHML)&&hvt(e,t)}const gvt="hidden",yvt=8,vvt=3;var ee;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ee||(ee={}));const _vt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},pOe=new Set([T.TABLE,T.TBODY,T.TFOOT,T.THEAD,T.TR]),Wfe={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:$_,onParseError:null};let Gfe=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ee.INITIAL,this.originalInsertionMode=ee.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Wfe,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new H1t(this.options,this),this.activeFormattingElements=new Q1t(this.treeAdapter),this.fragmentContextID=r?NE(this.treeAdapter.getTagName(r)):T.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new X1t(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Wfe,...n};t??(t=r.treeAdapter.createElement(me.TEMPLATE,Ae.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Ae.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===T.TEMPLATE&&s.tmplInsertionModeStack.unshift(ee.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:_vt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Ae.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Ae.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ee.TEXT}switchToPlaintextParsing(){this.insertionMode=ee.TEXT,this.originalInsertionMode=ee.IN_BODY,this.tokenizer.state=Hi.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===me.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ae.HTML))switch(this.fragmentContextID){case T.TITLE:case T.TEXTAREA:{this.tokenizer.state=Hi.RCDATA;break}case T.STYLE:case T.XMP:case T.IFRAME:case T.NOEMBED:case T.NOFRAMES:case T.NOSCRIPT:{this.tokenizer.state=Hi.RAWTEXT;break}case T.SCRIPT:{this.tokenizer.state=Hi.SCRIPT_DATA;break}case T.PLAINTEXT:{this.tokenizer.state=Hi.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Ae.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Ae.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(me.HTML,Ae.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,T.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===En.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===T.SVG&&this.treeAdapter.getTagName(n)===me.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Ae.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===T.MGLYPH||t.tagID===T.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Ae.HTML)}_processToken(t){switch(t.type){case En.CHARACTER:{this.onCharacter(t);break}case En.NULL_CHARACTER:{this.onNullCharacter(t);break}case En.COMMENT:{this.onComment(t);break}case En.DOCTYPE:{this.onDoctype(t);break}case En.START_TAG:{this._processStartTag(t);break}case En.END_TAG:{this.onEndTag(t);break}case En.EOF:{this.onEof(t);break}case En.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return mvt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Mc.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ee.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(T.P),this.openElements.popUntilTagNamePopped(T.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case T.TR:{this.insertionMode=ee.IN_ROW;return}case T.TBODY:case T.THEAD:case T.TFOOT:{this.insertionMode=ee.IN_TABLE_BODY;return}case T.CAPTION:{this.insertionMode=ee.IN_CAPTION;return}case T.COLGROUP:{this.insertionMode=ee.IN_COLUMN_GROUP;return}case T.TABLE:{this.insertionMode=ee.IN_TABLE;return}case T.BODY:{this.insertionMode=ee.IN_BODY;return}case T.FRAMESET:{this.insertionMode=ee.IN_FRAMESET;return}case T.SELECT:{this._resetInsertionModeForSelect(t);return}case T.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case T.HTML:{this.insertionMode=this.headElement?ee.AFTER_HEAD:ee.BEFORE_HEAD;return}case T.TD:case T.TH:{if(t>0){this.insertionMode=ee.IN_CELL;return}break}case T.HEAD:{if(t>0){this.insertionMode=ee.IN_HEAD;return}break}}this.insertionMode=ee.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===T.TEMPLATE)break;if(r===T.TABLE){this.insertionMode=ee.IN_SELECT_IN_TABLE;return}}this.insertionMode=ee.IN_SELECT}_isElementCausesFosterParenting(t){return pOe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case T.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Ae.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case T.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return B1t[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){K_t(this,t);return}switch(this.insertionMode){case ee.INITIAL:{Zx(this,t);break}case ee.BEFORE_HTML:{GT(this,t);break}case ee.BEFORE_HEAD:{YT(this,t);break}case ee.IN_HEAD:{KT(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{XT(this,t);break}case ee.AFTER_HEAD:{QT(this,t);break}case ee.IN_BODY:case ee.IN_CAPTION:case ee.IN_CELL:case ee.IN_TEMPLATE:{gOe(this,t);break}case ee.TEXT:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{Y9(this,t);break}case ee.IN_TABLE_TEXT:{EOe(this,t);break}case ee.IN_COLUMN_GROUP:{gD(this,t);break}case ee.AFTER_BODY:{yD(this,t);break}case ee.AFTER_AFTER_BODY:{Xk(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Y_t(this,t);return}switch(this.insertionMode){case ee.INITIAL:{Zx(this,t);break}case ee.BEFORE_HTML:{GT(this,t);break}case ee.BEFORE_HEAD:{YT(this,t);break}case ee.IN_HEAD:{KT(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{XT(this,t);break}case ee.AFTER_HEAD:{QT(this,t);break}case ee.TEXT:{this._insertCharacters(t);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{Y9(this,t);break}case ee.IN_COLUMN_GROUP:{gD(this,t);break}case ee.AFTER_BODY:{yD(this,t);break}case ee.AFTER_AFTER_BODY:{Xk(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){xU(this,t);return}switch(this.insertionMode){case ee.INITIAL:case ee.BEFORE_HTML:case ee.BEFORE_HEAD:case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:case ee.IN_BODY:case ee.IN_TABLE:case ee.IN_CAPTION:case ee.IN_COLUMN_GROUP:case ee.IN_TABLE_BODY:case ee.IN_ROW:case ee.IN_CELL:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:case ee.IN_TEMPLATE:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:{xU(this,t);break}case ee.IN_TABLE_TEXT:{eS(this,t);break}case ee.AFTER_BODY:{Avt(this,t);break}case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{Cvt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ee.INITIAL:{Ivt(this,t);break}case ee.BEFORE_HEAD:case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:{this._err(t,we.misplacedDoctype);break}case ee.IN_TABLE_TEXT:{eS(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,we.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?X_t(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ee.INITIAL:{Zx(this,t);break}case ee.BEFORE_HTML:{Ovt(this,t);break}case ee.BEFORE_HEAD:{kvt(this,t);break}case ee.IN_HEAD:{bf(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{Nvt(this,t);break}case ee.AFTER_HEAD:{Lvt(this,t);break}case ee.IN_BODY:{oa(this,t);break}case ee.IN_TABLE:{gw(this,t);break}case ee.IN_TABLE_TEXT:{eS(this,t);break}case ee.IN_CAPTION:{$_t(this,t);break}case ee.IN_COLUMN_GROUP:{jY(this,t);break}case ee.IN_TABLE_BODY:{j6(this,t);break}case ee.IN_ROW:{z6(this,t);break}case ee.IN_CELL:{D_t(this,t);break}case ee.IN_SELECT:{TOe(this,t);break}case ee.IN_SELECT_IN_TABLE:{M_t(this,t);break}case ee.IN_TEMPLATE:{B_t(this,t);break}case ee.AFTER_BODY:{z_t(this,t);break}case ee.IN_FRAMESET:{U_t(this,t);break}case ee.AFTER_FRAMESET:{H_t(this,t);break}case ee.AFTER_AFTER_BODY:{W_t(this,t);break}case ee.AFTER_AFTER_FRAMESET:{G_t(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Q_t(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ee.INITIAL:{Zx(this,t);break}case ee.BEFORE_HTML:{Pvt(this,t);break}case ee.BEFORE_HEAD:{$vt(this,t);break}case ee.IN_HEAD:{Rvt(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{Dvt(this,t);break}case ee.AFTER_HEAD:{Mvt(this,t);break}case ee.IN_BODY:{B6(this,t);break}case ee.TEXT:{E_t(this,t);break}case ee.IN_TABLE:{cA(this,t);break}case ee.IN_TABLE_TEXT:{eS(this,t);break}case ee.IN_CAPTION:{R_t(this,t);break}case ee.IN_COLUMN_GROUP:{N_t(this,t);break}case ee.IN_TABLE_BODY:{SU(this,t);break}case ee.IN_ROW:{SOe(this,t);break}case ee.IN_CELL:{L_t(this,t);break}case ee.IN_SELECT:{AOe(this,t);break}case ee.IN_SELECT_IN_TABLE:{F_t(this,t);break}case ee.IN_TEMPLATE:{j_t(this,t);break}case ee.AFTER_BODY:{IOe(this,t);break}case ee.IN_FRAMESET:{V_t(this,t);break}case ee.AFTER_FRAMESET:{q_t(this,t);break}case ee.AFTER_AFTER_BODY:{Xk(this,t);break}}}onEof(t){switch(this.insertionMode){case ee.INITIAL:{Zx(this,t);break}case ee.BEFORE_HTML:{GT(this,t);break}case ee.BEFORE_HEAD:{YT(this,t);break}case ee.IN_HEAD:{KT(this,t);break}case ee.IN_HEAD_NO_SCRIPT:{XT(this,t);break}case ee.AFTER_HEAD:{QT(this,t);break}case ee.IN_BODY:case ee.IN_TABLE:case ee.IN_CAPTION:case ee.IN_COLUMN_GROUP:case ee.IN_TABLE_BODY:case ee.IN_ROW:case ee.IN_CELL:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:{bOe(this,t);break}case ee.TEXT:{x_t(this,t);break}case ee.IN_TABLE_TEXT:{eS(this,t);break}case ee.IN_TEMPLATE:{COe(this,t);break}case ee.AFTER_BODY:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{BY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===Y.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ee.IN_HEAD:case ee.IN_HEAD_NO_SCRIPT:case ee.AFTER_HEAD:case ee.TEXT:case ee.IN_COLUMN_GROUP:case ee.IN_SELECT:case ee.IN_SELECT_IN_TABLE:case ee.IN_FRAMESET:case ee.AFTER_FRAMESET:{this._insertCharacters(t);break}case ee.IN_BODY:case ee.IN_CAPTION:case ee.IN_CELL:case ee.IN_TEMPLATE:case ee.AFTER_BODY:case ee.AFTER_AFTER_BODY:case ee.AFTER_AFTER_FRAMESET:{mOe(this,t);break}case ee.IN_TABLE:case ee.IN_TABLE_BODY:case ee.IN_ROW:{Y9(this,t);break}case ee.IN_TABLE_TEXT:{wOe(this,t);break}}}};function bvt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):_Oe(e,t),n}function wvt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Evt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=vvt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=xvt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function xvt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Svt(e,t,n){const r=e.treeAdapter.getTagName(t),i=NE(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===T.TEMPLATE&&s===Ae.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Tvt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function FY(e,t){for(let n=0;n<yvt;n++){const r=bvt(e,t);if(!r)break;const i=wvt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Evt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Svt(e,o,s),Tvt(e,i,r)}}function xU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Avt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Cvt(e,t){e._appendCommentNode(t,e.document)}function BY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Ivt(e,t){e._setDocumentType(t);const n=t.forceQuirks?ju.QUIRKS:ivt(t);rvt(t)||e._err(t,we.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ee.BEFORE_HTML}function Zx(e,t){e._err(t,we.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,ju.QUIRKS),e.insertionMode=ee.BEFORE_HTML,e._processToken(t)}function Ovt(e,t){t.tagID===T.HTML?(e._insertElement(t,Ae.HTML),e.insertionMode=ee.BEFORE_HEAD):GT(e,t)}function Pvt(e,t){const n=t.tagID;(n===T.HTML||n===T.HEAD||n===T.BODY||n===T.BR)&&GT(e,t)}function GT(e,t){e._insertFakeRootElement(),e.insertionMode=ee.BEFORE_HEAD,e._processToken(t)}function kvt(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.HEAD:{e._insertElement(t,Ae.HTML),e.headElement=e.openElements.current,e.insertionMode=ee.IN_HEAD;break}default:YT(e,t)}}function $vt(e,t){const n=t.tagID;n===T.HEAD||n===T.BODY||n===T.HTML||n===T.BR?YT(e,t):e._err(t,we.endTagWithoutMatchingOpenElement)}function YT(e,t){e._insertFakeElement(me.HEAD,T.HEAD),e.headElement=e.openElements.current,e.insertionMode=ee.IN_HEAD,e._processToken(t)}function bf(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:{e._appendElement(t,Ae.HTML),t.ackSelfClosing=!0;break}case T.TITLE:{e._switchToTextParsing(t,Hi.RCDATA);break}case T.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Hi.RAWTEXT):(e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_HEAD_NO_SCRIPT);break}case T.NOFRAMES:case T.STYLE:{e._switchToTextParsing(t,Hi.RAWTEXT);break}case T.SCRIPT:{e._switchToTextParsing(t,Hi.SCRIPT_DATA);break}case T.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ee.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ee.IN_TEMPLATE);break}case T.HEAD:{e._err(t,we.misplacedStartTagForHeadElement);break}default:KT(e,t)}}function Rvt(e,t){switch(t.tagID){case T.HEAD:{e.openElements.pop(),e.insertionMode=ee.AFTER_HEAD;break}case T.BODY:case T.BR:case T.HTML:{KT(e,t);break}case T.TEMPLATE:{Ov(e,t);break}default:e._err(t,we.endTagWithoutMatchingOpenElement)}}function Ov(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==T.TEMPLATE&&e._err(t,we.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(T.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,we.endTagWithoutMatchingOpenElement)}function KT(e,t){e.openElements.pop(),e.insertionMode=ee.AFTER_HEAD,e._processToken(t)}function Nvt(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.BASEFONT:case T.BGSOUND:case T.HEAD:case T.LINK:case T.META:case T.NOFRAMES:case T.STYLE:{bf(e,t);break}case T.NOSCRIPT:{e._err(t,we.nestedNoscriptInHead);break}default:XT(e,t)}}function Dvt(e,t){switch(t.tagID){case T.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ee.IN_HEAD;break}case T.BR:{XT(e,t);break}default:e._err(t,we.endTagWithoutMatchingOpenElement)}}function XT(e,t){const n=t.type===En.EOF?we.openElementsLeftAfterEof:we.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ee.IN_HEAD,e._processToken(t)}function Lvt(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.BODY:{e._insertElement(t,Ae.HTML),e.framesetOk=!1,e.insertionMode=ee.IN_BODY;break}case T.FRAMESET:{e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_FRAMESET;break}case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:case T.NOFRAMES:case T.SCRIPT:case T.STYLE:case T.TEMPLATE:case T.TITLE:{e._err(t,we.abandonedHeadElementChild),e.openElements.push(e.headElement,T.HEAD),bf(e,t),e.openElements.remove(e.headElement);break}case T.HEAD:{e._err(t,we.misplacedStartTagForHeadElement);break}default:QT(e,t)}}function Mvt(e,t){switch(t.tagID){case T.BODY:case T.HTML:case T.BR:{QT(e,t);break}case T.TEMPLATE:{Ov(e,t);break}default:e._err(t,we.endTagWithoutMatchingOpenElement)}}function QT(e,t){e._insertFakeElement(me.BODY,T.BODY),e.insertionMode=ee.IN_BODY,F6(e,t)}function F6(e,t){switch(t.type){case En.CHARACTER:{gOe(e,t);break}case En.WHITESPACE_CHARACTER:{mOe(e,t);break}case En.COMMENT:{xU(e,t);break}case En.START_TAG:{oa(e,t);break}case En.END_TAG:{B6(e,t);break}case En.EOF:{bOe(e,t);break}}}function mOe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function gOe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Fvt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Bvt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function jvt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_FRAMESET)}function zvt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML)}function Uvt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),iOe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Ae.HTML)}function Vvt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Hvt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML),n||(e.formElement=e.openElements.current))}function qvt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===T.LI&&i===T.LI||(n===T.DD||n===T.DT)&&(i===T.DD||i===T.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==T.ADDRESS&&i!==T.DIV&&i!==T.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML)}function Wvt(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML),e.tokenizer.state=Hi.PLAINTEXT}function Gvt(e,t){e.openElements.hasInScope(T.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML),e.framesetOk=!1}function Yvt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(me.A);n&&(FY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Kvt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Xvt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(T.NOBR)&&(FY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Ae.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Qvt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Jvt(e,t){e.treeAdapter.getDocumentMode(e.document)!==ju.QUIRKS&&e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._insertElement(t,Ae.HTML),e.framesetOk=!1,e.insertionMode=ee.IN_TABLE}function yOe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ae.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function vOe(e){const t=tOe(e,Eg.TYPE);return t!=null&&t.toLowerCase()===gvt}function Zvt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ae.HTML),vOe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function e_t(e,t){e._appendElement(t,Ae.HTML),t.ackSelfClosing=!0}function t_t(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._appendElement(t,Ae.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function n_t(e,t){t.tagName=me.IMG,t.tagID=T.IMG,yOe(e,t)}function r_t(e,t){e._insertElement(t,Ae.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Hi.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ee.TEXT}function i_t(e,t){e.openElements.hasInButtonScope(T.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Hi.RAWTEXT)}function s_t(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Hi.RAWTEXT)}function Yfe(e,t){e._switchToTextParsing(t,Hi.RAWTEXT)}function o_t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ee.IN_TABLE||e.insertionMode===ee.IN_CAPTION||e.insertionMode===ee.IN_TABLE_BODY||e.insertionMode===ee.IN_ROW||e.insertionMode===ee.IN_CELL?ee.IN_SELECT_IN_TABLE:ee.IN_SELECT}function a_t(e,t){e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML)}function u_t(e,t){e.openElements.hasInScope(T.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Ae.HTML)}function l_t(e,t){e.openElements.hasInScope(T.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(T.RTC),e._insertElement(t,Ae.HTML)}function c_t(e,t){e._reconstructActiveFormattingElements(),dOe(t),MY(t),t.selfClosing?e._appendElement(t,Ae.MATHML):e._insertElement(t,Ae.MATHML),t.ackSelfClosing=!0}function f_t(e,t){e._reconstructActiveFormattingElements(),hOe(t),MY(t),t.selfClosing?e._appendElement(t,Ae.SVG):e._insertElement(t,Ae.SVG),t.ackSelfClosing=!0}function Kfe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ae.HTML)}function oa(e,t){switch(t.tagID){case T.I:case T.S:case T.B:case T.U:case T.EM:case T.TT:case T.BIG:case T.CODE:case T.FONT:case T.SMALL:case T.STRIKE:case T.STRONG:{Kvt(e,t);break}case T.A:{Yvt(e,t);break}case T.H1:case T.H2:case T.H3:case T.H4:case T.H5:case T.H6:{Uvt(e,t);break}case T.P:case T.DL:case T.OL:case T.UL:case T.DIV:case T.DIR:case T.NAV:case T.MAIN:case T.MENU:case T.ASIDE:case T.CENTER:case T.FIGURE:case T.FOOTER:case T.HEADER:case T.HGROUP:case T.DIALOG:case T.DETAILS:case T.ADDRESS:case T.ARTICLE:case T.SECTION:case T.SUMMARY:case T.FIELDSET:case T.BLOCKQUOTE:case T.FIGCAPTION:{zvt(e,t);break}case T.LI:case T.DD:case T.DT:{qvt(e,t);break}case T.BR:case T.IMG:case T.WBR:case T.AREA:case T.EMBED:case T.KEYGEN:{yOe(e,t);break}case T.HR:{t_t(e,t);break}case T.RB:case T.RTC:{u_t(e,t);break}case T.RT:case T.RP:{l_t(e,t);break}case T.PRE:case T.LISTING:{Vvt(e,t);break}case T.XMP:{i_t(e,t);break}case T.SVG:{f_t(e,t);break}case T.HTML:{Fvt(e,t);break}case T.BASE:case T.LINK:case T.META:case T.STYLE:case T.TITLE:case T.SCRIPT:case T.BGSOUND:case T.BASEFONT:case T.TEMPLATE:{bf(e,t);break}case T.BODY:{Bvt(e,t);break}case T.FORM:{Hvt(e,t);break}case T.NOBR:{Xvt(e,t);break}case T.MATH:{c_t(e,t);break}case T.TABLE:{Jvt(e,t);break}case T.INPUT:{Zvt(e,t);break}case T.PARAM:case T.TRACK:case T.SOURCE:{e_t(e,t);break}case T.IMAGE:{n_t(e,t);break}case T.BUTTON:{Gvt(e,t);break}case T.APPLET:case T.OBJECT:case T.MARQUEE:{Qvt(e,t);break}case T.IFRAME:{s_t(e,t);break}case T.SELECT:{o_t(e,t);break}case T.OPTION:case T.OPTGROUP:{a_t(e,t);break}case T.NOEMBED:{Yfe(e,t);break}case T.FRAMESET:{jvt(e,t);break}case T.TEXTAREA:{r_t(e,t);break}case T.NOSCRIPT:{e.options.scriptingEnabled?Yfe(e,t):Kfe(e,t);break}case T.PLAINTEXT:{Wvt(e,t);break}case T.COL:case T.TH:case T.TD:case T.TR:case T.HEAD:case T.FRAME:case T.TBODY:case T.TFOOT:case T.THEAD:case T.CAPTION:case T.COLGROUP:break;default:Kfe(e,t)}}function d_t(e,t){if(e.openElements.hasInScope(T.BODY)&&(e.insertionMode=ee.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function h_t(e,t){e.openElements.hasInScope(T.BODY)&&(e.insertionMode=ee.AFTER_BODY,IOe(e,t))}function p_t(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function m_t(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(T.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(T.FORM):n&&e.openElements.remove(n))}function g_t(e){e.openElements.hasInButtonScope(T.P)||e._insertFakeElement(me.P,T.P),e._closePElement()}function y_t(e){e.openElements.hasInListItemScope(T.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(T.LI),e.openElements.popUntilTagNamePopped(T.LI))}function v_t(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function __t(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function b_t(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function w_t(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(me.BR,T.BR),e.openElements.pop(),e.framesetOk=!1}function _Oe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==T.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function B6(e,t){switch(t.tagID){case T.A:case T.B:case T.I:case T.S:case T.U:case T.EM:case T.TT:case T.BIG:case T.CODE:case T.FONT:case T.NOBR:case T.SMALL:case T.STRIKE:case T.STRONG:{FY(e,t);break}case T.P:{g_t(e);break}case T.DL:case T.UL:case T.OL:case T.DIR:case T.DIV:case T.NAV:case T.PRE:case T.MAIN:case T.MENU:case T.ASIDE:case T.BUTTON:case T.CENTER:case T.FIGURE:case T.FOOTER:case T.HEADER:case T.HGROUP:case T.DIALOG:case T.ADDRESS:case T.ARTICLE:case T.DETAILS:case T.SECTION:case T.SUMMARY:case T.LISTING:case T.FIELDSET:case T.BLOCKQUOTE:case T.FIGCAPTION:{p_t(e,t);break}case T.LI:{y_t(e);break}case T.DD:case T.DT:{v_t(e,t);break}case T.H1:case T.H2:case T.H3:case T.H4:case T.H5:case T.H6:{__t(e);break}case T.BR:{w_t(e);break}case T.BODY:{d_t(e,t);break}case T.HTML:{h_t(e,t);break}case T.FORM:{m_t(e);break}case T.APPLET:case T.OBJECT:case T.MARQUEE:{b_t(e,t);break}case T.TEMPLATE:{Ov(e,t);break}default:_Oe(e,t)}}function bOe(e,t){e.tmplInsertionModeStack.length>0?COe(e,t):BY(e,t)}function E_t(e,t){var n;t.tagID===T.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function x_t(e,t){e._err(t,we.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Y9(e,t){if(pOe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ee.IN_TABLE_TEXT,t.type){case En.CHARACTER:{EOe(e,t);break}case En.WHITESPACE_CHARACTER:{wOe(e,t);break}}else QC(e,t)}function S_t(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_CAPTION}function T_t(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_COLUMN_GROUP}function A_t(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(me.COLGROUP,T.COLGROUP),e.insertionMode=ee.IN_COLUMN_GROUP,jY(e,t)}function C_t(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_TABLE_BODY}function I_t(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(me.TBODY,T.TBODY),e.insertionMode=ee.IN_TABLE_BODY,j6(e,t)}function O_t(e,t){e.openElements.hasInTableScope(T.TABLE)&&(e.openElements.popUntilTagNamePopped(T.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function P_t(e,t){vOe(t)?e._appendElement(t,Ae.HTML):QC(e,t),t.ackSelfClosing=!0}function k_t(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Ae.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function gw(e,t){switch(t.tagID){case T.TD:case T.TH:case T.TR:{I_t(e,t);break}case T.STYLE:case T.SCRIPT:case T.TEMPLATE:{bf(e,t);break}case T.COL:{A_t(e,t);break}case T.FORM:{k_t(e,t);break}case T.TABLE:{O_t(e,t);break}case T.TBODY:case T.TFOOT:case T.THEAD:{C_t(e,t);break}case T.INPUT:{P_t(e,t);break}case T.CAPTION:{S_t(e,t);break}case T.COLGROUP:{T_t(e,t);break}default:QC(e,t)}}function cA(e,t){switch(t.tagID){case T.TABLE:{e.openElements.hasInTableScope(T.TABLE)&&(e.openElements.popUntilTagNamePopped(T.TABLE),e._resetInsertionMode());break}case T.TEMPLATE:{Ov(e,t);break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TBODY:case T.TD:case T.TFOOT:case T.TH:case T.THEAD:case T.TR:break;default:QC(e,t)}}function QC(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,F6(e,t),e.fosterParentingEnabled=n}function wOe(e,t){e.pendingCharacterTokens.push(t)}function EOe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function eS(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)QC(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const xOe=new Set([T.CAPTION,T.COL,T.COLGROUP,T.TBODY,T.TD,T.TFOOT,T.TH,T.THEAD,T.TR]);function $_t(e,t){const n=t.tagID;xOe.has(n)?e.openElements.hasInTableScope(T.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ee.IN_TABLE,gw(e,t)):oa(e,t)}function R_t(e,t){const n=t.tagID;switch(n){case T.CAPTION:case T.TABLE:{e.openElements.hasInTableScope(T.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(T.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ee.IN_TABLE,n===T.TABLE&&cA(e,t));break}case T.BODY:case T.COL:case T.COLGROUP:case T.HTML:case T.TBODY:case T.TD:case T.TFOOT:case T.TH:case T.THEAD:case T.TR:break;default:B6(e,t)}}function jY(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.COL:{e._appendElement(t,Ae.HTML),t.ackSelfClosing=!0;break}case T.TEMPLATE:{bf(e,t);break}default:gD(e,t)}}function N_t(e,t){switch(t.tagID){case T.COLGROUP:{e.openElements.currentTagId===T.COLGROUP&&(e.openElements.pop(),e.insertionMode=ee.IN_TABLE);break}case T.TEMPLATE:{Ov(e,t);break}case T.COL:break;default:gD(e,t)}}function gD(e,t){e.openElements.currentTagId===T.COLGROUP&&(e.openElements.pop(),e.insertionMode=ee.IN_TABLE,e._processToken(t))}function j6(e,t){switch(t.tagID){case T.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_ROW;break}case T.TH:case T.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(me.TR,T.TR),e.insertionMode=ee.IN_ROW,z6(e,t);break}case T.CAPTION:case T.COL:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE,gw(e,t));break}default:gw(e,t)}}function SU(e,t){const n=t.tagID;switch(t.tagID){case T.TBODY:case T.TFOOT:case T.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE);break}case T.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE,cA(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TD:case T.TH:case T.TR:break;default:cA(e,t)}}function z6(e,t){switch(t.tagID){case T.TH:case T.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Ae.HTML),e.insertionMode=ee.IN_CELL,e.activeFormattingElements.insertMarker();break}case T.CAPTION:case T.COL:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:case T.TR:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY,j6(e,t));break}default:gw(e,t)}}function SOe(e,t){switch(t.tagID){case T.TR:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY);break}case T.TABLE:{e.openElements.hasInTableScope(T.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY,SU(e,t));break}case T.TBODY:case T.TFOOT:case T.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(T.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ee.IN_TABLE_BODY,SU(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:case T.TD:case T.TH:break;default:cA(e,t)}}function D_t(e,t){const n=t.tagID;xOe.has(n)?(e.openElements.hasInTableScope(T.TD)||e.openElements.hasInTableScope(T.TH))&&(e._closeTableCell(),z6(e,t)):oa(e,t)}function L_t(e,t){const n=t.tagID;switch(n){case T.TD:case T.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ee.IN_ROW);break}case T.TABLE:case T.TBODY:case T.TFOOT:case T.THEAD:case T.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),SOe(e,t));break}case T.BODY:case T.CAPTION:case T.COL:case T.COLGROUP:case T.HTML:break;default:B6(e,t)}}function TOe(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.OPTION:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e._insertElement(t,Ae.HTML);break}case T.OPTGROUP:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Ae.HTML);break}case T.INPUT:case T.KEYGEN:case T.TEXTAREA:case T.SELECT:{e.openElements.hasInSelectScope(T.SELECT)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),t.tagID!==T.SELECT&&e._processStartTag(t));break}case T.SCRIPT:case T.TEMPLATE:{bf(e,t);break}}}function AOe(e,t){switch(t.tagID){case T.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===T.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===T.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===T.OPTGROUP&&e.openElements.pop();break}case T.OPTION:{e.openElements.currentTagId===T.OPTION&&e.openElements.pop();break}case T.SELECT:{e.openElements.hasInSelectScope(T.SELECT)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode());break}case T.TEMPLATE:{Ov(e,t);break}}}function M_t(e,t){const n=t.tagID;n===T.CAPTION||n===T.TABLE||n===T.TBODY||n===T.TFOOT||n===T.THEAD||n===T.TR||n===T.TD||n===T.TH?(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),e._processStartTag(t)):TOe(e,t)}function F_t(e,t){const n=t.tagID;n===T.CAPTION||n===T.TABLE||n===T.TBODY||n===T.TFOOT||n===T.THEAD||n===T.TR||n===T.TD||n===T.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(T.SELECT),e._resetInsertionMode(),e.onEndTag(t)):AOe(e,t)}function B_t(e,t){switch(t.tagID){case T.BASE:case T.BASEFONT:case T.BGSOUND:case T.LINK:case T.META:case T.NOFRAMES:case T.SCRIPT:case T.STYLE:case T.TEMPLATE:case T.TITLE:{bf(e,t);break}case T.CAPTION:case T.COLGROUP:case T.TBODY:case T.TFOOT:case T.THEAD:{e.tmplInsertionModeStack[0]=ee.IN_TABLE,e.insertionMode=ee.IN_TABLE,gw(e,t);break}case T.COL:{e.tmplInsertionModeStack[0]=ee.IN_COLUMN_GROUP,e.insertionMode=ee.IN_COLUMN_GROUP,jY(e,t);break}case T.TR:{e.tmplInsertionModeStack[0]=ee.IN_TABLE_BODY,e.insertionMode=ee.IN_TABLE_BODY,j6(e,t);break}case T.TD:case T.TH:{e.tmplInsertionModeStack[0]=ee.IN_ROW,e.insertionMode=ee.IN_ROW,z6(e,t);break}default:e.tmplInsertionModeStack[0]=ee.IN_BODY,e.insertionMode=ee.IN_BODY,oa(e,t)}}function j_t(e,t){t.tagID===T.TEMPLATE&&Ov(e,t)}function COe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(T.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):BY(e,t)}function z_t(e,t){t.tagID===T.HTML?oa(e,t):yD(e,t)}function IOe(e,t){var n;if(t.tagID===T.HTML){if(e.fragmentContext||(e.insertionMode=ee.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===T.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else yD(e,t)}function yD(e,t){e.insertionMode=ee.IN_BODY,F6(e,t)}function U_t(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.FRAMESET:{e._insertElement(t,Ae.HTML);break}case T.FRAME:{e._appendElement(t,Ae.HTML),t.ackSelfClosing=!0;break}case T.NOFRAMES:{bf(e,t);break}}}function V_t(e,t){t.tagID===T.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==T.FRAMESET&&(e.insertionMode=ee.AFTER_FRAMESET))}function H_t(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.NOFRAMES:{bf(e,t);break}}}function q_t(e,t){t.tagID===T.HTML&&(e.insertionMode=ee.AFTER_AFTER_FRAMESET)}function W_t(e,t){t.tagID===T.HTML?oa(e,t):Xk(e,t)}function Xk(e,t){e.insertionMode=ee.IN_BODY,F6(e,t)}function G_t(e,t){switch(t.tagID){case T.HTML:{oa(e,t);break}case T.NOFRAMES:{bf(e,t);break}}}function Y_t(e,t){t.chars=ai,e._insertCharacters(t)}function K_t(e,t){e._insertCharacters(t),e.framesetOk=!1}function OOe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Ae.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function X_t(e,t){if(fvt(t))OOe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Ae.MATHML?dOe(t):r===Ae.SVG&&(dvt(t),hOe(t)),MY(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Q_t(e,t){if(t.tagID===T.P||t.tagID===T.BR){OOe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Ae.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}me.AREA,me.BASE,me.BASEFONT,me.BGSOUND,me.BR,me.COL,me.EMBED,me.FRAME,me.HR,me.IMG,me.INPUT,me.KEYGEN,me.LINK,me.META,me.PARAM,me.SOURCE,me.TRACK,me.WBR;const POe=kOe("end"),Pv=kOe("start");function kOe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}const $Oe=function(e){if(e==null)return tbt;if(typeof e=="function")return U6(e);if(typeof e=="object")return Array.isArray(e)?J_t(e):Z_t(e);if(typeof e=="string")return ebt(e);throw new Error("Expected function, string, or object as test")};function J_t(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=$Oe(e[n]);return U6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Z_t(e){const t=e;return U6(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function ebt(e){return U6(t);function t(n){return n&&n.type===e}}function U6(e){return t;function t(n,r,i){return!!(nbt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function tbt(){return!0}function nbt(e){return e!==null&&typeof e=="object"&&"type"in e}const ROe=[],rbt=!0,Xfe=!1,ibt="skip";function sbt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=$Oe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=ROe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=obt(n(u,c)),h[0]===Xfe))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==ibt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Xfe)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function obt(e){return Array.isArray(e)?e:typeof e=="number"?[rbt,e]:e==null?ROe:[e]}function abt(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),sbt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const ubt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Qfe={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function NOe(e,t){const n=vbt(e),r=XIe("type",{handlers:{root:lbt,element:cbt,text:fbt,comment:LOe,doctype:dbt,raw:pbt},unknown:mbt}),i={parser:n?new Gfe(Qfe):Gfe.getFragmentParser(void 0,Qfe),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),DE(i,Pv());const s=n?i.parser.document:i.parser.getFragment(),o=c1t(s,{file:i.options.file});return i.stitches&&abt(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function DOe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function lbt(e,t){DOe(e.children,t)}function cbt(e,t){gbt(e,t),DOe(e.children,t),ybt(e,t)}function fbt(e,t){const n={type:En.CHARACTER,chars:e.value,location:JC(e)};DE(t,Pv(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function dbt(e,t){const n={type:En.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:JC(e)};DE(t,Pv(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function hbt(e,t){t.stitches=!0;const n=_bt(e);if("children"in e&&"children"in n){const r=NOe({type:"root",children:e.children},t.options);n.children=r.children}LOe({type:"comment",value:{stitch:n}},t)}function LOe(e,t){const n=e.value,r={type:En.COMMENT,data:n,location:JC(e)};DE(t,Pv(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function pbt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,MOe(t,Pv(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function mbt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))hbt(n,t);else{let r="";throw ubt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function DE(e,t){MOe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Hi.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function MOe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function gbt(e,t){if(t.parser.tokenizer.state===Hi.PLAINTEXT)return;DE(t,Pv(e));const n=t.parser.openElements.current;let r="namespaceURI"in n?n.namespaceURI:qy.html;r===qy.html&&e.tagName==="svg"&&(r=qy.svg);const i=m1t({...e,children:[]},{space:r===qy.svg?"svg":"html"}),s="attrs"in i?i.attrs:[],o={type:En.START_TAG,tagName:e.tagName,tagID:NE(e.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:s,location:JC(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=e.tagName}function ybt(e,t){if(!t.parser.tokenizer.inForeignNode&&x1t.includes(e.tagName)||t.parser.tokenizer.state===Hi.PLAINTEXT)return;DE(t,POe(e));const n={type:En.END_TAG,tagName:e.tagName,tagID:NE(e.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:JC(e)};t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken),n.tagName===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Hi.RCDATA||t.parser.tokenizer.state===Hi.RAWTEXT||t.parser.tokenizer.state===Hi.SCRIPT_DATA)&&(t.parser.tokenizer.state=Hi.DATA)}function vbt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName==="html"))}function JC(e){const t=Pv(e)||{line:void 0,column:void 0,offset:void 0},n=POe(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function _bt(e){return"children"in e?Dfe({...e,children:[]}):Dfe(e)}function bbt(e){return function(t,n){return NOe(t,{...e,file:n})}}function mu({text:e}){const t={img:({node:n,...r})=>R.jsx(IE,{...r}),p:({node:n,...r})=>R.jsx(Rt,{...r,pb:8}),h1:({node:n,...r})=>R.jsx(Lc,{order:1,...r,pb:12}),h2:({node:n,...r})=>R.jsx(Lc,{order:2,...r,pb:12}),h3:({node:n,...r})=>R.jsx(Lc,{order:3,...r,pb:12}),h4:({node:n,...r})=>R.jsx(Lc,{order:4,...r,pb:12}),h5:({node:n,...r})=>R.jsx(Lc,{order:5,...r,pb:12}),h6:({node:n,...r})=>R.jsx(Lc,{order:6,...r,pb:12}),a:({node:n,...r})=>R.jsx(tSe,{...r}),ul:({node:n,...r})=>R.jsx(pw,{withPadding:!0,...r,pb:8}),ol:({node:n,...r})=>R.jsx(pw,{type:"ordered",withPadding:!0,...r,pb:8})};return R.jsx("div",{style:{display:"inherit"},children:R.jsx(VIe,{components:t,rehypePlugins:[bbt],children:e})})}function wbt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e;return R.jsx(bN.Group,{label:R.jsx(mu,{text:r}),withAsterisk:i,...n,error:Cv(e,n,s),size:"md",children:R.jsx(Ql,{mt:"md",children:s.map(o=>R.jsx(bN,{disabled:t,value:o.value,label:o.label},o.value))})})}function Ebt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s,options:o}=e;return R.jsx(aCe,{disabled:t,label:R.jsx(mu,{text:i}),placeholder:r,data:o,withAsterisk:s,radius:"md",size:"md",...n,error:Cv(e,n,o)})}function xbt({response:e,answer:t}){const{prompt:n}=e;return R.jsxs(R.Fragment,{children:[R.jsx(Rt,{fz:"md",fw:500,children:R.jsx(mu,{text:n})}),R.jsx(pw,{children:Array.isArray(t.value)&&t.value.map(r=>R.jsx(pw.Item,{children:r},r))})]})}function FOe({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s,leftLabel:o,rightLabel:a}=e;return R.jsxs(XN.Group,{name:`radioInput${e.id}`,label:R.jsx(mu,{text:r}),withAsterisk:i,size:"md",...n,error:Cv(e,n,s),children:[o?R.jsx(Rt,{children:o}):null,R.jsx(Ql,{mt:"xs",children:s.map(u=>R.jsx(XN,{disabled:t,value:u.value,label:u.label},u.label))}),R.jsx(Rt,{children:a})]},e.id)}function Sbt({response:e,disabled:t,answer:n}){const{preset:r}=e,i=[];for(let o=1;o<=+r;o+=1)i.push({label:`${o}`,value:`${o}`});const s={...e,type:"radio",options:i};return R.jsx(FOe,{disabled:t,response:s,answer:n})}function Tbt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,min:s,max:o,placeholder:a}=e;return R.jsx(DAe,{disabled:t,placeholder:a,label:R.jsx(mu,{text:r}),withAsterisk:i,radius:"md",size:"md",min:s,max:o,...n,error:Cv(e,n)})}function Abt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e,o=Cv(e,n);return R.jsx(is.Wrapper,{withAsterisk:i,label:R.jsx(mu,{text:r}),error:o,size:"md",children:R.jsx(aY,{disabled:t,labelAlwaysOn:!0,sx:{marginTop:"5px",marginBottom:"30px"},marks:s,...n,styles:a=>({mark:{width:12,height:12,borderRadius:6,transform:"translateX(-3px) translateY(-2px)"},markFilled:{borderColor:a.colors.blue[6]},markLabel:{fontSize:a.fontSizes.sm,marginBottom:5,marginTop:0},thumb:{height:24,width:24,backgroundColor:a.white,borderWidth:1,boxShadow:a.shadows.sm},label:{top:-4,height:28,lineHeight:28,width:28,padding:0,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700,color:"orange",backgroundColor:"transparent"}})})})}function Cbt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return R.jsx(iY,{disabled:t,placeholder:r,label:R.jsx(mu,{text:i}),radius:"md",size:"md",withAsterisk:s,...n,value:n.value||"",error:Cv(e,n)})}function Ibt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return R.jsx(F2e,{disabled:t,placeholder:r,label:R.jsx(mu,{text:i}),radius:"md",size:"md",withAsterisk:s,...n,value:n.value||"",error:Cv(e,n)})}function Obt({response:e,answer:t,storedAnswer:n}){const r=(n?{value:n}:t)||{value:void 0},i=!!n,[s]=xG(),o=A.useMemo(()=>{if(e.paramCapture){const a=s.get(e.paramCapture);return i||!!a}return i},[i,e.paramCapture,s]);return R.jsxs(At,{sx:{margin:10,padding:5},children:[e.type==="numerical"&&R.jsx(Tbt,{response:e,disabled:o,answer:r}),e.type==="shortText"&&R.jsx(Cbt,{response:e,disabled:o,answer:r}),e.type==="longText"&&R.jsx(Ibt,{response:e,disabled:o,answer:r}),e.type==="likert"&&R.jsx(Sbt,{response:e,disabled:o,answer:r}),e.type==="dropdown"&&R.jsx(Ebt,{response:e,disabled:o,answer:r}),e.type==="slider"&&R.jsx(Abt,{response:e,disabled:o,answer:r}),e.type==="radio"&&R.jsx(FOe,{response:e,disabled:o,answer:r}),e.type==="checkbox"&&R.jsx(wbt,{response:e,disabled:o,answer:r}),e.type==="iframe"&&R.jsx(xbt,{response:e,answer:r})]})}function vD({config:e,location:t,status:n,style:r}){var y,v;const i=lc(),s=rh()[i],o=n==null?void 0:n.answer,a=e,u=((y=a==null?void 0:a.response)==null?void 0:y.filter(_=>_.location?_.location===t:t==="belowStimulus"))||[],l=Xp(),{updateResponseBlockValidation:c}=Kp(),f=zpt(u,i,o||{}),[d,h]=A.useState(!1),{iframeAnswers:p}=_f(_=>_),m=(((v=a==null?void 0:a.correctAnswer)==null?void 0:v.length)||0)>0,g=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return A.useEffect(()=>{const _=u.find(b=>b.type==="iframe");if(_){const b=_.id;f.setValues({...f.values,[b]:p})}},[p]),A.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:h1(f.values)}))},[f.values,i,t]),R.jsxs("div",{style:r,children:[u.map(_=>{var b,E;return R.jsx(L.Fragment,{children:_.hidden?"":R.jsxs(R.Fragment,{children:[R.jsx(Obt,{storedAnswer:o?o[_.id]:void 0,answer:{...f.getInputProps(_.id,{type:_.type==="checkbox"?"checkbox":"input"})},response:_}),m&&d&&R.jsx(Rt,{children:`The correct answer is: ${(E=(b=a.correctAnswer)==null?void 0:b.find(w=>w.id===_.id))==null?void 0:E.answer}`})]})},`${_.id}-${i}`)}),R.jsxs(Ql,{position:"right",spacing:"xs",mt:"xl",children:[m&&g&&R.jsx(cu,{onClick:()=>h(!0),disabled:!f.isValid(),children:"Check Answer"}),g&&R.jsx(hpt,{disabled:m&&!d,setCheckClicked:h,label:a.nextButtonText||"Next"})]})]})}const K9="@REVISIT_COMMS",Pbt={position:"relative",width:"90%",height:"70vh",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"auto",marginRight:"auto"},kbt={position:"absolute",width:"90%",height:"32.4rem"};function $bt({currentConfig:e}){const{setIframeAnswers:t}=Kp(),n=Xp(),r=PCe(),i=A.useRef(null),s=A.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]);A.useEffect(()=>(document.body.style.overflow="hidden",window.scrollTo(0,0),()=>{document.body.style.overflow="auto"}),[]);const o=lc(),a=rh()[o],u=Ev(),l=A.useCallback((c,f)=>{var d,h;(h=(d=i.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${K9}/${c}`,iframeId:s,message:f},"*")},[i,s]);return A.useEffect(()=>{window.scrollTo(0,0)}),A.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&s===d.iframeId)switch(d.type){case`${K9}/READY`:i.current&&d.message&&d.message.documentHeight&&(i.current.style.height=`${d.message.documentHeight}px`);break;case`${K9}/ANSWERS`:n(t(d.message.answer));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[n,o,r,s,u,e,l]),R.jsx("div",{style:Pbt,children:R.jsx("iframe",{ref:i,src:`${vf}${e.path}?trialid=${a}&id=${s}`,style:kbt,frameBorder:"0"})})}const Rbt={maxWidth:"100%"};function Nbt({currentConfig:e}){const t={...Rbt,...e.style};return R.jsx(IE,{mx:"auto",src:`${vf}${e.path}`,style:t})}function Jfe(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class Zfe extends Map{constructor(t,n=zOe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(TU(this,t))}has(t){return super.has(TU(this,t))}set(t,n){return super.set(BOe(this,t),n)}delete(t){return super.delete(jOe(this,t))}}class _D extends Set{constructor(t,n=zOe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(TU(this,t))}add(t){return super.add(BOe(this,t))}delete(t){return super.delete(jOe(this,t))}}function TU({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function BOe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function jOe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function zOe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Dbt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}var Lbt={value:()=>{}};function V6(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Qk(n)}function Qk(e){this._=e}function Mbt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Qk.prototype=V6.prototype={constructor:Qk,on:function(e,t){var n=this._,r=Mbt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Fbt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=ede(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ede(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Qk(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Fbt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ede(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Lbt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var AU="http://www.w3.org/1999/xhtml";const tde={svg:"http://www.w3.org/2000/svg",xhtml:AU,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function H6(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),tde.hasOwnProperty(t)?{space:tde[t],local:e}:e}function Bbt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===AU&&t.documentElement.namespaceURI===AU?t.createElement(e):t.createElementNS(n,e)}}function jbt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function UOe(e){var t=H6(e);return(t.local?jbt:Bbt)(t)}function zbt(){}function zY(e){return e==null?zbt:function(){return this.querySelector(e)}}function Ubt(e){typeof e!="function"&&(e=zY(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Aa(r,this._parents)}function VOe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Vbt(){return[]}function HOe(e){return e==null?Vbt:function(){return this.querySelectorAll(e)}}function Hbt(e){return function(){return VOe(e.apply(this,arguments))}}function qbt(e){typeof e=="function"?e=Hbt(e):e=HOe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Aa(r,i)}function qOe(e){return function(){return this.matches(e)}}function WOe(e){return function(t){return t.matches(e)}}var Wbt=Array.prototype.find;function Gbt(e){return function(){return Wbt.call(this.children,e)}}function Ybt(){return this.firstElementChild}function Kbt(e){return this.select(e==null?Ybt:Gbt(typeof e=="function"?e:WOe(e)))}var Xbt=Array.prototype.filter;function Qbt(){return Array.from(this.children)}function Jbt(e){return function(){return Xbt.call(this.children,e)}}function Zbt(e){return this.selectAll(e==null?Qbt:Jbt(typeof e=="function"?e:WOe(e)))}function ewt(e){typeof e!="function"&&(e=qOe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Aa(r,this._parents)}function GOe(e){return new Array(e.length)}function twt(){return new Aa(this._enter||this._groups.map(GOe),this._parents)}function bD(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}bD.prototype={constructor:bD,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function nwt(e){return function(){return e}}function rwt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new bD(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function iwt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new bD(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function swt(e){return e.__data__}function owt(e,t){if(!arguments.length)return Array.from(this,swt);var n=t?iwt:rwt,r=this._parents,i=this._groups;typeof e!="function"&&(e=nwt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=awt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,_=0,b,E;v<p;++v)if(b=m[v]){for(v>=_&&(_=v+1);!(E=g[_])&&++_<p;);b._next=E||null}}return o=new Aa(o,r),o._enter=a,o._exit=u,o}function awt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function uwt(){return new Aa(this._exit||this._groups.map(GOe),this._parents)}function lwt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function cwt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Aa(a,this._parents)}function fwt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function dwt(e){e||(e=hwt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Aa(i,this._parents).order()}function hwt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function pwt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function mwt(){return Array.from(this)}function gwt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function ywt(){let e=0;for(const t of this)++e;return e}function vwt(){return!this.node()}function _wt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function bwt(e){return function(){this.removeAttribute(e)}}function wwt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ewt(e,t){return function(){this.setAttribute(e,t)}}function xwt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Swt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Twt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Awt(e,t){var n=H6(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?wwt:bwt:typeof t=="function"?n.local?Twt:Swt:n.local?xwt:Ewt)(n,t))}function YOe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Cwt(e){return function(){this.style.removeProperty(e)}}function Iwt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Owt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Pwt(e,t,n){return arguments.length>1?this.each((t==null?Cwt:typeof t=="function"?Owt:Iwt)(e,t,n??"")):yw(this.node(),e)}function yw(e,t){return e.style.getPropertyValue(t)||YOe(e).getComputedStyle(e,null).getPropertyValue(t)}function kwt(e){return function(){delete this[e]}}function $wt(e,t){return function(){this[e]=t}}function Rwt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Nwt(e,t){return arguments.length>1?this.each((t==null?kwt:typeof t=="function"?Rwt:$wt)(e,t)):this.node()[e]}function KOe(e){return e.trim().split(/^|\s+/)}function UY(e){return e.classList||new XOe(e)}function XOe(e){this._node=e,this._names=KOe(e.getAttribute("class")||"")}XOe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function QOe(e,t){for(var n=UY(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function JOe(e,t){for(var n=UY(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Dwt(e){return function(){QOe(this,e)}}function Lwt(e){return function(){JOe(this,e)}}function Mwt(e,t){return function(){(t.apply(this,arguments)?QOe:JOe)(this,e)}}function Fwt(e,t){var n=KOe(e+"");if(arguments.length<2){for(var r=UY(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Mwt:t?Dwt:Lwt)(n,t))}function Bwt(){this.textContent=""}function jwt(e){return function(){this.textContent=e}}function zwt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Uwt(e){return arguments.length?this.each(e==null?Bwt:(typeof e=="function"?zwt:jwt)(e)):this.node().textContent}function Vwt(){this.innerHTML=""}function Hwt(e){return function(){this.innerHTML=e}}function qwt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Wwt(e){return arguments.length?this.each(e==null?Vwt:(typeof e=="function"?qwt:Hwt)(e)):this.node().innerHTML}function Gwt(){this.nextSibling&&this.parentNode.appendChild(this)}function Ywt(){return this.each(Gwt)}function Kwt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xwt(){return this.each(Kwt)}function Qwt(e){var t=typeof e=="function"?e:UOe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Jwt(){return null}function Zwt(e,t){var n=typeof e=="function"?e:UOe(e),r=t==null?Jwt:typeof t=="function"?t:zY(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function eEt(){var e=this.parentNode;e&&e.removeChild(this)}function tEt(){return this.each(eEt)}function nEt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function rEt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function iEt(e){return this.select(e?rEt:nEt)}function sEt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function oEt(e){return function(t){e.call(this,t,this.__data__)}}function aEt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function uEt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function lEt(e,t,n){return function(){var r=this.__on,i,s=oEt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function cEt(e,t,n){var r=aEt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?lEt:uEt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function ZOe(e,t,n){var r=YOe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function fEt(e,t){return function(){return ZOe(this,e,t)}}function dEt(e,t){return function(){return ZOe(this,e,t.apply(this,arguments))}}function hEt(e,t){return this.each((typeof t=="function"?dEt:fEt)(e,t))}function*pEt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var VY=[null];function Aa(e,t){this._groups=e,this._parents=t}function ZC(){return new Aa([[document.documentElement]],VY)}function mEt(){return this}Aa.prototype=ZC.prototype={constructor:Aa,select:Ubt,selectAll:qbt,selectChild:Kbt,selectChildren:Zbt,filter:ewt,data:owt,enter:twt,exit:uwt,join:lwt,merge:cwt,selection:mEt,order:fwt,sort:dwt,call:pwt,nodes:mwt,node:gwt,size:ywt,empty:vwt,each:_wt,attr:Awt,style:Pwt,property:Nwt,classed:Fwt,text:Uwt,html:Wwt,raise:Ywt,lower:Xwt,append:Qwt,insert:Zwt,remove:tEt,clone:iEt,datum:sEt,on:cEt,dispatch:hEt,[Symbol.iterator]:pEt};function Qi(e){return typeof e=="string"?new Aa([[document.querySelector(e)]],[document.documentElement]):new Aa([[e]],VY)}function gEt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function CU(e,t){if(e=gEt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function yEt(e){return typeof e=="string"?new Aa([document.querySelectorAll(e)],[document.documentElement]):new Aa([VOe(e)],VY)}const IU={capture:!0,passive:!1};function OU(e){e.preventDefault(),e.stopImmediatePropagation()}function vEt(e){var t=e.document.documentElement,n=Qi(e).on("dragstart.drag",OU,IU);"onselectstart"in t?n.on("selectstart.drag",OU,IU):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function _Et(e,t){var n=e.document.documentElement,r=Qi(e).on("dragstart.drag",null);t&&(r.on("click.drag",OU,IU),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function LE(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function eI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function P0(){}var L1=.7,vw=1/L1,Rb="\\s*([+-]?\\d+)\\s*",fA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bEt=/^#([0-9a-f]{3,8})$/,wEt=new RegExp(`^rgb\\(${Rb},${Rb},${Rb}\\)$`),EEt=new RegExp(`^rgb\\(${Sd},${Sd},${Sd}\\)$`),xEt=new RegExp(`^rgba\\(${Rb},${Rb},${Rb},${fA}\\)$`),SEt=new RegExp(`^rgba\\(${Sd},${Sd},${Sd},${fA}\\)$`),TEt=new RegExp(`^hsl\\(${fA},${Sd},${Sd}\\)$`),AEt=new RegExp(`^hsla\\(${fA},${Sd},${Sd},${fA}\\)$`),nde={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};LE(P0,M1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:rde,formatHex:rde,formatHex8:CEt,formatHsl:IEt,formatRgb:ide,toString:ide});function rde(){return this.rgb().formatHex()}function CEt(){return this.rgb().formatHex8()}function IEt(){return ePe(this).formatHsl()}function ide(){return this.rgb().formatRgb()}function M1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=bEt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?sde(t):n===3?new Bs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?dP(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?dP(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=wEt.exec(e))?new Bs(t[1],t[2],t[3],1):(t=EEt.exec(e))?new Bs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=xEt.exec(e))?dP(t[1],t[2],t[3],t[4]):(t=SEt.exec(e))?dP(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=TEt.exec(e))?ude(t[1],t[2]/100,t[3]/100,1):(t=AEt.exec(e))?ude(t[1],t[2]/100,t[3]/100,t[4]):nde.hasOwnProperty(e)?sde(nde[e]):e==="transparent"?new Bs(NaN,NaN,NaN,0):null}function sde(e){return new Bs(e>>16&255,e>>8&255,e&255,1)}function dP(e,t,n,r){return r<=0&&(e=t=n=NaN),new Bs(e,t,n,r)}function HY(e){return e instanceof P0||(e=M1(e)),e?(e=e.rgb(),new Bs(e.r,e.g,e.b,e.opacity)):new Bs}function Wg(e,t,n,r){return arguments.length===1?HY(e):new Bs(e,t,n,r??1)}function Bs(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}LE(Bs,Wg,eI(P0,{brighter(e){return e=e==null?vw:Math.pow(vw,e),new Bs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?L1:Math.pow(L1,e),new Bs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Bs(p1(this.r),p1(this.g),p1(this.b),wD(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ode,formatHex:ode,formatHex8:OEt,formatRgb:ade,toString:ade}));function ode(){return`#${Wy(this.r)}${Wy(this.g)}${Wy(this.b)}`}function OEt(){return`#${Wy(this.r)}${Wy(this.g)}${Wy(this.b)}${Wy((isNaN(this.opacity)?1:this.opacity)*255)}`}function ade(){const e=wD(this.opacity);return`${e===1?"rgb(":"rgba("}${p1(this.r)}, ${p1(this.g)}, ${p1(this.b)}${e===1?")":`, ${e})`}`}function wD(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function p1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wy(e){return e=p1(e),(e<16?"0":"")+e.toString(16)}function ude(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new jc(e,t,n,r)}function ePe(e){if(e instanceof jc)return new jc(e.h,e.s,e.l,e.opacity);if(e instanceof P0||(e=M1(e)),!e)return new jc;if(e instanceof jc)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new jc(o,a,u,e.opacity)}function ED(e,t,n,r){return arguments.length===1?ePe(e):new jc(e,t,n,r??1)}function jc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}LE(jc,ED,eI(P0,{brighter(e){return e=e==null?vw:Math.pow(vw,e),new jc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?L1:Math.pow(L1,e),new jc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Bs(X9(e>=240?e-240:e+120,i,r),X9(e,i,r),X9(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new jc(lde(this.h),hP(this.s),hP(this.l),wD(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wD(this.opacity);return`${e===1?"hsl(":"hsla("}${lde(this.h)}, ${hP(this.s)*100}%, ${hP(this.l)*100}%${e===1?")":`, ${e})`}`}}));function lde(e){return e=(e||0)%360,e<0?e+360:e}function hP(e){return Math.max(0,Math.min(1,e||0))}function X9(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const tPe=Math.PI/180,nPe=180/Math.PI,xD=18,rPe=.96422,iPe=1,sPe=.82521,oPe=4/29,Nb=6/29,aPe=3*Nb*Nb,PEt=Nb*Nb*Nb;function uPe(e){if(e instanceof Td)return new Td(e.l,e.a,e.b,e.opacity);if(e instanceof Yh)return lPe(e);e instanceof Bs||(e=HY(e));var t=eB(e.r),n=eB(e.g),r=eB(e.b),i=Q9((.2225045*t+.7168786*n+.0606169*r)/iPe),s,o;return t===n&&n===r?s=o=i:(s=Q9((.4360747*t+.3850649*n+.1430804*r)/rPe),o=Q9((.0139322*t+.0971045*n+.7141733*r)/sPe)),new Td(116*i-16,500*(s-i),200*(i-o),e.opacity)}function SD(e,t,n,r){return arguments.length===1?uPe(e):new Td(e,t,n,r??1)}function Td(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}LE(Td,SD,eI(P0,{brighter(e){return new Td(this.l+xD*(e??1),this.a,this.b,this.opacity)},darker(e){return new Td(this.l-xD*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=rPe*J9(t),e=iPe*J9(e),n=sPe*J9(n),new Bs(Z9(3.1338561*t-1.6168667*e-.4906146*n),Z9(-.9787684*t+1.9161415*e+.033454*n),Z9(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Q9(e){return e>PEt?Math.pow(e,1/3):e/aPe+oPe}function J9(e){return e>Nb?e*e*e:aPe*(e-oPe)}function Z9(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function eB(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function kEt(e){if(e instanceof Yh)return new Yh(e.h,e.c,e.l,e.opacity);if(e instanceof Td||(e=uPe(e)),e.a===0&&e.b===0)return new Yh(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*nPe;return new Yh(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function TD(e,t,n,r){return arguments.length===1?kEt(e):new Yh(e,t,n,r??1)}function Yh(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function lPe(e){if(isNaN(e.h))return new Td(e.l,0,0,e.opacity);var t=e.h*tPe;return new Td(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}LE(Yh,TD,eI(P0,{brighter(e){return new Yh(this.h,this.c,this.l+xD*(e??1),this.opacity)},darker(e){return new Yh(this.h,this.c,this.l-xD*(e??1),this.opacity)},rgb(){return lPe(this).rgb()}}));var cPe=-.14861,qY=1.78277,WY=-.29227,q6=-.90649,dA=1.97294,cde=dA*q6,fde=dA*qY,dde=qY*WY-q6*cPe;function $Et(e){if(e instanceof m1)return new m1(e.h,e.s,e.l,e.opacity);e instanceof Bs||(e=HY(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(dde*r+cde*t-fde*n)/(dde+cde-fde),s=r-i,o=(dA*(n-i)-WY*s)/q6,a=Math.sqrt(o*o+s*s)/(dA*i*(1-i)),u=a?Math.atan2(o,s)*nPe-120:NaN;return new m1(u<0?u+360:u,a,i,e.opacity)}function PU(e,t,n,r){return arguments.length===1?$Et(e):new m1(e,t,n,r??1)}function m1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}LE(m1,PU,eI(P0,{brighter(e){return e=e==null?vw:Math.pow(vw,e),new m1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?L1:Math.pow(L1,e),new m1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*tPe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Bs(255*(t+n*(cPe*r+qY*i)),255*(t+n*(WY*r+q6*i)),255*(t+n*(dA*r)),this.opacity)}}));function fPe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function dPe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return fPe((n-r/t)*t,o,i,s,a)}}function hPe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return fPe((n-r/t)*t,i,s,o,a)}}const W6=e=>()=>e;function pPe(e,t){return function(n){return e+n*t}}function REt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function G6(e,t){var n=t-e;return n?pPe(e,n>180||n<-180?n-360*Math.round(n/360):n):W6(isNaN(e)?t:e)}function NEt(e){return(e=+e)==1?js:function(t,n){return n-t?REt(t,n,e):W6(isNaN(t)?n:t)}}function js(e,t){var n=t-e;return n?pPe(e,n):W6(isNaN(e)?t:e)}const hA=function e(t){var n=NEt(t);function r(i,s){var o=n((i=Wg(i)).r,(s=Wg(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=js(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function mPe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Wg(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var DEt=mPe(dPe),LEt=mPe(hPe);function GY(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function gPe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function MEt(e,t){return(gPe(t)?GY:yPe)(e,t)}function yPe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Qp(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function vPe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Nl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _Pe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Qp(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var kU=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tB=new RegExp(kU.source,"g");function FEt(e){return function(){return e}}function BEt(e){return function(t){return e(t)+""}}function YY(e,t){var n=kU.lastIndex=tB.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=kU.exec(e))&&(i=tB.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Nl(r,i)})),n=tB.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?BEt(u[0].x):FEt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Qp(e,t){var n=typeof t,r;return t==null||n==="boolean"?W6(t):(n==="number"?Nl:n==="string"?(r=M1(t))?(t=r,hA):YY:t instanceof M1?hA:t instanceof Date?vPe:gPe(t)?GY:Array.isArray(t)?yPe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_Pe:Nl)(e,t)}function jEt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function zEt(e,t){var n=G6(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function tI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var hde=180/Math.PI,$U={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bPe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*hde,skewX:Math.atan(u)*hde,scaleX:o,scaleY:a}}var pP;function UEt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?$U:bPe(t.a,t.b,t.c,t.d,t.e,t.f)}function VEt(e){return e==null||(pP||(pP=document.createElementNS("http://www.w3.org/2000/svg","g")),pP.setAttribute("transform",e),!(e=pP.transform.baseVal.consolidate()))?$U:(e=e.matrix,bPe(e.a,e.b,e.c,e.d,e.e,e.f))}function wPe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Nl(l,f)},{i:m-2,x:Nl(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Nl(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Nl(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Nl(l,f)},{i:m-2,x:Nl(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var EPe=wPe(UEt,"px, ","px)","deg)"),xPe=wPe(VEt,", ",")",")"),HEt=1e-12;function pde(e){return((e=Math.exp(e))+1/e)/2}function qEt(e){return((e=Math.exp(e))-1/e)/2}function WEt(e){return((e=Math.exp(2*e))-1)/(e+1)}const GEt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<HEt)y=Math.log(d/l)/t,g=function(x){return[a+x*h,u+x*p,l*Math.exp(t*x*y)]};else{var v=Math.sqrt(m),_=(d*d-l*l+r*m)/(2*l*n*v),b=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(_*_+1)-_),w=Math.log(Math.sqrt(b*b+1)-b);y=(w-E)/t,g=function(x){var S=x*y,I=pde(E),C=l/(n*v)*(I*WEt(t*S+E)-qEt(E));return[a+C*h,u+C*p,l*I/pde(t*S+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function SPe(e){return function(t,n){var r=e((t=ED(t)).h,(n=ED(n)).h),i=js(t.s,n.s),s=js(t.l,n.l),o=js(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const YEt=SPe(G6);var KEt=SPe(js);function XEt(e,t){var n=js((e=SD(e)).l,(t=SD(t)).l),r=js(e.a,t.a),i=js(e.b,t.b),s=js(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function TPe(e){return function(t,n){var r=e((t=TD(t)).h,(n=TD(n)).h),i=js(t.c,n.c),s=js(t.l,n.l),o=js(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const QEt=TPe(G6);var JEt=TPe(js);function APe(e){return function t(n){n=+n;function r(i,s){var o=e((i=PU(i)).h,(s=PU(s)).h),a=js(i.s,s.s),u=js(i.l,s.l),l=js(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const ZEt=APe(G6);var ext=APe(js);function KY(e,t){t===void 0&&(t=e,e=Qp);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function txt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const nxt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Qp,interpolateArray:MEt,interpolateBasis:dPe,interpolateBasisClosed:hPe,interpolateCubehelix:ZEt,interpolateCubehelixLong:ext,interpolateDate:vPe,interpolateDiscrete:jEt,interpolateHcl:QEt,interpolateHclLong:JEt,interpolateHsl:YEt,interpolateHslLong:KEt,interpolateHue:zEt,interpolateLab:XEt,interpolateNumber:Nl,interpolateNumberArray:GY,interpolateObject:_Pe,interpolateRgb:hA,interpolateRgbBasis:DEt,interpolateRgbBasisClosed:LEt,interpolateRound:tI,interpolateString:YY,interpolateTransformCss:EPe,interpolateTransformSvg:xPe,interpolateZoom:GEt,piecewise:KY,quantize:txt},Symbol.toStringTag,{value:"Module"}));var _w=0,YS=0,tS=0,CPe=1e3,AD,KS,CD=0,F1=0,Y6=0,pA=typeof performance=="object"&&performance.now?performance:Date,IPe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function K6(){return F1||(IPe(rxt),F1=pA.now()+Y6)}function rxt(){F1=0}function mA(){this._call=this._time=this._next=null}mA.prototype=XY.prototype={constructor:mA,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?K6():+n)+(t==null?0:+t),!this._next&&KS!==this&&(KS?KS._next=this:AD=this,KS=this),this._call=e,this._time=n,RU()},stop:function(){this._call&&(this._call=null,this._time=1/0,RU())}};function XY(e,t,n){var r=new mA;return r.restart(e,t,n),r}function ixt(){K6(),++_w;for(var e=AD,t;e;)(t=F1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--_w}function mde(){F1=(CD=pA.now())+Y6,_w=YS=0;try{ixt()}finally{_w=0,oxt(),F1=0}}function sxt(){var e=pA.now(),t=e-CD;t>CPe&&(Y6-=t,CD=e)}function oxt(){for(var e,t=AD,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:AD=n);KS=e,RU(r)}function RU(e){if(!_w){YS&&(YS=clearTimeout(YS));var t=e-F1;t>24?(e<1/0&&(YS=setTimeout(mde,e-pA.now()-Y6)),tS&&(tS=clearInterval(tS))):(tS||(CD=pA.now(),tS=setInterval(sxt,CPe)),_w=1,IPe(mde))}}function gde(e,t,n){var r=new mA;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function axt(e,t,n){var r=new mA,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?K6():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var uxt=V6("start","end","cancel","interrupt"),lxt=[],OPe=0,yde=1,NU=2,Jk=3,vde=4,DU=5,Zk=6;function X6(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;cxt(e,n,{name:t,index:r,group:i,on:uxt,tween:lxt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:OPe})}function QY(e,t){var n=wf(e,t);if(n.state>OPe)throw new Error("too late; already scheduled");return n}function ih(e,t){var n=wf(e,t);if(n.state>Jk)throw new Error("too late; already running");return n}function wf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function cxt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=XY(s,0,n.time);function s(l){n.state=yde,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==yde)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===Jk)return gde(o);h.state===vde?(h.state=Zk,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=Zk,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(gde(function(){n.state===Jk&&(n.state=vde,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=NU,n.on.call("start",e,e.__data__,n.index,n.group),n.state===NU){for(n.state=Jk,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=DU,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===DU&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Zk,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function LU(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>NU&&r.state<DU,r.state=Zk,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function fxt(e){return this.each(function(){LU(this,e)})}function dxt(e,t){var n,r;return function(){var i=ih(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function hxt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ih(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function pxt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=wf(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?dxt:hxt)(n,e,t))}function JY(e,t,n){var r=e._id;return e.each(function(){var i=ih(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return wf(i,r).value[t]}}function PPe(e,t){var n;return(typeof t=="number"?Nl:t instanceof M1?hA:(n=M1(t))?(t=n,hA):YY)(e,t)}function mxt(e){return function(){this.removeAttribute(e)}}function gxt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yxt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function vxt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function _xt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function bxt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function wxt(e,t){var n=H6(e),r=n==="transform"?xPe:PPe;return this.attrTween(e,typeof t=="function"?(n.local?bxt:_xt)(n,r,JY(this,"attr."+e,t)):t==null?(n.local?gxt:mxt)(n):(n.local?vxt:yxt)(n,r,t))}function Ext(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function xxt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Sxt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&xxt(e,s)),n}return i._value=t,i}function Txt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Ext(e,s)),n}return i._value=t,i}function Axt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=H6(e);return this.tween(n,(r.local?Sxt:Txt)(r,t))}function Cxt(e,t){return function(){QY(this,e).delay=+t.apply(this,arguments)}}function Ixt(e,t){return t=+t,function(){QY(this,e).delay=t}}function Oxt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cxt:Ixt)(t,e)):wf(this.node(),t).delay}function Pxt(e,t){return function(){ih(this,e).duration=+t.apply(this,arguments)}}function kxt(e,t){return t=+t,function(){ih(this,e).duration=t}}function $xt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Pxt:kxt)(t,e)):wf(this.node(),t).duration}function Rxt(e,t){if(typeof t!="function")throw new Error;return function(){ih(this,e).ease=t}}function Nxt(e){var t=this._id;return arguments.length?this.each(Rxt(t,e)):wf(this.node(),t).ease}function Dxt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ih(this,e).ease=n}}function Lxt(e){if(typeof e!="function")throw new Error;return this.each(Dxt(this._id,e))}function Mxt(e){typeof e!="function"&&(e=qOe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Cp(r,this._parents,this._name,this._id)}function Fxt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Cp(o,this._parents,this._name,this._id)}function Bxt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function jxt(e,t,n){var r,i,s=Bxt(t)?QY:ih;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function zxt(e,t){var n=this._id;return arguments.length<2?wf(this.node(),n).on.on(e):this.each(jxt(n,e,t))}function Uxt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Vxt(){return this.on("end.remove",Uxt(this._id))}function Hxt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zY(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,X6(l[d],t,n,d,l,wf(c,n)));return new Cp(s,this._parents,t,n)}function qxt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=HOe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=wf(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&X6(h,t,n,m,d,p);s.push(d),o.push(c)}return new Cp(s,o,t,n)}var Wxt=ZC.prototype.constructor;function Gxt(){return new Wxt(this._groups,this._parents)}function Yxt(e,t){var n,r,i;return function(){var s=yw(this,e),o=(this.style.removeProperty(e),yw(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function kPe(e){return function(){this.style.removeProperty(e)}}function Kxt(e,t,n){var r,i=n+"",s;return function(){var o=yw(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Xxt(e,t,n){var r,i,s;return function(){var o=yw(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),yw(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Qxt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=ih(this,e),l=u.on,c=u.value[s]==null?a||(a=kPe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Jxt(e,t,n){var r=(e+="")=="transform"?EPe:PPe;return t==null?this.styleTween(e,Yxt(e,r)).on("end.style."+e,kPe(e)):typeof t=="function"?this.styleTween(e,Xxt(e,r,JY(this,"style."+e,t))).each(Qxt(this._id,e)):this.styleTween(e,Kxt(e,r,t),n).on("end.style."+e,null)}function Zxt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function eSt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Zxt(e,o,n)),r}return s._value=t,s}function tSt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,eSt(e,t,n??""))}function nSt(e){return function(){this.textContent=e}}function rSt(e){return function(){var t=e(this);this.textContent=t??""}}function iSt(e){return this.tween("text",typeof e=="function"?rSt(JY(this,"text",e)):nSt(e==null?"":e+""))}function sSt(e){return function(t){this.textContent=e.call(this,t)}}function oSt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&sSt(i)),t}return r._value=e,r}function aSt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,oSt(e))}function uSt(){for(var e=this._name,t=this._id,n=$Pe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=wf(u,t);X6(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Cp(r,this._parents,e,n)}function lSt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=ih(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var cSt=0;function Cp(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function $Pe(){return++cSt}var wh=ZC.prototype;Cp.prototype={constructor:Cp,select:Hxt,selectAll:qxt,selectChild:wh.selectChild,selectChildren:wh.selectChildren,filter:Mxt,merge:Fxt,selection:Gxt,transition:uSt,call:wh.call,nodes:wh.nodes,node:wh.node,size:wh.size,empty:wh.empty,each:wh.each,on:zxt,attr:wxt,attrTween:Axt,style:Jxt,styleTween:tSt,text:iSt,textTween:aSt,remove:Vxt,tween:pxt,delay:Oxt,duration:$xt,ease:Nxt,easeVarying:Lxt,end:lSt,[Symbol.iterator]:wh[Symbol.iterator]};const fSt=e=>+e;function dSt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var hSt={time:null,delay:0,duration:250,ease:dSt};function pSt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function mSt(e){var t,n;e instanceof Cp?(t=e._id,e=e._name):(t=$Pe(),(n=hSt).time=K6(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&X6(u,e,t,l,o,n||pSt(u,t));return new Cp(r,this._parents,e,t)}ZC.prototype.interrupt=fxt;ZC.prototype.transition=mSt;const nB=e=>()=>e;function gSt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function ySt(e){e.stopImmediatePropagation()}function rB(e){e.preventDefault(),e.stopImmediatePropagation()}var _de={name:"drag"},iB={name:"space"},f_={name:"handle"},d_={name:"center"};const{abs:bde,max:Io,min:Oo}=Math;function wde(e){return[+e[0],+e[1]]}function MU(e){return[wde(e[0]),wde(e[1])]}var e$={name:"x",handles:["w","e"].map(gA),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},t$={name:"y",handles:["n","s"].map(gA),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},vSt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(gA),input:function(e){return e==null?null:MU(e)},output:function(e){return e}},Eh={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ede={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},xde={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},_St={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},bSt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function gA(e){return{type:e}}function wSt(e){return!e.ctrlKey&&!e.button}function ESt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function xSt(){return navigator.maxTouchPoints||"ontouchstart"in this}function sB(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function SSt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function TSt(){return ZY(e$)}function ASt(){return ZY(t$)}function CSt(){return ZY(vSt)}function ZY(e){var t=ESt,n=wSt,r=xSt,i=!0,s=V6("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([gA("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Eh.overlay).merge(y).each(function(){var _=sB(this).extent;Qi(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([gA("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Eh.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return Eh[_.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(_){c(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){c(this,arguments).end(_)}).tween("brush",function(){var _=this,b=_.__brush,E=c(_,arguments),w=b.selection,x=e.input(typeof y=="function"?y.apply(this,arguments):y,b.extent),S=Qp(w,x);function I(C){b.selection=C===1&&x===null?null:S(C),l.call(_),E.brush()}return w!==null&&x!==null?I:I(1)}):g.each(function(){var _=this,b=arguments,E=_.__brush,w=e.input(typeof y=="function"?y.apply(_,b):y,E.extent),x=c(_,b).beforestart();LU(_),E.selection=w===null?null:w,l.call(_),x.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=Qi(this),y=sB(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var _=g.__brush.emitter;return _&&(!v||!_.clean)?_:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var _=Qi(this.that).datum();s.call(g,this.that,new gSt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),_)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,_=(i&&g.metaKey?v="overlay":v)==="selection"?_de:i&&g.altKey?d_:f_,b=e===t$?null:_St[v],E=e===e$?null:bSt[v],w=sB(y),x=w.extent,S=w.selection,I=x[0][0],C,O,z=x[0][1],N,$,D=x[1][0],B,V,j=x[1][1],G,U,P=0,k=0,H,M=b&&E&&i&&g.shiftKey,F,J,se=Array.from(g.touches||[g],Oe=>{const Me=Oe.identifier;return Oe=CU(Oe,y),Oe.point0=Oe.slice(),Oe.identifier=Me,Oe});LU(y);var ae=c(y,arguments,!0).beforestart();if(v==="overlay"){S&&(H=!0);const Oe=[se[0],se[1]||se[0]];w.selection=S=[[C=e===t$?I:Oo(Oe[0][0],Oe[1][0]),N=e===e$?z:Oo(Oe[0][1],Oe[1][1])],[B=e===t$?D:Io(Oe[0][0],Oe[1][0]),G=e===e$?j:Io(Oe[0][1],Oe[1][1])]],se.length>1&&Fe(g)}else C=S[0][0],N=S[0][1],B=S[1][0],G=S[1][1];O=C,$=N,V=B,U=G;var ce=Qi(y).attr("pointer-events","none"),le=ce.selectAll(".overlay").attr("cursor",Eh[v]);if(g.touches)ae.moved=ue,ae.ended=$e;else{var ge=Qi(g.view).on("mousemove.brush",ue,!0).on("mouseup.brush",$e,!0);i&&ge.on("keydown.brush",Ge,!0).on("keyup.brush",Re,!0),vEt(g.view)}l.call(y),ae.start(g,_.name);function ue(Oe){for(const Me of Oe.changedTouches||[Oe])for(const Ut of se)Ut.identifier===Me.identifier&&(Ut.cur=CU(Me,y));if(M&&!F&&!J&&se.length===1){const Me=se[0];bde(Me.cur[0]-Me[0])>bde(Me.cur[1]-Me[1])?J=!0:F=!0}for(const Me of se)Me.cur&&(Me[0]=Me.cur[0],Me[1]=Me.cur[1]);H=!0,rB(Oe),Fe(Oe)}function Fe(Oe){const Me=se[0],Ut=Me.point0;var Qe;switch(P=Me[0]-Ut[0],k=Me[1]-Ut[1],_){case iB:case _de:{b&&(P=Io(I-C,Oo(D-B,P)),O=C+P,V=B+P),E&&(k=Io(z-N,Oo(j-G,k)),$=N+k,U=G+k);break}case f_:{se[1]?(b&&(O=Io(I,Oo(D,se[0][0])),V=Io(I,Oo(D,se[1][0])),b=1),E&&($=Io(z,Oo(j,se[0][1])),U=Io(z,Oo(j,se[1][1])),E=1)):(b<0?(P=Io(I-C,Oo(D-C,P)),O=C+P,V=B):b>0&&(P=Io(I-B,Oo(D-B,P)),O=C,V=B+P),E<0?(k=Io(z-N,Oo(j-N,k)),$=N+k,U=G):E>0&&(k=Io(z-G,Oo(j-G,k)),$=N,U=G+k));break}case d_:{b&&(O=Io(I,Oo(D,C-P*b)),V=Io(I,Oo(D,B+P*b))),E&&($=Io(z,Oo(j,N-k*E)),U=Io(z,Oo(j,G+k*E)));break}}V<O&&(b*=-1,Qe=C,C=B,B=Qe,Qe=O,O=V,V=Qe,v in Ede&&le.attr("cursor",Eh[v=Ede[v]])),U<$&&(E*=-1,Qe=N,N=G,G=Qe,Qe=$,$=U,U=Qe,v in xde&&le.attr("cursor",Eh[v=xde[v]])),w.selection&&(S=w.selection),F&&(O=S[0][0],V=S[1][0]),J&&($=S[0][1],U=S[1][1]),(S[0][0]!==O||S[0][1]!==$||S[1][0]!==V||S[1][1]!==U)&&(w.selection=[[O,$],[V,U]],l.call(y),ae.brush(Oe,_.name))}function $e(Oe){if(ySt(Oe),Oe.touches){if(Oe.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else _Et(Oe.view,H),ge.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ce.attr("pointer-events","all"),le.attr("cursor",Eh.overlay),w.selection&&(S=w.selection),SSt(S)&&(w.selection=null,l.call(y)),ae.end(Oe,_.name)}function Ge(Oe){switch(Oe.keyCode){case 16:{M=b&&E;break}case 18:{_===f_&&(b&&(B=V-P*b,C=O+P*b),E&&(G=U-k*E,N=$+k*E),_=d_,Fe(Oe));break}case 32:{(_===f_||_===d_)&&(b<0?B=V-P:b>0&&(C=O-P),E<0?G=U-k:E>0&&(N=$-k),_=iB,le.attr("cursor",Eh.selection),Fe(Oe));break}default:return}rB(Oe)}function Re(Oe){switch(Oe.keyCode){case 16:{M&&(F=J=M=!1,Fe(Oe));break}case 18:{_===d_&&(b<0?B=V:b>0&&(C=O),E<0?G=U:E>0&&(N=$),_=f_,Fe(Oe));break}case 32:{_===iB&&(Oe.altKey?(b&&(B=V-P*b,C=O+P*b),E&&(G=U-k*E,N=$+k*E),_=d_):(b<0?B=V:b>0&&(C=O),E<0?G=U:E>0&&(N=$),_=f_),le.attr("cursor",Eh[v]),Fe(Oe));break}default:return}rB(Oe)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=MU(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:nB(MU(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:nB(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:nB(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const FU=Math.PI,BU=2*FU,gy=1e-6,ISt=BU-gy;function RPe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function OSt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return RPe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let eK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?RPe:OSt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>gy)if(!(Math.abs(f*u-l*c)>gy)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),_=s*Math.tan((FU-Math.acos((m+d-g)/(2*y*v)))/2),b=_/v,E=_/y;Math.abs(b-1)>gy&&this._append`L${t+b*c},${n+b*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>gy||Math.abs(this._y1-c)>gy)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%BU+BU),d>ISt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>gy&&this._append`A${r},${r},0,${+(d>=FU)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Q6(){return new eK}Q6.prototype=eK.prototype;const cp=11102230246251565e-32,Po=134217729,PSt=(3+8*cp)*cp;function oB(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function kSt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function nI(e){return new Float64Array(e)}const $St=(3+16*cp)*cp,RSt=(2+12*cp)*cp,NSt=(9+64*cp)*cp*cp,h_=nI(4),Sde=nI(8),Tde=nI(12),Ade=nI(16),ua=nI(4);function DSt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,_,b,E,w,x,S;const I=e-i,C=n-i,O=t-s,z=r-s;b=I*z,d=Po*I,h=d-(d-I),p=I-h,d=Po*z,m=d-(d-z),g=z-m,E=p*g-(b-h*m-p*m-h*g),w=O*C,d=Po*O,h=d-(d-O),p=O-h,d=Po*C,m=d-(d-C),g=C-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,h_[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,h_[1]=_-(y+f)+(f-w),S=v+y,f=S-v,h_[2]=v-(S-f)+(y-f),h_[3]=S;let N=kSt(4,h_),$=RSt*o;if(N>=$||-N>=$||(f=e-I,a=e-(I+f)+(f-i),f=n-C,l=n-(C+f)+(f-i),f=t-O,u=t-(O+f)+(f-s),f=r-z,c=r-(z+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=NSt*o+PSt*Math.abs(N),N+=I*c+z*a-(O*l+C*u),N>=$||-N>=$))return N;b=a*z,d=Po*a,h=d-(d-a),p=a-h,d=Po*z,m=d-(d-z),g=z-m,E=p*g-(b-h*m-p*m-h*g),w=u*C,d=Po*u,h=d-(d-u),p=u-h,d=Po*C,m=d-(d-C),g=C-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,ua[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,ua[1]=_-(y+f)+(f-w),S=v+y,f=S-v,ua[2]=v-(S-f)+(y-f),ua[3]=S;const D=oB(4,h_,4,ua,Sde);b=I*c,d=Po*I,h=d-(d-I),p=I-h,d=Po*c,m=d-(d-c),g=c-m,E=p*g-(b-h*m-p*m-h*g),w=O*l,d=Po*O,h=d-(d-O),p=O-h,d=Po*l,m=d-(d-l),g=l-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,ua[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,ua[1]=_-(y+f)+(f-w),S=v+y,f=S-v,ua[2]=v-(S-f)+(y-f),ua[3]=S;const B=oB(D,Sde,4,ua,Tde);b=a*c,d=Po*a,h=d-(d-a),p=a-h,d=Po*c,m=d-(d-c),g=c-m,E=p*g-(b-h*m-p*m-h*g),w=u*l,d=Po*u,h=d-(d-u),p=u-h,d=Po*l,m=d-(d-l),g=l-m,x=p*g-(w-h*m-p*m-h*g),y=E-x,f=E-y,ua[0]=E-(y+f)+(f-x),v=b+y,f=v-b,_=b-(v-f)+(y-f),y=_-w,f=_-y,ua[1]=_-(y+f)+(f-w),S=v+y,f=S-v,ua[2]=v-(S-f)+(y-f),ua[3]=S;const V=oB(B,Tde,4,ua,Ade);return Ade[V-1]}function mP(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a;if(o===0||a===0||o>0!=a>0)return u;const l=Math.abs(o+a);return Math.abs(u)>=$St*l?u:-DSt(e,t,n,r,i,s,l)}const Cde=Math.pow(2,-52),gP=new Uint32Array(512);class ID{static from(t,n=jSt,r=zSt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new ID(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let C=0;C<o;C++){const O=t[2*C],z=t[2*C+1];O<a&&(a=O),z<u&&(u=z),O>l&&(l=O),z>c&&(c=z),this._ids[C]=C}const f=(a+l)/2,d=(u+c)/2;let h=1/0,p,m,g;for(let C=0;C<o;C++){const O=aB(f,d,t[2*C],t[2*C+1]);O<h&&(p=C,h=O)}const y=t[2*p],v=t[2*p+1];h=1/0;for(let C=0;C<o;C++){if(C===p)continue;const O=aB(y,v,t[2*C],t[2*C+1]);O<h&&O>0&&(m=C,h=O)}let _=t[2*m],b=t[2*m+1],E=1/0;for(let C=0;C<o;C++){if(C===p||C===m)continue;const O=FSt(y,v,_,b,t[2*C],t[2*C+1]);O<E&&(g=C,E=O)}let w=t[2*g],x=t[2*g+1];if(E===1/0){for(let z=0;z<o;z++)this._dists[z]=t[2*z]-t[0]||t[2*z+1]-t[1];rb(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let O=0;for(let z=0,N=-1/0;z<o;z++){const $=this._ids[z];this._dists[$]>N&&(C[O++]=$,N=this._dists[$])}this.hull=C.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(mP(y,v,_,b,w,x)<0){const C=m,O=_,z=b;m=g,_=w,b=x,g=C,w=O,x=z}const S=BSt(y,v,_,b,w,x);this._cx=S.x,this._cy=S.y;for(let C=0;C<o;C++)this._dists[C]=aB(t[2*C],t[2*C+1],S.x,S.y);rb(this._ids,this._dists,0,o-1),this._hullStart=p;let I=3;r[p]=n[g]=m,r[m]=n[p]=g,r[g]=n[m]=p,i[p]=0,i[m]=1,i[g]=2,s.fill(-1),s[this._hashKey(y,v)]=p,s[this._hashKey(_,b)]=m,s[this._hashKey(w,x)]=g,this.trianglesLen=0,this._addTriangle(p,m,g,-1,-1,-1);for(let C=0,O,z;C<this._ids.length;C++){const N=this._ids[C],$=t[2*N],D=t[2*N+1];if(C>0&&Math.abs($-O)<=Cde&&Math.abs(D-z)<=Cde||(O=$,z=D,N===p||N===m||N===g))continue;let B=0;for(let P=0,k=this._hashKey($,D);P<this._hashSize&&(B=s[(k+P)%this._hashSize],!(B!==-1&&B!==r[B]));P++);B=n[B];let V=B,j;for(;j=r[V],mP($,D,t[2*V],t[2*V+1],t[2*j],t[2*j+1])>=0;)if(V=j,V===B){V=-1;break}if(V===-1)continue;let G=this._addTriangle(V,N,r[V],-1,-1,i[V]);i[N]=this._legalize(G+2),i[V]=G,I++;let U=r[V];for(;j=r[U],mP($,D,t[2*U],t[2*U+1],t[2*j],t[2*j+1])<0;)G=this._addTriangle(U,N,j,i[N],-1,i[U]),i[N]=this._legalize(G+2),r[U]=U,I--,U=j;if(V===B)for(;j=n[V],mP($,D,t[2*j],t[2*j+1],t[2*V],t[2*V+1])<0;)G=this._addTriangle(j,N,V,-1,i[V],i[j]),this._legalize(G+2),i[j]=G,r[V]=V,I--,V=j;this._hullStart=n[N]=V,r[V]=n[U]=N,r[N]=U,s[this._hashKey($,D)]=N,s[this._hashKey(t[2*V],t[2*V+1])]=V}this.hull=new Uint32Array(I);for(let C=0,O=this._hullStart;C<I;C++)this.hull[C]=O,O=r[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(LSt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=gP[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(MSt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===f){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<gP.length&&(gP[s++]=v)}else{if(s===0)break;t=gP[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function LSt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function aB(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function MSt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function FSt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function BSt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function rb(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;nS(e,i,s),t[e[n]]>t[e[r]]&&nS(e,n,r),t[e[s]]>t[e[r]]&&nS(e,s,r),t[e[n]]>t[e[s]]&&nS(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;nS(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(rb(e,t,s,r),rb(e,t,n,o-1)):(rb(e,t,n,o-1),rb(e,t,s,r))}}function nS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function jSt(e){return e[0]}function zSt(e){return e[1]}var Ide={},uB={},lB=34,rS=10,cB=13;function NPe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function USt(e,t){var n=NPe(e);return function(r,i){return t(n(r),i,e)}}function Ode(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Va(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function VSt(e){return e<0?"-"+Va(-e,6):e>9999?"+"+Va(e,6):Va(e,4)}function HSt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":VSt(e.getUTCFullYear())+"-"+Va(e.getUTCMonth()+1,2)+"-"+Va(e.getUTCDate(),2)+(i?"T"+Va(t,2)+":"+Va(n,2)+":"+Va(r,2)+"."+Va(i,3)+"Z":r?"T"+Va(t,2)+":"+Va(n,2)+":"+Va(r,2)+"Z":n||t?"T"+Va(t,2)+":"+Va(n,2)+"Z":"")}function DPe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?USt(g,d):NPe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,_=!1;f.charCodeAt(p-1)===rS&&--p,f.charCodeAt(p-1)===cB&&--p;function b(){if(v)return uB;if(_)return _=!1,Ide;var w,x=m,S;if(f.charCodeAt(x)===lB){for(;m++<p&&f.charCodeAt(m)!==lB||f.charCodeAt(++m)===lB;);return(w=m)>=p?v=!0:(S=f.charCodeAt(m++))===rS?_=!0:S===cB&&(_=!0,f.charCodeAt(m)===rS&&++m),f.slice(x+1,w-1).replace(/""/g,'"')}for(;m<p;){if((S=f.charCodeAt(w=m++))===rS)_=!0;else if(S===cB)_=!0,f.charCodeAt(m)===rS&&++m;else if(S!==n)continue;return f.slice(x,w)}return v=!0,f.slice(x,p)}for(;(y=b())!==uB;){for(var E=[];y!==Ide&&y!==uB;)E.push(y),y=b();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Ode(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Ode(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?HSt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var qSt=DPe(","),WSt=qSt.parse;function GSt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function YSt(e,t){return fetch(e,t).then(GSt)}function KSt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),YSt(t,n).then(function(i){return e(i,r)})}}var XSt=KSt(WSt);function QSt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function JSt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return LPe(this.cover(t,n),t,n,e)}function LPe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function ZSt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)LPe(this,o[n],a[n],e[n]);return this}function eTt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function tTt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function nTt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function va(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function rTt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new va(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new va(h[3],g,y,u,l),new va(h[2],o,y,g,l),new va(h[1],g,a,u,y),new va(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),b=v*v+_*_;if(b<n){var E=Math.sqrt(n=b);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function iTt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function sTt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function oTt(){return this._root}function aTt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function uTt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new va(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new va(i,l,c,a,u)),(i=r[2])&&t.push(new va(i,s,c,l,u)),(i=r[1])&&t.push(new va(i,l,o,a,c)),(i=r[0])&&t.push(new va(i,s,o,l,c))}return this}function lTt(e){var t=[],n=[],r;for(this._root&&t.push(new va(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new va(s,o,a,c,f)),(s=i[1])&&t.push(new va(s,c,a,u,f)),(s=i[2])&&t.push(new va(s,o,f,c,l)),(s=i[3])&&t.push(new va(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function cTt(e){return e[0]}function fTt(e){return arguments.length?(this._x=e,this):this._x}function dTt(e){return e[1]}function hTt(e){return arguments.length?(this._y=e,this):this._y}function tK(e,t,n){var r=new nK(t??cTt,n??dTt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function nK(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Pde(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Na=tK.prototype=nK.prototype;Na.copy=function(){var e=new nK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Pde(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Pde(r));return e};Na.add=JSt;Na.addAll=ZSt;Na.cover=eTt;Na.data=tTt;Na.extent=nTt;Na.find=rTt;Na.remove=iTt;Na.removeAll=sTt;Na.root=oTt;Na.size=aTt;Na.visit=uTt;Na.visitAfter=lTt;Na.x=fTt;Na.y=hTt;function _a(e){return function(){return e}}function Jm(e){return(e()-.5)*1e-6}function pTt(e){return e.x+e.vx}function mTt(e){return e.y+e.vy}function gTt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=_a(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=tK(t,pTt,mTt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(_,b,E,w,x){var S=_.data,I=_.r,C=m+I;if(S){if(S.index>d.index){var O=h-S.x-S.vx,z=p-S.y-S.vy,N=O*O+z*z;N<C*C&&(O===0&&(O=Jm(r),N+=O*O),z===0&&(z=Jm(r),N+=z*z),N=(C-(N=Math.sqrt(N)))/N*i,d.vx+=(O*=N)*(C=(I*=I)/(g+I)),d.vy+=(z*=N)*C,S.vx-=O*(C=1-C),S.vy-=z*C)}return}return b>h+C||w<h-C||E>p+C||x<p-C}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:_a(+l),u(),o):e},o}function yTt(e){return e.index}function kde(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function vTt(e){var t=yTt,n=f,r,i=_a(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var _=0,b,E,w,x,S,I,C;_<v;++_)b=e[_],E=b.source,w=b.target,x=w.x+w.vx-E.x-E.vx||Jm(l),S=w.y+w.vy-E.y-E.vy||Jm(l),I=Math.sqrt(x*x+S*S),I=(I-s[_])/I*g*r[_],x*=I,S*=I,w.vx-=x*(C=u[_]),w.vy-=S*C,E.vx+=x*(C=1-C),E.vy+=S*C}function h(){if(o){var g,y=o.length,v=e.length,_=new Map(o.map((E,w)=>[t(E,w,o),E])),b;for(g=0,a=new Array(y);g<v;++g)b=e[g],b.index=g,typeof b.source!="object"&&(b.source=kde(_,b.source)),typeof b.target!="object"&&(b.target=kde(_,b.target)),a[b.source.index]=(a[b.source.index]||0)+1,a[b.target.index]=(a[b.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)b=e[g],u[g]=a[b.source.index]/(a[b.source.index]+a[b.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:_a(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:_a(+g),m(),d):i},d}const _Tt=1664525,bTt=1013904223,$de=4294967296;function wTt(){let e=1;return()=>(e=(_Tt*e+bTt)%$de)/$de}function ETt(e){return e.x}function xTt(e){return e.y}var STt=10,TTt=Math.PI*(3-Math.sqrt(5));function ATt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=XY(f),l=V6("tick","end"),c=wTt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(s-n)*i,a.forEach(function(b){b(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=STt*Math.sqrt(.5+m),_=m*TTt;y.x=v*Math.cos(_),y.y=v*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,_=e.length,b,E,w,x,S;for(y==null?y=1/0:y*=y,v=0;v<_;++v)x=e[v],b=m-x.x,E=g-x.y,w=b*b+E*E,w<y&&(S=x,y=w);return S},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function CTt(){var e,t,n,r,i=_a(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=tK(e,ETt,xTt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,_,b;if(h.length){for(v=_=b=0;b<4;++b)(m=h[b])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,_+=g*m.y);h.x=v/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,_=g-p,b=y*y+v*v;if(_*_/u<b)return b<a&&(y===0&&(y=Jm(n),b+=y*y),v===0&&(v=Jm(n),b+=v*v),b<o&&(b=Math.sqrt(o*b)),t.vx+=y*h.value*r/b,t.vy+=v*h.value*r/b),!0;if(h.length||b>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Jm(n),b+=y*y),v===0&&(v=Jm(n),b+=v*v),b<o&&(b=Math.sqrt(o*b)));do h.data!==t&&(_=s[h.data.index]*r/b,t.vx+=y*_,t.vy+=v*_);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:_a(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function ITt(e){var t=_a(.1),n,r,i;typeof e!="function"&&(e=_a(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:_a(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:_a(+a),o(),s):e},s}function OTt(e){var t=_a(.1),n,r,i;typeof e!="function"&&(e=_a(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:_a(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:_a(+a),o(),s):e},s}function PTt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function OD(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function bw(e){return e=OD(Math.abs(e)),e?e[1]:NaN}function kTt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function $Tt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var RTt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function B1(e){if(!(t=RTt.exec(e)))throw new Error("invalid format: "+e);var t;return new rK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}B1.prototype=rK.prototype;function rK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}rK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function NTt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var MPe;function DTt(e,t){var n=OD(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(MPe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+OD(e,Math.max(0,t+s-1))[0]}function Rde(e,t){var n=OD(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Nde={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:PTt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Rde(e*100,t),r:Rde,s:DTt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Dde(e){return e}var Lde=Array.prototype.map,Mde=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function FPe(e){var t=e.grouping===void 0||e.thousands===void 0?Dde:kTt(Lde.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Dde:$Tt(Lde.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=B1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,_=f.precision,b=f.trim,E=f.type;E==="n"?(v=!0,E="g"):Nde[E]||(_===void 0&&(_=12),b=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var w=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",x=m==="$"?r:/[%p]/.test(E)?o:"",S=Nde[E],I=/[defgprs%]/.test(E);_=_===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function C(O){var z=w,N=x,$,D,B;if(E==="c")N=S(O)+N,O="";else{O=+O;var V=O<0||1/O<0;if(O=isNaN(O)?u:S(Math.abs(O),_),b&&(O=NTt(O)),V&&+O==0&&p!=="+"&&(V=!1),z=(V?p==="("?p:a:p==="-"||p==="("?"":p)+z,N=(E==="s"?Mde[8+MPe/3]:"")+N+(V&&p==="("?")":""),I){for($=-1,D=O.length;++$<D;)if(B=O.charCodeAt($),48>B||B>57){N=(B===46?i+O.slice($+1):O.slice($))+N,O=O.slice(0,$);break}}}v&&!g&&(O=t(O,1/0));var j=z.length+O.length+N.length,G=j<y?new Array(y-j+1).join(d):"";switch(v&&g&&(O=t(G+O,G.length?y-N.length:1/0),G=""),h){case"<":O=z+O+N+G;break;case"=":O=z+G+O+N;break;case"^":O=G.slice(0,j=G.length>>1)+z+O+N+G.slice(j);break;default:O=G+z+O+N;break}return s(O)}return C.toString=function(){return f+""},C}function c(f,d){var h=l((f=B1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(bw(d)/3)))*3,m=Math.pow(10,-p),g=Mde[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var yP,ME,iK;LTt({thousands:",",grouping:[3],currency:["$",""]});function LTt(e){return yP=FPe(e),ME=yP.format,iK=yP.formatPrefix,yP}function BPe(e){return Math.max(0,-bw(Math.abs(e)))}function jPe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bw(t)/3)))*3-bw(Math.abs(e)))}function zPe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,bw(t)-bw(e))+1}function MTt(e,t){return e.parent===t.parent?1:2}function FTt(e){return e.reduce(BTt,0)/e.length}function BTt(e,t){return e+t.x}function jTt(e){return 1+e.reduce(zTt,0)}function zTt(e,t){return Math.max(e,t.y)}function UTt(e){for(var t;t=e.children;)e=t[0];return e}function VTt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function HTt(){var e=MTt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=FTt(h),d.y=jTt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=UTt(s),l=VTt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function qTt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function WTt(){return this.eachAfter(qTt)}function GTt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function YTt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function KTt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function XTt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function QTt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function JTt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function ZTt(e){for(var t=this,n=e2t(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function e2t(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function t2t(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function n2t(){return Array.from(this)}function r2t(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function i2t(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*s2t(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function J6(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=u2t)):t===void 0&&(t=a2t);for(var n=new ww(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new ww(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(UPe)}function o2t(){return J6(this).eachBefore(l2t)}function a2t(e){return e.children}function u2t(e){return Array.isArray(e)?e[1]:null}function l2t(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function UPe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function ww(e){this.data=e,this.depth=this.height=0,this.parent=null}ww.prototype=J6.prototype={constructor:ww,count:WTt,each:GTt,eachAfter:KTt,eachBefore:YTt,find:XTt,sum:QTt,sort:JTt,path:ZTt,ancestors:t2t,descendants:n2t,leaves:r2t,links:i2t,copy:o2t,[Symbol.iterator]:s2t};function n$(e){return e==null?null:VPe(e)}function VPe(e){if(typeof e!="function")throw new Error;return e}function Py(){return 0}function R_(e){return function(){return e}}const c2t=1664525,f2t=1013904223,Fde=4294967296;function d2t(){let e=1;return()=>(e=(c2t*e+f2t)%Fde)/Fde}function h2t(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function p2t(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function m2t(e,t){for(var n=0,r=(e=p2t(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&HPe(o,s)?++n:(o=y2t(i=g2t(i,s)),n=0);return o}function g2t(e,t){var n,r;if(fB(t,e))return[t];for(n=0;n<e.length;++n)if(vP(t,e[n])&&fB(XS(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(vP(XS(e[n],e[r]),t)&&vP(XS(e[n],t),e[r])&&vP(XS(e[r],t),e[n])&&fB(qPe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function vP(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function HPe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function fB(e,t){for(var n=0;n<t.length;++n)if(!HPe(e,t[n]))return!1;return!0}function y2t(e){switch(e.length){case 1:return v2t(e[0]);case 2:return XS(e[0],e[1]);case 3:return qPe(e[0],e[1],e[2])}}function v2t(e){return{x:e.x,y:e.y,r:e.r}}function XS(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function qPe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,_=v-o*o-a*a+u*u,b=v-l*l-c*c+f*f,E=h*p-d*m,w=(p*b-m*_)/(E*2)-r,x=(m*g-p*y)/E,S=(h*_-d*b)/(E*2)-i,I=(d*y-h*g)/E,C=x*x+I*I-1,O=2*(s+w*x+S*I),z=w*w+S*S-s*s,N=-(Math.abs(C)>1e-6?(O+Math.sqrt(O*O-4*C*z))/(2*C):z/O);return{x:r+w+x*N,y:i+S+I*N,r:N}}function Bde(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function jde(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function zde(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function _P(e){this._=e,this.next=null,this.previous=null}function _2t(e,t){if(!(s=(e=h2t(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Bde(r,n,i=e[2]),n=new _P(n),r=new _P(r),i=new _P(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Bde(n._,r._,i=e[u]),i=new _P(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(jde(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(jde(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=zde(n);(i=i.next)!==r;)(a=zde(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=m2t(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function b2t(e){return Math.sqrt(e.value)}function WPe(){var e=null,t=1,n=1,r=Py;function i(s){const o=d2t();return s.x=t/2,s.y=n/2,e?s.eachBefore(Ude(e)).eachAfter(dB(r,.5,o)).eachBefore(Vde(1)):s.eachBefore(Ude(b2t)).eachAfter(dB(Py,1,o)).eachAfter(dB(r,s.r/Math.min(t,n),o)).eachBefore(Vde(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=n$(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:R_(+s),i):r},i}function Ude(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function dB(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=_2t(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function Vde(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function GPe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function rI(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function w2t(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(GPe),o}function s(o,a){return function(u){u.children&&rI(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var E2t={depth:-1},Hde={},hB={};function x2t(e){return e.id}function S2t(e){return e.parentId}function qde(){var e=x2t,t=S2t,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((b,E)=>T2t(n(b,E,i))),v=y.map(Wde),_=new Set(y).add("");for(const b of v)_.has(b)||(_.add(b),y.push(b),v.push(Wde(b)),s.push(hB));o=(b,E)=>y[E],a=(b,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new ww(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?Hde:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===Hde)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===hB&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===hB);--y)h.data=null}if(f.parent=E2t,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(UPe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=n$(i),r):e},r.parentId=function(i){return arguments.length?(t=n$(i),r):t},r.path=function(i){return arguments.length?(n=n$(i),r):n},r}function T2t(e){e=`${e}`;let t=e.length;return jU(e,t-1)&&!jU(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Wde(e){let t=e.length;if(t<2)return"";for(;--t>1&&!jU(e,t););return e.slice(0,t)}function jU(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function A2t(e,t){return e.parent===t.parent?1:2}function pB(e){var t=e.children;return t?t[0]:e.t}function mB(e){var t=e.children;return t?t[t.length-1]:e.t}function C2t(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function I2t(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function O2t(e,t,n){return e.a.parent===t.parent?e.a:n}function r$(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}r$.prototype=Object.create(ww.prototype);function P2t(e){for(var t=new r$(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new r$(s[o],o)),i.parent=n;return(t.parent=new r$(null,0)).children=[t],t}function k2t(){var e=A2t,t=1,n=1,r=null;function i(l){var c=P2t(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){I2t(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,_=m.m,b;p=mB(p),d=pB(d),p&&d;)m=pB(m),h=mB(h),h.a=l,b=p.z+v-d.z-g+e(p._,d._),b>0&&(C2t(O2t(p,l,f),l,b),g+=b,y+=b),v+=p.m,g+=d.m,_+=m.m,y+=h.m;p&&!mB(h)&&(h.t=p,h.m+=v-y),d&&!pB(m)&&(m.t=d,m.m+=g-_,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function Z6(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var YPe=(1+Math.sqrt(5))/2;function KPe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,_,b,E,w;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),w=g*g*E,b=Math.max(v/w,w/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),w=g*g*E,_=Math.max(v/w,w/y),_>b){g-=l;break}b=_}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?rI(u,n,r,i,m?r+=p*g/m:s):Z6(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const XPe=function e(t){function n(r,i,s,o,a){KPe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(YPe);function $2t(){var e=XPe,t=!1,n=1,r=1,i=[0],s=Py,o=Py,a=Py,u=Py,l=Py;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(GPe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=VPe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:R_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:R_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:R_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:R_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:R_(+d),c):l},c}function R2t(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var _=l[f],b=h/2+_,E=f+1,w=d-1;E<w;){var x=E+w>>>1;l[x]<b?E=x+1:w=x}b-l[E-1]<l[E]-b&&f+1<E&&--E;var S=l[E]-_,I=h-S;if(g-p>y-m){var C=h?(p*I+g*S)/h:g;c(f,E,S,p,m,C,y),c(E,d,I,C,m,g,y)}else{var O=h?(m*I+y*S)/h:y;c(f,E,S,p,m,g,O),c(E,d,I,p,O,g,y)}}}function N2t(e,t,n,r,i){(e.depth&1?Z6:rI)(e,t,n,r,i)}const D2t=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?rI(l,i,s,o,m?s+=(a-s)*l.value/m:a):Z6(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=KPe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(YPe);function JT(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function L2t(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function QPe(e){let t,n,r;e.length!==2?(t=JT,n=(a,u)=>JT(e(a),u),r=(a,u)=>e(a)-u):(t=e===JT||e===L2t?e:M2t,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function M2t(){return 0}function JPe(e){return e===null?NaN:+e}const F2t=QPe(JT),B2t=F2t.right;QPe(JPe).center;const e4=B2t,j2t=Math.sqrt(50),z2t=Math.sqrt(10),U2t=Math.sqrt(2);function PD(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=j2t?10:s>=z2t?5:s>=U2t?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?PD(e,t,n*2):[a,u,l]}function zU(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?PD(t,e,n):PD(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function UU(e,t,n){return t=+t,e=+e,n=+n,PD(e,t,n)[2]}function V2t(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?UU(t,e,n):UU(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function H2t(e,t,n=JPe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function q2t(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Ef(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function k0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const VU=Symbol("implicit");function FE(){var e=new Zfe,t=[],n=[],r=VU;function i(s){let o=e.get(s);if(o===void 0){if(r!==VU)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Zfe;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return FE(t,n).unknown(r)},Ef.apply(i,arguments),i}function iI(){var e=FE().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=q2t(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return iI(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Ef.apply(f(),arguments)}function W2t(e){return function(){return e}}function HU(e){return+e}var Gde=[0,1];function iu(e){return e}function qU(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:W2t(isNaN(t)?NaN:.5)}function G2t(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Y2t(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=qU(i,r),s=n(o,s)):(r=qU(r,i),s=n(s,o)),function(a){return s(r(a))}}function K2t(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=qU(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=e4(e,a,1,r)-1;return s[u](i[u](a))}}function sI(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function t4(){var e=Gde,t=Gde,n=Qp,r,i,s,o=iu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==iu&&(o=G2t(e[0],e[d-1])),a=d>2?K2t:Y2t,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Nl)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,HU),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=tI,c()},f.clamp=function(d){return arguments.length?(o=d?!0:iu,c()):o!==iu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function ZPe(){return t4()(iu,iu)}function eke(e,t,n,r){var i=V2t(e,t,n),s;switch(r=B1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=jPe(i,o))&&(r.precision=s),iK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=zPe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=BPe(i))&&(r.precision=s-(r.type==="%")*2);break}}return ME(r)}function kv(e){var t=e.domain;return e.ticks=function(n){var r=t();return zU(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return eke(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=UU(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Ip(){var e=ZPe();return e.copy=function(){return sI(e,Ip())},Ef.apply(e,arguments),kv(e)}function tke(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,HU),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return tke(e).unknown(t)},e=arguments.length?Array.from(e,HU):[0,1],kv(n)}function nke(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Yde(e){return Math.log(e)}function Kde(e){return Math.exp(e)}function X2t(e){return-Math.log(-e)}function Q2t(e){return-Math.exp(-e)}function J2t(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Z2t(e){return e===10?J2t:e===Math.E?Math.exp:t=>Math.pow(e,t)}function eAt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Xde(e){return(t,n)=>-e(-t,n)}function sK(e){const t=e(Yde,Kde),n=t.domain;let r=10,i,s;function o(){return i=eAt(r),s=Z2t(r),n()[0]<0?(i=Xde(i),s=Xde(s),e(X2t,Q2t)):e(Yde,Kde),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=zU(l,c,g))}else y=zU(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=B1(u)).precision==null&&(u.trim=!0),u=ME(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(nke(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function rke(){const e=sK(t4()).domain([1,10]);return e.copy=()=>sI(e,rke()).base(e.base()),Ef.apply(e,arguments),e}function Qde(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Jde(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function oK(e){var t=1,n=e(Qde(t),Jde(t));return n.constant=function(r){return arguments.length?e(Qde(t=+r),Jde(t)):t},kv(n)}function ike(){var e=oK(t4());return e.copy=function(){return sI(e,ike()).constant(e.constant())},Ef.apply(e,arguments)}function Zde(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function tAt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function nAt(e){return e<0?-e*e:e*e}function aK(e){var t=e(iu,iu),n=1;function r(){return n===1?e(iu,iu):n===.5?e(tAt,nAt):e(Zde(n),Zde(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},kv(t)}function uK(){var e=aK(t4());return e.copy=function(){return sI(e,uK()).exponent(e.exponent())},Ef.apply(e,arguments),e}function rAt(){return uK.apply(null,arguments).exponent(.5)}function ske(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=H2t(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[e4(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(JT),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return ske().domain(e).range(t).unknown(r)},Ef.apply(s,arguments)}function oke(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[e4(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return oke().domain([e,t]).range(i).unknown(s)},Ef.apply(kv(o),arguments)}function ake(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[e4(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return ake().domain(e).range(t).unknown(n)},Ef.apply(i,arguments)}const gB=new Date,yB=new Date;function Cs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Cs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(gB.setTime(+s),yB.setTime(+o),e(gB),e(yB),Math.floor(n(gB,yB))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Ew=Cs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ew.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Cs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Ew);Ew.range;const Kh=1e3,zl=Kh*60,Xh=zl*60,Op=Xh*24,lK=Op*7,ehe=Op*30,vB=Op*365,Qh=Cs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Kh)},(e,t)=>(t-e)/Kh,e=>e.getUTCSeconds());Qh.range;const n4=Cs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kh)},(e,t)=>{e.setTime(+e+t*zl)},(e,t)=>(t-e)/zl,e=>e.getMinutes());n4.range;const r4=Cs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*zl)},(e,t)=>(t-e)/zl,e=>e.getUTCMinutes());r4.range;const i4=Cs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kh-e.getMinutes()*zl)},(e,t)=>{e.setTime(+e+t*Xh)},(e,t)=>(t-e)/Xh,e=>e.getHours());i4.range;const s4=Cs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Xh)},(e,t)=>(t-e)/Xh,e=>e.getUTCHours());s4.range;const fp=Cs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zl)/Op,e=>e.getDate()-1);fp.range;const xg=Cs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Op,e=>e.getUTCDate()-1);xg.range;const uke=Cs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Op,e=>Math.floor(e/Op));uke.range;function $v(e){return Cs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*zl)/lK)}const BE=$v(0),kD=$v(1),iAt=$v(2),sAt=$v(3),xw=$v(4),oAt=$v(5),aAt=$v(6);BE.range;kD.range;iAt.range;sAt.range;xw.range;oAt.range;aAt.range;function Rv(e){return Cs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/lK)}const jE=Rv(0),$D=Rv(1),uAt=Rv(2),lAt=Rv(3),Sw=Rv(4),cAt=Rv(5),fAt=Rv(6);jE.range;$D.range;uAt.range;lAt.range;Sw.range;cAt.range;fAt.range;const yA=Cs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());yA.range;const vA=Cs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());vA.range;const Bd=Cs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Bd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Cs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Bd.range;const jd=Cs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());jd.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Cs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});jd.range;function _B(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function dAt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hAt(e){let t,n,r;e.length!==2?(t=_B,n=(a,u)=>_B(e(a),u),r=(a,u)=>e(a)-u):(t=e===_B||e===dAt?e:pAt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function pAt(){return 0}const mAt=Math.sqrt(50),gAt=Math.sqrt(10),yAt=Math.sqrt(2);function lke(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=mAt?10:s>=gAt?5:s>=yAt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?lke(e,t,n*2):[a,u,l]}function the(e,t,n){return t=+t,e=+e,n=+n,lke(e,t,n)[2]}function nhe(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?the(t,e,n):the(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function cke(e,t,n,r,i,s){const o=[[Qh,1,Kh],[Qh,5,5*Kh],[Qh,15,15*Kh],[Qh,30,30*Kh],[s,1,zl],[s,5,5*zl],[s,15,15*zl],[s,30,30*zl],[i,1,Xh],[i,3,3*Xh],[i,6,6*Xh],[i,12,12*Xh],[r,1,Op],[r,2,2*Op],[n,1,lK],[t,1,ehe],[t,3,3*ehe],[e,1,vB]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=hAt(([,,g])=>g).right(o,d);if(h===o.length)return e.every(nhe(l/vB,c/vB,f));if(h===0)return Ew.every(Math.max(nhe(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[vAt,_At]=cke(jd,vA,jE,uke,s4,r4),[bAt,wAt]=cke(Bd,yA,BE,fp,i4,n4);function bB(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function wB(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function iS(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function fke(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=sS(i),c=oS(i),f=sS(s),d=oS(s),h=sS(o),p=oS(o),m=sS(a),g=oS(a),y=sS(u),v=oS(u),_={a:V,A:j,b:G,B:U,c:null,d:uhe,e:uhe,f:HAt,g:eCt,G:nCt,H:zAt,I:UAt,j:VAt,L:dke,m:qAt,M:WAt,p:P,q:k,Q:fhe,s:dhe,S:GAt,u:YAt,U:KAt,V:XAt,w:QAt,W:JAt,x:null,X:null,y:ZAt,Y:tCt,Z:rCt,"%":che},b={a:H,A:M,b:F,B:J,c:null,d:lhe,e:lhe,f:aCt,g:yCt,G:_Ct,H:iCt,I:sCt,j:oCt,L:pke,m:uCt,M:lCt,p:se,q:ae,Q:fhe,s:dhe,S:cCt,u:fCt,U:dCt,V:hCt,w:pCt,W:mCt,x:null,X:null,y:gCt,Y:vCt,Z:bCt,"%":che},E={a:C,A:O,b:z,B:N,c:$,d:ohe,e:ohe,f:MAt,g:she,G:ihe,H:ahe,I:ahe,j:RAt,L:LAt,m:$At,M:NAt,p:I,q:kAt,Q:BAt,s:jAt,S:DAt,u:AAt,U:CAt,V:IAt,w:TAt,W:OAt,x:D,X:B,y:she,Y:ihe,Z:PAt,"%":FAt};_.x=w(n,_),_.X=w(r,_),_.c=w(t,_),b.x=w(n,b),b.X=w(r,b),b.c=w(t,b);function w(ce,le){return function(ge){var ue=[],Fe=-1,$e=0,Ge=ce.length,Re,Oe,Me;for(ge instanceof Date||(ge=new Date(+ge));++Fe<Ge;)ce.charCodeAt(Fe)===37&&(ue.push(ce.slice($e,Fe)),(Oe=rhe[Re=ce.charAt(++Fe)])!=null?Re=ce.charAt(++Fe):Oe=Re==="e"?" ":"0",(Me=le[Re])&&(Re=Me(ge,Oe)),ue.push(Re),$e=Fe+1);return ue.push(ce.slice($e,Fe)),ue.join("")}}function x(ce,le){return function(ge){var ue=iS(1900,void 0,1),Fe=S(ue,ce,ge+="",0),$e,Ge;if(Fe!=ge.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(le&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?($e=wB(iS(ue.y,0,1)),Ge=$e.getUTCDay(),$e=Ge>4||Ge===0?$D.ceil($e):$D($e),$e=xg.offset($e,(ue.V-1)*7),ue.y=$e.getUTCFullYear(),ue.m=$e.getUTCMonth(),ue.d=$e.getUTCDate()+(ue.w+6)%7):($e=bB(iS(ue.y,0,1)),Ge=$e.getDay(),$e=Ge>4||Ge===0?kD.ceil($e):kD($e),$e=fp.offset($e,(ue.V-1)*7),ue.y=$e.getFullYear(),ue.m=$e.getMonth(),ue.d=$e.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),Ge="Z"in ue?wB(iS(ue.y,0,1)).getUTCDay():bB(iS(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(Ge+5)%7:ue.w+ue.U*7-(Ge+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,wB(ue)):bB(ue)}}function S(ce,le,ge,ue){for(var Fe=0,$e=le.length,Ge=ge.length,Re,Oe;Fe<$e;){if(ue>=Ge)return-1;if(Re=le.charCodeAt(Fe++),Re===37){if(Re=le.charAt(Fe++),Oe=E[Re in rhe?le.charAt(Fe++):Re],!Oe||(ue=Oe(ce,ge,ue))<0)return-1}else if(Re!=ge.charCodeAt(ue++))return-1}return ue}function I(ce,le,ge){var ue=l.exec(le.slice(ge));return ue?(ce.p=c.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function C(ce,le,ge){var ue=h.exec(le.slice(ge));return ue?(ce.w=p.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function O(ce,le,ge){var ue=f.exec(le.slice(ge));return ue?(ce.w=d.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function z(ce,le,ge){var ue=y.exec(le.slice(ge));return ue?(ce.m=v.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function N(ce,le,ge){var ue=m.exec(le.slice(ge));return ue?(ce.m=g.get(ue[0].toLowerCase()),ge+ue[0].length):-1}function $(ce,le,ge){return S(ce,t,le,ge)}function D(ce,le,ge){return S(ce,n,le,ge)}function B(ce,le,ge){return S(ce,r,le,ge)}function V(ce){return o[ce.getDay()]}function j(ce){return s[ce.getDay()]}function G(ce){return u[ce.getMonth()]}function U(ce){return a[ce.getMonth()]}function P(ce){return i[+(ce.getHours()>=12)]}function k(ce){return 1+~~(ce.getMonth()/3)}function H(ce){return o[ce.getUTCDay()]}function M(ce){return s[ce.getUTCDay()]}function F(ce){return u[ce.getUTCMonth()]}function J(ce){return a[ce.getUTCMonth()]}function se(ce){return i[+(ce.getUTCHours()>=12)]}function ae(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var le=w(ce+="",_);return le.toString=function(){return ce},le},parse:function(ce){var le=x(ce+="",!1);return le.toString=function(){return ce},le},utcFormat:function(ce){var le=w(ce+="",b);return le.toString=function(){return ce},le},utcParse:function(ce){var le=x(ce+="",!0);return le.toString=function(){return ce},le}}}var rhe={"-":"",_:" ",0:"0"},Ks=/^\s*\d+/,EAt=/^%/,xAt=/[\\^$*+?|[\]().{}]/g;function sr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function SAt(e){return e.replace(xAt,"\\$&")}function sS(e){return new RegExp("^(?:"+e.map(SAt).join("|")+")","i")}function oS(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function TAt(e,t,n){var r=Ks.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function AAt(e,t,n){var r=Ks.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function CAt(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function IAt(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function OAt(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ihe(e,t,n){var r=Ks.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function she(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function PAt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function kAt(e,t,n){var r=Ks.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function $At(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ohe(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function RAt(e,t,n){var r=Ks.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function ahe(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function NAt(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function DAt(e,t,n){var r=Ks.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function LAt(e,t,n){var r=Ks.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function MAt(e,t,n){var r=Ks.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function FAt(e,t,n){var r=EAt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function BAt(e,t,n){var r=Ks.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function jAt(e,t,n){var r=Ks.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function uhe(e,t){return sr(e.getDate(),t,2)}function zAt(e,t){return sr(e.getHours(),t,2)}function UAt(e,t){return sr(e.getHours()%12||12,t,2)}function VAt(e,t){return sr(1+fp.count(Bd(e),e),t,3)}function dke(e,t){return sr(e.getMilliseconds(),t,3)}function HAt(e,t){return dke(e,t)+"000"}function qAt(e,t){return sr(e.getMonth()+1,t,2)}function WAt(e,t){return sr(e.getMinutes(),t,2)}function GAt(e,t){return sr(e.getSeconds(),t,2)}function YAt(e){var t=e.getDay();return t===0?7:t}function KAt(e,t){return sr(BE.count(Bd(e)-1,e),t,2)}function hke(e){var t=e.getDay();return t>=4||t===0?xw(e):xw.ceil(e)}function XAt(e,t){return e=hke(e),sr(xw.count(Bd(e),e)+(Bd(e).getDay()===4),t,2)}function QAt(e){return e.getDay()}function JAt(e,t){return sr(kD.count(Bd(e)-1,e),t,2)}function ZAt(e,t){return sr(e.getFullYear()%100,t,2)}function eCt(e,t){return e=hke(e),sr(e.getFullYear()%100,t,2)}function tCt(e,t){return sr(e.getFullYear()%1e4,t,4)}function nCt(e,t){var n=e.getDay();return e=n>=4||n===0?xw(e):xw.ceil(e),sr(e.getFullYear()%1e4,t,4)}function rCt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+sr(t/60|0,"0",2)+sr(t%60,"0",2)}function lhe(e,t){return sr(e.getUTCDate(),t,2)}function iCt(e,t){return sr(e.getUTCHours(),t,2)}function sCt(e,t){return sr(e.getUTCHours()%12||12,t,2)}function oCt(e,t){return sr(1+xg.count(jd(e),e),t,3)}function pke(e,t){return sr(e.getUTCMilliseconds(),t,3)}function aCt(e,t){return pke(e,t)+"000"}function uCt(e,t){return sr(e.getUTCMonth()+1,t,2)}function lCt(e,t){return sr(e.getUTCMinutes(),t,2)}function cCt(e,t){return sr(e.getUTCSeconds(),t,2)}function fCt(e){var t=e.getUTCDay();return t===0?7:t}function dCt(e,t){return sr(jE.count(jd(e)-1,e),t,2)}function mke(e){var t=e.getUTCDay();return t>=4||t===0?Sw(e):Sw.ceil(e)}function hCt(e,t){return e=mke(e),sr(Sw.count(jd(e),e)+(jd(e).getUTCDay()===4),t,2)}function pCt(e){return e.getUTCDay()}function mCt(e,t){return sr($D.count(jd(e)-1,e),t,2)}function gCt(e,t){return sr(e.getUTCFullYear()%100,t,2)}function yCt(e,t){return e=mke(e),sr(e.getUTCFullYear()%100,t,2)}function vCt(e,t){return sr(e.getUTCFullYear()%1e4,t,4)}function _Ct(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Sw(e):Sw.ceil(e),sr(e.getUTCFullYear()%1e4,t,4)}function bCt(){return"+0000"}function che(){return"%"}function fhe(e){return+e}function dhe(e){return Math.floor(+e/1e3)}var p_,cK,gke,o4,yke;wCt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wCt(e){return p_=fke(e),cK=p_.format,gke=p_.parse,o4=p_.utcFormat,yke=p_.utcParse,p_}function ECt(e){return new Date(e)}function xCt(e){return e instanceof Date?+e:+new Date(+e)}function fK(e,t,n,r,i,s,o,a,u,l){var c=ZPe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),b=l("%Y");function E(w){return(u(w)<w?h:a(w)<w?p:o(w)<w?m:s(w)<w?g:r(w)<w?i(w)<w?y:v:n(w)<w?_:b)(w)}return c.invert=function(w){return new Date(f(w))},c.domain=function(w){return arguments.length?d(Array.from(w,xCt)):d().map(ECt)},c.ticks=function(w){var x=d();return e(x[0],x[x.length-1],w??10)},c.tickFormat=function(w,x){return x==null?E:l(x)},c.nice=function(w){var x=d();return(!w||typeof w.range!="function")&&(w=t(x[0],x[x.length-1],w??10)),w?d(nke(x,w)):c},c.copy=function(){return sI(c,fK(e,t,n,r,i,s,o,a,u,l))},c}function vke(){return Ef.apply(fK(bAt,wAt,Bd,yA,BE,fp,i4,n4,Qh,cK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function SCt(){return Ef.apply(fK(vAt,_At,jd,vA,jE,xg,s4,r4,Qh,o4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function a4(){var e=0,t=1,n,r,i,s,o=iu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Qp),l.rangeRound=c(tI),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function $0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dK(){var e=kv(a4()(iu));return e.copy=function(){return $0(e,dK())},k0.apply(e,arguments)}function _ke(){var e=sK(a4()).domain([1,10]);return e.copy=function(){return $0(e,_ke()).base(e.base())},k0.apply(e,arguments)}function bke(){var e=oK(a4());return e.copy=function(){return $0(e,bke()).constant(e.constant())},k0.apply(e,arguments)}function hK(){var e=aK(a4());return e.copy=function(){return $0(e,hK()).exponent(e.exponent())},k0.apply(e,arguments)}function TCt(){return hK.apply(null,arguments).exponent(.5)}function u4(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=iu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,_;return arguments.length?([y,v,_]=g,l=KY(m,[y,v,_]),h):[l(0),l(.5),l(1)]}}return h.range=p(Qp),h.rangeRound=p(tI),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function wke(){var e=kv(u4()(iu));return e.copy=function(){return $0(e,wke())},k0.apply(e,arguments)}function Eke(){var e=sK(u4()).domain([.1,1,10]);return e.copy=function(){return $0(e,Eke()).base(e.base())},k0.apply(e,arguments)}function xke(){var e=oK(u4());return e.copy=function(){return $0(e,xke()).constant(e.constant())},k0.apply(e,arguments)}function pK(){var e=aK(u4());return e.copy=function(){return $0(e,pK()).exponent(e.exponent())},k0.apply(e,arguments)}function ACt(){return pK.apply(null,arguments).exponent(.5)}function CCt(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Ske=CCt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function yn(e){return function(){return e}}const hhe=Math.abs,ko=Math.atan2,ty=Math.cos,ICt=Math.max,EB=Math.min,Rf=Math.sin,Gy=Math.sqrt,Do=1e-12,Tw=Math.PI,RD=Tw/2,ZT=2*Tw;function OCt(e){return e>1?0:e<-1?Tw:Math.acos(e)}function phe(e){return e>=1?RD:e<=-1?-RD:Math.asin(e)}function l4(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new eK(t)}function PCt(e){return e.innerRadius}function kCt(e){return e.outerRadius}function $Ct(e){return e.startAngle}function RCt(e){return e.endAngle}function NCt(e){return e&&e.padAngle}function DCt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Do))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function bP(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/Gy(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,_=m-h,b=v*v+_*_,E=i-s,w=d*m-p*h,x=(_<0?-1:1)*Gy(ICt(0,E*E*b-w*w)),S=(w*_-v*x)/b,I=(-w*v-_*x)/b,C=(w*_+v*x)/b,O=(-w*v+_*x)/b,z=S-g,N=I-y,$=C-g,D=O-y;return z*z+N*N>$*$+D*D&&(S=C,I=O),{cx:S,cy:I,x01:-c,y01:-f,x11:S*(i/E-1),y11:I*(i/E-1)}}function WU(){var e=PCt,t=kCt,n=yn(0),r=null,i=$Ct,s=RCt,o=NCt,a=null,u=l4(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-RD,m=s.apply(this,arguments)-RD,g=hhe(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Do))a.moveTo(0,0);else if(g>ZT-Do)a.moveTo(h*ty(p),h*Rf(p)),a.arc(0,0,h,p,m,!y),d>Do&&(a.moveTo(d*ty(m),d*Rf(m)),a.arc(0,0,d,m,p,y));else{var v=p,_=m,b=p,E=m,w=g,x=g,S=o.apply(this,arguments)/2,I=S>Do&&(r?+r.apply(this,arguments):Gy(d*d+h*h)),C=EB(hhe(h-d)/2,+n.apply(this,arguments)),O=C,z=C,N,$;if(I>Do){var D=phe(I/d*Rf(S)),B=phe(I/h*Rf(S));(w-=D*2)>Do?(D*=y?1:-1,b+=D,E-=D):(w=0,b=E=(p+m)/2),(x-=B*2)>Do?(B*=y?1:-1,v+=B,_-=B):(x=0,v=_=(p+m)/2)}var V=h*ty(v),j=h*Rf(v),G=d*ty(E),U=d*Rf(E);if(C>Do){var P=h*ty(_),k=h*Rf(_),H=d*ty(b),M=d*Rf(b),F;if(g<Tw)if(F=DCt(V,j,H,M,P,k,G,U)){var J=V-F[0],se=j-F[1],ae=P-F[0],ce=k-F[1],le=1/Rf(OCt((J*ae+se*ce)/(Gy(J*J+se*se)*Gy(ae*ae+ce*ce)))/2),ge=Gy(F[0]*F[0]+F[1]*F[1]);O=EB(C,(d-ge)/(le-1)),z=EB(C,(h-ge)/(le+1))}else O=z=0}x>Do?z>Do?(N=bP(H,M,V,j,h,z,y),$=bP(P,k,G,U,h,z,y),a.moveTo(N.cx+N.x01,N.cy+N.y01),z<C?a.arc(N.cx,N.cy,z,ko(N.y01,N.x01),ko($.y01,$.x01),!y):(a.arc(N.cx,N.cy,z,ko(N.y01,N.x01),ko(N.y11,N.x11),!y),a.arc(0,0,h,ko(N.cy+N.y11,N.cx+N.x11),ko($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,z,ko($.y11,$.x11),ko($.y01,$.x01),!y))):(a.moveTo(V,j),a.arc(0,0,h,v,_,!y)):a.moveTo(V,j),!(d>Do)||!(w>Do)?a.lineTo(G,U):O>Do?(N=bP(G,U,P,k,d,-O,y),$=bP(V,j,H,M,d,-O,y),a.lineTo(N.cx+N.x01,N.cy+N.y01),O<C?a.arc(N.cx,N.cy,O,ko(N.y01,N.x01),ko($.y01,$.x01),!y):(a.arc(N.cx,N.cy,O,ko(N.y01,N.x01),ko(N.y11,N.x11),!y),a.arc(0,0,d,ko(N.cy+N.y11,N.cx+N.x11),ko($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,O,ko($.y11,$.x11),ko($.y01,$.x01),!y))):a.arc(0,0,d,E,b,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Tw/2;return[ty(f)*c,Rf(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:yn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:yn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:yn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:yn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:yn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:yn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:yn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function c4(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Tke(e){this._context=e}Tke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function mK(e){return new Tke(e)}function Ake(e){return e[0]}function Cke(e){return e[1]}function Ike(e,t){var n=yn(!0),r=null,i=mK,s=null,o=l4(a);e=typeof e=="function"?e:e===void 0?Ake:yn(e),t=typeof t=="function"?t:t===void 0?Cke:yn(t);function a(u){var l,c=(u=c4(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:yn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:yn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:yn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function Oke(e,t,n){var r=null,i=yn(!0),s=null,o=mK,a=null,u=l4(l);e=typeof e=="function"?e:e===void 0?Ake:yn(+e),t=typeof t=="function"?t:yn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Cke:yn(+n);function l(f){var d,h,p,m=(f=c4(f)).length,g,y=!1,v,_=new Array(m),b=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(_[p],b[p]);a.lineEnd(),a.areaEnd()}y&&(_[d]=+e(g,d,f),b[d]=+t(g,d,f),a.point(r?+r(g,d,f):_[d],n?+n(g,d,f):b[d]))}if(v)return a=null,v+""||null}function c(){return Ike().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:yn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:yn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:yn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:yn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:yn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:yn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:yn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function LCt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function MCt(e){return e}function FCt(){var e=MCt,t=LCt,n=null,r=yn(0),i=yn(ZT),s=yn(0);function o(a){var u,l=(a=c4(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(ZT,Math.max(-ZT,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),_=v*(g<0?-1:1),b;for(u=0;u<l;++u)(b=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=b);for(t!=null?h.sort(function(E,w){return t(p[E],p[w])}):n!=null&&h.sort(function(E,w){return n(a[E],a[w])}),u=0,f=d?(g-l*_)/d:0;u<l;++u,m=y)c=h[u],b=p[c],y=m+(b>0?b*f:0)+_,p[c]={data:a[c],index:u,value:b,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:yn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:yn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:yn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:yn(+a),o):s},o}const BCt={draw(e,t){const n=Gy(t/Tw);e.moveTo(n,0),e.arc(0,0,n,0,ZT)}};function jCt(e,t){let n=null,r=l4(i);e=typeof e=="function"?e:yn(e||BCt),t=typeof t=="function"?t:yn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:yn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:yn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Gg(){}function ND(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function f4(e){this._context=e}f4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ND(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ND(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zCt(e){return new f4(e)}function Pke(e){this._context=e}Pke.prototype={areaStart:Gg,areaEnd:Gg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ND(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function UCt(e){return new Pke(e)}function kke(e){this._context=e}kke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ND(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function VCt(e){return new kke(e)}function $ke(e,t){this._basis=new f4(e),this._beta=t}$ke.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const HCt=function e(t){function n(r){return t===1?new f4(r):new $ke(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function DD(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function gK(e,t){this._context=e,this._k=(1-t)/6}gK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:DD(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:DD(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qCt=function e(t){function n(r){return new gK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function yK(e,t){this._context=e,this._k=(1-t)/6}yK.prototype={areaStart:Gg,areaEnd:Gg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:DD(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const WCt=function e(t){function n(r){return new yK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function vK(e,t){this._context=e,this._k=(1-t)/6}vK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:DD(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const GCt=function e(t){function n(r){return new vK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function _K(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Do){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Do){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function Rke(e,t){this._context=e,this._alpha=t}Rke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:_K(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const YCt=function e(t){function n(r){return t?new Rke(r,t):new gK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Nke(e,t){this._context=e,this._alpha=t}Nke.prototype={areaStart:Gg,areaEnd:Gg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:_K(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const KCt=function e(t){function n(r){return t?new Nke(r,t):new yK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Dke(e,t){this._context=e,this._alpha=t}Dke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_K(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const XCt=function e(t){function n(r){return t?new Dke(r,t):new vK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Lke(e){this._context=e}Lke.prototype={areaStart:Gg,areaEnd:Gg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function QCt(e){return new Lke(e)}function mhe(e){return e<0?-1:1}function ghe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(mhe(s)+mhe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function yhe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function xB(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function LD(e){this._context=e}LD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xB(this,this._t0,yhe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,xB(this,yhe(this,n=ghe(this,e,t)),n);break;default:xB(this,this._t0,n=ghe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Mke(e){this._context=new Fke(e)}(Mke.prototype=Object.create(LD.prototype)).point=function(e,t){LD.prototype.point.call(this,t,e)};function Fke(e){this._context=e}Fke.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function JCt(e){return new LD(e)}function ZCt(e){return new Mke(e)}function Bke(e){this._context=e}Bke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=vhe(e),i=vhe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function vhe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function eIt(e){return new Bke(e)}function d4(e,t){this._context=e,this._t=t}d4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function tIt(e){return new d4(e,.5)}function nIt(e){return new d4(e,0)}function rIt(e){return new d4(e,1)}function _he(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function bhe(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function iIt(e,t){return e[t]}function sIt(e){const t=[];return t.key=e,t}function oIt(){var e=yn([]),t=bhe,n=_he,r=iIt;function i(s){var o=Array.from(e.apply(this,arguments),sIt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=c4(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:yn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:yn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?bhe:typeof s=="function"?s:yn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??_he,i):n},i}function QS(e,t,n){this.k=e,this.x=t,this.y=n}QS.prototype={constructor:QS,scale:function(e){return e===1?this:new QS(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new QS(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};QS.prototype;function bK({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=A.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=A.useCallback(c=>(s?o4("%B"):ME(".2s"))(c),[s]);return R.jsxs(R.Fragment,{children:[R.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:R.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:R.jsx(Ug,{children:R.jsx(Ql,{spacing:3,children:R.jsx(Rt,{size:a?10:14,style:{color:"#878E95"},children:r})})})})}),R.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?R.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>R.jsxs("g",{transform:`translate(${f}, ${n})`,children:[R.jsx("line",{y2:"6",stroke:"currentColor"}),o?R.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,R.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:R.jsx(Ug,{children:R.jsx(qAe,{withinPortal:!0,label:c,children:R.jsx(Rt,{px:2,size:10,style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const aIt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:bK},Symbol.toStringTag,{value:"Module"}));function jke({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=A.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return R.jsxs(R.Fragment,{children:[R.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:R.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:R.jsx(Ug,{children:R.jsx(Ql,{spacing:3,children:R.jsx(Rt,{size:o?10:14,style:{color:"#878E95"},children:r})})})})}),R.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?R.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>R.jsxs("g",{transform:`translate(${n}, ${l})`,children:[R.jsx("line",{x2:"-6",stroke:"currentColor"}),s?R.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,R.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:R.jsx("foreignObject",{width:a,height:20,children:R.jsx(Ql,{style:{width:"100%",height:"100%"},position:"right",children:R.jsx(Rt,{sx:{textOverflow:"ellipsis",overflow:"hidden"},size:10,children:u})})})},u)]},u))]})}const uIt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:jke},Symbol.toStringTag,{value:"Module"})),El={top:15,left:100,right:50,bottom:50};function GU({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Tb(),o=A.useMemo(()=>s-El.left-El.right,[s]),a=A.useMemo(()=>i-El.top-El.bottom,[i]),u=A.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return FE(Ske).domain(d)},[n,t.category]),l=A.useMemo(()=>e?Ip([El.left,o+El.left]).domain([0,Dbt(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=A.useMemo(()=>e?iI([El.top,a+El.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=A.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:R.jsxs("g",{children:[R.jsx("rect",{x:El.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-El.left},h),R.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?R.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[R.jsx(bK,{xScale:l,yRange:c.range(),vertPosition:a+El.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?R.jsx(jke,{yScale:c,horizontalPosition:El.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):R.jsx(I0,{})}const lIt=Object.freeze(Object.defineProperty({__proto__:null,Bar:GU,default:GU},Symbol.toStringTag,{value:"Module"})),nr=Array.isArray;function gu(e){return e!=null?nr(e)?e:[e]:[]}function cIt(e=0,t=1/0){return`${whe(e)} < row_number() && row_number() <= ${whe(t)}`}function whe(e){return e<0?`count() + ${e}`:e}class zke{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(cIt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,gu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function vn(e){throw Error(e)}function Ca(e){return typeof e=="number"}function ei(e){return typeof e=="function"}function h4(e,t){const n=Array(e);if(ei(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let fIt=class extends zke{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){vn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){vn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){vn("Not implemented")}getter(t){vn("Not implemented")}objects(t){vn("Not implemented")}object(t){vn("Not implemented")}[Symbol.iterator](){vn("Not implemented")}print(t={}){Ca(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=h4(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},dIt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},hIt=function(e){return e&&ei(e.get)?e:new dIt(e)};function Pp(e){return e instanceof Date}function ta(e){return e===Object(e)}function MD(e){return e instanceof RegExp}function So(e){return typeof e=="string"}function pIt(e,t){const n=r=>vn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Ehe(e.entries(),t):Pp(e)?n("Date"):MD(e)?n("RegExp"):So(e)?n():nr(e)?mIt(e,t):ei(e[Symbol.iterator])?gIt(e,t):ta(e)?Ehe(Object.entries(e),t):n()}function Ehe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function mIt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function gIt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:yIt}=Object.prototype;function uf(e,t){return yIt.call(e,t)}function _l(e){return e?new xhe({...e.data()},e.columnNames()):new xhe}class xhe{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return uf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const Xn=void 0,vIt=Object.getPrototypeOf(Int8Array);function oI(e){return e instanceof vIt}function Yy(e){return nr(e)||oI(e)}function qc(e){return e!=null&&e===e}const aS=e=>Yy(e)||So(e),_It={compact:e=>Yy(e)?e.filter(t=>qc(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>aS(e)?e.includes(t,n):!1,indexof:(e,t)=>aS(e)?e.indexOf(t):-1,join:(e,t)=>Yy(e)?e.join(t):Xn,lastindexof:(e,t)=>aS(e)?e.lastIndexOf(t):-1,length:e=>aS(e)?e.length:0,pluck:(e,t)=>Yy(e)?e.map(n=>qc(n)?n[t]:Xn):Xn,reverse:e=>Yy(e)?e.slice().reverse():So(e)?e.split("").reverse().join(""):Xn,slice:(e,t,n)=>aS(e)?e.slice(t,n):Xn};function bIt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function i$(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Nf=e=>(e<10?"0":"")+e,wIt=e=>e<0?"-"+i$(-e,6):e>9999?"+"+i$(e,6):i$(e,4);function Uke(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return wIt(e)+"-"+Nf(t+1)+"-"+Nf(n)+(!u||o?"T"+Nf(r)+":"+Nf(i)+":"+Nf(s)+"."+i$(o,3)+l:s?"T"+Nf(r)+":"+Nf(i)+":"+Nf(s)+l:i||r||!a?"T"+Nf(r)+":"+Nf(i)+l:"")}function Vke(e,t){return isNaN(e)?"Invalid Date":Uke(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function p4(e,t){return isNaN(e)?"Invalid Date":Uke(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const EIt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function xIt(e){return e.match(EIt)}function SIt(e,t=Date.parse){return xIt(e)?t(e):e}const Hke=6e4,qke=864e5,Wke=6048e5,Oi=new Date,Pi=new Date,Bi=e=>(Oi.setTime(typeof e=="string"?SIt(e):e),Oi);function TIt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function AIt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function CIt(e){Pi.setTime(+e),Pi.setHours(0,0,0,0),Oi.setTime(+Pi),Oi.setMonth(0),Oi.setDate(1);const t=(Pi.getTimezoneOffset()-Oi.getTimezoneOffset())*Hke;return Math.floor(1+(Pi-Oi-t)/qke)}function IIt(e){Pi.setTime(+e),Pi.setUTCHours(0,0,0,0);const t=Date.UTC(Pi.getUTCFullYear(),0,1);return Math.floor(1+(Pi-t)/qke)}function OIt(e,t){const n=t||0;Pi.setTime(+e),Pi.setDate(Pi.getDate()-(Pi.getDay()+7-n)%7),Pi.setHours(0,0,0,0),Oi.setTime(+e),Oi.setMonth(0),Oi.setDate(1),Oi.setDate(1-(Oi.getDay()+7-n)%7),Oi.setHours(0,0,0,0);const r=(Pi.getTimezoneOffset()-Oi.getTimezoneOffset())*Hke;return Math.floor((1+(Pi-Oi)-r)/Wke)}function PIt(e,t){const n=t||0;return Pi.setTime(+e),Pi.setUTCDate(Pi.getUTCDate()-(Pi.getUTCDay()+7-n)%7),Pi.setUTCHours(0,0,0,0),Oi.setTime(+e),Oi.setUTCMonth(0),Oi.setUTCDate(1),Oi.setUTCDate(1-(Oi.getUTCDay()+7-n)%7),Oi.setUTCHours(0,0,0,0),Math.floor((1+(Pi-Oi))/Wke)}const kIt={format_date:(e,t)=>Vke(Bi(e),!t),format_utcdate:(e,t)=>p4(Bi(e),!t),timestamp:e=>+Bi(e),year:e=>Bi(e).getFullYear(),quarter:e=>Math.floor(Bi(e).getMonth()/3),month:e=>Bi(e).getMonth(),date:e=>Bi(e).getDate(),dayofweek:e=>Bi(e).getDay(),hours:e=>Bi(e).getHours(),minutes:e=>Bi(e).getMinutes(),seconds:e=>Bi(e).getSeconds(),milliseconds:e=>Bi(e).getMilliseconds(),utcyear:e=>Bi(e).getUTCFullYear(),utcquarter:e=>Math.floor(Bi(e).getUTCMonth()/3),utcmonth:e=>Bi(e).getUTCMonth(),utcdate:e=>Bi(e).getUTCDate(),utcdayofweek:e=>Bi(e).getUTCDay(),utchours:e=>Bi(e).getUTCHours(),utcminutes:e=>Bi(e).getUTCMinutes(),utcseconds:e=>Bi(e).getUTCSeconds(),utcmilliseconds:e=>Bi(e).getUTCMilliseconds(),datetime:TIt,dayofyear:CIt,week:OIt,utcdatetime:AIt,utcdayofyear:IIt,utcweek:PIt,now:Date.now};function wK(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Pp(e)||Pp(t)?+e==+t:MD(e)&&MD(t)?e+""==t+"":ta(e)&&ta(t)?$It(e,t):!1}function $It(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return She(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!She(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!wK(e[o],t[o]))return!1}return!0}function She(e,t,n=wK){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const RIt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let NIt=Math.random;function zE(){return NIt()}const DIt={random:zE,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function EK(e){return e instanceof Map}function LIt(e){return e instanceof Set}function s$(e){return EK(e)||LIt(e)}function SB(e){return Array.from(e)}const MIt={has:(e,t)=>s$(e)?e.has(t):e!=null?uf(e,t):!1,keys:e=>EK(e)?SB(e.keys()):e!=null?Object.keys(e):[],values:e=>s$(e)?SB(e.values()):e!=null?Object.values(e):[],entries:e=>s$(e)?SB(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):Xn};function FIt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(uf(t,e))return t[e];return n!==void 0?n:e}function BIt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const jIt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},ib={bin:bIt,equal:wK,recode:FIt,sequence:BIt,..._It,...kIt,...RIt,...DIt,...MIt,...jIt};function _A(e){return typeof e=="bigint"}function zd(e){return e===void 0?e+"":_A(e)?e+"n":JSON.stringify(e)}function dn(e,t=[],n=[]){return new zIt(e,gu(t),gu(n))}let zIt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${zd(n)}]`),...this.params.map(zd)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const Gke=e=>dn("any",e),Yke=()=>dn("count"),Kke=e=>dn("array_agg",e),Xke=e=>dn("array_agg_distinct",e),Qke=(e,t)=>dn("map_agg",[e,t]),Jke=(e,t)=>dn("object_agg",[e,t]),Zke=(e,t)=>dn("entries_agg",[e,t]);({...ib});function UIt(e,t){e=s$(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function VIt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function HIt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function qIt(e,t,n,r){const i=r==="map"||r===!0?Qke:r==="entries"?Zke:r==="object"?Jke:vn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=UIt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:Kke(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const WIt="ArrayPattern",GIt="ArrowFunctionExpression",YIt="FunctionExpression",Sg="Identifier",UE="Literal",e$e="MemberExpression",KIt="ObjectExpression",t$e="ObjectPattern",n$e="Property",aI="Column",XIt="Constant",QIt="Dictionary",JIt="Function",ZIt="Parameter",r$e="Op",jr=(e,t)=>{const n=eOt[e.type];return n?n(e,t):vn(`Unsupported expression construct: ${e.type}`)},TB=(e,t)=>"("+jr(e.left,t)+" "+e.operator+" "+jr(e.right,t)+")",AB=(e,t)=>"("+Hf(e.params,t)+")=>"+jr(e.body,t),The=(e,t)=>jr(e.callee,t)+"("+Hf(e.arguments,t)+")",Hf=(e,t,n=",")=>e.map(r=>jr(r,t)).join(n),i$e=e=>e.computed?`[${zd(e.name)}]`:`.${e.name}`,Ahe=(e,t,n)=>{const r=e.table||"";return`data${r}${i$e(e)}.${n}(${t.index}${r})`},eOt={Constant:e=>e.raw,Column:(e,t)=>Ahe(e,t,"get"),Dictionary:(e,t)=>Ahe(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${i$e(e)}`,Op:(e,t)=>`op(${zd(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+jr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=jr(e.object,t),i=jr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:The,NewExpression:(e,t)=>"new "+The(e,t),ArrayExpression:(e,t)=>"["+Hf(e.elements,t)+"]",AssignmentExpression:TB,BinaryExpression:TB,LogicalExpression:TB,UnaryExpression:(e,t)=>"("+e.operator+jr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+jr(e.test,t)+"?"+jr(e.consequent,t)+":"+jr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Hf(e.properties,t)+"})",Property:(e,t)=>{const n=jr(e.key,t);return(e.computed?`[${n}]`:n)+":"+jr(e.value,t)},ArrowFunctionExpression:AB,FunctionExpression:AB,FunctionDeclaration:AB,ArrayPattern:(e,t)=>"["+Hf(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Hf(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Hf(e.declarations,t,","),VariableDeclarator:(e,t)=>jr(e.id,t)+"="+jr(e.init,t),SpreadElement:(e,t)=>"..."+jr(e.argument,t),BlockStatement:(e,t)=>"{"+Hf(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>jr(e.expression,t),IfStatement:(e,t)=>"if ("+jr(e.test,t)+")"+jr(e.consequent,t)+(e.alternate?" else "+jr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+jr(e.discriminant,t)+") {"+Hf(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+jr(e.test,t):"default")+": "+Hf(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+jr(e.argument,t),Program:(e,t)=>jr(e.body[0],t)};function FD(e,t={index:"row"}){return jr(e,t)}function tOt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function Aw(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Pp(e)?+e:nr(e)||oI(e)?`[${e.map(Aw)}]`:MD(e)?e+"":nOt(e)}function nOt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${Aw(e[r])}`;return t+="}",t}function BD(e,t){const n=e.length;return n===1?(r,i)=>Aw(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=Aw(a)}return s}}function rOt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=Aw(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=Aw(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Nh(){}function iOt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function fs(e){return e.init=e.init||Nh,e.add=e.add||Nh,e.rem=e.rem||Nh,e}function Che(e,t){return e.product_v=!1,e.product=t}const s$e={count:{create:()=>fs({value:e=>e.count}),param:[]},array_agg:{create:()=>fs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>fs({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>fs({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>fs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>fs({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:Xn}),param:[1]},valid:{create:()=>fs({value:e=>e.valid}),param:[1]},invalid:{create:()=>fs({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=rOt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>fs({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>fs({value:e=>{let t=Xn,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:Xn,add:(e,t)=>_A(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Che(e,1),value:e=>e.valid?e.product_v?Che(e,iOt(e.list.values())):e.product:void 0,add:(e,t)=>_A(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:Xn,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>fs({value:e=>e.valid?e.mean:Xn}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):Xn,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>fs({value:e=>e.valid>1?e.dev/e.valid:Xn}),param:[1],req:["variance"]},stdev:{create:()=>fs({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):Xn}),param:[1],req:["variance"]},stdevp:{create:()=>fs({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):Xn}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=Xn,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===Xn)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=Xn,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===Xn)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>fs({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>fs({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):Xn,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>fs({value:e=>e.valid>1?e.cov/e.valid:Xn}),param:[2],req:["covariance"]},corr:{create:()=>fs({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):Xn}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>fs({value:i=>tOt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Ihe={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Ohe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},o$e={row_number:{create(){return{init:Nh,value:e=>e.index+1}},param:[]},rank:Ihe,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Ihe.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Ohe,ntile:{create(e){e=+e,e>0||vn("ntile num must be greater than zero.");const{init:t,value:n}=Ohe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=Xn){return e=+e||1,{init:Nh,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=Xn){return e=+e||1,{init:Nh,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Nh,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Nh,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||vn("nth_value nth must be greater than zero."),{init:Nh,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):Xn}}},param:[1,1]},fill_down:{create(e=Xn){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return qc(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=Xn){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=sOt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function sOt(e,t,n){for(const r=e.size;n<r;++n)if(qc(e.value(n,t)))return n;return-1}function xK(e){return uf(s$e,e)}function SK(e){return uf(o$e,e)}function a$e(e){return uf(ib,e)||e==="row_object"}function u$e(e){return xK(e)&&s$e[e]}function l$e(e){return SK(e)&&o$e[e]}function uS(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const TK={escape:(e,t,n)=>uS(e,t,n),expr:(e,t)=>uS(`(row,data,op)=>${e}`,ib,t),expr2:(e,t)=>uS(`(row0,data0,row,data)=>${e}`,ib,t),join:(e,t)=>uS(`(row1,data1,row2,data2)=>${e}`,ib,t),param:(e,t)=>uS(e,ib,t)},oOt={"==":1,"!=":1,"===":1,"!==":1};function c$e(e,t,n=0,r,i){if(e.type=aI,e.name=t,e.table=n,i&&r&&ei(r.keyFor)){const s=oOt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===UE&&aOt(i,e,s,r.keyFor(s.value))}return e}function aOt(e,t,n,r){return r<0?(e.type=UE,e.value=!1,e.raw="false"):(t.type=QIt,n.value=r,n.raw=r+""),!0}function m4(e){return nr(e)?e:EK(e)?e.entries():e?Object.entries(e):[]}const f$e="row_object";function d$e(e,t){e.type=KIt;const n=e.properties=[];for(const r of m4(t)){const[i,s]=nr(r)?r:[r,r];n.push({type:n$e,key:{type:UE,raw:zd(s)},value:c$e({computed:!0},i)})}return e}function h$e(e){return FD(d$e({},e))}function p$e(e){return TK.expr(h$e(e))}function AK(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Bh(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Phe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bn(e){return this instanceof Bn?(this.v=e,this):new Bn(e)}function Ky(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,m){s.push([d,h,p,m])>1||a(d,h)})})}function a(d,h){try{u(r[d](h))}catch(p){f(s[0][3],p)}}function u(d){d.value instanceof Bn?Promise.resolve(d.value.v).then(l,c):f(s[0][2],d)}function l(d){a("next",d)}function c(d){a("throw",d)}function f(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function CB(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Bn(e[i](o)),done:!1}:s?s(o):o}:s}}function e2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Phe=="function"?Phe(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}const uOt=new TextDecoder("utf-8"),YU=e=>uOt.decode(e),lOt=new TextEncoder,CK=e=>lOt.encode(e),[_En,m$e]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[Nv,bEn]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[Dv,wEn]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),cOt=e=>typeof e=="boolean",Wa=e=>typeof e=="function",R0=e=>e!=null&&Object(e)===e,g4=e=>R0(e)&&Wa(e.then),IK=e=>R0(e)&&Wa(e[Symbol.iterator]),y4=e=>R0(e)&&Wa(e[Symbol.asyncIterator]),fOt=e=>R0(e)&&"done"in e&&"value"in e,g$e=e=>"_getDOMStream"in e&&"_getNodeStream"in e,dOt=e=>R0(e)&&Wa(e.abort)&&Wa(e.getWriter)&&!g$e(e),hOt=e=>R0(e)&&Wa(e.end)&&Wa(e.write)&&cOt(e.writable)&&!g$e(e),pOt=e=>R0(e)&&Wa(e.clear)&&Wa(e.bytes)&&Wa(e.position)&&Wa(e.setPosition)&&Wa(e.capacity)&&Wa(e.getBufferIdentifier)&&Wa(e.createLong),OK=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function mOt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function jD(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Ud(e,t){const n=mOt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?jD(o,s,a):o=s;break}jD(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function so(e,t){let n=fOt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=CK(n)),n instanceof ArrayBuffer?new e(n):n instanceof OK?new e(n):pOt(n)?so(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const lS=e=>so(Int32Array,e),vr=e=>so(Uint8Array,e),KU=e=>(e.next(),e);function*gOt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof OK?n(t):IK(t)?t:n(t);return yield*KU(function*(i){let s=null;do s=i.next(yield so(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const yOt=e=>gOt(Uint8Array,e);function y$e(e,t){return Ky(this,arguments,function*(){if(g4(t))return yield Bn(yield Bn(yield*CB(e2(y$e(e,yield Bn(t))))));const r=function(o){return Ky(this,arguments,function*(){yield yield Bn(yield Bn(o))})},i=function(o){return Ky(this,arguments,function*(){yield Bn(yield*CB(e2(KU(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof OK?r(t):IK(t)?i(t):y4(t)?t:r(t);return yield Bn(yield*CB(e2(KU(function(o){return Ky(this,arguments,function*(){let a=null;do a=yield Bn(o.next(yield yield Bn(so(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Bn(new e)})}const vOt=e=>y$e(Uint8Array,e);function PK(e,t,n){if(e!==0){n=n.slice(0,t+1);for(let r=-1;++r<=t;)n[r]+=e}return n}function _Ot(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const khe={fromIterable(e){return wP(bOt(e))},fromAsyncIterable(e){return wP(wOt(e))},fromDOMStream(e){return wP(EOt(e))},fromNodeStream(e){return wP(SOt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},wP=e=>(e.next(),e);function*bOt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Ud(r,o)[0]:([i,r,a]=Ud(r,o),i)}({cmd:s,size:o}=yield null);const l=yOt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function wOt(e){return Ky(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Ud(i,a)[0]:([s,i,u]=Ud(i,a),s)}({cmd:o,size:a}=yield yield Bn(null));const c=vOt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Bn(c.next()):yield Bn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Bn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Bn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Bn(c.return(new Uint8Array(0))))}return yield Bn(null)})}function EOt(e){return Ky(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Ud(i,a)[0]:([s,i,u]=Ud(i,a),s)}({cmd:o,size:a}=yield yield Bn(null));const c=new xOt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Bn(c.read()):yield Bn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(vr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Bn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Bn(c.cancel(f)))}finally{r===!1?yield Bn(c.cancel()):e.locked&&c.releaseLock()}return yield Bn(null)})}class xOt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Bh(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Bh(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=vr(n)),n})}}const IB=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function SOt(e){return Ky(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Ud(l,a)[0]:([c,l,u]=Ud(l,a),c)}if({cmd:o,size:a}=yield yield Bn(null),e.isTTY)return yield yield Bn(new Uint8Array(0)),yield Bn(null);try{n[0]=IB(e,"end"),n[1]=IB(e,"error");do{if(n[2]=IB(e,"readable"),[r,s]=yield Bn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=vr(e.read(a-u)),c.byteLength<a-u&&(c=vr(e.read()))):c=vr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Bn(f()));while(a<u)}while(!i)}finally{yield Bn(d(n,r==="error"?s:null))}return yield Bn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Hu;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Hu||(Hu={}));var Jl;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Jl||(Jl={}));var go;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(go||(go={}));var Vd;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Vd||(Vd={}));var jn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(jn||(jn={}));var Hd;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Hd||(Hd={}));var Ds;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Ds||(Ds={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(re||(re={}));var Oh;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Oh||(Oh={}));const TOt=void 0;function Tg(e){if(e===null)return"null";if(e===TOt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof Nv||e instanceof Dv?`[${[...e].map(t=>Tg(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const AOt=Symbol.for("isArrowBigNum");function xf(e,...t){return t.length===0?Object.setPrototypeOf(so(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}xf.prototype[AOt]=!0;xf.prototype.toJSON=function(){return`"${g1(this)}"`};xf.prototype.valueOf=function(){return v$e(this)};xf.prototype.toString=function(){return g1(this)};xf.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return v$e(this);case"string":return g1(this);case"default":return XU(this)}return g1(this)};function Db(...e){return xf.apply(this,e)}function Lb(...e){return xf.apply(this,e)}function bA(...e){return xf.apply(this,e)}Object.setPrototypeOf(Db.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Lb.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(bA.prototype,Object.create(Uint32Array.prototype));Object.assign(Db.prototype,xf.prototype,{constructor:Db,signed:!0,TypedArray:Int32Array,BigIntArray:Nv});Object.assign(Lb.prototype,xf.prototype,{constructor:Lb,signed:!1,TypedArray:Uint32Array,BigIntArray:Dv});Object.assign(bA.prototype,xf.prototype,{constructor:bA,signed:!0,TypedArray:Uint32Array,BigIntArray:Dv});function v$e(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new Dv(t,n,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}let g1,XU;m$e?(XU=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:OB(e),g1=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:OB(e)):(g1=OB,XU=g1);function OB(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class kK{static new(t,n){switch(n){case!0:return new Db(t);case!1:return new Lb(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Nv:return new Db(t)}return t.byteLength===16?new bA(t):new Lb(t)}static signed(t){return new Db(t)}static unsigned(t){return new Lb(t)}static decimal(t){return new bA(t)}constructor(t,n){return kK.new(t,n)}}var _$e,b$e,w$e,E$e,x$e,S$e,T$e,A$e,C$e,I$e,O$e,P$e,k$e,$$e,R$e,N$e,D$e,L$e,M$e;class Pn{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return Pn.isUnion(t)&&t.mode===Jl.Dense}static isSparseUnion(t){return Pn.isUnion(t)&&t.mode===Jl.Sparse}get typeId(){return re.NONE}}_$e=Symbol.toStringTag;Pn[_$e]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Pn.prototype);let kp=class extends Pn{toString(){return"Null"}get typeId(){return re.Null}};b$e=Symbol.toStringTag;kp[b$e]=(e=>e[Symbol.toStringTag]="Null")(kp.prototype);class Ia extends Pn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Nv:Dv}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}w$e=Symbol.toStringTag;Ia[w$e]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Ia.prototype);class $K extends Ia{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class RK extends Ia{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Yg extends Ia{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class NK extends Ia{constructor(){super(!0,64)}get ArrayType(){return Nv}}class DK extends Ia{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class LK extends Ia{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class MK extends Ia{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class FK extends Ia{constructor(){super(!1,64)}get ArrayType(){return Dv}}Object.defineProperty($K.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(RK.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Yg.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(NK.prototype,"ArrayType",{value:Nv});Object.defineProperty(DK.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(LK.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(MK.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(FK.prototype,"ArrayType",{value:Dv});class Kg extends Pn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case go.HALF:return Uint16Array;case go.SINGLE:return Float32Array;case go.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}E$e=Symbol.toStringTag;Kg[E$e]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Kg.prototype);class F$e extends Kg{constructor(){super(go.HALF)}}class BK extends Kg{constructor(){super(go.SINGLE)}}class jK extends Kg{constructor(){super(go.DOUBLE)}}Object.defineProperty(F$e.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(BK.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(jK.prototype,"ArrayType",{value:Float64Array});let wA=class extends Pn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};x$e=Symbol.toStringTag;wA[x$e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(wA.prototype);let Cw=class extends Pn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};S$e=Symbol.toStringTag;Cw[S$e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Cw.prototype);let EA=class extends Pn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};T$e=Symbol.toStringTag;EA[T$e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(EA.prototype);let zD=class extends Pn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};A$e=Symbol.toStringTag;zD[A$e]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(zD.prototype);class Iw extends Pn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${Vd[this.unit]}>`}}C$e=Symbol.toStringTag;Iw[C$e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(Iw.prototype);class COt extends Iw{constructor(){super(Vd.DAY)}}class IOt extends Iw{constructor(){super(Vd.MILLISECOND)}}class $p extends Pn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${jn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Nv}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}I$e=Symbol.toStringTag;$p[I$e]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))($p.prototype);class OOt extends $p{constructor(){super(jn.SECOND,32)}}class POt extends $p{constructor(){super(jn.MILLISECOND,32)}}class kOt extends $p{constructor(){super(jn.MICROSECOND,64)}}class $Ot extends $p{constructor(){super(jn.NANOSECOND,64)}}class UD extends Pn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${jn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}O$e=Symbol.toStringTag;UD[O$e]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(UD.prototype);class Ow extends Pn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${Hd[this.unit]}>`}}P$e=Symbol.toStringTag;Ow[P$e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(Ow.prototype);class ROt extends Ow{constructor(){super(Hd.DAY_TIME)}}class NOt extends Ow{constructor(){super(Hd.YEAR_MONTH)}}let Pw=class extends Pn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};k$e=Symbol.toStringTag;Pw[k$e]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(Pw.prototype);class Vo extends Pn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}$$e=Symbol.toStringTag;Vo[$$e]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Vo.prototype);class xA extends Pn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}R$e=Symbol.toStringTag;xA[R$e]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(xA.prototype);let VD=class extends Pn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};N$e=Symbol.toStringTag;VD[N$e]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(VD.prototype);let kw=class extends Pn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};D$e=Symbol.toStringTag;kw[D$e]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(kw.prototype);class SA extends Pn{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}L$e=Symbol.toStringTag;SA[L$e]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(SA.prototype);const DOt=(e=>()=>++e)(-1);class Xg extends Pn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?DOt():typeof r=="number"?r:r.low}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}M$e=Symbol.toStringTag;Xg[M$e]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Xg.prototype);function Gf(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class Vn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return LOt(this,t,n)}getVisitFnByTypeId(t,n=!0){return N_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function LOt(e,t,n=!0){return typeof t=="number"?N_(e,t,n):typeof t=="string"&&t in re?N_(e,re[t],n):t&&t instanceof Pn?N_(e,$he(t),n):t!=null&&t.type&&t.type instanceof Pn?N_(e,$he(t.type),n):N_(e,re.NONE,n)}function N_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function $he(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case go.HALF:return re.Float16;case go.SINGLE:return re.Float32;case go.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case jn.SECOND:return re.TimeSecond;case jn.MILLISECOND:return re.TimeMillisecond;case jn.MICROSECOND:return re.TimeMicrosecond;case jn.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case jn.SECOND:return re.TimestampSecond;case jn.MILLISECOND:return re.TimestampMillisecond;case jn.MICROSECOND:return re.TimestampMicrosecond;case jn.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case Vd.DAY:return re.DateDay;case Vd.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case Hd.DAY_TIME:return re.IntervalDayTime;case Hd.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case Jl.Dense:return re.DenseUnion;case Jl.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}Vn.prototype.visitInt8=null;Vn.prototype.visitInt16=null;Vn.prototype.visitInt32=null;Vn.prototype.visitInt64=null;Vn.prototype.visitUint8=null;Vn.prototype.visitUint16=null;Vn.prototype.visitUint32=null;Vn.prototype.visitUint64=null;Vn.prototype.visitFloat16=null;Vn.prototype.visitFloat32=null;Vn.prototype.visitFloat64=null;Vn.prototype.visitDateDay=null;Vn.prototype.visitDateMillisecond=null;Vn.prototype.visitTimestampSecond=null;Vn.prototype.visitTimestampMillisecond=null;Vn.prototype.visitTimestampMicrosecond=null;Vn.prototype.visitTimestampNanosecond=null;Vn.prototype.visitTimeSecond=null;Vn.prototype.visitTimeMillisecond=null;Vn.prototype.visitTimeMicrosecond=null;Vn.prototype.visitTimeNanosecond=null;Vn.prototype.visitDenseUnion=null;Vn.prototype.visitSparseUnion=null;Vn.prototype.visitIntervalDayTime=null;Vn.prototype.visitIntervalYearMonth=null;const B$e=new Float64Array(1),m_=new Uint32Array(B$e.buffer);function j$e(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function z$e(e){if(e!==e)return 32256;B$e[0]=e;const t=(m_[1]&2147483648)>>16&65535;let n=m_[1]&2146435072,r=0;return n>=1089470464?m_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(m_[1]&1048575)>>10):n<=1056964608?(r=1048576+(m_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(m_[1]&1048575)+512>>10),t|n|r&65535}class un extends Vn{}function mn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const MOt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},zK=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},FOt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},BOt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},U$e=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},jOt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Jp=({values:e},t,n)=>{e[t]=n},UK=({values:e},t,n)=>{e[t]=n},V$e=({values:e},t,n)=>{e[t]=z$e(n)},zOt=(e,t,n)=>{switch(e.type.precision){case go.HALF:return V$e(e,t,n);case go.SINGLE:case go.DOUBLE:return UK(e,t,n)}},VK=({values:e},t,n)=>{MOt(e,t,n.valueOf())},HK=({values:e},t,n)=>{zK(e,t*2,n.valueOf())},H$e=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},UOt=({values:e,valueOffsets:t},n,r)=>U$e(e,t,n,r),VOt=({values:e,valueOffsets:t},n,r)=>{U$e(e,t,n,CK(r))},q$e=(e,t,n)=>{e.type.unit===Vd.DAY?VK(e,t,n):HK(e,t,n)},qK=({values:e},t,n)=>zK(e,t*2,n/1e3),WK=({values:e},t,n)=>zK(e,t*2,n),GK=({values:e},t,n)=>FOt(e,t*2,n),YK=({values:e},t,n)=>BOt(e,t*2,n),W$e=(e,t,n)=>{switch(e.type.unit){case jn.SECOND:return qK(e,t,n);case jn.MILLISECOND:return WK(e,t,n);case jn.MICROSECOND:return GK(e,t,n);case jn.NANOSECOND:return YK(e,t,n)}},KK=({values:e},t,n)=>{e[t]=n},XK=({values:e},t,n)=>{e[t]=n},QK=({values:e},t,n)=>{e[t]=n},JK=({values:e},t,n)=>{e[t]=n},G$e=(e,t,n)=>{switch(e.type.unit){case jn.SECOND:return KK(e,t,n);case jn.MILLISECOND:return XK(e,t,n);case jn.MICROSECOND:return QK(e,t,n);case jn.NANOSECOND:return JK(e,t,n)}},Y$e=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},HOt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Zl.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},qOt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Zl.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},WOt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),GOt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),YOt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),KOt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),XOt=(e,t,n)=>{const r=e.type.children.map(s=>Zl.getVisitFn(s.type)),i=n instanceof Map?YOt(t,n):n instanceof rr?GOt(t,n):Array.isArray(n)?WOt(t,n):KOt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},QOt=(e,t,n)=>{e.type.mode===Jl.Dense?K$e(e,t,n):X$e(e,t,n)},K$e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Zl.visit(i,e.valueOffsets[t],n)},X$e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Zl.visit(i,t,n)},JOt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},Q$e=(e,t,n)=>{e.type.unit===Hd.DAY_TIME?ZK(e,t,n):eX(e,t,n)},ZK=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},eX=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},ZOt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Zl.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};un.prototype.visitBool=mn(jOt);un.prototype.visitInt=mn(Jp);un.prototype.visitInt8=mn(Jp);un.prototype.visitInt16=mn(Jp);un.prototype.visitInt32=mn(Jp);un.prototype.visitInt64=mn(Jp);un.prototype.visitUint8=mn(Jp);un.prototype.visitUint16=mn(Jp);un.prototype.visitUint32=mn(Jp);un.prototype.visitUint64=mn(Jp);un.prototype.visitFloat=mn(zOt);un.prototype.visitFloat16=mn(V$e);un.prototype.visitFloat32=mn(UK);un.prototype.visitFloat64=mn(UK);un.prototype.visitUtf8=mn(VOt);un.prototype.visitBinary=mn(UOt);un.prototype.visitFixedSizeBinary=mn(H$e);un.prototype.visitDate=mn(q$e);un.prototype.visitDateDay=mn(VK);un.prototype.visitDateMillisecond=mn(HK);un.prototype.visitTimestamp=mn(W$e);un.prototype.visitTimestampSecond=mn(qK);un.prototype.visitTimestampMillisecond=mn(WK);un.prototype.visitTimestampMicrosecond=mn(GK);un.prototype.visitTimestampNanosecond=mn(YK);un.prototype.visitTime=mn(G$e);un.prototype.visitTimeSecond=mn(KK);un.prototype.visitTimeMillisecond=mn(XK);un.prototype.visitTimeMicrosecond=mn(QK);un.prototype.visitTimeNanosecond=mn(JK);un.prototype.visitDecimal=mn(Y$e);un.prototype.visitList=mn(HOt);un.prototype.visitStruct=mn(XOt);un.prototype.visitUnion=mn(QOt);un.prototype.visitDenseUnion=mn(K$e);un.prototype.visitSparseUnion=mn(X$e);un.prototype.visitDictionary=mn(JOt);un.prototype.visitInterval=mn(Q$e);un.prototype.visitIntervalDayTime=mn(ZK);un.prototype.visitIntervalYearMonth=mn(eX);un.prototype.visitFixedSizeList=mn(ZOt);un.prototype.visitMap=mn(qOt);const Zl=new un,$c=Symbol.for("parent"),Mb=Symbol.for("rowIndex");class tX{constructor(t,n){return this[$c]=t,this[Mb]=n,new Proxy(this,new tPt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Mb],n=this[$c],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=yu.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Tg(t)}: ${Tg(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new ePt(this[$c],this[Mb])}}class ePt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,yu.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(tX.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[$c]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Mb]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class tPt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[$c].type.children.map(n=>n.name)}has(t,n){return t[$c].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[$c].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[$c].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=yu.visit(t[$c].children[r],t[Mb]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[$c].type.children.findIndex(s=>s.name===n);return i!==-1?(Zl.visit(t[$c].children[i],t[Mb],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class rn extends Vn{}function ln(e){return(t,n)=>t.getValid(n)?e(t,n):null}const nPt=(e,t)=>864e5*e[t],nX=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),rPt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,iPt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,J$e=e=>new Date(e),sPt=(e,t)=>J$e(nPt(e,t)),oPt=(e,t)=>J$e(nX(e,t)),aPt=(e,t)=>null,Z$e=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},uPt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},eRe=({values:e},t)=>sPt(e,t),tRe=({values:e},t)=>oPt(e,t*2),N0=({stride:e,values:t},n)=>t[e*n],lPt=({stride:e,values:t},n)=>j$e(t[e*n]),nRe=({values:e},t)=>e[t],cPt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),fPt=({values:e,valueOffsets:t},n)=>Z$e(e,t,n),dPt=({values:e,valueOffsets:t},n)=>{const r=Z$e(e,t,n);return r!==null?YU(r):null},hPt=({values:e},t)=>e[t],pPt=({type:e,values:t},n)=>e.precision!==go.HALF?t[n]:j$e(t[n]),mPt=(e,t)=>e.type.unit===Vd.DAY?eRe(e,t):tRe(e,t),rRe=({values:e},t)=>1e3*nX(e,t*2),iRe=({values:e},t)=>nX(e,t*2),sRe=({values:e},t)=>rPt(e,t*2),oRe=({values:e},t)=>iPt(e,t*2),gPt=(e,t)=>{switch(e.type.unit){case jn.SECOND:return rRe(e,t);case jn.MILLISECOND:return iRe(e,t);case jn.MICROSECOND:return sRe(e,t);case jn.NANOSECOND:return oRe(e,t)}},aRe=({values:e},t)=>e[t],uRe=({values:e},t)=>e[t],lRe=({values:e},t)=>e[t],cRe=({values:e},t)=>e[t],yPt=(e,t)=>{switch(e.type.unit){case jn.SECOND:return aRe(e,t);case jn.MILLISECOND:return uRe(e,t);case jn.MICROSECOND:return lRe(e,t);case jn.NANOSECOND:return cRe(e,t)}},vPt=({values:e,stride:t},n)=>kK.decimal(e.subarray(t*n,t*(n+1))),_Pt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new rr([u])},bPt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new v4(o.slice(i,s-i))},wPt=(e,t)=>new tX(e,t),EPt=(e,t)=>e.type.mode===Jl.Dense?fRe(e,t):dRe(e,t),fRe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return yu.visit(r,e.valueOffsets[t])},dRe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return yu.visit(r,t)},xPt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},SPt=(e,t)=>e.type.unit===Hd.DAY_TIME?hRe(e,t):pRe(e,t),hRe=({values:e},t)=>e.subarray(2*t,2*(t+1)),pRe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},TPt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new rr([s])};rn.prototype.visitNull=ln(aPt);rn.prototype.visitBool=ln(uPt);rn.prototype.visitInt=ln(hPt);rn.prototype.visitInt8=ln(N0);rn.prototype.visitInt16=ln(N0);rn.prototype.visitInt32=ln(N0);rn.prototype.visitInt64=ln(nRe);rn.prototype.visitUint8=ln(N0);rn.prototype.visitUint16=ln(N0);rn.prototype.visitUint32=ln(N0);rn.prototype.visitUint64=ln(nRe);rn.prototype.visitFloat=ln(pPt);rn.prototype.visitFloat16=ln(lPt);rn.prototype.visitFloat32=ln(N0);rn.prototype.visitFloat64=ln(N0);rn.prototype.visitUtf8=ln(dPt);rn.prototype.visitBinary=ln(fPt);rn.prototype.visitFixedSizeBinary=ln(cPt);rn.prototype.visitDate=ln(mPt);rn.prototype.visitDateDay=ln(eRe);rn.prototype.visitDateMillisecond=ln(tRe);rn.prototype.visitTimestamp=ln(gPt);rn.prototype.visitTimestampSecond=ln(rRe);rn.prototype.visitTimestampMillisecond=ln(iRe);rn.prototype.visitTimestampMicrosecond=ln(sRe);rn.prototype.visitTimestampNanosecond=ln(oRe);rn.prototype.visitTime=ln(yPt);rn.prototype.visitTimeSecond=ln(aRe);rn.prototype.visitTimeMillisecond=ln(uRe);rn.prototype.visitTimeMicrosecond=ln(lRe);rn.prototype.visitTimeNanosecond=ln(cRe);rn.prototype.visitDecimal=ln(vPt);rn.prototype.visitList=ln(_Pt);rn.prototype.visitStruct=ln(wPt);rn.prototype.visitUnion=ln(EPt);rn.prototype.visitDenseUnion=ln(fRe);rn.prototype.visitSparseUnion=ln(dRe);rn.prototype.visitDictionary=ln(xPt);rn.prototype.visitInterval=ln(SPt);rn.prototype.visitIntervalDayTime=ln(hRe);rn.prototype.visitIntervalYearMonth=ln(pRe);rn.prototype.visitFixedSizeList=ln(TPt);rn.prototype.visitMap=ln(bPt);const yu=new rn,zc=Symbol.for("keys"),Fb=Symbol.for("vals");class v4{constructor(t){return this[zc]=new rr([t.children[0]]).memoize(),this[Fb]=t.children[1],new Proxy(this,new CPt)}[Symbol.iterator](){return new APt(this[zc],this[Fb])}get size(){return this[zc].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[zc],n=this[Fb],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=yu.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Tg(t)}: ${Tg(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class APt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),yu.visit(this.vals,t)]})}}class CPt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[zc].toArray().map(String)}has(t,n){return t[zc].includes(n)}getOwnPropertyDescriptor(t,n){if(t[zc].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[zc].indexOf(n);if(r!==-1){const i=yu.visit(Reflect.get(t,Fb),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[zc].indexOf(n);return i!==-1?(Zl.visit(Reflect.get(t,Fb),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(v4.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[zc]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Fb]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Rhe;function mRe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Rhe=s,s=o,o=Rhe),o>i&&(o=i),r?r(e,s,o):[s,o]}const Nhe=e=>e!==e;function VE(e){if(typeof e!=="object"||e===null)return Nhe(e)?Nhe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?_Ot(e,n):!1:e instanceof Map?OPt(e):Array.isArray(e)?IPt(e):e instanceof rr?PPt(e):kPt(e,!0)}function IPt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=VE(e[n]);return _4(t)}function OPt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=VE(r);return _4(n)}function PPt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=VE(e.get(n));return _4(t)}function kPt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=VE(e[n[i]]);return _4(r,n)}function _4(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return $Pt(e,n);case Map:return Dhe(e,n,n.keys());case v4:case tX:case Object:case void 0:return Dhe(e,n,t||Object.keys(n))}return n instanceof rr?RPt(e,n):!1}}function $Pt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function RPt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Dhe(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function gRe(e,t,n,r){return(n&1<<r)!==0}function NPt(e,t,n,r){return(n&1<<r)>>r}function rX(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):yRe(new iX(n,e,t,null,gRe)).subarray(0,r)),i}return n}function yRe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class iX{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function QU(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new iX(e,t,n-t,e,NPt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return QU(e,t,i)+QU(e,r,n)+DPt(e,i>>3,r-i>>3)}function DPt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=PB(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=PB(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=PB(s.getUint8(i)),i+=1;return r}function PB(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const LPt=-1;class Cr{constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Cr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Gf(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=LPt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-QU(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:u}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:u,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+t>>3,o=(i+t)%8,a=r[s]>>o&1;return n?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Cr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(rX(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Oh.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Oh.TYPE])&&(o[Oh.TYPE]=s.subarray(t,t+n)),(s=o[Oh.OFFSET])&&(o[Oh.OFFSET]=s.subarray(t,t+n+1))||(s=o[Oh.DATA])&&(o[Oh.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Cr.prototype.children=Object.freeze([]);class t2 extends Vn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Cr(n,r,i,0)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=so(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=so(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=so(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.data),s=vr(t.nullBitmap),o=lS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Cr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.data),s=vr(t.nullBitmap),o=lS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Cr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=so(n.ArrayType,t.data),{["length"]:o=s.length/Gf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=so(n.ArrayType,t.data),{["length"]:o=s.length/Gf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=so(n.ArrayType,t.data),{["length"]:o=s.length/Gf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=so(n.ArrayType,t.data),{["length"]:o=s.length/Gf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=so(n.ArrayType,t.data),{["length"]:o=s.length/Gf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=vr(t.nullBitmap),o=lS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Cr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=vr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=vr(t.nullBitmap),o=so(n.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;if(Pn.isSparseUnion(n))return new Cr(n,r,a,u,[void 0,void 0,s,o],i);const l=lS(t.valueOffsets);return new Cr(n,r,a,u,[l,void 0,s,o],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=so(n.indices.ArrayType,t.data),{["dictionary"]:o=new rr([new t2().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Cr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=vr(t.nullBitmap),s=so(n.ArrayType,t.data),{["length"]:o=s.length/Gf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new t2().visit({type:n.valueType})}=t,s=vr(t.nullBitmap),{["length"]:o=i.length/Gf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Cr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new t2().visit({type:n.childType})}=t,s=vr(t.nullBitmap),o=lS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Cr(n,r,a,u,[o,void 0,s],[i])}}function jo(e){return new t2().visit(e)}class Lhe{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function vRe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function _Re(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function bRe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function sX(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function oX(e,t){return e.getValid(t)}function Bb(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return sX(r,this._offsets,n,t)}}function wRe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=sX(s,this._offsets,r,n);return t=void 0,o}}function ERe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):sX(s,this._offsets,i,n);return t=void 0,o}}class sn extends Vn{}function MPt(e,t){return t===null&&e.length>0?0:-1}function FPt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new iX(n,e.offset+(t||0),e.length,n,gRe)){if(!i)return r;++r}return-1}function bn(e,t,n){if(t===void 0)return-1;if(t===null)return FPt(e,n);const r=yu.getVisitFn(e),i=VE(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function xRe(e,t,n){const r=yu.getVisitFn(e),i=VE(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}sn.prototype.visitNull=MPt;sn.prototype.visitBool=bn;sn.prototype.visitInt=bn;sn.prototype.visitInt8=bn;sn.prototype.visitInt16=bn;sn.prototype.visitInt32=bn;sn.prototype.visitInt64=bn;sn.prototype.visitUint8=bn;sn.prototype.visitUint16=bn;sn.prototype.visitUint32=bn;sn.prototype.visitUint64=bn;sn.prototype.visitFloat=bn;sn.prototype.visitFloat16=bn;sn.prototype.visitFloat32=bn;sn.prototype.visitFloat64=bn;sn.prototype.visitUtf8=bn;sn.prototype.visitBinary=bn;sn.prototype.visitFixedSizeBinary=bn;sn.prototype.visitDate=bn;sn.prototype.visitDateDay=bn;sn.prototype.visitDateMillisecond=bn;sn.prototype.visitTimestamp=bn;sn.prototype.visitTimestampSecond=bn;sn.prototype.visitTimestampMillisecond=bn;sn.prototype.visitTimestampMicrosecond=bn;sn.prototype.visitTimestampNanosecond=bn;sn.prototype.visitTime=bn;sn.prototype.visitTimeSecond=bn;sn.prototype.visitTimeMillisecond=bn;sn.prototype.visitTimeMicrosecond=bn;sn.prototype.visitTimeNanosecond=bn;sn.prototype.visitDecimal=bn;sn.prototype.visitList=bn;sn.prototype.visitStruct=bn;sn.prototype.visitUnion=bn;sn.prototype.visitDenseUnion=xRe;sn.prototype.visitSparseUnion=xRe;sn.prototype.visitDictionary=bn;sn.prototype.visitInterval=bn;sn.prototype.visitIntervalDayTime=bn;sn.prototype.visitIntervalYearMonth=bn;sn.prototype.visitFixedSizeList=bn;sn.prototype.visitMap=bn;const HD=new sn;class on extends Vn{}function cn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof Ia&&t.bitWidth!==64||t instanceof $p&&t.bitWidth!==64||t instanceof Kg&&t.precision!==go.HALF))return new Lhe(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Lhe(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new BPt(o)})}class BPt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}on.prototype.visitNull=cn;on.prototype.visitBool=cn;on.prototype.visitInt=cn;on.prototype.visitInt8=cn;on.prototype.visitInt16=cn;on.prototype.visitInt32=cn;on.prototype.visitInt64=cn;on.prototype.visitUint8=cn;on.prototype.visitUint16=cn;on.prototype.visitUint32=cn;on.prototype.visitUint64=cn;on.prototype.visitFloat=cn;on.prototype.visitFloat16=cn;on.prototype.visitFloat32=cn;on.prototype.visitFloat64=cn;on.prototype.visitUtf8=cn;on.prototype.visitBinary=cn;on.prototype.visitFixedSizeBinary=cn;on.prototype.visitDate=cn;on.prototype.visitDateDay=cn;on.prototype.visitDateMillisecond=cn;on.prototype.visitTimestamp=cn;on.prototype.visitTimestampSecond=cn;on.prototype.visitTimestampMillisecond=cn;on.prototype.visitTimestampMicrosecond=cn;on.prototype.visitTimestampNanosecond=cn;on.prototype.visitTime=cn;on.prototype.visitTimeSecond=cn;on.prototype.visitTimeMillisecond=cn;on.prototype.visitTimeMicrosecond=cn;on.prototype.visitTimeNanosecond=cn;on.prototype.visitDecimal=cn;on.prototype.visitList=cn;on.prototype.visitStruct=cn;on.prototype.visitUnion=cn;on.prototype.visitDenseUnion=cn;on.prototype.visitSparseUnion=cn;on.prototype.visitDictionary=cn;on.prototype.visitInterval=cn;on.prototype.visitIntervalDayTime=cn;on.prototype.visitIntervalYearMonth=cn;on.prototype.visitFixedSizeList=cn;on.prototype.visitMap=cn;const aX=new on,jPt=(e,t)=>e+t;class D0 extends Vn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===jn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((r,i)=>r+qd.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+qd.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const zPt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),UPt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),VPt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=qd.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},HPt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=qd.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},qPt=(e,t)=>e.type.mode===Jl.Dense?SRe(e,t):TRe(e,t),SRe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+qd.visit(t[s],r[i])},TRe=({children:e},t)=>4+qd.visitMany(e,e.map(()=>t)).reduce(jPt,0);D0.prototype.visitUtf8=zPt;D0.prototype.visitBinary=UPt;D0.prototype.visitList=VPt;D0.prototype.visitFixedSizeList=HPt;D0.prototype.visitUnion=qPt;D0.prototype.visitDenseUnion=SRe;D0.prototype.visitSparseUnion=TRe;const qd=new D0;var ARe;const CRe={},IRe={};class rr{constructor(t){var n,r,i;const s=t[0]instanceof rr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Cr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=CRe[o.typeId],f=s[0];this.isValid=d=>oX(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,IRe[o.typeId]),this._offsets=_Re(s);break}this.data=s,this.type=o,this.stride=Gf(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=vRe(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return aX.visit(this)}concat(...t){return new rr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new rr(mRe(this,t,n,({data:r,_offsets:i},s,o)=>bRe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new rr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Pn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Pn.isDictionary(this.type)){const t=new qD(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new rr(n)}return new qD(this)}unmemoize(){if(Pn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new rr(n)}return this}}ARe=Symbol.toStringTag;rr[ARe]=(e=>{e.type=Pn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=yu.getVisitFnByTypeId(n),i=Zl.getVisitFnByTypeId(n),s=HD.getVisitFnByTypeId(n),o=qd.getVisitFnByTypeId(n);CRe[n]={get:r,set:i,indexOf:s,byteLength:o},IRe[n]=Object.create(e,{isValid:{value:Bb(oX)},get:{value:Bb(yu.getVisitFnByTypeId(n))},set:{value:wRe(Zl.getVisitFnByTypeId(n))},indexOf:{value:ERe(HD.getVisitFnByTypeId(n))},getByteLength:{value:Bb(qd.getVisitFnByTypeId(n))}})}return"Vector"})(rr.prototype);class qD extends rr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new qD(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new rr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function WPt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${GPt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function GPt(e){return typeof e!="bigint"?Tg(e):m$e?`${Tg(e)}n`:`"${Tg(e)}"`}const kB=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,YPt=(e,t=0)=>e.length>=t?e.subarray(0,t):jD(new e.constructor(t),e,0);class b4{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?kB(r*1,this.BYTES_PER_ELEMENT):kB(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=kB(t*this.stride,this.BYTES_PER_ELEMENT);const n=YPt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=jD(new this.ArrayType(t),this.buffer)}}b4.prototype.offset=0;class uI extends b4{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class ORe extends uI{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class PRe extends uI{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Au=class{constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Gf(t),this._nulls=new ORe,n&&n.length>0&&(this._isValid=WPt(n))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new rr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),jo({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Au.prototype.length=1;Au.prototype.stride=1;Au.prototype.children=null;Au.prototype.finished=!1;Au.prototype.nullValues=null;Au.prototype._isValid=()=>!0;class L0 extends Au{constructor(t){super(t),this._values=new uI(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class w4 extends Au{constructor(t){super(t),this._pendingLength=0,this._offsets=new PRe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof v4?n[zc].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class JU{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(n),t.offset()}}const $B=2,td=4,jh=4,Lr=4,Om=new Int32Array(2),Mhe=new Float32Array(Om.buffer),Fhe=new Float64Array(Om.buffer),EP=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let dp=class ZU{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?ZU.ZERO:new ZU(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};dp.ZERO=new dp(0,0);var eV;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(eV||(eV={}));let WD=class kRe{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new kRe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new dp(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new dp(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Om[0]=this.readInt32(t),Mhe[0]}readFloat64(t){return Om[EP?0:1]=this.readInt32(t),Om[EP?1:0]=this.readInt32(t+4),Fhe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){Mhe[0]=n,this.writeInt32(t,Om[0])}writeFloat64(t,n){Fhe[0]=n,this.writeInt32(t,Om[EP?0:1]),this.writeInt32(t+4,Om[EP?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+td+jh)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<jh;n++)t+=String.fromCharCode(this.readInt8(this.position_+td+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);let i="",s=0;if(t+=td,n===eV.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;s<r;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const u=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|u&63;else{const l=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(u&63)<<6|l&63;else{const c=this.readUint8(t+s++);o=(a&7)<<18|(u&63)<<12|(l&63)<<6|c&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return i}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+td}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=jh)throw new Error("FlatBuffers: file identifier must be length "+jh);for(let n=0;n<jh;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+td+n))return!1;return!0}createLong(t,n){return dp.create(t,n)}createScalarList(t,n){const r=[];for(let i=0;i<n;++i)t(i)!==null&&r.push(t(i));return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},$Re=class RRe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=WD.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=RRe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||!n.equals(r))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=WD.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(td,0),this.writeInt32(this.offset()-t+td)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*$B;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=$B;l<s;l+=$B)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Lr:0;if(n){const s=n;if(this.prep(this.minalign,td+jh+i),s.length!=jh)throw new Error("FlatBuffers: file identifier must be length "+jh);for(let o=jh-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,td+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(td,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let r=0;for(;r<t.length;){let i;const s=t.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=t.charCodeAt(r++);i=(s<<10)+o+-56613888}i<128?n.push(i):(i<2048?n.push(i>>6&31|192):(i<65536?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(i&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createLong(t,n){return dp.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class hs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new hs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Lr),(n||new hs).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return hs.startKeyValue(t),hs.addKey(t,n),hs.addValue(t,r),hs.endKeyValue(t)}}var $w;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})($w||($w={}));var Rw;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Rw||(Rw={}));var GD;(function(e){e[e.DenseArray=0]="DenseArray"})(GD||(GD={}));class zu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new zu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Lr),(n||new zu).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return zu.startInt(t),zu.addBitWidth(t,n),zu.addIsSigned(t,r),zu.endInt(t)}}class zh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new zh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Lr),(n||new zh).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new zu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):GD.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,GD.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Xy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Xy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Lr),(n||new Xy).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Xy.startBinary(t),Xy.endBinary(t)}}class Qy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Qy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Lr),(n||new Qy).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Qy.startBool(t),Qy.endBool(t)}}var YD;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(YD||(YD={}));let o$=class D_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new D_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Lr),(n||new D_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):YD.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,YD.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return D_.startDate(t),D_.addUnit(t,n),D_.endDate(t)}};class Ga{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Ga).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Lr),(n||new Ga).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Ga.startDecimal(t),Ga.addPrecision(t,n),Ga.addScale(t,r),Ga.addBitWidth(t,i),Ga.endDecimal(t)}}var Nw;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Nw||(Nw={}));class nd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new nd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Lr),(n||new nd).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return nd.startFixedSizeBinary(t),nd.addByteWidth(t,n),nd.endFixedSizeBinary(t)}}class rd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new rd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Lr),(n||new rd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return rd.startFixedSizeList(t),rd.addListSize(t,n),rd.endFixedSizeList(t)}}var KD;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(KD||(KD={}));class id{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new id).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Lr),(n||new id).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):KD.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,KD.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return id.startFloatingPoint(t),id.addPrecision(t,n),id.endFloatingPoint(t)}}var XD;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(XD||(XD={}));class sd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new sd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Lr),(n||new sd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):XD.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,XD.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return sd.startInterval(t),sd.addUnit(t,n),sd.endInterval(t)}}class Jy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Jy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Lr),(n||new Jy).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Jy.startList(t),Jy.endList(t)}}let a$=class L_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new L_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Lr),(n||new L_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return L_.startMap(t),L_.addKeysSorted(t,n),L_.endMap(t)}};class Zy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Zy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Lr),(n||new Zy).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Zy.startNull(t),Zy.endNull(t)}}class e1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new e1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Lr),(n||new e1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return e1.startStruct_(t),e1.endStruct_(t)}}let JS=class yy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new yy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Lr),(n||new yy).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Nw.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Nw.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return yy.startTime(t),yy.addUnit(t,n),yy.addBitWidth(t,r),yy.endTime(t)}},ZS=class vy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new vy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Lr),(n||new vy).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Nw.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Nw.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return vy.startTimestamp(t),vy.addUnit(t,n),vy.addTimezone(t,r),vy.endTimestamp(t)}};var QD;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(QD||(QD={}));let _y=class by{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new by).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Lr),(n||new by).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):QD.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,QD.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return by.startUnion(t),by.addMode(t,n),by.addTypeIds(t,r),by.endUnion(t)}};class t1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new t1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Lr),(n||new t1).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return t1.startUtf8(t),t1.endUtf8(t)}}var gi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(gi||(gi={}));let Cl=class u${constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new u$).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Lr),(n||new u$).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):gi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new zh).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new u$).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new hs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,gi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},qf=class Ch{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Ch).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Lr),(n||new Ch).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Rw.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Cl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new hs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Rw.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Ch.startSchema(t),Ch.addEndianness(t,n),Ch.addFields(t,r),Ch.addCustomMetadata(t,i),Ch.addFeatures(t,s),Ch.endSchema(t)}};class Mu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Mu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Lr),(n||new Mu).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$w.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new qf).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new JU).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new JU).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new hs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,$w.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class gr{constructor(t=[],n,r){this.fields=t||[],this.metadata=n||new Map,r||(r=nV(t)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new gr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new gr(n,this.metadata)}assign(...t){const n=t[0]instanceof gr?t[0]:Array.isArray(t[0])?new gr(t[0]):new gr(t),r=[...this.fields],i=xP(xP(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:xP(xP(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=nV(s,new Map);return new gr([...r,...s],i,new Map([...this.dictionaries,...o]))}}gr.prototype.fields=null;gr.prototype.metadata=null;gr.prototype.dictionaries=null;let Ir=class tV{constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new tV(`${n}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],tV.new(n,r,i,s)}};Ir.prototype.type=null;Ir.prototype.name=null;Ir.prototype.nullable=null;Ir.prototype.metadata=null;function xP(e,t){return new Map([...e||new Map,...t||new Map])}function nV(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Pn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&nV(s.children,t)}return t}var Bhe=dp,KPt=$Re,XPt=WD;class rV{constructor(t,n=Hu.V4,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new XPt(vr(t));const n=Mu.getRootAsFooter(t),r=gr.decode(n.schema());return new QPt(r,n)}static encode(t){const n=new KPt,r=gr.encode(n,t.schema);Mu.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Qg.encode(n,o);const i=n.endVector();Mu.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Qg.encode(n,o);const s=n.endVector();return Mu.startFooter(n),Mu.addSchema(n,r),Mu.addVersion(n,Hu.V4),Mu.addRecordBatches(n,i),Mu.addDictionaries(n,s),Mu.finishFooterBuffer(n,Mu.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class QPt extends rV{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return Qg.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return Qg.decode(n)}return null}}class Qg{constructor(t,n,r){this.metaDataLength=t,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new Qg(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=new Bhe(n.offset,0),s=new Bhe(n.bodyLength,0);return JU.createBlock(t,i,r,s)}}const SP=Object.freeze({done:!0,value:void 0});class NRe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class JPt extends NRe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Bh(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(SP);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return khe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return khe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Bh(this,void 0,void 0,function*(){return yield this.abort(t),SP})}return(t){return Bh(this,void 0,void 0,function*(){return yield this.close(),SP})}read(t){return Bh(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Bh(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(SP)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class RB extends JPt{write(t){if((t=vr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?YU(this.toUint8Array(!0)):this.toUint8Array(!1).then(YU)}toUint8Array(t=!1){return t?Ud(this._values)[0]:Bh(this,void 0,void 0,function*(){var n,r;const i=[];let s=0;try{for(var o=e2(this),a;a=yield o.next(),!a.done;){const u=a.value;i.push(u),s+=u.byteLength}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return Ud(i,s)[0]})}}class DRe extends w4{constructor(t){super(t),this._values=new b4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,vr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class ZPt extends Au{constructor(t){super(t),this._values=new ORe}setValue(t,n){this._values.set(t,+n)}}class E4 extends L0{}E4.prototype._setValue=q$e;class LRe extends E4{}LRe.prototype._setValue=VK;class MRe extends E4{}MRe.prototype._setValue=HK;class FRe extends L0{}FRe.prototype._setValue=Y$e;class ekt extends Au{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new Xg(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=JD({type:this.type.indices,nullValues:n}),this.dictionary=JD({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class BRe extends L0{}BRe.prototype._setValue=H$e;class tkt extends Au{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new kw(this.type.listSize,new Ir(n,t.type,!0)),r}}class x4 extends L0{setValue(t,n){this._values.set(t,n)}}class nkt extends x4{setValue(t,n){super.setValue(t,z$e(n))}}class rkt extends x4{}class ikt extends x4{}class S4 extends L0{}S4.prototype._setValue=Q$e;class jRe extends S4{}jRe.prototype._setValue=ZK;class zRe extends S4{}zRe.prototype._setValue=eX;class Zp extends L0{setValue(t,n){this._values.set(t,n)}}class skt extends Zp{}class okt extends Zp{}class akt extends Zp{}class ukt extends Zp{}class lkt extends Zp{}class ckt extends Zp{}class fkt extends Zp{}class dkt extends Zp{}class hkt extends w4{constructor(t){super(t),this._offsets=new PRe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Pw(new Ir(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s.length,a=n.set(i,o).buffer[i];for(let u=-1;++u<o;)r.set(a+u,s[u])}}}class pkt extends w4{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new SA(new Ir(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class mkt extends Au{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class gkt extends Au{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new Vo([...this.type.children,new Ir(n,t.type,!0)]),r}}class HE extends L0{}HE.prototype._setValue=W$e;class URe extends HE{}URe.prototype._setValue=qK;class VRe extends HE{}VRe.prototype._setValue=WK;class HRe extends HE{}HRe.prototype._setValue=GK;class qRe extends HE{}qRe.prototype._setValue=YK;class qE extends L0{}qE.prototype._setValue=G$e;class WRe extends qE{}WRe.prototype._setValue=KK;class GRe extends qE{}GRe.prototype._setValue=XK;class YRe extends qE{}YRe.prototype._setValue=QK;class KRe extends qE{}KRe.prototype._setValue=JK;class uX extends Au{constructor(t){super(t),this._typeIds=new uI(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValid(t,this.isValid(n))&&this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Ir(n,t.type)];return this.type=new xA(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class ykt extends uX{}class vkt extends uX{constructor(t){super(t),this._offsets=new uI(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class XRe extends w4{constructor(t){super(t),this._values=new b4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,CK(n))}_flushPending(t,n){}}XRe.prototype._flushPending=DRe.prototype._flushPending;class _kt extends Vn{visitNull(){return mkt}visitBool(){return ZPt}visitInt(){return Zp}visitInt8(){return skt}visitInt16(){return okt}visitInt32(){return akt}visitInt64(){return ukt}visitUint8(){return lkt}visitUint16(){return ckt}visitUint32(){return fkt}visitUint64(){return dkt}visitFloat(){return x4}visitFloat16(){return nkt}visitFloat32(){return rkt}visitFloat64(){return ikt}visitUtf8(){return XRe}visitBinary(){return DRe}visitFixedSizeBinary(){return BRe}visitDate(){return E4}visitDateDay(){return LRe}visitDateMillisecond(){return MRe}visitTimestamp(){return HE}visitTimestampSecond(){return URe}visitTimestampMillisecond(){return VRe}visitTimestampMicrosecond(){return HRe}visitTimestampNanosecond(){return qRe}visitTime(){return qE}visitTimeSecond(){return WRe}visitTimeMillisecond(){return GRe}visitTimeMicrosecond(){return YRe}visitTimeNanosecond(){return KRe}visitDecimal(){return FRe}visitList(){return hkt}visitStruct(){return gkt}visitUnion(){return uX}visitDenseUnion(){return vkt}visitSparseUnion(){return ykt}visitDictionary(){return ekt}visitInterval(){return S4}visitIntervalDayTime(){return jRe}visitIntervalYearMonth(){return zRe}visitFixedSizeList(){return tkt}visitMap(){return pkt}}const bkt=new _kt;class an extends Vn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Cu(e,t){return t instanceof e.constructor}function lI(e,t){return e===t||Cu(e,t)}function em(e,t){return e===t||Cu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function T4(e,t){return e===t||Cu(e,t)&&e.precision===t.precision}function wkt(e,t){return e===t||Cu(e,t)&&e.byteWidth===t.byteWidth}function lX(e,t){return e===t||Cu(e,t)&&e.unit===t.unit}function cI(e,t){return e===t||Cu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function fI(e,t){return e===t||Cu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Ekt(e,t){return e===t||Cu(e,t)&&e.children.length===t.children.length&&Jg.compareManyFields(e.children,t.children)}function xkt(e,t){return e===t||Cu(e,t)&&e.children.length===t.children.length&&Jg.compareManyFields(e.children,t.children)}function cX(e,t){return e===t||Cu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Jg.compareManyFields(e.children,t.children)}function Skt(e,t){return e===t||Cu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Jg.visit(e.indices,t.indices)&&Jg.visit(e.dictionary,t.dictionary)}function fX(e,t){return e===t||Cu(e,t)&&e.unit===t.unit}function Tkt(e,t){return e===t||Cu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Jg.compareManyFields(e.children,t.children)}function Akt(e,t){return e===t||Cu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Jg.compareManyFields(e.children,t.children)}an.prototype.visitNull=lI;an.prototype.visitBool=lI;an.prototype.visitInt=em;an.prototype.visitInt8=em;an.prototype.visitInt16=em;an.prototype.visitInt32=em;an.prototype.visitInt64=em;an.prototype.visitUint8=em;an.prototype.visitUint16=em;an.prototype.visitUint32=em;an.prototype.visitUint64=em;an.prototype.visitFloat=T4;an.prototype.visitFloat16=T4;an.prototype.visitFloat32=T4;an.prototype.visitFloat64=T4;an.prototype.visitUtf8=lI;an.prototype.visitBinary=lI;an.prototype.visitFixedSizeBinary=wkt;an.prototype.visitDate=lX;an.prototype.visitDateDay=lX;an.prototype.visitDateMillisecond=lX;an.prototype.visitTimestamp=cI;an.prototype.visitTimestampSecond=cI;an.prototype.visitTimestampMillisecond=cI;an.prototype.visitTimestampMicrosecond=cI;an.prototype.visitTimestampNanosecond=cI;an.prototype.visitTime=fI;an.prototype.visitTimeSecond=fI;an.prototype.visitTimeMillisecond=fI;an.prototype.visitTimeMicrosecond=fI;an.prototype.visitTimeNanosecond=fI;an.prototype.visitDecimal=lI;an.prototype.visitList=Ekt;an.prototype.visitStruct=xkt;an.prototype.visitUnion=cX;an.prototype.visitDenseUnion=cX;an.prototype.visitSparseUnion=cX;an.prototype.visitDictionary=Skt;an.prototype.visitInterval=fX;an.prototype.visitIntervalDayTime=fX;an.prototype.visitIntervalYearMonth=fX;an.prototype.visitFixedSizeList=Tkt;an.prototype.visitMap=Akt;const Jg=new an;function iV(e,t){return Jg.compareSchemas(e,t)}function JD(e){const t=e.type,n=new(bkt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(JD(Object.assign(Object.assign({},l),{type:u})))}}return n}function NB(e,t){return Ckt(e,t.map(n=>n.data.concat()))}function Ckt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=Ikt(n,o,c,t,i),o>0&&(r[s++]=jo({type:new Vo(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Uu(e,f))]}function Ikt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:jo({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var QRe;class Xa{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new gr([]),this._offsets=[0],this;let i,s;t[0]instanceof gr&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Uu)return[u];if(u instanceof Xa)return u.batches;if(u instanceof Cr){if(u.type instanceof Vo)return[new Uu(new gr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new rr([u[h]])),f=new gr(l.map((h,p)=>new Ir(String(h),c[p].type))),[,d]=NB(f,c);return d.length===0?[new Uu(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new gr([]),!(i instanceof gr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Uu))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!iV(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??_Re(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=vRe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?aX.visit(new rr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Xa(n,r.map(i=>new Uu(n,i)))}slice(t,n){const r=this.schema;[t,n]=mRe({length:this.numRows},t,n);const i=bRe(this.data,this._offsets,t,n);return new Xa(r,i.map(s=>new Uu(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=jo({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new rr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new rr([jo({type:new kp,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=NB(r,a)}return new Xa(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Xa(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Xa(...NB(s,o))}}QRe=Symbol.toStringTag;Xa[QRe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Bb(oX),e.get=Bb(yu.getVisitFn(re.Struct)),e.set=wRe(Zl.getVisitFn(re.Struct)),e.indexOf=ERe(HD.getVisitFn(re.Struct)),e.getByteLength=Bb(qd.getVisitFn(re.Struct)),"Table"))(Xa.prototype);var JRe;let Uu=class eT{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof gr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=jo({nullCount:0,type:new Vo(this.schema.fields),children:this.schema.fields.map(n=>jo({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Cr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=jhe(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Ir.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new gr(r),a=jo({type:new Vo(r),length:s,children:i,nullCount:0});[this.schema,this.data]=jhe(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=ZRe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return yu.visit(this.data,t)}set(t,n){return Zl.visit(this.data,t,n)}indexOf(t,n){return HD.visit(this.data,t,n)}getByteLength(t){return qd.visit(this.data,t)}[Symbol.iterator](){return aX.visit(new rr([this.data]))}toArray(){return[...this]}concat(...t){return new Xa(this.schema,[this,...t])}slice(t,n){const[r]=new rr([this.data]).slice(t,n).data;return new eT(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new rr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new rr([jo({type:new kp,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new gr(s,new Map(this.schema.metadata)),i=jo({type:new Vo(s),children:o})}return new eT(r,i)}select(t){const n=this.schema.select(t),r=new Vo(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new eT(n,jo({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=jo({type:new Vo(n.fields),length:this.numRows,children:r});return new eT(n,i)}};JRe=Symbol.toStringTag;Uu[JRe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Uu.prototype);function jhe(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:jo({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),jo({type:new Vo(i),length:n,children:s})]}function ZRe(e,t,n=new Map){for(let r=-1,i=e.length;++r<i;){const o=e[r].type,a=t[r];if(Pn.isDictionary(o)){if(!n.has(o.id))a.dictionary&&n.set(o.id,a.dictionary);else if(n.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&ZRe(o.children,a.children,n)}return n}class Okt extends Uu{constructor(t){const n=t.fields.map(i=>jo({type:i.type})),r=jo({type:new Vo(t.fields),nullCount:0,children:n});super(t,r)}}var ZD;(function(e){e[e.BUFFER=0]="BUFFER"})(ZD||(ZD={}));var e3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(e3||(e3={}));class Pm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Pm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Lr),(n||new Pm).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):e3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):ZD.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,e3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,ZD.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Pm.startBodyCompression(t),Pm.addCodec(t,n),Pm.addMethod(t,r),Pm.endBodyCompression(t)}}let eNe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},tNe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},Ph=class sV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new sV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Lr),(n||new sV).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new tNe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new eNe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Pm).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},M_=class oV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new oV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Lr),(n||new oV).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var t3;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(t3||(t3={}));let pm=class Mf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Mf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Lr),(n||new Mf).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$w.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):t3.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new hs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,$w.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,t3.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Mf.startMessage(t),Mf.addVersion(t,n),Mf.addHeaderType(t,r),Mf.addHeader(t,i),Mf.addBodyLength(t,s),Mf.addCustomMetadata(t,o),Mf.endMessage(t)}};var Pkt=dp;class kkt extends Vn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Zy.startNull(n),Zy.endNull(n)}visitInt(t,n){return zu.startInt(n),zu.addBitWidth(n,t.bitWidth),zu.addIsSigned(n,t.isSigned),zu.endInt(n)}visitFloat(t,n){return id.startFloatingPoint(n),id.addPrecision(n,t.precision),id.endFloatingPoint(n)}visitBinary(t,n){return Xy.startBinary(n),Xy.endBinary(n)}visitBool(t,n){return Qy.startBool(n),Qy.endBool(n)}visitUtf8(t,n){return t1.startUtf8(n),t1.endUtf8(n)}visitDecimal(t,n){return Ga.startDecimal(n),Ga.addScale(n,t.scale),Ga.addPrecision(n,t.precision),Ga.addBitWidth(n,t.bitWidth),Ga.endDecimal(n)}visitDate(t,n){return o$.startDate(n),o$.addUnit(n,t.unit),o$.endDate(n)}visitTime(t,n){return JS.startTime(n),JS.addUnit(n,t.unit),JS.addBitWidth(n,t.bitWidth),JS.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return ZS.startTimestamp(n),ZS.addUnit(n,t.unit),r!==void 0&&ZS.addTimezone(n,r),ZS.endTimestamp(n)}visitInterval(t,n){return sd.startInterval(n),sd.addUnit(n,t.unit),sd.endInterval(n)}visitList(t,n){return Jy.startList(n),Jy.endList(n)}visitStruct(t,n){return e1.startStruct_(n),e1.endStruct_(n)}visitUnion(t,n){_y.startTypeIdsVector(n,t.typeIds.length);const r=_y.createTypeIdsVector(n,t.typeIds);return _y.startUnion(n),_y.addMode(n,t.mode),_y.addTypeIds(n,r),_y.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return zh.startDictionaryEncoding(n),zh.addId(n,new Pkt(t.id,0)),zh.addIsOrdered(n,t.isOrdered),r!==void 0&&zh.addIndexType(n,r),zh.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return nd.startFixedSizeBinary(n),nd.addByteWidth(n,t.byteWidth),nd.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return rd.startFixedSizeList(n),rd.addListSize(n,t.listSize),rd.endFixedSizeList(n)}visitMap(t,n){return a$.startMap(n),a$.addKeysSorted(n,t.keysSorted),a$.endMap(n)}}const DB=new kkt;function $kt(e,t=new Map){return new gr(Nkt(e,t),l$(e.customMetadata),t)}function nNe(e){return new sl(e.count,rNe(e.columns),iNe(e.columns))}function Rkt(e){return new Wd(nNe(e.data),e.id,e.isDelta)}function Nkt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Ir.fromJSON(n,t))}function zhe(e,t){return(e.children||[]).filter(Boolean).map(n=>Ir.fromJSON(n,t))}function rNe(e){return(e||[]).reduce((t,n)=>[...t,new Lv(n.count,Dkt(n.VALIDITY)),...rNe(n.children)],[])}function iNe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new hd(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new hd(t.length,i.TYPE.length)),i.OFFSET&&t.push(new hd(t.length,i.OFFSET.length)),i.DATA&&t.push(new hd(t.length,i.DATA.length)),t=iNe(i.children,t)}return t}function Dkt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function Lkt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Vhe(e,zhe(e,t)),i=new Ir(e.name,o,e.nullable,l$(e.customMetadata))):t.has(n=s.id)?(r=(r=s.indexType)?Uhe(r):new Yg,a=new Xg(t.get(n),r,n,s.isOrdered),i=new Ir(e.name,a,e.nullable,l$(e.customMetadata))):(r=(r=s.indexType)?Uhe(r):new Yg,t.set(n,o=Vhe(e,zhe(e,t))),a=new Xg(o,r,n,s.isOrdered),i=new Ir(e.name,a,e.nullable,l$(e.customMetadata))),i||null}function l$(e){return new Map(Object.entries(e||{}))}function Uhe(e){return new Ia(e.isSigned,e.bitWidth)}function Vhe(e,t){const n=e.type.name;switch(n){case"NONE":return new kp;case"null":return new kp;case"binary":return new wA;case"utf8":return new Cw;case"bool":return new EA;case"list":return new Pw((t||[])[0]);case"struct":return new Vo(t||[]);case"struct_":return new Vo(t||[])}switch(n){case"int":{const r=e.type;return new Ia(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Kg(go[r.precision])}case"decimal":{const r=e.type;return new zD(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new Iw(Vd[r.unit])}case"time":{const r=e.type;return new $p(jn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new UD(jn[r.unit],r.timezone)}case"interval":{const r=e.type;return new Ow(Hd[r.unit])}case"union":{const r=e.type;return new xA(Jl[r.mode],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new VD(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new kw(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new SA((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var j1=dp,Mkt=$Re,Fkt=WD;class od{constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const r=new od(0,Hu.V4,n);return r._createHeader=Bkt(t,n),r}static decode(t){t=new Fkt(vr(t));const n=pm.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new od(r,i,s);return o._createHeader=jkt(n,s),o}static encode(t){const n=new Mkt;let r=-1;return t.isSchema()?r=gr.encode(n,t.header()):t.isRecordBatch()?r=sl.encode(n,t.header()):t.isDictionaryBatch()&&(r=Wd.encode(n,t.header())),pm.startMessage(n),pm.addVersion(n,Hu.V4),pm.addHeader(n,r),pm.addHeaderType(n,t.headerType),pm.addBodyLength(n,new j1(t.bodyLength,0)),pm.finishMessageBuffer(n,pm.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof gr)return new od(0,Hu.V4,Ds.Schema,t);if(t instanceof sl)return new od(n,Hu.V4,Ds.RecordBatch,t);if(t instanceof Wd)return new od(n,Hu.V4,Ds.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Ds.Schema}isRecordBatch(){return this.headerType===Ds.RecordBatch}isDictionaryBatch(){return this.headerType===Ds.DictionaryBatch}}class sl{constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Wd{constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class hd{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}}class Lv{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}}function Bkt(e,t){return()=>{switch(t){case Ds.Schema:return gr.fromJSON(e);case Ds.RecordBatch:return sl.fromJSON(e);case Ds.DictionaryBatch:return Wd.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Ds[t]}, type: ${t} }`)}}function jkt(e,t){return()=>{switch(t){case Ds.Schema:return gr.decode(e.header(new qf));case Ds.RecordBatch:return sl.decode(e.header(new Ph),e.version());case Ds.DictionaryBatch:return Wd.decode(e.header(new M_),e.version())}throw new Error(`Unrecognized Message type: { name: ${Ds[t]}, type: ${t} }`)}}Ir.encode=Qkt;Ir.decode=Kkt;Ir.fromJSON=Lkt;gr.encode=Xkt;gr.decode=zkt;gr.fromJSON=$kt;sl.encode=Jkt;sl.decode=Ukt;sl.fromJSON=nNe;Wd.encode=Zkt;Wd.decode=Vkt;Wd.fromJSON=Rkt;Lv.encode=e$t;Lv.decode=qkt;hd.encode=t$t;hd.decode=Hkt;function zkt(e,t=new Map){const n=Ykt(e,t);return new gr(n,c$(e),t)}function Ukt(e,t=Hu.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new sl(e.length(),Wkt(e),Gkt(e,t))}function Vkt(e,t=Hu.V4){return new Wd(sl.decode(e.data(),t),e.id(),e.isDelta())}function Hkt(e){return new hd(e.offset(),e.length())}function qkt(e){return new Lv(e.length(),e.nullCount())}function Wkt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Lv.decode(n));return t}function Gkt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Hu.V4&&(r.bb_pos+=8*(i+1)),n[++s]=hd.decode(r));return n}function Ykt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Ir.decode(r,t));return n}function Hhe(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Ir.decode(r,t));return n}function Kkt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Whe(e,Hhe(e,t)),r=new Ir(e.name(),i,e.nullable(),c$(e))):t.has(n=a.id().low)?(s=(s=a.indexType())?qhe(s):new Yg,o=new Xg(t.get(n),s,n,a.isOrdered()),r=new Ir(e.name(),o,e.nullable(),c$(e))):(s=(s=a.indexType())?qhe(s):new Yg,t.set(n,i=Whe(e,Hhe(e,t))),o=new Xg(i,s,n,a.isOrdered()),r=new Ir(e.name(),o,e.nullable(),c$(e))),r||null}function c$(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function qhe(e){return new Ia(e.isSigned(),e.bitWidth())}function Whe(e,t){const n=e.typeType();switch(n){case gi.NONE:return new kp;case gi.Null:return new kp;case gi.Binary:return new wA;case gi.Utf8:return new Cw;case gi.Bool:return new EA;case gi.List:return new Pw((t||[])[0]);case gi.Struct_:return new Vo(t||[])}switch(n){case gi.Int:{const r=e.type(new zu);return new Ia(r.isSigned(),r.bitWidth())}case gi.FloatingPoint:{const r=e.type(new id);return new Kg(r.precision())}case gi.Decimal:{const r=e.type(new Ga);return new zD(r.scale(),r.precision(),r.bitWidth())}case gi.Date:{const r=e.type(new o$);return new Iw(r.unit())}case gi.Time:{const r=e.type(new JS);return new $p(r.unit(),r.bitWidth())}case gi.Timestamp:{const r=e.type(new ZS);return new UD(r.unit(),r.timezone())}case gi.Interval:{const r=e.type(new sd);return new Ow(r.unit())}case gi.Union:{const r=e.type(new _y);return new xA(r.mode(),r.typeIdsArray()||[],t||[])}case gi.FixedSizeBinary:{const r=e.type(new nd);return new VD(r.byteWidth())}case gi.FixedSizeList:{const r=e.type(new rd);return new kw(r.listSize(),(t||[])[0])}case gi.Map:{const r=e.type(new a$);return new SA((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${gi[n]}" (${n})`)}function Xkt(e,t){const n=t.fields.map(s=>Ir.encode(e,s));qf.startFieldsVector(e,n.length);const r=qf.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?qf.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return hs.startKeyValue(e),hs.addKey(e,a),hs.addValue(e,u),hs.endKeyValue(e)})):-1;return qf.startSchema(e),qf.addFields(e,r),qf.addEndianness(e,n$t?Rw.Little:Rw.Big),i!==-1&&qf.addCustomMetadata(e,i),qf.endSchema(e)}function Qkt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Pn.isDictionary(s)?(o=s.dictionary.typeId,i=DB.visit(s,e),r=DB.visit(s.dictionary,e)):r=DB.visit(s,e);const a=(s.children||[]).map(c=>Ir.encode(e,c)),u=Cl.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Cl.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return hs.startKeyValue(e),hs.addKey(e,d),hs.addValue(e,h),hs.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Cl.startField(e),Cl.addType(e,r),Cl.addTypeType(e,o),Cl.addChildren(e,u),Cl.addNullable(e,!!t.nullable),n!==-1&&Cl.addName(e,n),i!==-1&&Cl.addDictionary(e,i),l!==-1&&Cl.addCustomMetadata(e,l),Cl.endField(e)}function Jkt(e,t){const n=t.nodes||[],r=t.buffers||[];Ph.startNodesVector(e,n.length);for(const o of n.slice().reverse())Lv.encode(e,o);const i=e.endVector();Ph.startBuffersVector(e,r.length);for(const o of r.slice().reverse())hd.encode(e,o);const s=e.endVector();return Ph.startRecordBatch(e),Ph.addLength(e,new j1(t.length,0)),Ph.addNodes(e,i),Ph.addBuffers(e,s),Ph.endRecordBatch(e)}function Zkt(e,t){const n=sl.encode(e,t.data);return M_.startDictionaryBatch(e),M_.addId(e,new j1(t.id,0)),M_.addIsDelta(e,t.isDelta),M_.addData(e,n),M_.endDictionaryBatch(e)}function e$t(e,t){return tNe.createFieldNode(e,new j1(t.length,0),new j1(t.nullCount,0))}function t$t(e,t){return eNe.createBuffer(e,new j1(t.offset,0),new j1(t.length,0))}const n$t=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),aV="ARROW1",dX=new Uint8Array(aV.length);for(let e=0;e<aV.length;e+=1)dX[e]=aV.codePointAt(e);dX.length;class ss extends Vn{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Uu?s.data.children:s.data),r=new ss;return r.visitMany(n(t)),r}visit(t){if(t instanceof rr)return this.visitMany(t.data),this;const{type:n}=t;if(!Pn.isDictionary(n)){const{length:r,nullCount:i}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Pn.isNull(n)||tf.call(this,i<=0?new Uint8Array(0):rX(t.offset,r,t.nullBitmap)),this.nodes.push(new Lv(r,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function tf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new hd(this._byteLength,t)),this._byteLength+=t,this}function r$t(e){const{type:t,length:n,typeIds:r,valueOffsets:i}=e;if(tf.call(this,r),t.mode===Jl.Sparse)return uV.call(this,e);if(t.mode===Jl.Dense){if(e.offset<=0)return tf.call(this,i),uV.call(this,e);{const s=r.reduce((c,f)=>Math.max(c,f),r[0]),o=new Int32Array(s+1),a=new Int32Array(s+1).fill(-1),u=new Int32Array(n),l=PK(-i[0],n,i);for(let c,f,d=-1;++d<n;)(f=a[c=r[d]])===-1&&(f=a[c]=l[c]),u[d]=l[d]-f,++o[c];tf.call(this,u);for(let c,f=-1,d=t.children.length;++f<d;)if(c=e.children[f]){const h=t.typeIds[f],p=Math.min(n,o[h]);this.visit(c.slice(a[h],p))}}}return this}function i$t(e){let t;return e.nullCount>=e.length?tf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?tf.call(this,rX(e.offset,e.length,t)):tf.call(this,yRe(e.values))}function M0(e){return tf.call(this,e.values.subarray(0,e.length*e.stride))}function sNe(e){const{length:t,values:n,valueOffsets:r}=e,i=r[0],s=r[t],o=Math.min(s-i,n.byteLength-i);return tf.call(this,PK(-r[0],t,r)),tf.call(this,n.subarray(i,i+o)),this}function hX(e){const{length:t,valueOffsets:n}=e;return n&&tf.call(this,PK(n[0],t,n)),this.visit(e.children[0])}function uV(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ss.prototype.visitBool=i$t;ss.prototype.visitInt=M0;ss.prototype.visitFloat=M0;ss.prototype.visitUtf8=sNe;ss.prototype.visitBinary=sNe;ss.prototype.visitFixedSizeBinary=M0;ss.prototype.visitDate=M0;ss.prototype.visitTimestamp=M0;ss.prototype.visitTime=M0;ss.prototype.visitDecimal=M0;ss.prototype.visitList=hX;ss.prototype.visitStruct=uV;ss.prototype.visitUnion=r$t;ss.prototype.visitInterval=M0;ss.prototype.visitFixedSizeList=hX;ss.prototype.visitMap=hX;class oNe extends NRe{constructor(t){super(),this._position=0,this._started=!1,this._sink=new RB,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,R0(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return g4(t)?t.then(n=>this.writeAll(n)):y4(t)?yX(this,t):gX(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof RB?this._sink=t:(this._sink=new RB,t&&dOt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&hOt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!iV(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Xa&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Uu&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!iV(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Uu?t instanceof Okt||this._writeRecordBatch(t):t instanceof Xa?this.writeAll(t.batches):IK(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=od.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Ds.RecordBatch?this._recordBatchBlocks.push(new Qg(a,t.bodyLength,this._position)):t.headerType===Ds.DictionaryBatch&&this._dictionaryBlocks.push(new Qg(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=vr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(od.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(dX)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=ss.assemble(t),o=new sl(t.numRows,r,i),a=od.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=ss.assemble(new rr([t])),u=new sl(t.length,s,o),l=new Wd(u,n,r),c=od.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class pX extends oNe{static writeAll(t,n){const r=new pX(n);return g4(t)?t.then(i=>r.writeAll(i)):y4(t)?yX(r,t):gX(r,t)}}class mX extends oNe{static writeAll(t){const n=new mX;return g4(t)?t.then(r=>n.writeAll(r)):y4(t)?yX(n,t):gX(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=rV.encode(new rV(t,Hu.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function gX(e,t){let n=t;t instanceof Xa&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function yX(e,t){var n,r,i,s;return Bh(this,void 0,void 0,function*(){try{for(n=e2(t);r=yield n.next(),!r.done;){const o=r.value;e.write(o)}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}return e.finish()})}function s$t(e,t="stream"){return(t==="stream"?pX:mX).writeAll(e).toUint8Array(!0)}function vX(e,t=1){return(e*t+63&-64||64)/t}function Zg(e,t,n=e.BYTES_PER_ELEMENT){return new e(vX(t,n))}function _X(e){return e instanceof Cr?e:new Cr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function o$t(e){return new rr([_X(e)])}const bX=new TextEncoder;function a$t(e,t,n){const r=bX.encode(n);return e.set(r,t),r.length}function u$t(e,t,n){return bX.encodeInto(n,e.subarray(t)).written}const l$t=bX.encodeInto?u$t:a$t;function Ghe(e,t){const n=Zg(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function c$t(e,t){const n=Zg(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function f$t(e,t){const n=Zg(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function d$t(e,t){const n=Zg(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function h$t(e){const t=JD({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function p$t(e,t,n){const r=Zg(Int32Array,t+1),i=Zg(Uint8Array,3*n);let s=0;return{set(o,a){s+=l$t(i,s,o),r[a+1]=s},data:()=>{const o=vX(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function m$t(e,t){const n=[],r=Zg(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:g$t(e.dictionary,n,o)})}}function g$t(e,t,n){const r=p$t(e,t.length,n);return t.forEach(r.set),o$t(r.data())}function y$t(e,t){const n=Zg(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function v$t(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?Ghe:null;break;case re.Float:r=e.precision>0?Ghe:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?m$t:null;break;case re.Bool:r=c$t;break;case re.Date:r=e.unit?d$t:f$t;break}return r==null?h$t(e):n?y$t(r(e,t),t):r(e,t)}function _$t(e,t){const n=e.length,r=vX(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),_X({type:t,length:n,buffers:[null,i]})}function aNe(e,t,n,r,i=!0){const s=v$t(r,e,i);return t(n,s.set),_X(s.data())}function wX(e){if(e instanceof Pn||e==null)return e;switch(e){case re.Binary:return new wA;case re.Bool:return new EA;case re.DateDay:return new COt;case re.DateMillisecond:case re.Date:return new IOt;case re.Dictionary:return new Xg(new Cw,new Yg);case re.Float16:return new F$e;case re.Float32:return new BK;case re.Float64:case re.Float:return new jK;case re.Int8:return new $K;case re.Int16:return new RK;case re.Int32:case re.Int:return new Yg;case re.Int64:return new NK;case re.IntervalDayTime:return new ROt;case re.Interval:case re.IntervalYearMonth:return new NOt;case re.Null:return new kp;case re.TimeMicrosecond:return new kOt;case re.TimeMillisecond:case re.Time:return new POt;case re.TimeNanosecond:return new $Ot;case re.TimeSecond:return new OOt;case re.Uint8:return new DK;case re.Uint16:return new LK;case re.Uint32:return new MK;case re.Uint64:return new FK;case re.Utf8:return new Cw;default:vn(`Unsupported type code: ${zd(e)}. Use a data type constructor instead?`)}}function b$t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function uNe(e,t){const n=lV();return e(t,n.add),n}function lV(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Pp(t))++e.dates,b$t(t)&&++e.utcdays;else if(Yy(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=lV());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=lV())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return wX(w$t(e))}};return e}function w$t(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:vn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:vn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Ir.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new kw(e.minlen,n):new Pw(n)}else if(e.structs===t){const n=e.struct_prof;return new Vo(Object.keys(n).map(r=>Ir.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;vn("Type inference failure")}}}}function E$t(e,t,n,r,i,s=!0){if(i=wX(i),!i){const o=uNe(r,t);s=o.nulls>0,i=o.type()}return aNe(n,r,t,i,s)}function x$t(e,t,n,r,i,s=!0){i=wX(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=S$t(o);if(u&&a&&Yhe(u.type,i))return u;const l=o.data;if(oI(l)){const c=T$t(l);if(a&&c&&Yhe(c,i))return _$t(l,c);i=i||c,s=!1}if(!i){const c=uNe(r,o);s=c.nulls>0,i=c.type()}return aNe(n,r,o,i,s)}function S$t(e){return e instanceof rr?e:e.vector instanceof rr?e.vector:null}function T$t(e){const n={Float32Array:BK,Float64Array:jK,Int8Array:$K,Int16Array:RK,Int32Array:Yg,Uint8Array:DK,Uint16Array:LK,Uint32Array:MK,BigInt64Array:NK,BigUint64Array:FK}[e.constructor.name];return n?new n:null}function Yhe(e,t){return!e||!t?!0:e.compareTo(t)}function A$t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function C$t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&Yy(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const I$t=()=>vn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function O$t(){try{return Xa}catch{I$t()}}function lNe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=P$t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&vn("Column length mismatch"),a[l]=c});const u=O$t();return new u(a)}function P$t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=ei(n)?n(e):nr(n)?n:null;if(nr(e))return{dataFrom:E$t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:A$t(e,r,i)};if(k$t(e))return{dataFrom:x$t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:C$t(e,r,i)};vn("Unsupported input data type")}function k$t(e){return e&&ei(e.reify)}function $$t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return s$t(lNe(e,r),n)}function R$t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function N$t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Pp(u))++i,R$t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function A4(e,t){return ei(t)?t(e):t||e.columnNames()}function cNe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=N$t(D$t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function D$t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function EX(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function L$t(e,t={}){const n=A4(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Pp(l)?p4(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return EX(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function fNe(e,t={}){if(ei(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Pp(e))return t.utc?p4(e):Vke(e);{const r=JSON.stringify(e,(s,o)=>oI(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function C4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function M$t(e,t={}){const n=A4(e,t.columns),{align:r,format:i}=cNe(e,n,t),s=F$t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(fNe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",_=s[m]&&s[m](g,d,f)||"",b=(v?`text-align: ${v};`+(_?" ":""):"")+_;return`<${m}${b?` style="${b}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return EX(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function F$t(e){return C4(e.style,t=>ei(t)?t:()=>t)}function B$t(e,t=!0,n=!1){return e===void 0||e?t:n}const j$t=e=>Pp(e)?p4(e,!0):e;function z$t(e,t={}){const n=B$t(t.schema),r=t.format||{},i=A4(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||j$t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function U$t(e,t={}){const n=A4(e,t.columns),{align:r,format:i}=cNe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return EX(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(fNe(u,i[l]))+"|"}}),a+`
`}function dNe(e,t){for(const[n,r]of m4(t))e.set(n,r);return e}function V$t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Rp(e,t,n=new Map){return t=Ca(t)?e.columnName(t):t,So(t)?n.set(t,t):nr(t)?t.forEach(r=>Rp(e,r,n)):ei(t)?Rp(e,t(e),n):ta(t)?dNe(n,t):vn(`Invalid column selection: ${zd(t)}`),n}function I4(e,t){return e.toObject=t,e}function hNe(e){return nr(e)?e.map(hNe):e&&e.toObject?e.toObject():e}function Dw(){return I4(e=>e.columnNames(),()=>({all:[]}))}function pNe(...e){return e=e.flat(),I4(t=>{const n=Rp(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:hNe(e)}))}function H$t(e,t){return I4(n=>{let r=Ca(e)?e:n.columnIndex(e),i=Ca(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function q$t(e){return So(e)&&(e=RegExp(V$t(e))),I4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function W$t(e){return oI(e.data)?e.data.constructor:Array}class Uh extends fIt{static from(t,n){return new Uh(pIt(t,n),n)}static new(t,n){if(t instanceof Uh)return t;const r={},i=[];for(const[s,o]of m4(t))r[s]=o,i.push(s);return new Uh(r,n||i)}constructor(t,n,r,i,s,o){C4(t,hIt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Uh(t||this._data,n||(t?null:this._names),o,i!==void 0?i:VIt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=_l(r).groupby(r.groups());return t.forEach(s=>{s=Uh.new(s),s.numRows()!==n&&vn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):vn(`Unrecognized column: ${t}`)}object(t=0){return Khe(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Rp(this,t.columns||Dw()),o=p$e(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),qIt(this,u,a,n)}return a}*[Symbol.iterator](){const t=Khe(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(W$t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=HIt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return lNe(this,t)}toArrowBuffer(t){return $$t(this,t)}toCSV(t){return L$t(this,t)}toHTML(t){return M$t(this,t)}toJSON(t){return z$t(this,t)}toMarkdown(t){return U$t(this,t)}}function Khe(e){let t=e._builder;if(!t){const n=p$e(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class G$t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Wn(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=Y$t[e.type];s&&s(e,t,n)}const TP=(e,t,n)=>{Wn(e.argument,t,n,e)},LB=(e,t,n)=>{Wn(e.left,t,n,e),Wn(e.right,t,n,e)},Xhe=(e,t,n)=>{Wn(e.test,t,n,e),Wn(e.consequent,t,n,e),e.alternate&&Wn(e.alternate,t,n,e)},MB=(e,t,n)=>{Wf(e.params,t,n,e),Wn(e.body,t,n,e)},Qhe=(e,t,n)=>{Wn(e.callee,t,n,e),Wf(e.arguments,t,n,e)},Wf=(e,t,n,r)=>{e.forEach(i=>Wn(i,t,n,r))},Y$t={TemplateLiteral:(e,t,n)=>{Wf(e.expressions,t,n,e),Wf(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Wn(e.object,t,n,e),Wn(e.property,t,n,e)},CallExpression:Qhe,NewExpression:Qhe,ArrayExpression:(e,t,n)=>{Wf(e.elements,t,n,e)},AssignmentExpression:LB,AwaitExpression:TP,BinaryExpression:LB,LogicalExpression:LB,UnaryExpression:TP,UpdateExpression:TP,ConditionalExpression:Xhe,ObjectExpression:(e,t,n)=>{Wf(e.properties,t,n,e)},Property:(e,t,n)=>{Wn(e.key,t,n,e),Wn(e.value,t,n,e)},ArrowFunctionExpression:MB,FunctionExpression:MB,FunctionDeclaration:MB,VariableDeclaration:(e,t,n)=>{Wf(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Wn(e.id,t,n,e),Wn(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Wn(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Wf(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Wn(e.expression,t,n,e)},IfStatement:Xhe,ForStatement:(e,t,n)=>{Wn(e.init,t,n,e),Wn(e.test,t,n,e),Wn(e.update,t,n,e),Wn(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Wn(e.test,t,n,e),Wn(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Wn(e.body,t,n,e),Wn(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Wn(e.discriminant,t,n,e),Wf(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Wn(e.test,t,n,e),Wf(e.consequent,t,n,e)},ReturnStatement:TP,Program:(e,t,n)=>{Wn(e.body[0],t,n,e)}};function mNe(e){delete e.start,delete e.end,delete e.optional}function Jhe(e){mNe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function K$t(e){return Wn(e,null,{Column:Jhe,Constant:Jhe,Default:mNe}),e}function ms(e,t){return t&&t.type===e}function X$t(e){return ms(YIt,e)||ms(GIt,e)}function Q$t(e){return ei(e)?e:()=>e}const J$t="Escaped functions are not valid as rollup or pivot values.";function Z$t(e,t,n){e.aggronly&&vn(J$t);const r="(row,data)=>fn("+h$e(e.table.columnNames())+",$)";return{escape:TK.escape(r,Q$t(t.expr),n)}}var eRt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],gNe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],tRt="-----------------------------------------------------------------------------------------------------------------------------------------------------",yNe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",FB={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},BB="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",nRt={5:BB,"5module":BB+" export import",6:BB+" const class extends export import super"},rRt=/^in(stanceof)?$/,iRt=new RegExp("["+yNe+"]"),sRt=new RegExp("["+yNe+tRt+"]");function cV(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Np(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&iRt.test(String.fromCharCode(e)):t===!1?!1:cV(e,gNe)}function Lw(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&sRt.test(String.fromCharCode(e)):t===!1?!1:cV(e,gNe)||cV(e,eRt)}var Kn=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function xl(e,t){return new Kn(e,{beforeExpr:!0,binop:t})}var Sl={beforeExpr:!0},za={startsExpr:!0},xX={};function Mn(e,t){return t===void 0&&(t={}),t.keyword=e,xX[e]=new Kn(e,t)}var W={num:new Kn("num",za),regexp:new Kn("regexp",za),string:new Kn("string",za),name:new Kn("name",za),privateId:new Kn("privateId",za),eof:new Kn("eof"),bracketL:new Kn("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Kn("]"),braceL:new Kn("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Kn("}"),parenL:new Kn("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Kn(")"),comma:new Kn(",",Sl),semi:new Kn(";",Sl),colon:new Kn(":",Sl),dot:new Kn("."),question:new Kn("?",Sl),questionDot:new Kn("?."),arrow:new Kn("=>",Sl),template:new Kn("template"),invalidTemplate:new Kn("invalidTemplate"),ellipsis:new Kn("...",Sl),backQuote:new Kn("`",za),dollarBraceL:new Kn("${",{beforeExpr:!0,startsExpr:!0}),eq:new Kn("=",{beforeExpr:!0,isAssign:!0}),assign:new Kn("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Kn("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Kn("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:xl("||",1),logicalAND:xl("&&",2),bitwiseOR:xl("|",3),bitwiseXOR:xl("^",4),bitwiseAND:xl("&",5),equality:xl("==/!=/===/!==",6),relational:xl("</>/<=/>=",7),bitShift:xl("<</>>/>>>",8),plusMin:new Kn("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:xl("%",10),star:xl("*",10),slash:xl("/",10),starstar:new Kn("**",{beforeExpr:!0}),coalesce:xl("??",1),_break:Mn("break"),_case:Mn("case",Sl),_catch:Mn("catch"),_continue:Mn("continue"),_debugger:Mn("debugger"),_default:Mn("default",Sl),_do:Mn("do",{isLoop:!0,beforeExpr:!0}),_else:Mn("else",Sl),_finally:Mn("finally"),_for:Mn("for",{isLoop:!0}),_function:Mn("function",za),_if:Mn("if"),_return:Mn("return",Sl),_switch:Mn("switch"),_throw:Mn("throw",Sl),_try:Mn("try"),_var:Mn("var"),_const:Mn("const"),_while:Mn("while",{isLoop:!0}),_with:Mn("with"),_new:Mn("new",{beforeExpr:!0,startsExpr:!0}),_this:Mn("this",za),_super:Mn("super",za),_class:Mn("class",za),_extends:Mn("extends",Sl),_export:Mn("export"),_import:Mn("import",za),_null:Mn("null",za),_true:Mn("true",za),_false:Mn("false",za),_in:Mn("in",{beforeExpr:!0,binop:7}),_instanceof:Mn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Mn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Mn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Mn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},pc=/\r\n?|\n|\u2028|\u2029/,oRt=new RegExp(pc.source,"g");function WE(e){return e===10||e===13||e===8232||e===8233}function vNe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(WE(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var _Ne=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Dl=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,bNe=Object.prototype,aRt=bNe.hasOwnProperty,uRt=bNe.toString,dI=Object.hasOwn||function(e,t){return aRt.call(e,t)},Zhe=Array.isArray||function(e){return uRt.call(e)==="[object Array]"},epe=Object.create(null);function Zm(e){return epe[e]||(epe[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function e0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var lRt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,TA=function(t,n){this.line=t,this.column=n};TA.prototype.offset=function(t){return new TA(this.line,this.column+t)};var O4=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function wNe(e,t){for(var n=1,r=0;;){var i=vNe(e,r,t);if(i<0)return new TA(n,t-r);++n,r=i}}var fV={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},tpe=!1;function cRt(e){var t={};for(var n in fV)t[n]=e&&dI(e,n)?e[n]:fV[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!tpe&&typeof console=="object"&&console.warn&&(tpe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Zhe(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Zhe(t.onComment)&&(t.onComment=fRt(t,t.onComment)),t}function fRt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new O4(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var AA=1,GE=2,SX=4,ENe=8,xNe=16,SNe=32,TX=64,TNe=128,hI=256,AX=AA|GE|hI;function CX(e,t){return GE|(e?SX:0)|(t?ENe:0)}var n3=0,IX=1,tm=2,ANe=3,CNe=4,INe=5,Ts=function(t,n,r){this.options=t=cRt(t),this.sourceFile=t.sourceFile,this.keywords=Zm(nRt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=FB[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Zm(i);var s=(i?i+" ":"")+FB.strict;this.reservedWordsStrict=Zm(s),this.reservedWordsStrictBind=Zm(s+" "+FB.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(pc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=W.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(AA),this.regexpState=null,this.privateNameStack=[]},sh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Ts.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};sh.inFunction.get=function(){return(this.currentVarScope().flags&GE)>0};sh.inGenerator.get=function(){return(this.currentVarScope().flags&ENe)>0&&!this.currentVarScope().inClassFieldInit};sh.inAsync.get=function(){return(this.currentVarScope().flags&SX)>0&&!this.currentVarScope().inClassFieldInit};sh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&hI)return!1;if(t.flags&GE)return(t.flags&SX)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};sh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&TX)>0||n||this.options.allowSuperOutsideMethod};sh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&TNe)>0};sh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};sh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(GE|hI))>0||n};sh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&hI)>0};Ts.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Ts.parse=function(t,n){return new this(n,t).parse()};Ts.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Ts.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Ts.prototype,sh);var Da=Ts.prototype,dRt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Da.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Dl.lastIndex=e,e+=Dl.exec(this.input)[0].length;var t=dRt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Dl.lastIndex=e+t[0].length;var n=Dl.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||pc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Dl.lastIndex=e,e+=Dl.exec(this.input)[0].length,this.input[e]===";"&&e++}};Da.eat=function(e){return this.type===e?(this.next(),!0):!1};Da.isContextual=function(e){return this.type===W.name&&this.value===e&&!this.containsEsc};Da.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Da.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Da.canInsertSemicolon=function(){return this.type===W.eof||this.type===W.braceR||pc.test(this.input.slice(this.lastTokEnd,this.start))};Da.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Da.semicolon=function(){!this.eat(W.semi)&&!this.insertSemicolon()&&this.unexpected()};Da.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Da.expect=function(e){this.eat(e)||this.unexpected()};Da.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var P4=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Da.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Da.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};Da.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Da.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Ot=Ts.prototype;Ot.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==W.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var OX={kind:"loop"},hRt={kind:"switch"};Ot.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Dl.lastIndex=this.pos;var t=Dl.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Np(r,!0)){for(var i=n+1;Lw(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!rRt.test(s))return!0}return!1};Ot.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Dl.lastIndex=this.pos;var e=Dl.exec(this.input),t=this.pos+e[0].length,n;return!pc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(Lw(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Ot.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=W._var,s="let"),r){case W._break:case W._continue:return this.parseBreakContinueStatement(i,r.keyword);case W._debugger:return this.parseDebuggerStatement(i);case W._do:return this.parseDoStatement(i);case W._for:return this.parseForStatement(i);case W._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case W._class:return e&&this.unexpected(),this.parseClass(i,!0);case W._if:return this.parseIfStatement(i);case W._return:return this.parseReturnStatement(i);case W._switch:return this.parseSwitchStatement(i);case W._throw:return this.parseThrowStatement(i);case W._try:return this.parseTryStatement(i);case W._const:case W._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case W._while:return this.parseWhileStatement(i);case W._with:return this.parseWithStatement(i);case W.braceL:return this.parseBlock(!0,i);case W.semi:return this.parseEmptyStatement(i);case W._export:case W._import:if(this.options.ecmaVersion>10&&r===W._import){Dl.lastIndex=this.pos;var o=Dl.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===W._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===W.name&&c.type==="Identifier"&&this.eat(W.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Ot.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(W.semi)||this.insertSemicolon()?e.label=null:this.type!==W.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Ot.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Ot.parseDoStatement=function(e){return this.next(),this.labels.push(OX),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(W._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(W.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Ot.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(OX),this.enterScope(0),this.expect(W.parenL),this.type===W.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===W._var||this.type===W._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===W._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===W._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new P4,u=this.parseExpression(t>-1?"await":!0,a);return this.type===W._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===W._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Ot.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,n2|(n?0:dV),!1,t)};Ot.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(W._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Ot.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(W.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Ot.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(W.braceL),this.labels.push(hRt),this.enterScope(0);for(var t,n=!1;this.type!==W.braceR;)if(this.type===W._case||this.type===W._default){var r=this.type===W._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(W.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Ot.parseThrowStatement=function(e){return this.next(),pc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var pRt=[];Ot.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?SNe:0),this.checkLValPattern(e,t?CNe:tm),this.expect(W.parenR),e};Ot.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===W._catch){var t=this.startNode();this.next(),this.eat(W.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(W._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Ot.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Ot.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(OX),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Ot.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Ot.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Ot.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===W._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Ot.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Ot.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(W.braceL),e&&this.enterScope(0);this.type!==W.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Ot.parseFor=function(e,t){return e.init=t,this.expect(W.semi),e.test=this.type===W.semi?null:this.parseExpression(),this.expect(W.semi),e.update=this.type===W.parenR?null:this.parseExpression(),this.expect(W.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Ot.parseForIn=function(e,t){var n=this.type===W._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(W.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Ot.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(W.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===W._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===W._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(W.comma))break}return e};Ot.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?IX:tm,!1)};var n2=1,dV=2,ONe=4;Ot.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===W.star&&t&dV&&this.unexpected(),e.generator=this.eat(W.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&n2&&(e.id=t&ONe&&this.type!==W.name?null:this.parseIdent(),e.id&&!(t&dV)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?IX:tm:ANe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(CX(e.async,e.generator)),t&n2||(e.id=this.type===W.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&n2?"FunctionDeclaration":"FunctionExpression")};Ot.parseFunctionParams=function(e){this.expect(W.parenL),e.params=this.parseBindingList(W.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Ot.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(W.braceL);this.type!==W.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&mRt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Ot.parseClassElement=function(e){if(this.eat(W.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(W.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===W.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===W.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(W.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===W.parenL||o!=="method"||i||s){var l=!n.static&&r3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Ot.isClassElementNameStart=function(){return this.type===W.name||this.type===W.privateId||this.type===W.num||this.type===W.string||this.type===W.bracketL||this.type.keyword};Ot.parseClassElementName=function(e){this.type===W.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Ot.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&r3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Ot.parseClassField=function(e){if(r3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&r3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(W.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Ot.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(hI|TX);this.type!==W.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Ot.parseClassId=function(e,t){this.type===W.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,tm,!1)):(t===!0&&this.unexpected(),e.id=null)};Ot.parseClassSuper=function(e){e.superClass=this.eat(W._extends)?this.parseExprSubscripts(null,!1):null};Ot.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Ot.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];dI(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function mRt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function r3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Ot.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==W.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Ot.parseExport=function(e,t){if(this.next(),this.eat(W.star))return this.parseExportAllDeclaration(e,t);if(this.eat(W._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==W.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Ot.parseExportDeclaration=function(e){return this.parseStatement(null)};Ot.parseExportDefaultDeclaration=function(){var e;if(this.type===W._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,n2|ONe,!1,e)}else if(this.type===W._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Ot.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),dI(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Ot.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Ot.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Ot.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Ot.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Ot.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(W.braceL);!this.eat(W.braceR);){if(n)n=!1;else if(this.expect(W.comma),this.afterTrailingComma(W.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Ot.parseImport=function(e){return this.next(),this.type===W.string?(e.specifiers=pRt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===W.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Ot.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,tm),this.finishNode(e,"ImportSpecifier")};Ot.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,tm),this.finishNode(e,"ImportDefaultSpecifier")};Ot.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,tm),this.finishNode(e,"ImportNamespaceSpecifier")};Ot.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===W.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(W.comma)))return e;if(this.type===W.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(W.braceL);!this.eat(W.braceR);){if(t)t=!1;else if(this.expect(W.comma),this.afterTrailingComma(W.braceR))break;e.push(this.parseImportSpecifier())}return e};Ot.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===W.string){var e=this.parseLiteral(this.value);return lRt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Ot.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Ot.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var mc=Ts.prototype;mc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};mc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};mc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};mc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==W.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};mc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case W.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(W.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case W.braceL:return this.parseObj(!0)}return this.parseIdent()};mc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(W.comma),t&&this.type===W.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===W.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===W.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};mc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};mc.parseBindingListItem=function(e){return e};mc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(W.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};mc.checkLValSimple=function(e,t,n){t===void 0&&(t=n3);var r=t!==n3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===tm&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(dI(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==INe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};mc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=n3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};mc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=n3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var xc=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},fi={b_stat:new xc("{",!1),b_expr:new xc("{",!0),b_tmpl:new xc("${",!1),p_stat:new xc("(",!1),p_expr:new xc("(",!0),q_tmpl:new xc("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new xc("function",!1),f_expr:new xc("function",!0),f_expr_gen:new xc("function",!0,!1,null,!0),f_gen:new xc("function",!1,!1,null,!0)},YE=Ts.prototype;YE.initialContext=function(){return[fi.b_stat]};YE.curContext=function(){return this.context[this.context.length-1]};YE.braceIsBlock=function(e){var t=this.curContext();return t===fi.f_expr||t===fi.f_stat?!0:e===W.colon&&(t===fi.b_stat||t===fi.b_expr)?!t.isExpr:e===W._return||e===W.name&&this.exprAllowed?pc.test(this.input.slice(this.lastTokEnd,this.start)):e===W._else||e===W.semi||e===W.eof||e===W.parenR||e===W.arrow?!0:e===W.braceL?t===fi.b_stat:e===W._var||e===W._const||e===W.name?!1:!this.exprAllowed};YE.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};YE.updateContext=function(e){var t,n=this.type;n.keyword&&e===W.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};YE.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};W.parenR.updateContext=W.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===fi.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};W.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?fi.b_stat:fi.b_expr),this.exprAllowed=!0};W.dollarBraceL.updateContext=function(){this.context.push(fi.b_tmpl),this.exprAllowed=!0};W.parenL.updateContext=function(e){var t=e===W._if||e===W._for||e===W._with||e===W._while;this.context.push(t?fi.p_stat:fi.p_expr),this.exprAllowed=!0};W.incDec.updateContext=function(){};W._function.updateContext=W._class.updateContext=function(e){e.beforeExpr&&e!==W._else&&!(e===W.semi&&this.curContext()!==fi.p_stat)&&!(e===W._return&&pc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===W.colon||e===W.braceL)&&this.curContext()===fi.b_stat)?this.context.push(fi.f_expr):this.context.push(fi.f_stat),this.exprAllowed=!1};W.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};W.backQuote.updateContext=function(){this.curContext()===fi.q_tmpl?this.context.pop():this.context.push(fi.q_tmpl),this.exprAllowed=!1};W.star.updateContext=function(e){if(e===W._function){var t=this.context.length-1;this.context[t]===fi.f_expr?this.context[t]=fi.f_expr_gen:this.context[t]=fi.f_gen}this.exprAllowed=!0};W.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==W.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Xt=Ts.prototype;Xt.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Xt.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===W.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(W.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Xt.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new P4,r=!0);var a=this.start,u=this.startLoc;(this.type===W.parenL||this.type===W.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===W.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===W.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Xt.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(W.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(W.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Xt.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Xt.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==W._in)&&s>r){var o=this.type===W.logicalOR||this.type===W.logicalAND,a=this.type===W.coalesce;a&&(s=W.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===W.coalesce||a&&(this.type===W.logicalOR||this.type===W.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Xt.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Xt.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===W.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&PNe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===W.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==W._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(W.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function PNe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&PNe(e.expression)}Xt.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Xt.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Xt.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(W.arrow)};Xt.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Xt.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(W.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(W.bracketL);if(l||u&&this.type!==W.parenL&&this.type!==W.backQuote||this.eat(W.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(W.bracketR)):this.type===W.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(W.parenL)){var f=new P4,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(W.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===W.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};Xt.parseExprAtom=function(e,t,n){this.type===W.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case W._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===W.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==W.dot&&this.type!==W.bracketL&&this.type!==W.parenL&&this.unexpected(),this.finishNode(r,"Super");case W._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case W.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(W._function))return this.overrideContext(fi.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(W.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===W.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(W.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case W.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case W.num:case W.string:return this.parseLiteral(this.value);case W._null:case W._true:case W._false:return r=this.startNode(),r.value=this.type===W._null?null:this.type===W._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case W.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case W.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(W.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case W.braceL:return this.overrideContext(fi.b_expr),this.parseObj(!1,e);case W._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case W._class:return this.parseClass(this.startNode(),!1);case W._new:return this.parseNew();case W.backQuote:return this.parseTemplate();case W._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Xt.parseExprAtomDefault=function(){this.unexpected()};Xt.parseExprImport=function(e){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var n=this.parseIdent(!0);if(this.type===W.parenL&&!e)return this.parseDynamicImport(t);if(this.type===W.dot)return t.meta=n,this.parseImportMeta(t);this.unexpected()};Xt.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(W.parenR)){var t=this.start;this.eat(W.comma)&&this.eat(W.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Xt.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Xt.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Xt.parseParenExpression=function(){this.expect(W.parenL);var e=this.parseExpression();return this.expect(W.parenR),e};Xt.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Xt.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new P4,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==W.parenR;)if(l?l=!1:this.expect(W.comma),s&&this.afterTrailingComma(W.parenR,!0)){c=!0;break}else if(this.type===W.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===W.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(W.parenR),e&&this.shouldParseArrow(u)&&this.eat(W.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};Xt.parseParenItem=function(e){return e};Xt.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var gRt=[];Xt.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===W.dot){var t=this.startNodeAt(e.start,e.startLoc);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(W.parenL)?e.arguments=this.parseExprList(W.parenR,this.options.ecmaVersion>=8,!1):e.arguments=gRt,this.finishNode(e,"NewExpression")};Xt.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===W.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===W.backQuote,this.finishNode(n,"TemplateElement")};Xt.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===W.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(W.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(W.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Xt.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===W.name||this.type===W.num||this.type===W.string||this.type===W.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===W.star)&&!pc.test(this.input.slice(this.lastTokEnd,this.start))};Xt.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(W.braceR);){if(r)r=!1;else if(this.expect(W.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(W.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Xt.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(W.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===W.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===W.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(W.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(W.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Xt.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Xt.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===W.colon&&this.unexpected(),this.eat(W.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===W.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==W.comma&&this.type!==W.braceR&&this.type!==W.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===W.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Xt.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(W.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(W.bracketR),e.key;e.computed=!1}return e.key=this.type===W.num||this.type===W.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Xt.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Xt.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(CX(t,r.generator)|TX|(n?TNe:0)),this.expect(W.parenL),r.params=this.parseBindingList(W.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Xt.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(CX(n,!1)|xNe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Xt.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==W.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,INe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Xt.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Xt.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,IX,t?null:n)}};Xt.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(W.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===W.comma?o=null:this.type===W.ellipsis?(o=this.parseSpread(r),r&&this.type===W.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Xt.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Xt.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Xt.parseIdentNode=function(){var e=this.startNode();return this.type===W.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=W.name):this.unexpected(),e};Xt.parsePrivateIdent=function(){var e=this.startNode();return this.type===W.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Xt.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===W.semi||this.canInsertSemicolon()||this.type!==W.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(W.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Xt.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var i3=Ts.prototype;i3.raise=function(e,t){var n=wNe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};i3.raiseRecoverable=i3.raise;i3.curPosition=function(){if(this.options.locations)return new TA(this.curLine,this.pos-this.lineStart)};var F0=Ts.prototype,yRt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};F0.enterScope=function(e){this.scopeStack.push(new yRt(e))};F0.exitScope=function(){this.scopeStack.pop()};F0.treatFunctionsAsVarInScope=function(e){return e.flags&GE||!this.inModule&&e.flags&AA};F0.declareName=function(e,t,n){var r=!1;if(t===tm){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&AA&&delete this.undefinedExports[e]}else if(t===CNe){var s=this.currentScope();s.lexical.push(e)}else if(t===ANe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&SNe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&AA&&delete this.undefinedExports[e],u.flags&AX)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};F0.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};F0.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};F0.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&AX)return t}};F0.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&AX&&!(t.flags&xNe))return t}};var k4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new O4(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},pI=Ts.prototype;pI.startNode=function(){return new k4(this,this.start,this.startLoc)};pI.startNodeAt=function(e,t){return new k4(this,e,t)};function kNe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}pI.finishNode=function(e,t){return kNe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};pI.finishNodeAt=function(e,t,n,r){return kNe.call(this,e,t,n,r)};pI.copyNode=function(e){var t=new k4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var $Ne="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",RNe=$Ne+" Extended_Pictographic",NNe=RNe,DNe=NNe+" EBase EComp EMod EPres ExtPict",LNe=DNe,vRt=LNe,_Rt={9:$Ne,10:RNe,11:NNe,12:DNe,13:LNe,14:vRt},bRt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",wRt={9:"",10:"",11:"",12:"",13:"",14:bRt},npe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",MNe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",FNe=MNe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",BNe=FNe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",jNe=BNe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",zNe=jNe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ERt=zNe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",xRt={9:MNe,10:FNe,11:BNe,12:jNe,13:zNe,14:ERt},UNe={};function SRt(e){var t=UNe[e]={binary:Zm(_Rt[e]+" "+npe),binaryOfStrings:Zm(wRt[e]),nonBinary:{General_Category:Zm(npe),Script:Zm(xRt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var jB=0,rpe=[9,10,11,12,13,14];jB<rpe.length;jB+=1){var TRt=rpe[jB];SRt(TRt)}var bt=Ts.prototype,oh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=UNe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};oh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};oh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};oh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};oh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};oh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};oh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};oh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};oh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};oh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};bt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};bt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};bt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};bt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};bt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};bt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};bt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};bt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};bt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};bt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};bt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};bt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};bt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};bt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};bt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};bt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};bt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return VNe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function VNe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}bt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!VNe(n);)e.advance();return e.pos!==t};bt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};bt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};bt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};bt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=e0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=e0(e.lastIntValue);return!0}return!1};bt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),ARt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function ARt(e){return Np(e,!0)||e===36||e===95}bt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),CRt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function CRt(e){return Lw(e,!0)||e===36||e===95||e===8204||e===8205}bt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};bt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};bt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};bt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};bt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};bt.regexp_eatZero=function(e){return e.current()===48&&!$4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};bt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};bt.regexp_eatControlLetter=function(e){var t=e.current();return HNe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function HNe(e){return e>=65&&e<=90||e>=97&&e<=122}bt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&IRt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function IRt(e){return e>=0&&e<=1114111}bt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};bt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var qNe=0,Dp=1,Ml=2;bt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(ORt(t))return e.lastIntValue=-1,e.advance(),Dp;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Ml&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return qNe};function ORt(e){return e===100||e===68||e===115||e===83||e===119||e===87}bt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Dp}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return qNe};bt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){dI(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};bt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Dp;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Ml;e.raise("Invalid property name")};bt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";WNe(t=e.current());)e.lastStringValue+=e0(t),e.advance();return e.lastStringValue!==""};function WNe(e){return HNe(e)||e===95}bt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";PRt(t=e.current());)e.lastStringValue+=e0(t),e.advance();return e.lastStringValue!==""};function PRt(e){return WNe(e)||$4(e)}bt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};bt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Ml&&e.raise("Negated character class may contain strings"),!0}return!1};bt.regexp_classContents=function(e){return e.current()===93?Dp:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Dp)};bt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};bt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||KNe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};bt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};bt.regexp_classSetExpression=function(e){var t=Dp,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Ml&&(t=Ml);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Ml&&(t=Dp);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Ml&&(t=Ml)}};bt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};bt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Dp:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};bt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Ml&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};bt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};bt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Ml&&(t=Ml);return t};bt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Dp:Ml};bt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&kRt(n)||$Rt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function kRt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function $Rt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}bt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return RRt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function RRt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}bt.regexp_eatClassControlLetter=function(e){var t=e.current();return $4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};bt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};bt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;$4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function $4(e){return e>=48&&e<=57}bt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;GNe(n=e.current());)e.lastIntValue=16*e.lastIntValue+YNe(n),e.advance();return e.pos!==t};function GNe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function YNe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}bt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};bt.regexp_eatOctalDigit=function(e){var t=e.current();return KNe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function KNe(e){return e>=48&&e<=55}bt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!GNe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+YNe(i),e.advance()}return!0};var PX=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new O4(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Nn=Ts.prototype;Nn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new PX(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Nn.getToken=function(){return this.next(),new PX(this)};typeof Symbol<"u"&&(Nn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===W.eof,value:t}}}});Nn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(W.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Nn.readToken=function(e){return Np(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Nn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Nn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=vNe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Nn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!WE(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Nn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&_Ne.test(String.fromCharCode(e)))++this.pos;else break e}}};Nn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Nn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(W.ellipsis)):(++this.pos,this.finishToken(W.dot))};Nn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(W.assign,2):this.finishOp(W.slash,1)};Nn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?W.star:W.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=W.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(W.assign,n+1):this.finishOp(r,n)};Nn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(W.assign,3)}return this.finishOp(e===124?W.logicalOR:W.logicalAND,2)}return t===61?this.finishOp(W.assign,2):this.finishOp(e===124?W.bitwiseOR:W.bitwiseAND,1)};Nn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(W.assign,2):this.finishOp(W.bitwiseXOR,1)};Nn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||pc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(W.incDec,2):t===61?this.finishOp(W.assign,2):this.finishOp(W.plusMin,1)};Nn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(W.assign,n+1):this.finishOp(W.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(W.relational,n))};Nn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(W.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(W.arrow)):this.finishOp(e===61?W.eq:W.prefix,1)};Nn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(W.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(W.assign,3)}return this.finishOp(W.coalesce,2)}}return this.finishOp(W.question,1)};Nn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Np(t,!0)||t===92))return this.finishToken(W.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+e0(t)+"'")};Nn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(W.parenL);case 41:return++this.pos,this.finishToken(W.parenR);case 59:return++this.pos,this.finishToken(W.semi);case 44:return++this.pos,this.finishToken(W.comma);case 91:return++this.pos,this.finishToken(W.bracketL);case 93:return++this.pos,this.finishToken(W.bracketR);case 123:return++this.pos,this.finishToken(W.braceL);case 125:return++this.pos,this.finishToken(W.braceR);case 58:return++this.pos,this.finishToken(W.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(W.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(W.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+e0(e)+"'")};Nn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Nn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(pc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new oh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(W.regexp,{pattern:i,flags:o,value:u})};Nn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function NRt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function XNe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Nn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=XNe(this.input.slice(t,this.pos)),++this.pos):Np(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(W.num,n)};Nn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=XNe(this.input.slice(t,this.pos));return++this.pos,Np(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(W.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Np(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=NRt(this.input.slice(t,this.pos),n);return this.finishToken(W.num,s)};Nn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Nn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(WE(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(W.string,t)};var QNe={};Nn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===QNe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Nn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw QNe;this.raise(e,t)};Nn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===W.template||this.type===W.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(W.dollarBraceL)):(++this.pos,this.finishToken(W.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(W.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(WE(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Nn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(W.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Nn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return e0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return WE(t)?"":String.fromCharCode(t)}};Nn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Nn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(Lw(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Np:Lw)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=e0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Nn.readWord=function(){var e=this.readWord1(),t=W.name;return this.keywords.test(e)&&(t=xX[e]),this.finishToken(t,e)};var DRt="8.11.2";Ts.acorn={Parser:Ts,version:DRt,defaultOptions:fV,Position:TA,SourceLocation:O4,getLineInfo:wNe,Node:k4,TokenType:Kn,tokTypes:W,keywordTypes:xX,TokContext:xc,tokContexts:fi,isIdentifierChar:Lw,isIdentifierStart:Np,Token:PX,isNewLine:WE,lineBreak:pc,lineBreakG:oRt,nonASCIIwhitespace:_Ne};function LRt(e,t){return Ts.parse(e,t)}const kX={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},MRt={ecmaVersion:11},ipe="$",FRt="d",BRt="d1",jRt="d2",io=e=>(t,n)=>n.error(t,e+" not allowed"),zRt=io("Aggregate function"),URt=io("Window function"),VRt="Invalid argument",$X="Invalid column reference",HRt=$X+" (must be input to an aggregate function)",JNe="Invalid function call",qRt="Invalid member expression",WRt="Invalid operator parameter",GRt="Invalid param reference",YRt="Invalid variable reference",KRt="Variable not accessible in operator call",XRt="Unsupported variable declaration",QRt="Unsupported destructuring pattern",ZNe="Table expressions do not support closures",eDe="Use aq.escape(fn) to use a function as-is (including closures)",JRt="use table.params({ name: value }) to define dynamic parameters",ZRt="use aq.addFunction(name, fn) to add new op functions",eNt=`
Note: ${ZNe}. ${eDe}, or ${JRt}.`,tDe=`
Note: ${ZNe}. ${eDe}, or ${ZRt}.`,tNt=`The ${f$e} method is not valid in multi-table expressions.`;function nNt(e,t){const n=rNt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,X$t(r)?(sNt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=BRt),e.scope.add(e.tuple2=jRt),e.scope.add(e.$param=ipe)):(e.scope.add(e.tuple=FRt),e.scope.add(e.$param=ipe)),Wn(r,e,RX),e.root}function rNt(e){try{const t=e.field?iNt(e):nr(e)?zd(e):e;return LRt(`expr=(${t})`,MRt).body[0].expression.right}catch{vn(`Expression parse error: ${e+""}`)}}function iNt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const RX={FunctionDeclaration:io("Function definitions"),ForStatement:io("For loops"),ForOfStatement:io("For-of loops"),ForInStatement:io("For-in loops"),WhileStatement:io("While loops"),DoWhileStatement:io("Do-while loops"),AwaitExpression:io("Await expressions"),ArrowFunctionExpression:io("Function definitions"),AssignmentExpression:io("Assignments"),FunctionExpression:io("Function definitions"),NewExpression:io('Use of "new"'),UpdateExpression:io("Update expressions"),VariableDeclarator(e,t){mV(e.id,t)},Identifier(e,t,n){iDe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,YRt,eNt)},CallExpression(e,t){const n=nDe(e.callee),r=u$e(n)||l$e(n);if(r){if((t.join||t.aggregate===!1)&&xK(n)&&zRt(e,t),(t.join||t.window===!1)&&SK(n)&&URt(e,t),t.$op=1,t.ast)pV(e,n,t),e.arguments.forEach(i=>Wn(i,t,hV));else{const i=t.op(oNt(t,r,n,e.arguments));Object.assign(e,{type:r$e,name:i.id})}return t.$op=0,!1}else a$e(n)?pV(e,n,t):t.error(e,JNe,tDe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!ms(Sg,r))return;const{name:s}=r;if(rDe(e)&&ms(Sg,i)&&uf(kX,i.name)){aDe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return spe(e,o,t,sDe,n);if(s===t.$param)return spe(e,o,t,uNt);t.paramsRef.has(s)?CA(e,t.paramsRef.get(s)):t.columnRef.has(s)?oDe(r,s,t,e):uf(t.params,s)&&CA(r,s)}};function spe(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(ms(UE,s))a=s.value;else try{Wn(s,n,RX,e),a=n.param(s)}catch{n.error(e,qRt)}return r(e,a,t,n,i),!1}const hV={...RX,VariableDeclarator:io("Variable declaration in operator call"),Identifier(e,t,n){iDe(e,t,n)&&t.error(e,KRt)},CallExpression(e,t){const n=nDe(e.callee);a$e(n)?pV(e,n,t):t.error(e,JNe,tDe)}};function sNt(e,t){e.generator&&io("Generator functions")(e,t),e.async&&io("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(cS(t,n[0],"tuple1",i(1)),r>1&&cS(t,n[1],"tuple2",i(2)),r>2&&cS(t,n[2],"$param",s)):(cS(t,n[0],"tuple",i(0)),r>1&&cS(t,n[1],"$param",s))),t.root=e.body}function cS(e,t,n,r){ms(Sg,t)?(e.scope.add(t.name),e[n]=t.name):ms(t$e,t)&&t.properties.forEach(i=>{const s=ms(Sg,i.key)?i.key.name:ms(UE,i.key)?i.key.value:e.error(i,VRt);ms(Sg,i.value)||e.error(i.value,QRt),r(i.value.name,s)})}function oNt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Wn(u,e,hV),i.push(e.field(u))):l<a?(Wn(u,e,hV),s.push(e.param(u))):e.error(u,WRt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function nDe(e){return ms(Sg,e)?e.name:ms(e$e,e)?rDe(e)?aNt(e.property.name):e.property.name:null}function rDe(e){return ms(Sg,e.object)&&e.object.name==="Math"}function aNt(e){return e==="max"?"greatest":e==="min"?"least":e}function iDe(e,t,n){const{name:r}=e;if(!(ms(e$e,n)&&n.property===e)){if(!(ms(n$e,n)&&n.key===e))if(t.paramsRef.has(r))CA(e,t.paramsRef.get(r));else if(t.columnRef.has(r))oDe(e,r,t,n);else if(uf(t.params,r))CA(e,r);else if(uf(kX,r))aDe(e,r);else return!0}}function sDe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,$X),r.aggronly&&!r.$op&&r.error(e,HRt),c$e(e,t,n,o,i)}function oDe(e,t,n,r){const[i,s]=n.columnRef.get(t);sDe(e,i,s,n,r)}function uNt(e,t,n,r){r.params&&!uf(r.params,t)&&r.error(e,GRt),CA(e,t)}function CA(e,t){e.type=ZIt,e.name=t}function aDe(e,t){e.type=XIt,e.name=t,e.raw=kX[t]}function pV(e,t,n){if(t===f$e){const r=n.table;r||n.error(e,tNt),d$e(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Ca(s)?r.columnName(s):s;return r.column(o)||n.error(i,$X),o}):r.columnNames())}else e.callee={type:JIt,name:t}}function mV(e,t){ms(Sg,e)?t.scope.add(e.name):ms(WIt,e)?e.elements.forEach(n=>mV(n,t)):ms(t$e,e)?e.properties.forEach(n=>mV(n.value,t)):t.error(e.id,XRt)}const lNt={[aI]:1,[r$e]:1};function vu(e,t={}){const n=t.generate||FD,r=t.compiler||TK,i=fNt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=cNt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return ms(UE,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?K$t(g):f(n(g),i));u.push(y),lNt[g.type]&&y!==g&&ta(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,_=m.end-6,b=String(d.spec).slice(v,_);vn(`${g}: "${b}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of m4(e))d.value(m+"",g.escape?Z$t(d,g,i):nNt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function cNt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function fNt(e){return(e.table?zB(e.table):e.join?{...zB(e.join[1]),...zB(e.join[0])}:{})||{}}function zB(e){return e&&ei(e.params)?e.params():{}}const uDe="Expr",Sc="ExprList",lDe="ExprNumber",tT="ExprObject",sb="JoinKeys",s3="JoinValues",Il="Options",NX="OrderKeys",Em="SelectionList",ky="TableRef",ob="TableRefList",dNt="Descending",hNt="Query",pNt="Selection",mNt="Verb",gNt="Window";function R4(e,t){return e&&e.expr?new ope({...e,...t}):new ope(t,e)}class ope{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...ei(this.expr)?{func:!0}:{}}}}function yNt(e){return R4(e,{desc:!0})}function z1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return R4(e,t?{expr:t,...r}:r)}function vNt(e,t,n){return R4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function _Nt(e){const t=n=>n;return t.toString=()=>e,t}function ape(e,t){return t=t&&ei(t.query)?t.query():t,t&&ei(t.evaluate)?t.evaluate(null,e):e(t)}function cDe(e){return ta(e)&&(nr(e.all)||nr(e.matches)||nr(e.not)||nr(e.range))}function IA(e){return e&&ei(e.toObject)?e.toObject():ei(e)?{expr:String(e),func:!0}:nr(e)?e.map(IA):ta(e)?C4(e,t=>IA(t)):e}function DX(e){return nr(e)?e.map(DX):ta(e)?nr(e.verbs)?MX.from(e):nr(e.all)?Dw():nr(e.range)?H$t(...e.range):nr(e.match)?q$t(RegExp(...e.match)):nr(e.not)?pNe(e.not.map(IA)):bNt(e):e}function bNt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=z1(n):e.func===!0&&(t=n=_Nt(n)),ta(e.window)){const{frame:r,peers:i}=e.window;t=n=vNt(n,r,i)}e.desc===!0&&(t=yNt(n))}return e===t?C4(e,r=>DX(r)):t}function wNt(e){return nr(e)?e.map(ENt):e}function ENt(e){const t=[];return gu(e).forEach(n=>{Ca(n)?t.push(n):So(n)?t.push(z1(n,null)):ta(n)&&n.expr||ei(n)?t.push(n):vn(`Invalid key value: ${n+""}`)}),t}function xNt(e){return nr(e)?e.map(SNt):e}function SNt(e,t){return t<2?gu(e):e}function TNt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(ta(r)&&!ei(r))for(const i in r)t.push(r[i]);else n=Ca(r)?r:So(r)?z1(n):ei(r)?n:vn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const ANt={[uDe]:pDe,[Sc]:Mw,[lDe]:$Nt,[tT]:t0,[sb]:RNt,[s3]:NNt,[NX]:Mw,[Em]:PNt};function CNt(e,t,n){return t===ky?upe(e):t===ob?e.map(upe):fDe(IA(e),t,n)}function fDe(e,t,n){return t===Il?e&&INt(e,n):ANt[t](e)}function INt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?fDe(i,t[r]):i}return n}function ONt(e,t){return vu({expr:e},{...t,ast:!0}).exprs[0]}function LX(e){return{type:aI,name:e}}function dDe(e){return{type:aI,index:e}}function t0(e,t){if(So(e))return ONt(e,t);if(e.expr){let n;if(e.field===!0?n=LX(e.expr):e.func===!0&&(n=t0(e.expr,t)),n)return e.desc&&(n={type:dNt,expr:n}),e.window&&(n={type:gNt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...t0(e[n],t),as:n}))}function hDe(e){const t=pNt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:Mw(e.not)}:e.range?{type:t,operator:"range",arguments:Mw(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:vn("Invalid input")}function PNt(e){return gu(e).map(kNt).flat()}function kNt(e){return cDe(e)?hDe(e):Ca(e)?dDe(e):So(e)?LX(e):ta(e)?Object.keys(e).map(t=>({type:aI,name:t,as:e[t]})):vn("Invalid input")}function pDe(e){return cDe(e)?hDe(e):Ca(e)?dDe(e):So(e)?LX(e):ta(e)?t0(e):vn("Invalid input")}function Mw(e){return gu(e).map(pDe).flat()}function $Nt(e){return Ca(e)?e:t0(e)}function RNt(e){return nr(e)?e.map(Mw):t0(e,{join:!0})}function NNt(e){return nr(e)?e.map((t,n)=>n<2?Mw(t):t0(t,{join:!0})):t0(e,{join:!0})}function upe(e){return e&&ei(e.toAST)?e.toAST():e}class mDe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===sb?wNt(a):o===s3?xNt(a):o===NX?TNt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=gV[t.verb],r=(n.schema||[]).map(({name:i})=>DX(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===ky?ape(n,o):s===ob?o.map(a=>ape(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=IA(this[n])}),t}toAST(){const t={type:mNt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=CNt(this[n],r,i)}),t}}function Ar(e,t){return Object.assign((...n)=>new mDe(e,t,n),{schema:t})}const gV={count:Ar("count",[{name:"options",type:Il}]),derive:Ar("derive",[{name:"values",type:tT},{name:"options",type:Il,props:{before:Em,after:Em}}]),filter:Ar("filter",[{name:"criteria",type:tT}]),groupby:Ar("groupby",[{name:"keys",type:Sc}]),orderby:Ar("orderby",[{name:"keys",type:NX}]),relocate:Ar("relocate",[{name:"columns",type:Em},{name:"options",type:Il,props:{before:Em,after:Em}}]),rename:Ar("rename",[{name:"columns",type:Em}]),rollup:Ar("rollup",[{name:"values",type:tT}]),sample:Ar("sample",[{name:"size",type:lDe},{name:"options",type:Il,props:{weight:uDe}}]),select:Ar("select",[{name:"columns",type:Em}]),ungroup:Ar("ungroup"),unorder:Ar("unorder"),reify:Ar("reify"),dedupe:Ar("dedupe",[{name:"keys",type:Sc,default:[]}]),impute:Ar("impute",[{name:"values",type:tT},{name:"options",type:Il,props:{expand:Sc}}]),fold:Ar("fold",[{name:"values",type:Sc},{name:"options",type:Il}]),pivot:Ar("pivot",[{name:"keys",type:Sc},{name:"values",type:Sc},{name:"options",type:Il}]),spread:Ar("spread",[{name:"values",type:Sc},{name:"options",type:Il}]),unroll:Ar("unroll",[{name:"values",type:Sc},{name:"options",type:Il,props:{drop:Sc}}]),lookup:Ar("lookup",[{name:"table",type:ky},{name:"on",type:sb},{name:"values",type:Sc}]),join:Ar("join",[{name:"table",type:ky},{name:"on",type:sb},{name:"values",type:s3},{name:"options",type:Il}]),cross:Ar("cross",[{name:"table",type:ky},{name:"values",type:s3},{name:"options",type:Il}]),semijoin:Ar("semijoin",[{name:"table",type:ky},{name:"on",type:sb}]),antijoin:Ar("antijoin",[{name:"table",type:ky},{name:"on",type:sb}]),concat:Ar("concat",[{name:"tables",type:ob}]),union:Ar("union",[{name:"tables",type:ob}]),intersect:Ar("intersect",[{name:"tables",type:ob}]),except:Ar("except",[{name:"tables",type:ob}])};let MX=class gDe extends zke{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new gDe(t.map(mDe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return lpe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return lpe(this,"toAST",{type:hNt})}};function lpe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function DNt(e,t){return new MX(e._verbs.concat(t),e._params,e._table)}for(const e in gV){const t=gV[e];MX.prototype["__"+e]=function(n,...r){return DNt(n,t(...r))}}function KE(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function LNt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function FX(e,t){const n=_l();return t.forEach((r,i)=>{const s=So(r)?r:i;if(s){const o=e.column(i)||vn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function yDe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||vn("relocate requires a before or after option."),i&&s&&vn("relocate accepts only one of the before or after options."),t=Rp(e,t);const o=[...Rp(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),FX(e,u)}function mI(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function BX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function MNt(e,t=0,n=e.length){let r=n?e[t++]:Xn;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function FNt(e,t=0,n=e.length){let r=n?e[t++]:Xn;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function AP(e){return _A(e)?e:+e}function BNt(e,t){const n=e.length;if(!n)return Xn;if((t=+t)<=0||n<2)return AP(e[0]);if(t>=1)return AP(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=AP(e[i]);return _A(s)?s:s+(AP(e[i+1])-s)*(r-i)}class jNt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:MNt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:FNt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(BX)),BNt(this._sorted,t)}}const o3=(e,t,n)=>KE(t,"{"+mI(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function zNt(e,t){const{ops:n,output:r}=UNt(e,t),i=e[0].fields,s=i.length,o=s===0?jX:s===1?VNt:s===2?HNt:vn("Unsupported field count: "+s);return new o(i,n,r,t)}function UNt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=u$e(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class jX extends G$t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new jNt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class VNt extends jX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=o3(n,s,"add"),this._rem=o3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,qc(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,qc(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class HNt extends jX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=o3(n,s,"add"),this._rem=o3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,qc(i)&&qc(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,qc(i)&&qc(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Mv(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=XE(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function XE(e,t,n){if(!t.length)return n;const r=vDe(t),i=e.groups(),s=i?i.size:1;return n=n||h4(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=bDe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=_De(e,o);o.write(a,n,0)}),n}function vDe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(zNt(r[i],t));return n}function _De(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function bDe(e,t,n){const{keys:r,size:i}=n,s=h4(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function wDe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function EDe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const cpe=EDe(BX);function qNt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?KE(["w","r","k"],"{"+mI(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(_=>_.init()):null;for(let _=0;_<f;++_)r[_].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,_=p.i0,b=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=cpe.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=cpe.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const w=i[E],x=a[E];for(let S=_;S<p.i0;++S)w.rem(x,s[S],e);for(let S=b;S<p.i1;++S)w.add(x,s[S],e);w.write(x,u,l)}return h(p,u,l),u}};return p}const WNt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),GNt=e=>!!e.peers;function YNt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=l$e(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function KNt(e,t,n,r={},i){const s=e.data(),o=XNt(i,s),a=o.length,u=KE(["r","d","op"],"{"+mI(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=QNt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function XNt(e,t){const n={};return e.forEach(r=>{const i=WNt(r),s=GNt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});xK(r.name)?a.push(r):u.push(YNt(r))}),Object.values(n).map(r=>qNt(t,r.frame,r.peers,r.winOps,vDe(r.aggOps,r.frame[0]!=null?-1:1)))}function QNt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function JNt(e){return SK(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function zX(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=_l(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=ZNt(r),c=e.isGrouped()?e.groups().size:1,f=XE(e,u,h4(r.length,()=>Array(c)));return l.length?KNt(e,a,n,f,l):eDt(e,a,n,f),e.create(o)}function ZNt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(JNt(s)?n:t).push(s)}return[t,n]}function eDt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function tDt(e,t,n={}){const r=zX(e,vu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:yDe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function nDt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const CP=2147483648,rDt=4294967295;class xDe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&CP>>>t}set(t){this._bits[t>>5]|=CP>>>t}clear(t){this._bits[t>>5]&=~(CP>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&rDt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=CP>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function iDt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new xDe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function sDt(e,t){const n=vu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=zX(e,n,{drop:!0}).column("p");r=s=>i[s]}return iDt(e,r)}function SDe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Mv(e,r,n),l=_l(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(b=>{if(!a.has(b)){const E=l.add(b,[]);c.has(b)||(f.push(e.column(b)),d.push(E))}}),t.forEach(b=>{a.has(b)||(l.has(b)||l.add(b,[]),h.push(l.data[b]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(b,E)=>{for(let w=0;w<g;++w)d[w].length=m+E,d[w].fill(f[w].get(b),m,m+E)},_=p?(b,E)=>{for(let w=0;w<E;++w)p[b+w]=w}:()=>{};if(y===1){const b=u[0],E=h[0];e.scan((w,x)=>{const S=gu(b(w,x)),I=Math.min(S.length,s);v(w,I);for(let C=0;C<I;++C)E[m+C]=S[C];_(m,I),m+=I})}else e.scan((b,E)=>{let w=0;const x=u.map(S=>{const I=gu(S(b,E));return w=Math.min(Math.max(w,I.length),s),I});v(b,w);for(let S=0;S<y;++S){const I=h[S],C=x[S];for(let O=0;O<w;++O)I[m+O]=C[O]}_(m,w),m+=w});return e.create(l.new())}function oDt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Mv(e,r,n);return SDe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function lf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Ca(o)?t.columnName(o):o,So(o)?i.set(o,z1(o)):ei(o)?Rp(t,o).forEach(s):ta(o)?dNe(i,o):vn(`Invalid ${e} value: ${o+""}`)};return gu(n).forEach(s),r.preparse&&r.preparse(i),vu(i,{table:t,...r})}function aDt(e,t,n){return oDt(e,lf("fold",e,t),n)}function fpe(e,t,n,r){const i=n&&n.length;return uDt(i?lDt(e,n,r):e,t,i)}function uDt(e,{names:t,exprs:n,ops:r},i){const s=Mv(e,r,n),o=i?null:_l(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=qc(p)?p:d(h)})}),i?e:e.create(o)}function lDt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=BD(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=_l(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=BD(o.map((p,m)=>g=>g[m])),h=KE("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),dpe(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else dpe(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function dpe(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function UX(e,{names:t,exprs:n,ops:r}){const i=_l(),s=e.groups();return s&&wDe(i,s),cDt(t,n,s,XE(e,r),i),e.create(i.new())}function cDt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function fDt(e,t,n={}){if(t=vu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:vn(`Invalid impute column ${zd(r)}`)),n.expand){const r={preparse:dDt,aggronly:!0},i=lf("impute",e,n.expand,r),s=UX(e.ungroup(),i);return fpe(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return fpe(e,t)}function dDt(e){e.forEach((t,n)=>t.field?e.set(n,Xke(t+"")):0)}function hDt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function TDe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function pDt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function mDt(e,t){const n=["i","a","j","b"];return KE(n,"{"+mI(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function gDt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=_l(),g=Array(p),y=Array(p);for(let b=0;b<r.length;++b)g[b]=m.add(r[b],[]),y[b]=i[b];const v=mDt(g,y);if((nr(n)?vDt:yDt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let b=0;b<u;++b)l[b]||v(a[b],o,-1,c);if(s.right)for(let b=0;b<d;++b)h[b]||v(-1,o,f[b],c);return e.create(m.new())}function yDt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function vDt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,_=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,_=(w,x,S,I)=>e(S,I,w,x));const b=pDt(v,m,g),E=p.length;for(let w=0;w<E;++w){const x=p[w],S=b.get(d(x,f));if(S){const I=S.length;for(let C=0;C<I;++C){const O=S[C];_(x,f,v[O],m),y[O]=1}h[w]=1}}}function a3(e,t,n){const r=new Map;gu(n).forEach((s,o)=>{s=Ca(s)?t.columnName(s):s,So(s)?r.set(o,z1(s)):ei(s)||ta(s)&&s.expr?r.set(o,s):vn(`Invalid ${e} key value: ${s+""}`)});const i=vu(r,{table:t,aggregate:!1,window:!1});return BD(i.exprs,!0)}function _Dt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function VX(e,t,n){if(n)So(n)?n=[n,n]:nr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=_Dt(e.columnNames(),t.columnNames());r.length||vn("Natural join requires shared column names."),n=[r,r]}return n}function ADe(e,t,n,r){return n.length!==r.length&&vn("Mismatched number of join keys"),[a3("join",e,n),a3("join",t,r)]}const bDt={aggregate:!1,window:!1},wDt={...bDt,index:1};function hpe(e,t,n,r,i={}){n=VX(e,t,n);const s={join:[e,t]};let o;if(nr(n)){const[a,u]=n.map(gu);o=ADe(e,t,a,u),r||(r=EDt(e,a,u,i))}else o=vu({on:n},s).exprs[0],r||(r=[Dw(),Dw()]);return gDt(e,t,o,xDt(e,t,r,s,i&&i.suffix),i)}function EDt(e,t,n,r){const i=[];t.forEach((o,a)=>So(o)&&o===n[a]?i.push(o):0);const s=pNe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${zd(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,Dw()]:[Dw(),s]}function xDt(e,t,n,r,i=[]){if(nr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=lf("join",e,n[0],r)),u--&&(o=lf("join",t,n[1],wDt)),u--&&(a=vu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(ppe(s.names,l,i[0]||"_1"),ppe(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return vu(n,r)}function ppe(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function SDt(e,t,n,r={}){const i=new xDe(e.totalRows());return(nr(n)?TDt:ADt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function TDt(e,t,n,[r,i]){const s=TDe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function ADt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function mpe(e,t,n,r){n=VX(e,t,n);const i=nr(n)?ADe(e,t,...n.map(gu)):vu({on:n},{join:[e,t]}).exprs[0];return SDt(e,t,i,r)}function CDt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=_l(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(Xn)));const l=TDe(t,r),c=KE(["lr","rr","data"],"{"+mI(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Mv(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function IDt(e,t,n,r){return n=VX(e,t,n),CDt(e,t,[a3("lookup",e,n[0]),a3("lookup",t,n[1])],lf("lookup",t,r))}const yV=(e,t)=>e??t;function ODt(e,t,n,r={}){const{keys:i,keyColumn:s}=PDt(e,t,r),o=yV(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>XE(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(kDt(n,a,e.groups(),u))}function PDt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=yV(n.sort,!0),s=yV(n.keySeparator,"_"),o=Mv(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=XE(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function kDt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=_l(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&wDe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function $Dt(e,t,n,r){return ODt(e,lf("fold",e,t),lf("fold",e,n,{preparse:RDt,aggronly:!0}),r)}function RDt(e){e.forEach((t,n)=>t.field?e.set(n,Gke(t+"")):0)}function NDt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),FX(e,Rp(e,t,n))}function gpe(e,t){return UX(e,vu(t,{table:e,aggronly:!0,window:!1}))}function DDt(e,t,n,r){return(t?r?MDt:LDt:r?BDt:FDt)(e.length,e,n,r)}function LDt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*zE()|0];return t}function MDt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=EDe(BX).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*zE())];return t}function FDt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*zE();s<e&&(t[s|0]=n[i])}return t}function BDt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(zE())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function jDt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=zE()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function zDt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):DDt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&jDt(u),e.reify(u)}function UDt(e,t,n={}){return zDt(e,VDt(e,t),HDt(e,n.weight),n)}const CDe=e=>t=>e.get(t)||0;function VDt(e,t){return Ca(t)?()=>t:CDe(UX(e,vu({size:t},{table:e,window:!1})).column("size"))}function HDt(e,t){return t==null?null:(t=Ca(t)?e.columnName(t):t,CDe(So(t)?e.column(t):zX(e,vu({w:t},{table:e}),{drop:!0}).column("w")))}function qDt(e,t){return FX(e,Rp(e,t))}function WDt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Mv(e,r,n),l=_l(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=GDt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function GDt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=gu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(Xn));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function YDt(e,t,n){return WDt(e,lf("spread",e,t),n)}function KDt(e,t){return e.concat(t).dedupe()}function XDt(e,t,n){return SDe(e,lf("unroll",e,t),n&&n.drop?{...n,drop:lf("unroll",e,n.drop).names}:n)}function QDt(e,t){return e.create({groups:JDt(e,t)})}function JDt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Mv(e,r,n);const o=BD(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function ZDt(e,t){return QDt(e,lf("groupby",e,t))}function e3t(e,t){return e.create({order:t})}const t3t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function n3t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=vu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([FD(p,{index:"a",op:o}),FD(p,{index:"b",op:a})])},window:!1}),l=XE(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=t3t(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function r3t(e,t){return e3t(e,i3t(e,t))}function i3t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(ta(o)&&!ei(o))for(const a in o)i(o[a]);else i(Ca(o)?z1(s,e.columnName(o)):So(o)?z1(s):ei(o)?s:vn(`Invalid orderby field: ${s+""}`))}),n3t(e,r)}function s3t(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=_l();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>Xn};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function o3t(e,t){const n=_l(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?bDe(e,t,r):[_De(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function a3t(e){return e.isGrouped()?e.create({groups:null}):e}function u3t(e){return e.isOrdered()?e.create({order:null}):e}const l3t={__antijoin:(e,t,n)=>mpe(e,t,n,{anti:!0}),__count:(e,t={})=>gpe(e,{[t.as||"count"]:Yke()}),__cross:(e,t,n,r)=>hpe(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:s3t,__dedupe:LNt,__derive:tDt,__except:nDt,__filter:sDt,__fold:aDt,__impute:fDt,__intersect:hDt,__join:hpe,__lookup:IDt,__pivot:$Dt,__relocate:yDe,__rename:NDt,__rollup:gpe,__sample:UDt,__select:qDt,__semijoin:mpe,__spread:YDt,__union:KDt,__unroll:XDt,__groupby:ZDt,__orderby:r3t,__ungroup:a3t,__unorder:u3t,__reduce:o3t};Object.assign(Uh.prototype,l3t);function c3t(e,t){return Uh.from(e,t)}function UB(e){return R4(e,{escape:!0,toString(){vn("Escaped values can not be serialized.")}})}Uh.prototype;function f3t(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let IP;const d3t=new Uint8Array(16);function h3t(){if(!IP&&(IP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!IP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return IP(d3t)}const eo=[];for(let e=0;e<256;++e)eo.push((e+256).toString(16).slice(1));function p3t(e,t=0){return(eo[e[t+0]]+eo[e[t+1]]+eo[e[t+2]]+eo[e[t+3]]+"-"+eo[e[t+4]]+eo[e[t+5]]+"-"+eo[e[t+6]]+eo[e[t+7]]+"-"+eo[e[t+8]]+eo[e[t+9]]+"-"+eo[e[t+10]]+eo[e[t+11]]+eo[e[t+12]]+eo[e[t+13]]+eo[e[t+14]]+eo[e[t+15]]).toLowerCase()}const m3t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ype={randomUUID:m3t};function vpe(e,t,n){if(ype.randomUUID&&!t&&!e)return ype.randomUUID();e=e||{};const r=e.random||(e.rng||h3t)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return p3t(r)}let Ad=class{static get(){let t=vpe();for(;this.ids.has(t);)t=vpe();return this.ids.set(t,!0),t}};Ad.ids=new Map;function Cd(e){return"parent"in e}function g3t(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Ad.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Ad.get(),createdOn:Date.now(),val:r}]:[];return{id:Ad.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function y3t({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Ad.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Ad.get(),createdOn:Date.now(),val:s}]:[];return{id:Ad.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function ki(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=A3t[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function U1(e){return!!e&&!!e[ol]}function n0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===C3t}(e)||Array.isArray(e)||!!e[r2]||!!(!((t=e.constructor)===null||t===void 0)&&t[r2])||N4(e)||D4(e))}function Fw(e,t,n){n===void 0&&(n=!1),r0(e)===0?(n?Object.keys:KX)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function r0(e){var t=e[ol];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:N4(e)?2:D4(e)?3:0}function OA(e,t){return r0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function f$(e,t){return r0(e)===2?e.get(t):e[t]}function IDe(e,t,n){var r=r0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function v3t(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function N4(e){return S3t&&e instanceof Map}function D4(e){return T3t&&e instanceof Set}function wy(e){return e.o||e.t}function HX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=I3t(e);delete t[ol];for(var n=KX(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function qX(e,t){return t===void 0&&(t=!1),WX(e)||U1(e)||!n0(e)||(r0(e)>1&&(e.set=e.add=e.clear=e.delete=_3t),Object.freeze(e),t&&Fw(e,function(n,r){return qX(r,!0)},!0)),e}function _3t(){ki(2)}function WX(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Id(e){var t=wV[e];return t||ki(18,e),t}function b3t(e,t){wV[e]||(wV[e]=t)}function _pe(){return{}.NODE_ENV==="production"||Bw||ki(0),Bw}function VB(e,t){t&&(Id("Patches"),e.u=[],e.s=[],e.v=t)}function u3(e){vV(e),e.p.forEach(w3t),e.p=null}function vV(e){e===Bw&&(Bw=e.l)}function bpe(e){return Bw={p:[],l:Bw,h:e,m:!0,_:0}}function w3t(e){var t=e[ol];t.i===0||t.i===1?t.j():t.O=!0}function HB(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Id("ES5").S(t,e,r),r?(n[ol].P&&(u3(t),ki(4)),n0(e)&&(e=l3(t,e),t.l||c3(t,e)),t.u&&Id("Patches").M(n[ol].t,e,t.u,t.s)):e=l3(t,n,[]),u3(t),t.u&&t.v(t.u,t.s),e!==YX?e:void 0}function l3(e,t,n){if(WX(t))return t;var r=t[ol];if(!r)return Fw(t,function(s,o){return wpe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return c3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=HX(r.k):r.o;Fw(r.i===3?new Set(i):i,function(s,o){return wpe(e,r,i,s,o,n)}),c3(e,i,!1),n&&e.u&&Id("Patches").R(r,n,e.u,e.s)}return r.o}function wpe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&ki(5),U1(i)){var o=l3(e,i,s&&t&&t.i!==3&&!OA(t.D,r)?s.concat(r):void 0);if(IDe(n,r,o),!U1(o))return;e.m=!1}if(n0(i)&&!WX(i)){if(!e.h.F&&e._<1)return;l3(e,i),t&&t.A.l||c3(e,i)}}function c3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&qX(t,n)}function qB(e,t){var n=e[ol];return(n?wy(n):e)[t]}function Epe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function _V(e){e.P||(e.P=!0,e.l&&_V(e.l))}function WB(e){e.o||(e.o=HX(e.t))}function bV(e,t,n){var r=N4(t)?Id("MapSet").N(t,n):D4(t)?Id("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:_pe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=EV;o&&(u=[a],l=nT);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Id("ES5").J(t,n);return(n?n.A:_pe()).p.push(r),r}function E3t(e){return U1(e)||ki(22,e),function t(n){if(!n0(n))return n;var r,i=n[ol],s=r0(n);if(i){if(!i.P&&(i.i<4||!Id("ES5").K(i)))return i.t;i.I=!0,r=xpe(n,s),i.I=!1}else r=xpe(n,s);return Fw(r,function(o,a){i&&f$(i.t,o)===a||IDe(r,o,t(a))}),s===3?new Set(r):r}(e)}function xpe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return HX(e)}function x3t(){function e(r){if(!n0(r))return r;if(Array.isArray(r))return r.map(e);if(N4(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(D4(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return OA(r,r2)&&(i[r2]=r[r2]),i}function t(r){return U1(r)?e(r):r}var n="add";b3t("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=r0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||ki(24),typeof u=="function"&&f==="prototype"&&ki(24),typeof(u=f$(u,f))!="object"&&ki(15,o.join("/"))}var d=r0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:ki(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:ki(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;Fw(a.D,function(h,p){var m=f$(f,h),g=f$(d,h),y=p?OA(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var _=u.concat([v]);l.push({op:n,path:_,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===YX?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Spe,Bw,GX=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",S3t=typeof Map<"u",T3t=typeof Set<"u",Tpe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",YX=GX?Symbol.for("immer-nothing"):((Spe={})["immer-nothing"]=!0,Spe),r2=GX?Symbol.for("immer-draftable"):"__$immer_draftable",ol=GX?Symbol.for("immer-state"):"__$immer_state",A3t={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},C3t=""+Object.prototype.constructor,KX=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,I3t=Object.getOwnPropertyDescriptors||function(e){var t={};return KX(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},wV={},EV={get:function(e,t){if(t===ol)return e;var n=wy(e);if(!OA(n,t))return function(i,s,o){var a,u=Epe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!n0(r)?r:r===qB(e.t,t)?(WB(e),e.o[t]=bV(e.A.h,r,e)):r},has:function(e,t){return t in wy(e)},ownKeys:function(e){return Reflect.ownKeys(wy(e))},set:function(e,t,n){var r=Epe(wy(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=qB(wy(e),t),s=i==null?void 0:i[ol];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(v3t(n,i)&&(n!==void 0||OA(e.t,t)))return!0;WB(e),_V(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return qB(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,WB(e),_V(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=wy(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){ki(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ki(12)}},nT={};Fw(EV,function(e,t){nT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),nT.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&ki(13),nT.set.call(this,e,t,void 0)},nT.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&ki(14),EV.set.call(this,e[0],t,n,e[0])};var O3t=function(){function e(n){var r=this;this.g=Tpe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(b){var E;return(E=s).call.apply(E,[g,b].concat(v))})}}var l;if(typeof s!="function"&&ki(6),o!==void 0&&typeof o!="function"&&ki(7),n0(i)){var c=bpe(r),f=bV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?u3(c):vV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return VB(c,o),HB(m,c)},function(m){throw u3(c),m}):(VB(c,o),HB(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===YX&&(l=void 0),r.F&&qX(l,!0),o){var h=[],p=[];Id("Patches").M(i,l,h,p),o(h,p)}return l}ki(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){n0(n)||ki(8),U1(n)&&(n=E3t(n));var r=bpe(this),i=bV(this,n,void 0);return i[ol].C=!0,vV(r),i},t.finishDraft=function(n,r){var i=n&&n[ol];({}).NODE_ENV!=="production"&&(i&&i.C||ki(9),i.I&&ki(10));var s=i.A;return VB(s,r),HB(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Tpe&&ki(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Id("Patches").$;return U1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),al=new O3t,P3t=al.produce;al.produceWithPatches.bind(al);al.setAutoFreeze.bind(al);al.setUseProxies.bind(al);al.applyPatches.bind(al);al.createDraft.bind(al);al.finishDraft.bind(al);function k3t(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=g3t({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return zCe({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Ad.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Ad.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function $3t(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=k3t(e),s=upt();s.startListening({matcher:Sce(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Sce(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=BCe({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Ad.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var R3t=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),N3t=Object.prototype.hasOwnProperty;function xV(e,t){return N3t.call(e,t)}function SV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)xV(e,i)&&r.push(i);return r}function su(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function TV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Ey(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function ODe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function AV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(AV(e[t]))return!0}else if(typeof e=="object"){for(var r=SV(e),i=r.length,s=0;s<i;s++)if(AV(e[r[s]]))return!0}}return!1}function Ape(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var PDe=function(e){R3t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Ape(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Ape(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ai=PDe,D3t=su,ab={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=f3(n,this.path);r&&(r=su(r));var i=y1(n,{op:"remove",path:this.from}).removed;return y1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=f3(n,this.from);return y1(n,{op:"add",path:this.path,value:su(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:PA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},L3t={add:function(e,t,n){return TV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:ab.move,copy:ab.copy,test:ab.test,_get:ab._get};function f3(e,t){if(t=="")return e;var n={op:"_get",path:t};return y1(e,n),n.value}function y1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):d3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=f3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=PA(e,t.value),o.test===!1)throw new Ai("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ai("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=su(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=d3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=ODe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!TV(h))throw new Ai("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);TV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ai("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=L3t[t.op].call(t,l,h,e);if(o.test===!1)throw new Ai("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=ab[t.op].call(t,l,h,e);if(o.test===!1)throw new Ai("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ai("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function L4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ai("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=su(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=y1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function M3t(e,t,n){var r=y1(e,t);if(r.test===!1)throw new Ai("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function d3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ai("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(ab[e.op]){if(typeof e.path!="string")throw new Ai("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ai('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ai("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ai("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&AV(e.value))throw new Ai("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ai("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ai("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=kDe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ai("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ai("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function kDe(e,t,n){try{if(!Array.isArray(e))throw new Ai("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)L4(su(t),su(e),n||!0);else{n=n||d3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ai)return i;throw i}}function PA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!PA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!PA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const F3t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ai,_areEquals:PA,applyOperation:y1,applyPatch:L4,applyReducer:M3t,deepClone:D3t,getValueByPointer:f3,validate:kDe,validator:d3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var XX=new WeakMap,B3t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),j3t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function z3t(e){return XX.get(e)}function U3t(e,t){return e.observers.get(t)}function V3t(e,t){e.observers.delete(t.callback)}function H3t(e,t){t.unobserve()}function q3t(e,t){var n=[],r,i=z3t(e);if(!i)i=new B3t(e),XX.set(e,i);else{var s=U3t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=su(e),t){r.callback=t,r.next=null;var o=function(){CV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){CV(r),clearTimeout(r.next),V3t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new j3t(t,r)),r}function CV(e,t){t===void 0&&(t=!1);var n=XX.get(e.object);QX(n.value,e.object,e.patches,"",t),e.patches.length&&L4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function QX(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=SV(t),o=SV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(xV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?QX(c,f,n,r+"/"+Ey(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Ey(l),value:su(c)}),n.push({op:"replace",path:r+"/"+Ey(l),value:su(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Ey(l),value:su(c)}),n.push({op:"remove",path:r+"/"+Ey(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!xV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Ey(l),value:su(t[l])})}}}function $De(e,t,n){n===void 0&&(n=!1);var r=[];return QX(e,t,r,"",n),r}const W3t=Object.freeze(Object.defineProperty({__proto__:null,compare:$De,generate:CV,observe:q3t,unobserve:H3t},Symbol.toStringTag,{value:"Module"}));Object.assign({},F3t,W3t,{JsonPatchError:PDe,deepClone:su,escapePathComponent:Ey,unescapePathComponent:ODe});var rT=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(rT||{});function d$(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=NDe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=d$(i,t);return L4(a,su(o),!0,!1).newDocument}function G3t(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function RDe({registry:e,initialState:t}){let n=!1;const r=f3t(),i=$3t(t);function s(c){return i.backend.nodes[c]}r.listen(rT.TRAVERSAL_START,()=>{n=!0}),r.listen(rT.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return d$(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=d$(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=$De(y,f);if(G3t(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=y3t({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=d$(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(rT.TRAVERSAL_START);const f=NDe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);K3t(p,m)?Cd(p)&&d.push(...p.sideEffects.undo):Cd(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(rT.TRAVERSAL_END)},undo(){const{current:c}=i;return Cd(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return DDe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function Y3t(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Cd(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Cd(r)&&(r=n[r.parent]),Cd(i)&&(i=n[i.parent]);return r.id}function NDe(e,t,n){const r=Y3t(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Cd(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Cd(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function K3t(e,t){if(Cd(e)&&e.parent===t.id)return!0;if(Cd(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function DDe(e,t){return{...e,children:e.children.map(n=>DDe(t[n],t)),name:`${e.label}`}}x3t();function X3t(e){return e.length===2?P3t(e):e}class M4{static create(){return new M4}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:X3t(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),xd(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var Q3t="Expected a function",Cpe=NaN,J3t="[object Symbol]",Z3t=/^\s+|\s+$/g,eLt=/^[-+]0x[0-9a-f]+$/i,tLt=/^0b[01]+$/i,nLt=/^0o[0-7]+$/i,rLt=parseInt,iLt=typeof nu=="object"&&nu&&nu.Object===Object&&nu,sLt=typeof self=="object"&&self&&self.Object===Object&&self,oLt=iLt||sLt||Function("return this")(),aLt=Object.prototype,uLt=aLt.toString,lLt=Math.max,cLt=Math.min,GB=function(){return oLt.Date.now()};function fLt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(Q3t);t=Ipe(t)||0,IV(n)&&(c=!!n.leading,f="maxWait"in n,s=f?lLt(Ipe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(w){var x=r,S=i;return r=i=void 0,l=w,o=e.apply(S,x),o}function p(w){return l=w,a=setTimeout(y,t),c?h(w):o}function m(w){var x=w-u,S=w-l,I=t-x;return f?cLt(I,s-S):I}function g(w){var x=w-u,S=w-l;return u===void 0||x>=t||x<0||f&&S>=s}function y(){var w=GB();if(g(w))return v(w);a=setTimeout(y,m(w))}function v(w){return a=void 0,d&&r?h(w):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function b(){return a===void 0?o:v(GB())}function E(){var w=GB(),x=g(w);if(r=arguments,i=this,u=w,x){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=_,E.flush=b,E}function IV(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function dLt(e){return!!e&&typeof e=="object"}function hLt(e){return typeof e=="symbol"||dLt(e)&&uLt.call(e)==J3t}function Ipe(e){if(typeof e=="number")return e;if(hLt(e))return Cpe;if(IV(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=IV(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Z3t,"");var n=tLt.test(e);return n||nLt.test(e)?rLt(e.slice(2),n?2:8):eLt.test(e)?Cpe:+e}var pLt=fLt;const Ff=pl(pLt);function LDe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=A.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=A.useMemo(()=>ME(".2s"),[]);return R.jsxs(R.Fragment,{children:[R.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:R.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:R.jsx(Ug,{children:R.jsx(Ql,{spacing:3,children:R.jsx(Rt,{size:14,style:{color:"#878E95"},children:r})})})})}),R.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),R.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>R.jsxs("g",{transform:`translate(${n}, ${a})`,children:[R.jsx("line",{x2:"-6",stroke:"currentColor"}),R.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),R.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const mLt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:LDe},Symbol.toStringTag,{value:"Module"})),YB=15;function MDe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=A.useState([0,0]),[l,c]=A.useState(!1);return A.useEffect(()=>{const f=Qi("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<YB&&Math.abs(t(g[r.y])-p[1])<YB);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[s.ids,i,l,o,r,e,t]),R.jsx("circle",{style:{cursor:l?"pointer":"default"},r:YB,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const gLt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:MDe},Symbol.toStringTag,{value:"Module"})),oi={top:15,left:100,right:15,bottom:70};function OV({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Tb(),[c]=Tb(),[f]=Tb(),[d,h]=A.useState(!0),p=A.useMemo(()=>l-oi.left-oi.right,[l]),m=A.useMemo(()=>u-oi.top-oi.bottom,[u]),g=A.useMemo(()=>{const C=Array.from(new Set(s.map(O=>O[i.category])));return FE(Ske).domain(C)},[s,i.category]),{xMin:y,yMin:v,xMax:_,yMax:b}=A.useMemo(()=>{const C=s.map(B=>+B[i.x]).filter(B=>B!==null),[O,z]=Jfe(C),N=s.map(B=>+B[i.y]).filter(B=>B!==null),[$,D]=Jfe(N);return{xMin:O,xMax:z,yMin:$,yMax:D}},[s,i.x,i.y]),E=A.useMemo(()=>{const C=_-y;return p<=0?null:i.dataType==="date"?vke([oi.left,p+oi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Ip([oi.left,p+oi.left]).domain([y-C/10,_+C/10]).nice()},[i.dataType,p,_,y]),w=A.useMemo(()=>{const C=b-v;return m<=0?null:Ip([m+oi.top,oi.top]).domain([v-C/10,b+C/10]).nice()},[m,b,v]),x=A.useMemo(()=>{if(!E||!w)return()=>null;if(r==="Axis Selection"){const C=TSt().extent([[oi.left,oi.top+m-5],[oi.left+p,oi.top+m+5]]).on("brush end",z=>{z.sourceEvent!==void 0&&n([[z.selection[0],null],[z.selection[1],null]],E,w,z.mode)}),O=ASt().extent([[oi.left-5,oi.top],[oi.left+5,oi.top+m]]).on("brush end",z=>{z.sourceEvent!==void 0&&n([[null,z.selection[0]],[null,z.selection[1]]],E,w,z.mode)});return c.current&&f.current&&(Qi(f.current).call(O),Qi(c.current).call(C),t.hasBrush||(Qi(f.current).call(O.move,[w(b),w(v)]),Qi(c.current).call(C.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),w(b)],[E(new Date("2015-12-31")),w(v)]],E,w,"drag"))),()=>{Qi(f.current).call(O.move,[w(b),w(v)]),Qi(c.current).call(C.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),w(b)],[E(new Date("2015-12-31")),w(v)]],E,w,"clear")}}if(r==="Rectangular Selection"){const C=CSt().extent([[oi.left,oi.top],[oi.left+p,oi.top+m]]).on("brush",O=>{O.sourceEvent!==void 0&&n([[O.selection[0][0],O.selection[0][1]],[O.selection[1][0],O.selection[1][1]]],E,w,O.mode)}).on("end",O=>{O.selection===null&&O.sourceEvent!==void 0&&(Qi(a.current).call(C.move,null),e(null))});return Qi(a.current).call(C),()=>{Qi(a.current).call(C.move,null),n([[null,null],[null,null]],E,w,"clear")}}return r==="Slider Selection"?()=>n([[E(y),w(b)],[E(_),w(v)]],E,w,"clear"):r==="Paintbrush Selection"?()=>n([[E(y),w(b)],[E(_),w(v)]],E,w,"clear",[]):()=>null},[t,r,c,f,m,a,n,p,_,y,E,b,v,w]);A.useEffect(()=>{r==="Slider Selection"&&E&&w&&n([[E(y),w(b)],[E(_),w(v)]],E,w,null)},[r,_,y,E,b,v,w]);const S=A.useMemo(()=>o.length===0?null:new Set(o),[o]),I=A.useMemo(()=>!E||!w?null:s.map((C,O)=>{if(C[i.x]===null||C[i.y]===null)return null;const z=i.dataType==="date"?E(new Date(C[i.x])):E(C[i.x]);return R.jsx("circle",{opacity:S&&!S.has(C[i.ids])?.3:1,r:3,fill:S&&!S.has(C[i.ids])?"lightgray":g(C[i.category]),cx:z,cy:w(C[i.y])},O)}),[S,g,s,i.category,i.ids,i.x,i.y,E,w]);return A.useEffect(()=>{r==="Axis Selection"&&yEt(".handle").style("fill","darkgrey")},[t,r]),R.jsxs(Qm,{children:[R.jsxs(Ql,{children:[R.jsx(cu,{ml:60,compact:!0,style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),x==null||x()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?R.jsx(iCe,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:C=>h(C==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),R.jsxs(Ql,{style:{width:"100%",height:"100%"},noWrap:!0,children:[R.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&w?R.jsxs("g",{children:[R.jsx(LDe,{yScale:w,label:i.y,horizontalPosition:oi.left,xRange:E.range()}),R.jsx(bK,{xScale:E,yRange:w.range(),isDate:i.dataType==="date",vertPosition:m+oi.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(C=>({value:C.toString(),offset:E(C)}))})]}):null,I,R.jsx("g",{id:"brushXRef",ref:c}),R.jsx("g",{id:"brushYRef",ref:f}),E&&w&&r==="Paintbrush Selection"?R.jsx(MDe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:w}):null]}),r==="Slider Selection"&&E&&w?R.jsxs(Qm,{style:{flexGrow:1},spacing:50,children:[R.jsxs(Qm,{spacing:0,children:[R.jsx(Rt,{children:i.x}),R.jsx(Qz,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:C=>{n([[E(C[0]),t.y1],[E(C[1]),t.y2]],E,w,"drag")},style:{width:"300px"},marks:E.ticks(5).map(C=>({value:C,label:C})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),R.jsxs(Qm,{spacing:0,children:[R.jsx(Rt,{children:i.y}),R.jsx(Qz,{minRange:1,label:null,min:w.domain()[0],max:w.domain()[1],onChange:C=>{n([[t.x1,w(C[1])],[t.x2,w(C[0])]],E,w,"drag")},style:{width:"300px"},marks:w.ticks(5).map(C=>({value:C,label:C})),value:[w.invert(t.y2),w.invert(t.y1)]})]})]}):null]})]})}const yLt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:OV,default:OV},Symbol.toStringTag,{value:"Module"}));function Ope({parameters:e,setAnswer:t}){const[n,r]=A.useState(null),[i,s]=A.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=A.useState(null);A.useEffect(()=>{XSt(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=A.useMemo(()=>o?c3t(o):null,[o]),{actions:l,trrack:c}=A.useMemo(()=>{const g=M4.create(),y=g.register("brush",(w,x)=>(w.all={brush:x},w)),v=g.register("brushMove",(w,x)=>(w.all={brush:x},w)),_=g.register("brushResize",(w,x)=>(w.all={brush:x},w)),b=g.register("brushClear",(w,x)=>(w.all={brush:x},w)),E=RDe({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:_,clearBrush:b},trrack:E}},[]),f=A.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=A.useMemo(()=>Ff(f,100,{maxWait:100}),[f]),h=A.useCallback((g,y,v,_,b)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),w=y.invert(g[1][0]||i.x2),x=v.invert(g[1][1]||i.y2),S=v.invert(g[0][1]||i.y1);let I=null;if(_==="clear")I=u;else if(b){const O=new Set(b);I=u.filter(UB(z=>O.has(z[e.ids])))}else e.brushType==="Axis Selection"?I=u.filter(UB(O=>new Date(O[e.x])>=new Date(E)&&new Date(O[e.x])<=new Date(w)&&O[e.y]>=x&&O[e.y]<=S)):I=u.filter(UB(O=>O[e.x]>=E&&O[e.x]<=w&&O[e.y]>=x&&O[e.y]<=S));const C={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:_!=="clear",ids:_!=="clear"?I==null?void 0:I.array("id"):[]};s(C),_==="drag"||_==="handle"?d(_,C):_==="clear"&&c.apply("Clear Brush",l.clearBrush(C)),r(I),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=A.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=A.useCallback(g=>{r(g)},[]);return o?R.jsxs(Qm,{spacing:"xs",children:[R.jsx(OV,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),R.jsx(GU,{data:o,parameters:e,barsTable:p})]}):R.jsx(I0,{})}const vLt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Ope,default:Ope},Symbol.toStringTag,{value:"Module"})),_Lt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Ppe=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},QE=e=>{const t=A.useRef(null),n=Ppe(e),[r,i]=A.useState(0),[s,o]=A.useState(0);A.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=Ppe({...n,width:n.width||r,height:n.height||s});return[t,a]},bLt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:QE},Symbol.toStringTag,{value:"Module"}));function FDe({data:e,xScale:t,yScale:n,height:r}){return R.jsx("g",{children:e.map((i,s)=>R.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const wLt=Object.freeze(Object.defineProperty({__proto__:null,Bars:FDe},Symbol.toStringTag,{value:"Module"}));function JX({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=A.useMemo(()=>{const o=Ip().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return R.jsxs("g",{children:[R.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>R.jsxs("g",{transform:`translate(0,${a})`,children:[R.jsx("line",{x2:`${r}`,stroke:"currentColor"}),R.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const ELt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:JX},Symbol.toStringTag,{value:"Module"}));function BDe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=A.useMemo(()=>{const o=iI().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return R.jsxs("g",{children:[R.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>R.jsx("g",{transform:`translate(${a}, 10)`,children:R.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const xLt=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:BDe},Symbol.toStringTag,{value:"Module"})),SLt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function TLt({parameters:e}){const[n,r]=QE(SLt),i=iI().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Ip().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return R.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:R.jsx("svg",{width:r.width,height:r.height,children:R.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[R.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:R.jsx(BDe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),R.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:R.jsx(JX,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),R.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:R.jsx(FDe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const ALt=Object.freeze(Object.defineProperty({__proto__:null,default:TLt},Symbol.toStringTag,{value:"Module"}));function jDe({data:e}){return R.jsx("g",{children:e.map(({bubble:t},n)=>R.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const CLt=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:jDe},Symbol.toStringTag,{value:"Module"}));function ZX({positions:e}){return R.jsx("g",{children:e.map((t,n)=>R.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const ILt=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:ZX},Symbol.toStringTag,{value:"Module"})),OLt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},PLt=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=WPe().size([t-10,n-10]).padding(1.5),o=J6(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},kLt=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function $Lt({parameters:e}){const[t,n]=QE(OLt),r=PLt(e,n.width,n.height),i=kLt(r,e.selectedIndices);return R.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:R.jsx("svg",{width:n.width,height:n.height,children:R.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[R.jsx(jDe,{data:r}),R.jsx(ZX,{positions:i})]})})})}const RLt=Object.freeze(Object.defineProperty({__proto__:null,default:$Lt},Symbol.toStringTag,{value:"Module"}));function zDe({arcs:e}){return R.jsx("g",{children:e.map((t,n)=>R.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const NLt=Object.freeze(Object.defineProperty({__proto__:null,Slices:zDe},Symbol.toStringTag,{value:"Module"}));function UDe({positions:e}){return R.jsx("g",{children:e.map((t,n)=>R.jsx("g",{transform:`translate(${t.centroid()})`,children:R.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const DLt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:UDe},Symbol.toStringTag,{value:"Module"})),LLt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},MLt=FCt().value(e=>e.value),fS=150;function FLt({parameters:e}){const[t,n]=QE(LLt),r=MLt(e.data),i=r.map(o=>WU().innerRadius(0).outerRadius(fS).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>WU().outerRadius(fS+10).innerRadius(fS+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return R.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:R.jsx("svg",{width:n.width,height:n.height,children:R.jsxs("g",{transform:`translate(${[n.marginLeft+fS,n.marginTop+fS].join(",")})`,children:[R.jsx(zDe,{arcs:i}),R.jsx(UDe,{positions:s})]})})})}const BLt=Object.freeze(Object.defineProperty({__proto__:null,default:FLt},Symbol.toStringTag,{value:"Module"}));function VDe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=A.useMemo(()=>{const o=Ip().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return R.jsxs("g",{children:[R.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>R.jsxs("g",{transform:`translate(${a}, 0)`,children:[R.jsx("line",{y2:`${r}`,stroke:"currentColor"}),R.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const jLt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:VDe},Symbol.toStringTag,{value:"Module"}));function HDe({data:e,barWidth:t,yScale:n}){return R.jsx("g",{children:e.map((r,i)=>R.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const zLt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:HDe},Symbol.toStringTag,{value:"Module"})),ULt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function VLt({parameters:e}){const[n,r]=QE(ULt),i=iI().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Ip().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(_=>+_.value),g=p.reduce((_,b)=>Number(_)+Number(b))/100,y={};p.forEach((_,b)=>{y[String.fromCharCode(b+65)]=_/g});const v=[y];return oIt().keys(e.data.map(_=>_.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return R.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:R.jsx("svg",{width:r.width,height:r.height,children:R.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[R.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:R.jsx(VDe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),R.jsx("g",{transform:"translate(0, 0)",children:R.jsx(JX,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),R.jsxs("g",{transform:"translate(0, 0)",children:[R.jsx(HDe,{data:c,barWidth:f,yScale:s}),R.jsx(ZX,{positions:d})]})]})})})}const HLt=Object.freeze(Object.defineProperty({__proto__:null,default:VLt},Symbol.toStringTag,{value:"Module"})),qLt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function WLt({parameters:e,setAnswer:t}){const[n,r]=QE(qLt),[i,s]=A.useState(100),[o,a]=A.useState(100),[u,l]=A.useState(300),{taskid:c}=e,{actions:f,trrack:d}=A.useMemo(()=>{const p=M4.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=RDe({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=A.useCallback(p=>{const m=Qi("#movingCircle"),g=Qi("#clickAccuracySvg"),y=CU(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],_=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+_,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:_}})},[f,t,c,d]);return A.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;Qi(n.current).select("circle").transition().duration(y).ease(fSt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:R.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:R.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[R.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),R.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),R.jsxs(At,{children:["Adjust speed (px/s):",R.jsx(aY,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const GLt=Object.freeze(Object.defineProperty({__proto__:null,default:WLt},Symbol.toStringTag,{value:"Module"}));var YLt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},KLt=Object.defineProperty,XLt=Object.defineProperties,QLt=Object.getOwnPropertyDescriptors,h3=Object.getOwnPropertySymbols,qDe=Object.prototype.hasOwnProperty,WDe=Object.prototype.propertyIsEnumerable,kpe=(e,t,n)=>t in e?KLt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$pe=(e,t)=>{for(var n in t||(t={}))qDe.call(t,n)&&kpe(e,n,t[n]);if(h3)for(var n of h3(t))WDe.call(t,n)&&kpe(e,n,t[n]);return e},JLt=(e,t)=>XLt(e,QLt(t)),ZLt=(e,t)=>{var n={};for(var r in e)qDe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&h3)for(var r of h3(e))t.indexOf(r)<0&&WDe.call(e,r)&&(n[r]=e[r]);return n},Iu=(e,t,n)=>{const r=A.forwardRef((i,s)=>{var o=i,{color:a="currentColor",size:u=24,stroke:l=2,children:c}=o,f=ZLt(o,["color","size","stroke","children"]);return A.createElement("svg",$pe(JLt($pe({ref:s},YLt),{width:u,height:u,stroke:a,strokeWidth:l,className:`tabler-icon tabler-icon-${e}`}),f),[...n.map(([d,h])=>A.createElement(d,h)),...c||[]])});return r.propTypes={color:Mt.string,size:Mt.oneOfType([Mt.string,Mt.number]),stroke:Mt.oneOfType([Mt.string,Mt.number])},r.displayName=`${t}`,r},eMt=Iu("alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),tMt=Iu("arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]),nMt=Iu("brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]),rMt=Iu("browser-plus","IconBrowserPlus",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h14a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-14a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M4 8h16",key:"svg-1"}],["path",{d:"M8 4v4",key:"svg-2"}],["path",{d:"M10 14h4",key:"svg-3"}],["path",{d:"M12 12v4",key:"svg-4"}]]),KB=Iu("chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]),Rpe=Iu("circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]),iMt=Iu("code-dots","IconCodeDots",[["path",{d:"M15 12h.01",key:"svg-0"}],["path",{d:"M12 12h.01",key:"svg-1"}],["path",{d:"M9 12h.01",key:"svg-2"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-3"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-4"}]]),GDe=Iu("code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]),sMt=Iu("dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),oMt=Iu("layout-dashboard","IconLayoutDashboard",[["path",{d:"M4 4h6v8h-6z",key:"svg-0"}],["path",{d:"M4 16h6v4h-6z",key:"svg-1"}],["path",{d:"M14 12h6v8h-6z",key:"svg-2"}],["path",{d:"M14 4h6v4h-6z",key:"svg-3"}]]),aMt=Iu("mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]),Npe=Iu("schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]),eQ=Iu("table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]),uMt=Iu("zoom-question","IconZoomQuestion",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}],["path",{d:"M10 13l0 .01",key:"svg-2"}],["path",{d:"M10 10a1.5 1.5 0 1 0 -1.14 -2.474",key:"svg-3"}]]);function Dpe({rankings:e}){return R.jsx("div",{style:{fontFamily:"sans-serif"},children:R.jsx("div",{children:e.map((t,n)=>R.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function lMt({parameters:e,setAnswer:t}){const n=lc(),r=rh()[n],[i,s]=A.useState(""),{goToNextStep:o,isNextDisabled:a}=ZCe(),u=A.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[l]=A.useState(new URLSearchParams(window.location.search)),c=(l.get("admin")||"f")==="t",f=A.useCallback(p=>{s(p),t({status:!0,answers:{[`${r}/leftARP`]:u==="r1"?e.data.r1ARP:e.data.r2ARP,[`${r}/rightARP`]:u==="r2"?e.data.r1ARP:e.data.r2ARP,[`${r}/leftRanking`]:JSON.stringify(u==="r1"?e.data.r1:e.data.r2),[`${r}/rightRanking`]:JSON.stringify(u==="r2"?e.data.r1:e.data.r2),[`${r}/choice`]:p,[`${r}/correctChoice`]:u==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[r,u,e.data,t]),d=A.useCallback(()=>{a||o()},[a,o]);A.useEffect(()=>{const p=nQe([["ArrowLeft",()=>f("left")],["ArrowRight",()=>f("right")],["Enter",d]]);return document.body.addEventListener("keydown",p),()=>{document.body.removeEventListener("keydown",p)}},[f,d]);let h=!1;return u==="r1"?(i==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||i==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(h=!0):(i==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||i==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(h=!0),R.jsxs("div",{children:[R.jsxs(Gu,{children:[R.jsxs(Gu.Col,{span:2,children:[R.jsx(Dpe,{rankings:u==="r1"?e.data.r1:e.data.r2}),R.jsx(cu,{fullWidth:!0,disabled:i==="left",onClick:()=>{f("left")},children:i==="left"?R.jsx(Rpe,{}):"Select this ranking"}),c&&i&&R.jsx("div",{children:u==="r1"?e.data.r1ARP:e.data.r2ARP})]}),R.jsxs(Gu.Col,{span:2,children:[R.jsx(Dpe,{rankings:u==="r1"?e.data.r2:e.data.r1}),R.jsx(cu,{fullWidth:!0,disabled:i==="right",onClick:()=>{f("right")},children:i==="right"?R.jsx(Rpe,{}):"Select this ranking"}),c&&i&&R.jsx("div",{children:u==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),c&&i&&R.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:h?"CORRECT":"INCORRECT"})]})}const cMt=Object.freeze(Object.defineProperty({__proto__:null,default:lMt},Symbol.toStringTag,{value:"Module"})),fMt=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":lIt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":vLt,"../public/demo-brush-interactions/assets/Paintbrush.tsx":gLt,"../public/demo-brush-interactions/assets/Scatter.tsx":yLt,"../public/demo-brush-interactions/assets/XAxisBar.tsx":aIt,"../public/demo-brush-interactions/assets/YAxis.tsx":mLt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":uIt,"../public/demo-brush-interactions/assets/types.ts":_Lt,"../public/demo-cleveland/assets/BarChart.tsx":ALt,"../public/demo-cleveland/assets/BubbleChart.tsx":RLt,"../public/demo-cleveland/assets/PieChart.tsx":BLt,"../public/demo-cleveland/assets/StackedBarChart.tsx":HLt,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":wLt,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":CLt,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":ILt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":jLt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":ELt,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":xLt,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":NLt,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":DLt,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":zLt,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":bLt,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":GLt,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":cMt});function dMt({currentConfig:e}){const t=lc(),n=rh()[t],r=`../public/${e.path}`,i=fMt[r].default,s=Xp(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Kp();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(Object.values(f).map(d=>d)))}return R.jsx(A.Suspense,{fallback:R.jsx("div",{children:"Loading..."}),children:R.jsx(i,{parameters:e.parameters,setAnswer:u})})}function hMt({currentConfig:e}){const[t,n]=A.useState(null);return A.useEffect(()=>{fetch(`${vf}${e.path}`).then(r=>r.text()).then(r=>n(r))},[e]),t===null?null:R.jsx(mu,{text:t})}function V1(){return _f(e=>e.config)}const pMt={},mMt=Object.freeze(Object.defineProperty({__proto__:null,default:pMt},Symbol.toStringTag,{value:"Module"})),gMt=HHe(mMt);var yMt=gMt;function vMt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function _Mt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function bMt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function wMt(e){return e.__COMMENTS__}function EMt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var F4={EOL:yMt.EOL||`
`,tryParseNumber:vMt,createComment:_Mt,removeComment:bMt,getComment:wMt,forceComment:EMt},xMt="3.2.1";function SMt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Lpe}else if(e.length===0)return Lpe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return AMt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),TMt.bind(null,n)}function TMt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Lpe(){}function AMt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function YDe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}YDe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function KDe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}KDe.description="parse hexadecimal numbers prefixed with 0x";function XDe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}XDe.description="support ISO dates";var tQ={loadDsf:SMt,std:{math:YDe,hex:KDe,date:XDe}},CMt=function(e,t){var n=F4,r=tQ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var D,B=0,V=1;for(D=s-1;D>0&&i[D]!==`
`;D--,B++);for(;D>0;D--)i[D]===`
`&&V++;throw new Error($+" at line "+V+","+B+" >>>"+i.substr(s-B,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var D="",B=o;h();){if(o===B)return h(),$&&B==="'"&&o==="'"&&D.length===0?(h(),g()):D;if(o==="\\")if(h(),o==="u"){for(var V=0,j=0;j<4;j++){h();var G=o.charCodeAt(0),U;o>="0"&&o<="9"?U=G-48:o>="a"&&o<="f"?U=G-97+10:o>="A"&&o<="F"?U=G-65+10:d("Bad \\u char "+o),V=V*16+U}D+=String.fromCharCode(V)}else if(typeof a[o]=="string")D+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):D+=o}d("Bad string")}function g(){for(var $="",D=0,B=0;;){var V=p(-B-5);if(!V||V===`
`)break;B++}function j(){for(var G=B;o&&o<=" "&&o!==`
`&&G-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),j());;){if(!o)d("Bad multiline string");else if(o==="'"){if(D++,h(),D===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;D>0;)$+="'",D--;o===`
`?($+=`
`,h(),j()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",D=s,B=-1;;){if(o===":")return $?B>=0&&B!==$.length&&(s=D+B,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?B<0&&(B=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var D=o==="\r"||o===`
`||o==="";if(D||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var B=$[0];switch(B){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(B==="-"||B>="0"&&B<="9"){var V=n.tryParseNumber($);if(V!==void 0)return V}}if(D){$=$.trim();var j=l($);return j!==void 0?j:$}}$+=o}}function b($,D){var B;for($--,B=s-2;B>$&&i[B]<=" "&&i[B]!==`
`;B--);i[B]===`
`&&B--,i[B]==="\r"&&B--;var V=i.substr($,B-$+1);for(B=0;B<V.length;B++)if(V[B]>" "){var j=V.indexOf(`
`);if(j>=0){var G=[V.substr(0,j),V.substr(j+1)];return D&&G[0].trim().length===0&&G.shift(),G}else return[V]}return[]}function E($){function D(V,j){var G,U,P,k;switch(typeof V){case"string":V.indexOf(j)>=0&&(k=V);break;case"object":if(Object.prototype.toString.apply(V)==="[object Array]")for(G=0,P=V.length;G<P;G++)k=D(V[G],j)||k;else for(U in V)Object.prototype.hasOwnProperty.call(V,U)&&(k=D(V[U],j)||k)}return k}function B(V){var j=D($,V);return j?"found '"+V+`' in a string value, your mistake could be with:
  > `+j+`
  (unquoted strings contain everything up to the next line!)`:""}return B("}")||B("]")}function w(){var $=[],D,B,V;try{if(u&&(D=n.createComment($,{a:[]})),h(),B=s,v(),D&&(V=b(B,!0).join(`
`)),o==="]")return h(),D&&(D.e=[V]),$;for(;o;){if($.push(S()),B=s,v(),o===","&&(h(),B=s,v()),D){var j=b(B);D.a.push([V||"",j[0]||""]),V=j[1]}if(o==="]")return h(),D&&(D.a[D.a.length-1][1]+=V||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(G){throw G.hint=G.hint||E($),G}}function x($){var D="",B={},V,j,G;try{if(u&&(V=n.createComment(B,{c:{},o:[]})),$?j=1:(h(),j=s),v(),V&&(G=b(j,!0).join(`
`)),o==="}"&&!$)return V&&(V.e=[G]),h(),B;for(;o;){if(D=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),B[D]=S(),j=s,v(),o===","&&(h(),j=s,v()),V){var U=b(j);V.c[D]=[G||"",U[0]||""],G=U[1],V.o.push(D)}if(o==="}"&&!$)return h(),V&&(V.c[D][1]+=G||""),B;v()}if($)return B;d("End of input while parsing an object (missing '}')")}catch(P){throw P.hint=P.hint||E(B),P}}function S(){switch(v(),o){case"{":return x();case"[":return w();case"'":case'"':return m(!0);default:return _()}}function I($,D){var B=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var V=D.join(`
`),j=b(B).join(`
`);if(j||V){var G=n.createComment($,n.getComment($));G.r=[V,j]}}return $}function C(){v();var $=u?b(1):null;switch(o){case"{":return I(x(),$);case"[":return I(w(),$);default:return I(S(),$)}}function O(){v();var $=u?b(1):null;switch(o){case"{":return I(x(),$);case"[":return I(w(),$)}try{return I(x(!0),$)}catch(D){c();try{return I(S(),$)}catch{throw D}}}if(typeof e!="string")throw new Error("source is not a string");var z=null,N=!0;return t&&typeof t=="object"&&(u=t.keepWsc,z=t.dsf,N=t.legacyRoot!==!1),l=r.loadDsf(z,"parse"),i=e,c(),N?O():C()},IMt=function(e,t){var n=F4,r=tQ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var _=v[y];g[_].push(i[_][0].length,i[_][1].length)}}var b,E="---\u2028--\uFEFF-",w=new RegExp('[\\\\\\"\0-'+E+"]","g"),x=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),S=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),I=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),C={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},O=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,z="",N=0;function $(k,H){return N+=k[0].length+k[1].length-k[2]-k[3],k[0]+H+k[1]}function D(k){return k.replace(w,function(H){var M=C[H];return typeof M=="string"?$(g.esc,M):$(g.uni,("0000"+H.charCodeAt(0).toString(16)).slice(-4))})}function B(k,H,M,F){return k?(x.lastIndex=0,I.lastIndex=0,c||M||x.test(k)||n.tryParseNumber(k,!0)!==void 0||I.test(k)?(w.lastIndex=0,S.lastIndex=0,w.test(k)?!S.test(k)&&!F&&d?V(k,H):$(g.qstr,D(k)):$(g.qstr,k)):$(g.str,k)):$(g.qstr,"")}function V(k,H){var M,F=k.replace(/\r/g,"").split(`
`);if(H+=o,F.length===1)return $(g.mstr,F[0]);var J=s+H+g.mstr[0];for(M=0;M<F.length;M++)J+=s,F[M]&&(J+=H+F[M]);return J+s+H+g.mstr[1]}function j(k){return k?l||O.test(k)?(w.lastIndex=0,$(g.qkey,w.test(k)?D(k):k)):$(g.key,k):'""'}function G(k,H,M,F){function J(_t){return _t&&_t[_t[0]==="\r"?1:0]===`
`}function se(_t){return _t&&!J(_t)}function ae(_t,In,Wt){if(!_t)return"";_t=n.forceComment(_t);var Vt,hr=_t.length;for(Vt=0;Vt<hr&&_t[Vt]<=" ";Vt++);return Wt&&Vt>0&&(_t=_t.substr(Vt)),Vt<hr?In+$(g.rem,_t):_t}var ce=b(k);if(ce!==void 0)return $(g.dsf,ce);switch(typeof k){case"string":return B(k,z,H,F);case"number":return isFinite(k)?$(g.num,String(k)):$(g.lit,"null");case"boolean":return $(g.lit,String(k));case"object":if(!k)return $(g.lit,"null");var le;a&&(le=n.getComment(k));var ge=Object.prototype.toString.apply(k)==="[object Array]",ue=z;z+=o;var Fe=s+ue,$e=s+z,Ge=M||u?"":Fe,Re=[],Oe,Me=f?[]:null,Ut=c,Qe=d,je=h?"":g.com[0],wt=0,et,ct,ft,jt,Dn,he,_e,ke,it;if(ge){for(et=0,ct=k.length;et<ct;et++){if(Oe=et<ct-1,le?(he=le.a[et]||[],_e=se(he[1]),Re.push(ae(he[0],`
`)+$e),Me&&(he[0]||he[1]||_e)&&(Me=null)):Re.push($e),N=0,jt=k[et],Re.push(G(jt,le?_e:!1,!0)+(Oe?h:"")),Me){switch(typeof jt){case"string":N=0,c=!0,d=0,Me.push(G(jt,!1,!0)+(Oe?g.com[0]:"")),c=Ut,d=Qe;break;case"object":if(jt){Me=null;break}default:Me.push(Re[Re.length-1]+(Oe?je:""));break}Oe&&(N+=g.com[0].length-g.com[2]),wt+=N}le&&he[1]&&Re.push(ae(he[1],_e?" ":`
`,_e))}ct===0?le&&le.e&&Re.push(ae(le.e[0],`
`)+Fe):Re.push(Fe),Re.length===0?ke=$(g.arr,""):(ke=Ge+$(g.arr,Re.join("")),Me&&(it=Me.join(" "),it.length-wt<=f&&(ke=$(g.arr,it))))}else{var Ye=le?le.o.slice():[],ut=[];for(ft in k)Object.prototype.hasOwnProperty.call(k,ft)&&Ye.indexOf(ft)<0&&ut.push(ft);m&&ut.sort();var tt=Ye.concat(ut);for(et=0,ct=tt.length;et<ct;et++)if(Oe=et<ct-1,ft=tt[et],le?(he=le.c[ft]||[],_e=se(he[1]),Re.push(ae(he[0],`
`)+$e),Me&&(he[0]||he[1]||_e)&&(Me=null)):Re.push($e),N=0,jt=k[ft],Dn=G(jt,le&&_e),Re.push(j(ft)+g.col[0]+(J(Dn)?"":" ")+Dn+(Oe?h:"")),le&&he[1]&&Re.push(ae(he[1],_e?" ":`
`,_e)),Me){switch(typeof jt){case"string":N=0,c=!0,d=0,Dn=G(jt,!1),c=Ut,d=Qe,Me.push(j(ft)+g.col[0]+" "+Dn+(Oe?g.com[0]:""));break;case"object":if(jt){Me=null;break}default:Me.push(Re[Re.length-1]+(Oe?je:""));break}N+=g.col[0].length-g.col[2],Oe&&(N+=g.com[0].length-g.com[2]),wt+=N}ct===0?le&&le.e&&Re.push(ae(le.e[0],`
`)+Fe):Re.push(Fe),Re.length===0?ke=$(g.obj,""):(ke=Ge+$(g.obj,Re.join("")),Me&&(it=Me.join(" "),it.length-wt<=f&&(ke=$(g.obj,it))))}return z=ue,ke}}b=r.loadDsf(p,"stringify");var U="",P=a?P=(n.getComment(e)||{}).r:null;return P&&P[0]&&(U=P[0]+`
`),U+=G(e,null,!0,!0),P&&(U+=P[1]||""),U},jb=F4;function i2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function PV(e,t){if(!(e===null||typeof e!="object")){var n=jb.getComment(e);n&&jb.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Mpe(o.a,r,n.a[r],PV(e[r]))&&(s=!0);!s&&n.e&&(o.e=i2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Mpe(o.s,l,n.c[l],PV(e[l]))&&(s=!0)}!s&&n.e&&(o.e=i2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=i2(n.r[0],n.r[1])),s?o:void 0}}function OMt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function PMt(e,t){var n=[];if(kV(e,t,n,[]),n.length>0){var r=p3(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+OMt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),p3(t,r,1)}}function Mpe(e,t,n,r){var i=i2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function s2(e,t){var n=i2(t.b,t.a);return n.path=e,n}function o2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(s2(s,o)),o2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(s2(u,l)),o2(l.x,t,u))});e.e&&t.push(s2(n,e.e))}}function kV(e,t,n,r){if(e){if(t===null||typeof t!="object"){o2(e,n,r);return}var i,s=jb.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],kV(u.x,t[i],n,l)):(n.push(s2(l,u)),o2(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],kV(d.x,t[c],n,f))):d&&(n.push(s2(f,d)),o2(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function p3(e,t,n){var r=jb.createComment(e,jb.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=jb.forceComment(t)),r.r[n]||""}var kMt={extract:function(e){return PV(e,!0)},merge:PMt,header:function(e,t){return p3(e,t,0)},footer:function(e,t){return p3(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Fpe=F4,$Mt=xMt,Bpe=CMt,jpe=IMt,RMt=kMt,NMt=tQ,nQ={parse:Bpe,stringify:jpe,endOfLine:function(){return Fpe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(Fpe.EOL=e)},version:$Mt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Bpe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,jpe(e,t)}},comments:RMt,dsf:NMt.std},$V={exports:{}},QDe={},nf={},jw={},gI={},Cn={},kA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,b)=>`${_}${b}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,b)=>(b instanceof n&&(_[b.str]=(_[b.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const _=[y[0]];let b=0;for(;b<v.length;)a(_,v[b]),_.push(y[++b]);return new r(_)}e._=i;const s=new r("+");function o(y,...v){const _=[h(y[0])];let b=0;for(;b<v.length;)_.push(s),a(_,v[b]),_.push(s,h(y[++b]));return u(_),new r(_)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const _=l(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(kA);var RV={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=kA;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(RV);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=kA,n=RV;var r=kA;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=RV;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(M,F){return this}}class o extends s{constructor(M,F,J){super(),this.varKind=M,this.name=F,this.rhs=J}render({es5:M,_n:F}){const J=M?n.varKinds.var:this.varKind,se=this.rhs===void 0?"":` = ${this.rhs}`;return`${J} ${this.name}${se};`+F}optimizeNames(M,F){if(M[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,M,F)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(M,F,J){super(),this.lhs=M,this.rhs=F,this.sideEffects=J}render({_n:M}){return`${this.lhs} = ${this.rhs};`+M}optimizeNames(M,F){if(!(this.lhs instanceof t.Name&&!M[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,M,F),this}get names(){const M=this.lhs instanceof t.Name?{}:{...this.lhs.names};return N(M,this.rhs)}}class u extends a{constructor(M,F,J,se){super(M,J,se),this.op=F}render({_n:M}){return`${this.lhs} ${this.op}= ${this.rhs};`+M}}class l extends s{constructor(M){super(),this.label=M,this.names={}}render({_n:M}){return`${this.label}:`+M}}class c extends s{constructor(M){super(),this.label=M,this.names={}}render({_n:M}){return`break${this.label?` ${this.label}`:""};`+M}}class f extends s{constructor(M){super(),this.error=M}render({_n:M}){return`throw ${this.error};`+M}get names(){return this.error.names}}class d extends s{constructor(M){super(),this.code=M}render({_n:M}){return`${this.code};`+M}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(M,F){return this.code=$(this.code,M,F),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(M=[]){super(),this.nodes=M}render(M){return this.nodes.reduce((F,J)=>F+J.render(M),"")}optimizeNodes(){const{nodes:M}=this;let F=M.length;for(;F--;){const J=M[F].optimizeNodes();Array.isArray(J)?M.splice(F,1,...J):J?M[F]=J:M.splice(F,1)}return M.length>0?this:void 0}optimizeNames(M,F){const{nodes:J}=this;let se=J.length;for(;se--;){const ae=J[se];ae.optimizeNames(M,F)||(D(M,ae.names),J.splice(se,1))}return J.length>0?this:void 0}get names(){return this.nodes.reduce((M,F)=>z(M,F.names),{})}}class p extends h{render(M){return"{"+M._n+super.render(M)+"}"+M._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(M,F){super(F),this.condition=M}render(M){let F=`if(${this.condition})`+super.render(M);return this.else&&(F+="else "+this.else.render(M)),F}optimizeNodes(){super.optimizeNodes();const M=this.condition;if(M===!0)return this.nodes;let F=this.else;if(F){const J=F.optimizeNodes();F=this.else=Array.isArray(J)?new g(J):J}if(F)return M===!1?F instanceof y?F:F.nodes:this.nodes.length?this:new y(B(M),F instanceof y?[F]:F.nodes);if(!(M===!1||!this.nodes.length))return this}optimizeNames(M,F){var J;if(this.else=(J=this.else)===null||J===void 0?void 0:J.optimizeNames(M,F),!!(super.optimizeNames(M,F)||this.else))return this.condition=$(this.condition,M,F),this}get names(){const M=super.names;return N(M,this.condition),this.else&&z(M,this.else.names),M}}y.kind="if";class v extends p{}v.kind="for";class _ extends v{constructor(M){super(),this.iteration=M}render(M){return`for(${this.iteration})`+super.render(M)}optimizeNames(M,F){if(super.optimizeNames(M,F))return this.iteration=$(this.iteration,M,F),this}get names(){return z(super.names,this.iteration.names)}}class b extends v{constructor(M,F,J,se){super(),this.varKind=M,this.name=F,this.from=J,this.to=se}render(M){const F=M.es5?n.varKinds.var:this.varKind,{name:J,from:se,to:ae}=this;return`for(${F} ${J}=${se}; ${J}<${ae}; ${J}++)`+super.render(M)}get names(){const M=N(super.names,this.from);return N(M,this.to)}}class E extends v{constructor(M,F,J,se){super(),this.loop=M,this.varKind=F,this.name=J,this.iterable=se}render(M){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(M)}optimizeNames(M,F){if(super.optimizeNames(M,F))return this.iterable=$(this.iterable,M,F),this}get names(){return z(super.names,this.iterable.names)}}class w extends p{constructor(M,F,J){super(),this.name=M,this.args=F,this.async=J}render(M){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(M)}}w.kind="func";class x extends h{render(M){return"return "+super.render(M)}}x.kind="return";class S extends p{render(M){let F="try"+super.render(M);return this.catch&&(F+=this.catch.render(M)),this.finally&&(F+=this.finally.render(M)),F}optimizeNodes(){var M,F;return super.optimizeNodes(),(M=this.catch)===null||M===void 0||M.optimizeNodes(),(F=this.finally)===null||F===void 0||F.optimizeNodes(),this}optimizeNames(M,F){var J,se;return super.optimizeNames(M,F),(J=this.catch)===null||J===void 0||J.optimizeNames(M,F),(se=this.finally)===null||se===void 0||se.optimizeNames(M,F),this}get names(){const M=super.names;return this.catch&&z(M,this.catch.names),this.finally&&z(M,this.finally.names),M}}class I extends p{constructor(M){super(),this.error=M}render(M){return`catch(${this.error})`+super.render(M)}}I.kind="catch";class C extends p{render(M){return"finally"+super.render(M)}}C.kind="finally";class O{constructor(M,F={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...F,_n:F.lines?`
`:""},this._extScope=M,this._scope=new n.Scope({parent:M}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(M){return this._scope.name(M)}scopeName(M){return this._extScope.name(M)}scopeValue(M,F){const J=this._extScope.value(M,F);return(this._values[J.prefix]||(this._values[J.prefix]=new Set)).add(J),J}getScopeValue(M,F){return this._extScope.getValue(M,F)}scopeRefs(M){return this._extScope.scopeRefs(M,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(M,F,J,se){const ae=this._scope.toName(F);return J!==void 0&&se&&(this._constants[ae.str]=J),this._leafNode(new o(M,ae,J)),ae}const(M,F,J){return this._def(n.varKinds.const,M,F,J)}let(M,F,J){return this._def(n.varKinds.let,M,F,J)}var(M,F,J){return this._def(n.varKinds.var,M,F,J)}assign(M,F,J){return this._leafNode(new a(M,F,J))}add(M,F){return this._leafNode(new u(M,e.operators.ADD,F))}code(M){return typeof M=="function"?M():M!==t.nil&&this._leafNode(new d(M)),this}object(...M){const F=["{"];for(const[J,se]of M)F.length>1&&F.push(","),F.push(J),(J!==se||this.opts.es5)&&(F.push(":"),(0,t.addCodeArg)(F,se));return F.push("}"),new t._Code(F)}if(M,F,J){if(this._blockNode(new y(M)),F&&J)this.code(F).else().code(J).endIf();else if(F)this.code(F).endIf();else if(J)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(M){return this._elseNode(new y(M))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(M,F){return this._blockNode(M),F&&this.code(F).endFor(),this}for(M,F){return this._for(new _(M),F)}forRange(M,F,J,se,ae=this.opts.es5?n.varKinds.var:n.varKinds.let){const ce=this._scope.toName(M);return this._for(new b(ae,ce,F,J),()=>se(ce))}forOf(M,F,J,se=n.varKinds.const){const ae=this._scope.toName(M);if(this.opts.es5){const ce=F instanceof t.Name?F:this.var("_arr",F);return this.forRange("_i",0,(0,t._)`${ce}.length`,le=>{this.var(ae,(0,t._)`${ce}[${le}]`),J(ae)})}return this._for(new E("of",se,ae,F),()=>J(ae))}forIn(M,F,J,se=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(M,(0,t._)`Object.keys(${F})`,J);const ae=this._scope.toName(M);return this._for(new E("in",se,ae,F),()=>J(ae))}endFor(){return this._endBlockNode(v)}label(M){return this._leafNode(new l(M))}break(M){return this._leafNode(new c(M))}return(M){const F=new x;if(this._blockNode(F),this.code(M),F.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(x)}try(M,F,J){if(!F&&!J)throw new Error('CodeGen: "try" without "catch" and "finally"');const se=new S;if(this._blockNode(se),this.code(M),F){const ae=this.name("e");this._currNode=se.catch=new I(ae),F(ae)}return J&&(this._currNode=se.finally=new C,this.code(J)),this._endBlockNode(I,C)}throw(M){return this._leafNode(new f(M))}block(M,F){return this._blockStarts.push(this._nodes.length),M&&this.code(M).endBlock(F),this}endBlock(M){const F=this._blockStarts.pop();if(F===void 0)throw new Error("CodeGen: not in self-balancing block");const J=this._nodes.length-F;if(J<0||M!==void 0&&J!==M)throw new Error(`CodeGen: wrong number of nodes: ${J} vs ${M} expected`);return this._nodes.length=F,this}func(M,F=t.nil,J,se){return this._blockNode(new w(M,F,J)),se&&this.code(se).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(M=1){for(;M-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(M){return this._currNode.nodes.push(M),this}_blockNode(M){this._currNode.nodes.push(M),this._nodes.push(M)}_endBlockNode(M,F){const J=this._currNode;if(J instanceof M||F&&J instanceof F)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${F?`${M.kind}/${F.kind}`:M.kind}"`)}_elseNode(M){const F=this._currNode;if(!(F instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=F.else=M,this}get _root(){return this._nodes[0]}get _currNode(){const M=this._nodes;return M[M.length-1]}set _currNode(M){const F=this._nodes;F[F.length-1]=M}}e.CodeGen=O;function z(H,M){for(const F in M)H[F]=(H[F]||0)+(M[F]||0);return H}function N(H,M){return M instanceof t._CodeOrName?z(H,M.names):H}function $(H,M,F){if(H instanceof t.Name)return J(H);if(!se(H))return H;return new t._Code(H._items.reduce((ae,ce)=>(ce instanceof t.Name&&(ce=J(ce)),ce instanceof t._Code?ae.push(...ce._items):ae.push(ce),ae),[]));function J(ae){const ce=F[ae.str];return ce===void 0||M[ae.str]!==1?ae:(delete M[ae.str],ce)}function se(ae){return ae instanceof t._Code&&ae._items.some(ce=>ce instanceof t.Name&&M[ce.str]===1&&F[ce.str]!==void 0)}}function D(H,M){for(const F in M)H[F]=(H[F]||0)-(M[F]||0)}function B(H){return typeof H=="boolean"||typeof H=="number"||H===null?!H:(0,t._)`!${k(H)}`}e.not=B;const V=P(e.operators.AND);function j(...H){return H.reduce(V)}e.and=j;const G=P(e.operators.OR);function U(...H){return H.reduce(G)}e.or=U;function P(H){return(M,F)=>M===t.nil?F:F===t.nil?M:(0,t._)`${k(M)} ${H} ${k(F)}`}function k(H){return H instanceof t.Name?H:(0,t._)`(${H})`}})(Cn);var Zn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=Cn,n=kA;function r(w){const x={};for(const S of w)x[S]=!0;return x}e.toHash=r;function i(w,x){return typeof x=="boolean"?x:Object.keys(x).length===0?!0:(s(w,x),!o(x,w.self.RULES.all))}e.alwaysValidSchema=i;function s(w,x=w.schema){const{opts:S,self:I}=w;if(!S.strictSchema||typeof x=="boolean")return;const C=I.RULES.keywords;for(const O in x)C[O]||E(w,`unknown keyword: "${O}"`)}e.checkUnknownRules=s;function o(w,x){if(typeof w=="boolean")return!w;for(const S in w)if(x[S])return!0;return!1}e.schemaHasRules=o;function a(w,x){if(typeof w=="boolean")return!w;for(const S in w)if(S!=="$ref"&&x.all[S])return!0;return!1}e.schemaHasRulesButRef=a;function u({topSchemaRef:w,schemaPath:x},S,I,C){if(!C){if(typeof S=="number"||typeof S=="boolean")return S;if(typeof S=="string")return(0,t._)`${S}`}return(0,t._)`${w}${x}${(0,t.getProperty)(I)}`}e.schemaRefOrVal=u;function l(w){return d(decodeURIComponent(w))}e.unescapeFragment=l;function c(w){return encodeURIComponent(f(w))}e.escapeFragment=c;function f(w){return typeof w=="number"?`${w}`:w.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=f;function d(w){return w.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=d;function h(w,x){if(Array.isArray(w))for(const S of w)x(S);else x(w)}e.eachItem=h;function p({mergeNames:w,mergeToName:x,mergeValues:S,resultToName:I}){return(C,O,z,N)=>{const $=z===void 0?O:z instanceof t.Name?(O instanceof t.Name?w(C,O,z):x(C,O,z),z):O instanceof t.Name?(x(C,z,O),O):S(O,z);return N===t.Name&&!($ instanceof t.Name)?I(C,$):$}}e.mergeEvaluated={props:p({mergeNames:(w,x,S)=>w.if((0,t._)`${S} !== true && ${x} !== undefined`,()=>{w.if((0,t._)`${x} === true`,()=>w.assign(S,!0),()=>w.assign(S,(0,t._)`${S} || {}`).code((0,t._)`Object.assign(${S}, ${x})`))}),mergeToName:(w,x,S)=>w.if((0,t._)`${S} !== true`,()=>{x===!0?w.assign(S,!0):(w.assign(S,(0,t._)`${S} || {}`),g(w,S,x))}),mergeValues:(w,x)=>w===!0?!0:{...w,...x},resultToName:m}),items:p({mergeNames:(w,x,S)=>w.if((0,t._)`${S} !== true && ${x} !== undefined`,()=>w.assign(S,(0,t._)`${x} === true ? true : ${S} > ${x} ? ${S} : ${x}`)),mergeToName:(w,x,S)=>w.if((0,t._)`${S} !== true`,()=>w.assign(S,x===!0?!0:(0,t._)`${S} > ${x} ? ${S} : ${x}`)),mergeValues:(w,x)=>w===!0?!0:Math.max(w,x),resultToName:(w,x)=>w.var("items",x)})};function m(w,x){if(x===!0)return w.var("props",!0);const S=w.var("props",(0,t._)`{}`);return x!==void 0&&g(w,S,x),S}e.evaluatedPropsToName=m;function g(w,x,S){Object.keys(S).forEach(I=>w.assign((0,t._)`${x}${(0,t.getProperty)(I)}`,!0))}e.setEvaluated=g;const y={};function v(w,x){return w.scopeValue("func",{ref:x,code:y[x.code]||(y[x.code]=new n._Code(x.code))})}e.useFunc=v;var _;(function(w){w[w.Num=0]="Num",w[w.Str=1]="Str"})(_=e.Type||(e.Type={}));function b(w,x,S){if(w instanceof t.Name){const I=x===_.Num;return S?I?(0,t._)`"[" + ${w} + "]"`:(0,t._)`"['" + ${w} + "']"`:I?(0,t._)`"/" + ${w}`:(0,t._)`"/" + ${w}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return S?(0,t.getProperty)(w).toString():"/"+f(w)}e.getErrorPath=b;function E(w,x,S=w.opts.strictSchema){if(S){if(x=`strict mode: ${x}`,S===!0)throw new Error(x);w.self.logger.warn(x)}}e.checkStrictMode=E})(Zn);var ah={};Object.defineProperty(ah,"__esModule",{value:!0});const $o=Cn,DMt={data:new $o.Name("data"),valCxt:new $o.Name("valCxt"),instancePath:new $o.Name("instancePath"),parentData:new $o.Name("parentData"),parentDataProperty:new $o.Name("parentDataProperty"),rootData:new $o.Name("rootData"),dynamicAnchors:new $o.Name("dynamicAnchors"),vErrors:new $o.Name("vErrors"),errors:new $o.Name("errors"),this:new $o.Name("this"),self:new $o.Name("self"),scope:new $o.Name("scope"),json:new $o.Name("json"),jsonPos:new $o.Name("jsonPos"),jsonLen:new $o.Name("jsonLen"),jsonPart:new $o.Name("jsonPart")};ah.default=DMt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Cn,n=Zn,r=ah;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,_){const{it:b}=g,{gen:E,compositeRule:w,allErrors:x}=b,S=f(g,y,v);_??(w||x)?u(E,S):l(b,(0,t._)`[${S}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:_}=g,{gen:b,compositeRule:E,allErrors:w}=_,x=f(g,y,v);u(b,x),E||w||l(_,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:_,errsCount:b,it:E}){if(b===void 0)throw new Error("ajv implementation error");const w=g.name("err");g.forRange("i",b,r.default.errors,x=>{g.const(w,(0,t._)`${r.default.vErrors}[${x}]`),g.if((0,t._)`${w}.instancePath === undefined`,()=>g.assign((0,t._)`${w}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${w}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${w}.schema`,v),g.assign((0,t._)`${w}.data`,_))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:_,schemaEnv:b}=g;b.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:_,it:b}=g,E=[h(b,v),p(g,v)];return m(g,y,E),_.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let b=_?y:(0,t.str)`${y}/${g}`;return v&&(b=(0,t.str)`${b}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,b]}function m(g,{params:y,message:v},_){const{keyword:b,data:E,schemaValue:w,it:x}=g,{opts:S,propertyName:I,topSchemaRef:C,schemaPath:O}=x;_.push([c.keyword,b],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),S.messages&&_.push([c.message,typeof v=="function"?v(g):v]),S.verbose&&_.push([c.schema,w],[c.parentSchema,(0,t._)`${C}${O}`],[r.default.data,E]),I&&_.push([c.propertyName,I])}})(gI);Object.defineProperty(jw,"__esModule",{value:!0});jw.boolOrEmptySchema=jw.topBoolOrEmptySchema=void 0;const LMt=gI,MMt=Cn,FMt=ah,BMt={message:"boolean schema is false"};function jMt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?JDe(e,!1):typeof n=="object"&&n.$async===!0?t.return(FMt.default.data):(t.assign((0,MMt._)`${r}.errors`,null),t.return(!0))}jw.topBoolOrEmptySchema=jMt;function zMt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),JDe(e)):n.var(t,!0)}jw.boolOrEmptySchema=zMt;function JDe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,LMt.reportError)(i,BMt,void 0,t)}var yI={},H1={};Object.defineProperty(H1,"__esModule",{value:!0});H1.getRules=H1.isJSONType=void 0;const UMt=["string","number","integer","boolean","null","object","array"],VMt=new Set(UMt);function HMt(e){return typeof e=="string"&&VMt.has(e)}H1.isJSONType=HMt;function qMt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}H1.getRules=qMt;var hp={};Object.defineProperty(hp,"__esModule",{value:!0});hp.shouldUseRule=hp.shouldUseGroup=hp.schemaHasRulesForType=void 0;function WMt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&ZDe(e,r)}hp.schemaHasRulesForType=WMt;function ZDe(e,t){return t.rules.some(n=>e3e(e,n))}hp.shouldUseGroup=ZDe;function e3e(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}hp.shouldUseRule=e3e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=H1,n=hp,r=gI,i=Cn,s=Zn;var o;(function(_){_[_.Correct=0]="Correct",_[_.Wrong=1]="Wrong"})(o=e.DataType||(e.DataType={}));function a(_){const b=u(_.type);if(b.includes("null")){if(_.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!b.length&&_.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');_.nullable===!0&&b.push("null")}return b}e.getSchemaTypes=a;function u(_){const b=Array.isArray(_)?_:_?[_]:[];if(b.every(t.isJSONType))return b;throw new Error("type must be JSONType or JSONType[]: "+b.join(","))}e.getJSONTypes=u;function l(_,b){const{gen:E,data:w,opts:x}=_,S=f(b,x.coerceTypes),I=b.length>0&&!(S.length===0&&b.length===1&&(0,n.schemaHasRulesForType)(_,b[0]));if(I){const C=m(b,w,x.strictNumbers,o.Wrong);E.if(C,()=>{S.length?d(_,b,S):y(_)})}return I}e.coerceAndCheckDataType=l;const c=new Set(["string","number","integer","boolean","null"]);function f(_,b){return b?_.filter(E=>c.has(E)||b==="array"&&E==="array"):[]}function d(_,b,E){const{gen:w,data:x,opts:S}=_,I=w.let("dataType",(0,i._)`typeof ${x}`),C=w.let("coerced",(0,i._)`undefined`);S.coerceTypes==="array"&&w.if((0,i._)`${I} == 'object' && Array.isArray(${x}) && ${x}.length == 1`,()=>w.assign(x,(0,i._)`${x}[0]`).assign(I,(0,i._)`typeof ${x}`).if(m(b,x,S.strictNumbers),()=>w.assign(C,x))),w.if((0,i._)`${C} !== undefined`);for(const z of E)(c.has(z)||z==="array"&&S.coerceTypes==="array")&&O(z);w.else(),y(_),w.endIf(),w.if((0,i._)`${C} !== undefined`,()=>{w.assign(x,C),h(_,C)});function O(z){switch(z){case"string":w.elseIf((0,i._)`${I} == "number" || ${I} == "boolean"`).assign(C,(0,i._)`"" + ${x}`).elseIf((0,i._)`${x} === null`).assign(C,(0,i._)`""`);return;case"number":w.elseIf((0,i._)`${I} == "boolean" || ${x} === null
              || (${I} == "string" && ${x} && ${x} == +${x})`).assign(C,(0,i._)`+${x}`);return;case"integer":w.elseIf((0,i._)`${I} === "boolean" || ${x} === null
              || (${I} === "string" && ${x} && ${x} == +${x} && !(${x} % 1))`).assign(C,(0,i._)`+${x}`);return;case"boolean":w.elseIf((0,i._)`${x} === "false" || ${x} === 0 || ${x} === null`).assign(C,!1).elseIf((0,i._)`${x} === "true" || ${x} === 1`).assign(C,!0);return;case"null":w.elseIf((0,i._)`${x} === "" || ${x} === 0 || ${x} === false`),w.assign(C,null);return;case"array":w.elseIf((0,i._)`${I} === "string" || ${I} === "number"
              || ${I} === "boolean" || ${x} === null`).assign(C,(0,i._)`[${x}]`)}}}function h({gen:_,parentData:b,parentDataProperty:E},w){_.if((0,i._)`${b} !== undefined`,()=>_.assign((0,i._)`${b}[${E}]`,w))}function p(_,b,E,w=o.Correct){const x=w===o.Correct?i.operators.EQ:i.operators.NEQ;let S;switch(_){case"null":return(0,i._)`${b} ${x} null`;case"array":S=(0,i._)`Array.isArray(${b})`;break;case"object":S=(0,i._)`${b} && typeof ${b} == "object" && !Array.isArray(${b})`;break;case"integer":S=I((0,i._)`!(${b} % 1) && !isNaN(${b})`);break;case"number":S=I();break;default:return(0,i._)`typeof ${b} ${x} ${_}`}return w===o.Correct?S:(0,i.not)(S);function I(C=i.nil){return(0,i.and)((0,i._)`typeof ${b} == "number"`,C,E?(0,i._)`isFinite(${b})`:i.nil)}}e.checkDataType=p;function m(_,b,E,w){if(_.length===1)return p(_[0],b,E,w);let x;const S=(0,s.toHash)(_);if(S.array&&S.object){const I=(0,i._)`typeof ${b} != "object"`;x=S.null?I:(0,i._)`!${b} || ${I}`,delete S.null,delete S.array,delete S.object}else x=i.nil;S.number&&delete S.integer;for(const I in S)x=(0,i.and)(x,p(I,b,E,w));return x}e.checkDataTypes=m;const g={message:({schema:_})=>`must be ${_}`,params:({schema:_,schemaValue:b})=>typeof _=="string"?(0,i._)`{type: ${_}}`:(0,i._)`{type: ${b}}`};function y(_){const b=v(_);(0,r.reportError)(b,g)}e.reportTypeError=y;function v(_){const{gen:b,data:E,schema:w}=_,x=(0,s.schemaRefOrVal)(_,w,"type");return{gen:b,keyword:"type",data:E,schema:w.type,schemaCode:x,schemaValue:x,parentSchema:w,params:{},it:_}}})(yI);var B4={};Object.defineProperty(B4,"__esModule",{value:!0});B4.assignDefaults=void 0;const g_=Cn,GMt=Zn;function YMt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)zpe(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>zpe(e,s,i.default))}B4.assignDefaults=YMt;function zpe(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,g_._)`${s}${(0,g_.getProperty)(t)}`;if(i){(0,GMt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,g_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,g_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,g_._)`${a} = ${(0,g_.stringify)(n)}`)}var pd={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.validateUnion=Tn.validateArray=Tn.usePattern=Tn.callValidateCode=Tn.schemaProperties=Tn.allSchemaProperties=Tn.noPropertyInData=Tn.propertyInData=Tn.isOwnProperty=Tn.hasPropFunc=Tn.reportMissingProp=Tn.checkMissingProp=Tn.checkReportMissingProp=void 0;const Yr=Cn,rQ=Zn,mm=ah,KMt=Zn;function XMt(e,t){const{gen:n,data:r,it:i}=e;n.if(sQ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Yr._)`${t}`},!0),e.error()})}Tn.checkReportMissingProp=XMt;function QMt({gen:e,data:t,it:{opts:n}},r,i){return(0,Yr.or)(...r.map(s=>(0,Yr.and)(sQ(e,t,s,n.ownProperties),(0,Yr._)`${i} = ${s}`)))}Tn.checkMissingProp=QMt;function JMt(e,t){e.setParams({missingProperty:t},!0),e.error()}Tn.reportMissingProp=JMt;function t3e(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Yr._)`Object.prototype.hasOwnProperty`})}Tn.hasPropFunc=t3e;function iQ(e,t,n){return(0,Yr._)`${t3e(e)}.call(${t}, ${n})`}Tn.isOwnProperty=iQ;function ZMt(e,t,n,r){const i=(0,Yr._)`${t}${(0,Yr.getProperty)(n)} !== undefined`;return r?(0,Yr._)`${i} && ${iQ(e,t,n)}`:i}Tn.propertyInData=ZMt;function sQ(e,t,n,r){const i=(0,Yr._)`${t}${(0,Yr.getProperty)(n)} === undefined`;return r?(0,Yr.or)(i,(0,Yr.not)(iQ(e,t,n))):i}Tn.noPropertyInData=sQ;function n3e(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Tn.allSchemaProperties=n3e;function e6t(e,t){return n3e(t).filter(n=>!(0,rQ.alwaysValidSchema)(e,t[n]))}Tn.schemaProperties=e6t;function t6t({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,Yr._)`${e}, ${t}, ${r}${i}`:t,f=[[mm.default.instancePath,(0,Yr.strConcat)(mm.default.instancePath,s)],[mm.default.parentData,o.parentData],[mm.default.parentDataProperty,o.parentDataProperty],[mm.default.rootData,mm.default.rootData]];o.opts.dynamicRef&&f.push([mm.default.dynamicAnchors,mm.default.dynamicAnchors]);const d=(0,Yr._)`${c}, ${n.object(...f)}`;return u!==Yr.nil?(0,Yr._)`${a}.call(${u}, ${d})`:(0,Yr._)`${a}(${d})`}Tn.callValidateCode=t6t;const n6t=(0,Yr._)`new RegExp`;function r6t({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,Yr._)`${i.code==="new RegExp"?n6t:(0,KMt.useFunc)(e,i)}(${n}, ${r})`})}Tn.usePattern=r6t;function i6t(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,Yr._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:rQ.Type.Num},s),t.if((0,Yr.not)(s),a)})}}Tn.validateArray=i6t;function s6t(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,rQ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,Yr._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,Yr.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Tn.validateUnion=s6t;Object.defineProperty(pd,"__esModule",{value:!0});pd.validateKeywordUsage=pd.validSchemaType=pd.funcKeywordCode=pd.macroKeywordCode=void 0;const ha=Cn,$y=ah,o6t=Tn,a6t=gI;function u6t(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=r3e(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:ha.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}pd.macroKeywordCode=u6t;function l6t(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;f6t(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=r3e(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&Upe(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&Upe(e),g(()=>c6t(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,ha._)`await `),v=>r.assign(f,!1).if((0,ha._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,ha._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,ha._)`${c}.errors`;return r.assign(y,null),m(ha.nil),y}function m(y=t.async?(0,ha._)`await `:ha.nil){const v=u.opts.passContext?$y.default.this:$y.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,ha._)`${y}${(0,o6t.callValidateCode)(e,c,v,_)}`,t.modifying)}function g(y){var v;r.if((0,ha.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}pd.funcKeywordCode=l6t;function Upe(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,ha._)`${r.parentData}[${r.parentDataProperty}]`))}function c6t(e,t){const{gen:n}=e;n.if((0,ha._)`Array.isArray(${t})`,()=>{n.assign($y.default.vErrors,(0,ha._)`${$y.default.vErrors} === null ? ${t} : ${$y.default.vErrors}.concat(${t})`).assign($y.default.errors,(0,ha._)`${$y.default.vErrors}.length`),(0,a6t.extendErrors)(e)},()=>e.error())}function f6t({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function r3e(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,ha.stringify)(n)})}function d6t(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}pd.validSchemaType=d6t;function h6t({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}pd.validateKeywordUsage=h6t;var Ag={};Object.defineProperty(Ag,"__esModule",{value:!0});Ag.extendSubschemaMode=Ag.extendSubschemaData=Ag.getSubschema=void 0;const ad=Cn,i3e=Zn;function p6t(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,ad._)`${e.schemaPath}${(0,ad.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,ad._)`${e.schemaPath}${(0,ad.getProperty)(t)}${(0,ad.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,i3e.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Ag.getSubschema=p6t;function m6t(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,ad._)`${t.data}${(0,ad.getProperty)(n)}`,!0);u(d),e.errorPath=(0,ad.str)`${l}${(0,i3e.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,ad._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof ad.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}Ag.extendSubschemaData=m6t;function g6t(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}Ag.extendSubschemaMode=g6t;var lo={},s3e={exports:{}},eg=s3e.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};h$(t,r,i,e,"",e)};eg.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};eg.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};eg.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};eg.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function h$(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in eg.arrayKeywords)for(var d=0;d<f.length;d++)h$(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in eg.propsKeywords){if(f&&typeof f=="object")for(var h in f)h$(e,t,n,f[h],i+"/"+c+"/"+y6t(h),s,i,c,r,h)}else(c in eg.keywords||e.allKeys&&!(c in eg.skipKeywords))&&h$(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function y6t(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var v6t=s3e.exports;Object.defineProperty(lo,"__esModule",{value:!0});lo.getSchemaRefs=lo.resolveUrl=lo.normalizeId=lo._getFullPath=lo.getFullPath=lo.inlineRef=void 0;const _6t=Zn,b6t=wY,w6t=v6t,E6t=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function x6t(e,t=!0){return typeof e=="boolean"?!0:t===!0?!NV(e):t?o3e(e)<=t:!1}lo.inlineRef=x6t;const S6t=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function NV(e){for(const t in e){if(S6t.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(NV)||typeof n=="object"&&NV(n))return!0}return!1}function o3e(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!E6t.has(n)&&(typeof e[n]=="object"&&(0,_6t.eachItem)(e[n],r=>t+=o3e(r)),t===1/0))return 1/0}return t}function a3e(e,t="",n){n!==!1&&(t=zb(t));const r=e.parse(t);return u3e(e,r)}lo.getFullPath=a3e;function u3e(e,t){return e.serialize(t).split("#")[0]+"#"}lo._getFullPath=u3e;const T6t=/#\/?$/;function zb(e){return e?e.replace(T6t,""):""}lo.normalizeId=zb;function A6t(e,t,n){return n=zb(n),e.resolve(t,n)}lo.resolveUrl=A6t;const C6t=/^[a-z_][-a-z0-9._]*$/i;function I6t(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=zb(e[n]||t),s={"":i},o=a3e(r,i,!1),a={},u=new Set;return w6t(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(_){const b=this.opts.uriResolver.resolve;if(_=zb(g?b(g,_):_),u.has(_))throw c(_);u.add(_);let E=this.refs[_];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,_):_!==zb(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function v(_){if(typeof _=="string"){if(!C6t.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function l(f,d,h){if(d!==void 0&&!b6t(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}lo.getSchemaRefs=I6t;Object.defineProperty(nf,"__esModule",{value:!0});nf.getData=nf.KeywordCxt=nf.validateFunctionCode=void 0;const l3e=jw,Vpe=yI,oQ=hp,m3=yI,O6t=B4,a2=pd,XB=Ag,It=Cn,Gt=ah,P6t=lo,pp=Zn,dS=gI;function k6t(e){if(d3e(e)&&(h3e(e),f3e(e))){N6t(e);return}c3e(e,()=>(0,l3e.topBoolOrEmptySchema)(e))}nf.validateFunctionCode=k6t;function c3e({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,It._)`${Gt.default.data}, ${Gt.default.valCxt}`,r.$async,()=>{e.code((0,It._)`"use strict"; ${Hpe(n,i)}`),R6t(e,i),e.code(s)}):e.func(t,(0,It._)`${Gt.default.data}, ${$6t(i)}`,r.$async,()=>e.code(Hpe(n,i)).code(s))}function $6t(e){return(0,It._)`{${Gt.default.instancePath}="", ${Gt.default.parentData}, ${Gt.default.parentDataProperty}, ${Gt.default.rootData}=${Gt.default.data}${e.dynamicRef?(0,It._)`, ${Gt.default.dynamicAnchors}={}`:It.nil}}={}`}function R6t(e,t){e.if(Gt.default.valCxt,()=>{e.var(Gt.default.instancePath,(0,It._)`${Gt.default.valCxt}.${Gt.default.instancePath}`),e.var(Gt.default.parentData,(0,It._)`${Gt.default.valCxt}.${Gt.default.parentData}`),e.var(Gt.default.parentDataProperty,(0,It._)`${Gt.default.valCxt}.${Gt.default.parentDataProperty}`),e.var(Gt.default.rootData,(0,It._)`${Gt.default.valCxt}.${Gt.default.rootData}`),t.dynamicRef&&e.var(Gt.default.dynamicAnchors,(0,It._)`${Gt.default.valCxt}.${Gt.default.dynamicAnchors}`)},()=>{e.var(Gt.default.instancePath,(0,It._)`""`),e.var(Gt.default.parentData,(0,It._)`undefined`),e.var(Gt.default.parentDataProperty,(0,It._)`undefined`),e.var(Gt.default.rootData,Gt.default.data),t.dynamicRef&&e.var(Gt.default.dynamicAnchors,(0,It._)`{}`)})}function N6t(e){const{schema:t,opts:n,gen:r}=e;c3e(e,()=>{n.$comment&&t.$comment&&m3e(e),B6t(e),r.let(Gt.default.vErrors,null),r.let(Gt.default.errors,0),n.unevaluated&&D6t(e),p3e(e),U6t(e)})}function D6t(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,It._)`${n}.evaluated`),t.if((0,It._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,It._)`${e.evaluated}.props`,(0,It._)`undefined`)),t.if((0,It._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,It._)`${e.evaluated}.items`,(0,It._)`undefined`))}function Hpe(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,It._)`/*# sourceURL=${n} */`:It.nil}function L6t(e,t){if(d3e(e)&&(h3e(e),f3e(e))){M6t(e,t);return}(0,l3e.boolOrEmptySchema)(e,t)}function f3e({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function d3e(e){return typeof e.schema!="boolean"}function M6t(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&m3e(e),j6t(e),z6t(e);const s=r.const("_errs",Gt.default.errors);p3e(e,s),r.var(t,(0,It._)`${s} === ${Gt.default.errors}`)}function h3e(e){(0,pp.checkUnknownRules)(e),F6t(e)}function p3e(e,t){if(e.opts.jtd)return qpe(e,[],!1,t);const n=(0,Vpe.getSchemaTypes)(e.schema),r=(0,Vpe.coerceAndCheckDataType)(e,n);qpe(e,n,!r,t)}function F6t(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,pp.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function B6t(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,pp.checkStrictMode)(e,"default is ignored in the schema root")}function j6t(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,P6t.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function z6t(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function m3e({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,It._)`${Gt.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,It.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,It._)`${Gt.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function U6t(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,It._)`${Gt.default.errors} === 0`,()=>t.return(Gt.default.data),()=>t.throw((0,It._)`new ${i}(${Gt.default.vErrors})`)):(t.assign((0,It._)`${r}.errors`,Gt.default.vErrors),s.unevaluated&&V6t(e),t.return((0,It._)`${Gt.default.errors} === 0`))}function V6t({gen:e,evaluated:t,props:n,items:r}){n instanceof It.Name&&e.assign((0,It._)`${t}.props`,n),r instanceof It.Name&&e.assign((0,It._)`${t}.items`,r)}function qpe(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,pp.schemaHasRulesButRef)(s,c))){i.block(()=>v3e(e,"$ref",c.all.$ref.definition));return}u.jtd||H6t(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,oQ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,m3.checkDataType)(d.type,o,u.strictNumbers)),Wpe(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,m3.reportTypeError)(e)),i.endIf()):Wpe(e,d),a||i.if((0,It._)`${Gt.default.errors} === ${r||0}`))}}function Wpe(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,O6t.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,oQ.shouldUseRule)(r,s)&&v3e(e,s.keyword,s.definition,t.type)})}function H6t(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(q6t(e,t),e.opts.allowUnionTypes||W6t(e,t),G6t(e,e.dataTypes))}function q6t(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{g3e(e.dataTypes,n)||aQ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),K6t(e,t)}}function W6t(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&aQ(e,"use allowUnionTypes to allow union type keyword")}function G6t(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,oQ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>Y6t(t,o))&&aQ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function Y6t(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function g3e(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function K6t(e,t){const n=[];for(const r of e.dataTypes)g3e(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function aQ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,pp.checkStrictMode)(e,t,e.opts.strictTypes)}class y3e{constructor(t,n,r){if((0,a2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,pp.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",_3e(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,a2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Gt.default.errors))}result(t,n,r){this.failResult((0,It.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,It.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,It._)`${n} !== undefined && (${(0,It.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?dS.reportExtraError:dS.reportError)(this,this.def.error,n)}$dataError(){(0,dS.reportError)(this,this.def.$dataError||dS.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,dS.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=It.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=It.nil,n=It.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,It.or)((0,It._)`${i} === undefined`,n)),t!==It.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==It.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,It.or)(o(),a());function o(){if(r.length){if(!(n instanceof It.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,It._)`${(0,m3.checkDataTypes)(u,n,s.opts.strictNumbers,m3.DataType.Wrong)}`}return It.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,It._)`!${u}(${n})`}return It.nil}}subschema(t,n){const r=(0,XB.getSubschema)(this.it,t);(0,XB.extendSubschemaData)(r,this.it,t),(0,XB.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return L6t(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=pp.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=pp.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,It.Name)),!0}}nf.KeywordCxt=y3e;function v3e(e,t,n,r){const i=new y3e(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,a2.funcKeywordCode)(i,n):"macro"in n?(0,a2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,a2.funcKeywordCode)(i,n)}const X6t=/^\/(?:[^~]|~0|~1)*$/,Q6t=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function _3e(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return Gt.default.rootData;if(e[0]==="/"){if(!X6t.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=Gt.default.rootData}else{const l=Q6t.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,It._)`${s}${(0,It.getProperty)((0,pp.unescapeJsonPointer)(l))}`,o=(0,It._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}nf.getData=_3e;var vI={};Object.defineProperty(vI,"__esModule",{value:!0});class J6t extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}vI.default=J6t;var _I={};Object.defineProperty(_I,"__esModule",{value:!0});const QB=lo;class Z6t extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,QB.resolveUrl)(t,n,r),this.missingSchema=(0,QB.normalizeId)((0,QB.getFullPath)(t,this.missingRef))}}_I.default=Z6t;var eu={};Object.defineProperty(eu,"__esModule",{value:!0});eu.resolveSchema=eu.getCompilingSchema=eu.resolveRef=eu.compileSchema=eu.SchemaEnv=void 0;const wc=Cn,e4t=vI,ny=ah,Uc=lo,Gpe=Zn,t4t=nf;class j4{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Uc.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}eu.SchemaEnv=j4;function uQ(e){const t=b3e.call(this,e);if(t)return t;const n=(0,Uc.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new wc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:e4t.default,code:(0,wc._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:ny.default.data,parentData:ny.default.parentData,parentDataProperty:ny.default.parentDataProperty,dataNames:[ny.default.data],dataPathArr:[wc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,wc.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:wc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,wc._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,t4t.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(ny.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${ny.default.self}`,`${ny.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof wc.Name?void 0:p,items:m instanceof wc.Name?void 0:m,dynamicProps:p instanceof wc.Name,dynamicItems:m instanceof wc.Name},h.source&&(h.source.evaluated=(0,wc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}eu.compileSchema=uQ;function n4t(e,t,n){var r;n=(0,Uc.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=s4t.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new j4({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=r4t.call(this,s)}eu.resolveRef=n4t;function r4t(e){return(0,Uc.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:uQ.call(this,e)}function b3e(e){for(const t of this._compilations)if(i4t(t,e))return t}eu.getCompilingSchema=b3e;function i4t(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function s4t(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||z4.call(this,e,t)}function z4(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Uc._getFullPath)(this.opts.uriResolver,n);let i=(0,Uc.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return JB.call(this,n,e);const s=(0,Uc.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=z4.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:JB.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||uQ.call(this,o),s===(0,Uc.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Uc.resolveUrl)(this.opts.uriResolver,i,l)),new j4({schema:a,schemaId:u,root:e,baseId:i})}return JB.call(this,n,o)}}eu.resolveSchema=z4;const o4t=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function JB(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,Gpe.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!o4t.has(a)&&l&&(t=(0,Uc.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,Gpe.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Uc.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=z4.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new j4({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const a4t="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",u4t="Meta-schema for $data reference (JSON AnySchema extension proposal)",l4t="object",c4t=["$data"],f4t={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},d4t=!1,h4t={$id:a4t,description:u4t,type:l4t,required:c4t,properties:f4t,additionalProperties:d4t};var lQ={},DV={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(nu,function(n){function r(){for(var ne=arguments.length,Q=Array(ne),ie=0;ie<ne;ie++)Q[ie]=arguments[ie];if(Q.length>1){Q[0]=Q[0].slice(0,-1);for(var ve=Q.length-1,ye=1;ye<ve;++ye)Q[ye]=Q[ye].slice(1,-1);return Q[ve]=Q[ve].slice(1),Q.join("")}else return Q[0]}function i(ne){return"(?:"+ne+")"}function s(ne){return ne===void 0?"undefined":ne===null?"null":Object.prototype.toString.call(ne).split(" ").pop().split("]").shift().toLowerCase()}function o(ne){return ne.toUpperCase()}function a(ne){return ne!=null?ne instanceof Array?ne:typeof ne.length!="number"||ne.split||ne.setInterval||ne.call?[ne]:Array.prototype.slice.call(ne):[]}function u(ne,Q){var ie=ne;if(Q)for(var ve in Q)ie[ve]=Q[ve];return ie}function l(ne){var Q="[A-Za-z]",ie="[0-9]",ve=r(ie,"[A-Fa-f]"),ye=i(i("%[EFef]"+ve+"%"+ve+ve+"%"+ve+ve)+"|"+i("%[89A-Fa-f]"+ve+"%"+ve+ve)+"|"+i("%"+ve+ve)),mt="[\\:\\/\\?\\#\\[\\]\\@]",Ce="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",dt=r(mt,Ce),Bt=ne?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",St=ne?"[\\uE000-\\uF8FF]":"[]",Ht=r(Q,ie,"[\\-\\.\\_\\~]",Bt);i(Q+r(Q,ie,"[\\+\\-\\.]")+"*"),i(i(ye+"|"+r(Ht,Ce,"[\\:]"))+"*");var fn=i(i("25[0-5]")+"|"+i("2[0-4]"+ie)+"|"+i("1"+ie+ie)+"|"+i("0?[1-9]"+ie)+"|0?0?"+ie),Tr=i(fn+"\\."+fn+"\\."+fn+"\\."+fn),zt=i(ve+"{1,4}"),pr=i(i(zt+"\\:"+zt)+"|"+Tr),Qt=i(i(zt+"\\:")+"{6}"+pr),er=i("\\:\\:"+i(zt+"\\:")+"{5}"+pr),ni=i(i(zt)+"?\\:\\:"+i(zt+"\\:")+"{4}"+pr),cs=i(i(i(zt+"\\:")+"{0,1}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{3}"+pr),Fi=i(i(i(zt+"\\:")+"{0,2}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{2}"+pr),aa=i(i(i(zt+"\\:")+"{0,3}"+zt)+"?\\:\\:"+zt+"\\:"+pr),Zs=i(i(i(zt+"\\:")+"{0,4}"+zt)+"?\\:\\:"+pr),mi=i(i(i(zt+"\\:")+"{0,5}"+zt)+"?\\:\\:"+zt),vt=i(i(i(zt+"\\:")+"{0,6}"+zt)+"?\\:\\:"),wn=i([Qt,er,ni,cs,Fi,aa,Zs,mi,vt].join("|")),Br=i(i(Ht+"|"+ye)+"+");i("[vV]"+ve+"+\\."+r(Ht,Ce,"[\\:]")+"+"),i(i(ye+"|"+r(Ht,Ce))+"*");var Os=i(ye+"|"+r(Ht,Ce,"[\\:\\@]"));return i(i(ye+"|"+r(Ht,Ce,"[\\@]"))+"+"),i(i(Os+"|"+r("[\\/\\?]",St))+"*"),{NOT_SCHEME:new RegExp(r("[^]",Q,ie,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",Ht,Ce),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",Ht,Ce),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",Ht,Ce),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",Ht,Ce),"g"),NOT_QUERY:new RegExp(r("[^\\%]",Ht,Ce,"[\\:\\@\\/\\?]",St),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",Ht,Ce,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",Ht,Ce),"g"),UNRESERVED:new RegExp(Ht,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",Ht,dt),"g"),PCT_ENCODED:new RegExp(ye,"g"),IPV4ADDRESS:new RegExp("^("+Tr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+wn+")"+i(i("\\%25|\\%(?!"+ve+"{2})")+"("+Br+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function ne(Q,ie){var ve=[],ye=!0,mt=!1,Ce=void 0;try{for(var dt=Q[Symbol.iterator](),Bt;!(ye=(Bt=dt.next()).done)&&(ve.push(Bt.value),!(ie&&ve.length===ie));ye=!0);}catch(St){mt=!0,Ce=St}finally{try{!ye&&dt.return&&dt.return()}finally{if(mt)throw Ce}}return ve}return function(Q,ie){if(Array.isArray(Q))return Q;if(Symbol.iterator in Object(Q))return ne(Q,ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ne){if(Array.isArray(ne)){for(var Q=0,ie=Array(ne.length);Q<ne.length;Q++)ie[Q]=ne[Q];return ie}else return Array.from(ne)},p=2147483647,m=36,g=1,y=26,v=38,_=700,b=72,E=128,w="-",x=/^xn--/,S=/[^\0-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=m-g,z=Math.floor,N=String.fromCharCode;function $(ne){throw new RangeError(C[ne])}function D(ne,Q){for(var ie=[],ve=ne.length;ve--;)ie[ve]=Q(ne[ve]);return ie}function B(ne,Q){var ie=ne.split("@"),ve="";ie.length>1&&(ve=ie[0]+"@",ne=ie[1]),ne=ne.replace(I,".");var ye=ne.split("."),mt=D(ye,Q).join(".");return ve+mt}function V(ne){for(var Q=[],ie=0,ve=ne.length;ie<ve;){var ye=ne.charCodeAt(ie++);if(ye>=55296&&ye<=56319&&ie<ve){var mt=ne.charCodeAt(ie++);(mt&64512)==56320?Q.push(((ye&1023)<<10)+(mt&1023)+65536):(Q.push(ye),ie--)}else Q.push(ye)}return Q}var j=function(Q){return String.fromCodePoint.apply(String,h(Q))},G=function(Q){return Q-48<10?Q-22:Q-65<26?Q-65:Q-97<26?Q-97:m},U=function(Q,ie){return Q+22+75*(Q<26)-((ie!=0)<<5)},P=function(Q,ie,ve){var ye=0;for(Q=ve?z(Q/_):Q>>1,Q+=z(Q/ie);Q>O*y>>1;ye+=m)Q=z(Q/O);return z(ye+(O+1)*Q/(Q+v))},k=function(Q){var ie=[],ve=Q.length,ye=0,mt=E,Ce=b,dt=Q.lastIndexOf(w);dt<0&&(dt=0);for(var Bt=0;Bt<dt;++Bt)Q.charCodeAt(Bt)>=128&&$("not-basic"),ie.push(Q.charCodeAt(Bt));for(var St=dt>0?dt+1:0;St<ve;){for(var Ht=ye,fn=1,Tr=m;;Tr+=m){St>=ve&&$("invalid-input");var zt=G(Q.charCodeAt(St++));(zt>=m||zt>z((p-ye)/fn))&&$("overflow"),ye+=zt*fn;var pr=Tr<=Ce?g:Tr>=Ce+y?y:Tr-Ce;if(zt<pr)break;var Qt=m-pr;fn>z(p/Qt)&&$("overflow"),fn*=Qt}var er=ie.length+1;Ce=P(ye-Ht,er,Ht==0),z(ye/er)>p-mt&&$("overflow"),mt+=z(ye/er),ye%=er,ie.splice(ye++,0,mt)}return String.fromCodePoint.apply(String,ie)},H=function(Q){var ie=[];Q=V(Q);var ve=Q.length,ye=E,mt=0,Ce=b,dt=!0,Bt=!1,St=void 0;try{for(var Ht=Q[Symbol.iterator](),fn;!(dt=(fn=Ht.next()).done);dt=!0){var Tr=fn.value;Tr<128&&ie.push(N(Tr))}}catch(Se){Bt=!0,St=Se}finally{try{!dt&&Ht.return&&Ht.return()}finally{if(Bt)throw St}}var zt=ie.length,pr=zt;for(zt&&ie.push(w);pr<ve;){var Qt=p,er=!0,ni=!1,cs=void 0;try{for(var Fi=Q[Symbol.iterator](),aa;!(er=(aa=Fi.next()).done);er=!0){var Zs=aa.value;Zs>=ye&&Zs<Qt&&(Qt=Zs)}}catch(Se){ni=!0,cs=Se}finally{try{!er&&Fi.return&&Fi.return()}finally{if(ni)throw cs}}var mi=pr+1;Qt-ye>z((p-mt)/mi)&&$("overflow"),mt+=(Qt-ye)*mi,ye=Qt;var vt=!0,wn=!1,Br=void 0;try{for(var Os=Q[Symbol.iterator](),Fa;!(vt=(Fa=Os.next()).done);vt=!0){var q=Fa.value;if(q<ye&&++mt>p&&$("overflow"),q==ye){for(var te=mt,K=m;;K+=m){var fe=K<=Ce?g:K>=Ce+y?y:K-Ce;if(te<fe)break;var pe=te-fe,oe=m-fe;ie.push(N(U(fe+pe%oe,0))),te=z(pe/oe)}ie.push(N(U(te,0))),Ce=P(mt,mi,pr==zt),mt=0,++pr}}}catch(Se){wn=!0,Br=Se}finally{try{!vt&&Os.return&&Os.return()}finally{if(wn)throw Br}}++mt,++ye}return ie.join("")},M=function(Q){return B(Q,function(ie){return x.test(ie)?k(ie.slice(4).toLowerCase()):ie})},F=function(Q){return B(Q,function(ie){return S.test(ie)?"xn--"+H(ie):ie})},J={version:"2.1.0",ucs2:{decode:V,encode:j},decode:k,encode:H,toASCII:F,toUnicode:M},se={};function ae(ne){var Q=ne.charCodeAt(0),ie=void 0;return Q<16?ie="%0"+Q.toString(16).toUpperCase():Q<128?ie="%"+Q.toString(16).toUpperCase():Q<2048?ie="%"+(Q>>6|192).toString(16).toUpperCase()+"%"+(Q&63|128).toString(16).toUpperCase():ie="%"+(Q>>12|224).toString(16).toUpperCase()+"%"+(Q>>6&63|128).toString(16).toUpperCase()+"%"+(Q&63|128).toString(16).toUpperCase(),ie}function ce(ne){for(var Q="",ie=0,ve=ne.length;ie<ve;){var ye=parseInt(ne.substr(ie+1,2),16);if(ye<128)Q+=String.fromCharCode(ye),ie+=3;else if(ye>=194&&ye<224){if(ve-ie>=6){var mt=parseInt(ne.substr(ie+4,2),16);Q+=String.fromCharCode((ye&31)<<6|mt&63)}else Q+=ne.substr(ie,6);ie+=6}else if(ye>=224){if(ve-ie>=9){var Ce=parseInt(ne.substr(ie+4,2),16),dt=parseInt(ne.substr(ie+7,2),16);Q+=String.fromCharCode((ye&15)<<12|(Ce&63)<<6|dt&63)}else Q+=ne.substr(ie,9);ie+=9}else Q+=ne.substr(ie,3),ie+=3}return Q}function le(ne,Q){function ie(ve){var ye=ce(ve);return ye.match(Q.UNRESERVED)?ye:ve}return ne.scheme&&(ne.scheme=String(ne.scheme).replace(Q.PCT_ENCODED,ie).toLowerCase().replace(Q.NOT_SCHEME,"")),ne.userinfo!==void 0&&(ne.userinfo=String(ne.userinfo).replace(Q.PCT_ENCODED,ie).replace(Q.NOT_USERINFO,ae).replace(Q.PCT_ENCODED,o)),ne.host!==void 0&&(ne.host=String(ne.host).replace(Q.PCT_ENCODED,ie).toLowerCase().replace(Q.NOT_HOST,ae).replace(Q.PCT_ENCODED,o)),ne.path!==void 0&&(ne.path=String(ne.path).replace(Q.PCT_ENCODED,ie).replace(ne.scheme?Q.NOT_PATH:Q.NOT_PATH_NOSCHEME,ae).replace(Q.PCT_ENCODED,o)),ne.query!==void 0&&(ne.query=String(ne.query).replace(Q.PCT_ENCODED,ie).replace(Q.NOT_QUERY,ae).replace(Q.PCT_ENCODED,o)),ne.fragment!==void 0&&(ne.fragment=String(ne.fragment).replace(Q.PCT_ENCODED,ie).replace(Q.NOT_FRAGMENT,ae).replace(Q.PCT_ENCODED,o)),ne}function ge(ne){return ne.replace(/^0*(.*)/,"$1")||"0"}function ue(ne,Q){var ie=ne.match(Q.IPV4ADDRESS)||[],ve=d(ie,2),ye=ve[1];return ye?ye.split(".").map(ge).join("."):ne}function Fe(ne,Q){var ie=ne.match(Q.IPV6ADDRESS)||[],ve=d(ie,3),ye=ve[1],mt=ve[2];if(ye){for(var Ce=ye.toLowerCase().split("::").reverse(),dt=d(Ce,2),Bt=dt[0],St=dt[1],Ht=St?St.split(":").map(ge):[],fn=Bt.split(":").map(ge),Tr=Q.IPV4ADDRESS.test(fn[fn.length-1]),zt=Tr?7:8,pr=fn.length-zt,Qt=Array(zt),er=0;er<zt;++er)Qt[er]=Ht[er]||fn[pr+er]||"";Tr&&(Qt[zt-1]=ue(Qt[zt-1],Q));var ni=Qt.reduce(function(mi,vt,wn){if(!vt||vt==="0"){var Br=mi[mi.length-1];Br&&Br.index+Br.length===wn?Br.length++:mi.push({index:wn,length:1})}return mi},[]),cs=ni.sort(function(mi,vt){return vt.length-mi.length})[0],Fi=void 0;if(cs&&cs.length>1){var aa=Qt.slice(0,cs.index),Zs=Qt.slice(cs.index+cs.length);Fi=aa.join(":")+"::"+Zs.join(":")}else Fi=Qt.join(":");return mt&&(Fi+="%"+mt),Fi}else return ne}var $e=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ge="".match(/(){0}/)[1]===void 0;function Re(ne){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie={},ve=Q.iri!==!1?f:c;Q.reference==="suffix"&&(ne=(Q.scheme?Q.scheme+":":"")+"//"+ne);var ye=ne.match($e);if(ye){Ge?(ie.scheme=ye[1],ie.userinfo=ye[3],ie.host=ye[4],ie.port=parseInt(ye[5],10),ie.path=ye[6]||"",ie.query=ye[7],ie.fragment=ye[8],isNaN(ie.port)&&(ie.port=ye[5])):(ie.scheme=ye[1]||void 0,ie.userinfo=ne.indexOf("@")!==-1?ye[3]:void 0,ie.host=ne.indexOf("//")!==-1?ye[4]:void 0,ie.port=parseInt(ye[5],10),ie.path=ye[6]||"",ie.query=ne.indexOf("?")!==-1?ye[7]:void 0,ie.fragment=ne.indexOf("#")!==-1?ye[8]:void 0,isNaN(ie.port)&&(ie.port=ne.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?ye[4]:void 0)),ie.host&&(ie.host=Fe(ue(ie.host,ve),ve)),ie.scheme===void 0&&ie.userinfo===void 0&&ie.host===void 0&&ie.port===void 0&&!ie.path&&ie.query===void 0?ie.reference="same-document":ie.scheme===void 0?ie.reference="relative":ie.fragment===void 0?ie.reference="absolute":ie.reference="uri",Q.reference&&Q.reference!=="suffix"&&Q.reference!==ie.reference&&(ie.error=ie.error||"URI is not a "+Q.reference+" reference.");var mt=se[(Q.scheme||ie.scheme||"").toLowerCase()];if(!Q.unicodeSupport&&(!mt||!mt.unicodeSupport)){if(ie.host&&(Q.domainHost||mt&&mt.domainHost))try{ie.host=J.toASCII(ie.host.replace(ve.PCT_ENCODED,ce).toLowerCase())}catch(Ce){ie.error=ie.error||"Host's domain name can not be converted to ASCII via punycode: "+Ce}le(ie,c)}else le(ie,ve);mt&&mt.parse&&mt.parse(ie,Q)}else ie.error=ie.error||"URI can not be parsed.";return ie}function Oe(ne,Q){var ie=Q.iri!==!1?f:c,ve=[];return ne.userinfo!==void 0&&(ve.push(ne.userinfo),ve.push("@")),ne.host!==void 0&&ve.push(Fe(ue(String(ne.host),ie),ie).replace(ie.IPV6ADDRESS,function(ye,mt,Ce){return"["+mt+(Ce?"%25"+Ce:"")+"]"})),(typeof ne.port=="number"||typeof ne.port=="string")&&(ve.push(":"),ve.push(String(ne.port))),ve.length?ve.join(""):void 0}var Me=/^\.\.?\//,Ut=/^\/\.(\/|$)/,Qe=/^\/\.\.(\/|$)/,je=/^\/?(?:.|\n)*?(?=\/|$)/;function wt(ne){for(var Q=[];ne.length;)if(ne.match(Me))ne=ne.replace(Me,"");else if(ne.match(Ut))ne=ne.replace(Ut,"/");else if(ne.match(Qe))ne=ne.replace(Qe,"/"),Q.pop();else if(ne==="."||ne==="..")ne="";else{var ie=ne.match(je);if(ie){var ve=ie[0];ne=ne.slice(ve.length),Q.push(ve)}else throw new Error("Unexpected dot segment condition")}return Q.join("")}function et(ne){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie=Q.iri?f:c,ve=[],ye=se[(Q.scheme||ne.scheme||"").toLowerCase()];if(ye&&ye.serialize&&ye.serialize(ne,Q),ne.host&&!ie.IPV6ADDRESS.test(ne.host)){if(Q.domainHost||ye&&ye.domainHost)try{ne.host=Q.iri?J.toUnicode(ne.host):J.toASCII(ne.host.replace(ie.PCT_ENCODED,ce).toLowerCase())}catch(dt){ne.error=ne.error||"Host's domain name can not be converted to "+(Q.iri?"Unicode":"ASCII")+" via punycode: "+dt}}le(ne,ie),Q.reference!=="suffix"&&ne.scheme&&(ve.push(ne.scheme),ve.push(":"));var mt=Oe(ne,Q);if(mt!==void 0&&(Q.reference!=="suffix"&&ve.push("//"),ve.push(mt),ne.path&&ne.path.charAt(0)!=="/"&&ve.push("/")),ne.path!==void 0){var Ce=ne.path;!Q.absolutePath&&(!ye||!ye.absolutePath)&&(Ce=wt(Ce)),mt===void 0&&(Ce=Ce.replace(/^\/\//,"/%2F")),ve.push(Ce)}return ne.query!==void 0&&(ve.push("?"),ve.push(ne.query)),ne.fragment!==void 0&&(ve.push("#"),ve.push(ne.fragment)),ve.join("")}function ct(ne,Q){var ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ve=arguments[3],ye={};return ve||(ne=Re(et(ne,ie),ie),Q=Re(et(Q,ie),ie)),ie=ie||{},!ie.tolerant&&Q.scheme?(ye.scheme=Q.scheme,ye.userinfo=Q.userinfo,ye.host=Q.host,ye.port=Q.port,ye.path=wt(Q.path||""),ye.query=Q.query):(Q.userinfo!==void 0||Q.host!==void 0||Q.port!==void 0?(ye.userinfo=Q.userinfo,ye.host=Q.host,ye.port=Q.port,ye.path=wt(Q.path||""),ye.query=Q.query):(Q.path?(Q.path.charAt(0)==="/"?ye.path=wt(Q.path):((ne.userinfo!==void 0||ne.host!==void 0||ne.port!==void 0)&&!ne.path?ye.path="/"+Q.path:ne.path?ye.path=ne.path.slice(0,ne.path.lastIndexOf("/")+1)+Q.path:ye.path=Q.path,ye.path=wt(ye.path)),ye.query=Q.query):(ye.path=ne.path,Q.query!==void 0?ye.query=Q.query:ye.query=ne.query),ye.userinfo=ne.userinfo,ye.host=ne.host,ye.port=ne.port),ye.scheme=ne.scheme),ye.fragment=Q.fragment,ye}function ft(ne,Q,ie){var ve=u({scheme:"null"},ie);return et(ct(Re(ne,ve),Re(Q,ve),ve,!0),ve)}function jt(ne,Q){return typeof ne=="string"?ne=et(Re(ne,Q),Q):s(ne)==="object"&&(ne=Re(et(ne,Q),Q)),ne}function Dn(ne,Q,ie){return typeof ne=="string"?ne=et(Re(ne,ie),ie):s(ne)==="object"&&(ne=et(ne,ie)),typeof Q=="string"?Q=et(Re(Q,ie),ie):s(Q)==="object"&&(Q=et(Q,ie)),ne===Q}function he(ne,Q){return ne&&ne.toString().replace(!Q||!Q.iri?c.ESCAPE:f.ESCAPE,ae)}function _e(ne,Q){return ne&&ne.toString().replace(!Q||!Q.iri?c.PCT_ENCODED:f.PCT_ENCODED,ce)}var ke={scheme:"http",domainHost:!0,parse:function(Q,ie){return Q.host||(Q.error=Q.error||"HTTP URIs must have a host."),Q},serialize:function(Q,ie){var ve=String(Q.scheme).toLowerCase()==="https";return(Q.port===(ve?443:80)||Q.port==="")&&(Q.port=void 0),Q.path||(Q.path="/"),Q}},it={scheme:"https",domainHost:ke.domainHost,parse:ke.parse,serialize:ke.serialize};function Ye(ne){return typeof ne.secure=="boolean"?ne.secure:String(ne.scheme).toLowerCase()==="wss"}var ut={scheme:"ws",domainHost:!0,parse:function(Q,ie){var ve=Q;return ve.secure=Ye(ve),ve.resourceName=(ve.path||"/")+(ve.query?"?"+ve.query:""),ve.path=void 0,ve.query=void 0,ve},serialize:function(Q,ie){if((Q.port===(Ye(Q)?443:80)||Q.port==="")&&(Q.port=void 0),typeof Q.secure=="boolean"&&(Q.scheme=Q.secure?"wss":"ws",Q.secure=void 0),Q.resourceName){var ve=Q.resourceName.split("?"),ye=d(ve,2),mt=ye[0],Ce=ye[1];Q.path=mt&&mt!=="/"?mt:void 0,Q.query=Ce,Q.resourceName=void 0}return Q.fragment=void 0,Q}},tt={scheme:"wss",domainHost:ut.domainHost,parse:ut.parse,serialize:ut.serialize},_t={},In="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Wt="[0-9A-Fa-f]",Vt=i(i("%[EFef]"+Wt+"%"+Wt+Wt+"%"+Wt+Wt)+"|"+i("%[89A-Fa-f]"+Wt+"%"+Wt+Wt)+"|"+i("%"+Wt+Wt)),hr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Yn="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",ku=r(Yn,'[\\"\\\\]'),Mr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",ls=new RegExp(In,"g"),ti=new RegExp(Vt,"g"),Ei=new RegExp(r("[^]",hr,"[\\.]",'[\\"]',ku),"g"),qr=new RegExp(r("[^]",In,Mr),"g"),yr=qr;function yt(ne){var Q=ce(ne);return Q.match(ls)?Q:ne}var Fr={scheme:"mailto",parse:function(Q,ie){var ve=Q,ye=ve.to=ve.path?ve.path.split(","):[];if(ve.path=void 0,ve.query){for(var mt=!1,Ce={},dt=ve.query.split("&"),Bt=0,St=dt.length;Bt<St;++Bt){var Ht=dt[Bt].split("=");switch(Ht[0]){case"to":for(var fn=Ht[1].split(","),Tr=0,zt=fn.length;Tr<zt;++Tr)ye.push(fn[Tr]);break;case"subject":ve.subject=_e(Ht[1],ie);break;case"body":ve.body=_e(Ht[1],ie);break;default:mt=!0,Ce[_e(Ht[0],ie)]=_e(Ht[1],ie);break}}mt&&(ve.headers=Ce)}ve.query=void 0;for(var pr=0,Qt=ye.length;pr<Qt;++pr){var er=ye[pr].split("@");if(er[0]=_e(er[0]),ie.unicodeSupport)er[1]=_e(er[1],ie).toLowerCase();else try{er[1]=J.toASCII(_e(er[1],ie).toLowerCase())}catch(ni){ve.error=ve.error||"Email address's domain name can not be converted to ASCII via punycode: "+ni}ye[pr]=er.join("@")}return ve},serialize:function(Q,ie){var ve=Q,ye=a(Q.to);if(ye){for(var mt=0,Ce=ye.length;mt<Ce;++mt){var dt=String(ye[mt]),Bt=dt.lastIndexOf("@"),St=dt.slice(0,Bt).replace(ti,yt).replace(ti,o).replace(Ei,ae),Ht=dt.slice(Bt+1);try{Ht=ie.iri?J.toUnicode(Ht):J.toASCII(_e(Ht,ie).toLowerCase())}catch(pr){ve.error=ve.error||"Email address's domain name can not be converted to "+(ie.iri?"Unicode":"ASCII")+" via punycode: "+pr}ye[mt]=St+"@"+Ht}ve.path=ye.join(",")}var fn=Q.headers=Q.headers||{};Q.subject&&(fn.subject=Q.subject),Q.body&&(fn.body=Q.body);var Tr=[];for(var zt in fn)fn[zt]!==_t[zt]&&Tr.push(zt.replace(ti,yt).replace(ti,o).replace(qr,ae)+"="+fn[zt].replace(ti,yt).replace(ti,o).replace(yr,ae));return Tr.length&&(ve.query=Tr.join("&")),ve}},xi=/^([^\:]+)\:(.*)/,Yi={scheme:"urn",parse:function(Q,ie){var ve=Q.path&&Q.path.match(xi),ye=Q;if(ve){var mt=ie.scheme||ye.scheme||"urn",Ce=ve[1].toLowerCase(),dt=ve[2],Bt=mt+":"+(ie.nid||Ce),St=se[Bt];ye.nid=Ce,ye.nss=dt,ye.path=void 0,St&&(ye=St.parse(ye,ie))}else ye.error=ye.error||"URN can not be parsed.";return ye},serialize:function(Q,ie){var ve=ie.scheme||Q.scheme||"urn",ye=Q.nid,mt=ve+":"+(ie.nid||ye),Ce=se[mt];Ce&&(Q=Ce.serialize(Q,ie));var dt=Q,Bt=Q.nss;return dt.path=(ye||ie.nid)+":"+Bt,dt}},Js=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ma={scheme:"urn:uuid",parse:function(Q,ie){var ve=Q;return ve.uuid=ve.nss,ve.nss=void 0,!ie.tolerant&&(!ve.uuid||!ve.uuid.match(Js))&&(ve.error=ve.error||"UUID is not valid."),ve},serialize:function(Q,ie){var ve=Q;return ve.nss=(Q.uuid||"").toLowerCase(),ve}};se[ke.scheme]=ke,se[it.scheme]=it,se[ut.scheme]=ut,se[tt.scheme]=tt,se[Fr.scheme]=Fr,se[Yi.scheme]=Yi,se[Ma.scheme]=Ma,n.SCHEMES=se,n.pctEncChar=ae,n.pctDecChars=ce,n.parse=Re,n.removeDotSegments=wt,n.serialize=et,n.resolveComponents=ct,n.resolve=ft,n.normalize=jt,n.equal=Dn,n.escapeComponent=he,n.unescapeComponent=_e,Object.defineProperty(n,"__esModule",{value:!0})})})(DV,DV.exports);var p4t=DV.exports;Object.defineProperty(lQ,"__esModule",{value:!0});const w3e=p4t;w3e.code='require("ajv/dist/runtime/uri").default';lQ.default=w3e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=nf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Cn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=vI,i=_I,s=H1,o=eu,a=Cn,u=lo,l=yI,c=Zn,f=h4t,d=lQ,h=(U,P)=>new RegExp(U,P);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(U){var P,k,H,M,F,J,se,ae,ce,le,ge,ue,Fe,$e,Ge,Re,Oe,Me,Ut,Qe,je,wt,et,ct,ft;const jt=U.strict,Dn=(P=U.code)===null||P===void 0?void 0:P.optimize,he=Dn===!0||Dn===void 0?1:Dn||0,_e=(H=(k=U.code)===null||k===void 0?void 0:k.regExp)!==null&&H!==void 0?H:h,ke=(M=U.uriResolver)!==null&&M!==void 0?M:d.default;return{strictSchema:(J=(F=U.strictSchema)!==null&&F!==void 0?F:jt)!==null&&J!==void 0?J:!0,strictNumbers:(ae=(se=U.strictNumbers)!==null&&se!==void 0?se:jt)!==null&&ae!==void 0?ae:!0,strictTypes:(le=(ce=U.strictTypes)!==null&&ce!==void 0?ce:jt)!==null&&le!==void 0?le:"log",strictTuples:(ue=(ge=U.strictTuples)!==null&&ge!==void 0?ge:jt)!==null&&ue!==void 0?ue:"log",strictRequired:($e=(Fe=U.strictRequired)!==null&&Fe!==void 0?Fe:jt)!==null&&$e!==void 0?$e:!1,code:U.code?{...U.code,optimize:he,regExp:_e}:{optimize:he,regExp:_e},loopRequired:(Ge=U.loopRequired)!==null&&Ge!==void 0?Ge:v,loopEnum:(Re=U.loopEnum)!==null&&Re!==void 0?Re:v,meta:(Oe=U.meta)!==null&&Oe!==void 0?Oe:!0,messages:(Me=U.messages)!==null&&Me!==void 0?Me:!0,inlineRefs:(Ut=U.inlineRefs)!==null&&Ut!==void 0?Ut:!0,schemaId:(Qe=U.schemaId)!==null&&Qe!==void 0?Qe:"$id",addUsedSchema:(je=U.addUsedSchema)!==null&&je!==void 0?je:!0,validateSchema:(wt=U.validateSchema)!==null&&wt!==void 0?wt:!0,validateFormats:(et=U.validateFormats)!==null&&et!==void 0?et:!0,unicodeRegExp:(ct=U.unicodeRegExp)!==null&&ct!==void 0?ct:!0,int32range:(ft=U.int32range)!==null&&ft!==void 0?ft:!0,uriResolver:ke}}class b{constructor(P={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,P=this.opts={...P,..._(P)};const{es5:k,lines:H}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:k,lines:H}),this.logger=z(P.logger);const M=P.validateFormats;P.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,P,"NOT SUPPORTED"),E.call(this,y,P,"DEPRECATED","warn"),this._metaOpts=C.call(this),P.formats&&S.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),P.keywords&&I.call(this,P.keywords),typeof P.meta=="object"&&this.addMetaSchema(P.meta),x.call(this),P.validateFormats=M}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:P,meta:k,schemaId:H}=this.opts;let M=f;H==="id"&&(M={...f},M.id=M.$id,delete M.$id),k&&P&&this.addMetaSchema(M,M[H],!1)}defaultMeta(){const{meta:P,schemaId:k}=this.opts;return this.opts.defaultMeta=typeof P=="object"?P[k]||P:void 0}validate(P,k){let H;if(typeof P=="string"){if(H=this.getSchema(P),!H)throw new Error(`no schema with key or ref "${P}"`)}else H=this.compile(P);const M=H(k);return"$async"in H||(this.errors=H.errors),M}compile(P,k){const H=this._addSchema(P,k);return H.validate||this._compileSchemaEnv(H)}compileAsync(P,k){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:H}=this.opts;return M.call(this,P,k);async function M(le,ge){await F.call(this,le.$schema);const ue=this._addSchema(le,ge);return ue.validate||J.call(this,ue)}async function F(le){le&&!this.getSchema(le)&&await M.call(this,{$ref:le},!0)}async function J(le){try{return this._compileSchemaEnv(le)}catch(ge){if(!(ge instanceof i.default))throw ge;return se.call(this,ge),await ae.call(this,ge.missingSchema),J.call(this,le)}}function se({missingSchema:le,missingRef:ge}){if(this.refs[le])throw new Error(`AnySchema ${le} is loaded but ${ge} cannot be resolved`)}async function ae(le){const ge=await ce.call(this,le);this.refs[le]||await F.call(this,ge.$schema),this.refs[le]||this.addSchema(ge,le,k)}async function ce(le){const ge=this._loading[le];if(ge)return ge;try{return await(this._loading[le]=H(le))}finally{delete this._loading[le]}}}addSchema(P,k,H,M=this.opts.validateSchema){if(Array.isArray(P)){for(const J of P)this.addSchema(J,void 0,H,M);return this}let F;if(typeof P=="object"){const{schemaId:J}=this.opts;if(F=P[J],F!==void 0&&typeof F!="string")throw new Error(`schema ${J} must be string`)}return k=(0,u.normalizeId)(k||F),this._checkUnique(k),this.schemas[k]=this._addSchema(P,H,k,M,!0),this}addMetaSchema(P,k,H=this.opts.validateSchema){return this.addSchema(P,k,!0,H),this}validateSchema(P,k){if(typeof P=="boolean")return!0;let H;if(H=P.$schema,H!==void 0&&typeof H!="string")throw new Error("$schema must be a string");if(H=H||this.opts.defaultMeta||this.defaultMeta(),!H)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const M=this.validate(H,P);if(!M&&k){const F="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(F);else throw new Error(F)}return M}getSchema(P){let k;for(;typeof(k=w.call(this,P))=="string";)P=k;if(k===void 0){const{schemaId:H}=this.opts,M=new o.SchemaEnv({schema:{},schemaId:H});if(k=o.resolveSchema.call(this,M,P),!k)return;this.refs[P]=k}return k.validate||this._compileSchemaEnv(k)}removeSchema(P){if(P instanceof RegExp)return this._removeAllSchemas(this.schemas,P),this._removeAllSchemas(this.refs,P),this;switch(typeof P){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const k=w.call(this,P);return typeof k=="object"&&this._cache.delete(k.schema),delete this.schemas[P],delete this.refs[P],this}case"object":{const k=P;this._cache.delete(k);let H=P[this.opts.schemaId];return H&&(H=(0,u.normalizeId)(H),delete this.schemas[H],delete this.refs[H]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(P){for(const k of P)this.addKeyword(k);return this}addKeyword(P,k){let H;if(typeof P=="string")H=P,typeof k=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),k.keyword=H);else if(typeof P=="object"&&k===void 0){if(k=P,H=k.keyword,Array.isArray(H)&&!H.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,H,k),!k)return(0,c.eachItem)(H,F=>D.call(this,F)),this;V.call(this,k);const M={...k,type:(0,l.getJSONTypes)(k.type),schemaType:(0,l.getJSONTypes)(k.schemaType)};return(0,c.eachItem)(H,M.type.length===0?F=>D.call(this,F,M):F=>M.type.forEach(J=>D.call(this,F,M,J))),this}getKeyword(P){const k=this.RULES.all[P];return typeof k=="object"?k.definition:!!k}removeKeyword(P){const{RULES:k}=this;delete k.keywords[P],delete k.all[P];for(const H of k.rules){const M=H.rules.findIndex(F=>F.keyword===P);M>=0&&H.rules.splice(M,1)}return this}addFormat(P,k){return typeof k=="string"&&(k=new RegExp(k)),this.formats[P]=k,this}errorsText(P=this.errors,{separator:k=", ",dataVar:H="data"}={}){return!P||P.length===0?"No errors":P.map(M=>`${H}${M.instancePath} ${M.message}`).reduce((M,F)=>M+k+F)}$dataMetaSchema(P,k){const H=this.RULES.all;P=JSON.parse(JSON.stringify(P));for(const M of k){const F=M.split("/").slice(1);let J=P;for(const se of F)J=J[se];for(const se in H){const ae=H[se];if(typeof ae!="object")continue;const{$data:ce}=ae.definition,le=J[se];ce&&le&&(J[se]=G(le))}}return P}_removeAllSchemas(P,k){for(const H in P){const M=P[H];(!k||k.test(H))&&(typeof M=="string"?delete P[H]:M&&!M.meta&&(this._cache.delete(M.schema),delete P[H]))}}_addSchema(P,k,H,M=this.opts.validateSchema,F=this.opts.addUsedSchema){let J;const{schemaId:se}=this.opts;if(typeof P=="object")J=P[se];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof P!="boolean")throw new Error("schema must be object or boolean")}let ae=this._cache.get(P);if(ae!==void 0)return ae;H=(0,u.normalizeId)(J||H);const ce=u.getSchemaRefs.call(this,P,H);return ae=new o.SchemaEnv({schema:P,schemaId:se,meta:k,baseId:H,localRefs:ce}),this._cache.set(ae.schema,ae),F&&!H.startsWith("#")&&(H&&this._checkUnique(H),this.refs[H]=ae),M&&this.validateSchema(P,!0),ae}_checkUnique(P){if(this.schemas[P]||this.refs[P])throw new Error(`schema with key or id "${P}" already exists`)}_compileSchemaEnv(P){if(P.meta?this._compileMetaSchema(P):o.compileSchema.call(this,P),!P.validate)throw new Error("ajv implementation error");return P.validate}_compileMetaSchema(P){const k=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,P)}finally{this.opts=k}}}e.default=b,b.ValidationError=r.default,b.MissingRefError=i.default;function E(U,P,k,H="error"){for(const M in U){const F=M;F in P&&this.logger[H](`${k}: option ${M}. ${U[F]}`)}}function w(U){return U=(0,u.normalizeId)(U),this.schemas[U]||this.refs[U]}function x(){const U=this.opts.schemas;if(U)if(Array.isArray(U))this.addSchema(U);else for(const P in U)this.addSchema(U[P],P)}function S(){for(const U in this.opts.formats){const P=this.opts.formats[U];P&&this.addFormat(U,P)}}function I(U){if(Array.isArray(U)){this.addVocabulary(U);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const P in U){const k=U[P];k.keyword||(k.keyword=P),this.addKeyword(k)}}function C(){const U={...this.opts};for(const P of p)delete U[P];return U}const O={log(){},warn(){},error(){}};function z(U){if(U===!1)return O;if(U===void 0)return console;if(U.log&&U.warn&&U.error)return U;throw new Error("logger must implement log, warn and error methods")}const N=/^[a-z_$][a-z0-9_$:-]*$/i;function $(U,P){const{RULES:k}=this;if((0,c.eachItem)(U,H=>{if(k.keywords[H])throw new Error(`Keyword ${H} is already defined`);if(!N.test(H))throw new Error(`Keyword ${H} has invalid name`)}),!!P&&P.$data&&!("code"in P||"validate"in P))throw new Error('$data keyword must have "code" or "validate" function')}function D(U,P,k){var H;const M=P==null?void 0:P.post;if(k&&M)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:F}=this;let J=M?F.post:F.rules.find(({type:ae})=>ae===k);if(J||(J={type:k,rules:[]},F.rules.push(J)),F.keywords[U]=!0,!P)return;const se={keyword:U,definition:{...P,type:(0,l.getJSONTypes)(P.type),schemaType:(0,l.getJSONTypes)(P.schemaType)}};P.before?B.call(this,J,se,P.before):J.rules.push(se),F.all[U]=se,(H=P.implements)===null||H===void 0||H.forEach(ae=>this.addKeyword(ae))}function B(U,P,k){const H=U.rules.findIndex(M=>M.keyword===k);H>=0?U.rules.splice(H,0,P):(U.rules.push(P),this.logger.warn(`rule ${k} is not defined`))}function V(U){let{metaSchema:P}=U;P!==void 0&&(U.$data&&this.opts.$data&&(P=G(P)),U.validateSchema=this.compile(P,!0))}const j={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function G(U){return{anyOf:[U,j]}}})(QDe);var cQ={},fQ={},dQ={};Object.defineProperty(dQ,"__esModule",{value:!0});const m4t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};dQ.default=m4t;var q1={};Object.defineProperty(q1,"__esModule",{value:!0});q1.callRef=q1.getValidate=void 0;const g4t=_I,Ype=Tn,Ha=Cn,y_=ah,Kpe=eu,OP=Zn,y4t={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Kpe.resolveRef.call(u,l,i,n);if(c===void 0)throw new g4t.default(r.opts.uriResolver,i,n);if(c instanceof Kpe.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return p$(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return p$(e,(0,Ha._)`${p}.validate`,l,l.$async)}function d(p){const m=E3e(e,p);p$(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Ha.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Ha.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function E3e(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Ha._)`${n.scopeValue("wrapper",{ref:t})}.validate`}q1.getValidate=E3e;function p$(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?y_.default.this:Ha.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Ha._)`await ${(0,Ype.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Ha._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Ype.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Ha._)`${p}.errors`;i.assign(y_.default.vErrors,(0,Ha._)`${y_.default.vErrors} === null ? ${m} : ${y_.default.vErrors}.concat(${m})`),i.assign(y_.default.errors,(0,Ha._)`${y_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=OP.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Ha._)`${p}.evaluated.props`);s.props=OP.mergeEvaluated.props(i,y,s.props,Ha.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=OP.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Ha._)`${p}.evaluated.items`);s.items=OP.mergeEvaluated.items(i,y,s.items,Ha.Name)}}}q1.callRef=p$;q1.default=y4t;Object.defineProperty(fQ,"__esModule",{value:!0});const v4t=dQ,_4t=q1,b4t=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",v4t.default,_4t.default];fQ.default=b4t;var hQ={},pQ={};Object.defineProperty(pQ,"__esModule",{value:!0});const g3=Cn,gm=g3.operators,y3={maximum:{okStr:"<=",ok:gm.LTE,fail:gm.GT},minimum:{okStr:">=",ok:gm.GTE,fail:gm.LT},exclusiveMaximum:{okStr:"<",ok:gm.LT,fail:gm.GTE},exclusiveMinimum:{okStr:">",ok:gm.GT,fail:gm.LTE}},w4t={message:({keyword:e,schemaCode:t})=>(0,g3.str)`must be ${y3[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,g3._)`{comparison: ${y3[e].okStr}, limit: ${t}}`},E4t={keyword:Object.keys(y3),type:"number",schemaType:"number",$data:!0,error:w4t,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,g3._)`${n} ${y3[t].fail} ${r} || isNaN(${n})`)}};pQ.default=E4t;var mQ={};Object.defineProperty(mQ,"__esModule",{value:!0});const u2=Cn,x4t={message:({schemaCode:e})=>(0,u2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,u2._)`{multipleOf: ${e}}`},S4t={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:x4t,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,u2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,u2._)`${o} !== parseInt(${o})`;e.fail$data((0,u2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};mQ.default=S4t;var gQ={},yQ={};Object.defineProperty(yQ,"__esModule",{value:!0});function x3e(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}yQ.default=x3e;x3e.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(gQ,"__esModule",{value:!0});const Ry=Cn,T4t=Zn,A4t=yQ,C4t={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Ry.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Ry._)`{limit: ${e}}`},I4t={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:C4t,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Ry.operators.GT:Ry.operators.LT,o=i.opts.unicode===!1?(0,Ry._)`${n}.length`:(0,Ry._)`${(0,T4t.useFunc)(e.gen,A4t.default)}(${n})`;e.fail$data((0,Ry._)`${o} ${s} ${r}`)}};gQ.default=I4t;var vQ={};Object.defineProperty(vQ,"__esModule",{value:!0});const O4t=Tn,v3=Cn,P4t={message:({schemaCode:e})=>(0,v3.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,v3._)`{pattern: ${e}}`},k4t={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:P4t,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,v3._)`(new RegExp(${i}, ${o}))`:(0,O4t.usePattern)(e,r);e.fail$data((0,v3._)`!${a}.test(${t})`)}};vQ.default=k4t;var _Q={};Object.defineProperty(_Q,"__esModule",{value:!0});const l2=Cn,$4t={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,l2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,l2._)`{limit: ${e}}`},R4t={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:$4t,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?l2.operators.GT:l2.operators.LT;e.fail$data((0,l2._)`Object.keys(${n}).length ${i} ${r}`)}};_Q.default=R4t;var bQ={};Object.defineProperty(bQ,"__esModule",{value:!0});const hS=Tn,c2=Cn,N4t=Zn,D4t={message:({params:{missingProperty:e}})=>(0,c2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,c2._)`{missingProperty: ${e}}`},L4t={keyword:"required",type:"object",schemaType:"array",$data:!0,error:D4t,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,N4t.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(c2.nil,f);else for(const h of n)(0,hS.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,hS.checkMissingProp)(e,n,h)),(0,hS.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,hS.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,hS.propertyInData)(t,i,h,a.ownProperties)),t.if((0,c2.not)(p),()=>{e.error(),t.break()})},c2.nil)}}};bQ.default=L4t;var wQ={};Object.defineProperty(wQ,"__esModule",{value:!0});const f2=Cn,M4t={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,f2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,f2._)`{limit: ${e}}`},F4t={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:M4t,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?f2.operators.GT:f2.operators.LT;e.fail$data((0,f2._)`${n}.length ${i} ${r}`)}};wQ.default=F4t;var EQ={},bI={};Object.defineProperty(bI,"__esModule",{value:!0});const S3e=wY;S3e.code='require("ajv/dist/runtime/equal").default';bI.default=S3e;Object.defineProperty(EQ,"__esModule",{value:!0});const ZB=yI,no=Cn,B4t=Zn,j4t=bI,z4t={message:({params:{i:e,j:t}})=>(0,no.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,no._)`{i: ${e}, j: ${t}}`},U4t={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:z4t,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,ZB.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,no._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,no._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,no._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,ZB.checkDataTypes)(l,g,a.opts.strictNumbers,ZB.DataType.Wrong),v=t.const("indices",(0,no._)`{}`);t.for((0,no._)`;${p}--;`,()=>{t.let(g,(0,no._)`${n}[${p}]`),t.if(y,(0,no._)`continue`),l.length>1&&t.if((0,no._)`typeof ${g} == "string"`,(0,no._)`${g} += "_"`),t.if((0,no._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,no._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,no._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,B4t.useFunc)(t,j4t.default),y=t.name("outer");t.label(y).for((0,no._)`;${p}--;`,()=>t.for((0,no._)`${m} = ${p}; ${m}--;`,()=>t.if((0,no._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};EQ.default=U4t;var xQ={};Object.defineProperty(xQ,"__esModule",{value:!0});const LV=Cn,V4t=Zn,H4t=bI,q4t={message:"must be equal to constant",params:({schemaCode:e})=>(0,LV._)`{allowedValue: ${e}}`},W4t={keyword:"const",$data:!0,error:q4t,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,LV._)`!${(0,V4t.useFunc)(t,H4t.default)}(${n}, ${i})`):e.fail((0,LV._)`${s} !== ${n}`)}};xQ.default=W4t;var SQ={};Object.defineProperty(SQ,"__esModule",{value:!0});const iT=Cn,G4t=Zn,Y4t=bI,K4t={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,iT._)`{allowedValues: ${e}}`},X4t={keyword:"enum",schemaType:"array",$data:!0,error:K4t,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,G4t.useFunc)(t,Y4t.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,iT.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,iT._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,iT._)`${l()}(${n}, ${h}[${p}])`:(0,iT._)`${n} === ${m}`}}};SQ.default=X4t;Object.defineProperty(hQ,"__esModule",{value:!0});const Q4t=pQ,J4t=mQ,Z4t=gQ,eFt=vQ,tFt=_Q,nFt=bQ,rFt=wQ,iFt=EQ,sFt=xQ,oFt=SQ,aFt=[Q4t.default,J4t.default,Z4t.default,eFt.default,tFt.default,nFt.default,rFt.default,iFt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},sFt.default,oFt.default];hQ.default=aFt;var TQ={},JE={};Object.defineProperty(JE,"__esModule",{value:!0});JE.validateAdditionalItems=void 0;const Ny=Cn,MV=Zn,uFt={message:({params:{len:e}})=>(0,Ny.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Ny._)`{limit: ${e}}`},lFt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:uFt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,MV.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}T3e(e,r)}};function T3e(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Ny._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Ny._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,MV.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Ny._)`${a} <= ${t.length}`);n.if((0,Ny.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:MV.Type.Num},l),o.allErrors||n.if((0,Ny.not)(l),()=>n.break())})}}JE.validateAdditionalItems=T3e;JE.default=lFt;var AQ={},ZE={};Object.defineProperty(ZE,"__esModule",{value:!0});ZE.validateTuple=void 0;const Xpe=Cn,m$=Zn,cFt=Tn,fFt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return A3e(e,"additionalItems",t);n.items=!0,!(0,m$.alwaysValidSchema)(n,t)&&e.ok((0,cFt.validateArray)(e))}};function A3e(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=m$.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Xpe._)`${s}.length`);n.forEach((f,d)=>{(0,m$.alwaysValidSchema)(a,f)||(r.if((0,Xpe._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,m$.checkStrictMode)(a,g,d.strictTuples)}}}ZE.validateTuple=A3e;ZE.default=fFt;Object.defineProperty(AQ,"__esModule",{value:!0});const dFt=ZE,hFt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,dFt.validateTuple)(e,"items")};AQ.default=hFt;var CQ={};Object.defineProperty(CQ,"__esModule",{value:!0});const Qpe=Cn,pFt=Zn,mFt=Tn,gFt=JE,yFt={message:({params:{len:e}})=>(0,Qpe.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Qpe._)`{limit: ${e}}`},vFt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:yFt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,pFt.alwaysValidSchema)(r,t)&&(i?(0,gFt.validateAdditionalItems)(e,i):e.ok((0,mFt.validateArray)(e)))}};CQ.default=vFt;var IQ={};Object.defineProperty(IQ,"__esModule",{value:!0});const Ol=Cn,PP=Zn,_Ft={message:({params:{min:e,max:t}})=>t===void 0?(0,Ol.str)`must contain at least ${e} valid item(s)`:(0,Ol.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Ol._)`{minContains: ${e}}`:(0,Ol._)`{minContains: ${e}, maxContains: ${t}}`},bFt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:_Ft,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,Ol._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,PP.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,PP.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,PP.alwaysValidSchema)(s,n)){let m=(0,Ol._)`${c} >= ${o}`;a!==void 0&&(m=(0,Ol._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Ol._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:PP.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Ol._)`${m}++`),a===void 0?t.if((0,Ol._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Ol._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Ol._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};IQ.default=bFt;var C3e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Cn,n=Zn,r=Tn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(C3e);var OQ={};Object.defineProperty(OQ,"__esModule",{value:!0});const I3e=Cn,wFt=Zn,EFt={message:"property name must be valid",params:({params:e})=>(0,I3e._)`{propertyName: ${e.propertyName}}`},xFt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:EFt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,wFt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,I3e.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};OQ.default=xFt;var U4={};Object.defineProperty(U4,"__esModule",{value:!0});const kP=Tn,Tc=Cn,SFt=ah,$P=Zn,TFt={message:"must NOT have additional properties",params:({params:e})=>(0,Tc._)`{additionalProperty: ${e.additionalProperty}}`},AFt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:TFt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,$P.alwaysValidSchema)(o,n))return;const l=(0,kP.allSchemaProperties)(r.properties),c=(0,kP.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Tc._)`${s} === ${SFt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,$P.schemaRefOrVal)(o,r.properties,"properties");y=(0,kP.isOwnProperty)(t,v,g)}else l.length?y=(0,Tc.or)(...l.map(v=>(0,Tc._)`${g} === ${v}`)):y=Tc.nil;return c.length&&(y=(0,Tc.or)(y,...c.map(v=>(0,Tc._)`${(0,kP.usePattern)(e,v)}.test(${g})`))),(0,Tc.not)(y)}function h(g){t.code((0,Tc._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,$P.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Tc.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Tc.not)(y),()=>t.break()))}}function m(g,y,v){const _={keyword:"additionalProperties",dataProp:g,dataPropType:$P.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};U4.default=AFt;var PQ={};Object.defineProperty(PQ,"__esModule",{value:!0});const CFt=nf,Jpe=Tn,ej=Zn,Zpe=U4,IFt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Zpe.default.code(new CFt.KeywordCxt(s,Zpe.default,"additionalProperties"));const o=(0,Jpe.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=ej.mergeEvaluated.props(t,(0,ej.toHash)(o),s.props));const a=o.filter(f=>!(0,ej.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,Jpe.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};PQ.default=IFt;var kQ={};Object.defineProperty(kQ,"__esModule",{value:!0});const eme=Tn,RP=Cn,tme=Zn,nme=Zn,OFt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,eme.allSchemaProperties)(n),u=a.filter(m=>(0,tme.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof RP.Name)&&(s.props=(0,nme.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,tme.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,RP._)`${(0,eme.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:nme.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,RP._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,RP.not)(c),()=>t.break())})})}}};kQ.default=OFt;var $Q={};Object.defineProperty($Q,"__esModule",{value:!0});const PFt=Zn,kFt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,PFt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};$Q.default=kFt;var RQ={};Object.defineProperty(RQ,"__esModule",{value:!0});const $Ft=Tn,RFt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:$Ft.validateUnion,error:{message:"must match a schema in anyOf"}};RQ.default=RFt;var NQ={};Object.defineProperty(NQ,"__esModule",{value:!0});const g$=Cn,NFt=Zn,DFt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,g$._)`{passingSchemas: ${e.passing}}`},LFt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:DFt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,NFt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,g$._)`${u} && ${o}`).assign(o,!1).assign(a,(0,g$._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,g$.Name)})})}}};NQ.default=LFt;var DQ={};Object.defineProperty(DQ,"__esModule",{value:!0});const MFt=Zn,FFt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,MFt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};DQ.default=FFt;var LQ={};Object.defineProperty(LQ,"__esModule",{value:!0});const _3=Cn,O3e=Zn,BFt={message:({params:e})=>(0,_3.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,_3._)`{failingKeyword: ${e.ifClause}}`},jFt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:BFt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,O3e.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=rme(r,"then"),s=rme(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,_3.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,_3._)`${c}`):e.setParams({ifClause:c})}}}};function rme(e,t){const n=e.schema[t];return n!==void 0&&!(0,O3e.alwaysValidSchema)(e,n)}LQ.default=jFt;var MQ={};Object.defineProperty(MQ,"__esModule",{value:!0});const zFt=Zn,UFt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,zFt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};MQ.default=UFt;Object.defineProperty(TQ,"__esModule",{value:!0});const VFt=JE,HFt=AQ,qFt=ZE,WFt=CQ,GFt=IQ,YFt=C3e,KFt=OQ,XFt=U4,QFt=PQ,JFt=kQ,ZFt=$Q,e5t=RQ,t5t=NQ,n5t=DQ,r5t=LQ,i5t=MQ;function s5t(e=!1){const t=[ZFt.default,e5t.default,t5t.default,n5t.default,r5t.default,i5t.default,KFt.default,XFt.default,YFt.default,QFt.default,JFt.default];return e?t.push(HFt.default,WFt.default):t.push(VFt.default,qFt.default),t.push(GFt.default),t}TQ.default=s5t;var FQ={},BQ={};Object.defineProperty(BQ,"__esModule",{value:!0});const ji=Cn,o5t={message:({schemaCode:e})=>(0,ji.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ji._)`{format: ${e}}`},a5t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:o5t,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,ji._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,ji._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,ji._)`${m}.type || "string"`).assign(y,(0,ji._)`${m}.validate`),()=>n.assign(g,(0,ji._)`"string"`).assign(y,m)),e.fail$data((0,ji.or)(v(),_()));function v(){return u.strictSchema===!1?ji.nil:(0,ji._)`${o} && !${y}`}function _(){const b=c.$async?(0,ji._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,ji._)`${y}(${r})`,E=(0,ji._)`(typeof ${y} == "function" ? ${b} : ${y}.test(${r}))`;return(0,ji._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(b());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function _(E){const w=E instanceof RegExp?(0,ji.regexpCode)(E):u.code.formats?(0,ji._)`${u.code.formats}${(0,ji.getProperty)(s)}`:void 0,x=n.scopeValue("formats",{key:s,ref:E,code:w});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,ji._)`${x}.validate`]:["string",E,x]}function b(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,ji._)`await ${y}(${r})`}return typeof g=="function"?(0,ji._)`${y}(${r})`:(0,ji._)`${y}.test(${r})`}}}};BQ.default=a5t;Object.defineProperty(FQ,"__esModule",{value:!0});const u5t=BQ,l5t=[u5t.default];FQ.default=l5t;var zw={};Object.defineProperty(zw,"__esModule",{value:!0});zw.contentVocabulary=zw.metadataVocabulary=void 0;zw.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];zw.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(cQ,"__esModule",{value:!0});const c5t=fQ,f5t=hQ,d5t=TQ,h5t=FQ,ime=zw,p5t=[c5t.default,f5t.default,(0,d5t.default)(),h5t.default,ime.metadataVocabulary,ime.contentVocabulary];cQ.default=p5t;var jQ={},P3e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(e.DiscrError||(e.DiscrError={}))})(P3e);Object.defineProperty(jQ,"__esModule",{value:!0});const F_=Cn,FV=P3e,sme=eu,m5t=Zn,g5t={message:({params:{discrError:e,tagName:t}})=>e===FV.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,F_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},y5t={keyword:"discriminator",type:"object",schemaType:"object",error:g5t,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,F_._)`${n}${(0,F_.getProperty)(a)}`);t.if((0,F_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:FV.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,F_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:FV.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,F_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let b=0;b<o.length;b++){let E=o[b];E!=null&&E.$ref&&!(0,m5t.schemaHasRulesButRef)(E,s.self.RULES)&&(E=sme.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,E==null?void 0:E.$ref),E instanceof sme.SchemaEnv&&(E=E.schema));const w=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof w!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(w,b)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:b}){return Array.isArray(b)&&b.includes(a)}function v(b,E){if(b.const)_(b.const,E);else if(b.enum)for(const w of b.enum)_(w,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(b,E){if(typeof b!="string"||b in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[b]=E}}}};jQ.default=y5t;const v5t="http://json-schema.org/draft-07/schema#",_5t="http://json-schema.org/draft-07/schema#",b5t="Core schema meta-schema",w5t={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},E5t=["object","boolean"],x5t={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},S5t={$schema:v5t,$id:_5t,title:b5t,definitions:w5t,type:E5t,properties:x5t,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const n=QDe,r=cQ,i=jQ,s=S5t,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.exports=t=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=nf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Cn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=vI;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=_I;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})($V,$V.exports);var T5t=$V.exports;const k3e=pl(T5t),A5t="#/definitions/StudyConfig",C5t="http://json-schema.org/draft-07/schema#",I5t={Answer:{additionalProperties:!1,description:"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks.",properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},CheckboxResponse:{additionalProperties:!1,description:"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed as checkboxes.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"checkbox",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},DropdownResponse:{additionalProperties:!1,description:"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"dropdown",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"iframe",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{additionalProperties:!1,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},{additionalProperties:!1,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"}]},LikertResponse:{additionalProperties:!1,description:"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the preset. For example, preset: 5 will render 5 radio buttons, and preset: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},preset:{description:"The number of options to render.",type:"number"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},type:{const:"likert",type:"string"}},required:["id","location","preset","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"longText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumericalResponse:{additionalProperties:!1,description:"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"numerical",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},Option:{additionalProperties:!1,description:"The Option interface is used to define the options for a dropdown, slider, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file. The Option interface is used in the Response interface.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:["string","number"]}},required:["label","value"],type:"object"},OrderObject:{additionalProperties:!1,description:"The OrderObject interface is used to define the properties of an order object. This is used to define the order of components in a study. It supports random assignment of trials using a pure random assignment and a latin square.",properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/OrderObject"}]},type:"array"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"}},required:["order","components"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:"The QuestionnaireComponent interface is used to define the properties of a questionnaire component. A QuestionnaireComponent is used to render questions with different response types. The response types are also defined with these documentation. The main use case of this component type is to ask participants questions, without using markdown, websites, images, etc.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:"The RadioResponse interface is used to define the properties of a radio response. RadioResponses render as a radio input with user specified options, and optionally left and right labels.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{type:"string"},type:{const:"radio",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"shortText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},SliderResponse:{additionalProperties:!1,description:"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.",properties:{correctAnswer:{description:"The correct answer to the response. This is used in the data download and can be shown in the admin panel."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"This define the steps in the slider and the extent of the slider.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"slider",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},StudyConfig:{additionalProperties:!1,description:"The StudyConfig interface is used to define the properties of a study configuration. These are the hjson files that live in the public folder. In our repo, one example of this would be public/cleveland/config-cleveland.json.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},baseComponents:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"}]},description:"The components that are used in the study (baseComponents allow PartialComponents which allows for inheriting from them in components).",type:"object"},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/OrderObject",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. This data is also included in the data file that is downloaded at the end of the study, to help identify the study and version.",properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study, shown on the landing page and attached to participant data. This might be useful for seeing which version of the study a participant saw.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses.",properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},O5t={$ref:A5t,$schema:C5t,definitions:I5t},P5t="#/definitions/GlobalConfig",k5t="http://json-schema.org/draft-07/schema#",$5t={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},R5t={$ref:P5t,$schema:k5t,definitions:$5t},$3e=new k3e;$3e.addSchema(R5t);const ome=$3e.getSchema("#/definitions/GlobalConfig"),R3e=new k3e;R3e.addSchema(O5t);const ame=R3e.getSchema("#/definitions/StudyConfig");function N5t(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function V4(e){return e.baseComponent!==void 0}function D5t(e){const t=nQ.parse(e),n=ome(t),r=N5t(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...ome.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function L5t(e){const t=[];return[Object.values(e.components).every(r=>{var i;return V4(r)?!!((i=e.baseComponents)!=null&&i[r.baseComponent]):!0}),t]}function N3e(e,t){const n=nQ.parse(e),r=ame(n),i=L5t(n);if(r&&i[0])return n;throw console.error(`${t} parsing errors`,[...ame.errors||[],...i[1]]),Error(`There was an issue validating your file ${t}`)}function D3e(){const e=lc(),{setAlertModal:t}=Kp(),n=Xp();A.useEffect(()=>{(new URLSearchParams(window.location.search).get("admin")||"f")==="t"||(window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))})},[e,t,n])}function M5t(){const e=V1(),{storageEngine:t}=A0(),{answers:n}=_f(s=>s),[r,i]=A.useState(!1);return A.useEffect(()=>{const s=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(s))},1e3)},[]),D3e(),R.jsx(Ug,{style:{height:"100%"},children:R.jsx(lp,{direction:"column",children:r?R.jsx(Rt,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?R.jsx(mu,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):R.jsxs(R.Fragment,{children:[R.jsx(Rt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),R.jsx(iA,{h:"lg"}),R.jsx(Ug,{children:R.jsx(I0,{color:"blue"})})]})})})}function F5t(){var d;const e=V1(),t=lc(),n=rh()[t],r=e.components[n],i=bY();D3e();const{storageEngine:s}=A0(),o=Xp(),{setAlertModal:a}=Kp();if(A.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return R.jsx(M5t,{});const u=V4(r)&&e.baseComponents?_Y({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return R.jsxs(R.Fragment,{children:[c==="aboveStimulus"&&R.jsx(mu,{text:l}),R.jsx(vD,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),R.jsxs(A.Suspense,{fallback:R.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&R.jsx(hMt,{currentConfig:u}),u.type==="website"&&R.jsx($bt,{currentConfig:u}),u.type==="image"&&R.jsx(Nbt,{currentConfig:u}),u.type==="react-component"&&R.jsx(dMt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&R.jsx(mu,{text:l}),R.jsx(vD,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function B5t(e){const[t]=xG();return R.jsx(cYe,{...e,to:{pathname:e.to,search:t.toString()}})}const BV=["description","instruction","answer","correctAnswer","startTime","endTime","duration","taskOrder"],y$=["participantId","trialId","responseId"];function d2(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function j5t(e,t,n){return Object.entries(e.answers).map(([r,i])=>{const s=r.split("_")[0],o=r.split("_")[1],a=t.components[s],u=V4(a)&&a.baseComponent&&t.baseComponents?_Y({},t.baseComponents[a.baseComponent],a):a,l=i.endTime-i.startTime;return Object.entries(i.answer).map(([f,d])=>{const h={participantId:e.participantId,trialId:s,responseId:f,startTime:new Date(i.startTime).toUTCString(),endTime:new Date(i.endTime).toUTCString(),duration:l};return n.includes("description")&&(h.description=u.description),n.includes("instruction")&&(h.instruction=u.instruction),n.includes("answer")&&(h.answer=d),n.includes("correctAnswer")&&(h.correctAnswer=u.correctAnswer),n.includes("taskOrder")&&(h.taskOrder=o),h}).flat()}).flat()}async function z5t(e,t,n,r,i=[...y$,...BV]){const o=(r||await t.getAllParticipantsData()).map(c=>j5t(c,n,i)).flat(),a=c=>c.replace(/"/g,'""'),u=o.map(c=>i.map(f=>c===null?"":typeof c[f]=="string"?`"${a(c[f])}"`:JSON.stringify(c[f])).join(",")),l=[i.join(","),...u].join(`
`);d2(l,e)}function L3e({opened:e,close:t,filename:n,studyConfig:r,data:i}){const[s,o]=oQe([...y$,...BV]),a=A.useCallback(c=>{y$.every(f=>c.includes(f))&&o(c)},[o]),u=A.useMemo(()=>[...y$,...BV],[]),{storageEngine:l}=A0();return l?R.jsxs(VC,{opened:e,size:"lg",onClose:t,title:R.jsx(Rt,{size:"xl",children:"Download Tidy CSV"}),centered:!0,radius:"md",padding:"xl",children:[R.jsx(At,{children:R.jsx(AAe,{searchable:!0,limit:30,nothingFound:"Property not found",data:u,value:s,onChange:a,label:R.jsx(Rt,{fw:"bold",size:"lg",children:"Select properties to include in tidy csv:"}),placeholder:"Select atleast one property"})}),R.jsxs(lp,{mt:"xl",direction:{base:"column",sm:"row"},gap:{base:"sm",sm:"lg"},justify:{sm:"space-around"},children:[R.jsx(cu,{leftIcon:R.jsx(eQ,{}),onClick:()=>z5t(n,l,r,i,s),children:"Download"}),R.jsx(cu,{onClick:t,color:"red",children:"Close"})]})]}):null}function U5t({studyConfig:e}){const{storageEngine:t}=A0(),[n,{open:r,close:i}]=zT(!1),[s,o]=A.useState(),[a,u]=A.useState(""),l=e.studyMetadata.title.replace(" ","_");A.useEffect(()=>{async function m(){if(t){const g=await t.getCurrentParticipantId(),y=await t.getParticipantData();u(g),o(y)}}m()},[t]);const c=A.useCallback(async()=>{d2(JSON.stringify(s,null,2),`${l}_${a}.json`)},[s]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=A.useState(Math.floor(d/1e3));return A.useEffect(()=>{const m=setInterval(()=>{p(g=>g-1)},1e3);return h<=0?(c(),clearInterval(m),()=>clearInterval(m)):()=>clearInterval(m)},[h]),R.jsxs(Qm,{children:[R.jsx(cu,{leftIcon:R.jsx(iMt,{}),onClick:()=>d2(JSON.stringify(s,null,2),`${l}_${a}.json`),display:"block",children:"Download Current (JSON)"}),R.jsx(cu,{disabled:!(t!=null&&t.isConnected()),leftIcon:R.jsx(GDe,{}),onClick:async()=>{if(!t)return;const m=await t.getAllParticipantsData();d2(JSON.stringify(m,null,2),`${l}_all.json`)},display:"block",children:"Download All (JSON)"}),R.jsx(cu,{disabled:!(t!=null&&t.isConnected()),leftIcon:R.jsx(eQ,{}),onClick:r,display:"block",children:"Download All (Tidy)"}),f&&R.jsxs(Rt,{size:"lg",children:["Study results will be downloaded in"," ",h," ","seconds. If the download does not start automatically, click above to download."]}),R.jsx(L3e,{opened:n,close:i,filename:`${l}_${a}.csv`,studyConfig:e})]})}function M3e(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=M3e(o,t,n,r),r.includes(o.orderPath))break}return i}function F3e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=F3e(s,r)}}),n}function V5t(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function H5t({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s}){const o=w6(),a=Ev(),u=lc(),l=V1(),[c,{close:f,open:d}]=zT(!1),h=e in l.components&&l.components[e],p=s&&s.components.slice(r).includes(e)?M3e(n,e,r,s.orderPath):-1,m=u===p;return R.jsxs(Vi,{position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:c,offset:20,children:[R.jsx(Vi.Target,{children:R.jsx("div",{onMouseEnter:d,onMouseLeave:f,children:R.jsx(HT,{active:m,style:{lineHeight:"32px",height:"32px"},label:R.jsxs("div",{children:[i&&R.jsx(nMt,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),m?R.jsx("strong",{children:e}):e]}),onClick:()=>a(`/${o}/${p}`),disabled:t})})}),h&&(h.description||h.meta)&&wv.createPortal(R.jsx(Vi.Dropdown,{onMouseLeave:f,children:R.jsx(Rt,{size:"sm",children:R.jsxs("div",{children:[h.description&&R.jsxs("div",{children:[R.jsx(Rt,{fw:900,display:"inline-block",mr:2,children:"Description:"}),R.jsx(Rt,{fw:400,component:"span",children:h.description})]}),h.meta&&R.jsxs(Rt,{children:[R.jsx(Rt,{fw:"900",component:"span",children:"Task Meta: "}),R.jsx("pre",{style:{margin:0,padding:0},children:`${JSON.stringify(h.meta,null,2)}`})]})]})})}),document.body)]})}function B3e({configSequence:e,fullSequence:t,participantSequence:n}){let r=h1(e.components);return n&&(r=V5t(h1(e.components),h1(n.components))),R.jsx("div",{children:r.map((i,s)=>{if(typeof i=="string")return R.jsx(H5t,{step:i,disabled:(n==null?void 0:n.components[s])!==i,fullSequence:t,startIndex:s,interruption:e.interruptions&&e.interruptions.findIndex(l=>l.components.includes(i))>-1||!1,subSequence:n},s);const o=n==null?void 0:n.components.find(l=>typeof l!="string"&&l.orderPath===i.orderPath),a=o?qg(o).length-F3e(i,o):0,u=qg(i);return R.jsx(HT,{label:R.jsxs("div",{style:{opacity:a>0?1:.5},children:["Group:",R.jsxs(VT,{ml:5,children:[a,"/",u.length]}),i.interruptions&&R.jsx(VT,{ml:5,color:"orange",children:(o==null?void 0:o.components.filter(l=>{var c;return typeof l=="string"&&((c=i.interruptions)==null?void 0:c.flatMap(f=>f.components).includes(l))}).length)||0}),R.jsx(Rt,{c:"dimmed",display:"inline",mr:5,ml:5,children:i.order}),i.order==="random"||i.order==="latinSquare"?R.jsx(tMt,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px",position:"sticky",backgroundColor:"#fff"},children:R.jsx("div",{style:{borderLeft:"1px solid #e9ecef"},children:R.jsx(B3e,{configSequence:i,participantSequence:o,fullSequence:t})})},s)})})}function j3e(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>j3e(n,`${t}-${r}`))}}function q5t(){const{showAdmin:e,sequence:t}=_f(o=>o),n=lc(),r=rh()[n],i=V1(),s=A.useMemo(()=>{let o=h1(i.sequence);return o=j3e(o,"root"),o.components.push("end"),o},[i.sequence]);return e||r==="end"&&i.uiConfig.autoDownloadStudy?R.jsx(MG,{p:"0",width:{base:300},style:{zIndex:0},children:R.jsxs(LSe,{p:"0",children:[r==="end"&&R.jsxs("div",{style:{padding:10,paddingBottom:15,borderBottom:"1px solid #e9ecef"},children:[R.jsx(Rt,{size:"md",p:10,weight:"bold",children:"Download"}),R.jsx(U5t,{studyConfig:i})]}),R.jsx(Rt,{size:"md",p:10,weight:"bold",children:"Study Sequence"}),R.jsx(B3e,{configSequence:s,participantSequence:t,fullSequence:t})]})}):null}function W5t(){const{config:e}=_f(v=>v),t=rh(),n=Xp(),{toggleShowHelpText:r,toggleShowAdmin:i}=Kp(),{storageEngine:s}=A0(),o=lc(),a=t.length-1,u=o/a*100,[l,c]=A.useState(!1),f=e==null?void 0:e.uiConfig.logoPath,d=e==null?void 0:e.uiConfig.withProgressBar,[h]=A.useState(new URLSearchParams(window.location.search)),p=h.get("admin")||"f",m=w6(),g=JGe(`/${m}`);function y(){s==null||s.nextParticipant(e).then(()=>{window.location.href=g}).catch(v=>{console.error(v)})}return R.jsx(LG,{height:"70",p:"md",children:R.jsxs(Gu,{mt:-7,align:"center",children:[R.jsx(Gu.Col,{span:4,children:R.jsxs(lp,{align:"center",children:[R.jsx(IE,{maw:40,src:`${vf}${f}`,alt:"Study Logo"}),R.jsx(iA,{w:"md"}),R.jsx(Lc,{order:4,children:e==null?void 0:e.studyMetadata.title})]})}),R.jsx(Gu.Col,{span:4,children:d&&R.jsx(KAe,{radius:"md",size:"lg",value:u})}),R.jsx(Gu.Col,{span:4,children:R.jsxs(lp,{align:"center",justify:"flex-end",children:[(e==null?void 0:e.uiConfig.helpTextPath)!==void 0&&R.jsx(cu,{variant:"outline",onClick:()=>n(r()),children:"Help"}),R.jsx(iA,{w:"md"}),p==="t"&&R.jsxs($l,{shadow:"md",width:200,zIndex:1,opened:l,onChange:c,children:[R.jsx($l.Target,{children:R.jsx($R,{size:"lg",children:R.jsx(sMt,{})})}),R.jsxs($l.Dropdown,{children:[R.jsx($l.Item,{icon:R.jsx(Npe,{size:14}),onClick:()=>n(i()),children:"Admin Mode"}),R.jsx($l.Item,{component:"a",href:e!==null?`mailto:${e.uiConfig.contactEmail}`:void 0,icon:R.jsx(aMt,{size:14}),children:"Contact"}),R.jsx($l.Item,{icon:R.jsx(Npe,{size:14}),onClick:()=>y(),children:"Next Participant"})]})]})]})})]})})}function G5t(){var l;const e=(l=V1())==null?void 0:l.uiConfig.sidebar,t=V1(),n=lc(),r=rh()[n],i=t.components[r],s=A.useMemo(()=>{var c;return i?V4(i)&&t.baseComponents?_Y({},(c=t.baseComponents)==null?void 0:c[i.baseComponent],i):i:null},[i]),o=bY(),a=(s==null?void 0:s.instruction)||"",u=(s==null?void 0:s.instructionLocation)==="sidebar"||(s==null?void 0:s.instructionLocation)===void 0;return e&&s?R.jsxs(f1,{bg:"gray.1",display:"block",width:{base:300},style:{zIndex:0,overflowY:"scroll"},children:[u&&a!==""&&R.jsx(f1.Section,{bg:"gray.3",p:"xl",children:R.jsxs(Rt,{c:"gray.9",children:[R.jsx(Rt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),R.jsx(mu,{text:a})]})}),R.jsx(f1.Section,{p:"xl",children:R.jsx(vD,{status:o,config:s,location:"sidebar"},`${r}-sidebar-response-block`)})]}):R.jsx(vD,{status:o,config:s,location:"sidebar",style:{display:"hidden"}},`${r}-sidebar-response-block`)}function Y5t(){const{showHelpText:e,config:t}=_f(o=>o),n=Xp(),{toggleShowHelpText:r}=Kp(),[i,s]=A.useState("");return A.useEffect(()=>{t&&t.uiConfig.helpTextPath&&fetch(`${vf}${t.uiConfig.helpTextPath}`).then(o=>o.text()).then(o=>s(o))},[t]),R.jsx(VC,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:R.jsx(mu,{text:i})})}function K5t(){const{alertModal:e}=_f(o=>o),{setAlertModal:t}=Kp(),n=Xp(),[r,i]=A.useState(e.show),s=A.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return A.useEffect(()=>i(e.show),[e.show]),R.jsx(VC,{opened:r,centered:!0,size:"lg",withCloseButton:!1,styles:{modal:{padding:"0 !important"}},onClose:s,children:R.jsxs(Yxe,{color:"red",radius:"xs",p:"lg",title:"Alert",icon:R.jsx(eMt,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[R.jsx(Rt,{my:"md",children:e.message}),R.jsx(At,{style:{float:"right"},color:"red",children:R.jsx(cu,{onClick:s,color:"red",variant:"filled",children:"Continue Study"})})]})})}function X5t(){const e=A.useRef([]),n=V1().uiConfig.windowEventDebounceTime??100;return A.useEffect(()=>{const r=Ff(d=>{e.current.push([Date.now(),"focus",d.target instanceof HTMLElement?d.target.tagName:""])},n,{maxWait:n}),i=Ff(d=>{e.current.push([Date.now(),"input",d.data??""])},n,{maxWait:n}),s=Ff(d=>{e.current.push([Date.now(),"keypress",d.key])},n,{maxWait:n}),o=Ff(d=>{e.current.push([Date.now(),"mousedown",[d.clientX,d.clientY]])},n,{maxWait:n}),a=Ff(d=>{e.current.push([Date.now(),"mouseup",[d.clientX,d.clientY]])},n,{maxWait:n}),u=Ff(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),l=Ff(d=>{e.current.push([Date.now(),"mousemove",[d.clientX,d.clientY]])},n,{maxWait:n}),c=Ff(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),f=Ff(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",r,!0),window.addEventListener("input",i),window.addEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.addEventListener("resize",u),window.addEventListener("mousemove",l),window.addEventListener("scroll",c),document.addEventListener("visibilitychange",f),()=>{window.removeEventListener("focus",r,!0),window.removeEventListener("input",i),window.removeEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.removeEventListener("resize",u),window.removeEventListener("mousemove",l),window.removeEventListener("scroll",c),document.removeEventListener("visibilitychange",f)}},[]),R.jsx(JCe.Provider,{value:e,children:R.jsxs(FG,{navbar:R.jsx(G5t,{}),aside:R.jsx(q5t,{}),header:R.jsx(W5t,{}),children:[R.jsx(Y5t,{}),R.jsx(K5t,{}),R.jsx(fYe,{})]})})}function Q5t(e,t=!1){return typeof e=="number"?ume(e,t):ume(e.length,t).map(r=>r.map(i=>e[i]))}function ume(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function z3e(e,t,n){for(let i=0;i<e.components.length;i++){const s=e.components[i];typeof s!="string"&&(e.components[i]=z3e(s,t,`${n}-${i}`))}if(e.order==="random"){const i=e.components.sort(()=>.5-Math.random());e.components=i}else e.order==="latinSquare"&&t&&(e.components=t[n].pop().map(i=>i.startsWith("_orderObj")?e.components[+i.slice(9)]:i));let r=e.components.slice(0,e.numSamples!==void 0?e.numSamples:void 0).flat();return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{orderPath:n,components:r.flat()}}function J5t(e,t){const n=h1(e);return z3e(n,t,"root")}function U3e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&U3e(s,t,i,o)})}function Z5t(e){const t=[];return U3e(e,t,"",0),t}function lme(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_orderObj${a}`);return Q5t(i.sort(()=>.5-Math.random()),!0)}function e8t(e){const n=Z5t(e.sequence).map(s=>({[s]:lme(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=J5t(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=lme(e,o))})}),i}async function t8t(e,t){const n=await(await fetch(`${vf}${e}`)).text();return N3e(n,t)}async function V3e(e,t){const n=t.configsList.find(r=>uY(r)===e);if(n){const r=t.configs[n];return await t8t(`${r.path}`,n)}return null}function n8t({globalConfig:e}){const t=w6();if(!t||!e.configsList.find(f=>uY(f)))throw new Error("Study id invalid");const[n,r]=A.useState(null);A.useEffect(()=>{V3e(t,e).then(f=>{r(f)})},[e,t]);const[i,s]=A.useState([]),[o,a]=A.useState(null),{storageEngine:u}=A0(),[l]=xG();A.useEffect(()=>{async function f(){if(!u||!n||!t)return;await u.initializeStudyDb(t,n),await u.getSequenceArray()||await u.setSequenceArray(await e8t(n));const h=n.uiConfig.urlParticipantIdParam&&l.get(n.uiConfig.urlParticipantIdParam)||void 0,p=Object.fromEntries(l.entries()),m=await u.initializeParticipantSession(p,n,h),g=await lpt(t,n,m.sequence,m.answers);a(g),s([{element:R.jsx(X5t,{}),children:[{path:"/",element:R.jsx(B5t,{to:"0",replace:!0})},{path:"/:index",element:R.jsx(F5t,{})}]}])}f()},[u,n,t,l]);const c=PEe(i);return!c||!o?R.jsx(At,{style:{height:"100vh"},children:R.jsx(Ug,{style:{height:"100%"},children:R.jsx(I0,{style:{height:"100%"},size:60})})}):R.jsx(QCe.Provider,{value:o,children:R.jsx(sht,{store:o.store,children:c})})}function r8t(){return R.jsx(LG,{height:"70",p:"md",children:R.jsx(Gu,{mt:-7,align:"center",children:R.jsx(Gu.Col,{span:4,children:R.jsxs(lp,{align:"center",children:[R.jsx(IE,{maw:40,src:`${vf}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),R.jsx(iA,{w:"md"}),R.jsx(Lc,{order:4,children:"ReVISit Analytics Platform"})]})})})})}function i8t(){const e=Ev(),{page:t}=jM();return R.jsx(f1,{width:{base:300},style:{zIndex:0},children:R.jsxs(f1.Section,{p:"xl",children:[R.jsx(HT,{active:t==="dashboard",onClick:()=>e("/analysis/dashboard"),label:R.jsx(Rt,{fz:"lg",children:"Dashboard"}),icon:R.jsx(oMt,{color:"#4287f5"}),rightSection:R.jsx(KB,{size:"0.8rem",stroke:1.5})}),R.jsx(HT,{active:t==="browser",onClick:()=>e("/analysis/browser"),label:R.jsx(Rt,{fz:"lg",children:"Browser"}),icon:R.jsx(rMt,{color:"#4287f5"}),rightSection:R.jsx(KB,{size:"0.8rem",stroke:1.5})}),R.jsx(HT,{active:t==="about",onClick:()=>e("/analysis/about"),label:R.jsx(Rt,{fz:"lg",children:"About"}),icon:R.jsx(uMt,{color:"#4287f5"}),rightSection:R.jsx(KB,{size:"0.8rem",stroke:1.5})})]})})}function s8t(e,t="monday"){const n=new Date(e),r=n.getDay(),i=t==="sunday",s=7-(i?r+1:r);return(i&&r!==6||r!==0)&&n.setDate(n.getDate()+s),n}function H3e(e,t="monday"){const n=new Date(e),r=n.getDay()||7,i=t==="sunday",s=i?r:r-1;return(i&&r!==0||r!==1)&&n.setHours(-24*s),n}function o8t(e,t="monday"){const n=e.getMonth(),r=new Date(e.getFullYear(),n,1),i=new Date(e.getFullYear(),e.getMonth()+1,0),s=s8t(i,t),o=H3e(r,t),a=[];for(;o<=s;){const u=[];for(let l=0;l<7;l+=1)u.push(new Date(o)),o.setDate(o.getDate()+1);a.push(u)}return a}var q3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(nu,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var D=["th","st","nd","rd"],B=$%100;return"["+$+(D[(B-20)%10]||D[B]||D[0])+"]"}},_=function($,D,B){var V=String($);return!V||V.length>=D?$:""+Array(D+1-V.length).join(B)+$},b={s:_,z:function($){var D=-$.utcOffset(),B=Math.abs(D),V=Math.floor(B/60),j=B%60;return(D<=0?"+":"-")+_(V,2,"0")+":"+_(j,2,"0")},m:function $(D,B){if(D.date()<B.date())return-$(B,D);var V=12*(B.year()-D.year())+(B.month()-D.month()),j=D.clone().add(V,f),G=B-j<0,U=D.clone().add(V+(G?-1:1),f);return+(-(V+(B-j)/(G?j-U:U-j))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",w={};w[E]=v;var x="$isDayjsObject",S=function($){return $ instanceof z||!(!$||!$[x])},I=function $(D,B,V){var j;if(!D)return E;if(typeof D=="string"){var G=D.toLowerCase();w[G]&&(j=G),B&&(w[G]=B,j=G);var U=D.split("-");if(!j&&U.length>1)return $(U[0])}else{var P=D.name;w[P]=D,j=P}return!V&&j&&(E=j),j||!V&&E},C=function($,D){if(S($))return $.clone();var B=typeof D=="object"?D:{};return B.date=$,B.args=arguments,new z(B)},O=b;O.l=I,O.i=S,O.w=function($,D){return C($,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var z=function(){function $(B){this.$L=I(B.locale,null,!0),this.parse(B),this.$x=this.$x||B.x||{},this[x]=!0}var D=$.prototype;return D.parse=function(B){this.$d=function(V){var j=V.date,G=V.utc;if(j===null)return new Date(NaN);if(O.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var U=j.match(g);if(U){var P=U[2]-1||0,k=(U[7]||"0").substring(0,3);return G?new Date(Date.UTC(U[1],P,U[3]||1,U[4]||0,U[5]||0,U[6]||0,k)):new Date(U[1],P,U[3]||1,U[4]||0,U[5]||0,U[6]||0,k)}}return new Date(j)}(B),this.init()},D.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},D.$utils=function(){return O},D.isValid=function(){return this.$d.toString()!==m},D.isSame=function(B,V){var j=C(B);return this.startOf(V)<=j&&j<=this.endOf(V)},D.isAfter=function(B,V){return C(B)<this.startOf(V)},D.isBefore=function(B,V){return this.endOf(V)<C(B)},D.$g=function(B,V,j){return O.u(B)?this[V]:this.set(j,B)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(B,V){var j=this,G=!!O.u(V)||V,U=O.p(B),P=function(ce,le){var ge=O.w(j.$u?Date.UTC(j.$y,le,ce):new Date(j.$y,le,ce),j);return G?ge:ge.endOf(l)},k=function(ce,le){return O.w(j.toDate()[ce].apply(j.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(le)),j)},H=this.$W,M=this.$M,F=this.$D,J="set"+(this.$u?"UTC":"");switch(U){case h:return G?P(1,0):P(31,11);case f:return G?P(1,M):P(0,M+1);case c:var se=this.$locale().weekStart||0,ae=(H<se?H+7:H)-se;return P(G?F-ae:F+(6-ae),M);case l:case p:return k(J+"Hours",0);case u:return k(J+"Minutes",1);case a:return k(J+"Seconds",2);case o:return k(J+"Milliseconds",3);default:return this.clone()}},D.endOf=function(B){return this.startOf(B,!1)},D.$set=function(B,V){var j,G=O.p(B),U="set"+(this.$u?"UTC":""),P=(j={},j[l]=U+"Date",j[p]=U+"Date",j[f]=U+"Month",j[h]=U+"FullYear",j[u]=U+"Hours",j[a]=U+"Minutes",j[o]=U+"Seconds",j[s]=U+"Milliseconds",j)[G],k=G===l?this.$D+(V-this.$W):V;if(G===f||G===h){var H=this.clone().set(p,1);H.$d[P](k),H.init(),this.$d=H.set(p,Math.min(this.$D,H.daysInMonth())).$d}else P&&this.$d[P](k);return this.init(),this},D.set=function(B,V){return this.clone().$set(B,V)},D.get=function(B){return this[O.p(B)]()},D.add=function(B,V){var j,G=this;B=Number(B);var U=O.p(V),P=function(M){var F=C(G);return O.w(F.date(F.date()+Math.round(M*B)),G)};if(U===f)return this.set(f,this.$M+B);if(U===h)return this.set(h,this.$y+B);if(U===l)return P(1);if(U===c)return P(7);var k=(j={},j[a]=r,j[u]=i,j[o]=n,j)[U]||1,H=this.$d.getTime()+B*k;return O.w(H,this)},D.subtract=function(B,V){return this.add(-1*B,V)},D.format=function(B){var V=this,j=this.$locale();if(!this.isValid())return j.invalidDate||m;var G=B||"YYYY-MM-DDTHH:mm:ssZ",U=O.z(this),P=this.$H,k=this.$m,H=this.$M,M=j.weekdays,F=j.months,J=j.meridiem,se=function(le,ge,ue,Fe){return le&&(le[ge]||le(V,G))||ue[ge].slice(0,Fe)},ae=function(le){return O.s(P%12||12,le,"0")},ce=J||function(le,ge,ue){var Fe=le<12?"AM":"PM";return ue?Fe.toLowerCase():Fe};return G.replace(y,function(le,ge){return ge||function(ue){switch(ue){case"YY":return String(V.$y).slice(-2);case"YYYY":return O.s(V.$y,4,"0");case"M":return H+1;case"MM":return O.s(H+1,2,"0");case"MMM":return se(j.monthsShort,H,F,3);case"MMMM":return se(F,H);case"D":return V.$D;case"DD":return O.s(V.$D,2,"0");case"d":return String(V.$W);case"dd":return se(j.weekdaysMin,V.$W,M,2);case"ddd":return se(j.weekdaysShort,V.$W,M,3);case"dddd":return M[V.$W];case"H":return String(P);case"HH":return O.s(P,2,"0");case"h":return ae(1);case"hh":return ae(2);case"a":return ce(P,k,!0);case"A":return ce(P,k,!1);case"m":return String(k);case"mm":return O.s(k,2,"0");case"s":return String(V.$s);case"ss":return O.s(V.$s,2,"0");case"SSS":return O.s(V.$ms,3,"0");case"Z":return U}return null}(le)||U.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(B,V,j){var G,U=this,P=O.p(V),k=C(B),H=(k.utcOffset()-this.utcOffset())*r,M=this-k,F=function(){return O.m(U,k)};switch(P){case h:G=F()/12;break;case f:G=F();break;case d:G=F()/3;break;case c:G=(M-H)/6048e5;break;case l:G=(M-H)/864e5;break;case u:G=M/i;break;case a:G=M/r;break;case o:G=M/n;break;default:G=M}return j?G:O.a(G)},D.daysInMonth=function(){return this.endOf(f).$D},D.$locale=function(){return w[this.$L]},D.locale=function(B,V){if(!B)return this.$L;var j=this.clone(),G=I(B,V,!0);return G&&(j.$L=G),j},D.clone=function(){return O.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},$}(),N=z.prototype;return C.prototype=N,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){N[$[1]]=function(D){return this.$g(D,$[0],$[1])}}),C.extend=function($,D){return $.$i||($(D,z,C),$.$i=!0),C},C.locale=I,C.isDayjs=S,C.unix=function($){return C(1e3*$)},C.en=w[E],C.Ls=w,C.p={},C})})(q3e);var a8t=q3e.exports;const xn=pl(a8t);function u8t(e,t="MMM"){const n=[],r=new Date(2021,0,1);for(let i=0;i<12;i+=1)n.push(xn(r).locale(e).format(t)),r.setMonth(r.getMonth()+1);return n}function l8t(e,t="monday",n="dd"){const r=[],i=H3e(new Date,t);for(let s=0;s<7;s+=1)r.push(xn(i).locale(e).format(n)),i.setDate(i.getDate()+1);return r}function W3e(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function Lp(e,t){return W3e(e,t)&&e.getDate()===t.getDate()}function c8t(e){const t=e-e%10-1,n=[];for(let r=0;r<12;r+=1){const i=t+r;n.push(i)}return n}var f8t=Object.defineProperty,d8t=Object.defineProperties,h8t=Object.getOwnPropertyDescriptors,b3=Object.getOwnPropertySymbols,G3e=Object.prototype.hasOwnProperty,Y3e=Object.prototype.propertyIsEnumerable,cme=(e,t,n)=>t in e?f8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fme=(e,t)=>{for(var n in t||(t={}))G3e.call(t,n)&&cme(e,n,t[n]);if(b3)for(var n of b3(t))Y3e.call(t,n)&&cme(e,n,t[n]);return e},p8t=(e,t)=>d8t(e,h8t(t)),m8t=(e,t)=>{var n={};for(var r in e)G3e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&b3)for(var r of b3(e))t.indexOf(r)<0&&Y3e.call(e,r)&&(n[r]=e[r]);return n};function jV(e){var t=e,{direction:n,style:r}=t,i=m8t(t,["direction","style"]);const s=us();return L.createElement("svg",fme({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:p8t(fme({},r),{transform:n==="right"&&s.dir==="ltr"||n==="left"&&s.dir==="rtl"?"rotate(180deg)":"none"})},i),L.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}jV.displayName="@mantine/dates/ArrowIcon";var g8t=Object.defineProperty,y8t=Object.defineProperties,v8t=Object.getOwnPropertyDescriptors,dme=Object.getOwnPropertySymbols,_8t=Object.prototype.hasOwnProperty,b8t=Object.prototype.propertyIsEnumerable,hme=(e,t,n)=>t in e?g8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w8t=(e,t)=>{for(var n in t||(t={}))_8t.call(t,n)&&hme(e,n,t[n]);if(dme)for(var n of dme(t))b8t.call(t,n)&&hme(e,n,t[n]);return e},E8t=(e,t)=>y8t(e,v8t(t));const tj={xs:32,sm:40,md:44,lg:50,xl:54};var x8t=pt((e,{size:t})=>({calendarHeader:{display:"flex",justifyContent:"space-between",align:"center",marginBottom:e.fn.size({size:t,sizes:e.spacing})},calendarHeaderControl:{width:e.fn.size({size:t,sizes:tj}),height:e.fn.size({size:t,sizes:tj}),"&:disabled":{opacity:0,cursor:"default"}},calendarHeaderLevel:E8t(w8t({display:"flex",alignItems:"center",justifyContent:"center",height:e.fn.size({size:t,sizes:tj}),fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:`0 ${e.fn.size({size:t,sizes:e.spacing})}px`,borderRadius:e.radius.sm,fontWeight:500,flex:1,textAlign:"center",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":e.fn.hover({backgroundColor:"transparent",cursor:"default"})}),calendarHeaderLevelIcon:{marginLeft:4}})),S8t=Object.defineProperty,w3=Object.getOwnPropertySymbols,K3e=Object.prototype.hasOwnProperty,X3e=Object.prototype.propertyIsEnumerable,pme=(e,t,n)=>t in e?S8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T8t=(e,t)=>{for(var n in t||(t={}))K3e.call(t,n)&&pme(e,n,t[n]);if(w3)for(var n of w3(t))X3e.call(t,n)&&pme(e,n,t[n]);return e},A8t=(e,t)=>{var n={};for(var r in e)K3e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&w3)for(var r of w3(e))t.indexOf(r)<0&&X3e.call(e,r)&&(n[r]=e[r]);return n};const C8t={xs:12,sm:14,md:18,lg:22,xl:28};function H4(e){var t=e,{hasNext:n,hasPrevious:r,onNext:i,onPrevious:s,onNextLevel:o,className:a,label:u,nextLevelDisabled:l,size:c,classNames:f,styles:d,__staticSelector:h="CalendarHeader",nextLabel:p,previousLabel:m,preventLevelFocus:g=!1,preventFocus:y,unstyled:v,__stopPropagation:_}=t,b=A8t(t,["hasNext","hasPrevious","onNext","onPrevious","onNextLevel","className","label","nextLevelDisabled","size","classNames","styles","__staticSelector","nextLabel","previousLabel","preventLevelFocus","preventFocus","unstyled","__stopPropagation"]);const{classes:E,cx:w,theme:x}=x8t({size:c},{classNames:f,styles:d,unstyled:v,name:h}),S=x.fn.size({size:c,sizes:C8t});return L.createElement("div",T8t({className:w(E.calendarHeader,a)},b),L.createElement($R,{className:E.calendarHeaderControl,disabled:!r,onClick:s,"aria-label":m,onMouseDown:I=>y&&I.preventDefault(),unstyled:v,"data-mantine-stop-propagation":_||void 0},L.createElement(jV,{direction:"left",width:S,height:S})),L.createElement(xv,{unstyled:v,className:E.calendarHeaderLevel,disabled:l,onClick:o,tabIndex:g?-1:0,onMouseDown:I=>y&&I.preventDefault(),"data-mantine-stop-propagation":_||void 0},u,!l&&L.createElement(_Ae,{error:!1,size:c,className:E.calendarHeaderLevelIcon})),L.createElement($R,{className:E.calendarHeaderControl,disabled:!n,onClick:i,"aria-label":p,unstyled:v,onMouseDown:I=>y&&I.preventDefault(),"data-mantine-stop-propagation":_||void 0},L.createElement(jV,{direction:"right",width:S,height:S})))}H4.displayName="@mantine/dates/CalendarHeader";function v$(e,t){return xn(new Date(e,1,1)).format(t)}var I8t=Object.defineProperty,O8t=Object.defineProperties,P8t=Object.getOwnPropertyDescriptors,mme=Object.getOwnPropertySymbols,k8t=Object.prototype.hasOwnProperty,$8t=Object.prototype.propertyIsEnumerable,gme=(e,t,n)=>t in e?I8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nj=(e,t)=>{for(var n in t||(t={}))k8t.call(t,n)&&gme(e,n,t[n]);if(mme)for(var n of mme(t))$8t.call(t,n)&&gme(e,n,t[n]);return e},R8t=(e,t)=>O8t(e,P8t(t));const N8t={xs:32,sm:40,md:46,lg:52,xl:56};var D8t=pt((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{yearPicker:{width:"100%"},yearPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},yearPickerControl:R8t(nj({flex:"0 0 25%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:N8t}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":nj({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),yearPickerControlActive:nj({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),L8t=Object.defineProperty,E3=Object.getOwnPropertySymbols,Q3e=Object.prototype.hasOwnProperty,J3e=Object.prototype.propertyIsEnumerable,yme=(e,t,n)=>t in e?L8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M8t=(e,t)=>{for(var n in t||(t={}))Q3e.call(t,n)&&yme(e,n,t[n]);if(E3)for(var n of E3(t))J3e.call(t,n)&&yme(e,n,t[n]);return e},F8t=(e,t)=>{var n={};for(var r in e)Q3e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&E3)for(var r of E3(e))t.indexOf(r)<0&&J3e.call(e,r)&&(n[r]=e[r]);return n};function Z3e(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,size:a,minYear:u,maxYear:l,__staticSelector:c="YearPicker",nextDecadeLabel:f,previousDecadeLabel:d,preventFocus:h,unstyled:p,yearLabelFormat:m="YYYY",__stopPropagation:g}=t,y=F8t(t,["className","styles","classNames","value","onChange","size","minYear","maxYear","__staticSelector","nextDecadeLabel","previousDecadeLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:v,cx:_}=D8t({size:a},{classNames:i,styles:r,unstyled:p,name:c}),[b,E]=A.useState(s),w=c8t(b),x=w.map(S=>L.createElement(xv,{key:S,unstyled:p,onClick:()=>o(S),disabled:S<u||S>l,onMouseDown:I=>h&&I.preventDefault(),"data-mantine-stop-propagation":g||void 0,className:_(v.yearPickerControl,{[v.yearPickerControlActive]:S===s})},v$(S,m)));return L.createElement("div",M8t({className:_(v.yearPicker,n)},y),L.createElement(H4,{unstyled:p,label:`${v$(w[0],m)}  ${v$(w[w.length-1],m)}`,hasPrevious:typeof u=="number"?u<w[0]:!0,hasNext:typeof l=="number"?l>w[w.length-1]:!0,onNext:()=>E(S=>S+10),onPrevious:()=>E(S=>S-10),nextLevelDisabled:!0,size:a,nextLabel:f,previousLabel:d,styles:r,classNames:i,__staticSelector:c,preventFocus:h,__stopPropagation:g}),L.createElement("div",{className:v.yearPickerControls},x))}Z3e.displayName="@mantine/dates/YearPicker";function zV({date:e,minDate:t,maxDate:n}){const r=t instanceof Date,i=n instanceof Date;if(!i&&!r)return!0;const s=xn(e).endOf("month"),o=xn(e).startOf("month"),a=i?o.isBefore(n):!0,u=r?s.isAfter(t):!0;return a&&u}var B8t=Object.defineProperty,j8t=Object.defineProperties,z8t=Object.getOwnPropertyDescriptors,vme=Object.getOwnPropertySymbols,U8t=Object.prototype.hasOwnProperty,V8t=Object.prototype.propertyIsEnumerable,_me=(e,t,n)=>t in e?B8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rj=(e,t)=>{for(var n in t||(t={}))U8t.call(t,n)&&_me(e,n,t[n]);if(vme)for(var n of vme(t))V8t.call(t,n)&&_me(e,n,t[n]);return e},H8t=(e,t)=>j8t(e,z8t(t));const q8t={xs:32,sm:40,md:46,lg:52,xl:56};var W8t=pt((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{monthPicker:{width:"100%"},monthPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},monthPickerControl:H8t(rj({flex:"0 0 33.3333%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:q8t}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":rj({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),monthPickerControlActive:rj({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),G8t=Object.defineProperty,x3=Object.getOwnPropertySymbols,eLe=Object.prototype.hasOwnProperty,tLe=Object.prototype.propertyIsEnumerable,bme=(e,t,n)=>t in e?G8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Y8t=(e,t)=>{for(var n in t||(t={}))eLe.call(t,n)&&bme(e,n,t[n]);if(x3)for(var n of x3(t))tLe.call(t,n)&&bme(e,n,t[n]);return e},K8t=(e,t)=>{var n={};for(var r in e)eLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&x3)for(var r of x3(e))t.indexOf(r)<0&&tLe.call(e,r)&&(n[r]=e[r]);return n};function nLe(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,locale:a,year:u,onYearChange:l,onNextLevel:c,size:f,minDate:d,maxDate:h,__staticSelector:p="MonthPicker",nextYearLabel:m,previousYearLabel:g,preventFocus:y,unstyled:v,yearLabelFormat:_="YYYY",__stopPropagation:b}=t,E=K8t(t,["className","styles","classNames","value","onChange","locale","year","onYearChange","onNextLevel","size","minDate","maxDate","__staticSelector","nextYearLabel","previousYearLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:w,cx:x}=W8t({size:f},{classNames:i,styles:r,unstyled:v,name:p}),S=u8t(a),I=d instanceof Date?d.getFullYear():void 0,C=h instanceof Date?h.getFullYear():void 0,O=S.map((z,N)=>L.createElement(xv,{key:z,unstyled:v,onClick:()=>o(N),className:x(w.monthPickerControl,{[w.monthPickerControlActive]:N===s.month&&u===s.year}),disabled:!zV({date:new Date(u,N),minDate:d,maxDate:h}),onMouseDown:$=>y&&$.preventDefault(),"data-mantine-stop-propagation":b||void 0},z));return L.createElement("div",Y8t({className:x(w.monthPicker,n)},E),L.createElement(H4,{label:v$(u,_),hasNext:typeof C=="number"?u<C:!0,hasPrevious:typeof I=="number"?u>I:!0,onNext:()=>l(u+1),onPrevious:()=>l(u-1),onNextLevel:c,size:f,classNames:i,styles:r,__staticSelector:p,nextLabel:m,previousLabel:g,preventFocus:y,unstyled:v,__stopPropagation:b}),L.createElement("div",{className:w.monthPickerControls},O))}nLe.displayName="@mantine/dates/MonthPicker";function X8t({month:e,locale:t,format:n}){return Xm(xn(e).locale(t).format(n))}function Q8t({focusable:e,hasValue:t,selected:n,firstInMonth:r}){return e?t?n?0:-1:r?0:-1:-1}function J8t({hasValue:e,selected:t,firstInMonth:n}){return e?t?!0:void 0:n?!0:void 0}var Z8t=Object.defineProperty,e9t=Object.defineProperties,t9t=Object.getOwnPropertyDescriptors,wme=Object.getOwnPropertySymbols,n9t=Object.prototype.hasOwnProperty,r9t=Object.prototype.propertyIsEnumerable,Eme=(e,t,n)=>t in e?Z8t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ij=(e,t)=>{for(var n in t||(t={}))n9t.call(t,n)&&Eme(e,n,t[n]);if(wme)for(var n of wme(t))r9t.call(t,n)&&Eme(e,n,t[n]);return e},xme=(e,t)=>e9t(e,t9t(t));const _$={xs:34,sm:38,md:46,lg:58,xl:66};var i9t=pt((e,{size:t,fullWidth:n,hideOutsideDates:r})=>({day:xme(ij(xme(ij(ij({},e.fn.fontStyles()),e.fn.focusStyles()),{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",width:n?"100%":e.fn.size({size:t,sizes:_$}),height:e.fn.size({size:t,sizes:_$}),lineHeight:`${e.fn.size({size:t,sizes:_$})}px`,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,borderRadius:e.radius.sm,border:"none",cursor:"pointer",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],"&:disabled":{pointerEvents:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}}),e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]})),{"&[data-weekend]":{color:e.colorScheme==="dark"?e.colors.red[5]:e.colors.red[7]},"&[data-outside]":{display:r?"none":void 0,color:`${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}`},"&[data-in-range]":{backgroundColor:e.fn.variant({variant:"light"}).background,borderRadius:0},"&[data-selected]":{backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.white},"&[data-first-in-range]":{borderTopLeftRadius:e.radius.sm,borderBottomLeftRadius:e.radius.sm},"&[data-last-in-range]":{borderTopRightRadius:e.radius.sm,borderBottomRightRadius:e.radius.sm}})})),s9t=Object.defineProperty,o9t=Object.defineProperties,a9t=Object.getOwnPropertyDescriptors,S3=Object.getOwnPropertySymbols,rLe=Object.prototype.hasOwnProperty,iLe=Object.prototype.propertyIsEnumerable,Sme=(e,t,n)=>t in e?s9t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u9t=(e,t)=>{for(var n in t||(t={}))rLe.call(t,n)&&Sme(e,n,t[n]);if(S3)for(var n of S3(t))iLe.call(t,n)&&Sme(e,n,t[n]);return e},l9t=(e,t)=>o9t(e,a9t(t)),c9t=(e,t)=>{var n={};for(var r in e)rLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&S3)for(var r of S3(e))t.indexOf(r)<0&&iLe.call(e,r)&&(n[r]=e[r]);return n};const sLe=A.forwardRef((e,t)=>{var n=e,{className:r,value:i,selected:s,weekend:o,outside:a,onMouseEnter:u,classNames:l,styles:c,hasValue:f,firstInRange:d,lastInRange:h,__staticSelector:p="Month",inRange:m,size:g,fullWidth:y,firstInMonth:v,focusable:_,hideOutsideDates:b,renderDay:E,unstyled:w,disabled:x,stopPropagation:S}=n,I=c9t(n,["className","value","selected","weekend","outside","onMouseEnter","classNames","styles","hasValue","firstInRange","lastInRange","__staticSelector","inRange","size","fullWidth","firstInMonth","focusable","hideOutsideDates","renderDay","unstyled","disabled","stopPropagation"]);const{classes:C,cx:O}=i9t({size:g,fullWidth:y,hideOutsideDates:b},{classNames:l,styles:c,unstyled:w,name:p});return L.createElement("button",l9t(u9t({},I),{type:"button",ref:t,disabled:x,onMouseEnter:z=>u(i,z),tabIndex:Q8t({focusable:_,hasValue:f,selected:s,firstInMonth:v}),"data-autofocus":J8t({hasValue:f,selected:s,firstInMonth:v}),"data-mantine-stop-propagation":S||void 0,"data-outside":a&&!x||void 0,"data-weekend":o&&!x||void 0,"data-selected":s&&!x||void 0,"data-in-range":m&&!x||void 0,"data-first-in-range":d&&!x||void 0,"data-last-in-range":h&&!x||void 0,className:O(C.day,r)}),typeof E=="function"?E(i):i.getDate())});sLe.displayName="@mantine/core/Day";function f9t(e,t=[0,6]){return t.includes(e.getDay())}function d9t(e,t){return!W3e(e,t)}function h9t({minDate:e,maxDate:t,excludeDate:n,disableOutsideEvents:r,date:i,outside:s}){const o=t instanceof Date&&xn(t).isBefore(i,"day"),a=e instanceof Date&&xn(e).isAfter(i,"day"),u=typeof n=="function"&&n(i);return o||a||u||!!r&&!!s}function p9t(e,t){const n=Array.isArray(t)&&t.every(a=>a instanceof Date),r=n&&[xn(t[0]).subtract(1,"day"),xn(t[1]).add(1,"day")],i=n&&Lp(e,t[0]),s=n&&Lp(e,t[1]),o=n&&xn(e).isAfter(r[0],"day")&&xn(e).isBefore(r[1],"day");return{firstInRange:i,lastInRange:s,inRange:o,selectedInRange:i||s}}function Tme({date:e,month:t,hasValue:n,minDate:r,maxDate:i,value:s,excludeDate:o,disableOutsideEvents:a,range:u,weekendDays:l}){const c=d9t(e,t),f=n&&(Array.isArray(s)?s.some(g=>Lp(g,e)):Lp(e,s)),{inRange:d,lastInRange:h,firstInRange:p,selectedInRange:m}=p9t(e,u);return{disabled:h9t({minDate:r,maxDate:i,excludeDate:o,disableOutsideEvents:a,date:e,outside:c}),weekend:f9t(e,l),selectedInRange:m,selected:f,inRange:d,firstInRange:p,lastInRange:h,outside:c}}var m9t=Object.defineProperty,g9t=Object.defineProperties,y9t=Object.getOwnPropertyDescriptors,Ame=Object.getOwnPropertySymbols,v9t=Object.prototype.hasOwnProperty,_9t=Object.prototype.propertyIsEnumerable,Cme=(e,t,n)=>t in e?m9t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b9t=(e,t)=>{for(var n in t||(t={}))v9t.call(t,n)&&Cme(e,n,t[n]);if(Ame)for(var n of Ame(t))_9t.call(t,n)&&Cme(e,n,t[n]);return e},w9t=(e,t)=>g9t(e,y9t(t)),E9t=pt((e,{fullWidth:t})=>({weekday:{color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[5]},month:w9t(b9t({},e.fn.fontStyles()),{borderCollapse:"collapse",width:t?"100%":"auto",tableLayout:"fixed"}),cell:{boxSizing:"border-box",padding:0,borderTop:"1px solid transparent"},weekdayCell:{boxSizing:"border-box",padding:0,fontWeight:"normal",paddingBottom:`calc(${e.spacing.xs}px / 2)`,textAlign:"center",cursor:"default",userSelect:"none"}})),x9t=Object.defineProperty,T3=Object.getOwnPropertySymbols,oLe=Object.prototype.hasOwnProperty,aLe=Object.prototype.propertyIsEnumerable,Ime=(e,t,n)=>t in e?x9t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S9t=(e,t)=>{for(var n in t||(t={}))oLe.call(t,n)&&Ime(e,n,t[n]);if(T3)for(var n of T3(t))aLe.call(t,n)&&Ime(e,n,t[n]);return e},T9t=(e,t)=>{var n={};for(var r in e)oLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&T3)for(var r of T3(e))t.indexOf(r)<0&&aLe.call(e,r)&&(n[r]=e[r]);return n};const NP=()=>!1,A9t={disableOutsideEvents:!1,hideWeekdays:!1,__staticSelector:"Month",size:"sm",fullWidth:!1,preventFocus:!1,focusable:!0,firstDayOfWeek:"monday",hideOutsideDates:!1,weekendDays:[0,6],__stopPropagation:!0},uLe=A.forwardRef((e,t)=>{const n=Ct("Month",A9t,e),{className:r,month:i,value:s,onChange:o,disableOutsideEvents:a,locale:u,dayClassName:l,dayStyle:c,classNames:f,styles:d,minDate:h,maxDate:p,excludeDate:m,onDayMouseEnter:g,range:y,hideWeekdays:v,__staticSelector:_,size:b,fullWidth:E,preventFocus:w,focusable:x,firstDayOfWeek:S,onDayKeyDown:I,daysRefs:C,hideOutsideDates:O,isDateInRange:z=NP,isDateFirstInRange:N=NP,isDateLastInRange:$=NP,renderDay:D,weekdayLabelFormat:B,unstyled:V,weekendDays:j,__stopPropagation:G}=n,U=T9t(n,["className","month","value","onChange","disableOutsideEvents","locale","dayClassName","dayStyle","classNames","styles","minDate","maxDate","excludeDate","onDayMouseEnter","range","hideWeekdays","__staticSelector","size","fullWidth","preventFocus","focusable","firstDayOfWeek","onDayKeyDown","daysRefs","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","weekdayLabelFormat","unstyled","weekendDays","__stopPropagation"]),{classes:P,cx:k,theme:H}=E9t({fullWidth:E},{classNames:f,styles:d,unstyled:V,name:_}),M=u||H.datesLocale,F=o8t(i,S),J=l8t(M,S,B).map(ge=>L.createElement("th",{className:P.weekdayCell,key:ge},L.createElement(Rt,{size:b,className:P.weekday},ge.length>=2?Xm(ge):ge))),se=Array.isArray(s)?s.every(ge=>ge instanceof Date):s instanceof Date,ae=s instanceof Date&&xn(s).isAfter(xn(i).startOf("month"))&&xn(s).isBefore(xn(i).endOf("month")),ce=A.useMemo(()=>F.flatMap(ge=>ge).find(ge=>{const ue=Tme({date:ge,month:i,hasValue:se,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:j});return!ue.disabled&&!ue.outside})||xn(i).startOf("month").toDate(),[]),le=F.map((ge,ue)=>{const Fe=ge.map(($e,Ge)=>{const Re=Tme({date:$e,month:i,hasValue:se,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:j}),Oe={rowIndex:ue,cellIndex:Ge,date:$e};return L.createElement("td",{className:P.cell,key:Ge},L.createElement(sLe,{unstyled:V,ref:Me=>{C&&(Array.isArray(C[ue])||(C[ue]=[]),C[ue][Ge]=Me)},onClick:()=>typeof o=="function"&&o($e),onMouseDown:Me=>w&&Me.preventDefault(),value:$e,outside:Re.outside,weekend:Re.weekend,inRange:Re.inRange||z($e,Re),firstInRange:Re.firstInRange||N($e,Re),lastInRange:Re.lastInRange||$($e,Re),firstInMonth:Lp($e,ce),selected:Re.selected||Re.selectedInRange,hasValue:ae,onKeyDown:Me=>typeof I=="function"&&I(Oe,Me),className:typeof l=="function"?l($e,Re):null,style:typeof c=="function"?c($e,Re):null,disabled:Re.disabled,onMouseEnter:typeof g=="function"?g:NP,size:b,fullWidth:E,focusable:x,hideOutsideDates:O,__staticSelector:_,styles:d,classNames:f,renderDay:D,stopPropagation:G}))});return L.createElement("tr",{key:ue},Fe)});return L.createElement(At,S9t({component:"table",className:k(P.month,r),ref:t},U),!v&&L.createElement("thead",null,L.createElement("tr",null,J)),L.createElement("tbody",null,le))});uLe.displayName="@mantine/dates/Month";var C9t=Object.defineProperty,A3=Object.getOwnPropertySymbols,lLe=Object.prototype.hasOwnProperty,cLe=Object.prototype.propertyIsEnumerable,Ome=(e,t,n)=>t in e?C9t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I9t=(e,t)=>{for(var n in t||(t={}))lLe.call(t,n)&&Ome(e,n,t[n]);if(A3)for(var n of A3(t))cLe.call(t,n)&&Ome(e,n,t[n]);return e},O9t=(e,t)=>{var n={};for(var r in e)lLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&A3)for(var r of A3(e))t.indexOf(r)<0&&cLe.call(e,r)&&(n[r]=e[r]);return n};function fLe(e){var t=e,{amountOfMonths:n,paginateBy:r,month:i,locale:s,minDate:o,maxDate:a,allowLevelChange:u,size:l,daysRefs:c,onMonthChange:f,onNextLevel:d,onDayKeyDown:h,classNames:p,styles:m,__staticSelector:g="MonthsList",nextMonthLabel:y,previousMonthLabel:v,labelFormat:_,weekdayLabelFormat:b,preventFocus:E,renderDay:w,unstyled:x,__stopPropagation:S}=t,I=O9t(t,["amountOfMonths","paginateBy","month","locale","minDate","maxDate","allowLevelChange","size","daysRefs","onMonthChange","onNextLevel","onDayKeyDown","classNames","styles","__staticSelector","nextMonthLabel","previousMonthLabel","labelFormat","weekdayLabelFormat","preventFocus","renderDay","unstyled","__stopPropagation"]);const C=xn(i).add(n,"months").toDate(),O=xn(i).subtract(1,"months").toDate(),z=Array(n).fill(0).map((N,$)=>{const D=xn(i).add($,"months").toDate();return L.createElement("div",{key:$},L.createElement(H4,{hasNext:$+1===n&&zV({date:C,minDate:o,maxDate:a}),hasPrevious:$===0&&zV({date:O,minDate:o,maxDate:a}),label:X8t({month:D,locale:s,format:_}),onNext:()=>f(xn(i).add(r,"months").toDate()),onPrevious:()=>f(xn(i).subtract(r,"months").toDate()),onNextLevel:d,nextLevelDisabled:!u,size:l,classNames:p,styles:m,__staticSelector:g,nextLabel:y,previousLabel:v,preventLevelFocus:$>0,preventFocus:E,unstyled:x,__stopPropagation:S}),L.createElement(uLe,I9t({month:D,daysRefs:c.current[$],onDayKeyDown:(...B)=>h($,...B),size:l,minDate:o,maxDate:a,classNames:p,styles:m,__staticSelector:g,locale:s,focusable:$===0,preventFocus:E,renderDay:w,weekdayLabelFormat:b,unstyled:x,__stopPropagation:S},I)))});return L.createElement(L.Fragment,null,z)}fLe.displayName="@mantine/dates/MonthsList";var P9t=pt((e,{size:t,amountOfMonths:n,fullWidth:r})=>{const i=e.fn.size({size:t,sizes:_$})*7,s=n>1?i*n+(n-1)*e.spacing.md:i;return{calendarBase:{boxSizing:"border-box",display:"flex",gap:e.spacing.md,maxWidth:r?"100%":s}}}),k9t=Object.defineProperty,C3=Object.getOwnPropertySymbols,dLe=Object.prototype.hasOwnProperty,hLe=Object.prototype.propertyIsEnumerable,Pme=(e,t,n)=>t in e?k9t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$9t=(e,t)=>{for(var n in t||(t={}))dLe.call(t,n)&&Pme(e,n,t[n]);if(C3)for(var n of C3(t))hLe.call(t,n)&&Pme(e,n,t[n]);return e},R9t=(e,t)=>{var n={};for(var r in e)dLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&C3)for(var r of C3(e))t.indexOf(r)<0&&hLe.call(e,r)&&(n[r]=e[r]);return n};const zQ=A.forwardRef((e,t)=>{var n=e,{className:r,classNames:i,styles:s,month:o,initialMonth:a,onMonthChange:u,locale:l,amountOfMonths:c=1,paginateBy:f=c,size:d="sm",allowLevelChange:h=!0,initialLevel:p="date",minDate:m,maxDate:g,__staticSelector:y="CalendarBase",dayClassName:v,dayStyle:_,disableOutsideEvents:b,excludeDate:E,hideWeekdays:w,fullWidth:x,preventFocus:S,firstDayOfWeek:I="monday",value:C,onChange:O,onDayMouseEnter:z,range:N,nextDecadeLabel:$,nextMonthLabel:D,nextYearLabel:B,previousDecadeLabel:V,previousMonthLabel:j,previousYearLabel:G,labelFormat:U="MMMM YYYY",weekdayLabelFormat:P,hideOutsideDates:k,isDateInRange:H,isDateFirstInRange:M,isDateLastInRange:F,renderDay:J,unstyled:se,weekendDays:ae,__stopPropagation:ce,yearLabelFormat:le="YYYY"}=n,ge=R9t(n,["className","classNames","styles","month","initialMonth","onMonthChange","locale","amountOfMonths","paginateBy","size","allowLevelChange","initialLevel","minDate","maxDate","__staticSelector","dayClassName","dayStyle","disableOutsideEvents","excludeDate","hideWeekdays","fullWidth","preventFocus","firstDayOfWeek","value","onChange","onDayMouseEnter","range","nextDecadeLabel","nextMonthLabel","nextYearLabel","previousDecadeLabel","previousMonthLabel","previousYearLabel","labelFormat","weekdayLabelFormat","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","unstyled","weekendDays","__stopPropagation","yearLabelFormat"]);const[ue,Fe]=A.useState(p),{classes:$e,cx:Ge,theme:Re}=P9t({size:d,fullWidth:x,amountOfMonths:ue==="date"?c:1},{name:y,styles:s,classNames:i,unstyled:se}),Oe=l||Re.datesLocale,Me=A.useRef(Array(c).fill(0).map(()=>[])),[Ut,Qe]=Ta({value:o,defaultValue:a,finalValue:new Date,onChange:u}),[je,wt]=A.useState(Ut.getFullYear()),et=m instanceof Date?m.getFullYear():100,ct=g instanceof Date?g.getFullYear():1e4,ft=6,jt=(he,_e,ke,it=1)=>{var Ye;const ut=["down","up"].includes(he),tt=ut?ke.rowIndex+(he==="down"?it:-it):ke.rowIndex,_t=ut?ke.cellIndex:ke.cellIndex+(he==="right"?it:-it),In=(Ye=Me.current[_e][tt])==null?void 0:Ye[_t];In&&(In.disabled?jt(he,_e,ke,it+1):In.focus())},Dn=(he,_e,ke)=>{var it;switch(ke.key){case"ArrowDown":{ke.preventDefault(),_e.rowIndex+1<Me.current[he].length&&jt("down",he,_e);break}case"ArrowUp":{ke.preventDefault(),_e.rowIndex>0&&jt("up",he,_e);break}case"ArrowRight":{ke.preventDefault(),_e.cellIndex!==ft?jt("right",he,_e):he+1<c&&Me.current[he+1][_e.rowIndex]&&((it=Me.current[he+1][_e.rowIndex][0])==null||it.focus());break}case"ArrowLeft":ke.preventDefault(),_e.cellIndex!==0?jt("left",he,_e):he>0&&Me.current[he-1][_e.rowIndex]&&Me.current[he-1][_e.rowIndex][ft].focus()}};return L.createElement(At,$9t({className:Ge($e.calendarBase,r),ref:t},ge),ue==="year"&&L.createElement(Z3e,{size:d,value:je,minYear:et,maxYear:ct,onChange:he=>{wt(he),Fe("month")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:ce,nextDecadeLabel:$,previousDecadeLabel:V,preventFocus:S,unstyled:se,yearLabelFormat:le}),ue==="month"&&L.createElement(nLe,{size:d,value:{month:Ut.getMonth(),year:Ut.getFullYear()},year:je,onYearChange:wt,onNextLevel:()=>Fe("year"),locale:Oe,minDate:m,maxDate:g,onChange:he=>{Qe(new Date(je,he,1)),Fe("date")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:ce,nextYearLabel:B,previousYearLabel:G,preventFocus:S,unstyled:se,yearLabelFormat:le}),ue==="date"&&L.createElement(fLe,{amountOfMonths:c,paginateBy:f,month:Ut,locale:Oe,minDate:m,maxDate:g,allowLevelChange:h,size:d,daysRefs:Me,onMonthChange:Qe,onNextLevel:()=>Fe("month"),onDayKeyDown:Dn,classNames:i,styles:s,__staticSelector:y,dayClassName:v,dayStyle:_,disableOutsideEvents:b,excludeDate:E,hideWeekdays:w,fullWidth:x,preventFocus:S,firstDayOfWeek:I,value:C,range:N,onChange:O,nextMonthLabel:D,previousMonthLabel:j,labelFormat:U,weekdayLabelFormat:P,onDayMouseEnter:z,renderDay:J,hideOutsideDates:k,isDateInRange:H,isDateFirstInRange:M,isDateLastInRange:F,unstyled:se,weekendDays:ae,__stopPropagation:ce}))});zQ.displayName="@mantine/dates/CalendarBase";var N9t=Object.defineProperty,I3=Object.getOwnPropertySymbols,pLe=Object.prototype.hasOwnProperty,mLe=Object.prototype.propertyIsEnumerable,kme=(e,t,n)=>t in e?N9t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,D9t=(e,t)=>{for(var n in t||(t={}))pLe.call(t,n)&&kme(e,n,t[n]);if(I3)for(var n of I3(t))mLe.call(t,n)&&kme(e,n,t[n]);return e},L9t=(e,t)=>{var n={};for(var r in e)pLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&I3)for(var r of I3(e))t.indexOf(r)<0&&mLe.call(e,r)&&(n[r]=e[r]);return n};const M9t={__staticSelector:"Calendar"};function gLe(e){const t=Ct("Calendar",M9t,e),{__staticSelector:n="Calendar",multiple:r,value:i,onChange:s}=t,o=L9t(t,["__staticSelector","multiple","value","onChange"]),a=u=>{if(!r)return s(u);const l=i.some(c=>Lp(c,u));return s(l?i.filter(c=>!Lp(c,u)):[...i,u])};return L.createElement(zQ,D9t({__staticSelector:n,onChange:a,value:i},o))}gLe.displayName="@mantine/dates/Calendar";var F9t=Object.defineProperty,B9t=Object.defineProperties,j9t=Object.getOwnPropertyDescriptors,$me=Object.getOwnPropertySymbols,z9t=Object.prototype.hasOwnProperty,U9t=Object.prototype.propertyIsEnumerable,Rme=(e,t,n)=>t in e?F9t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,V9t=(e,t)=>{for(var n in t||(t={}))z9t.call(t,n)&&Rme(e,n,t[n]);if($me)for(var n of $me(t))U9t.call(t,n)&&Rme(e,n,t[n]);return e},H9t=(e,t)=>B9t(e,j9t(t)),q9t=pt(e=>({wrapper:H9t(V9t({},e.fn.fontStyles()),{position:"relative",cursor:"pointer"}),input:{cursor:"pointer",whiteSpace:"nowrap","&:not([data-free-input])::selection":{backgroundColor:"transparent"},"&[data-free-input]":{cursor:"text"}}})),W9t=Object.defineProperty,G9t=Object.defineProperties,Y9t=Object.getOwnPropertyDescriptors,O3=Object.getOwnPropertySymbols,yLe=Object.prototype.hasOwnProperty,vLe=Object.prototype.propertyIsEnumerable,Nme=(e,t,n)=>t in e?W9t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pS=(e,t)=>{for(var n in t||(t={}))yLe.call(t,n)&&Nme(e,n,t[n]);if(O3)for(var n of O3(t))vLe.call(t,n)&&Nme(e,n,t[n]);return e},Dme=(e,t)=>G9t(e,Y9t(t)),K9t=(e,t)=>{var n={};for(var r in e)yLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&O3)for(var r of O3(e))t.indexOf(r)<0&&vLe.call(e,r)&&(n[r]=e[r]);return n};const X9t={xs:24,sm:30,md:34,lg:40,xl:44},Q9t={in:{opacity:1,transform:"translateY(0) scale(1)"},out:{opacity:0,transform:"translateY(-25px) scale(0.93)"},common:{transformOrigin:"top left"},transitionProperty:"opacity, transform"},UQ=A.forwardRef((e,t)=>{var n=e,{classNames:r,className:i,style:s,styles:o,wrapperProps:a,required:u,allowFreeInput:l=!1,label:c,error:f,id:d,description:h,placeholder:p,shadow:m,transition:g=Q9t,transitionDuration:y=100,transitionTimingFunction:v,size:_="sm",children:b,inputLabel:E,__staticSelector:w="DatePickerBase",dropdownOpened:x,setDropdownOpened:S,dropdownType:I="popover",dropdownPosition:C="flip",clearable:O=!0,clearButtonLabel:z,onClear:N,positionDependencies:$=[],zIndex:D,withinPortal:B=!1,onBlur:V,onFocus:j,onChange:G,onKeyDown:U,name:P="date",sx:k,amountOfMonths:H=1,onDropdownClose:M,onDropdownOpen:F,clickOutsideEvents:J=["mousedown","touchstart"],modalZIndex:se,errorProps:ae,labelProps:ce,descriptionProps:le,clearButtonTabIndex:ge=0,unstyled:ue,inputContainer:Fe,inputWrapperOrder:$e,modalProps:Ge,withAsterisk:Re}=n,Oe=K9t(n,["classNames","className","style","styles","wrapperProps","required","allowFreeInput","label","error","id","description","placeholder","shadow","transition","transitionDuration","transitionTimingFunction","size","children","inputLabel","__staticSelector","dropdownOpened","setDropdownOpened","dropdownType","dropdownPosition","clearable","clearButtonLabel","onClear","positionDependencies","zIndex","withinPortal","onBlur","onFocus","onChange","onKeyDown","name","sx","amountOfMonths","onDropdownClose","onDropdownOpen","clickOutsideEvents","modalZIndex","errorProps","labelProps","descriptionProps","clearButtonTabIndex","unstyled","inputContainer","inputWrapperOrder","modalProps","withAsterisk"]);const{classes:Me,cx:Ut,theme:Qe}=q9t(null,{classNames:r,styles:o,unstyled:ue,name:w}),{systemStyles:je,rest:wt}=yf(Oe),et=vl(d),ct=A.useRef(),ft=()=>{S(!1),M==null||M()},jt=()=>{S(!0),F==null||F()},Dn=()=>{S(!x),x?M==null||M():F==null||F()},he=ut=>{ut.key==="Escape"&&(ft(),window.setTimeout(()=>{var tt;return(tt=ct.current)==null?void 0:tt.focus()},0))},_e=O?L.createElement(Sv,{variant:"transparent","aria-label":z,onClick:N,size:_,tabIndex:ge,unstyled:ue}):null,ke=ut=>{typeof V=="function"&&V(ut),l&&ft()},it=ut=>{typeof j=="function"&&j(ut),l&&jt()},Ye=ut=>{typeof U=="function"&&U(ut),(ut.key==="Space"||ut.key==="Enter")&&!l&&(ut.preventDefault(),jt())};return L.createElement(is.Wrapper,pS(pS({required:u,id:et,label:c,error:f,description:h,className:i,style:s,classNames:r,styles:o,size:_,__staticSelector:w,sx:k,errorProps:ae,descriptionProps:le,labelProps:ce,inputContainer:Fe,inputWrapperOrder:$e,unstyled:ue,withAsterisk:Re},je),a),L.createElement(Vi,{__staticSelector:w,withinPortal:B,offset:10,opened:x,transitionDuration:y,transition:g,positionDependencies:$,middlewares:{flip:C==="flip",shift:!1},position:C==="flip"?"bottom-start":C,shadow:m,onClose:ft,trapFocus:!l,withRoles:!1,clickOutsideEvents:J,zIndex:D,classNames:r,styles:o,unstyled:ue},L.createElement(Vi.Target,null,L.createElement("div",{className:Me.wrapper},L.createElement(is,pS({classNames:Dme(pS({},r),{input:Ut(Me.input,r==null?void 0:r.input)}),"data-free-input":l||void 0,styles:o,onClick:()=>l?jt():Dn(),onKeyDown:Ye,id:et,ref:As(t,ct),__staticSelector:w,size:_,name:P,placeholder:p,value:E,required:u,invalid:!!f,readOnly:!l,rightSection:_e,rightSectionWidth:Qe.fn.size({size:_,sizes:X9t}),onBlur:ke,onFocus:it,onChange:G,autoComplete:"off",unstyled:ue},wt)))),I==="popover"?L.createElement(Vi.Dropdown,null,L.createElement("div",{"data-mantine-stop-propagation":x,onKeyDownCapture:he,"aria-hidden":l||void 0},b)):L.createElement(VC,Dme(pS({},Ge),{opened:x,onClose:ft,withCloseButton:!1,size:H*400,zIndex:se,unstyled:ue}),b)))});UQ.displayName="@mantine/dates/DatePickerBase";var J9t=Object.defineProperty,P3=Object.getOwnPropertySymbols,_Le=Object.prototype.hasOwnProperty,bLe=Object.prototype.propertyIsEnumerable,Lme=(e,t,n)=>t in e?J9t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Z9t=(e,t)=>{for(var n in t||(t={}))_Le.call(t,n)&&Lme(e,n,t[n]);if(P3)for(var n of P3(t))bLe.call(t,n)&&Lme(e,n,t[n]);return e},eBt=(e,t)=>{var n={};for(var r in e)_Le.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&P3)for(var r of P3(e))t.indexOf(r)<0&&bLe.call(e,r)&&(n[r]=e[r]);return n};const tBt={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,name:"date",size:"sm",dropdownType:"popover",dropdownPosition:"flip",clearable:!0,disabled:!1,fixOnBlur:!0,withinPortal:!1,firstDayOfWeek:"monday",openDropdownOnClear:!1},nBt=A.forwardRef((e,t)=>{const n=Ct("DatePicker",tBt,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,initialMonth:x,initiallyOpened:S,name:I,size:C,dropdownType:O,dropdownPosition:z,clearable:N,disabled:$,clearButtonLabel:D,fixOnBlur:B,allowFreeInput:V,withinPortal:j,dateParser:G,firstDayOfWeek:U,onFocus:P,onBlur:k,amountOfMonths:H,allowLevelChange:M,initialLevel:F,onDropdownClose:J,onDropdownOpen:se,hideOutsideDates:ae,hideWeekdays:ce,renderDay:le,type:ge,openDropdownOnClear:ue,unstyled:Fe,weekendDays:$e,yearLabelFormat:Ge,nextDecadeLabel:Re,nextYearLabel:Oe,previousDecadeLabel:Me,previousYearLabel:Ut}=n,Qe=eBt(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","name","size","dropdownType","dropdownPosition","clearable","disabled","clearButtonLabel","fixOnBlur","allowFreeInput","withinPortal","dateParser","firstDayOfWeek","onFocus","onBlur","amountOfMonths","allowLevelChange","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","type","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),je=us(),wt=l||je.datesLocale,et=ge==="date"?"YYYY-MM-DD":c||je.dateFormat,[ct,ft]=A.useState(S),jt=C==="lg"||C==="xl"?"md":"sm",Dn=A.useRef(),[he,_e]=A.useState(s??null),[ke,it]=Ta({value:r,defaultValue:s,finalValue:null,onChange:i}),[Ye,ut]=A.useState(ke||x||new Date),[tt,_t]=A.useState(!1),[In,Wt]=A.useState(ke instanceof Date?Xm(xn(ke).locale(wt).format(et)):""),Vt=()=>{ft(!1),J==null||J()},hr=()=>{ft(!0),se==null||se()};A.useEffect(()=>{r===null&&!tt&&Wt(""),r instanceof Date&&!tt&&Wt(Xm(xn(r).locale(wt).format(et)))},[r,tt]);const Yn=yt=>{it(yt),Wt(Xm(xn(yt).locale(wt).format(et))),m&&Vt(),window.setTimeout(()=>{var Fr;return(Fr=Dn.current)==null?void 0:Fr.focus()},0)},ku=()=>{var yt;it(null),_e(null),Wt(""),ue&&hr(),(yt=Dn.current)==null||yt.focus()},Mr=yt=>G?G(yt):xn(yt,et,wt).toDate(),ls=()=>{let yt=typeof ke=="string"?Mr(ke):ke;E&&xn(yt).isAfter(E)&&(yt=E),b&&xn(yt).isBefore(b)&&(yt=b),xn(yt).isValid()?(it(yt),_e(yt),Wt(Xm(xn(yt).locale(wt).format(et))),ut(yt)):B&&it(he)},ti=yt=>{typeof k=="function"&&k(yt),_t(!1),V&&ls()},Ei=yt=>{yt.key==="Enter"&&V&&(Vt(),ls())},qr=yt=>{typeof P=="function"&&P(yt),_t(!0)},yr=yt=>{hr();const Fr=Mr(yt.target.value);xn(Fr).isValid()?(it(Fr),_e(Fr),Wt(yt.target.value),ut(Fr)):Wt(yt.target.value)};return L.createElement(UQ,Z9t({allowFreeInput:V,dropdownOpened:ct,setDropdownOpened:ft,shadow:u,transitionDuration:f,ref:As(t,Dn),size:C,styles:a,classNames:o,onChange:yr,onBlur:ti,onFocus:qr,onKeyDown:Ei,name:I,inputLabel:In,__staticSelector:"DatePicker",dropdownType:O,dropdownPosition:z,clearable:ge==="date"?!1:N&&!!ke&&!$,clearButtonLabel:D,onClear:ku,disabled:$,withinPortal:j,amountOfMonths:H,onDropdownClose:J,onDropdownOpen:se,type:ge,unstyled:Fe},Qe),L.createElement(gLe,{classNames:o,styles:a,locale:wt,nextMonthLabel:h,previousMonthLabel:p,month:V?Ye:void 0,initialMonth:x||(ke instanceof Date?ke:new Date),onMonthChange:ut,value:ke instanceof Date?ke:xn(ke).toDate(),onChange:Yn,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,__staticSelector:"DatePicker",fullWidth:O==="modal",__stopPropagation:O!=="modal",size:O==="modal"?"lg":jt,firstDayOfWeek:U,preventFocus:V,amountOfMonths:H,allowLevelChange:M,initialLevel:F,hideOutsideDates:ae,hideWeekdays:ce,renderDay:le,unstyled:Fe,weekendDays:$e,yearLabelFormat:Ge,nextDecadeLabel:Re,nextYearLabel:Oe,previousDecadeLabel:Me,previousYearLabel:Ut}))});nBt.displayName="@mantine/dates/DatePicker";var rBt=Object.defineProperty,k3=Object.getOwnPropertySymbols,wLe=Object.prototype.hasOwnProperty,ELe=Object.prototype.propertyIsEnumerable,Mme=(e,t,n)=>t in e?rBt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iBt=(e,t)=>{for(var n in t||(t={}))wLe.call(t,n)&&Mme(e,n,t[n]);if(k3)for(var n of k3(t))ELe.call(t,n)&&Mme(e,n,t[n]);return e},sBt=(e,t)=>{var n={};for(var r in e)wLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&k3)for(var r of k3(e))t.indexOf(r)<0&&ELe.call(e,r)&&(n[r]=e[r]);return n};const oBt={__staticSelector:"RangeCalendar",allowSingleDateInRange:!1,amountOfMonths:1},xLe=A.forwardRef((e,t)=>{const n=Ct("RangeCalendar",oBt,e),{value:r,onChange:i,dayStyle:s,onMouseLeave:o,__staticSelector:a,allowSingleDateInRange:u,amountOfMonths:l,paginateBy:c}=n,f=sBt(n,["value","onChange","dayStyle","onMouseLeave","__staticSelector","allowSingleDateInRange","amountOfMonths","paginateBy"]),[d,h]=A.useState(null),[p,m]=A.useState(null),g=E=>{if(p instanceof Date){if(Lp(E,p)&&!u)return m(null),h(null),null;const w=[E,p];return w.sort((x,S)=>x.getTime()-S.getTime()),i(w),m(null),null}return r[0]&&Lp(E,r[0])&&!u?(m(null),h(null),i([null,null]),null):(i([E,null]),m(E),null)},y=E=>{typeof o=="function"&&o(E),h(null)},v=(E,w)=>{if(p instanceof Date&&d instanceof Date){const x=[d,p];return x.sort((S,I)=>S.getTime()-I.getTime()),!w.selected&&xn(E).subtract(1,"day").isBefore(x[1])&&xn(E).add(1,"day").isAfter(x[0])}return!1},_=(E,w)=>{if(p instanceof Date&&d instanceof Date){const x=[d,p];return x.sort((S,I)=>S.getTime()-I.getTime()),w.selected&&xn(E).isBefore(x[1])}return!1},b=(E,w)=>{if(p instanceof Date&&d instanceof Date){const x=[d,p];return x.sort((S,I)=>S.getTime()-I.getTime()),w.selected&&xn(E).isAfter(x[0])}return!1};return L.createElement(zQ,iBt({dayStyle:s,onMouseLeave:y,onDayMouseEnter:E=>h(E),onChange:g,value:p,range:r,ref:t,__staticSelector:a,amountOfMonths:l,paginateBy:c||l,hideOutsideDates:l>1,isDateInRange:v,isDateFirstInRange:_,isDateLastInRange:b},f))});xLe.displayName="@mantine/dates/RangeCalendar";var aBt=Object.defineProperty,$3=Object.getOwnPropertySymbols,SLe=Object.prototype.hasOwnProperty,TLe=Object.prototype.propertyIsEnumerable,Fme=(e,t,n)=>t in e?aBt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uBt=(e,t)=>{for(var n in t||(t={}))SLe.call(t,n)&&Fme(e,n,t[n]);if($3)for(var n of $3(t))TLe.call(t,n)&&Fme(e,n,t[n]);return e},lBt=(e,t)=>{var n={};for(var r in e)SLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$3)for(var r of $3(e))t.indexOf(r)<0&&TLe.call(e,r)&&(n[r]=e[r]);return n};const Bme=e=>Array.isArray(e)&&e.length===2&&e.every(t=>t instanceof Date),cBt=e=>Array.isArray(e)&&e.length===2&&e[0]instanceof Date,fBt={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,size:"sm",dropdownType:"popover",labelSeparator:"",clearable:!0,firstDayOfWeek:"monday",allowSingleDateInRange:!1,amountOfMonths:1,withinPortal:!1,openDropdownOnClear:!1},ALe=A.forwardRef((e,t)=>{const n=Ct("DateRangePicker",fBt,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,initialMonth:x,initiallyOpened:S,size:I,dropdownType:C,labelSeparator:O,clearable:z,clearButtonLabel:N,firstDayOfWeek:$,allowLevelChange:D,allowSingleDateInRange:B,amountOfMonths:V,withinPortal:j,initialLevel:G,onDropdownClose:U,onDropdownOpen:P,hideOutsideDates:k,hideWeekdays:H,renderDay:M,openDropdownOnClear:F,unstyled:J,weekendDays:se,yearLabelFormat:ae,nextDecadeLabel:ce,nextYearLabel:le,previousDecadeLabel:ge,previousYearLabel:ue}=n,Fe=lBt(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","size","dropdownType","labelSeparator","clearable","clearButtonLabel","firstDayOfWeek","allowLevelChange","allowSingleDateInRange","amountOfMonths","withinPortal","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),$e=us(),Ge=l||$e.datesLocale,Re=c||$e.dateFormat,[Oe,Me]=A.useState(S),Ut=I==="lg"||I==="xl"?"md":"sm",Qe=A.useRef(),[je,wt]=Ta({value:r,defaultValue:s,finalValue:[null,null],onChange:i}),et=ke=>{wt(ke),m&&Bme(ke)&&(Me(!1),U==null||U(),window.setTimeout(()=>{var it;return(it=Qe.current)==null?void 0:it.focus()},0))},ct=Bme(je),ft=cBt(je),jt=je[0]?Xm(xn(je[0]).locale(Ge).format(Re)):"",Dn=je[1]?Xm(xn(je[1]).locale(Ge).format(Re)):"",he=()=>{var ke;wt([null,null]),Me(!0),F&&(P==null||P()),(ke=Qe.current)==null||ke.focus()},_e=ke=>{!ke&&ft&&je[1]===null&&he(),Me(ke)};return L.createElement(UQ,uBt({dropdownOpened:Oe,setDropdownOpened:_e,shadow:u,transitionDuration:f,ref:As(t,Qe),size:I,styles:a,classNames:o,inputLabel:ft?`${jt} ${O} ${Dn}`:"",__staticSelector:"DateRangePicker",dropdownType:C,clearable:z&&ft,clearButtonLabel:N,onClear:he,withinPortal:j,amountOfMonths:V,onDropdownClose:U,onDropdownOpen:P,unstyled:J},Fe),L.createElement(xLe,{classNames:o,styles:a,locale:Ge,nextMonthLabel:h,previousMonthLabel:p,initialMonth:ct?je[0]:x,value:je,onChange:et,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:b,maxDate:E,excludeDate:w,__staticSelector:"DateRangePicker",fullWidth:C==="modal",firstDayOfWeek:$,size:C==="modal"?"lg":Ut,allowLevelChange:D,allowSingleDateInRange:B,amountOfMonths:V,initialLevel:G,hideOutsideDates:k,hideWeekdays:H,renderDay:M,unstyled:J,weekendDays:se,yearLabelFormat:ae,nextDecadeLabel:ce,nextYearLabel:le,previousDecadeLabel:ge,previousYearLabel:ue}))});ALe.displayName="@mantine/dates/DateRangePicker";function Cg(e){const t=parseInt(e,10);return t>=10?t.toString():`0${t}`}var dBt=Object.defineProperty,hBt=Object.defineProperties,pBt=Object.getOwnPropertyDescriptors,jme=Object.getOwnPropertySymbols,mBt=Object.prototype.hasOwnProperty,gBt=Object.prototype.propertyIsEnumerable,zme=(e,t,n)=>t in e?dBt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yBt=(e,t)=>{for(var n in t||(t={}))mBt.call(t,n)&&zme(e,n,t[n]);if(jme)for(var n of jme(t))gBt.call(t,n)&&zme(e,n,t[n]);return e},vBt=(e,t)=>hBt(e,pBt(t));const _Bt={xs:20,sm:23,md:25,lg:27,xl:29};var CLe=pt((e,{size:t,hasValue:n})=>({timeInput:vBt(yBt({},e.fn.fontStyles()),{width:e.fn.size({size:t,sizes:_Bt}),appearance:"none",backgroundColor:"transparent",color:"inherit",padding:0,textAlign:"center",border:"1px solid transparent",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),lineHeight:1,outline:0,"&:focus":{textAlign:n?void 0:"start"},"&::placeholder":{width:"auto",textAlign:"left"},"&[disabled]":{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],cursor:"not-allowed"}}),amPmInput:{textAlign:"left"}})),bBt=Object.defineProperty,R3=Object.getOwnPropertySymbols,ILe=Object.prototype.hasOwnProperty,OLe=Object.prototype.propertyIsEnumerable,Ume=(e,t,n)=>t in e?bBt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wBt=(e,t)=>{for(var n in t||(t={}))ILe.call(t,n)&&Ume(e,n,t[n]);if(R3)for(var n of R3(t))OLe.call(t,n)&&Ume(e,n,t[n]);return e},EBt=(e,t)=>{var n={};for(var r in e)ILe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&R3)for(var r of R3(e))t.indexOf(r)<0&&OLe.call(e,r)&&(n[r]=e[r]);return n};const b$=A.forwardRef((e,t)=>{var n=e,{className:r,onFocus:i,onBlur:s,onChange:o,setValue:a,withSeparator:u=!1,size:l="sm",max:c,min:f=0,value:d,unstyled:h}=n,p=EBt(n,["className","onFocus","onBlur","onChange","setValue","withSeparator","size","max","min","value","unstyled"]);const[m,g]=A.useState(0),{classes:y,cx:v,theme:_}=CLe({size:l,hasValue:!!d},{name:"TimeField",unstyled:h}),b=A.useRef(),E=C=>{typeof i=="function"&&i(C),b.current.select(),g(0)},w=C=>{typeof s=="function"&&s(C),m===1&&typeof o=="function"&&o(C.currentTarget.value,!1)},x=C=>{C.stopPropagation(),b.current.select()},S=C=>{if(C.key==="ArrowUp"){C.preventDefault();const O=Cg(ef(parseInt(C.currentTarget.value,10)+1,f,c).toString());d!==O&&o(O,!1)}if(C.key==="ArrowDown"){C.preventDefault();const O=Cg(ef(parseInt(C.currentTarget.value,10)-1,f,c).toString());d!==O&&o(O,!1)}},I=C=>{g(m+1);const O=parseInt(C.currentTarget.value,10).toString();if(O==="0"&&m===0){a("00");return}o(O,!0,m>0)};return L.createElement(L.Fragment,null,L.createElement("input",wBt({type:"text",inputMode:"numeric",ref:As(b,t),onChange:I,onClick:x,onFocus:E,onBlur:w,onKeyDown:S,value:d,className:v(y.timeInput,r)},p)),u&&L.createElement(Rt,{size:l,unstyled:h,style:{lineHeight:1,color:d?"inherit":_.colorScheme==="dark"?_.colors.dark[2]:_.colors.gray[7]}},":"))});b$.displayName="@mantine/dates/TimeField";function sj(e){return Math.floor(e/10)}function oj({onChange:e,nextRef:t,min:n,max:r,nextMax:i}){return(s,o,a=!1)=>{var u,l;const c=parseInt(s,10);if(!Number.isNaN(c)){if(c>sj(r)||a){const f=c%10;let d,h;c>r&&i&&f<=sj(i)?(d=Cg(sj(c).toString()),h=Cg(f.toString())):d=Cg(ef(c,n,r).toString()),e(d,h),o&&((u=t==null?void 0:t.current)==null||u.focus()),o&&((l=t==null?void 0:t.current)==null||l.select());return}e(c.toString())}}}var xBt=pt((e,{size:t})=>({timeInput:{},amPmInput:{},disabled:{cursor:"not-allowed"},controls:{display:"flex",alignItems:"center",height:e.fn.size({size:t,sizes:Bo})-2}})),SBt=Object.defineProperty,N3=Object.getOwnPropertySymbols,PLe=Object.prototype.hasOwnProperty,kLe=Object.prototype.propertyIsEnumerable,Vme=(e,t,n)=>t in e?SBt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,TBt=(e,t)=>{for(var n in t||(t={}))PLe.call(t,n)&&Vme(e,n,t[n]);if(N3)for(var n of N3(t))kLe.call(t,n)&&Vme(e,n,t[n]);return e},ABt=(e,t)=>{var n={};for(var r in e)PLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&N3)for(var r of N3(e))t.indexOf(r)<0&&kLe.call(e,r)&&(n[r]=e[r]);return n};const $Le=A.forwardRef((e,t)=>{var n=e,{className:r,onChange:i,onFocus:s,size:o="sm",value:a,unstyled:u,amLabel:l,pmLabel:c}=n,f=ABt(n,["className","onChange","onFocus","size","value","unstyled","amLabel","pmLabel"]);const{classes:d,cx:h}=CLe({size:o,hasValue:!!a},{name:"AmPmInput",unstyled:u}),p=A.useRef(),m=_=>{typeof s=="function"&&s(_),p.current.select()},g=_=>{_.stopPropagation(),p.current.select()},y=_=>{(_.key==="ArrowUp"||_.key==="ArrowDown")&&(_.preventDefault(),i(a===l?c:l,!0))},v=_=>{const b=_.target.value.slice(-1).toLowerCase();if(b==="p"){_.preventDefault(),i(c,!0);return}if(b==="a"){_.preventDefault(),i(l,!0);return}i(a.toString(),!0)};return L.createElement("input",TBt({type:"text",ref:As(p,t),onClick:g,onFocus:m,onKeyDown:y,onChange:v,value:a,className:h(d.timeInput,d.amPmInput)},f))});$Le.displayName="@mantine/dates/AmPmInput";function CBt({amLabel:e,pmLabel:t,onChange:n,nextRef:r}){return(i,s)=>{var o,a;const u=new RegExp(`(^(${e}|${t})?$)`),l=i.toLowerCase();if(l===e||l===t){n(l),s&&((o=r==null?void 0:r.current)==null||o.focus()),s&&((a=r==null?void 0:r.current)==null||a.select());return}u.test(l)&&n(l)}}function IBt(e,t,n,r,i,s){const o=xn();let a=parseInt(e,10);const u=parseInt(t,10),l=parseInt(n,10);return Number.isNaN(a)&&(a=0),r==="12"&&(a%=12,s===i&&(a+=12)),o.hour(a).minute(Number.isNaN(u)?0:u).second(Number.isNaN(l)?0:l).millisecond(0).toDate()}function Hme(e,t,n,r){if(!(e instanceof Date))return{hours:"",minutes:"",seconds:"",amPm:""};let i=e.getHours();const s=i>=12;return t==="12"&&(i%=12,i===0&&(i+=12)),{hours:Cg(i.toString()),minutes:Cg(e.getMinutes().toString()),seconds:Cg(e.getSeconds().toString()),amPm:s?r:n}}var OBt=Object.defineProperty,PBt=Object.defineProperties,kBt=Object.getOwnPropertyDescriptors,D3=Object.getOwnPropertySymbols,RLe=Object.prototype.hasOwnProperty,NLe=Object.prototype.propertyIsEnumerable,qme=(e,t,n)=>t in e?OBt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ym=(e,t)=>{for(var n in t||(t={}))RLe.call(t,n)&&qme(e,n,t[n]);if(D3)for(var n of D3(t))NLe.call(t,n)&&qme(e,n,t[n]);return e},aj=(e,t)=>PBt(e,kBt(t)),$Bt=(e,t)=>{var n={};for(var r in e)RLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&D3)for(var r of D3(e))t.indexOf(r)<0&&NLe.call(e,r)&&(n[r]=e[r]);return n};const RBt={xs:24,sm:30,md:34,lg:40,xl:44},NBt={size:"sm",withSeconds:!1,clearable:!1,format:"24",amLabel:"am",pmLabel:"pm",timePlaceholder:"--",amPmPlaceholder:"am",disabled:!1},UV=A.forwardRef((e,t)=>{const n=Ct("TimeInput",NBt,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:b,amLabel:E,pmLabel:w,name:x,hoursLabel:S,minutesLabel:I,secondsLabel:C,amPmLabel:O,timePlaceholder:z,amPmPlaceholder:N,disabled:$,sx:D,nextRef:B,labelProps:V,descriptionProps:j,errorProps:G,unstyled:U,withAsterisk:P}=n,k=$Bt(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","amLabel","pmLabel","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","disabled","sx","nextRef","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:H,cx:M,theme:F}=xBt({size:l},{classNames:f,styles:d,unstyled:U,name:"TimeInput"}),{systemStyles:J,rest:se}=yf(k),ae=vl(h),ce=A.useRef(),le=A.useRef(),ge=A.useRef(),ue=A.useRef(),[Fe,$e]=A.useState(Hme(p||m,b,E,w)),[Ge,Re]=A.useState(p||m);bs(()=>{$e(Hme(Ge,b,E,w))},[Ge,b,E,w]),bs(()=>{(p==null?void 0:p.getTime())!==(Ge==null?void 0:Ge.getTime())&&Re(p)},[p]);const Oe=ct=>{const ft=ym(ym({},Fe),ct),jt=IBt(ft.hours,ft.minutes,ft.seconds,b,w,ft.amPm);Re(jt),typeof g=="function"&&g(jt)},Me=oj({onChange:(ct,ft)=>{Oe({hours:ct,minutes:ft??Fe.minutes})},min:b==="12"?1:0,max:b==="12"?12:23,nextRef:le,nextMax:59}),Ut=oj({onChange:(ct,ft)=>{Oe({minutes:ct,seconds:ft??Fe.seconds})},min:0,max:59,nextRef:y?ge:b==="12"?ue:B,nextMax:y?59:void 0}),Qe=oj({onChange:ct=>{Oe({seconds:ct})},min:0,max:59,nextRef:b==="12"?ue:B}),je=CBt({amLabel:E,pmLabel:w,onChange:ct=>{Oe({amPm:ct})},nextRef:B}),wt=()=>{$e({hours:"",minutes:"",seconds:"",amPm:""}),Re(null),g==null||g(null),ce.current.focus()},et=v&&Ge&&!$?L.createElement(Sv,{variant:"transparent","aria-label":_,onClick:wt,size:l,unstyled:U}):null;return L.createElement(is.Wrapper,ym(ym({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeInput",id:ae,sx:D,errorProps:G,descriptionProps:j,labelProps:V,unstyled:U,withAsterisk:P},J),c),L.createElement(is,ym({component:"div",__staticSelector:"TimeInput",required:r,invalid:!!s,onClick:()=>ce.current.focus(),size:l,className:M({[H.disabled]:$}),classNames:f,styles:d,disabled:$,rightSection:et,rightSectionWidth:F.fn.size({size:l,sizes:RBt}),unstyled:U},se),L.createElement("div",{className:H.controls},L.createElement(b$,{ref:As(ce,t),value:Fe.hours,onChange:Me,setValue:ct=>$e(ft=>aj(ym({},ft),{hours:ct})),id:ae,className:H.timeInput,withSeparator:!0,size:l,max:b==="12"?12:23,placeholder:z,"aria-label":S,disabled:$,name:x,unstyled:U}),L.createElement(b$,{ref:le,value:Fe.minutes,onChange:Ut,setValue:ct=>$e(ft=>aj(ym({},ft),{minutes:ct})),className:H.timeInput,withSeparator:y,size:l,max:59,placeholder:z,"aria-label":I,disabled:$,unstyled:U}),y&&L.createElement(b$,{ref:ge,value:Fe.seconds,onChange:Qe,setValue:ct=>$e(ft=>aj(ym({},ft),{seconds:ct})),className:H.timeInput,size:l,max:59,placeholder:z,"aria-label":C,disabled:$,unstyled:U}),b==="12"&&L.createElement($Le,{ref:ue,value:Fe.amPm,onChange:je,placeholder:N,amLabel:E,pmLabel:w,size:l,"aria-label":O,disabled:$,unstyled:U}))))});UV.displayName="@mantine/dates/TimeInput";var DBt=pt((e,{size:t})=>({timeField:{},disabled:{opacity:.6,cursor:"not-allowed"},inputWrapper:{display:"inline-flex",alignItems:"center",height:e.fn.size({size:t,sizes:Bo})-2},separator:{paddingLeft:e.fn.size({size:t,sizes:e.spacing})/2,paddingRight:e.fn.size({size:t,sizes:e.spacing})/2,lineHeight:1}})),LBt=Object.defineProperty,L3=Object.getOwnPropertySymbols,DLe=Object.prototype.hasOwnProperty,LLe=Object.prototype.propertyIsEnumerable,Wme=(e,t,n)=>t in e?LBt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mS=(e,t)=>{for(var n in t||(t={}))DLe.call(t,n)&&Wme(e,n,t[n]);if(L3)for(var n of L3(t))LLe.call(t,n)&&Wme(e,n,t[n]);return e},MBt=(e,t)=>{var n={};for(var r in e)DLe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&L3)for(var r of L3(e))t.indexOf(r)<0&&LLe.call(e,r)&&(n[r]=e[r]);return n};const FBt={xs:24,sm:30,md:34,lg:40,xl:44},BBt={size:"sm",defaultValue:[null,null],withSeconds:!1,clearable:!1,format:"24",timePlaceholder:"--",amPmPlaceholder:"am",labelSeparator:"",disabled:!1},jBt=A.forwardRef((e,t)=>{const n=Ct("TimeRangeInput",BBt,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:b,name:E,hoursLabel:w,minutesLabel:x,secondsLabel:S,amPmLabel:I,timePlaceholder:C,amPmPlaceholder:O,labelSeparator:z,disabled:N,sx:$,labelProps:D,descriptionProps:B,errorProps:V,unstyled:j,withAsterisk:G}=n,U=MBt(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","labelSeparator","disabled","sx","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:P,cx:k,theme:H}=DBt({size:l},{classNames:f,styles:d,unstyled:j,name:"TimeRangeInput"}),{systemStyles:M,rest:F}=yf(U),J=vl(h),se=A.useRef(),ae=A.useRef(),[ce,le]=A.useState(p??m);bs(()=>{typeof g=="function"&&g(ce)},[ce]),bs(()=>{var $e,Ge,Re,Oe;((($e=p[0])==null?void 0:$e.getTime())!==((Ge=ce[0])==null?void 0:Ge.getTime())||((Re=p[1])==null?void 0:Re.getTime())!==((Oe=ce[1])==null?void 0:Oe.getTime()))&&le(p)},[p]);const ge=()=>{var $e;le([null,null]),($e=se.current)==null||$e.focus()},ue=v&&ce.filter($e=>!!$e).length>0?L.createElement(Sv,{variant:"transparent","aria-label":_,onClick:ge,size:l,unstyled:j}):null,Fe={amPmLabel:I,amPmPlaceholder:O,disabled:N,format:b,hoursLabel:w,minutesLabel:x,secondsLabel:S,size:l,timePlaceholder:C,withSeconds:y};return L.createElement(is.Wrapper,mS(mS({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeRangeInput",id:J,sx:$,errorProps:V,descriptionProps:B,labelProps:D,unstyled:j,withAsterisk:G},M),c),L.createElement(is,mS({component:"div",__staticSelector:"TimeRangeInput",required:r,invalid:!!s,onClick:()=>{var $e;($e=se.current)==null||$e.focus()},size:l,className:k({[P.disabled]:N}),classNames:f,styles:d,disabled:N,rightSection:ue,rightSectionWidth:H.fn.size({size:l,sizes:FBt}),unstyled:j},F),L.createElement("div",{className:P.inputWrapper},L.createElement(UV,mS({ref:As(se,t),variant:"unstyled",value:ce[0],onChange:$e=>le([$e,ce[1]]),name:E,nextRef:ae,id:J,unstyled:j},Fe)),L.createElement("span",{className:P.separator,style:{color:H.colorScheme==="dark"?H.colors.dark[2]:H.colors.gray[7]}},z),L.createElement(UV,mS({ref:ae,variant:"unstyled",value:ce[1],onChange:$e=>le([ce[0],$e]),unstyled:j},Fe)))))});jBt.displayName="@mantine/dates/TimeRangeInput";const Gme={};function VV(e,t){e===void 0&&(e=Gme),t===void 0&&(t=Gme);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var zBt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),UBt=Object.prototype.hasOwnProperty;function HV(e,t){return UBt.call(e,t)}function qV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)HV(e,i)&&r.push(i);return r}function Ku(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function WV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function xy(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function MLe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function GV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(GV(e[t]))return!0}else if(typeof e=="object"){for(var r=qV(e),i=r.length,s=0;s<i;s++)if(GV(e[r[s]]))return!0}}return!1}function Yme(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var FLe=function(e){zBt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Yme(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Yme(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ci=FLe,VBt=Ku,ub={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=M3(n,this.path);r&&(r=Ku(r));var i=v1(n,{op:"remove",path:this.from}).removed;return v1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=M3(n,this.from);return v1(n,{op:"add",path:this.path,value:Ku(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:$A(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},HBt={add:function(e,t,n){return WV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:ub.move,copy:ub.copy,test:ub.test,_get:ub._get};function M3(e,t){if(t=="")return e;var n={op:"_get",path:t};return v1(e,n),n.value}function v1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):F3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=M3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=$A(e,t.value),o.test===!1)throw new Ci("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ci("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ku(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=F3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=MLe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!WV(h))throw new Ci("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);WV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ci("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=HBt[t.op].call(t,l,h,e);if(o.test===!1)throw new Ci("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=ub[t.op].call(t,l,h,e);if(o.test===!1)throw new Ci("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ci("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function q4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ci("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ku(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=v1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function qBt(e,t,n){var r=v1(e,t);if(r.test===!1)throw new Ci("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function F3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ci("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(ub[e.op]){if(typeof e.path!="string")throw new Ci("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ci('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ci("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ci("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&GV(e.value))throw new Ci("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ci("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ci("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=BLe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ci("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ci("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function BLe(e,t,n){try{if(!Array.isArray(e))throw new Ci("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)q4(Ku(t),Ku(e),n||!0);else{n=n||F3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ci)return i;throw i}}function $A(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!$A(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!$A(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const WBt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ci,_areEquals:$A,applyOperation:v1,applyPatch:q4,applyReducer:qBt,deepClone:VBt,getValueByPointer:M3,validate:BLe,validator:F3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var VQ=new WeakMap,GBt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),YBt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function KBt(e){return VQ.get(e)}function XBt(e,t){return e.observers.get(t)}function QBt(e,t){e.observers.delete(t.callback)}function JBt(e,t){t.unobserve()}function ZBt(e,t){var n=[],r,i=KBt(e);if(!i)i=new GBt(e),VQ.set(e,i);else{var s=XBt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ku(e),t){r.callback=t,r.next=null;var o=function(){YV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){YV(r),clearTimeout(r.next),QBt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new YBt(t,r)),r}function YV(e,t){t===void 0&&(t=!1);var n=VQ.get(e.object);HQ(n.value,e.object,e.patches,"",t),e.patches.length&&q4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function HQ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=qV(t),o=qV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(HV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?HQ(c,f,n,r+"/"+xy(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+xy(l),value:Ku(c)}),n.push({op:"replace",path:r+"/"+xy(l),value:Ku(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+xy(l),value:Ku(c)}),n.push({op:"remove",path:r+"/"+xy(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!HV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+xy(l),value:Ku(t[l])})}}}function ejt(e,t,n){n===void 0&&(n=!1);var r=[];return HQ(e,t,r,"",n),r}const tjt=Object.freeze(Object.defineProperty({__proto__:null,compare:ejt,generate:YV,observe:ZBt,unobserve:JBt},Symbol.toStringTag,{value:"Module"}));Object.assign({},WBt,tjt,{JsonPatchError:FLe,deepClone:Ku,escapePathComponent:xy,unescapePathComponent:MLe});var njt=/("(?:[^\\"]|\\.)*")|[:,]/g,rjt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,_,b,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),b=JSON.stringify(a,s),b===void 0)return b;if(g=i-u.length-l,b.length<=g&&(v=b.replace(njt,function(w,x){return x||w+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(b),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(_="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[_,r+d.join(`,
`+y),c].join(`
`+u)}return b}(t,"",0)};const uj=pl(rjt);function Ou(e,t,n){return e.fields=t||[],e.fname=n,e}function Ni(e){return e==null?null:e.fname}function Yo(e){return e==null?null:e.fields}function jLe(e){return e.length===1?ijt(e[0]):sjt(e)}const ijt=e=>function(t){return t[e]},sjt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Te(e){throw Error(e)}function uh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Te("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Te("Access path missing closing bracket: "+e),r&&Te("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function ec(e,t,n){const r=uh(e);return e=r.length===1?r[0]:e,Ou((n&&n.get||jLe)(r),[e],t||e)}const wI=ec("id"),na=Ou(e=>e,[],"identity"),jm=Ou(()=>0,[],"zero"),ex=Ou(()=>1,[],"one"),tc=Ou(()=>!0,[],"true"),xm=Ou(()=>!1,[],"false");function ojt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const zLe=0,qQ=1,WQ=2,ULe=3,VLe=4;function GQ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ojt,r=e||zLe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=qQ&&n(t||"error","ERROR",arguments),this},warn(){return r>=WQ&&n(t||"warn","WARN",arguments),this},info(){return r>=ULe&&n(t||"log","INFO",arguments),this},debug(){return r>=VLe&&n(t||"log","DEBUG",arguments),this}}}var Ie=Array.isArray;function ot(e){return e===Object(e)}const Kme=e=>e!=="__proto__";function tx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=ajt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;nx(r,s,i[s],o)}return r},{})}function nx(e,t,n,r){if(!Kme(t))return;let i,s;if(ot(n)&&!Ie(n)){s=ot(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?nx(s,i,n[i]):Kme(i)&&(s[i]=n[i])}else e[t]=n}function ajt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Un(e){return e[e.length-1]}function qo(e){return e==null||e===""?null:+e}const HLe=e=>t=>e*Math.exp(t),qLe=e=>t=>Math.log(e*t),WLe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),GLe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,B3=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function W4(e,t,n,r){const i=n(e[0]),s=n(Un(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function YLe(e,t){return W4(e,t,qo,na)}function KLe(e,t){var n=Math.sign(e[0]);return W4(e,t,qLe(n),HLe(n))}function XLe(e,t,n){return W4(e,t,B3(n),B3(1/n))}function QLe(e,t,n){return W4(e,t,WLe(n),GLe(n))}function G4(e,t,n,r,i){const s=r(e[0]),o=r(Un(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function YQ(e,t,n){return G4(e,t,n,qo,na)}function KQ(e,t,n){const r=Math.sign(e[0]);return G4(e,t,n,qLe(r),HLe(r))}function j3(e,t,n,r){return G4(e,t,n,B3(r),B3(1/r))}function XQ(e,t,n,r){return G4(e,t,n,WLe(r),GLe(r))}function JLe(e){return 1+~~(new Date(e).getMonth()/3)}function ZLe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function nt(e){return e!=null?Ie(e)?e:[e]:[]}function eMe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function pn(e){return typeof e=="function"}const ujt="descending";function QQ(e,t,n){n=n||{},t=nt(t)||[];const r=[],i=[],s={},o=n.comparator||ljt;return nt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===ujt?-1:1),i.push(a=pn(a)?a:ec(a,null,n)),(Yo(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Ou(o(i,r),Object.keys(s))}const Y4=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),ljt=(e,t)=>e.length===1?cjt(e[0],t[0]):fjt(e,t,e.length),cjt=(e,t)=>function(n,r){return Y4(e(n),e(r))*t},fjt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=Y4(s(r),s(i));return o*t[a]});function ra(e){return pn(e)?e:()=>e}function JQ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function hn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Gd(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function tMe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const djt=Object.prototype.hasOwnProperty;function Nt(e,t){return djt.call(e,t)}const DP={};function rx(e){let t={},n;function r(s){return Nt(t,s)&&t[s]!==DP}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===DP&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=DP),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==DP&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function nMe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Un(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function We(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),hn(r,n)}function lb(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function B0(e){return typeof e=="boolean"}function Ig(e){return Object.prototype.toString.call(e)==="[object Date]"}function rMe(e){return e&&pn(e[Symbol.iterator])}function Jn(e){return typeof e=="number"}function iMe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function rt(e){return typeof e=="string"}function ZQ(e,t,n){e&&(e=t?nt(e).map(a=>a.replace(/\\(.)/g,"$1")):nt(e));const r=e&&e.length,i=n&&n.get||jLe,s=a=>i(t?[a]:uh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Ou(o,e,"key")}function sMe(e,t){const n=e[0],r=Un(e),i=+t;return i?i===1?r:n+i*(r-n):n}const hjt=1e4;function oMe(e){e=+e||hjt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Nt(t,o)||Nt(n,o),get:o=>Nt(t,o)?t[o]:Nt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Nt(t,o)?t[o]=a:s(o,a)}}function aMe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function sT(e,t){let n="";for(;--t>=0;)n+=e;return n}function uMe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?sT(i,o)+s:r==="center"?sT(i,~~(o/2))+s+sT(i,Math.ceil(o/2)):s+sT(i,o)}function EI(e){return e&&Un(e)-e[0]||0}function Xe(e){return Ie(e)?"["+e.map(Xe)+"]":ot(e)||rt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function eJ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const pjt=e=>Jn(e)||Ig(e)?e:Date.parse(e);function tJ(e,t){return t=t||pjt,e==null||e===""?null:t(e)}function nJ(e){return e==null||e===""?null:e+""}function cf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function lMe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function km(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function mjt(e){return e}function gjt(e){if(e==null)return mjt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function yjt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function vjt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Xme(e,n)})}:Xme(e,t)}function Xme(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=cMe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function cMe(e,t){var n=gjt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&yjt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function _jt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function bjt(e){return cMe(e,wjt.apply(this,arguments))}function wjt(e,t,n){var r,i,s;if(arguments.length>1)r=Ejt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:_jt(e,r)}}function Ejt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function Og(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function xjt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xI(e){let t,n,r;e.length!==2?(t=Og,n=(a,u)=>Og(e(a),u),r=(a,u)=>e(a)-u):(t=e===Og||e===xjt?e:Sjt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Sjt(){return 0}function fMe(e){return e===null?NaN:+e}function*Tjt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const dMe=xI(Og),z3=dMe.right,Ajt=dMe.left;xI(fMe).center;const Cjt=z3;function Ijt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Ojt(e,t){const n=Ijt(e,t);return n&&Math.sqrt(n)}function Pjt(e,t){return Array.from(t,n=>e[n])}function kjt(e=Og){if(e===Og)return hMe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function hMe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const $jt=Math.sqrt(50),Rjt=Math.sqrt(10),Njt=Math.sqrt(2);function pMe(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=$jt?10:s>=Rjt?5:s>=Njt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?pMe(e,t,n*2):[a,u,l]}function Qme(e,t,n){return t=+t,e=+e,n=+n,pMe(e,t,n)[2]}function RA(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Qme(t,e,n):Qme(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function _1(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function KV(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function mMe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?hMe:kjt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));mMe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(gS(e,n,t),i(e[r],s)>0&&gS(e,n,r);o<a;){for(gS(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?gS(e,n,a):(++a,gS(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function gS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function XV(e,t,n){if(e=Float64Array.from(Tjt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return KV(e);if(t>=1)return _1(e);var r,i=(r-1)*t,s=Math.floor(i),o=_1(mMe(e,s).subarray(0,s+1)),a=KV(e.subarray(s+1));return o+(a-o)*(i-s)}}function Djt(e,t,n=fMe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Ljt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function gMe(e,t){return XV(e,.5,t)}function Fv(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function yMe(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Mjt(e,...t){e=new _D(e),t=t.map(Fjt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Fjt(e){return e instanceof _D?e:new _D(e)}function Bjt(...e){const t=new _D;for(const n of e)for(const r of n)t.add(r);return t}const yo="year",_u="quarter",Ko="month",vs="week",bu="date",Ho="day",Yd="dayofyear",ul="hours",ll="minutes",nc="seconds",ff="milliseconds",rJ=[yo,_u,Ko,vs,bu,Ho,Yd,ul,ll,nc,ff],lj=rJ.reduce((e,t,n)=>(e[t]=1+n,e),{});function iJ(e){const t=nt(e).slice(),n={};return t.length||Te("Missing time unit."),t.forEach(i=>{Nt(lj,i)?n[i]=1:Te(`Invalid time unit: ${i}.`)}),(n[vs]||n[Ho]?1:0)+(n[_u]||n[Ko]||n[bu]?1:0)+(n[Yd]?1:0)>1&&Te(`Incompatible time units: ${e}`),t.sort((i,s)=>lj[i]-lj[s]),t}const jjt={[yo]:"%Y ",[_u]:"Q%q ",[Ko]:"%b ",[bu]:"%d ",[vs]:"W%U ",[Ho]:"%a ",[Yd]:"%j ",[ul]:"%H:00",[ll]:"00:%M",[nc]:":%S",[ff]:".%L",[`${yo}-${Ko}`]:"%Y-%m ",[`${yo}-${Ko}-${bu}`]:"%Y-%m-%d ",[`${ul}-${ll}`]:"%H:%M"};function vMe(e,t){const n=hn({},jjt,t),r=iJ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Dy=new Date;function sJ(e){return Dy.setFullYear(e),Dy.setMonth(0),Dy.setDate(1),Dy.setHours(0,0,0,0),Dy}function _Me(e){return wMe(new Date(e))}function bMe(e){return QV(new Date(e))}function wMe(e){return fp.count(sJ(e.getFullYear())-1,e)}function QV(e){return BE.count(sJ(e.getFullYear())-1,e)}function JV(e){return sJ(e).getDay()}function zjt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function EMe(e){return SMe(new Date(e))}function xMe(e){return ZV(new Date(e))}function SMe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return xg.count(t-1,e)}function ZV(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return jE.count(t-1,e)}function eH(e){return Dy.setTime(Date.UTC(e,0,1)),Dy.getUTCDay()}function Ujt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function TMe(e,t,n,r,i){const s=t||1,o=Un(e),a=(y,v,_)=>(_=_||y,Vjt(n[_],r[_],y===o&&s,v)),u=new Date,l=cf(e),c=l[yo]?a(yo):ra(2012),f=l[Ko]?a(Ko):l[_u]?a(_u):jm,d=l[vs]&&l[Ho]?a(Ho,1,vs+Ho):l[vs]?a(vs,1):l[Ho]?a(Ho,1):l[bu]?a(bu,1):l[Yd]?a(Yd,1):ex,h=l[ul]?a(ul):jm,p=l[ll]?a(ll):jm,m=l[nc]?a(nc):jm,g=l[ff]?a(ff):jm;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function Vjt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function Uw(e,t,n){return t+e*7-(n+6)%7}const Hjt={[yo]:e=>e.getFullYear(),[_u]:e=>Math.floor(e.getMonth()/3),[Ko]:e=>e.getMonth(),[bu]:e=>e.getDate(),[ul]:e=>e.getHours(),[ll]:e=>e.getMinutes(),[nc]:e=>e.getSeconds(),[ff]:e=>e.getMilliseconds(),[Yd]:e=>wMe(e),[vs]:e=>QV(e),[vs+Ho]:(e,t)=>Uw(QV(e),e.getDay(),JV(t)),[Ho]:(e,t)=>Uw(1,e.getDay(),JV(t))},qjt={[_u]:e=>3*e,[vs]:(e,t)=>Uw(e,0,JV(t))};function AMe(e,t){return TMe(e,t||1,Hjt,qjt,zjt)}const Wjt={[yo]:e=>e.getUTCFullYear(),[_u]:e=>Math.floor(e.getUTCMonth()/3),[Ko]:e=>e.getUTCMonth(),[bu]:e=>e.getUTCDate(),[ul]:e=>e.getUTCHours(),[ll]:e=>e.getUTCMinutes(),[nc]:e=>e.getUTCSeconds(),[ff]:e=>e.getUTCMilliseconds(),[Yd]:e=>SMe(e),[vs]:e=>ZV(e),[Ho]:(e,t)=>Uw(1,e.getUTCDay(),eH(t)),[vs+Ho]:(e,t)=>Uw(ZV(e),e.getUTCDay(),eH(t))},Gjt={[_u]:e=>3*e,[vs]:(e,t)=>Uw(e,0,eH(t))};function CMe(e,t){return TMe(e,t||1,Wjt,Gjt,Ujt)}const Yjt={[yo]:Bd,[_u]:yA.every(3),[Ko]:yA,[vs]:BE,[bu]:fp,[Ho]:fp,[Yd]:fp,[ul]:i4,[ll]:n4,[nc]:Qh,[ff]:Ew},Kjt={[yo]:jd,[_u]:vA.every(3),[Ko]:vA,[vs]:jE,[bu]:xg,[Ho]:xg,[Yd]:xg,[ul]:s4,[ll]:r4,[nc]:Qh,[ff]:Ew};function ix(e){return Yjt[e]}function sx(e){return Kjt[e]}function IMe(e,t,n){return e?e.offset(t,n):void 0}function OMe(e,t,n){return IMe(ix(e),t,n)}function PMe(e,t,n){return IMe(sx(e),t,n)}function kMe(e,t,n,r){return e?e.range(t,n,r):void 0}function $Me(e,t,n,r){return kMe(ix(e),t,n,r)}function RMe(e,t,n,r){return kMe(sx(e),t,n,r)}const oT=1e3,aT=oT*60,uT=aT*60,K4=uT*24,Xjt=K4*7,Jme=K4*30,tH=K4*365,NMe=[yo,Ko,bu,ul,ll,nc,ff],lT=NMe.slice(0,-1),cT=lT.slice(0,-1),fT=cT.slice(0,-1),Qjt=fT.slice(0,-1),Jjt=[yo,vs],Zme=[yo,Ko],DMe=[yo],yS=[[lT,1,oT],[lT,5,5*oT],[lT,15,15*oT],[lT,30,30*oT],[cT,1,aT],[cT,5,5*aT],[cT,15,15*aT],[cT,30,30*aT],[fT,1,uT],[fT,3,3*uT],[fT,6,6*uT],[fT,12,12*uT],[Qjt,1,K4],[Jjt,1,Xjt],[Zme,1,Jme],[Zme,3,3*Jme],[DMe,1,tH]];function LMe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(EI(t))/n;let i=xI(a=>a[2]).right(yS,r),s,o;return i===yS.length?(s=DMe,o=RA(t[0]/tH,t[1]/tH,n)):i?(i=yS[r/yS[i-1][2]<yS[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=NMe,o=Math.max(RA(t[0],t[1],n),1)),{units:s,step:o}}function dT(e){const t={};return n=>t[n]||(t[n]=e(n))}function Zjt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=e7t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function e7t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function MMe(e){const t=dT(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=B1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Zjt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=B1(o??",f");const a=RA(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=jPe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=zPe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=BPe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let nH;FMe();function FMe(){return nH=MMe({format:ME,formatPrefix:iK})}function BMe(e){return MMe(FPe(e))}function U3(e){return arguments.length?nH=BMe(e):nH}function ege(e,t,n){n=n||{},ot(n)||Te(`Invalid time multi-format specifier: ${n}`);const r=t(nc),i=t(ll),s=t(ul),o=t(bu),a=t(vs),u=t(Ko),l=t(_u),c=t(yo),f=e(n[ff]||".%L"),d=e(n[nc]||":%S"),h=e(n[ll]||"%I:%M"),p=e(n[ul]||"%I %p"),m=e(n[bu]||n[Ho]||"%a %d"),g=e(n[vs]||"%b %d"),y=e(n[Ko]||"%B"),v=e(n[_u]||"%B"),_=e(n[yo]||"%Y");return b=>(r(b)<b?f:i(b)<b?d:s(b)<b?h:o(b)<b?p:u(b)<b?a(b)<b?m:g:c(b)<b?l(b)<b?y:v:_)(b)}function jMe(e){const t=dT(e.format),n=dT(e.utcFormat);return{timeFormat:r=>rt(r)?t(r):ege(t,ix,r),utcFormat:r=>rt(r)?n(r):ege(n,sx,r),timeParse:dT(e.parse),utcParse:dT(e.utcParse)}}let rH;zMe();function zMe(){return rH=jMe({format:cK,parse:gke,utcFormat:o4,utcParse:yke})}function UMe(e){return jMe(fke(e))}function NA(e){return arguments.length?rH=UMe(e):rH}const iH=(e,t)=>hn({},e,t);function VMe(e,t){const n=e?BMe(e):U3(),r=t?UMe(t):NA();return iH(n,r)}function oJ(e,t){const n=arguments.length;return n&&n!==2&&Te("defaultLocale expects either zero or two arguments."),n?iH(U3(e),NA(t)):iH(U3(),NA())}function t7t(){return FMe(),zMe(),oJ()}const n7t=/^(data:|([A-Za-z]+:)?\/\/)/,r7t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,i7t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,tge="file://";function s7t(e,t){return n=>({options:n||{},sanitize:a7t,load:o7t,fileAccess:!!t,file:u7t(t),http:c7t(e)})}async function o7t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function a7t(e,t){t=hn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=r7t.test(e.replace(i7t,""));(e==null||typeof e!="string"||!a)&&Te("Sanitize failure, invalid URI: "+Xe(e));const u=n7t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(tge))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(tge.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function u7t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):l7t}async function l7t(){Te("No file system access.")}function c7t(e){return e?async function(t,n){const r=hn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?pn(s[i])?s[i]():s.text():Te(s.status+""+s.statusText)}:f7t}async function f7t(){Te("No HTTP fetch method available.")}const d7t=e=>e!=null&&e===e,h7t=e=>e==="true"||e==="false"||e===!0||e===!1,p7t=e=>!Number.isNaN(Date.parse(e)),HMe=e=>!Number.isNaN(+e)&&!(e instanceof Date),m7t=e=>HMe(e)&&Number.isInteger(+e),sH={boolean:eJ,integer:qo,number:qo,date:tJ,string:nJ,unknown:na},LP=[h7t,m7t,HMe,p7t],g7t=["boolean","integer","number","date"];function qMe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=LP.length,i=LP.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&d7t(u)&&!LP[a](u)&&(i[a]=0,++o,o===LP.length))return"string";return g7t[i.reduce((s,o)=>s===0?o:s,0)-1]}function WMe(e,t){return t.reduce((n,r)=>(n[r]=qMe(e,r),n),{})}function nge(e){const t=function(n,r){const i={delimiter:e};return aJ(n,r?hn(r,i):i)};return t.responseType="text",t}function aJ(e,t){return t.header&&(e=t.header.map(Xe).join(t.delimiter)+`
`+e),DPe(t.delimiter).parse(e+"")}aJ.responseType="text";function y7t(e){return typeof Buffer=="function"&&pn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function uJ(e,t){const n=t&&t.property?ec(t.property):na;return ot(e)&&!y7t(e)?v7t(n(e),t):n(JSON.parse(e))}uJ.responseType="json";function v7t(e,t){return!Ie(e)&&rMe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const _7t={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function GMe(e,t){let n,r,i,s;return e=uJ(e,t),t&&t.feature?(n=vjt,i=t.feature):t&&t.mesh?(n=bjt,i=t.mesh,s=_7t[t.filter]):Te("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Te("Invalid TopoJSON object: "+i),r&&r.features||[r]}GMe.responseType="json";const w$={dsv:aJ,csv:nge(","),tsv:nge("	"),json:uJ,topojson:GMe};function lJ(e,t){return arguments.length>1?(w$[e]=t,this):Nt(w$,e)?w$[e]:null}function YMe(e){const t=lJ(e);return t&&t.responseType||"text"}function KMe(e,t,n,r){t=t||{};const i=lJ(t.type||"json");return i||Te("Unknown data format type: "+t.type),e=i(e,t),t.parse&&b7t(e,t.parse,n,r),Nt(e,"columns")&&delete e.columns,e}function b7t(e,t,n,r){if(!e.length)return;const i=NA();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=WMe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!sH[p])throw Error("Illegal format pattern: "+h+":"+p);return sH[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const X4=s7t(typeof fetch<"u"&&fetch,null);function Q4(e){const t=e||na,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function E$(e,t){try{await t(e)}catch(n){e.error(n)}}const XMe=Symbol("vega_id");let w7t=1;function J4(e){return!!(e&&kt(e))}function kt(e){return e[XMe]}function QMe(e,t){return e[XMe]=t,e}function dr(e){const t=e===Object(e)?e:{data:e};return kt(t)?t:QMe(t,w7t++)}function cJ(e){return Z4(e,dr({}))}function Z4(e,t){for(const n in e)t[n]=e[n];return t}function JMe(e,t){return QMe(t,kt(e))}function Bv(e,t){return e?t?(n,r)=>e(n,r)||kt(t(n))-kt(t(r)):(n,r)=>e(n,r)||kt(n)-kt(r):null}function ZMe(e){return e&&e.constructor===jv}function jv(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:jv,insert(a){const u=nt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=pn(a)?r:t,l=nt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:ra(l)};return pn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return pn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[kt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[kt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[kt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=kt(m),l[g]?l[g]=1:a.add.push(dr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[kt(m)]<0&&a.rem.push(m);function y(v,_,b){b?v[_]=b(v):a.encode=_,o||(c[kt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[kt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[kt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[kt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const x$="_:mod:_";function eF(){Object.defineProperty(this,x$,{writable:!0,value:{}})}eF.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[x$];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Ie(n)?1+n.length:-1),i},modified(e,t){const n=this[x$];if(arguments.length){if(Ie(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[x$]={},this}};let E7t=0;const x7t="pulse",S7t=new eF,T7t=1,A7t=2;function Dr(e,t,n,r){this.id=++E7t,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function rge(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Dr.prototype={targets(){return this._targets||(this._targets=Q4(wI))},set(e){return this.value!==e?(this.value=e,1):0},skip:rge(T7t),modified:rge(A7t),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new eF,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Dr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===x7t)nt(a).forEach(f=>{f instanceof Dr?f!==this&&(f.targets().add(this),s.push(f)):Te("Pulse parameters must be operator instances.")}),this.source=a;else if(Ie(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||S7t,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function C7t(e,t,n,r){let i=1,s;return e instanceof Dr?s=e:e&&e.prototype instanceof Dr?s=new e:pn(e)?s=new Dr(null,e):(i=0,s=new Dr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function I7t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let O7t=0;function tF(e,t,n){this.id=++O7t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Sm(e,t,n){return new tF(e,t,n)}tF.prototype={_filter:tc,_apply:na,targets(){return this._targets||(this._targets=Q4(wI))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Sm(e);return this.targets().add(t),t},apply(e){const t=Sm(null,e);return this.targets().add(t),t},merge(){const e=Sm();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Sm();return this.targets().add(Sm(null,null,JQ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Sm(null,null,()=>n=!0)),t.targets().add(Sm(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=tc,this._targets=null}};function P7t(e,t,n,r){const i=this,s=Sm(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=nt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function k7t(e,t){const n=this.locale();return KMe(e,t,n.timeParse,n.utcParse)}function $7t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function R7t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:YMe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function N7t(e,t,n){const r=this,i=r._pending||D7t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(tc).insert(s.data||[])),i.done(),s}function D7t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const L7t={skip:!0};function M7t(e,t,n,r,i){return(e instanceof Dr?B7t:F7t)(this,e,t,n,r,i),this}function F7t(e,t,n,r,i,s){const o=hn({},s,L7t);let a,u;pn(n)||(n=ra(n)),r===void 0?a=l=>e.touch(n(l)):pn(r)?(u=new Dr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;ZMe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function B7t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Dr(null,j7t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function j7t(e,t){return t=pn(t)?t:ra(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function z7t(e){e.rank=++this._rank}function U7t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Te("Cycle detected in dataflow graph.")}const V3={},Yf=1,$m=2,kh=4,V7t=Yf|$m,ige=Yf|kh,v_=Yf|$m|kh,sge=8,vS=16,oge=32,age=64;function Pg(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function cj(e,t){const n=[];return km(e,t,r=>n.push(r)),n}function uge(e,t){const n={};return e.visit(t,r=>{n[kt(r)]=1}),r=>n[kt(r)]?null:r}function MP(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Pg.prototype={StopPropagation:V3,ADD:Yf,REM:$m,MOD:kh,ADD_REM:V7t,ADD_MOD:ige,ALL:v_,REFLOW:sge,SOURCE:vS,NO_SOURCE:oge,NO_FIELDS:age,fork(e){return new Pg(this.dataflow).init(this,e)},clone(){const e=this.fork(v_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(v_|vS)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Pg(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&age)&&(n.fields=e.fields),t&Yf?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&$m?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&kh?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&oge?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||v_;return t&Yf&&this.add.length||t&$m&&this.rem.length||t&kh&&this.mod.length},reflow(e){if(e)return this.fork(v_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(kh,uge(this,Yf))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Ie(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Ie(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Yf&&(n.addF=MP(n.addF,t)),e&$m&&(n.remF=MP(n.remF,t)),e&kh&&(n.modF=MP(n.modF,t)),e&vS&&(n.srcF=MP(n.srcF,t)),n},materialize(e){e=e||v_;const t=this;return e&Yf&&t.addF&&(t.add=cj(t.add,t.addF),t.addF=null),e&$m&&t.remF&&(t.rem=cj(t.rem,t.remF),t.remF=null),e&kh&&t.modF&&(t.mod=cj(t.mod,t.modF),t.modF=null),e&vS&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&vS)return km(n.source,n.srcF,r),n;e&Yf&&km(n.add,n.addF,r),e&$m&&km(n.rem,n.remF,r),e&kh&&km(n.mod,n.modF,r);const i=n.source;if(e&sge&&i){const s=n.add.length+n.mod.length;s===i.length||(s?km(i,uge(n,ige),r):km(i,n.srcF,r))}return n}};function fJ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}We(fJ,Pg,{fork(e){const t=new Pg(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Ie(e)?e.some(r=>n[r]):n[e]:0},filter(){Te("MultiPulse does not support filtering.")},materialize(){Te("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function H7t(e,t,n){const r=this,i=[];if(r._pulse)return e6e(r);if(r._pending&&await r._pending,t&&await E$(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new Pg(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=Q4(wI);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=V3),u!==V3&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await E$(r,c[f].callback)}return n&&await E$(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function q7t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function W7t(e,t,n){return this._pulse?e6e(this):(this.evaluate(e,t,n),this)}function G7t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function e6e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Y7t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function K7t(e,t){const n=e.source,r=this._clock;return n&&Ie(n)?new fJ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||X7t(this._pulse,n&&n.pulse)}function X7t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==V3&&(e.source=t.source),e)}const dJ={skip:!1,force:!1};function Q7t(e,t){const n=t||dJ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function J7t(e,t,n){const r=n||dJ;return(e.set(t)||r.force)&&this.touch(e,r),this}function Z7t(e,t,n){this.touch(e,n||dJ);const r=new Pg(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function ezt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),t6e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,tzt(t,0,e)):r=n,r}}}function t6e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function tzt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,t6e(e,r,t,n)}function Ub(){this.logger(GQ()),this.logLevel(qQ),this._clock=0,this._rank=0,this._locale=oJ();try{this._loader=X4()}catch{}this._touched=Q4(wI),this._input={},this._pulse=null,this._heap=ezt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function _S(e){return function(){return this._log[e].apply(this,arguments)}}Ub.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:_S("error"),warn:_S("warn"),info:_S("info"),debug:_S("debug"),logLevel:_S("level"),cleanThreshold:1e4,add:C7t,connect:I7t,rank:z7t,rerank:U7t,pulse:Z7t,touch:Q7t,update:J7t,changeset:jv,ingest:$7t,parse:k7t,preload:N7t,request:R7t,events:P7t,on:M7t,evaluate:H7t,run:W7t,runAsync:q7t,runAfter:G7t,_enqueue:Y7t,_getPulse:K7t};function Ee(e,t){Dr.call(this,e,null,t)}We(Ee,Dr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Vw={};function n6e(e){const t=r6e(e);return t&&t.Definition||null}function r6e(e){return e=e&&e.toLowerCase(),Nt(Vw,e)?Vw[e]:null}function*i6e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function hJ(e,t,n){const r=Float64Array.from(i6e(e,n));return r.sort(Og),t.map(i=>Djt(r,i))}function pJ(e,t){return hJ(e,[.25,.5,.75],t)}function mJ(e,t){const n=e.length,r=Ojt(e,t),i=pJ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function s6e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var rc=Math.random;function nzt(e){rc=e}function o6e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(i6e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(rc()*s)];c[l]=a/s}return c.sort(Og),[XV(c,n/2),XV(c,1-n/2)]}function a6e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?rzt(s,t+t/4):s}function rzt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function izt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function szt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*rc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const u6e=Math.sqrt(2*Math.PI),ozt=Math.SQRT2;let bS=NaN;function nF(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(bS===bS)n=bS,bS=NaN;else{do n=rc()*2-1,r=rc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,bS=r*s}return e+n*t}function gJ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*u6e)}function rF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function iF(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*ozt*azt(2*e-1)}function azt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function yJ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>nF(n,r),pdf:s=>gJ(s,n,r),cdf:s=>rF(s,n,r),icdf:s=>iF(s,n,r)};return i.mean(e).stdev(t)}function vJ(e,t){const n=yJ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=mJ(e)),i):t},sample(){return e[~~(rc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function _J(e,t){return e=e||0,t=t??1,Math.exp(e+nF()*t)}function bJ(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*u6e*e)}function wJ(e,t,n){return rF(Math.log(e),t,n)}function EJ(e,t,n){return Math.exp(iF(e,t,n))}function l6e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>_J(n,r),pdf:s=>bJ(s,n,r),cdf:s=>wJ(s,n,r),icdf:s=>EJ(s,n,r)};return i.mean(e).stdev(t)}function c6e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=rc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function xJ(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*rc()}function SJ(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function TJ(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function AJ(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function f6e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>xJ(n,r),pdf:s=>SJ(s,n,r),cdf:s=>TJ(s,n,r),icdf:s=>AJ(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function CJ(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function SI(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function sF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function TI(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function ox(e,t,n,r,i){let s=0,o=0;return TI(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function IJ(e,t,n){let r=0,i=0,s=0,o=0,a=0;TI(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=SI(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:ox(e,t,n,i,l)}}function d6e(e,t,n){let r=0,i=0,s=0,o=0,a=0;TI(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=SI(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:ox(e,t,n,i,l)}}function h6e(e,t,n){const[r,i,s,o]=sF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;TI(e,t,n,(v,_)=>{d=r[f++],h=Math.log(_),p=d*_,a+=(_*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=SI(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:ox(e,t,n,o,y)}}function p6e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;TI(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=SI(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:ox(e,t,n,a,c)}}function OJ(e,t,n){const[r,i,s,o]=sF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,_=(d*u-f*l)/v,b=(f*y-d*l)/v,E=-_*u,w=x=>(x=x-s,_*x*x+b*x+E+o);return{coef:[E-b*s+_*s*s+o,b-2*_*s,_],predict:w,rSquared:ox(e,t,n,o,w)}}function m6e(e,t,n,r){if(r===0)return CJ(e,t,n);if(r===1)return IJ(e,t,n);if(r===2)return OJ(e,t,n);const[i,s,o,a]=sF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=lzt(c),v=_=>{_-=o;let b=a+y[0]+y[1]*_+y[2]*_*_;for(d=3;d<f;++d)b+=y[d]*Math.pow(_,d);return b};return{coef:uzt(f,y,-o,a),predict:v,rSquared:ox(e,t,n,a,v)}}function uzt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function lzt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const lge=2,cge=1e-12;function g6e(e,t,n,r){const[i,s,o,a]=sF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=lge;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],_=p[1],b=y-i[v]>i[_]-y?v:_;let E=0,w=0,x=0,S=0,I=0;const C=1/Math.abs(i[b]-y||1);for(let N=v;N<=_;++N){const $=i[N],D=s[N],B=czt(Math.abs(y-$)*C)*d[N],V=$*B;E+=B,w+=V,x+=D*B,S+=D*V,I+=$*V}const[O,z]=SI(w/E,x/E,S/E,I/E);c[g]=O+z*y,f[g]=Math.abs(s[g]-c[g]),fzt(i,g+1,p)}if(h===lge)break;const m=gMe(f);if(Math.abs(m)<cge)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?cge:(v=1-y*y)*v}return dzt(i,c,o,a)}function czt(e){return(e=1-e*e*e)*e*e}function fzt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function dzt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const hzt=.5*Math.PI/180;function oF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=pzt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&mzt(f,m,d,h,p)>hzt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function pzt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function mzt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function gzt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function oH(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:gzt(e)}function y6e(e,t,n){return n||e+(t?"_"+t:"")}const fj=()=>{},yzt={init:fj,add:fj,rem:fj,idx:0},DA={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},AI=Object.keys(DA).filter(e=>e!=="__count__");function vzt(e,t){return(n,r)=>hn({name:e,aggregate_param:r,out:n||e},yzt,t)}[...AI,"__count__"].forEach(e=>{DA[e]=vzt(e,DA[e])});function v6e(e,t,n){return DA[e](n,t)}function _6e(e,t){return e.idx-t.idx}function _zt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=DA[i]())})};return e.forEach(n),Object.values(t).sort(_6e)}function bzt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function wzt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Ezt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function xzt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function b6e(e,t){const n=t||na,r=_zt(e),i=e.slice().sort(_6e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=bzt,s.prototype.add=wzt,s.prototype.rem=Ezt,s.prototype.set=xzt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function PJ(e){this._key=e?ec(e):kt,this.reset()}const To=PJ.prototype;To.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};To.add=function(e){this._add.push(e)};To.rem=function(e){this._rem.push(e)};To.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};To.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Nt(n,s)||(n[s]=1,++i);return i};To.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=tMe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};To.argmin=function(e){return this.extent(e)[0]||{}};To.argmax=function(e){return this.extent(e)[1]||{}};To.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};To.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};To.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=pJ(this.values(),e),this._get=e),this._q};To.q1=function(e){return this.quartile(e)[0]};To.q2=function(e){return this.quartile(e)[1]};To.q3=function(e){return this.quartile(e)[2]};To.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=o6e(this.values(),1e3,.05,e),this._get=e),this._ci};To.ci0=function(e){return this.ci(e)[0]};To.ci1=function(e){return this.ci(e)[1]};function i0(e){Ee.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}i0.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:AI},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};We(i0,Ee,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const _=nt(Yo(v)),b=_.length;let E=0,w;for(;E<b;++E)r[w=_[E]]||(r[w]=1,t.push(w))}this._dims=nt(e.groupby),this._dnames=this._dims.map(v=>{const _=Ni(v);return i(v),n.push(_),_}),this.cellkey=e.key?e.key:oH(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Te("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Te("Null aggregate field specified."),m=Ni(f),g=y6e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(v6e(d,h,g))}return this._measures=this._measures.map(v=>b6e(v,v.field)),Object.create(null)},cellkey:oH(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new PJ),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?JMe(t.tuple,s):dr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Szt=1e-14;function kJ(e){Ee.call(this,null,e)}kJ.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};We(kJ,Ee,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Yo(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=s6e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=qo(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(Szt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Ou(u,Yo(t),e.name||"bin_"+Ni(t))}});function w6e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?aMe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function $J(e){Ee.call(this,[],e)}$J.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};We($J,Ee,{transform(e,t){const n=t.fork(t.ALL),r=w6e(kt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Bv(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function E6e(e){Dr.call(this,null,Tzt,e)}We(E6e,Dr);function Tzt(e){return this.value&&!e.modified()?this.value:QQ(e.fields,e.orders)}function RJ(e){Ee.call(this,null,e)}RJ.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Azt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}We(RJ,Ee,{transform(e,t){const n=f=>d=>{for(var h=Azt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=dr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function NJ(e){Ee.call(this,null,e)}NJ.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};We(NJ,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=Czt(a,i,s,e.filter||tc)):n.mod=a,n.source=this.value,n.modifies(r)}});function Czt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(dr(s)),s={},s[t]=l);return i}const fge={kde:vJ,mixture:c6e,normal:yJ,lognormal:l6e,uniform:f6e},Izt="distributions",dge="function",Ozt="field";function x6e(e,t){const n=e[dge];Nt(fge,n)||Te("Unknown distribution function: "+n);const r=fge[n]();for(const i in e)i===Ozt?r.data((e.from||t()).map(e[i])):i===Izt?r[i](e[i].map(s=>x6e(s,t))):typeof r[i]===dge&&r[i](e[i]);return r}function DJ(e){Ee.call(this,null,e)}const S6e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Pzt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:S6e},{name:"weights",type:"number",array:!0}]};DJ.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:S6e.concat(Pzt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};We(DJ,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=x6e(e.distribution,kzt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Te("Invalid density method: "+o),!e.extent&&!r.data&&Te("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Gd(r.data()),l=oF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],dr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function kzt(e){return()=>e.materialize(e.SOURCE).source}function T6e(e,t){return e?e.map((n,r)=>t[r]||Ni(n)):null}function LJ(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const A6e="bin";function MJ(e){Ee.call(this,null,e)}MJ.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:A6e}]};const $zt=(e,t)=>EI(Gd(e,t))/30;We(MJ,Ee,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=LJ(t.source,e.groupby,na),i=e.smooth||!1,s=e.field,o=e.step||$zt(n,s),a=Bv((p,m)=>s(p)-s(m)),u=e.as||A6e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of a6e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function C6e(e){Dr.call(this,null,Rzt,e),this.modified(!0)}We(C6e,Dr);function Rzt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Ou(n=>t(n,e),Yo(t),Ni(t))}function FJ(e){Ee.call(this,[void 0,void 0],e)}FJ.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};We(FJ,Ee,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=qo(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ni(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function BJ(e,t){Dr.call(this,e),this.parent=t,this.count=0}We(BJ,Dr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function aF(e){Ee.call(this,{},e),this._keys=rx();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}We(aF,Ee,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Nt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new BJ(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=kt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(kt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=kt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(kt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=kt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function I6e(e){Dr.call(this,null,Nzt,e)}We(I6e,Dr);function Nzt(e){return this.value&&!e.modified()?this.value:Ie(e.name)?nt(e.name).map(t=>ec(t)):ec(e.name,e.as)}function jJ(e){Ee.call(this,rx(),e)}jJ.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};We(jJ,Ee,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=kt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(kt(f),1)});function c(f){const d=kt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function zJ(e){Ee.call(this,[],e)}zJ.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};We(zJ,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=T6e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=cJ(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function UJ(e){Ee.call(this,[],e)}UJ.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};We(UJ,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ni),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=cJ(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function VJ(e){Ee.call(this,null,e)}VJ.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};We(VJ,Ee,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function O6e(e){Ee.call(this,[],e)}We(O6e,Ee,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=dr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const FP={value:"value",median:gMe,mean:Ljt,min:KV,max:_1},Dzt=[];function HJ(e){Ee.call(this,[],e)}HJ.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Lzt(e){var t=e.method||FP.value,n;if(FP[t]==null)Te("Unrecognized imputation method: "+t);else return t===FP.value?(n=e.value!==void 0?e.value:0,()=>n):FP[t]}function Mzt(e){const t=e.field;return n=>n?t(n):NaN}We(HJ,Ee,{transform(e,t){var n=t.fork(t.ALL),r=Lzt(e),i=Mzt(e),s=Ni(e.field),o=Ni(e.key),a=(e.groupby||[]).map(Ni),u=Fzt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,_,b,E;for(g=0,_=u.length;g<_;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,b=p.length;y<b;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(dr(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function Fzt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):Dzt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function qJ(e){i0.call(this,e)}qJ.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:AI},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};We(qJ,i0,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{hn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function WJ(e){Ee.call(this,null,e)}WJ.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};We(WJ,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=LJ(r,e.groupby,e.field),s=(e.groupby||[]).map(Ni),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Te("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Gd(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=vJ(h,o)[a],m=e.counts?h.length:1,g=c||Gd(h);oF(p,g,f,d).forEach(y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(dr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function P6e(e){Dr.call(this,null,Bzt,e)}We(P6e,Dr);function Bzt(e){return this.value&&!e.modified()?this.value:ZQ(e.fields,e.flat)}function k6e(e){Ee.call(this,[],e),this._pending=null}We(k6e,Ee,{transform(e,t){const n=t.dataflow;return this._pending?dj(this,t,this._pending):jzt(e)?t.StopPropagation:e.values?dj(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=nt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>dj(this,t,nt(r.data)))}});function jzt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function dj(e,t,n){n.forEach(dr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function GJ(e){Ee.call(this,{},e)}GJ.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};We(GJ,Ee,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Te('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Te('The "as" parameter has too few output field names.'),c=c||i.map(Ni),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Te("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function $6e(e){Dr.call(this,null,zzt,e)}We($6e,Dr);function zzt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function R6e(e){Dr.call(this,null,Uzt,e)}We(R6e,Dr);function Uzt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function N6e(e){Ee.call(this,null,e)}We(N6e,Ee,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function YJ(e){i0.call(this,e)}YJ.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:AI,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};We(YJ,i0,{_transform:i0.prototype.transform,transform(e,t){return this._transform(Vzt(e,t),t)}});function Vzt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Yo(n).concat(Yo(r)),o=qzt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>Hzt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function Hzt(e,t,n,r){return Ou(i=>t(i)===e?n(i):NaN,r,e+"")}function qzt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(Y4),t?i.slice(0,t):i}function D6e(e){aF.call(this,e)}We(D6e,aF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(kt(s),n,t,s);return(e.modified("field")||r&&t.modified(Yo(r)))&&Te("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(dr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function KJ(e){Ee.call(this,null,e)}KJ.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};We(KJ,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=T6e(e.fields,e.as||[]),s=r?(a,u)=>Wzt(a,u,r,i):Z4;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=kt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,dr({}));o[kt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[kt(a)]))}),n}});function Wzt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function L6e(e){Ee.call(this,null,e)}We(L6e,Ee,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function XJ(e){Ee.call(this,null,e)}XJ.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Gzt=1e-14;We(XJ,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=LJ(i,e.groupby,e.field),o=(e.groupby||[]).map(Ni),a=[],u=e.step||.01,l=e.probs||Fv(u/2,1-Gzt,u),c=l.length;return s.forEach(f=>{const d=hJ(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(dr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function M6e(e){Ee.call(this,null,e)}We(M6e,Ee,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=kt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=cJ(i);r[kt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[kt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function QJ(e){Ee.call(this,[],e),this.count=0}QJ.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};We(QJ,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[kt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*rc()),d<o.length&&d>=u&&(f=o[d],s[kt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=kt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[kt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[kt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[kt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[kt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[kt(c)])),this.count=a,this.value=n.source=o,n}});function JJ(e){Ee.call(this,null,e)}JJ.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};We(JJ,Ee,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Fv(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,dr(s)}),n.add=t.add.concat(this.value),n}});function F6e(e){Ee.call(this,null,e),this.modified(!0)}We(F6e,Ee,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function ZJ(e){Ee.call(this,null,e)}const B6e=["unit0","unit1"];ZJ.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:rJ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:B6e}]};We(ZJ,Ee,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?sx:ix)(s.unit).offset,a=e.as||B6e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Yo(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:LMe({extent:e.extent||Gd(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=iJ(r),o=this.value||{},a=(n?CMe:AMe)(s,i);return a.unit=Un(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function j6e(e){Ee.call(this,rx(),e)}We(j6e,Ee,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function z6e(e){Ee.call(this,null,e)}We(z6e,Ee,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Bv(e.sort)):t.source).map(e.field))}});function Yzt(e,t,n,r){const i=LA[e](t,n);return{init:i.init||jm,update:function(s,o){o[r]=i.next(s)}}}const LA={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=LA.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Te("ntile num must be greater than zero.");const n=LA.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Te("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Kzt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Kzt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Xzt=Object.keys(LA);function U6e(e){const t=nt(e.ops),n=nt(e.fields),r=nt(e.params),i=nt(e.aggregate_params),s=nt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){nt(Yo(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,_=Ni(g),b=y6e(p,_,s[m]);if(h(g),o.push(b),Nt(LA,p))a.push(Yzt(p,g,y,b));else{if(g==null&&p!=="count"&&Te("Null aggregate field specified."),p==="count"){c.push(b);return}d=!1;let E=l[_];E||(E=l[_]=[],E.field=g,f.push(E)),E.push(v6e(p,v,b))}}),(c.length||f.length)&&(this.cell=Qzt(f,c,d)),this.inputs=Object.keys(u)}const V6e=U6e.prototype;V6e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};V6e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function Qzt(e,t,n){e=e.map(u=>b6e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new PJ;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function eZ(e){Ee.call(this,{},e),this._mlen=0,this._mods=[]}eZ.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Xzt.concat(AI)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};We(eZ,Ee,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Bv(e.sort),i=oH(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new U6e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)Jzt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=w6e(kt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Jzt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?xI(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||ra(-1)};t.init();for(let f=0;f<u;++f)Zzt(c,o,f,u),s&&eUt(c,l),t.update(c,a[f])}function Zzt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function eUt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const tUt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:i0,bin:kJ,collect:$J,compare:E6e,countpattern:RJ,cross:NJ,density:DJ,dotbin:MJ,expression:C6e,extent:FJ,facet:aF,field:I6e,filter:jJ,flatten:zJ,fold:UJ,formula:VJ,generate:O6e,impute:HJ,joinaggregate:qJ,kde:WJ,key:P6e,load:k6e,lookup:GJ,multiextent:$6e,multivalues:R6e,params:N6e,pivot:YJ,prefacet:D6e,project:KJ,proxy:L6e,quantile:XJ,relay:M6e,sample:QJ,sequence:JJ,sieve:F6e,subflow:BJ,timeunit:ZJ,tupleindex:j6e,values:z6e,window:eZ},Symbol.toStringTag,{value:"Module"}));function kg(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const nUt=()=>typeof Image<"u"?Image:null;function tZ(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const rUt="identity",Hw="linear",Mp="log",CI="pow",II="sqrt",uF="symlog",W1="time",G1="utc",Od="sequential",ax="diverging",qw="quantile",lF="quantize",cF="threshold",nZ="ordinal",aH="point",H6e="band",rZ="bin-ordinal",Is="continuous",OI="discrete",PI="discretizing",gc="interpolating",iZ="temporal";function iUt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function sUt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function sZ(){const e=FE().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=tZ(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Fv(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-d])))return y=Math.max(0,z3(h,m)-1),v=m===g?y:z3(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(_=y,y=p-v,v=p-_),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return sZ().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function q6e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return q6e(t())},e}function oUt(){return q6e(sZ().paddingInner(1))}var aUt=Array.prototype.map;function uUt(e){return aUt.call(e,qo)}const lUt=Array.prototype.slice;function W6e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Cjt(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=uUt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=lUt.call(r),n):t.slice()},n.tickFormat=function(r,i){return eke(e[0],Un(e),r??10,i)},n.copy=function(){return W6e().domain(n.domain()).range(n.range())},n}const H3=new Map,G6e=Symbol("vega_scale");function Y6e(e){return e[G6e]=!0,e}function cUt(e){return e&&e[G6e]===!0}function fUt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?iUt(s):s.invertExtent?sUt(s):void 0),s.type=e,Y6e(s)};return r.metadata=cf(nt(n)),r}function or(e,t,n){return arguments.length>1?(H3.set(e,fUt(e,t,n)),this):K6e(e)?H3.get(e):void 0}or(rUt,tke);or(Hw,Ip,Is);or(Mp,rke,[Is,Mp]);or(CI,uK,Is);or(II,rAt,Is);or(uF,ike,Is);or(W1,vke,[Is,iZ]);or(G1,SCt,[Is,iZ]);or(Od,dK,[Is,gc]);or(`${Od}-${Hw}`,dK,[Is,gc]);or(`${Od}-${Mp}`,_ke,[Is,gc,Mp]);or(`${Od}-${CI}`,hK,[Is,gc]);or(`${Od}-${II}`,TCt,[Is,gc]);or(`${Od}-${uF}`,bke,[Is,gc]);or(`${ax}-${Hw}`,wke,[Is,gc]);or(`${ax}-${Mp}`,Eke,[Is,gc,Mp]);or(`${ax}-${CI}`,pK,[Is,gc]);or(`${ax}-${II}`,ACt,[Is,gc]);or(`${ax}-${uF}`,xke,[Is,gc]);or(qw,ske,[PI,qw]);or(lF,oke,PI);or(cF,ake,PI);or(rZ,W6e,[OI,PI]);or(nZ,FE,OI);or(H6e,sZ,OI);or(aH,oUt,OI);function K6e(e){return H3.has(e)}function zv(e,t){const n=H3.get(e);return n&&n.metadata[t]}function oZ(e){return zv(e,Is)}function Ww(e){return zv(e,OI)}function uH(e){return zv(e,PI)}function X6e(e){return zv(e,Mp)}function dUt(e){return zv(e,iZ)}function Q6e(e){return zv(e,gc)}function J6e(e){return zv(e,qw)}const hUt=["clamp","base","constant","exponent"];function Z6e(e,t){const n=t[0],r=Un(t)-n;return function(i){return e(n+i*r)}}function fF(e,t,n){return KY(aZ(t||"rgb",n),e)}function e4e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function t4e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?ra(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=or(s)().domain([t,n]).range([0,1]),hUt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function aZ(e,t){const n=nxt[pUt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function pUt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const mUt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},gUt={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function n4e(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function r4e(e,t){for(const n in e)uZ(n,t(e[n]))}const hge={};r4e(gUt,n4e);r4e(mUt,e=>fF(n4e(e)));function uZ(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(hge[e]=t,this):hge[e]}const S$="symbol",yUt="discrete",vUt="gradient",_Ut=e=>Ie(e)?e.map(t=>String(t)):String(e),bUt=(e,t)=>e[1]-t[1],wUt=(e,t)=>t[1]-e[1];function lZ(e,t,n){let r;return Jn(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(EI(e.domain())/n||1)+1))),ot(t)&&(r=t.step,t=t.interval),rt(t)&&(t=e.type===W1?ix(t):e.type==G1?sx(t):Te("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function i4e(e,t,n){let r=e.range(),i=r[0],s=Un(r),o=bUt;if(i>s&&(r=s,s=i,i=r,o=wUt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Un(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function cZ(e,t){return e.bins?i4e(e,e.bins):e.ticks?e.ticks(t):e.domain()}function s4e(e,t,n,r,i,s){const o=t.type;let a=_Ut;if(o===W1||i===W1)a=e.timeFormat(r);else if(o===G1||i===G1)a=e.utcFormat(r);else if(X6e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=o4e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function o4e(e,t,n){const r=cZ(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const lH={[qw]:"quantiles",[lF]:"thresholds",[cF]:"domain"},a4e={[qw]:"quantiles",[lF]:"domain"};function u4e(e,t){return e.bins?SUt(e.bins):e.type===Mp?o4e(e,t,!0):lH[e.type]?xUt(e[lH[e.type]]()):cZ(e,t)}function EUt(e,t,n){const r=t[a4e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function xUt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function SUt(e){const t=e.slice(0,-1);return t.max=Un(e),t}const TUt=e=>lH[e.type]||e.bins;function l4e(e,t,n,r,i,s,o){const a=a4e[t.type]&&s!==W1&&s!==G1?EUt(e,t,i):s4e(e,t,n,i,s,o);return r===S$&&TUt(t)?AUt(a):r===yUt?CUt(a):IUt(a)}const AUt=e=>(t,n,r)=>{const i=pge(r[n+1],pge(r.max,1/0)),s=mge(t,e),o=mge(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},pge=(e,t)=>e??t,CUt=e=>(t,n)=>n?e(t):null,IUt=e=>t=>e(t),mge=(e,t)=>Number.isFinite(e)?t(e):null;function OUt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Un(t),s=i-r;if(e.type===cF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function PUt(e,t,n,r){const i=r||t.type;return rt(n)&&dUt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===W1?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===G1?e.utcFormat("%A, %d %B %Y, %X UTC"):l4e(e,t,5,null,n,r,!0)}function c4e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=PUt(e,t,n.format,n.formatType);if(uH(t.type)){const s=u4e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Ww(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Un(s))}`}}let f4e=0;function kUt(){f4e=0}const q3="p_";function fZ(e){return e&&e.gradient}function d4e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?q3:"";return i||(i=e.id="gradient_"+f4e++,r==="radial"?(e.x1=Df(e.x1,.5),e.y1=Df(e.y1,.5),e.r1=Df(e.r1,0),e.x2=Df(e.x2,.5),e.y2=Df(e.y2,.5),e.r2=Df(e.r2,.5),s=q3):(e.x1=Df(e.x1,0),e.y1=Df(e.y1,0),e.x2=Df(e.x2,1),e.y2=Df(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Df(e,t){return e??t}function h4e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const gge={basis:{curve:zCt},"basis-closed":{curve:UCt},"basis-open":{curve:VCt},bundle:{curve:HCt,tension:"beta",value:.85},cardinal:{curve:qCt,tension:"tension",value:0},"cardinal-open":{curve:GCt,tension:"tension",value:0},"cardinal-closed":{curve:WCt,tension:"tension",value:0},"catmull-rom":{curve:YCt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:KCt,tension:"alpha",value:.5},"catmull-rom-open":{curve:XCt,tension:"alpha",value:.5},linear:{curve:mK},"linear-closed":{curve:QCt},monotone:{horizontal:ZCt,vertical:JCt},natural:{curve:eIt},step:{curve:tIt},"step-after":{curve:rIt},"step-before":{curve:nIt}};function dZ(e,t,n){var r=Nt(gge,e)&&gge[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const $Ut={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},RUt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,NUt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,DUt=/^((\s+,?\s*)|(,\s*))/,LUt=/^[01]/;function Gw(e){const t=[];return(e.match(RUt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=$Ut[s],a=MUt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function MUt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?LUt:NUt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(DUt);u!==null&&(i+=u[0].length)}return r}const s0=Math.PI/180,FUt=1e-14,Ly=Math.PI/2,ud=Math.PI*2,__=Math.sqrt(3)/2;var hj={},pj={},p4e=[].join;function BUt(e,t,n,r,i,s,o,a,u){const l=p4e.call(arguments);if(hj[l])return hj[l];const c=o*s0,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,_=d/r,b=g*a+y*u,E=v*a+_*u,w=g*e+y*t,x=v*e+_*t;let I=1/((w-b)*(w-b)+(x-E)*(x-E))-.25;I<0&&(I=0);let C=Math.sqrt(I);s==i&&(C=-C);const O=.5*(b+w)-C*(x-E),z=.5*(E+x)+C*(w-b),N=Math.atan2(E-z,b-O);let D=Math.atan2(x-z,w-O)-N;D<0&&s===1?D+=ud:D>0&&s===0&&(D-=ud);const B=Math.ceil(Math.abs(D/(Ly+.001))),V=[];for(let j=0;j<B;++j){const G=N+j*D/B,U=N+(j+1)*D/B;V[j]=[O,z,G,U,n,r,f,d]}return hj[l]=V}function jUt(e){const t=p4e.call(e);if(pj[t])return pj[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),_=Math.sin(v*.5),b=8/3*_*_/Math.sin(v),E=n+p-b*m,w=r+m+b*p,x=n+g,S=r+y,I=x+b*y,C=S-b*g;return pj[t]=[c*E+f*w,d*E+h*w,c*I+f*C,d*I+h*C,c*x+f*S,d*x+h*S]}const Tl=["l",0,0,0,0,0,0,0];function zUt(e,t,n){const r=Tl[0]=e[0];if(r==="a"||r==="A")Tl[1]=t*e[1],Tl[2]=n*e[2],Tl[3]=e[3],Tl[4]=e[4],Tl[5]=e[5],Tl[6]=t*e[6],Tl[7]=n*e[7];else if(r==="h"||r==="H")Tl[1]=t*e[1];else if(r==="v"||r==="V")Tl[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Tl[i]=(i%2==1?t:n)*e[i];return Tl}function MA(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,_=t.length;v<_;++v){switch(o=t[v],(i!==1||s!==1)&&(o=zUt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":yge(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":yge(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function yge(e,t,n,r){const i=BUt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=jUt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const vge=.5773502691896257,_ge={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,ud)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=__*n,i=r-n*vge,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=__*n,i=r-n*vge;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=__*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=__*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=__*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=__*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function m4e(e){return Nt(_ge,e)?_ge[e]:UUt(e)}var mj={};function UUt(e){if(!Nt(mj,e)){const t=Gw(e);mj[e]={draw:function(n,r){MA(n,t,0,0,Math.sqrt(r)/2)}}}return mj[e]}const vm=.448084975506;function VUt(e){return e.x}function HUt(e){return e.y}function qUt(e){return e.width}function WUt(e){return e.height}function xh(e){return typeof e=="function"?e:()=>+e}function BP(e,t,n){return Math.max(t,Math.min(e,n))}function g4e(){var e=VUt,t=HUt,n=qUt,r=WUt,i=xh(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,_=BP(+i.call(this,c),0,v),b=BP(+s.call(this,c),0,v),E=BP(+o.call(this,c),0,v),w=BP(+a.call(this,c),0,v);if(u||(u=h=Q6()),_<=0&&b<=0&&E<=0&&w<=0)u.rect(p,m,g,y);else{var x=p+g,S=m+y;u.moveTo(p+_,m),u.lineTo(x-b,m),u.bezierCurveTo(x-vm*b,m,x,m+vm*b,x,m+b),u.lineTo(x,S-w),u.bezierCurveTo(x,S-vm*w,x-vm*w,S,x-w,S),u.lineTo(p+E,S),u.bezierCurveTo(p+vm*E,S,p,S-vm*E,p,S-E),u.lineTo(p,m+_),u.bezierCurveTo(p,m+vm*_,p+vm*_,m,p+_,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=xh(c),l):e},l.y=function(c){return arguments.length?(t=xh(c),l):t},l.width=function(c){return arguments.length?(n=xh(c),l):n},l.height=function(c){return arguments.length?(r=xh(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=xh(c),s=f!=null?xh(f):i,a=d!=null?xh(d):i,o=h!=null?xh(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function y4e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,_=(g/=y)*u,b=Math.atan2(g,m);i.moveTo(o-v,a-_),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,b-Math.PI,b),i.lineTo(o+v,a+_),i.arc(o,a,u,b,b+Math.PI)}else i.arc(f,d,p,0,ud);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=Q6()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function kI(e,t){return e??t}const $I=e=>e.x||0,RI=e=>e.y||0,GUt=e=>e.width||0,YUt=e=>e.height||0,KUt=e=>(e.x||0)+(e.width||0),XUt=e=>(e.y||0)+(e.height||0),QUt=e=>e.startAngle||0,JUt=e=>e.endAngle||0,ZUt=e=>e.padAngle||0,eVt=e=>e.innerRadius||0,tVt=e=>e.outerRadius||0,nVt=e=>e.cornerRadius||0,rVt=e=>kI(e.cornerRadiusTopLeft,e.cornerRadius)||0,iVt=e=>kI(e.cornerRadiusTopRight,e.cornerRadius)||0,sVt=e=>kI(e.cornerRadiusBottomRight,e.cornerRadius)||0,oVt=e=>kI(e.cornerRadiusBottomLeft,e.cornerRadius)||0,aVt=e=>kI(e.size,64),uVt=e=>e.size||1,dF=e=>e.defined!==!1,lVt=e=>m4e(e.shape||"circle"),cVt=WU().startAngle(QUt).endAngle(JUt).padAngle(ZUt).innerRadius(eVt).outerRadius(tVt).cornerRadius(nVt),fVt=Oke().x($I).y1(RI).y0(XUt).defined(dF),dVt=Oke().y(RI).x1($I).x0(KUt).defined(dF),hVt=Ike().x($I).y(RI).defined(dF),pVt=g4e().x($I).y(RI).width(GUt).height(YUt).cornerRadius(rVt,iVt,sVt,oVt),mVt=jCt().type(lVt).size(aVt),gVt=y4e().x($I).y(RI).defined(dF).size(uVt);function hZ(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function yVt(e,t){return cVt.context(e)(t)}function vVt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?dVt:fVt).curve(dZ(r,n.orient,n.tension)).context(e)(t)}function _Vt(e,t){const n=t[0],r=n.interpolate||"linear";return hVt.curve(dZ(r,n.orient,n.tension)).context(e)(t)}function ux(e,t,n,r){return pVt.context(e)(t,n,r)}function bVt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function wVt(e,t){return mVt.context(e)(t)}function EVt(e,t){return gVt.context(e)(t)}var v4e=1;function _4e(){v4e=1}function pZ(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+v4e++),o=i.clipping[s]||(i.clipping[s]={id:s});return pn(r)?o.path=r(null):hZ(n)?o.path=ux(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function os(e){this.clear(),e&&this.union(e)}os.prototype={clone(){return new os(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function hF(e){this.mark=e,this.bounds=this.bounds||new os}function pF(e){hF.call(this,e),this.items=this.items||[]}We(pF,hF);function mZ(e){this._pending=0,this._loader=e||X4()}function bge(e){e._pending+=1}function wS(e){e._pending-=1}mZ.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return bge(t),t._loader.sanitize(e,{context:"href"}).then(n=>(wS(t),n)).catch(()=>(wS(t),null))},loadImage(e){const t=this,n=nUt();return bge(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const s=new n,o=Nt(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>wS(t),s.onerror=()=>wS(t),s.src=i,s}).catch(r=>(wS(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function nm(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?xVt(t,r):0))}return e}function xVt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const SVt=ud-1e-8;let mF,T$,A$,n1,cH,C$,fH,dH;const tg=(e,t)=>mF.add(e,t),I$=(e,t)=>tg(T$=e,A$=t),wge=e=>tg(e,mF.y1),Ege=e=>tg(mF.x1,e),My=(e,t)=>cH*e+fH*t,Fy=(e,t)=>C$*e+dH*t,gj=(e,t)=>tg(My(e,t),Fy(e,t)),yj=(e,t)=>I$(My(e,t),Fy(e,t));function NI(e,t){return mF=e,t?(n1=t*s0,cH=dH=Math.cos(n1),C$=Math.sin(n1),fH=-C$):(cH=dH=1,n1=C$=fH=0),TVt}const TVt={beginPath(){},closePath(){},moveTo:yj,lineTo:yj,rect(e,t,n,r){n1?(gj(e+n,t),gj(e+n,t+r),gj(e,t+r),yj(e,t)):(tg(e+n,t+r),I$(e,t))},quadraticCurveTo(e,t,n,r){const i=My(e,t),s=Fy(e,t),o=My(n,r),a=Fy(n,r);xge(T$,i,o,wge),xge(A$,s,a,Ege),I$(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=My(e,t),a=Fy(e,t),u=My(n,r),l=Fy(n,r),c=My(i,s),f=Fy(i,s);Sge(T$,o,u,c,wge),Sge(A$,a,l,f,Ege),I$(c,f)},arc(e,t,n,r,i,s){if(r+=n1,i+=n1,T$=n*Math.cos(i)+e,A$=n*Math.sin(i)+t,Math.abs(i-r)>SVt)tg(e-n,t-n),tg(e+n,t+n);else{const o=l=>tg(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%ud,r<0&&(r+=ud),i=i%ud,i<0&&(i+=ud),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=ud,a=r-r%Ly,u=0;u<4&&a>i;++u,a-=Ly)o(a);else for(a=r-r%Ly+Ly,u=0;u<4&&a<i;++u,a=a+Ly)o(a)}}};function xge(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Sge(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>FUt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Tge(u,e,t,n,r)),0<l&&l<1&&i(Tge(l,e,t,n,r))}function Tge(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var $g=($g=kg(1,1))?$g.getContext("2d"):null;const hH=new os;function gZ(e){return function(t,n){if(!$g)return!0;e($g,t),hH.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=hH;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if($g.isPointInPath(u,a))return!0;return!1}}function yZ(e,t){return t.contains(e.x||0,e.y||0)}function b4e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(hH.set(n,r,n+i,r+s))}function w4e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return cb(t,n,r,i,s)}function cb(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function Yw(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Ac(e,t){return e??t}function Age(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function AVt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Ac(t.x1,.5)*r,n.y1+Ac(t.y1,.5)*i,Math.max(r,i)*Ac(t.r1,0),n.x1+Ac(t.x2,.5)*r,n.y1+Ac(t.y2,.5)*i,Math.max(r,i)*Ac(t.r2,.5));else{const o=Ac(t.x1,0),a=Ac(t.y1,0),u=Ac(t.x2,1),l=Ac(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=kg(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Age(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Age(s,t.stops)}function E4e(e,t,n){return fZ(n)?AVt(e,n,t.bounds):n}function W3(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=E4e(e,t,t.fill),!0):!1}var CVt=[];function Kw(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=E4e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||CVt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function IVt(e,t){return e.zindex-t.zindex||e.index-t.index}function vZ(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(IVt)}function df(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=vZ(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function G3(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=vZ(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function _Z(e){return function(t,n,r){df(n,i=>{(!r||r.intersects(i.bounds))&&x4e(e,t,i,i)})}}function OVt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&x4e(e,t,n.items[0],n.items)}}function x4e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Yw(t,n),n.fill&&W3(t,n,i)&&t.fill(),n.stroke&&Kw(t,n,i)&&t.stroke()))}function gF(e){return e=e||tc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,G3(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function DI(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function bZ(e){return gF(DI(e))}function b1(e,t){return"translate("+e+","+t+")"}function wZ(e){return"rotate("+e+")"}function PVt(e,t){return"scale("+e+","+t+")"}function S4e(e){return b1(e.x||0,e.y||0)}function kVt(e){return b1(e.x||0,e.y||0)+(e.angle?" "+wZ(e.angle):"")}function $Vt(e){return b1(e.x||0,e.y||0)+(e.angle?" "+wZ(e.angle):"")+(e.scaleX||e.scaleY?" "+PVt(e.scaleX||1,e.scaleY||1):"")}function EZ(e,t,n){function r(o,a){o("transform",kVt(a)),o("d",t(null,a))}function i(o,a){return t(NI(o,a.angle),a),nm(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=s0),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:_Z(s),pick:bZ(s),isect:n||gZ(s)}}var RVt=EZ("arc",yVt);function NVt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function DVt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function LVt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function xZ(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(NI(u),c),nm(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=DI(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:OVt(s),pick:a,isect:yZ,tip:n}}var MVt=xZ("area",vVt,NVt);function FVt(e,t){var n=t.clip;e.save(),pn(n)?(e.beginPath(),n(e),e.clip()):T4e(e,t.group)}function T4e(e,t){e.beginPath(),hZ(t)?ux(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function A4e(e){const t=Ac(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function BVt(e,t){e("transform",S4e(t))}function C4e(e,t){const n=A4e(t);e("d",ux(null,t,n,n))}function jVt(e,t){e("class","background"),e("aria-hidden",!0),C4e(e,t)}function zVt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?C4e(e,t):e("d","")}function UVt(e,t,n){const r=t.clip?pZ(n,t,t):null;e("clip-path",r)}function VVt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),nm(e,t),e.translate(t.x||0,t.y||0)}function FA(e,t,n,r){const i=A4e(t);e.beginPath(),ux(e,t,(n||0)+i,(r||0)+i)}const HVt=DI(FA),qVt=DI(FA,!1),WVt=DI(FA,!0);function GVt(e,t,n,r){df(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(FA(e,i,s,o),Yw(e,i),i.fill&&W3(e,i,u)&&e.fill(),i.stroke&&!a&&Kw(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&T4e(e,i),n&&n.translate(-s,-o),df(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(FA(e,i,s,o),Yw(e,i),Kw(e,i,u)&&e.stroke())})}function YVt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return G3(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&hZ(u)&&!WVt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&qVt(e,u,o,a)?(e.restore(),u):(l=G3(u,v=>KVt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&HVt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function KVt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var XVt={type:"group",tag:"g",nested:!1,attr:BVt,bound:VVt,draw:GVt,pick:YVt,isect:b4e,content:UVt,background:jVt,foreground:zVt},BA={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function SZ(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function TZ(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function AZ(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function yF(e,t){return e==="center"?t/2:e==="right"?t:0}function vF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function QVt(e,t,n){const r=SZ(t,n),i=TZ(t,r),s=AZ(t,r),o=(t.x||0)-yF(t.align,i),a=(t.y||0)-vF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,BA["xmlns:xlink"],"xlink:href"),e("transform",b1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function JVt(e,t){const n=t.image,r=TZ(t,n),i=AZ(t,n),s=(t.x||0)-yF(t.align,r),o=(t.y||0)-vF(t.baseline,i);return e.set(s,o,s+r,o+i)}function ZVt(e,t,n){df(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=SZ(r,this);let s=TZ(r,i),o=AZ(r,i);if(s===0||o===0)return;let a=(r.x||0)-yF(r.align,s),u=(r.y||0)-vF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(Yw(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var eHt={type:"image",tag:"image",nested:!1,attr:QVt,bound:JVt,draw:ZVt,pick:gF(),isect:tc,get:SZ,xOffset:yF,yOffset:vF},tHt=xZ("line",_Vt,DVt);function nHt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",$Vt(t)),e("d",t.path)}function O$(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*s0,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Gw(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),MA(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):MA(e,u,r,i,s,o)}function rHt(e,t){return O$(NI(e,t.angle),t)?e.set(0,0,0,0):nm(e,t,!0)}var iHt={type:"path",tag:"path",nested:!1,attr:nHt,bound:rHt,draw:_Z(O$),pick:bZ(O$),isect:gZ(O$)};function sHt(e,t){e("d",ux(null,t))}function oHt(e,t){var n,r;return nm(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Cge(e,t){e.beginPath(),ux(e,t)}var aHt={type:"rect",tag:"path",nested:!1,attr:sHt,bound:oHt,draw:_Z(Cge),pick:bZ(Cge),isect:b4e};function uHt(e,t){e("transform",S4e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function lHt(e,t){var n,r;return nm(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function I4e(e,t,n){var r,i,s,o;return t.stroke&&Kw(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function cHt(e,t,n){df(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&I4e(e,r,i)&&(Yw(e,r),e.stroke())}})}function fHt(e,t,n,r){return e.isPointInStroke?I4e(e,t,1)&&e.isPointInStroke(n,r):!1}var dHt={type:"rule",tag:"line",nested:!1,attr:uHt,bound:lHt,draw:cHt,pick:gF(fHt),isect:w4e},hHt=EZ("shape",bVt),pHt=EZ("symbol",wVt,yZ);const Ige=oMe();var el={height:lh,measureWidth:CZ,estimateWidth:Y3,width:Y3,canvas:O4e};O4e(!0);function O4e(e){el.width=e&&$g?CZ:Y3}function Y3(e,t){return P4e(a0(e,t),lh(e))}function P4e(e,t){return~~(.8*e.length*t)}function CZ(e,t){return lh(e)<=0||!(t=a0(e,t))?0:k4e(t,_F(e))}function k4e(e,t){const n=`(${t}) ${e}`;let r=Ige.get(n);return r===void 0&&($g.font=t,r=$g.measureText(e).width,Ige.set(n,r)),r}function lh(e){return e.fontSize!=null?+e.fontSize||0:11}function o0(e){return e.lineHeight!=null?e.lineHeight:lh(e)+2}function mHt(e){return Ie(e)?e.length>1?e:e[0]:e}function LI(e){return mHt(e.lineBreak&&e.text&&!Ie(e.text)?e.text.split(e.lineBreak):e.text)}function IZ(e){const t=LI(e);return(Ie(t)?t.length-1:0)*o0(e)}function a0(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?yHt(e,n):n}function gHt(e){if(el.width===CZ){const t=_F(e);return n=>k4e(n,t)}else if(el.width===Y3){const t=lh(e);return n=>P4e(n,t)}else return t=>el.width(e,t)}function yHt(e,t){var n=+e.limit,r=gHt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function MI(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function _F(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+lh(e)+"px "+MI(e,t)}function OZ(e){var t=e.baseline,n=lh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*o0(e):t==="line-bottom"?.29*n-.5*o0(e):0)}const vHt={left:"start",center:"middle",right:"end"},h2=new os;function bF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Ly,t+=r*Math.cos(i),n+=r*Math.sin(i)),h2.x1=t,h2.y1=n,h2}function _Ht(e,t){var n=t.dx||0,r=(t.dy||0)+OZ(t),i=bF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",vHt[t.align]||"start"),a?(u=b1(s,o)+" "+wZ(a),(n||r)&&(u+=" "+b1(n,r))):u=b1(s+n,o+r),e("transform",u)}function PZ(e,t,n){var r=el.height(t),i=t.align,s=bF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+OZ(t)-Math.round(.8*r),c=LI(t),f;if(Ie(c)?(r+=o0(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,el.width(t,h)),0)):f=el.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*s0,o,a);else if(n===2)return e.rotatedPoints(t.angle*s0,o,a);return e}function bHt(e,t,n){df(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=_F(r),e.textAlign=r.align||"left",s=bF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*s0),o=a=0),o+=r.dx||0,a+=(r.dy||0)+OZ(r),c=LI(r),Yw(e,r),Ie(c))for(l=o0(r),u=0;u<c.length;++u)f=a0(r,c[u]),r.fill&&W3(e,r,i)&&e.fillText(f,o,a),r.stroke&&Kw(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=a0(r,c),r.fill&&W3(e,r,i)&&e.fillText(f,o,a),r.stroke&&Kw(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function wHt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=bF(t),a=o.x1,u=o.y1,l=PZ(h2,t,1),c=-t.angle*s0,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function EHt(e,t){const n=PZ(h2,e,2);return cb(t,n[0],n[1],n[2],n[3])||cb(t,n[0],n[1],n[4],n[5])||cb(t,n[4],n[5],n[6],n[7])||cb(t,n[2],n[3],n[6],n[7])}var xHt={type:"text",tag:"text",nested:!1,attr:_Ht,bound:PZ,draw:bHt,pick:gF(wHt),isect:EHt},SHt=xZ("trail",EVt,LVt),cl={arc:RVt,area:MVt,group:XVt,image:eHt,line:tHt,path:iHt,rect:aHt,rule:dHt,shape:hHt,symbol:pHt,text:xHt,trail:SHt};function pH(e,t,n){var r=cl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new os),e,n)}var Oge={mark:null};function $4e(e,t,n){var r=cl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Oge.mark=e,l=Oge),c=pH(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new os,o)for(a=0,u=s.length;a<u;++a)t.union(pH(s[a],i,n));return e.bounds=t}const THt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function R4e(e,t){return JSON.stringify(e,THt,t)}function N4e(e){const t=typeof e=="string"?JSON.parse(e):e;return D4e(t)}function D4e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&D4e(n[i]);return t&&$4e(e),e}function kZ(e){arguments.length?this.root=N4e(e):(this.root=L4e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new pF(this.root)])}kZ.prototype={toJSON(e){return R4e(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=L4e(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function L4e(e,t){const n={bounds:new os,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function ng(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function $Z(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function gs(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=ng(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Ll(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function M4e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function wF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function AHt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=cl[i.marktype]).tip){for(o=wF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}function u0(e,t){this._active=null,this._handlers={},this._loader=e||X4(),this._tooltip=t||CHt}function CHt(e,t,n,r){e.element().setAttribute("title",r||"")}u0.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),s=ng(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=AHt(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,s=i.width(),o=i.height();let a=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,u+=e.y||0;return{x:a,y:u,width:s,height:o,left:a,top:u,right:a+s,bottom:u+o}}};function bl(e){this._el=null,this._bgcolor=null,this._loader=new mZ(e)}bl.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(s=>{s&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const IHt="keydown",OHt="keypress",PHt="keyup",F4e="dragenter",P$="dragleave",B4e="dragover",mH="pointerdown",kHt="pointerup",K3="pointermove",p2="pointerout",j4e="pointerover",gH="mousedown",$Ht="mouseup",z4e="mousemove",yH="mouseout",U4e="mouseover",X3="click",RHt="dblclick",NHt="wheel",V4e="mousewheel",Q3="touchstart",J3="touchmove",Z3="touchend",DHt=[IHt,OHt,PHt,F4e,P$,B4e,mH,kHt,K3,p2,j4e,gH,$Ht,z4e,yH,U4e,X3,RHt,NHt,V4e,Q3,J3,Z3],vH=K3,jA=p2,_H=X3;function l0(e,t){u0.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const LHt=e=>e===Q3||e===J3||e===Z3?[Q3,J3,Z3]:[e];function Pge(e,t){LHt(t).forEach(n=>MHt(e,n))}function MHt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function hT(e,t,n){t.forEach(r=>e.fire(r,n))}function kge(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?hT(this,e,r):((!i||!i.exit)&&hT(this,n,r),this._active=s,hT(this,t,r),hT(this,e,r))}}function $ge(e){return function(t){hT(this,e,t),this._active=null}}We(l0,u0,{initialize(e,t,n){return this._canvas=e&&$Z(e,"canvas"),[X3,gH,mH,K3,p2,P$].forEach(r=>Pge(this,r)),u0.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:DHt,DOMMouseScroll(e){this.fire(V4e,e)},pointermove:kge([K3,z4e],[j4e,U4e],[p2,yH]),dragover:kge([B4e],[F4e],[P$]),pointerout:$ge([p2,yH]),dragleave:$ge([P$]),pointerdown(e){this._down=this._active,this.fire(mH,e)},mousedown(e){this._down=this._active,this.fire(gH,e)},click(e){this._down===this._active&&(this.fire(X3,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Q3,e,!0)},touchmove(e){this.fire(J3,e,!0)},touchend(e){this.fire(Z3,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===_H&&r&&r.href?this.handleHref(t,r,r.href):(e===vH||e===jA)&&this.handleTooltip(t,r,e!==jA),i)for(let s=0,o=i.length;s<o;++s)i[s].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(Pge(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=wF(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const s=this.context();return cl[e.marktype].pick.call(this,s,e,t,n,r,i)}});function FHt(){return typeof window<"u"&&window.devicePixelRatio||1}function BHt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?FHt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function zA(e){bl.call(this,e),this._options={},this._redraw=!1,this._dirty=new os,this._tempb=new os}const Rge=bl.prototype,jHt=(e,t,n)=>new os().set(0,0,t,n).translate(-e[0],-e[1]);function zHt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}We(zA,bl,{initialize(e,t,n,r,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:kg(1,1,this._options.type),e&&this._canvas&&(Ll(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Rge.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(Rge.resize.call(this,e,t,n,r),this._canvas)BHt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||Te("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){const n=this.context(),r=this._origin,i=this._width,s=this._height,o=this._dirty,a=jHt(r,i,s);n.save();const u=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):zHt(n,a.intersect(o),r);return this.clear(-r[0],-r[1],i,s),this.draw(n,e,u,t),n.restore(),o.clear(),this},draw(e,t,n,r){if(t.marktype!=="group"&&r!=null&&!r.includes(t.marktype))return;const i=cl[t.marktype];t.clip&&FVt(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(e,t,n,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(e,t,n,r))}});function RZ(e,t){u0.call(this,e,t);const n=this;n._hrefHandler=bH(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=bH(n,(r,i)=>{n.handleTooltip(r,i,r.type!==jA)})}const bH=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};We(RZ,u0,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(_H,this._hrefHandler),r.removeEventListener(vH,this._tooltipHandler),r.removeEventListener(jA,this._tooltipHandler)),this._svg=r=e&&$Z(e,"svg"),r&&(r.addEventListener(_H,this._hrefHandler),r.addEventListener(vH,this._tooltipHandler),r.addEventListener(jA,this._tooltipHandler)),u0.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const s={type:e,handler:t,listener:bH(this,t)};(r[n]||(r[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const H4e="aria-hidden",NZ="aria-label",DZ="role",LZ="aria-roledescription",q4e="graphics-object",MZ="graphics-symbol",W4e=(e,t,n)=>({[DZ]:e,[LZ]:t,[NZ]:n||void 0}),UHt=cf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Nge={axis:{desc:"axis",caption:qHt},legend:{desc:"legend",caption:WHt},"title-text":{desc:"title",caption:e=>`Title text '${Lge(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Lge(e)}'`}},Dge={ariaRole:DZ,ariaRoleDescription:LZ,description:NZ};function G4e(e,t){const n=t.aria===!1;if(e(H4e,n||void 0),n||t.description==null)for(const r in Dge)e(Dge[r],void 0);else{const r=t.mark.marktype;e(NZ,t.description),e(DZ,t.ariaRole||(r==="group"?q4e:MZ)),e(LZ,t.ariaRoleDescription||`${r} mark`)}}function Y4e(e){return e.aria===!1?{[H4e]:!0}:UHt[e.role]?null:Nge[e.role]?HHt(e,Nge[e.role]):VHt(e)}function VHt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return W4e(n?q4e:MZ,`${t} mark container`,e.description)}function HHt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return W4e(t.role||MZ,t.desc,n.description||r(n))}catch{return null}}function Lge(e){return nt(e.text).join(" ")}function qHt(e){const t=e.datum,n=e.orient,r=t.title?K4e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Ww(a)?"discrete":a} scale with ${c4e(o,s,e)}`}function WHt(e){const t=e.datum,n=t.title?K4e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return YHt(r)+(n?` titled '${n}'`:"")+` for ${GHt(s)} with ${c4e(u,a,e)}`}function K4e(e){try{return nt(Un(e.items).items[0].text).join(" ")}catch{return null}}function GHt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Un(e)}function YHt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const X4e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),KHt=e=>X4e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function FZ(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${KHt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=X4e(u),a),toString:()=>e};return a}const Q4e=e=>J4e(FZ(),e)+"";function J4e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):J4e(e,r)}return e.close()}const eL={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},tL={blend:"mix-blend-mode"},Z4e={fill:"none","stroke-miterlimit":10},ES=0,Mge="http://www.w3.org/2000/xmlns/",ps=BA.xmlns;function EF(e){bl.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const vj=bl.prototype;We(EF,bl,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=gs(e,0,"svg",ps),this._svg.setAttributeNS(Mge,"xmlns",ps),this._svg.setAttributeNS(Mge,"xmlns:xlink",BA["xmlns:xlink"]),this._svg.setAttribute("version",BA.version),this._svg.setAttribute("class","marks"),Ll(e,1),this._root=gs(this._svg,ES,"g",ps),rg(this._root,Z4e),Ll(this._svg,ES+1)),this.background(this._bgcolor),vj.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),vj.background.apply(this,arguments)},resize(e,t,n,r){return vj.resize.call(this,e,t,n,r),this._svg&&(rg(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=gs(e,ES,"rect",ps),rg(n,{width:this._width,height:this._height,fill:t}));const r=Q4e(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Ll(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,s,o,a,u;for(o=0,a=e.length;o<a;++o)if(n=e[o],r=n.mark,r.marktype!==i&&(i=r.marktype,s=cl[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,Fge(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){s.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(s,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=s.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,Fge(n,t)):this._update(s,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;const i=this._svg,s=t.marktype,o=cl[s],a=t.interactive===!1?"none":null,u=o.tag==="g",l=Bge(t,e,n,"g",i);if(s!=="group"&&r!=null&&!r.includes(s))return Ll(l,0),t._svg;l.setAttribute("class",M4e(t));const c=Y4e(t);for(const p in c)fa(l,p,c[p]);u||fa(l,"pointer-events",a),fa(l,"clip-path",t.clip?pZ(this,t,t.group):null);let f=null,d=0;const h=p=>{const m=this.isDirty(p),g=Bge(p,l,f,o.tag,i);m&&(this._update(o,g,p),u&&JHt(this,g,p,r)),f=g,++d};return o.nested?t.items.length&&h(t.items[0]):df(t,h),Ll(l,d),l},_update(e,t,n){Jh=t,Fo=t.__values__,G4e(m2,n),e.attr(m2,n,this);const r=eqt[e.type];r&&r.call(this,e,t,n),Jh&&this.style(Jh,n)},style(e,t){if(t!=null){for(const n in eL){let r=n==="font"?MI(t):t[n];if(r===Fo[n])continue;const i=eL[n];r==null?e.removeAttribute(i):(fZ(r)&&(r=d4e(r,this._defs.gradient,eFe())),e.setAttribute(i,r+"")),Fo[n]=r}for(const n in tL)k$(e,tL[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=gs(e,ES+1,"defs",ps)),r=XHt(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=gs(e,ES+1,"defs",ps)),r=QHt(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Ll(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function Fge(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function XHt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=gs(e,n++,"pattern",ps);rg(o,{id:q3+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=gs(o,0,"rect",ps),rg(o,{width:1,height:1,fill:`url(${eFe()}#${t.id})`}),e=gs(e,n++,"radialGradient",ps),rg(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=gs(e,n++,"linearGradient",ps),rg(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=gs(e,r,"stop",ps),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Ll(e,r),n}function QHt(e,t,n){let r;return e=gs(e,n,"clipPath",ps),e.setAttribute("id",t.id),t.path?(r=gs(e,0,"path",ps),r.setAttribute("d",t.path)):(r=gs(e,0,"rect",ps),rg(r,{x:0,y:0,width:t.width,height:t.height})),Ll(e,1),n+1}function JHt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;df(n,o=>{i=e.mark(t,o,i,r),++s}),Ll(t,1+s)}function Bge(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=ng(o,r,ps),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=ng(o,"path",ps);s.appendChild(a),a.__data__=e;const u=ng(o,"g",ps);s.appendChild(u),u.__data__=e;const l=ng(o,"path",ps);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||ZHt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function ZHt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Jh=null,Fo=null;const eqt={group(e,t,n){const r=Jh=t.childNodes[2];Fo=r.__values__,e.foreground(m2,n,this),Fo=t.__values__,Jh=t.childNodes[1],e.content(m2,n,this);const i=Jh=t.childNodes[0];e.background(m2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Fo.events&&(fa(r,"pointer-events",s),fa(i,"pointer-events",s),Fo.events=s),n.strokeForeground&&n.stroke){const o=n.fill;fa(r,"display",null),this.style(i,n),fa(i,"stroke",null),o&&(n.fill=null),Fo=r.__values__,this.style(r,n),o&&(n.fill=o),Jh=null}else fa(r,"display","none")},image(e,t,n){n.smooth===!1?(k$(t,"image-rendering","optimizeSpeed"),k$(t,"image-rendering","pixelated")):k$(t,"image-rendering",null)},text(e,t,n){const r=LI(n);let i,s,o,a;Ie(r)?(s=r.map(u=>a0(n,u)),i=s.join(`
`),i!==Fo.text&&(Ll(t,0),o=t.ownerDocument,a=o0(n),s.forEach((u,l)=>{const c=ng(o,"tspan",ps);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Fo.text=i)):(s=a0(n,r),s!==Fo.text&&(t.textContent=s,Fo.text=s)),fa(t,"font-family",MI(n)),fa(t,"font-size",lh(n)+"px"),fa(t,"font-style",n.fontStyle),fa(t,"font-variant",n.fontVariant),fa(t,"font-weight",n.fontWeight)}};function m2(e,t,n){t!==Fo[e]&&(n?tqt(Jh,e,t,n):fa(Jh,e,t),Fo[e]=t)}function k$(e,t,n){n!==Fo[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Fo[t]=n)}function rg(e,t){for(const n in t)fa(e,n,t[n])}function fa(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function tqt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function eFe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function BZ(e){bl.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}We(BZ,bl,{svg(){return this._text},_render(e){const t=FZ();t.open("svg",hn({},BA,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",Z4e,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=cl[t.marktype],r=n.tag,i=[G4e,n.attr];e.open("g",{class:M4e(t),"clip-path":t.clip?pZ(this,t,t.group):null},Y4e(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const s=o=>{const a=this.href(o);if(a&&e.open("a",a),e.open(r,this.attr(t,o,i,r!=="g"?r:null)),r==="text"){const u=LI(o);if(Ie(u)){const l={x:0,dy:o0(o)};for(let c=0;c<u.length;++c)e.open("tspan",c?l:null).text(a0(o,u[c])).close()}else e.text(a0(o,u))}else if(r==="g"){const u=o.strokeForeground,l=o.fill,c=o.stroke;u&&c&&(o.stroke=null),e.open("path",this.attr(t,o,n.background,"bgrect")).close(),e.open("g",this.attr(t,o,n.content)),df(o,f=>this.mark(e,f)),e.close(),u&&c?(l&&(o.fill=null),o.stroke=c,e.open("path",this.attr(t,o,n.foreground,"bgrect")).close(),l&&(o.fill=l)):e.open("path",this.attr(t,o,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&s(t.items[0]):df(t,s),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},s=(o,a,u,l)=>{i[l||o]=a};return Array.isArray(n)?n.forEach(o=>o(s,t,this)):n(s,t,this),r&&nqt(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const s=t[i],o=s.stops;s.gradient==="radial"?(e.open("pattern",{id:q3+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):e.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let a=0;a<o.length;++a)e.open("stop",{offset:o[a].offset,"stop-color":o[a].color}).close();e.close()}for(const i in n){const s=n[i];e.open("clipPath",{id:i}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});function nqt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=MI(t),e["font-size"]=lh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in eL){let a=t[o];const u=eL[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(fZ(a)&&(a=d4e(a,i.gradient,"")),e[u]=a)}for(const o in tL){const a=t[o];a!=null&&(s=s||[],s.push(`${tL[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Rc={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function rqt(e){Rc.svgMarkTypes=e.svgMarkTypes??["text"],Rc.svgOnTop=e.svgOnTop??!0,Rc.debug=e.debug??!1}function nL(e){bl.call(this,e),this._svgRenderer=new EF(e),this._canvasRenderer=new zA(e)}const jge=bl.prototype;We(nL,bl,{initialize(e,t,n,r,i){this._root_el=gs(e,0,"div");const s=gs(this._root_el,0,"div"),o=gs(this._root_el,1,"div");return this._root_el.style.position="relative",Rc.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=Rc.svgOnTop?o:s,this._canvasEl=Rc.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),jge.initialize.call(this,e,t,n,r,i)},dirty(e){return Rc.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){const r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!Rc.svgMarkTypes.includes(i));this._svgRenderer.render(e,Rc.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return jge.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return Rc.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function jZ(e,t){l0.call(this,e,t)}We(jZ,l0,{initialize(e,t,n){const r=gs(gs(e,0,"div"),Rc.svgOnTop?0:1,"div");return l0.prototype.initialize.call(this,r,t,n)}});const tFe="canvas",nFe="hybrid",rFe="png",iFe="svg",sFe="none",ig={Canvas:tFe,PNG:rFe,SVG:iFe,Hybrid:nFe,None:sFe},Y1={};Y1[tFe]=Y1[rFe]={renderer:zA,headless:zA,handler:l0};Y1[iFe]={renderer:EF,headless:BZ,handler:RZ};Y1[nFe]={renderer:nL,headless:nL,handler:jZ};Y1[sFe]={};function xF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Y1[e]=t,this):Y1[e]}function oFe(e,t,n){const r=[],i=new os().union(t),s=e.marktype;return s?aFe(e,i,n,r):s==="group"?uFe(e,i,n,r):Te("Intersect scene must be mark node or group item.")}function aFe(e,t,n,r){if(iqt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)uFe(i[a],t,n,r);else for(const u=cl[s].isect;a<o;++a){const l=i[a];lFe(l,t,u)&&r.push(l)}}return r}function iqt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function uFe(e,t,n,r){n&&n(e.mark)&&lFe(e,t,cl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)aFe(i[u],t,n,r);t.translate(o,a)}return r}function lFe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const _j=new os;function cFe(e){const t=e.clip;if(pn(t))t(NI(_j.clear()));else if(t)_j.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(_j)}const sqt=1e-9;function zZ(e,t,n){return e===t?!0:n==="path"?fFe(e,t):e instanceof Date&&t instanceof Date?+e==+t:Jn(e)&&Jn(t)?Math.abs(e-t)<=sqt:!e||!t||!ot(e)&&!ot(t)?e==t:oqt(e,t)}function fFe(e,t){return zZ(Gw(e),Gw(t))}function oqt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!zZ(e[i],t[i],i))return!1;return typeof e==typeof t}function aqt(){_4e(),kUt()}const Xw="top",Vc="left",Wc="right",c0="bottom",uqt="top-left",lqt="top-right",cqt="bottom-left",fqt="bottom-right",UZ="start",wH="middle",pa="end",dqt="x",hqt="y",SF="group",VZ="axis",HZ="title",pqt="frame",mqt="scope",qZ="legend",dFe="row-header",hFe="row-footer",pFe="row-title",mFe="column-header",gFe="column-footer",yFe="column-title",gqt="padding",yqt="symbol",vFe="fit",_Fe="fit-x",bFe="fit-y",vqt="pad",WZ="none",jP="all",EH="each",GZ="flush",sg="column",og="row";function wFe(e){Ee.call(this,null,e)}We(wFe,Ee,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=cl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=zP(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===SF||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(zP(l,o))),r.role){case VZ:case qZ:case HZ:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(zP(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(zP(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return cFe(r),t.modifies("bounds")}});function zP(e,t,n){return t(e.bounds.clear(),e,n)}const zge=":vega_identifier:";function YZ(e){Ee.call(this,0,e)}YZ.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};We(YZ,Ee,{transform(e,t){const n=_qt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function _qt(e){return e._signals[zge]||(e._signals[zge]=e.add(0))}function EFe(e){Ee.call(this,null,e)}We(EFe,Ee,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,bqt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===SF?pF:hF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function bqt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function xFe(e){Ee.call(this,null,e)}const Uge={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!SFe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},SFe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Vge=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(SFe(i,s=e[n].bounds,t))return!0},wqt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Eqt=(e,t,n)=>{var r=e.range(),i=new os;return t===Xw||t===c0?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Hge=e=>(e.forEach(t=>t.opacity=1),e),qge=(e,t)=>e.reflow(t.modified()).modifies("opacity");We(xFe,Ee,{transform(e,t){const n=Uge[e.method]||Uge.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Hge(i),t=qge(t,e)),t;if(i=i.filter(wqt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Hge(i),t=qge(t,e),s.length>=3&&Vge(s,r)){do s=n(s,r);while(s.length>=3&&Vge(s,r));s.length<3&&!Un(i).opacity&&(s.length>1&&(Un(s).opacity=0),Un(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=Eqt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function TFe(e){Ee.call(this,null,e)}We(TFe,Ee,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Lo=new os;function fb(e,t,n){return e[t]===n?0:(e[t]=n,1)}function xqt(e){var t=e.items[0].orient;return t===Vc||t===Wc}function Sqt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Tqt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=Sqt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&IZ(p),v=0,_=0,b,E;switch(Lo.clear().union(g),g.clear(),(b=u[0])>-1&&g.union(i.items[b].bounds),(b=u[1])>-1&&g.union(i.items[b].bounds),a){case Xw:v=f||0,_=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&UP(e,p,E,m,y,0,-1,g);break;case Vc:v=-c,_=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&UP(e,p,E,m,y,1,-1,g);break;case Wc:v=n+c,_=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&UP(e,p,E,m,y,1,1,g);break;case c0:v=f||0,_=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&UP(e,p,E,m,0,0,1,g);break;default:v=i.x,_=i.y}return nm(g.translate(v,_),i),fb(i,"x",v+o)|fb(i,"y",_+o)&&(i.bounds=Lo,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function UP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Wge=(e,t)=>Math.floor(Math.min(e,t)),Gge=(e,t)=>Math.ceil(Math.max(e,t));function Aqt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===SF)switch(i.role){case VZ:case qZ:case HZ:break;case dFe:o.rowheaders.push(...s);break;case hFe:o.rowfooters.push(...s);break;case mFe:o.colheaders.push(...s);break;case gFe:o.colfooters.push(...s);break;case pFe:o.rowtitle=s[0];break;case yFe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function Cqt(e){return new os().set(0,0,e.width||0,e.height||0)}function Iqt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function ui(e,t,n){const r=ot(e)?e[t]:e;return r??(n!==void 0?n:0)}function Yge(e){return e<0?Math.ceil(-e):0}function AFe(e,t,n){var r=!n.nodirty,i=n.bounds===GZ?Cqt:Iqt,s=Lo.set(0,0,0,0),o=ui(n.align,sg),a=ui(n.align,og),u=ui(n.padding,sg),l=ui(n.padding,og),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,_=Array(d),b=Array(d),E=Array(d),w,x,S,I,C,O,z,N,$,D,B;for(x=0;x<c;++x)p[x]=0;for(x=0;x<f;++x)y[x]=0;for(x=0;x<d;++x)O=t[x],C=E[x]=i(O),O.x=O.x||0,_[x]=0,O.y=O.y||0,b[x]=0,S=x%c,I=~~(x/c),m=Math.max(m,z=Math.ceil(C.x2)),v=Math.max(v,N=Math.ceil(C.y2)),p[S]=Math.max(p[S],z),y[I]=Math.max(y[I],N),h[x]=u+Yge(C.x1),g[x]=l+Yge(C.y1),r&&e.dirty(t[x]);for(x=0;x<d;++x)x%c===0&&(h[x]=0),x<c&&(g[x]=0);if(o===EH)for(S=1;S<c;++S){for(B=0,x=S;x<d;x+=c)B<h[x]&&(B=h[x]);for(x=S;x<d;x+=c)h[x]=B+p[S-1]}else if(o===jP){for(B=0,x=0;x<d;++x)x%c&&B<h[x]&&(B=h[x]);for(x=0;x<d;++x)x%c&&(h[x]=B+m)}else for(o=!1,S=1;S<c;++S)for(x=S;x<d;x+=c)h[x]+=p[S-1];if(a===EH)for(I=1;I<f;++I){for(B=0,x=I*c,w=x+c;x<w;++x)B<g[x]&&(B=g[x]);for(x=I*c;x<w;++x)g[x]=B+y[I-1]}else if(a===jP){for(B=0,x=c;x<d;++x)B<g[x]&&(B=g[x]);for(x=c;x<d;++x)g[x]=B+v}else for(a=!1,I=1;I<f;++I)for(x=I*c,w=x+c;x<w;++x)g[x]+=y[I-1];for($=0,x=0;x<d;++x)$=h[x]+(x%c?$:0),_[x]+=$-t[x].x;for(S=0;S<c;++S)for(D=0,x=S;x<d;x+=c)D+=g[x],b[x]+=D-t[x].y;if(o&&ui(n.center,sg)&&f>1)for(x=0;x<d;++x)C=o===jP?m:p[x%c],$=C-E[x].x2-t[x].x-_[x],$>0&&(_[x]+=$/2);if(a&&ui(n.center,og)&&c!==1)for(x=0;x<d;++x)C=a===jP?v:y[~~(x/c)],D=C-E[x].y2-t[x].y-b[x],D>0&&(b[x]+=D/2);for(x=0;x<d;++x)s.union(E[x].translate(_[x],b[x]));switch($=ui(n.anchor,dqt),D=ui(n.anchor,hqt),ui(n.anchor,sg)){case pa:$-=s.width();break;case wH:$-=s.width()/2}switch(ui(n.anchor,og)){case pa:D-=s.height();break;case wH:D-=s.height()/2}for($=Math.round($),D=Math.round(D),s.clear(),x=0;x<d;++x)t[x].mark.bounds.clear();for(x=0;x<d;++x)O=t[x],O.x+=_[x]+=$,O.y+=b[x]+=D,s.union(O.mark.bounds.union(O.bounds.translate(_[x],b[x]))),r&&e.dirty(O);return s}function Oqt(e,t,n){var r=Aqt(t),i=r.marks,s=n.bounds===GZ?Pqt:kqt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=AFe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=ui(n.headerBand,og,null),c=VP(e,r.rowheaders,i,a,u,-ui(o,"rowHeader"),Wge,0,s,"x1",0,a,1,m)),r.colheaders&&(m=ui(n.headerBand,sg,null),f=VP(e,r.colheaders,i,a,a,-ui(o,"columnHeader"),Wge,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=ui(n.footerBand,og,null),d=VP(e,r.rowfooters,i,a,u,ui(o,"rowFooter"),Gge,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=ui(n.footerBand,sg,null),h=VP(e,r.colfooters,i,a,a,ui(o,"columnFooter"),Gge,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=ui(n.titleAnchor,og),g=ui(o,"rowTitle"),g=p===pa?d+g:c-g,m=ui(n.titleBand,og,.5),Kge(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=ui(n.titleAnchor,sg),g=ui(o,"columnTitle"),g=p===pa?h+g:f-g,m=ui(n.titleBand,sg,.5),Kge(e,r.coltitle,g,1,y,m))}function Pqt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function kqt(e,t){return e.bounds[t]}function VP(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,_,b,E,w,x,S,I;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,b=t.length;v<b;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,b=t.length;v<b;++v,y+=f){for(w=t[v],E=w.mark.bounds,_=y;_>=0&&(x=n[_])==null;_-=d);a?(S=h==null?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),I=m):(S=m,I=h==null?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),E.union(w.bounds.translate(S-(w.x||0),I-(w.y||0))),w.x=S,w.y=I,e.dirty(w),g=o(g,E[l])}return g}function Kge(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function $qt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Rqt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Nqt(e,t,n,r,i,s,o){const a=$qt(n,t),u=Rqt(e,a("offset",0)),l=a("anchor",UZ),c=l===pa?1:l===wH?.5:0,f={align:EH,bounds:a("bounds",GZ),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Vc:f.anchor={x:Math.floor(r.x1)-u,column:pa,y:c*(o||r.height()+2*r.y1),row:l};break;case Wc:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case Xw:f.anchor={y:Math.floor(i.y1)-u,row:pa,x:c*(s||i.width()+2*i.x1),column:l};break;case c0:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case uqt:f.anchor={x:u,y:u};break;case lqt:f.anchor={x:s-u,y:u,column:pa};break;case cqt:f.anchor={x:u,y:o-u,row:pa};break;case fqt:f.anchor={x:s-u,y:o-u,column:pa,row:pa};break}return f}function Dqt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),Mqt(e,n,n.items[0].items[0]),s=Lqt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===yqt&&Fqt(n.items[0].items[0].items[0].items),i!==WZ&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,nm(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function Lqt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Mqt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&xS(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Vc:i+=Math.ceil(o.bounds.width())+u;break;case Wc:case c0:break;default:s+=o.bounds.height()+u}switch((i||s)&&xS(e,n,i,s),o.orient){case Vc:c+=b_(t,n,o,a,1,1);break;case Wc:l+=b_(t,n,o,pa,0,0)+u,c+=b_(t,n,o,a,1,1);break;case c0:l+=b_(t,n,o,a,0,0),c+=b_(t,n,o,pa,-1,0,1)+u;break;default:l+=b_(t,n,o,a,0,0)}(l||c)&&xS(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(xS(e,n,-l,0),xS(e,o,-l,0))}}function b_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:IZ(n);return Math.round(r===UZ?f:r===pa?d-h:.5*(c-h))}function xS(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Fqt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Bqt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Vc||a===Wc?r:n,p=0,m=0,g=0,y=0,v=0,_;if(o!==SF?a===Vc?(p=i.y2,h=i.y1):a===Wc?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Vc&&(p=r,h=0),_=u===UZ?p:u===pa?h:(p+h)/2,d&&d.text){switch(a){case Xw:case c0:v=f.bounds.height()+c;break;case Vc:y=f.bounds.width()+c;break;case Wc:y=-f.bounds.width()-c;break}Lo.clear().union(d.bounds),Lo.translate(y-(d.x||0),v-(d.y||0)),fb(d,"x",y)|fb(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(Lo),d.mark.bounds.clear().union(Lo),e.dirty(d)),Lo.clear().union(d.bounds)}else Lo.clear();switch(Lo.union(f.bounds),a){case Xw:m=_,g=i.y1-Lo.height()-l;break;case Vc:m=i.x1-Lo.width()-l,g=_;break;case Wc:m=i.x2+Lo.width()+l,g=_;break;case c0:m=_,g=i.y2+l;break;default:m=s.x,g=s.y}return fb(s,"x",m)|fb(s,"y",g)&&(Lo.translate(m,g),e.dirty(s),s.bounds.clear().union(Lo),t.bounds.clear().union(Lo),e.dirty(s)),s.bounds}function CFe(e){Ee.call(this,null,e)}We(CFe,Ee,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Oqt(n,r,e.layout),zqt(n,r,e)}),jqt(e.mark.group)?t.reflow():t}});function jqt(e){return e&&e.mark.role!=="legend-entry"}function zqt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new os().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case VZ:h=xqt(f)?a:u,h.union(Tqt(e,f,i,s));break;case HZ:c=f;break;case qZ:l.push(Dqt(e,f));break;case pqt:case mqt:case dFe:case hFe:case pFe:case mFe:case gFe:case yFe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Wc,d!==WZ&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];AFe(e,v,Nqt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===vFe||n.autosize.type===_Fe||n.autosize.type===bFe))switch(y.orient){case Vc:case Wc:o.add(v.x1,0).add(v.x2,0);break;case Xw:case c0:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(Bqt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),Uqt(e,t,o,n)}function Uqt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===gqt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===WZ?(l=0,f=0,u=o,c=a):s===vFe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===_Fe?(u=Math.max(0,o-l-d),a=c+f+h):s===bFe?(o=u+l+d,c=Math.max(0,a-f-h)):s===vqt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const Vqt=Object.freeze(Object.defineProperty({__proto__:null,bound:wFe,identifier:YZ,mark:EFe,overlap:xFe,render:TFe,viewlayout:CFe},Symbol.toStringTag,{value:"Module"}));function IFe(e){Ee.call(this,null,e)}We(IFe,Ee,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=lZ(s,o,e.minstep),u=e.format||s4e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?i4e(s,e.values,a):cZ(s,a);return i&&(r.rem=i),i=l.map((c,f)=>dr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(dr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function OFe(e){Ee.call(this,null,e)}function Hqt(){return dr({})}function qqt(e){const t=rx().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}We(OFe,Ee,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Hqt,s=e.key||kt,o=this.value;return Ie(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Te("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=qqt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function PFe(e){Ee.call(this,null,e)}We(PFe,Ee,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Ie(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||xm,u=i.enter||xm,l=i.exit||xm,c=(s&&!o?i[s]:a)||xm;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==xm&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==xm&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==xm){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function kFe(e){Ee.call(this,[],e)}We(kFe,Ee,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||S$,o=e.scale,a=+e.limit,u=lZ(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===S$,c=e.format||l4e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||u4e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===S$?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,pn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=ra(m=p||8),i=i.map((y,v)=>dr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(dr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===vUt?(d=o.domain(),h=t4e(o,d[0],Un(d)),f.length<3&&!e.values&&d[0]!==Un(d)&&(f=[d[0],Un(d)]),i=f.map((y,v)=>dr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=OUt(o),i=f.map((y,v)=>dr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const Wqt=e=>e.source.x,Gqt=e=>e.source.y,Yqt=e=>e.target.x,Kqt=e=>e.target.y;function KZ(e){Ee.call(this,{},e)}KZ.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};We(KZ,Ee,{transform(e,t){var n=e.sourceX||Wqt,r=e.sourceY||Gqt,i=e.targetX||Yqt,s=e.targetY||Kqt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Xge.get(u+"-"+a)||Xge.get(u);return l||Te("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const $Fe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Xqt=(e,t,n,r)=>$Fe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),RFe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},Qqt=(e,t,n,r)=>RFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),NFe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},Jqt=(e,t,n,r)=>NFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Zqt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,eWt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,tWt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},nWt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},rWt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},iWt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Xge=rx({line:$Fe,"line-radial":Xqt,arc:RFe,"arc-radial":Qqt,curve:NFe,"curve-radial":Jqt,"orthogonal-horizontal":Zqt,"orthogonal-vertical":eWt,"orthogonal-radial":tWt,"diagonal-horizontal":nWt,"diagonal-vertical":rWt,"diagonal-radial":iWt});function XZ(e){Ee.call(this,null,e)}XZ.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};We(XZ,Ee,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||ex,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/yMe(l),h=Fv(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const sWt=5;function oWt(e){const t=e.type;return!e.bins&&(t===Hw||t===CI||t===II)}function DFe(e){return oZ(e)&&e!==Od}const aWt=cf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function LFe(e){Ee.call(this,null,e),this.modified(!0)}We(LFe,Ee,{transform(e,t){var n=t.dataflow,r=this.value,i=uWt(e);(!r||i!==r.type)&&(this.value=r=or(i)());for(i in e)if(!aWt[i]){if(i==="padding"&&DFe(r.type))continue;pn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return pWt(r,e,hWt(r,e,cWt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function uWt(e){var t=e.type,n="",r;return t===Od?Od+"-"+Hw:(lWt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Od+"-":r===3?ax+"-":""),(n+t||Hw).toLowerCase())}function lWt(e){const t=e.type;return oZ(t)&&t!==W1&&t!==G1&&(e.scheme||e.range&&e.range.length&&e.range.every(rt))}function cWt(e,t,n){const r=fWt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&oWt(e),a,u;if(!i)return 0;if(DFe(s)&&t.padding&&i[0]!==Un(i)&&(i=dWt(s,i,t.range,t.padding,t.exponent,t.constant)),(o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return e.domain(MFe(s,i,n)),s===nZ&&e.unknown(t.domainImplicit?VU:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&lZ(e,t.nice)||null),i.length}function fWt(e,t,n){return t?(e.domain(MFe(e.type,t,n)),t.length):-1}function dWt(e,t,n,r,i,s){var o=Math.abs(Un(n)-n[0]),a=o/(o-2*r),u=e===Mp?KQ(t,null,a):e===II?j3(t,null,a,.5):e===CI?j3(t,null,a,i||1):e===uF?XQ(t,null,a,s||1):YQ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function MFe(e,t,n){if(X6e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Xe(t))}return t}function hWt(e,t,n){let r=t.bins;if(r&&!Ie(r)){const i=e.domain(),s=i[0],o=Un(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Te("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Fv(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===rZ&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function pWt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=mWt(r,t,n);else if(t.scheme&&(s=gWt(r,t,n),pn(s))){if(e.interpolator)return e.interpolator(s);Te(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&Q6e(r))return e.interpolator(fF(xH(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(aZ(t.interpolate,t.interpolateGamma)):pn(e.round)?e.round(i):pn(e.rangeRound)&&e.interpolate(i?tI:Qp),s&&e.range(xH(s,t.reverse))}function mWt(e,t,n){e!==H6e&&e!==aH&&Te("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===aH?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*tZ(n,i,r)]}function gWt(e,t,n){var r=t.schemeExtent,i,s;return Ie(t.scheme)?s=fF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=uZ(i),s||Te(`Unrecognized scheme name: ${t.scheme}`)),n=e===cF?n+1:e===rZ?n-1:e===qw||e===lF?+t.schemeCount||sWt:n,Q6e(e)?Qge(s,r,t.reverse):pn(s)?e4e(Qge(s,r),n):e===nZ?s:s.slice(0,n)}function Qge(e,t,n){return pn(e)&&(t||n)?Z6e(e,xH(t||[0,1],n)):e}function xH(e,t){return t?e.slice().reverse():e}function FFe(e){Ee.call(this,null,e)}We(FFe,Ee,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Bv(e.sort)),this.modified(n),t}});const Jge="zero",BFe="center",jFe="normalize",zFe=["y0","y1"];function QZ(e){Ee.call(this,null,e)}QZ.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Jge,values:[Jge,BFe,jFe]},{name:"as",type:"string",array:!0,length:2,default:zFe}]};We(QZ,Ee,{transform(e,t){var n=e.as||zFe,r=n[0],i=n[1],s=Bv(e.sort),o=e.field||ex,a=e.offset===BFe?yWt:e.offset===jFe?vWt:_Wt,u,l,c,f;for(u=bWt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function yWt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function vWt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function _Wt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function bWt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const wWt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:IFe,datajoin:OFe,encode:PFe,legendentries:kFe,linkpath:KZ,pie:XZ,scale:LFe,sortitems:FFe,stack:QZ},Symbol.toStringTag,{value:"Module"}));class Ea{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}function*EWt(e){for(const t of e)yield*t}function UFe(e){return Array.from(EWt(e))}function db(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}var Dt=1e-6,rL=1e-12,An=Math.PI,Ri=An/2,iL=An/4,Oa=An*2,zi=180/An,Sn=An/180,zn=Math.abs,lx=Math.atan,ic=Math.atan2,Ft=Math.cos,HP=Math.ceil,VFe=Math.exp,SH=Math.hypot,sL=Math.log,bj=Math.pow,$t=Math.sin,Ul=Math.sign||function(e){return e>0?1:e<0?-1:0},Pa=Math.sqrt,JZ=Math.tan;function HFe(e){return e>1?0:e<-1?An:Math.acos(e)}function wu(e){return e>1?Ri:e<-1?-Ri:Math.asin(e)}function ho(){}function oL(e,t){e&&e0e.hasOwnProperty(e.type)&&e0e[e.type](e,t)}var Zge={Feature:function(e,t){oL(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)oL(n[r].geometry,t)}},e0e={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){TH(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)TH(n[r],t,0)},Polygon:function(e,t){t0e(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)t0e(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)oL(n[r],t)}};function TH(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function t0e(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)TH(e[n],t,1);t.polygonEnd()}function Vh(e,t){e&&Zge.hasOwnProperty(e.type)?Zge[e.type](e,t):oL(e,t)}var aL=new Ea,uL=new Ea,qFe,WFe,AH,CH,IH,Kd={point:ho,lineStart:ho,lineEnd:ho,polygonStart:function(){aL=new Ea,Kd.lineStart=xWt,Kd.lineEnd=SWt},polygonEnd:function(){var e=+aL;uL.add(e<0?Oa+e:e),this.lineStart=this.lineEnd=this.point=ho},sphere:function(){uL.add(Oa)}};function xWt(){Kd.point=TWt}function SWt(){GFe(qFe,WFe)}function TWt(e,t){Kd.point=GFe,qFe=e,WFe=t,e*=Sn,t*=Sn,AH=e,CH=Ft(t=t/2+iL),IH=$t(t)}function GFe(e,t){e*=Sn,t*=Sn,t=t/2+iL;var n=e-AH,r=n>=0?1:-1,i=r*n,s=Ft(t),o=$t(t),a=IH*o,u=CH*s+a*Ft(i),l=a*r*$t(i);aL.add(ic(l,u)),AH=e,CH=s,IH=o}function AWt(e){return uL=new Ea,Vh(e,Kd),uL*2}function lL(e){return[ic(e[1],e[0]),wu(e[2])]}function K1(e){var t=e[0],n=e[1],r=Ft(n);return[r*Ft(t),r*$t(t),$t(n)]}function qP(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Qw(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function wj(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function WP(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function cL(e){var t=Pa(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var yi,Qa,Ti,Vu,Sy,YFe,KFe,Vb,g2,Rm,Fp,Dh={point:OH,lineStart:n0e,lineEnd:r0e,polygonStart:function(){Dh.point=QFe,Dh.lineStart=CWt,Dh.lineEnd=IWt,g2=new Ea,Kd.polygonStart()},polygonEnd:function(){Kd.polygonEnd(),Dh.point=OH,Dh.lineStart=n0e,Dh.lineEnd=r0e,aL<0?(yi=-(Ti=180),Qa=-(Vu=90)):g2>Dt?Vu=90:g2<-Dt&&(Qa=-90),Fp[0]=yi,Fp[1]=Ti},sphere:function(){yi=-(Ti=180),Qa=-(Vu=90)}};function OH(e,t){Rm.push(Fp=[yi=e,Ti=e]),t<Qa&&(Qa=t),t>Vu&&(Vu=t)}function XFe(e,t){var n=K1([e*Sn,t*Sn]);if(Vb){var r=Qw(Vb,n),i=[r[1],-r[0],0],s=Qw(i,r);cL(s),s=lL(s);var o=e-Sy,a=o>0?1:-1,u=s[0]*zi*a,l,c=zn(o)>180;c^(a*Sy<u&&u<a*e)?(l=s[1]*zi,l>Vu&&(Vu=l)):(u=(u+360)%360-180,c^(a*Sy<u&&u<a*e)?(l=-s[1]*zi,l<Qa&&(Qa=l)):(t<Qa&&(Qa=t),t>Vu&&(Vu=t))),c?e<Sy?Bu(yi,e)>Bu(yi,Ti)&&(Ti=e):Bu(e,Ti)>Bu(yi,Ti)&&(yi=e):Ti>=yi?(e<yi&&(yi=e),e>Ti&&(Ti=e)):e>Sy?Bu(yi,e)>Bu(yi,Ti)&&(Ti=e):Bu(e,Ti)>Bu(yi,Ti)&&(yi=e)}else Rm.push(Fp=[yi=e,Ti=e]);t<Qa&&(Qa=t),t>Vu&&(Vu=t),Vb=n,Sy=e}function n0e(){Dh.point=XFe}function r0e(){Fp[0]=yi,Fp[1]=Ti,Dh.point=OH,Vb=null}function QFe(e,t){if(Vb){var n=e-Sy;g2.add(zn(n)>180?n+(n>0?360:-360):n)}else YFe=e,KFe=t;Kd.point(e,t),XFe(e,t)}function CWt(){Kd.lineStart()}function IWt(){QFe(YFe,KFe),Kd.lineEnd(),zn(g2)>Dt&&(yi=-(Ti=180)),Fp[0]=yi,Fp[1]=Ti,Vb=null}function Bu(e,t){return(t-=e)<0?t+360:t}function OWt(e,t){return e[0]-t[0]}function i0e(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function PWt(e){var t,n,r,i,s,o,a;if(Vu=Ti=-(yi=Qa=1/0),Rm=[],Vh(e,Dh),n=Rm.length){for(Rm.sort(OWt),t=1,r=Rm[0],s=[r];t<n;++t)i=Rm[t],i0e(r,i[0])||i0e(r,i[1])?(Bu(r[0],i[1])>Bu(r[0],r[1])&&(r[1]=i[1]),Bu(i[0],r[1])>Bu(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Bu(r[1],i[0]))>o&&(o=a,yi=i[0],Ti=r[1])}return Rm=Fp=null,yi===1/0||Qa===1/0?[[NaN,NaN],[NaN,NaN]]:[[yi,Qa],[Ti,Vu]]}var pT,fL,dL,hL,pL,mL,gL,yL,PH,kH,$H,JFe,ZFe,ma,ga,ya,Gc={sphere:ho,point:ZZ,lineStart:s0e,lineEnd:o0e,polygonStart:function(){Gc.lineStart=RWt,Gc.lineEnd=NWt},polygonEnd:function(){Gc.lineStart=s0e,Gc.lineEnd=o0e}};function ZZ(e,t){e*=Sn,t*=Sn;var n=Ft(t);FI(n*Ft(e),n*$t(e),$t(t))}function FI(e,t,n){++pT,dL+=(e-dL)/pT,hL+=(t-hL)/pT,pL+=(n-pL)/pT}function s0e(){Gc.point=kWt}function kWt(e,t){e*=Sn,t*=Sn;var n=Ft(t);ma=n*Ft(e),ga=n*$t(e),ya=$t(t),Gc.point=$Wt,FI(ma,ga,ya)}function $Wt(e,t){e*=Sn,t*=Sn;var n=Ft(t),r=n*Ft(e),i=n*$t(e),s=$t(t),o=ic(Pa((o=ga*s-ya*i)*o+(o=ya*r-ma*s)*o+(o=ma*i-ga*r)*o),ma*r+ga*i+ya*s);fL+=o,mL+=o*(ma+(ma=r)),gL+=o*(ga+(ga=i)),yL+=o*(ya+(ya=s)),FI(ma,ga,ya)}function o0e(){Gc.point=ZZ}function RWt(){Gc.point=DWt}function NWt(){e5e(JFe,ZFe),Gc.point=ZZ}function DWt(e,t){JFe=e,ZFe=t,e*=Sn,t*=Sn,Gc.point=e5e;var n=Ft(t);ma=n*Ft(e),ga=n*$t(e),ya=$t(t),FI(ma,ga,ya)}function e5e(e,t){e*=Sn,t*=Sn;var n=Ft(t),r=n*Ft(e),i=n*$t(e),s=$t(t),o=ga*s-ya*i,a=ya*r-ma*s,u=ma*i-ga*r,l=SH(o,a,u),c=wu(l),f=l&&-c/l;PH.add(f*o),kH.add(f*a),$H.add(f*u),fL+=c,mL+=c*(ma+(ma=r)),gL+=c*(ga+(ga=i)),yL+=c*(ya+(ya=s)),FI(ma,ga,ya)}function LWt(e){pT=fL=dL=hL=pL=mL=gL=yL=0,PH=new Ea,kH=new Ea,$H=new Ea,Vh(e,Gc);var t=+PH,n=+kH,r=+$H,i=SH(t,n,r);return i<rL&&(t=mL,n=gL,r=yL,fL<Dt&&(t=dL,n=hL,r=pL),i=SH(t,n,r),i<rL)?[NaN,NaN]:[ic(n,t)*zi,wu(r/i)*zi]}function RH(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function NH(e,t){return zn(e)>An&&(e-=Math.round(e/Oa)*Oa),[e,t]}NH.invert=NH;function t5e(e,t,n){return(e%=Oa)?t||n?RH(u0e(e),l0e(t,n)):u0e(e):t||n?l0e(t,n):NH}function a0e(e){return function(t,n){return t+=e,zn(t)>An&&(t-=Math.round(t/Oa)*Oa),[t,n]}}function u0e(e){var t=a0e(e);return t.invert=a0e(-e),t}function l0e(e,t){var n=Ft(e),r=$t(e),i=Ft(t),s=$t(t);function o(a,u){var l=Ft(u),c=Ft(a)*l,f=$t(a)*l,d=$t(u),h=d*n+c*r;return[ic(f*i-h*s,c*n-d*r),wu(h*i+f*s)]}return o.invert=function(a,u){var l=Ft(u),c=Ft(a)*l,f=$t(a)*l,d=$t(u),h=d*i-f*s;return[ic(f*i+d*s,c*n+h*r),wu(h*n-c*r)]},o}function MWt(e){e=t5e(e[0]*Sn,e[1]*Sn,e.length>2?e[2]*Sn:0);function t(n){return n=e(n[0]*Sn,n[1]*Sn),n[0]*=zi,n[1]*=zi,n}return t.invert=function(n){return n=e.invert(n[0]*Sn,n[1]*Sn),n[0]*=zi,n[1]*=zi,n},t}function FWt(e,t,n,r,i,s){if(n){var o=Ft(t),a=$t(t),u=r*n;i==null?(i=t+r*Oa,s=t-u/2):(i=c0e(o,i),s=c0e(o,s),(r>0?i<s:i>s)&&(i+=r*Oa));for(var l,c=i;r>0?c>s:c<s;c-=u)l=lL([o,-a*Ft(c),-a*$t(c)]),e.point(l[0],l[1])}}function c0e(e,t){t=K1(t),t[0]-=e,cL(t);var n=HFe(-t[1]);return((-t[2]<0?-n:n)+Oa-Dt)%Oa}function n5e(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:ho,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function $$(e,t){return zn(e[0]-t[0])<Dt&&zn(e[1]-t[1])<Dt}function GP(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function r5e(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if($$(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Dt}s.push(v=new GP(g,p,null,!0)),o.push(v.o=new GP(g,null,v,!1)),s.push(v=new GP(y,p,null,!1)),o.push(v.o=new GP(y,null,v,!0))}}),!!s.length){for(o.sort(t),f0e(s),f0e(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function f0e(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Ej(e){return zn(e[0])<=An?e[0]:Ul(e[0])*((zn(e[0])+An)%Oa-An)}function BWt(e,t){var n=Ej(t),r=t[1],i=$t(r),s=[$t(n),-Ft(n),0],o=0,a=0,u=new Ea;i===1?r=Ri+Dt:i===-1&&(r=-Ri-Dt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=Ej(h),m=h[1]/2+iL,g=$t(m),y=Ft(m),v=0;v<d;++v,p=b,g=w,y=x,h=_){var _=f[v],b=Ej(_),E=_[1]/2+iL,w=$t(E),x=Ft(E),S=b-p,I=S>=0?1:-1,C=I*S,O=C>An,z=g*w;if(u.add(ic(z*I*$t(C),y*x+z*Ft(C))),o+=O?S+I*Oa:S,O^p>=n^b>=n){var N=Qw(K1(h),K1(_));cL(N);var $=Qw(s,N);cL($);var D=(O^S>=0?-1:1)*wu($[2]);(r>D||r===D&&(N[0]||N[1]))&&(a+=O^S>=0?1:-1)}}return(o<-Dt||o<Dt&&u<-rL)^a&1}function i5e(e,t,n,r){return function(i){var s=t(i),o=n5e(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=_,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=UFe(c);var b=BWt(l,r);c.length?(u||(i.polygonStart(),u=!0),r5e(c,zWt,b,n,i)):b&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(b,E){e(b,E)&&i.point(b,E)}function p(b,E){s.point(b,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(b,E){f.push([b,E]),a.point(b,E)}function v(){a.lineStart(),f=[]}function _(){y(f[0][0],f[0][1]),a.lineEnd();var b=a.clean(),E=o.result(),w,x=E.length,S,I,C;if(f.pop(),l.push(f),f=null,!!x){if(b&1){if(I=E[0],(S=I.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),w=0;w<S;++w)i.point((C=I[w])[0],C[1]);i.lineEnd()}return}x>1&&b&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(jWt))}}return d}}function jWt(e){return e.length>1}function zWt(e,t){return((e=e.x)[0]<0?e[1]-Ri-Dt:Ri-e[1])-((t=t.x)[0]<0?t[1]-Ri-Dt:Ri-t[1])}const d0e=i5e(function(){return!0},UWt,HWt,[-An,-Ri]);function UWt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?An:-An,u=zn(s-t);zn(u-An)<Dt?(e.point(t,n=(n+o)/2>0?Ri:-Ri),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=An&&(zn(t-r)<Dt&&(t-=r*Dt),zn(s-a)<Dt&&(s-=a*Dt),n=VWt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function VWt(e,t,n,r){var i,s,o=$t(e-n);return zn(o)>Dt?lx(($t(t)*(s=Ft(r))*$t(n)-$t(r)*(i=Ft(t))*$t(e))/(i*s*o)):(t+r)/2}function HWt(e,t,n,r){var i;if(e==null)i=n*Ri,r.point(-An,i),r.point(0,i),r.point(An,i),r.point(An,0),r.point(An,-i),r.point(0,-i),r.point(-An,-i),r.point(-An,0),r.point(-An,i);else if(zn(e[0]-t[0])>Dt){var s=e[0]<t[0]?An:-An;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function qWt(e){var t=Ft(e),n=2*Sn,r=t>0,i=zn(t)>Dt;function s(c,f,d,h){FWt(h,e,n,d,c,f)}function o(c,f){return Ft(c)*Ft(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],_,b=o(g,y),E=r?b?0:l(g,y):b?l(g+(g<0?An:-An),y):0;if(!f&&(p=h=b)&&c.lineStart(),b!==h&&(_=u(f,v),(!_||$$(f,_)||$$(v,_))&&(v[2]=1)),b!==h)m=0,b?(c.lineStart(),_=u(v,f),c.point(_[0],_[1])):(_=u(f,v),c.point(_[0],_[1],2),c.lineEnd()),f=_;else if(i&&f&&r^b){var w;!(E&d)&&(w=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(w[0][0],w[0][1]),c.point(w[1][0],w[1][1]),c.lineEnd()):(c.point(w[1][0],w[1][1]),c.lineEnd(),c.lineStart(),c.point(w[0][0],w[0][1],3)))}b&&(!f||!$$(f,v))&&c.point(v[0],v[1]),f=v,h=b,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=K1(c),p=K1(f),m=[1,0,0],g=Qw(h,p),y=qP(g,g),v=g[0],_=y-v*v;if(!_)return!d&&c;var b=t*y/_,E=-t*v/_,w=Qw(m,g),x=WP(m,b),S=WP(g,E);wj(x,S);var I=w,C=qP(x,I),O=qP(I,I),z=C*C-O*(qP(x,x)-1);if(!(z<0)){var N=Pa(z),$=WP(I,(-C-N)/O);if(wj($,x),$=lL($),!d)return $;var D=c[0],B=f[0],V=c[1],j=f[1],G;B<D&&(G=D,D=B,B=G);var U=B-D,P=zn(U-An)<Dt,k=P||U<Dt;if(!P&&j<V&&(G=V,V=j,j=G),k?P?V+j>0^$[1]<(zn($[0]-D)<Dt?V:j):V<=$[1]&&$[1]<=j:U>An^(D<=$[0]&&$[0]<=B)){var H=WP(I,(-C+N)/O);return wj(H,x),[$,lL(H)]}}}function l(c,f){var d=r?e:An-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return i5e(o,a,s,r?[0,-e]:[-An,e-An])}function WWt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var mT=1e9,YP=-mT;function s5e(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return zn(l[0]-e)<Dt?c>0?0:3:zn(l[0]-n)<Dt?c>0?2:1:zn(l[1]-t)<Dt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=n5e(),d,h,p,m,g,y,v,_,b,E,w,x={point:S,lineStart:z,lineEnd:N,polygonStart:C,polygonEnd:O};function S(D,B){i(D,B)&&c.point(D,B)}function I(){for(var D=0,B=0,V=h.length;B<V;++B)for(var j=h[B],G=1,U=j.length,P=j[0],k,H,M=P[0],F=P[1];G<U;++G)k=M,H=F,P=j[G],M=P[0],F=P[1],H<=r?F>r&&(M-k)*(r-H)>(F-H)*(e-k)&&++D:F<=r&&(M-k)*(r-H)<(F-H)*(e-k)&&--D;return D}function C(){c=f,d=[],h=[],w=!0}function O(){var D=I(),B=w&&D,V=(d=UFe(d)).length;(B||V)&&(l.polygonStart(),B&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),V&&r5e(d,a,D,s,l),l.polygonEnd()),c=l,d=h=p=null}function z(){x.point=$,h&&h.push(p=[]),E=!0,b=!1,v=_=NaN}function N(){d&&($(m,g),y&&b&&f.rejoin(),d.push(f.result())),x.point=S,b&&c.lineEnd()}function $(D,B){var V=i(D,B);if(h&&p.push([D,B]),E)m=D,g=B,y=V,E=!1,V&&(c.lineStart(),c.point(D,B));else if(V&&b)c.point(D,B);else{var j=[v=Math.max(YP,Math.min(mT,v)),_=Math.max(YP,Math.min(mT,_))],G=[D=Math.max(YP,Math.min(mT,D)),B=Math.max(YP,Math.min(mT,B))];WWt(j,G,e,t,n,r)?(b||(c.lineStart(),c.point(j[0],j[1])),c.point(G[0],G[1]),V||c.lineEnd(),w=!1):V&&(c.lineStart(),c.point(D,B),w=!1)}v=D,_=B,b=V}return x}}function h0e(e,t,n){var r=db(e,t-Dt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function p0e(e,t,n){var r=db(e,t-Dt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function GWt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return db(HP(r/c)*c,n,c).map(p).concat(db(HP(a/f)*f,o,f).map(m)).concat(db(HP(t/u)*u,e,u).filter(function(_){return zn(_%c)>Dt}).map(d)).concat(db(HP(s/l)*l,i,l).filter(function(_){return zn(_%f)>Dt}).map(h))}return y.lines=function(){return v().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),y.precision(g)):[[t,s],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],f=+_[1],y):[c,f]},y.stepMinor=function(_){return arguments.length?(u=+_[0],l=+_[1],y):[u,l]},y.precision=function(_){return arguments.length?(g=+_,d=h0e(s,i,90),h=p0e(t,e,g),p=h0e(a,o,90),m=p0e(r,n,g),y):g},y.extentMajor([[-180,-90+Dt],[180,90-Dt]]).extentMinor([[-180,-80-Dt],[180,80+Dt]])}const UA=e=>e;var xj=new Ea,DH=new Ea,o5e,a5e,LH,MH,zm={point:ho,lineStart:ho,lineEnd:ho,polygonStart:function(){zm.lineStart=YWt,zm.lineEnd=XWt},polygonEnd:function(){zm.lineStart=zm.lineEnd=zm.point=ho,xj.add(zn(DH)),DH=new Ea},result:function(){var e=xj/2;return xj=new Ea,e}};function YWt(){zm.point=KWt}function KWt(e,t){zm.point=u5e,o5e=LH=e,a5e=MH=t}function u5e(e,t){DH.add(MH*e-LH*t),LH=e,MH=t}function XWt(){u5e(o5e,a5e)}const m0e=zm;var Jw=1/0,vL=Jw,VA=-Jw,_L=VA,QWt={point:JWt,lineStart:ho,lineEnd:ho,polygonStart:ho,polygonEnd:ho,result:function(){var e=[[Jw,vL],[VA,_L]];return VA=_L=-(vL=Jw=1/0),e}};function JWt(e,t){e<Jw&&(Jw=e),e>VA&&(VA=e),t<vL&&(vL=t),t>_L&&(_L=t)}const bL=QWt;var FH=0,BH=0,gT=0,wL=0,EL=0,hb=0,jH=0,zH=0,yT=0,l5e,c5e,ld,cd,Hc={point:X1,lineStart:g0e,lineEnd:y0e,polygonStart:function(){Hc.lineStart=tGt,Hc.lineEnd=nGt},polygonEnd:function(){Hc.point=X1,Hc.lineStart=g0e,Hc.lineEnd=y0e},result:function(){var e=yT?[jH/yT,zH/yT]:hb?[wL/hb,EL/hb]:gT?[FH/gT,BH/gT]:[NaN,NaN];return FH=BH=gT=wL=EL=hb=jH=zH=yT=0,e}};function X1(e,t){FH+=e,BH+=t,++gT}function g0e(){Hc.point=ZWt}function ZWt(e,t){Hc.point=eGt,X1(ld=e,cd=t)}function eGt(e,t){var n=e-ld,r=t-cd,i=Pa(n*n+r*r);wL+=i*(ld+e)/2,EL+=i*(cd+t)/2,hb+=i,X1(ld=e,cd=t)}function y0e(){Hc.point=X1}function tGt(){Hc.point=rGt}function nGt(){f5e(l5e,c5e)}function rGt(e,t){Hc.point=f5e,X1(l5e=ld=e,c5e=cd=t)}function f5e(e,t){var n=e-ld,r=t-cd,i=Pa(n*n+r*r);wL+=i*(ld+e)/2,EL+=i*(cd+t)/2,hb+=i,i=cd*e-ld*t,jH+=i*(ld+e),zH+=i*(cd+t),yT+=i*3,X1(ld=e,cd=t)}const v0e=Hc;function d5e(e){this._context=e}d5e.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Oa);break}}},result:ho};var UH=new Ea,Sj,h5e,p5e,vT,_T,xL={point:ho,lineStart:function(){xL.point=iGt},lineEnd:function(){Sj&&m5e(h5e,p5e),xL.point=ho},polygonStart:function(){Sj=!0},polygonEnd:function(){Sj=null},result:function(){var e=+UH;return UH=new Ea,e}};function iGt(e,t){xL.point=m5e,h5e=vT=e,p5e=_T=t}function m5e(e,t){vT-=e,_T-=t,UH.add(Pa(vT*vT+_T*_T)),vT=e,_T=t}const _0e=xL;let b0e,SL,w0e,E0e;class x0e{constructor(t){this._append=t==null?g5e:sGt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==w0e||this._append!==SL){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,w0e=r,SL=this._append,E0e=this._,this._=i}this._+=E0e;break}}}result(){const t=this._;return this._="",t.length?t:null}}function g5e(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function sGt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return g5e;if(t!==b0e){const n=10**t;b0e=t,SL=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return SL}function y5e(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Vh(a,i(s))),s.result()}return o.area=function(a){return Vh(a,i(m0e)),m0e.result()},o.measure=function(a){return Vh(a,i(_0e)),_0e.result()},o.bounds=function(a){return Vh(a,i(bL)),bL.result()},o.centroid=function(a){return Vh(a,i(v0e)),v0e.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,UA):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new x0e(n)):new d5e(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new x0e(n)),o},o.projection(e).digits(n).context(t)}function TF(e){return function(t){var n=new VH;for(var r in e)n[r]=e[r];return n.stream=t,n}}function VH(){}VH.prototype={constructor:VH,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function eee(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Vh(n,e.stream(bL)),t(bL.result()),r!=null&&e.clipExtent(r),e}function AF(e,t,n){return eee(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function tee(e,t,n){return AF(e,[[0,0],t],n)}function nee(e,t,n){return eee(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function ree(e,t,n){return eee(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var S0e=16,oGt=Ft(30*Sn);function T0e(e,t){return+t?uGt(e,t):aGt(e)}function aGt(e){return TF({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function uGt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*t&&m--){var b=o+d,E=a+h,w=u+p,x=Pa(b*b+E*E+w*w),S=wu(w/=x),I=zn(zn(w)-1)<Dt||zn(s-f)<Dt?(s+f)/2:ic(E,b),C=e(I,S),O=C[0],z=C[1],N=O-r,$=z-i,D=v*N-y*$;(D*D/_>t||zn((y*N+v*$)/_-.5)>.3||o*d+a*h+u*p<oGt)&&(n(r,i,s,o,a,u,O,z,I,b/=x,E/=x,w,m,g),g.point(O,z),n(O,z,I,b,E,w,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:b,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(S,I){S=e(S,I),r.point(S[0],S[1])}function v(){f=NaN,g.point=_,r.lineStart()}function _(S,I){var C=K1([S,I]),O=e(S,I);n(f,d,c,h,p,m,f=O[0],d=O[1],c=S,h=C[0],p=C[1],m=C[2],S0e,r),r.point(f,d)}function b(){g.point=y,r.lineEnd()}function E(){v(),g.point=w,g.lineEnd=x}function w(S,I){_(i=S,I),s=f,o=d,a=h,u=p,l=m,g.point=_}function x(){n(f,d,c,h,p,m,s,o,i,a,u,l,S0e,r),g.lineEnd=b,b()}return g}}var lGt=TF({point:function(e,t){this.stream.point(e*Sn,t*Sn)}});function cGt(e){return TF({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function fGt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function A0e(e,t,n,r,i,s){if(!s)return fGt(e,t,n,r,i);var o=Ft(s),a=$t(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function ch(e){return v5e(function(){return e})()}function v5e(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=d0e,g=null,y,v,_,b=UA,E=.5,w,x,S,I,C;function O(D){return S(D[0]*Sn,D[1]*Sn)}function z(D){return D=S.invert(D[0],D[1]),D&&[D[0]*zi,D[1]*zi]}O.stream=function(D){return I&&C===D?I:I=lGt(cGt(c)(m(w(b(C=D)))))},O.preclip=function(D){return arguments.length?(m=D,p=void 0,$()):m},O.postclip=function(D){return arguments.length?(b=D,g=y=v=_=null,$()):b},O.clipAngle=function(D){return arguments.length?(m=+D?qWt(p=D*Sn):(p=null,d0e),$()):p*zi},O.clipExtent=function(D){return arguments.length?(b=D==null?(g=y=v=_=null,UA):s5e(g=+D[0][0],y=+D[0][1],v=+D[1][0],_=+D[1][1]),$()):g==null?null:[[g,y],[v,_]]},O.scale=function(D){return arguments.length?(n=+D,N()):n},O.translate=function(D){return arguments.length?(r=+D[0],i=+D[1],N()):[r,i]},O.center=function(D){return arguments.length?(s=D[0]%360*Sn,o=D[1]%360*Sn,N()):[s*zi,o*zi]},O.rotate=function(D){return arguments.length?(a=D[0]%360*Sn,u=D[1]%360*Sn,l=D.length>2?D[2]%360*Sn:0,N()):[a*zi,u*zi,l*zi]},O.angle=function(D){return arguments.length?(f=D%360*Sn,N()):f*zi},O.reflectX=function(D){return arguments.length?(d=D?-1:1,N()):d<0},O.reflectY=function(D){return arguments.length?(h=D?-1:1,N()):h<0},O.precision=function(D){return arguments.length?(w=T0e(x,E=D*D),$()):Pa(E)},O.fitExtent=function(D,B){return AF(O,D,B)},O.fitSize=function(D,B){return tee(O,D,B)},O.fitWidth=function(D,B){return nee(O,D,B)},O.fitHeight=function(D,B){return ree(O,D,B)};function N(){var D=A0e(n,0,0,d,h,f).apply(null,t(s,o)),B=A0e(n,r-D[0],i-D[1],d,h,f);return c=t5e(a,u,l),x=RH(t,B),S=RH(c,x),w=T0e(x,E),$()}function $(){return I=C=null,O}return function(){return t=e.apply(this,arguments),O.invert=t.invert&&z,N()}}function iee(e){var t=0,n=An/3,r=v5e(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Sn,n=s[1]*Sn):[t*zi,n*zi]},i}function dGt(e){var t=Ft(e);function n(r,i){return[r*t,$t(i)/t]}return n.invert=function(r,i){return[r/t,wu(i*t)]},n}function hGt(e,t){var n=$t(e),r=(n+$t(t))/2;if(zn(r)<Dt)return dGt(e);var i=1+n*(2*r-n),s=Pa(i)/r;function o(a,u){var l=Pa(i-2*r*$t(u))/r;return[l*$t(a*=r),s-l*Ft(a)]}return o.invert=function(a,u){var l=s-u,c=ic(a,zn(l))*Ul(l);return l*r<0&&(c-=An*Ul(a)*Ul(l)),[c/r,wu((i-(a*a+l*l)*r*r)/(2*r))]},o}function TL(){return iee(hGt).scale(155.424).center([0,33.6442])}function _5e(){return TL().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function pGt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function mGt(){var e,t,n=_5e(),r,i=TL().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=TL().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=pGt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Dt,m+.12*h+Dt],[p-.214*h-Dt,m+.234*h-Dt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Dt,m+.166*h+Dt],[p-.115*h-Dt,m+.234*h-Dt]]).stream(l),f()},c.fitExtent=function(d,h){return AF(c,d,h)},c.fitSize=function(d,h){return tee(c,d,h)},c.fitWidth=function(d,h){return nee(c,d,h)},c.fitHeight=function(d,h){return ree(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function b5e(e){return function(t,n){var r=Ft(t),i=Ft(n),s=e(r*i);return s===1/0?[2,0]:[s*i*$t(t),s*$t(n)]}}function BI(e){return function(t,n){var r=Pa(t*t+n*n),i=e(r),s=$t(i),o=Ft(i);return[ic(t*s,r*o),wu(r&&n*s/r)]}}var w5e=b5e(function(e){return Pa(2/(1+e))});w5e.invert=BI(function(e){return 2*wu(e/2)});function gGt(){return ch(w5e).scale(124.75).clipAngle(180-.001)}var E5e=b5e(function(e){return(e=HFe(e))&&e/$t(e)});E5e.invert=BI(function(e){return e});function yGt(){return ch(E5e).scale(79.4188).clipAngle(180-.001)}function CF(e,t){return[e,sL(JZ((Ri+t)/2))]}CF.invert=function(e,t){return[e,2*lx(VFe(t))-Ri]};function vGt(){return x5e(CF).scale(961/Oa)}function x5e(e){var t=ch(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=An*r(),d=t(MWt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===CF?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function KP(e){return JZ((Ri+e)/2)}function _Gt(e,t){var n=Ft(e),r=e===t?$t(e):sL(n/Ft(t))/sL(KP(t)/KP(e)),i=n*bj(KP(e),r)/r;if(!r)return CF;function s(o,a){i>0?a<-Ri+Dt&&(a=-Ri+Dt):a>Ri-Dt&&(a=Ri-Dt);var u=i/bj(KP(a),r);return[u*$t(r*o),i-u*Ft(r*o)]}return s.invert=function(o,a){var u=i-a,l=Ul(r)*Pa(o*o+u*u),c=ic(o,zn(u))*Ul(u);return u*r<0&&(c-=An*Ul(o)*Ul(u)),[c/r,2*lx(bj(i/l,1/r))-Ri]},s}function bGt(){return iee(_Gt).scale(109.5).parallels([30,30])}function AL(e,t){return[e,t]}AL.invert=AL;function wGt(){return ch(AL).scale(152.63)}function EGt(e,t){var n=Ft(e),r=e===t?$t(e):(n-Ft(t))/(t-e),i=n/r+e;if(zn(r)<Dt)return AL;function s(o,a){var u=i-a,l=r*o;return[u*$t(l),i-u*Ft(l)]}return s.invert=function(o,a){var u=i-a,l=ic(o,zn(u))*Ul(u);return u*r<0&&(l-=An*Ul(o)*Ul(u)),[l/r,i-Ul(r)*Pa(o*o+u*u)]},s}function xGt(){return iee(EGt).scale(131.154).center([0,13.9389])}var y2=1.340264,v2=-.081106,_2=893e-6,b2=.003796,CL=Pa(3)/2,SGt=12;function S5e(e,t){var n=wu(CL*$t(t)),r=n*n,i=r*r*r;return[e*Ft(n)/(CL*(y2+3*v2*r+i*(7*_2+9*b2*r))),n*(y2+v2*r+i*(_2+b2*r))]}S5e.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<SGt&&(a=n*(y2+v2*r+i*(_2+b2*r))-t,u=y2+3*v2*r+i*(7*_2+9*b2*r),n-=o=a/u,r=n*n,i=r*r*r,!(zn(o)<rL));++s);return[CL*e*(y2+3*v2*r+i*(7*_2+9*b2*r))/Ft(n),wu($t(n)/CL)]};function TGt(){return ch(S5e).scale(177.158)}function T5e(e,t){var n=Ft(t),r=Ft(e)*n;return[n*$t(e)/r,$t(t)/r]}T5e.invert=BI(lx);function AGt(){return ch(T5e).scale(144.049).clipAngle(60)}function CGt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=TF({point:function(b,E){var w=_([b,E]);this.stream.point(w[0],w[1])}}),m=UA,g,y;function v(){return d=e*r,h=e*i,g=y=null,_}function _(b){var E=b[0]*d,w=b[1]*h;if(s){var x=w*o-E*a;E=E*o+w*a,w=x}return[E+t,w+n]}return _.invert=function(b){var E=b[0]-t,w=b[1]-n;if(s){var x=w*o+E*a;E=E*o-w*a,w=x}return[E/d,w/h]},_.stream=function(b){return g&&y===b?g:g=p(m(y=b))},_.postclip=function(b){return arguments.length?(m=b,u=l=c=f=null,v()):m},_.clipExtent=function(b){return arguments.length?(m=b==null?(u=l=c=f=null,UA):s5e(u=+b[0][0],l=+b[0][1],c=+b[1][0],f=+b[1][1]),v()):u==null?null:[[u,l],[c,f]]},_.scale=function(b){return arguments.length?(e=+b,v()):e},_.translate=function(b){return arguments.length?(t=+b[0],n=+b[1],v()):[t,n]},_.angle=function(b){return arguments.length?(s=b%360*Sn,a=$t(s),o=Ft(s),v()):s*zi},_.reflectX=function(b){return arguments.length?(r=b?-1:1,v()):r<0},_.reflectY=function(b){return arguments.length?(i=b?-1:1,v()):i<0},_.fitExtent=function(b,E){return AF(_,b,E)},_.fitSize=function(b,E){return tee(_,b,E)},_.fitWidth=function(b,E){return nee(_,b,E)},_.fitHeight=function(b,E){return ree(_,b,E)},_}function A5e(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}A5e.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(zn(i)>Dt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function IGt(){return ch(A5e).scale(175.295)}function C5e(e,t){return[Ft(t)*$t(e),$t(t)]}C5e.invert=BI(wu);function OGt(){return ch(C5e).scale(249.5).clipAngle(90+Dt)}function I5e(e,t){var n=Ft(t),r=1+Ft(e)*n;return[n*$t(e)/r,$t(t)/r]}I5e.invert=BI(function(e){return 2*lx(e)});function PGt(){return ch(I5e).scale(250).clipAngle(142)}function O5e(e,t){return[sL(JZ((Ri+t)/2)),-e]}O5e.invert=function(e,t){return[-t,2*lx(VFe(e))-Ri]};function kGt(){var e=x5e(O5e),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var $Gt=Math.abs,HH=Math.cos,IL=Math.sin,RGt=1e-6,P5e=Math.PI,qH=P5e/2,C0e=NGt(2);function I0e(e){return e>1?qH:e<-1?-qH:Math.asin(e)}function NGt(e){return e>0?Math.sqrt(e):0}function DGt(e,t){var n=e*IL(t),r=30,i;do t-=i=(t+IL(t)-n)/(1+HH(t));while($Gt(i)>RGt&&--r>0);return t/2}function LGt(e,t,n){function r(i,s){return[e*i*HH(s=DGt(n,s)),t*IL(s)]}return r.invert=function(i,s){return s=I0e(s/t),[i/(e*HH(s)),I0e((2*s+IL(2*s))/n)]},r}var MGt=LGt(C0e/qH,C0e,P5e);function FGt(){return ch(MGt).scale(169.529)}const BGt=y5e(),WH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function jGt(e,t){return function n(){const r=t();return r.type=e,r.path=y5e().projection(r),r.copy=r.copy||function(){const i=n();return WH.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},Y6e(r)}}function see(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(OL[e]=jGt(e,t),this):OL[e]||null}function k5e(e){return e&&e.path||BGt}const OL={albers:_5e,albersusa:mGt,azimuthalequalarea:gGt,azimuthalequidistant:yGt,conicconformal:bGt,conicequalarea:TL,conicequidistant:xGt,equalEarth:TGt,equirectangular:wGt,gnomonic:AGt,identity:CGt,mercator:vGt,mollweide:FGt,naturalEarth1:IGt,orthographic:OGt,stereographic:PGt,transversemercator:kGt};for(const e in OL)see(e,OL[e]);function zGt(){}const Sh=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function $5e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),UGt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(VGt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,Sh[g<<1].forEach(_);++h<e-1;)m=g,g=u[h+1]>=l,Sh[m|g<<1].forEach(_);for(Sh[g<<0].forEach(_);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,Sh[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,Sh[m|g<<1|y<<2|v<<3].forEach(_);Sh[g|y<<3].forEach(_)}for(h=-1,y=u[p*e]>=l,Sh[y<<2].forEach(_);++h<e-1;)v=y,y=u[p*e+h+1]>=l,Sh[y<<2|v<<3].forEach(_);Sh[y<<3].forEach(_);function _(b){var E=[b[0][0]+h,b[0][1]+p],w=[b[1][0]+h,b[1][1]+p],x=o(E),S=o(w),I,C;(I=d[x])?(C=f[S])?(delete d[I.end],delete f[C.start],I===C?(I.ring.push(w),c(I.ring)):f[I.start]=d[C.end]={start:I.start,end:C.end,ring:I.ring.concat(C.ring)}):(delete d[I.end],I.ring.push(w),d[I.end=S]=I):(I=f[S])?(C=d[x])?(delete f[I.start],delete d[C.end],I===C?(I.ring.push(w),c(I.ring)):f[C.start]=d[I.end]={start:C.start,end:I.end,ring:C.ring.concat(I.ring)}):(delete f[I.start],I.ring.unshift(E),f[I.start=x]=I):f[x]=d[S]={start:x,end:S,ring:[E,w]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Te("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:zGt,r):n===a},r}function UGt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function VGt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=HGt(e,t[n]))return i;return 0}function HGt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(qGt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function qGt(e,t,n){var r;return WGt(e,t,n)&&GGt(e[r=+(e[0]===t[0])],n[r],t[r])}function WGt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function GGt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function R5e(e,t,n){return function(r){var i=Gd(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?RA(s,o,e):a/(e+1);return Fv(s+u,o,u)}}function oee(e){Ee.call(this,null,e)}oee.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};We(oee,Ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||na,s=$5e().smooth(e.smooth!==!1),o=e.thresholds||YGt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Ie(o)?o:o(c.values));KGt(f,c,l,e),f.forEach(d=>{u.push(Z4(l,dr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function YGt(e,t,n){const r=R5e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>_1(t(i).values)))}function KGt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(pn(i)&&(i=i(n,r)),pn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Jn(i)?i:i[0])||1,a=(Jn(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(N5e(t,o,a,u,l))}function N5e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function O0e(e,t,n){const r=e>=0?e:mJ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function Tj(e){return pn(e)?e:ra(+e)}function D5e(){var e=u=>u[0],t=u=>u[1],n=ex,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=O0e(r[0],u,e)>>o,f=O0e(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(b=>{const E=d+(+e(b)>>o),w=h+(+t(b)>>o);E>=0&&E<p&&w>=0&&w<m&&(g[E+w*p]+=+n(b))}),c>0&&f>0?(w_(p,m,g,y,c),E_(p,m,y,g,f),w_(p,m,g,y,c),E_(p,m,y,g,f),w_(p,m,g,y,c),E_(p,m,y,g,f)):c>0?(w_(p,m,g,y,c),w_(p,m,y,g,c),w_(p,m,g,y,c),v=y):f>0&&(E_(p,m,g,y,f),E_(p,m,y,g,f),E_(p,m,g,y,f),v=y);const _=l?Math.pow(2,-2*o):1/yMe(v);for(let b=0,E=p*m;b<E;++b)v[b]*=_;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=Tj(u),a):e},a.y=function(u){return arguments.length?(t=Tj(u),a):t},a.weight=function(u){return arguments.length?(n=Tj(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Te("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Te("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=nt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Te("invalid bandwidth"),r=u,a):r},a}function w_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function E_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function aee(e){Ee.call(this,null,e)}aee.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const XGt=["x","y","weight","size","cellSize","bandwidth"];function L5e(e,t){return XGt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}We(aee,Ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=QGt(r,e.groupby),s=(e.groupby||[]).map(Ni),o=L5e(D5e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>dr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function QGt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function uee(e){Ee.call(this,null,e)}uee.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};We(uee,Ee,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=$5e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||R5e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=L5e(D5e(),e)(i,!0),u=N5e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Ie(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(dr),n}});const GH="Feature",lee="FeatureCollection",JGt="MultiPoint";function cee(e){Ee.call(this,null,e)}cee.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};We(cee,Ee,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&na,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Yo(a))||s&&t.modified(Yo(s))||o&&t.modified(Yo(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:GH,geometry:{type:JGt,coordinates:r}})),this.value={type:lee,features:n}}});function fee(e){Ee.call(this,null,e)}fee.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};We(fee,Ee,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||na,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=k5e(e.projection),n.materialize().reflow()):o=i===na||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=ZGt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function ZGt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function dee(e){Ee.call(this,null,e)}dee.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};We(dee,Ee,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function hee(e){Ee.call(this,null,e)}hee.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};We(hee,Ee,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=eYt(k5e(e.projection),e.field||ec("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function eYt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function pee(e){Ee.call(this,[],e),this.generator=GWt()}pee.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};We(pee,Ee,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)pn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(JMe(n[0],i)):t.add.push(dr(i)),n[0]=i,t}});function mee(e){Ee.call(this,null,e)}mee.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};We(mee,Ee,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||na,s=nYt(e.opacity,e),o=tYt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?_1(n.map(l=>_1(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=hn({},l,u);r||(f.$max=_1(c.values||[])),l[a]=rYt(c,f,o.dep?o:ra(o(f)),s.dep?s:ra(s(f)))}),t.reflow(!0).modifies(a)}});function tYt(e,t){let n;return pn(e)?(n=r=>Wg(e(r,t)),n.dep=M5e(e)):n=ra(Wg(e||"#888")),n}function nYt(e,t){let n;return pn(e)?(n=r=>e(r,t),n.dep=M5e(e)):e?n=ra(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function M5e(e){if(!pn(e))return!1;const t=cf(Yo(e));return t.$x||t.$y||t.$value||t.$max}function rYt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:jm,d=kg(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,_=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+_);const b=n(t);m[y+0]=b.r,m[y+1]=b.g,m[y+2]=b.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function F5e(e){Ee.call(this,null,e),this.modified(!0)}We(F5e,Ee,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=sYt(e.type),WH.forEach(r=>{e[r]!=null&&P0e(n,r,e[r])})):WH.forEach(r=>{e.modified(r)&&P0e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&iYt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function iYt(e,t){const n=oYt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function sYt(e){const t=see((e||"mercator").toLowerCase());return t||Te("Unrecognized projection type: "+e),t()}function P0e(e,t,n){pn(e[t])&&e[t](n)}function oYt(e){return e=nt(e),e.length===1?e[0]:{type:lee,features:e.reduce((t,n)=>t.concat(aYt(n)),[])}}function aYt(e){return e.type===lee?e.features:nt(e).filter(t=>t!=null).map(t=>t.type===GH?t:{type:GH,geometry:t})}const uYt=Object.freeze(Object.defineProperty({__proto__:null,contour:uee,geojson:cee,geopath:fee,geopoint:dee,geoshape:hee,graticule:pee,heatmap:mee,isocontour:oee,kde2d:aee,projection:F5e},Symbol.toStringTag,{value:"Module"})),k0e={center:QSt,collide:gTt,nbody:CTt,link:vTt,x:ITt,y:OTt},bT="forces",YH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],lYt=["static","iterations"],B5e=["x","y","vx","vy"];function gee(e){Ee.call(this,null,e)}gee.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:B5e}]};We(gee,Ee,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(YH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&j5e(n,e,0,t)):(this.value=n=fYt(t.source,e),n.on("tick",cYt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(lYt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==bT||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(B5e)}});function cYt(e,t){return()=>e.touch(t).run()}function fYt(e,t){const n=ATt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),j5e(n,t,!0).on("end",()=>s=!0)}function j5e(e,t,n,r){var i=nt(t.forces),s,o,a,u;for(s=0,o=YH.length;s<o;++s)a=YH[s],a!==bT&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=bT+s,a=n||t.modified(bT,s)?hYt(i[s]):r&&dYt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(bT+s,null);return e.numForces=i.length,e}function dYt(e,t){var n,r;for(n in e)if(pn(r=e[n])&&t.modified(Yo(r)))return 1;return 0}function hYt(e){var t,n;Nt(k0e,e.force)||Te("Unrecognized force: "+e.force),t=k0e[e.force]();for(n in e)pn(t[n])&&pYt(t[n],e[n],e);return t}function pYt(e,t,n){e(pn(t)?r=>t(r,n):t)}const mYt=Object.freeze(Object.defineProperty({__proto__:null,force:gee},Symbol.toStringTag,{value:"Module"}));function KH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function yee(e){Ee.call(this,null,e)}yee.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const gYt=e=>e.values;We(yee,Ee,{transform(e,t){t.source||Te("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&J4(o.data)&&i.rem.push(o.data)}),this.value=s=J6({values:nt(e.keys).reduce((o,a)=>(o.key(a),o),yYt()).entries(i.source)},gYt),n&&s.each(o=>{o.children&&(o=dr(o.data),i.add.push(o),i.source.push(o))}),KH(s,kt,kt)),i.source.root=s,i}});function yYt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function rm(e){Ee.call(this,null,e)}const vYt=(e,t)=>e.parent===t.parent?1:2;We(rm,Ee,{transform(e,t){(!t.source||!t.source.root)&&Te(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Bv(e.sort,o=>o.data)),_Yt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?vYt:ex);try{this.value=n(i)}catch(o){Te(o)}return i.each(o=>bYt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function _Yt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function bYt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const XH=["x","y","r","depth","children"];function vee(e){rm.call(this,e)}vee.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:XH.length,default:XH}]};We(vee,rm,{layout:WPe,params:["radius","size","padding"],fields:XH});const QH=["x0","y0","x1","y1","depth","children"];function _ee(e){rm.call(this,e)}_ee.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:QH.length,default:QH}]};We(_ee,rm,{layout:w2t,params:["size","round","padding"],fields:QH});function bee(e){Ee.call(this,null,e)}bee.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};We(bee,Ee,{transform(e,t){t.source||Te("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?KH(qde().id(e.key).parentId(e.parentKey)(i.source),e.key,tc):KH(qde()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const $0e={tidy:k2t,cluster:HTt},JH=["x","y","depth","children"];function wee(e){rm.call(this,e)}wee.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:JH.length,default:JH}]};We(wee,rm,{layout(e){const t=e||"tidy";if(Nt($0e,t))return $0e[t]();Te("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:JH});function Eee(e){Ee.call(this,[],e)}Eee.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};We(Eee,Ee,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Te("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[kt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[kt(a)]&&s[kt(u)]&&i.add.push(dr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[kt(o)]=1),n.forEach(o=>{(s[kt(o.source)]||s[kt(o.target)])&&i.mod.push(o)})),i}});const R0e={binary:R2t,dice:rI,slice:Z6,slicedice:N2t,squarify:XPe,resquarify:D2t},ZH=["x0","y0","x1","y1","depth","children"];function xee(e){rm.call(this,e)}xee.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:ZH.length,default:ZH}]};We(xee,rm,{layout(){const e=$2t();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Nt(R0e,t)?e.tile(R0e[t]):Te("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:ZH});const wYt=Object.freeze(Object.defineProperty({__proto__:null,nest:yee,pack:vee,partition:_ee,stratify:bee,tree:wee,treelinks:Eee,treemap:xee},Symbol.toStringTag,{value:"Module"})),Aj=4278190080;function EYt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function xYt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=kg(s,o).getContext("2d"),l=kg(s,o).getContext("2d"),c=a&&kg(s,o).getContext("2d");n.forEach(S=>R$(u,S,!1)),R$(l,t,!1),a&&R$(c,t,!0);const f=Cj(u,s,o),d=Cj(l,s,o),h=a&&Cj(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,_,b,E,w,x;for(y=0;y<o;++y)for(g=0;g<s;++g)b=y*s+g,E=f[b]&Aj,x=d[b]&Aj,w=a&&h[b]&Aj,(E||w||x)&&(v=e(g),_=e(y),!i&&(E||x)&&p.set(v,_),a&&(E||w)&&m.set(v,_));return[p,m]}function Cj(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function R$(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>R$(e,s.items,n))}):cl[r].draw(e,{items:n?t.map(SYt):t})}function SYt(e){const t=Z4(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Th=5,la=31,HA=32,Nm=new Uint32Array(HA+1),Fc=new Uint32Array(HA+1);Fc[0]=0;Nm[0]=~Fc[0];for(let e=1;e<=HA;++e)Fc[e]=Fc[e-1]<<1|1,Nm[e]=~Fc[e];function TYt(e,t){const n=new Uint32Array(~~((e*t+HA)/HA));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Th]&1<<(a&la)},set:(s,o)=>{const a=o*e+s;r(a>>>Th,1<<(a&la))},clear:(s,o)=>{const a=o*e+s;i(a>>>Th,~(1<<(a&la)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Th,h=f>>>Th,d===h){if(n[d]&Nm[c&la]&Fc[(f&la)+1])return!0}else{if(n[d]&Nm[c&la]||n[h]&Fc[(f&la)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Th,d=c>>>Th,f===d)r(f,Nm[l&la]&Fc[(c&la)+1]);else for(r(f,Nm[l&la]),r(d,Fc[(c&la)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Th,d=c>>>Th,f===d)i(f,Fc[l&la]|Nm[(c&la)+1]);else for(i(f,Fc[l&la]),i(d,Nm[(c&la)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function AYt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>TYt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function CYt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=el.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let _=0;_<u;++_)d=a[_].x,p=a[_].y,h=a[_].x2===void 0?d:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function PL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function ag(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function IYt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!PL(p,m,d,h,i,s)&&!ag(e,p,m,h,d,g,o,a)&&!ag(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,ag(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=el.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,_,b,E,w,x,S,I,C,O,z,N,$,D,B,V,j;for(let G=0;G<f;++G){for(v=c[G].x,b=c[G].y,_=c[G].x2===void 0?v:c[G].x2,E=c[G].y2===void 0?b:c[G].y2,v>_&&(j=v,v=_,_=j),b>E&&(j=b,b=E,E=j),C=e(v),z=e(_),O=~~((C+z)/2),N=e(b),D=e(E),$=~~((N+D)/2),S=O;S>=C;--S)for(I=$;I>=N;--I)V=u(S,I,p,h,d),V&&([l.x,l.y,p,m]=V);for(S=O;S<=z;++S)for(I=$;I<=D;++I)V=u(S,I,p,h,d),V&&([l.x,l.y,p,m]=V);!m&&!n&&(B=Math.abs(_-v+E-b),w=(v+_)/2,x=(b+E)/2,B>=y&&!PL(w,x,h,d,i,s)&&!ag(e,w,x,d,h,d,o,null)&&(y=B,l.x=w,l.y=x,g=!0))}return m||g?(w=h/2,x=d/2,o.setRange(e(l.x-w),e(l.y-x),e(l.x+w),e(l.y+x)),l.align="center",l.baseline="middle",!0):!1}}const OYt=[-1,-1,1,1],PYt=[-1,1,-1,1];function kYt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=el.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,_,b,E,w,x,S,I,C,O,z,N,$;for(let D=0;D<f;++D){for(_=c[D].x,E=c[D].y,b=c[D].x2===void 0?_:c[D].x2,w=c[D].y2===void 0?E:c[D].y2,p.push([e((_+b)/2),e((E+w)/2)]);p.length;)if([I,C]=p.pop(),!(o.get(I,C)||a.get(I,C)||u.get(I,C))){u.set(I,C);for(let B=0;B<4;++B)x=I+OYt[B],S=C+PYt[B],u.outOfBounds(x,S,x,S)||p.push([x,S]);if(x=e.invert(I),S=e.invert(C),O=m,z=s,!PL(x,S,h,d,i,s)&&!ag(e,x,S,d,h,O,o,a)&&!ag(e,x,S,d,h,d,o,null)){for(;z-O>=1;)N=(O+z)/2,ag(e,x,S,d,h,N,o,a)?z=N:O=N;O>m&&(l.x=x,l.y=S,m=O,g=!0)}}!g&&!n&&($=Math.abs(b-_+w-E),x=(_+b)/2,S=(E+w)/2,$>=v&&!PL(x,S,h,d,i,s)&&!ag(e,x,S,d,h,d,o,null)&&(v=$,l.x=x,l.y=S,y=!0))}return g||y?(x=h/2,S=d/2,o.setRange(e(l.x-x),e(l.y-S),e(l.x+x),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const $Yt=["right","center","left"],RYt=["bottom","middle","top"];function NYt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,_,b,E,w,x,S,I,C,O;for(let z=0;z<u;++z){if(h=(n[z]&3)-1,p=(n[z]>>>2&3)-1,m=h===0&&p===0||r[z]<0,g=h&&p?Math.SQRT1_2:1,y=r[z]<0?-1:1,v=c[1+h]+r[z]*h*g,x=c[4+p]+y*f*p/2+r[z]*p*g,b=x-f/2,E=x+f/2,S=e(v),C=e(b),O=e(E),!d)if(N0e(S,S,C,O,o,a,v,v,b,E,c,m))d=el.width(l.datum,l.datum.text);else continue;if(w=v+y*d*h/2,v=w-d/2,_=w+d/2,S=e(v),I=e(_),N0e(S,I,C,O,o,a,v,_,b,E,c,m))return l.x=h?h*y<0?_:v:w,l.y=p?p*y<0?E:b:x,l.align=$Yt[h*y+1],l.baseline=RYt[p*y+1],o.setRange(S,C,I,O),!0}return!1}}function N0e(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const Ij=0,Oj=4,Pj=8,kj=0,$j=1,Rj=2,DYt={"top-left":Ij+kj,top:Ij+$j,"top-right":Ij+Rj,left:Oj+kj,middle:Oj+$j,right:Oj+Rj,"bottom-left":Pj+kj,bottom:Pj+$j,"bottom-right":Pj+Rj},LYt={naive:CYt,"reduced-search":IYt,floodfill:kYt};function MYt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=FYt(r,f),h=BYt(i,f),p=jYt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=zYt(p,m,a,u),v=l===null||l===1/0,_=g&&c==="naive";let b=-1,E=-1;const w=e.map(C=>{const O=v?el.width(C,C.text):void 0;return b=Math.max(b,O),E=Math.max(E,C.fontSize),{datum:C,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(C),textWidth:O}});l=l===null||l===1/0?Math.max(b,E)+Math.max(...r):l;const x=AYt(t[0],t[1],l);let S;if(!_){n&&w.sort((z,N)=>n(z.datum,N.datum));let C=!1;for(let z=0;z<h.length&&!C;++z)C=h[z]===5||d[z]<0;const O=(p&&o||g)&&e.map(z=>z.datum);S=s.length||O?xYt(x,O||[],s,C,g):EYt(x,o&&w)}const I=g?LYt[c](x,S,o,u):NYt(x,S,h,d);return w.forEach(C=>C.opacity=+I(C)),w}function FYt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function BYt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=DYt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function jYt(e){return e&&e.mark&&e.mark.marktype}function zYt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const eq=["x","y","opacity","align","baseline"],z5e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function See(e){Ee.call(this,null,e)}See.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:z5e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:eq.length,default:eq}]};We(See,Ee,{transform(e,t){function n(s){const o=e[s];return pn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Te("Size parameter should be specified as a [width, height] array.");const i=e.as||eq;return MYt(t.materialize(t.SOURCE).source||[],e.size,e.sort,nt(e.offset==null?1:e.offset),nt(e.anchor||z5e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const UYt=Object.freeze(Object.defineProperty({__proto__:null,label:See},Symbol.toStringTag,{value:"Module"}));function U5e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Tee(e){Ee.call(this,null,e)}Tee.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};We(Tee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=U5e(r,e.groupby),s=(e.groupby||[]).map(Ni),o=s.length,a=e.as||[Ni(e.x),Ni(e.y)],u=[];i.forEach(l=>{g6e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(dr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const tq={constant:CJ,linear:IJ,log:d6e,exp:h6e,pow:p6e,quad:OJ,poly:m6e},VYt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Aee(e){Ee.call(this,null,e)}Aee.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(tq)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};We(Aee,Ee,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=U5e(r,e.groupby),s=(e.groupby||[]).map(Ni),o=e.method||"linear",a=e.order==null?3:e.order,u=VYt(o,a),l=e.as||[Ni(e.x),Ni(e.y)],c=tq[o],f=[];let d=e.extent;Nt(tq,o)||Te("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(dr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Gd(h,e.x),y=v=>{const _={};for(let b=0;b<s.length;++b)_[s[b]]=h.dims[b];_[l[0]]=v[0],_[l[1]]=v[1],f.push(dr(_))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):oF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const HYt=Object.freeze(Object.defineProperty({__proto__:null,loess:Tee,regression:Aee},Symbol.toStringTag,{value:"Module"})),D0e=1e-6;class r1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>D0e||Math.abs(this._y1-s)>D0e)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class nq{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let qYt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,_;m<y;m+=3,g+=2){const b=r[m]*2,E=r[m+1]*2,w=r[m+2]*2,x=t[b],S=t[b+1],I=t[E],C=t[E+1],O=t[w],z=t[w+1],N=I-x,$=C-S,D=O-x,B=z-S,V=(N*B-$*D)*2;if(Math.abs(V)<1e-9){if(s===void 0){s=o=0;for(const G of n)s+=t[G*2],o+=t[G*2+1];s/=n.length,o/=n.length}const j=1e9*Math.sign((s-x)*B-(o-S)*D);v=(x+O)/2-j*B,_=(S+z)/2+j*D}else{const j=1/V,G=N*N+$*$,U=D*D+B*B;v=x+(B*G-$*U)*j,_=S+(N*U-D*G)*j}a[g]=v,a[g+1]=_}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new r1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new r1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new r1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new nq;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const WYt=2*Math.PI,x_=Math.pow;function GYt(e){return e[0]}function YYt(e){return e[1]}function KYt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function XYt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Cee{static from(t,n=GYt,r=YYt,i){return new Cee("length"in t?QYt(t,n,r,i):Float64Array.from(JYt(t,n,r,i)))}constructor(t){this._delaunator=new ID(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&KYt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=XYt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new ID(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new qYt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=x_(n-l[t*2],2)+x_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=x_(n-l[p*2],2)+x_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&x_(n-l[h*2],2)+x_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new r1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new r1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,WYt)}return r&&r.value()}renderHull(t){const n=t==null?t=new r1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new nq;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new r1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new nq;return this.renderTriangle(t,n),n.value()}}function QYt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*JYt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function Iee(e){Ee.call(this,null,e)}Iee.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const ZYt=[-1e5,-1e5,1e5,1e5];We(Iee,Ee,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:ZYt;const s=this.value=Cee.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!tKt(u)?eKt(u):null}return t.reflow(e.modified()).modifies(n)}});function eKt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function tKt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const nKt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Iee},Symbol.toStringTag,{value:"Module"}));var Nj=Math.PI/180,wT=64,N$=2048;function rKt(){var e=[256,256],t,n,r,i,s,o,a,u=V5e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(kg()),m=lKt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,_=[],b=l.map(w=>({text:t(w),font:n(w),style:i(w),weight:s(w),rotate:o(w),size:~~(r(w)+1e-14),padding:a(w),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:w})).sort((w,x)=>x.size-w.size);++v<y;){var E=b[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,iKt(p,E,b,v),E.hasText&&h(m,E,g)&&(_.push(E),g?oKt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return _};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(wT<<5)/m,p.height=N$/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,_=Math.sqrt(e[0]*e[0]+e[1]*e[1]),b=u(e),E=c()<.5?1:-1,w=-E,x,S,I;(x=b(w+=E))&&(S=~~x[0],I=~~x[1],!(Math.min(Math.abs(S),Math.abs(I))>=_));)if(m.x=y+S,m.y=v+I,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!sKt(m,p,e[0]))&&(!g||aKt(m,g))){for(var C=m.sprite,O=m.width>>5,z=e[0]>>5,N=m.x-(O<<4),$=N&127,D=32-$,B=m.y1-m.y0,V=(m.y+m.y0)*z+(N>>5),j,G=0;G<B;G++){j=0;for(var U=0;U<=O;U++)p[V+U]|=j<<D|(U<O?(j=C[G*O+U])>>>$:0);V+=z}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=ry(p),f):n},f.fontStyle=function(p){return arguments.length?(i=ry(p),f):i},f.fontWeight=function(p){return arguments.length?(s=ry(p),f):s},f.rotate=function(p){return arguments.length?(o=ry(p),f):o},f.text=function(p){return arguments.length?(t=ry(p),f):t},f.spiral=function(p){return arguments.length?(u=cKt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=ry(p),f):r},f.padding=function(p){return arguments.length?(a=ry(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function iKt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(wT<<5)/s,N$/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*Nj),g=Math.cos(t.rotate*Nj),y=c*g,v=c*m,_=d*g,b=d*m;c=Math.max(Math.abs(y+b),Math.abs(y-b))+31>>5<<5,d=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=wT<<5&&(o=0,a+=u,u=0),a+d>=N$)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*Nj),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(wT<<5)/s,N$/s).data,w=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)w[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var x=0,S=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var I=f*p+(h>>5),C=E[(a+p)*(wT<<5)+(o+h)<<2]?1<<31-h%32:0;w[I]|=C,x|=C}x?S=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+S,t.sprite=w.slice(0,(t.y1-t.y0)*f)}}}function sKt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function oKt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function aKt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function V5e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function uKt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function lKt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function ry(e){return typeof e=="function"?e:function(){return e}}var cKt={archimedean:V5e,rectangular:uKt};const H5e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],fKt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Oee(e){Ee.call(this,rKt(),e)}Oee.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:H5e}]};We(Oee,Ee,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Te("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return pn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||fKt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||H5e;let a=e.fontSize||14,u;if(pn(a)?u=e.fontSizeRange:a=ra(a),u){const p=a,m=or("sqrt")().domain(Gd(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(rc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const dKt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Oee},Symbol.toStringTag,{value:"Module"})),hKt=e=>new Uint8Array(e),pKt=e=>new Uint16Array(e),w2=e=>new Uint32Array(e);function mKt(){let e=8,t=[],n=w2(0),r=XP(0,e),i=XP(0,e);return{data:()=>t,seen:()=>n=gKt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=XP(s,e,r),i=XP(s,e))}}}function gKt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function XP(e,t,n){const r=(t<257?hKt:t<65537?pKt:w2)(e);return n&&r.set(n),r}function L0e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function M0e(){let e=w2(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=w2(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=yKt(h,d),c)p=t,m=e,t=Array(c+f),e=w2(c+f),vKt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[Ajt(u,a[0],0,l),z3(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function yKt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Pjt(e,t)}function vKt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Pee(e){Ee.call(this,mKt(),e),this._indices=null,this._dims=null}Pee.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};We(Pee,Ee,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=M0e()),s.push(L0e(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,_,b,E,w,x;if(l.set(u),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(b={},v=t.mod,E=0,w=v.length;E<w;++E)b[v[E]._index]=1;for(E=0;E<h;++E)x=r[E],(!o[E]||e.modified("fields",E)||t.modified(x.fields))&&(y=x.fname,(m=p[y])||(s[y]=g=M0e(),p[y]=m=g.insert(x,t.source,0)),o[E]=L0e(g,E,i[E]).onAdd(m,u));for(E=0,w=a.data().length;E<w;++E)_[E]||(l[E]!==u[E]?f.push(E):b[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function kee(e){Ee.call(this,null,e)}kee.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};We(kee,Ee,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const _Kt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Pee,resolvefilter:kee},Symbol.toStringTag,{value:"Module"})),bKt="RawCode",Q1="Literal",wKt="Property",EKt="Identifier",xKt="ArrayExpression",SKt="BinaryExpression",q5e="CallExpression",TKt="ConditionalExpression",AKt="LogicalExpression",CKt="MemberExpression",IKt="ObjectExpression",OKt="UnaryExpression";function Sf(e){this.type=e}Sf.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=PKt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function PKt(e){switch(e.type){case xKt:return e.elements;case SKt:case AKt:return[e.left,e.right];case q5e:return[e.callee].concat(e.arguments);case TKt:return[e.test,e.consequent,e.alternate];case CKt:return[e.object,e.property];case IKt:return e.properties;case wKt:return[e.key,e.value];case OKt:return[e.argument];case EKt:case Q1:case bKt:default:return[]}}var fh,xt,xe,Xo,_r,IF=1,jI=2,J1=3,j0=4,OF=5,Uv=6,Ya=7,zI=8,kKt=9;fh={};fh[IF]="Boolean";fh[jI]="<end>";fh[J1]="Identifier";fh[j0]="Keyword";fh[OF]="Null";fh[Uv]="Numeric";fh[Ya]="Punctuator";fh[zI]="String";fh[kKt]="RegularExpression";var $Kt="ArrayExpression",RKt="BinaryExpression",NKt="CallExpression",DKt="ConditionalExpression",W5e="Identifier",LKt="Literal",MKt="LogicalExpression",FKt="MemberExpression",BKt="ObjectExpression",jKt="Property",zKt="UnaryExpression",zs="Unexpected token %0",UKt="Unexpected number",VKt="Unexpected string",HKt="Unexpected identifier",qKt="Unexpected reserved word",WKt="Unexpected end of input",rq="Invalid regular expression",Dj="Invalid regular expression: missing /",G5e="Octal literals are not allowed in strict mode.",GKt="Duplicate data property in object literal not allowed in strict mode",po="ILLEGAL",qA="Disabled.",YKt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),KKt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function PF(e,t){if(!e)throw new Error("ASSERT: "+t)}function Lh(e){return e>=48&&e<=57}function $ee(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function E2(e){return"01234567".indexOf(e)>=0}function XKt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function WA(e){return e===10||e===13||e===8232||e===8233}function UI(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&YKt.test(String.fromCharCode(e))}function kL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&KKt.test(String.fromCharCode(e))}const QKt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Y5e(){for(;xe<Xo;){const e=xt.charCodeAt(xe);if(XKt(e)||WA(e))++xe;else break}}function iq(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)xe<Xo&&$ee(xt[xe])?(r=xt[xe++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ir({},zs,po);return String.fromCharCode(i)}function JKt(){var e,t,n,r;for(e=xt[xe],t=0,e==="}"&&ir({},zs,po);xe<Xo&&(e=xt[xe++],!!$ee(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ir({},zs,po),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function K5e(){var e,t;for(e=xt.charCodeAt(xe++),t=String.fromCharCode(e),e===92&&(xt.charCodeAt(xe)!==117&&ir({},zs,po),++xe,e=iq("u"),(!e||e==="\\"||!UI(e.charCodeAt(0)))&&ir({},zs,po),t=e);xe<Xo&&(e=xt.charCodeAt(xe),!!kL(e));)++xe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),xt.charCodeAt(xe)!==117&&ir({},zs,po),++xe,e=iq("u"),(!e||e==="\\"||!kL(e.charCodeAt(0)))&&ir({},zs,po),t+=e);return t}function ZKt(){var e,t;for(e=xe++;xe<Xo;){if(t=xt.charCodeAt(xe),t===92)return xe=e,K5e();if(kL(t))++xe;else break}return xt.slice(e,xe)}function eXt(){var e,t,n;return e=xe,t=xt.charCodeAt(xe)===92?K5e():ZKt(),t.length===1?n=J1:QKt.hasOwnProperty(t)?n=j0:t==="null"?n=OF:t==="true"||t==="false"?n=IF:n=J1,{type:n,value:t,start:e,end:xe}}function Lj(){var e=xe,t=xt.charCodeAt(xe),n,r=xt[xe],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++xe,{type:Ya,value:String.fromCharCode(t),start:e,end:xe};default:if(n=xt.charCodeAt(xe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return xe+=2,{type:Ya,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:xe};case 33:case 61:return xe+=2,xt.charCodeAt(xe)===61&&++xe,{type:Ya,value:xt.slice(e,xe),start:e,end:xe}}}if(o=xt.substr(xe,4),o===">>>=")return xe+=4,{type:Ya,value:o,start:e,end:xe};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return xe+=3,{type:Ya,value:s,start:e,end:xe};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return xe+=2,{type:Ya,value:i,start:e,end:xe};if(i==="//"&&ir({},zs,po),"<>=!+-*%&|^/".indexOf(r)>=0)return++xe,{type:Ya,value:r,start:e,end:xe};ir({},zs,po)}function tXt(e){let t="";for(;xe<Xo&&$ee(xt[xe]);)t+=xt[xe++];return t.length===0&&ir({},zs,po),UI(xt.charCodeAt(xe))&&ir({},zs,po),{type:Uv,value:parseInt("0x"+t,16),start:e,end:xe}}function nXt(e){let t="0"+xt[xe++];for(;xe<Xo&&E2(xt[xe]);)t+=xt[xe++];return(UI(xt.charCodeAt(xe))||Lh(xt.charCodeAt(xe)))&&ir({},zs,po),{type:Uv,value:parseInt(t,8),octal:!0,start:e,end:xe}}function F0e(){var e,t,n;if(n=xt[xe],PF(Lh(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=xe,e="",n!=="."){if(e=xt[xe++],n=xt[xe],e==="0"){if(n==="x"||n==="X")return++xe,tXt(t);if(E2(n))return nXt(t);n&&Lh(n.charCodeAt(0))&&ir({},zs,po)}for(;Lh(xt.charCodeAt(xe));)e+=xt[xe++];n=xt[xe]}if(n==="."){for(e+=xt[xe++];Lh(xt.charCodeAt(xe));)e+=xt[xe++];n=xt[xe]}if(n==="e"||n==="E")if(e+=xt[xe++],n=xt[xe],(n==="+"||n==="-")&&(e+=xt[xe++]),Lh(xt.charCodeAt(xe)))for(;Lh(xt.charCodeAt(xe));)e+=xt[xe++];else ir({},zs,po);return UI(xt.charCodeAt(xe))&&ir({},zs,po),{type:Uv,value:parseFloat(e),start:t,end:xe}}function rXt(){var e="",t,n,r,i,s=!1;for(t=xt[xe],PF(t==="'"||t==='"',"String literal must starts with a quote"),n=xe,++xe;xe<Xo;)if(r=xt[xe++],r===t){t="";break}else if(r==="\\")if(r=xt[xe++],!r||!WA(r.charCodeAt(0)))switch(r){case"u":case"x":xt[xe]==="{"?(++xe,e+=JKt()):e+=iq(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:E2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),xe<Xo&&E2(xt[xe])&&(s=!0,i=i*8+"01234567".indexOf(xt[xe++]),"0123".indexOf(r)>=0&&xe<Xo&&E2(xt[xe])&&(i=i*8+"01234567".indexOf(xt[xe++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&xt[xe]===`
`&&++xe;else{if(WA(r.charCodeAt(0)))break;e+=r}return t!==""&&ir({},zs,po),{type:zI,value:e,octal:s,start:n,end:xe}}function iXt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ir({},rq)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ir({},rq)}try{return new RegExp(e,t)}catch{return null}}function sXt(){var e,t,n,r,i;for(e=xt[xe],PF(e==="/","Regular expression literal must start with a slash"),t=xt[xe++],n=!1,r=!1;xe<Xo;)if(e=xt[xe++],t+=e,e==="\\")e=xt[xe++],WA(e.charCodeAt(0))&&ir({},Dj),t+=e;else if(WA(e.charCodeAt(0)))ir({},Dj);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ir({},Dj),i=t.substr(1,t.length-2),{value:i,literal:t}}function oXt(){var e,t,n;for(t="",n="";xe<Xo&&(e=xt[xe],!!kL(e.charCodeAt(0)));)++xe,e==="\\"&&xe<Xo?ir({},zs,po):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ir({},rq,n),{value:n,literal:t}}function aXt(){var e,t,n,r;return _r=null,Y5e(),e=xe,t=sXt(),n=oXt(),r=iXt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:xe}}function uXt(e){return e.type===J1||e.type===j0||e.type===IF||e.type===OF}function X5e(){if(Y5e(),xe>=Xo)return{type:jI,start:xe,end:xe};const e=xt.charCodeAt(xe);return UI(e)?eXt():e===40||e===41||e===59?Lj():e===39||e===34?rXt():e===46?Lh(xt.charCodeAt(xe+1))?F0e():Lj():Lh(e)?F0e():Lj()}function tu(){const e=_r;return xe=e.end,_r=X5e(),xe=e.end,e}function Q5e(){const e=xe;_r=X5e(),xe=e}function lXt(e){const t=new Sf($Kt);return t.elements=e,t}function B0e(e,t,n){const r=new Sf(e==="||"||e==="&&"?MKt:RKt);return r.operator=e,r.left=t,r.right=n,r}function cXt(e,t){const n=new Sf(NKt);return n.callee=e,n.arguments=t,n}function fXt(e,t,n){const r=new Sf(DKt);return r.test=e,r.consequent=t,r.alternate=n,r}function Ree(e){const t=new Sf(W5e);return t.name=e,t}function ET(e){const t=new Sf(LKt);return t.value=e.value,t.raw=xt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function j0e(e,t,n){const r=new Sf(FKt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function dXt(e){const t=new Sf(BKt);return t.properties=e,t}function z0e(e,t,n){const r=new Sf(jKt);return r.key=t,r.value=n,r.kind=e,r}function hXt(e,t){const n=new Sf(zKt);return n.operator=e,n.argument=t,n.prefix=!0,n}function ir(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(PF(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=xe,n.description=i,n}function kF(e){e.type===jI&&ir(e,WKt),e.type===Uv&&ir(e,UKt),e.type===zI&&ir(e,VKt),e.type===J1&&ir(e,HKt),e.type===j0&&ir(e,qKt),ir(e,zs,e.value)}function Qo(e){const t=tu();(t.type!==Ya||t.value!==e)&&kF(t)}function Kr(e){return _r.type===Ya&&_r.value===e}function Mj(e){return _r.type===j0&&_r.value===e}function pXt(){const e=[];for(xe=_r.start,Qo("[");!Kr("]");)Kr(",")?(tu(),e.push(null)):(e.push(Z1()),Kr("]")||Qo(","));return tu(),lXt(e)}function U0e(){xe=_r.start;const e=tu();return e.type===zI||e.type===Uv?(e.octal&&ir(e,G5e),ET(e)):Ree(e.value)}function mXt(){var e,t,n,r;if(xe=_r.start,e=_r,e.type===J1)return n=U0e(),Qo(":"),r=Z1(),z0e("init",n,r);if(e.type===jI||e.type===Ya)kF(e);else return t=U0e(),Qo(":"),r=Z1(),z0e("init",t,r)}function gXt(){var e=[],t,n,r,i={},s=String;for(xe=_r.start,Qo("{");!Kr("}");)t=mXt(),t.key.type===W5e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ir({},GKt):i[r]=!0,e.push(t),Kr("}")||Qo(",");return Qo("}"),dXt(e)}function yXt(){Qo("(");const e=Nee();return Qo(")"),e}const vXt={if:1};function _Xt(){var e,t,n;if(Kr("("))return yXt();if(Kr("["))return pXt();if(Kr("{"))return gXt();if(e=_r.type,xe=_r.start,e===J1||vXt[_r.value])n=Ree(tu().value);else if(e===zI||e===Uv)_r.octal&&ir(_r,G5e),n=ET(tu());else{if(e===j0)throw new Error(qA);e===IF?(t=tu(),t.value=t.value==="true",n=ET(t)):e===OF?(t=tu(),t.value=null,n=ET(t)):Kr("/")||Kr("/=")?(n=ET(aXt()),Q5e()):kF(tu())}return n}function bXt(){const e=[];if(Qo("("),!Kr(")"))for(;xe<Xo&&(e.push(Z1()),!Kr(")"));)Qo(",");return Qo(")"),e}function wXt(){xe=_r.start;const e=tu();return uXt(e)||kF(e),Ree(e.value)}function EXt(){return Qo("."),wXt()}function xXt(){Qo("[");const e=Nee();return Qo("]"),e}function SXt(){var e,t,n;for(e=_Xt();;)if(Kr("."))n=EXt(),e=j0e(".",e,n);else if(Kr("("))t=bXt(),e=cXt(e,t);else if(Kr("["))n=xXt(),e=j0e("[",e,n);else break;return e}function V0e(){const e=SXt();if(_r.type===Ya&&(Kr("++")||Kr("--")))throw new Error(qA);return e}function D$(){var e,t;if(_r.type!==Ya&&_r.type!==j0)t=V0e();else{if(Kr("++")||Kr("--"))throw new Error(qA);if(Kr("+")||Kr("-")||Kr("~")||Kr("!"))e=tu(),t=D$(),t=hXt(e.value,t);else{if(Mj("delete")||Mj("void")||Mj("typeof"))throw new Error(qA);t=V0e()}}return t}function H0e(e){let t=0;if(e.type!==Ya&&e.type!==j0)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function TXt(){var e,t,n,r,i,s,o,a,u,l;if(e=_r,u=D$(),r=_r,i=H0e(r),i===0)return u;for(r.prec=i,tu(),t=[e,_r],o=D$(),s=[u,r,o];(i=H0e(_r))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=B0e(a,u,o),s.push(n);r=tu(),r.prec=i,s.push(r),t.push(_r),n=D$(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=B0e(s[l-1].value,s[l-2],n),l-=2;return n}function Z1(){var e,t,n;return e=TXt(),Kr("?")&&(tu(),t=Z1(),Qo(":"),n=Z1(),e=fXt(e,t,n)),e}function Nee(){const e=Z1();if(Kr(","))throw new Error(qA);return e}function Dee(e){xt=e,xe=0,Xo=xt.length,_r=null,Q5e();const t=Nee();if(_r.type!==jI)throw new Error("Unexpect token after expression.");return t}var J5e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Z5e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Te("Missing arguments to clamp function."),o.length>3&&Te("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Te("Missing arguments to if function."),o.length>3&&Te("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function AXt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function e8e(e){e=e||{};const t=e.allowed?cf(e.allowed):{},n=e.forbidden?cf(e.forbidden):{},r=e.constants||J5e,i=(e.functions||Z5e)(f),s=e.globalvar,o=e.fieldvar,a=pn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(rt(p))return p;const m=d[p.type];return m==null&&Te("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Nt(n,m)?Te("Illegal identifier: "+m):Nt(r,m)?r[m]:Nt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[AXt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Te("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Nt(i,m)&&i[m];return y||Te("Unrecognized function: "+m),pn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const q0e=Symbol("vega_selection_getter");function t8e(e){return(!e.getter||!e.getter[q0e])&&(e.getter=ec(e.field),e.getter[q0e]=!0),e.getter}const Lee="intersect",W0e="union",CXt="vlMulti",IXt="vlPoint",G0e="or",OXt="and",Jf="_vgsid_",GA=ec(Jf),PXt="E",kXt="R",$Xt="R-E",RXt="R-LE",NXt="R-RE",$L="index:unit";function Y0e(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=t8e(a)(e),Ig(o)&&(o=qo(o)),Ig(r[s])&&(r[s]=qo(r[s])),Ie(r[s])&&Ig(r[s][0])&&(r[s]=r[s].map(qo)),a.type===PXt){if(Ie(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===kXt){if(!lb(o,r[s]))return!1}else if(a.type===NXt){if(!lb(o,r[s],!0,!1))return!1}else if(a.type===$Xt){if(!lb(o,r[s],!1,!1))return!1}else if(a.type===RXt&&!lb(o,r[s],!1,!0))return!1;return!0}function DXt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[$L]&&r[$L].value:void 0,o=n===Lee,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Y0e(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Y0e(t,l),o^h)return h;return a&&o}const n8e=xI(GA),LXt=n8e.left,MXt=n8e.right;function FXt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[$L]&&r[$L].value:void 0,o=n===Lee,a=GA(t),u=LXt(i,a);if(u===i.length||GA(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(MXt(i,a)-u<s.size)return!1}return!0}function BXt(e,t){return e.map(n=>hn(t.fields?{values:t.fields.map(r=>t8e(r)(n.datum))}:{[Jf]:GA(n.datum)},t))}function jXt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,_=s.length,b=0,E,w;b<_;++b)if(l=s[b],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,w=c.length;E<w;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=Fj[`${y}_union`],m[d]=v(g,nt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(nt(f).reduce((x,S,I)=>(x[c[I].field]=S,x),{})))}else h=Jf,p=GA(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Jf]:p}));if(t=t||W0e,o[Jf]?o[Jf]=Fj[`${Jf}_${t}`](...Object.values(o[Jf])):Object.keys(o).forEach(x=>{o[x]=Object.keys(o[x]).map(S=>o[x][S]).reduce((S,I)=>S===void 0?I:Fj[`${u[x]}_${t}`](S,I))}),s=Object.keys(a),n&&s.length){const x=r?IXt:CXt;o[x]=t===W0e?{[G0e]:s.reduce((S,I)=>(S.push(...a[I]),S),[])}:{[OXt]:s.map(S=>({[G0e]:a[S]}))}}return o}var Fj={[`${Jf}_union`]:Bjt,[`${Jf}_intersect`]:Mjt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=qo(t[0]),r=qo(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=qo(t[0]),r=qo(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const zXt=":",UXt="@";function Mee(e,t,n,r){t[0].type!==Q1&&Te("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Un(t).value,o="unit",a=UXt+o,u=zXt+i;s===Lee&&!Nt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Nt(r,u)||(r[u]=n.getData(i).tuplesRef())}function r8e(e){const t=this.context.data[e];return t?t.values.value:[]}function VXt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function HXt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(tc).insert(t)),1}function qXt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const VI=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},WXt=VI("format"),i8e=VI("timeFormat"),GXt=VI("utcFormat"),YXt=VI("timeParse"),KXt=VI("utcParse"),QP=new Date(2e3,0,1);function $F(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(QP.setYear(2e3),QP.setMonth(e),QP.setDate(t),i8e.call(this,QP,n))}function XXt(e){return $F.call(this,e,1,"%B")}function QXt(e){return $F.call(this,e,1,"%b")}function JXt(e){return $F.call(this,0,2+e,"%A")}function ZXt(e){return $F.call(this,0,2+e,"%a")}const eQt=":",tQt="@",sq="%",s8e="$";function Fee(e,t,n,r){t[0].type!==Q1&&Te("First argument to data functions must be a string literal.");const i=t[0].value,s=eQt+i;if(!Nt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function nQt(e,t,n,r){t[0].type!==Q1&&Te("First argument to indata must be a string literal."),t[1].type!==Q1&&Te("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=tQt+s;Nt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function xa(e,t,n,r){if(t[0].type===Q1)K0e(n,r,t[0].value);else for(e in n.scales)K0e(n,r,e)}function K0e(e,t,n){const r=sq+n;if(!Nt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function dh(e,t){if(pn(e))return e;if(rt(e)){const n=t.scales[e];return n&&cUt(n.value)?n.value:void 0}}function rQt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=xa,n._range=xa,n._scale=xa;const r=i=>"_["+(i.type===Q1?Xe(sq+i.value):Xe(sq)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Bee(e,t){return function(n,r,i){if(n){const s=dh(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const iQt=Bee("area",AWt),sQt=Bee("bounds",PWt),oQt=Bee("centroid",LWt);function aQt(e,t){const n=dh(e,(t||this).context);return n&&n.scale()}function uQt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function jee(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function lQt(){return jee(this.context.dataflow,"warn",arguments)}function cQt(){return jee(this.context.dataflow,"info",arguments)}function fQt(){return jee(this.context.dataflow,"debug",arguments)}function Bj(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function oq(e){const t=Wg(e),n=Bj(t.r),r=Bj(t.g),i=Bj(t.b);return .2126*n+.7152*r+.0722*i}function dQt(e,t){const n=oq(e),r=oq(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function hQt(){const e=[].slice.call(arguments);return e.unshift({}),hn(...e)}function o8e(e,t){return e===t||e!==e&&t!==t?!0:Ie(e)?Ie(t)&&e.length===t.length?pQt(e,t):!1:ot(e)&&ot(t)?a8e(e,t):!1}function pQt(e,t){for(let n=0,r=e.length;n<r;++n)if(!o8e(e[n],t[n]))return!1;return!0}function a8e(e,t){for(const n in e)if(!o8e(e[n],t[n]))return!1;return!0}function X0e(e){return t=>a8e(e,t)}function mQt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?tc:Ie(n)||J4(n)?n:X0e(n),c.remove(f)),t&&c.insert(t),r&&(f=X0e(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function gQt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function yQt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Q0e={};function vQt(e,t){const n=Q0e[t]||(Q0e[t]=ec(t));return Ie(e)?e.map(n):n(e)}function zee(e){return Ie(e)||ArrayBuffer.isView(e)?e:null}function Uee(e){return zee(e)||(rt(e)?e:null)}function _Qt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zee(e).join(...n)}function bQt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Uee(e).indexOf(...n)}function wQt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Uee(e).lastIndexOf(...n)}function EQt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Uee(e).slice(...n)}function xQt(e,t,n){return pn(n)&&Te("Function argument passed to replace."),String(e).replace(t,n)}function SQt(e){return zee(e).slice().reverse()}function TQt(e,t,n){return tZ(e||0,t||0,n||0)}function AQt(e,t){const n=dh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function CQt(e,t){const n=dh(e,(t||this).context);return n?n.copy():void 0}function IQt(e,t){const n=dh(e,(t||this).context);return n?n.domain():[]}function OQt(e,t,n){const r=dh(e,(n||this).context);return r?Ie(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function PQt(e,t){const n=dh(e,(t||this).context);return n&&n.range?n.range():[]}function kQt(e,t,n){const r=dh(e,(n||this).context);return r?r(t):void 0}function $Qt(e,t,n,r,i){e=dh(e,(i||this).context);const s=h4e(t,n);let o=e.domain(),a=o[0],u=Un(o),l=na;return u-a?l=t4e(e,a,u):e=(e.interpolator?or("sequential")().interpolator(e.interpolator()):or("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Un(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function RQt(e,t,n){const r=dh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function NQt(e){let t=null;return function(n){return n?MA(n,t=t||Gw(e)):e}}const u8e=e=>e.data;function l8e(e,t){const n=r8e.call(t,e);return n.root&&n.root.lookup||{}}function DQt(e,t,n){const r=l8e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(u8e):void 0}function LQt(e,t){const n=l8e(e,this)[t];return n?n.ancestors().map(u8e):void 0}const c8e=()=>typeof window<"u"&&window||null;function MQt(){const e=c8e();return e?e.screen:{}}function FQt(){const e=c8e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function BQt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function f8e(e,t,n){if(!e)return[];const[r,i]=e,s=new os().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return oFe(o,s,jQt(t))}function jQt(e){let t=null;if(e){const n=nt(e.marktype),r=nt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function zQt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=nt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function UQt(e){return nt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function VQt(e,t,n){const{x:r,y:i,mark:s}=n,o=new os().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),f8e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>HQt(u.x,u.y,t))}function HQt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const YA={random(){return rc()},cumulativeNormal:rF,cumulativeLogNormal:wJ,cumulativeUniform:TJ,densityNormal:gJ,densityLogNormal:bJ,densityUniform:SJ,quantileNormal:iF,quantileLogNormal:EJ,quantileUniform:AJ,sampleNormal:nF,sampleLogNormal:_J,sampleUniform:xJ,isArray:Ie,isBoolean:B0,isDate:Ig,isDefined(e){return e!==void 0},isNumber:Jn,isObject:ot,isRegExp:iMe,isString:rt,isTuple:J4,isValid(e){return e!=null&&e===e},toBoolean:eJ,toDate(e){return tJ(e)},toNumber:qo,toString:nJ,indexof:bQt,join:_Qt,lastindexof:wQt,replace:xQt,reverse:SQt,slice:EQt,flush:nMe,lerp:sMe,merge:hQt,pad:uMe,peek:Un,pluck:vQt,span:EI,inrange:lb,truncate:lMe,rgb:Wg,lab:SD,hcl:TD,hsl:ED,luminance:oq,contrast:dQt,sequence:Fv,format:WXt,utcFormat:GXt,utcParse:KXt,utcOffset:PMe,utcSequence:RMe,timeFormat:i8e,timeParse:YXt,timeOffset:OMe,timeSequence:$Me,timeUnitSpecifier:vMe,monthFormat:XXt,monthAbbrevFormat:QXt,dayFormat:JXt,dayAbbrevFormat:ZXt,quarter:JLe,utcquarter:ZLe,week:bMe,utcweek:xMe,dayofyear:_Me,utcdayofyear:EMe,warn:lQt,info:cQt,debug:fQt,extent(e){return Gd(e)},inScope:uQt,intersect:f8e,clampRange:eMe,pinchDistance:gQt,pinchAngle:yQt,screen:MQt,containerSize:BQt,windowSize:FQt,bandspace:TQt,setdata:HXt,pathShape:NQt,panLinear:YLe,panLog:KLe,panPow:XLe,panSymlog:QLe,zoomLinear:YQ,zoomLog:KQ,zoomPow:j3,zoomSymlog:XQ,encode:qXt,modify:mQt,lassoAppend:zQt,lassoPath:UQt,intersectLasso:VQt},qQt=["view","item","group","xy","x","y"],WQt="event.vega.",d8e="this.",Vee={},h8e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Xe(s8e+e)}]`,functions:GQt,constants:J5e,visitors:Vee},aq=e8e(h8e);function GQt(e){const t=Z5e(e);qQt.forEach(n=>t[n]=WQt+n);for(const n in YA)t[n]=d8e+n;return hn(t,rQt(e,YA,Vee)),t}function Gi(e,t,n){return arguments.length===1?YA[e]:(YA[e]=t,n&&(Vee[e]=n),aq&&(aq.functions[e]=d8e+e),this)}Gi("bandwidth",AQt,xa);Gi("copy",CQt,xa);Gi("domain",IQt,xa);Gi("range",PQt,xa);Gi("invert",OQt,xa);Gi("scale",kQt,xa);Gi("gradient",$Qt,xa);Gi("geoArea",iQt,xa);Gi("geoBounds",sQt,xa);Gi("geoCentroid",oQt,xa);Gi("geoShape",RQt,xa);Gi("geoScale",aQt,xa);Gi("indata",VXt,nQt);Gi("data",r8e,Fee);Gi("treePath",DQt,Fee);Gi("treeAncestors",LQt,Fee);Gi("vlSelectionTest",DXt,Mee);Gi("vlSelectionIdTest",FXt,Mee);Gi("vlSelectionResolve",jXt,Mee);Gi("vlSelectionTuples",BXt);function Xd(e,t){const n={};let r;try{e=rt(e)?e:Xe(e)+"",r=Dee(e)}catch{Te("Expression parse error: "+e)}r.visit(s=>{if(s.type!==q5e)return;const o=s.callee.name,a=h8e.visitors[o];a&&a(o,s.arguments,t,n)});const i=aq(r);return i.globals.forEach(s=>{const o=s8e+s;!Nt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:hn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function YQt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const KQt=cf(["rule"]),J0e=cf(["group","image","rect"]);function XQt(e,t){let n="";return KQt[t]||(e.x2&&(e.x?(J0e[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(J0e[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Hee(e){return(e+"").toLowerCase()}function QQt(e){return Hee(e)==="operator"}function JQt(e){return Hee(e)==="collect"}function SS(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function ZQt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var eJt={operator:(e,t)=>SS(e,["_"],t.code),parameter:(e,t)=>SS(e,["datum","_"],t.code),event:(e,t)=>SS(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return SS(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Xe(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=XQt(r,n),i+="return m;",SS(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Xe).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),ZQt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function tJt(e){const t=this;QQt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function nJt(e){const t=this;if(e.params){const n=t.get(e.id);n||Te("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function rJt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Ie(i)?i.map(s=>Z0e(s,n,t)):Z0e(i,n,t)}return t}function Z0e(e,t,n){if(!e||!ot(e))return e;for(let r=0,i=eye.length,s;r<i;++r)if(s=eye[r],Nt(e,s.key))return s.parse(e,t,n);return e}var eye=[{key:"$ref",parse:iJt},{key:"$key",parse:oJt},{key:"$expr",parse:sJt},{key:"$field",parse:aJt},{key:"$encode",parse:lJt},{key:"$compare",parse:uJt},{key:"$context",parse:cJt},{key:"$subflow",parse:fJt},{key:"$tupleid",parse:dJt}];function iJt(e,t){return t.get(e.$ref)||Te("Operator not defined: "+e.$ref)}function sJt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Ou(t.parameterExpression(e.$expr),e.$fields))}function oJt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=ZQ(e.$key,e.$flat,t.expr.codegen))}function aJt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=ec(e.$field,e.$name,t.expr.codegen))}function uJt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=nt(e.$compare).map(i=>i&&i.$tupleid?kt:i);return t.fn[n]||(t.fn[n]=QQ(r,e.$order,t.expr.codegen))}function lJt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Ou(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function cJt(e,t){return t}function fJt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function dJt(){return kt}function hJt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Te("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function pJt(e){var t=this,n=ot(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Te("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const mJt={skip:!0};function gJt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function yJt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],mJt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(tc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function p8e(e,t,n,r){return new m8e(e,t,n,r)}function m8e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||eJt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function tye(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}m8e.prototype=tye.prototype={fork(){const e=new tye(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),JQt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Hee(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:YQt,parseOperator:tJt,parseOperatorParameters:nJt,parseParameters:rJt,parseStream:hJt,parseUpdate:pJt,getState:gJt,setState:yJt};function vJt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),g8e(t,e.description()))}function g8e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function _Jt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const jj="default";function bJt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:jj,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?rt(i)?i:i.user:jj,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return rt(r)||(i=r.item,r=r.user),uq(e,r&&r!==jj?r:i||r),i},{cursor:t})}function uq(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function RL(e,t){var n=e._runtime.data;return Nt(n,t)||Te("Unrecognized data set: "+t),n[t]}function wJt(e,t){return arguments.length<2?RL(this,e).values.value:RF.call(this,e,jv().remove(tc).insert(t))}function RF(e,t){ZMe(t)||Te("Second argument to changes must be a changeset.");const n=RL(this,e);return n.modified=!0,this.pulse(n.input,t)}function EJt(e,t){return RF.call(this,e,jv().insert(t))}function xJt(e,t){return RF.call(this,e,jv().remove(t))}function y8e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function v8e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function NF(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function SJt(e){var t=NF(e),n=y8e(e),r=v8e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function TJt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=NF(e),o=t.changedTouches?t.changedTouches[0]:t,s=wF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=AJt(e,n,s),t}function AJt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;rt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:ra(e),item:ra(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const nye="view",CJt="timer",IJt="window",OJt={trap:!1};function PJt(e){const t=hn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Ie(r[s])&&(r[s]=cf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function _8e(e,t,n,r){e._eventListeners.push({type:n,sources:nt(t),handler:r})}function kJt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function JP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||ot(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function $Jt(e,t,n){var r=this,i=new tF(n),s=function(l,c){r.runAsync(null,()=>{e===nye&&kJt(r,t)&&l.preventDefault(),i.receive(TJt(r,l,c))})},o;if(e===CJt)JP(r,"timer",t)&&r.timer(s,t);else if(e===nye)JP(r,"view",t)&&r.addEventListener(t,s,OJt);else if(e===IJt?JP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&JP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);_8e(r,o,t,s)}return i}function rye(e){return e.item}function iye(e){return e.item.mark.source}function sye(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function RJt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",rye),iye,sye(e)),this.on(this.events("view","pointerout",rye),iye,sye(t)),this}function NJt(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,s;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(s=n[r],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return e&&e.call(this,this._handler,null,null,null),this}function tl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const DJt="vega-bind",LJt="vega-bind-name",MJt="vega-bind-radio";function FJt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=JQ(r.debounce,i.update))),(r.input==null&&r.element?BJt:zJt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function BJt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),_8e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(jJt(i))}}function jJt(e){return typeof Event<"u"?new Event(e):{type:e}}function zJt(e,t,n,r){const i=r.signal(n.signal),s=tl("div",{class:DJt}),o=n.input==="radio"?s:s.appendChild(tl("label"));o.appendChild(tl("span",{class:LJt},n.name||n.signal)),t.appendChild(s);let a=UJt;switch(n.input){case"checkbox":a=VJt;break;case"select":a=HJt;break;case"radio":a=qJt;break;case"range":a=WJt;break}a(e,o,n,i)}function UJt(e,t,n,r){const i=tl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function VJt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=tl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function HJt(e,t,n,r){const i=tl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};NL(o,r)&&(u.selected=!0),i.appendChild(tl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(NL(n.options[a],o)){i.selectedIndex=a;return}}}function qJt(e,t,n,r){const i=tl("span",{class:MJt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};NL(o,r)&&(u.checked=!0);const l=tl("input",u);l.addEventListener("change",()=>e.update(o));const c=tl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)NL(a[l].value,o)&&(a[l].checked=!0)}}function WJt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||RA(s,i,100),a=tl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=tl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function NL(e,t){return e===t||e+""==t+""}function b8e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,y8e(e),v8e(e),NF(e),i,s).background(e.background())}function qee(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function GJt(e,t,n,r){const i=new r(e.loader(),qee(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,NF(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function YJt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=xF(r);e=n._el=e?zj(n,e,!0):null,vJt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||l0,a=e?s.renderer:s.headless;return n._renderer=a?b8e(n,n._renderer,e,a):null,n._handler=GJt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=zj(n,t,!0):e.appendChild(tl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=zj(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{FJt(n,u.element||t,u)})),n}function zj(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const TS=e=>+e||0,KJt=e=>({top:e,bottom:e,left:e,right:e});function oye(e){return ot(e)?{top:TS(e.top),bottom:TS(e.bottom),left:TS(e.left),right:TS(e.right)}:KJt(TS(e))}async function Wee(e,t,n,r){const i=xF(t),s=i&&i.headless;return s||Te("Unrecognized renderer type: "+t),await e.runAsync(),b8e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function XJt(e,t){e!==ig.Canvas&&e!==ig.SVG&&e!==ig.PNG&&Te("Unrecognized image type: "+e);const n=await Wee(this,e,t);return e===ig.SVG?QJt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function QJt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function JJt(e,t){return(await Wee(this,ig.Canvas,e,t)).canvas()}async function ZJt(e){return(await Wee(this,ig.SVG,e)).svg()}function eZt(e,t,n){return p8e(e,Vw,YA,n).parse(t)}function tZt(e){var t=this._runtime.scales;return Nt(t,e)||Te("Unrecognized scale or projection: "+e),t[e].value}var w8e="width",E8e="height",Gee="padding",aye={skip:!0};function x8e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Gee?r.left+r.right:0)}function S8e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Gee?r.top+r.bottom:0)}function nZt(e){var t=e._signals,n=t[w8e],r=t[E8e],i=t[Gee];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=x8e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=S8e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function rZt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(w8e,n,aye),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(E8e,r,aye),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function iZt(e){return this._runtime.getState(e||{data:sZt,signals:oZt,recurse:!0})}function sZt(e,t){return t.modified&&Ie(t.input.value)&&!e.startsWith("_:vega:_")}function oZt(e,t){return!(e==="parent"||t instanceof Vw.proxy)}function aZt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function uZt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(axt(n,t))}function lZt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",cZt(r))}function cZt(e){return e==null?"":Ie(e)?T8e(e):ot(e)&&!Ig(e)?fZt(e):e+""}function fZt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Ie(n)?T8e(n):A8e(n))}).join(`
`)}function T8e(e){return"["+e.map(A8e).join(", ")+"]"}function A8e(e){return Ie(e)?"[]":ot(e)&&!Ig(e)?"{}":e}function dZt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function C8e(e,t){const n=this;if(t=t||{},Ub.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=hn({},e.locale,t.locale);n.locale(VMe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||ig.Canvas,n._scenegraph=new kZ;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||lZt,n._redraw=!0,n._handler=new l0().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=PJt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=eZt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:hn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=x8e(n,n._width),n._viewHeight=S8e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,nZt(n),_Jt(n),bJt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function ZP(e,t){return Nt(e._signals,t)?e._signals[t]:Te("Unrecognized signal name: "+Xe(t))}function I8e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function uye(e,t,n,r){let i=I8e(n,r);return i||(i=qee(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function lye(e,t,n){const r=I8e(t,n);return r&&t._targets.remove(r),e}We(C8e,Ub,{async evaluate(e,t,n){if(await Ub.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,SJt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&E$(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&g8e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=ZP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",oye(e)):oye(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(xF(e)||Te("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Ub.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(ZP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:rZt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=qee(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return uye(this,e,ZP(this,e),t)},removeSignalListener(e,t){return lye(this,ZP(this,e),t)},addDataListener(e,t){return uye(this,e,RL(this,e).values,t)},removeDataListener(e,t){return lye(this,RL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=uq(this,null);this._globalCursor=!!e,t&&uq(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:uZt,events:$Jt,finalize:NJt,hover:RJt,data:wJt,change:RF,insert:EJt,remove:xJt,scale:tZt,initialize:YJt,toImageURL:XJt,toCanvas:JJt,toSVG:ZJt,getState:iZt,setState:aZt,_watchPixelRatio:dZt});const hZt="view",DL="[",LL="]",O8e="{",P8e="}",pZt=":",k8e=",",mZt="@",gZt=">",yZt=/[[\]{}]/,vZt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let $8e,R8e;function z0(e,t,n){return $8e=t||hZt,R8e=n||vZt,N8e(e.trim()).map(lq)}function _Zt(e){return R8e[e]}function x2(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function N8e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=x2(e,i,k8e,DL+O8e,LL+P8e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function lq(e){return e[0]==="["?bZt(e):wZt(e)}function bZt(e){const t=e.length;let n=1,r;if(n=x2(e,n,LL,DL,LL),n===t)throw"Empty between selector: "+e;if(r=N8e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==gZt)throw"Expected '>' after between selector: "+e;r=r.map(lq);const i=lq(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function wZt(e){const t={source:$8e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===P8e){if(a=e.lastIndexOf(O8e),a>=0){try{r=EZt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===mZt&&(i=++a),u=x2(e,a,pZt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=x2(e,a,DL),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=x2(e,a,LL),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==DL)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||yZt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):_Zt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function EZt(e){const t=e.split(k8e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function xZt(e){return ot(e)?e:{type:e||"pad"}}const AS=e=>+e||0,SZt=e=>({top:e,bottom:e,left:e,right:e});function TZt(e){return ot(e)?e.signal?e:{top:AS(e.top),bottom:AS(e.bottom),left:AS(e.left),right:AS(e.right)}:SZt(AS(e))}const Us=e=>ot(e)&&!Ie(e)?hn({},e):{value:e};function cye(e,t,n,r){return n!=null?(ot(n)&&!Ie(n)||Ie(n)&&n.length&&ot(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Eo(e,t,n){for(const r in t)cye(e,r,t[r]);for(const r in n)cye(e,r,n[r],"update")}function cx(e,t,n){for(const r in t)n&&Nt(n,r)||(e[r]=hn(e[r]||{},t[r]));return e}function B_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Yee="mark",Kee="frame",Xee="scope",AZt="axis",CZt="axis-domain",IZt="axis-grid",OZt="axis-label",PZt="axis-tick",kZt="axis-title",$Zt="legend",RZt="legend-band",NZt="legend-entry",DZt="legend-gradient",D8e="legend-label",LZt="legend-symbol",MZt="legend-title",FZt="title",BZt="title-text",jZt="title-subtitle";function zZt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!B_(u,e)&&Uj(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Kee?i.group:n===Yee?hn({},i.mark,i[t]):null;for(u in c)l=B_(u,e)||(u==="fill"||u==="stroke")&&(B_("fill",e)||B_("stroke",e)),l||Uj(s,u,c[u]);nt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)B_(h,e)||Uj(s,h,d[h])}),e=hn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=hn(o,e.enter),a&&(e.update=hn(a,e.update)),e}function Uj(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const L8e=e=>rt(e)?Xe(e):e.signal?`(${e.signal})`:M8e(e);function DF(e){if(e.gradient!=null)return VZt(e);let t=e.signal?`(${e.signal})`:e.color?UZt(e.color):e.field!=null?M8e(e.field):e.value!==void 0?Xe(e.value):void 0;return e.scale!=null&&(t=HZt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${L$(e.exponent)})`),e.mult!=null&&(t+=`*${L$(e.mult)}`),e.offset!=null&&(t+=`+${L$(e.offset)}`),e.round&&(t=`round(${t})`),t}const ek=(e,t,n,r)=>`(${e}(${[t,n,r].map(DF).join(",")})+'')`;function UZt(e){return e.c?ek("hcl",e.h,e.c,e.l):e.h||e.s?ek("hsl",e.h,e.s,e.l):e.l||e.a?ek("lab",e.l,e.a,e.b):e.r||e.g||e.b?ek("rgb",e.r,e.g,e.b):null}function VZt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Xe(n));for(;t.length&&Un(t)==null;)t.pop();return t.unshift(L8e(e.gradient)),`gradient(${t.join(",")})`}function L$(e){return ot(e)?"("+DF(e)+")":e}function M8e(e){return F8e(ot(e)?e:{datum:e})}function F8e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Te("Invalid field reference: "+Xe(e));return e.signal||(r=rt(r)?uh(r).map(Xe).join("]["):F8e(r)),t+"["+r+"]"}function HZt(e,t){const n=L8e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+L$(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function qZt(e){let t="";return e.forEach(n=>{const r=DF(n);t+=n.test?`(${n.test})?${r}:`:r}),Un(t)===":"&&(t+="null"),t}function B8e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=zZt(e,t,n,r,i.config);for(const a in e)o[a]=WZt(e[a],t,s,i);return s}function WZt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=YZt(GZt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function GZt(e){return Ie(e)?qZt(e):DF(e)}function YZt(e,t,n,r){const i=Xd(e,t);return i.$fields.forEach(s=>r[s]=1),hn(n,i.$params),i.$expr}const KZt="outer",XZt=["value","update","init","react","bind"];function fye(e,t){Te(e+' for "outer" push: '+Xe(t))}function j8e(e,t){const n=e.name;if(e.push===KZt)t.signals[n]||fye("No prior signal definition",n),XZt.forEach(r=>{e[r]!==void 0&&fye("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function cq(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function LF(e,t,n,r){return new cq(e,t,n,r)}function ML(e,t){return LF("operator",e,t)}function Pt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function KA(e,t){return t?{$field:e,$name:t}:{$field:e}}const fq=KA("key");function dye(e,t){return{$compare:e,$order:t}}function QZt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const JZt="ascending",ZZt="descending";function een(e){return ot(e)?(e.order===ZZt?"-":"+")+MF(e.op,e.field):""}function MF(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Qee="scope",dq="view";function Es(e){return e&&e.signal}function ten(e){return e&&e.expr}function M$(e){if(Es(e))return!0;if(ot(e)){for(const t in e)if(M$(e[t]))return!0}return!1}function Nc(e,t){return e??t}function w1(e){return e&&e.signal||e}const hye="timer";function XA(e,t){return(e.merge?ren:e.stream?ien:e.type?sen:Te("Invalid stream specification: "+Xe(e)))(e,t)}function nen(e){return e===Qee?dq:e||dq}function ren(e,t){const n=e.merge.map(i=>XA(i,t)),r=Jee({merge:n},e,t);return t.addStream(r).id}function ien(e,t){const n=XA(e.stream,t),r=Jee({stream:n},e,t);return t.addStream(r).id}function sen(e,t){let n;e.type===hye?(n=t.event(hye,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(nen(e.source),e.type);const r=Jee({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Jee(e,t,n){let r=t.between;return r&&(r.length!==2&&Te('Stream "between" parameter must have 2 entries: '+Xe(t)),e.between=[XA(r[0],n),XA(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(oen(t.marktype,t.markname,t.markrole)),t.source===Qee&&r.push("inScope(event.item)"),r.length&&(e.filter=Xd("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function oen(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const aen={code:"_.$value",ast:{type:"Identifier",value:"value"}};function uen(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Te("Signal update missing events specification."),rt(s)&&(s=z0(s,t.isSubscope()?Qee:dq)),s=nt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[cen(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Te("Signal encode and update are mutually exclusive."),o="encode(item(),"+Xe(r)+")"),i.update=rt(o)?Xd(o,t):o.expr!=null?Xd(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:aen,$params:{$value:t.signalRef(o.signal)}}:Te("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(hn(len(u,t),i)))}function len(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):XA(e,t)}}function cen(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function fen(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Te("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Xd(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>uen(i,t,n.id))}const $r=e=>(t,n,r)=>LF(e,n,t||void 0,r),z8e=$r("aggregate"),den=$r("axisticks"),U8e=$r("bound"),Tf=$r("collect"),pye=$r("compare"),hen=$r("datajoin"),V8e=$r("encode"),pen=$r("expression"),men=$r("facet"),gen=$r("field"),yen=$r("key"),ven=$r("legendentries"),_en=$r("load"),ben=$r("mark"),wen=$r("multiextent"),Een=$r("multivalues"),xen=$r("overlap"),Sen=$r("params"),H8e=$r("prefacet"),Ten=$r("projection"),Aen=$r("proxy"),Cen=$r("relay"),q8e=$r("render"),Ien=$r("scale"),Vv=$r("sieve"),Oen=$r("sortitems"),W8e=$r("viewlayout"),Pen=$r("values");let ken=0;const G8e={min:"min",max:"max",count:"sum"};function $en(e,t){const n=e.type||"linear";K6e(n)||Te("Unrecognized scale type: "+Xe(n)),t.addScale(e.name,{type:n,domain:void 0})}function Ren(e,t){const n=t.getScale(e.name).params;let r;n.domain=Y8e(e.domain,e,t),e.range!=null&&(n.range=X8e(e,t,n)),e.interpolate!=null&&Ven(e.interpolate,n),e.nice!=null&&(n.nice=Uen(e.nice,t)),e.bins!=null&&(n.bins=zen(e.bins,t));for(r in e)Nt(n,r)||r==="name"||(n[r]=Vl(e[r],t))}function Vl(e,t){return ot(e)?e.signal?t.signalRef(e.signal):Te("Unsupported object: "+Xe(e)):e}function F$(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Vl(n,t))}function FF(e){Te("Can not find data set: "+Xe(e))}function Y8e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Te("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Ie(e)?Nen:e.fields?Len:Den)(e,t,n)}function Nen(e,t,n){return e.map(r=>Vl(r,n))}function Den(e,t,n){const r=n.getData(e.data);return r||FF(e.data),Ww(t.type)?r.valuesRef(n,e.field,K8e(e.sort,!1)):J6e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Len(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=rt(o)?{data:r,field:o}:Ie(o)||o.signal?Men(o,n):o,s.push(o),s),[]);return(Ww(t.type)?Fen:J6e(t.type)?Ben:jen)(e,n,i)}function Men(e,t){const n="_:vega:_"+ken++,r=Tf({});if(Ie(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Xe(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Vv({})]),{data:n,field:"data"}}function Fen(e,t,n){const r=K8e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||FF(l.data),c.countsRef(t,l.field,r)}),a={groupby:fq,pulse:o};r&&(i=r.op||"count",s=r.field?MF(i,r.field):"count",a.ops=[G8e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(z8e(a));const u=t.add(Tf({pulse:Pt(i)}));return s=t.add(Pen({field:fq,sort:t.sortRef(r),pulse:Pt(u)})),Pt(s)}function K8e(e,t){return e&&(!e.field&&!e.op?ot(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Te("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!G8e[e.op]&&Te("Multiple domain scales can not be sorted using "+e.op)),e}function Ben(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||FF(i.data),s.domainRef(t,i.field)});return Pt(t.add(Een({values:r})))}function jen(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||FF(i.data),s.extentRef(t,i.field)});return Pt(t.add(wen({extents:r})))}function zen(e,t){return e.signal||Ie(e)?F$(e,t):t.objectProperty(e)}function Uen(e,t){return e.signal?t.signalRef(e.signal):ot(e)?{interval:Vl(e.interval),step:Vl(e.step)}:Vl(e)}function Ven(e,t){t.interpolate=Vl(e.type||e),e.gamma!=null&&(t.interpolateGamma=Vl(e.gamma))}function X8e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(rt(i)){if(r&&Nt(r,i))return e=hn({},e,{range:r[i]}),X8e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Ww(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Te("Unrecognized scale range value: "+Xe(i))}else if(i.scheme){n.scheme=Ie(i.scheme)?F$(i.scheme,t):Vl(i.scheme,t),i.extent&&(n.schemeExtent=F$(i.extent,t)),i.count&&(n.schemeCount=Vl(i.count,t));return}else if(i.step){n.rangeStep=Vl(i.step,t);return}else{if(Ww(e.type)&&!Ie(i))return Y8e(i,e,t);Ie(i)||Te("Unsupported range type: "+Xe(i))}return i.map(s=>(Ie(s)?F$:Vl)(s,t))}function Hen(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=hq(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=hq(n[i],i,t));t.addProjection(e.name,r)}function hq(e,t,n){return Ie(e)?e.map(r=>hq(r,t,n)):ot(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Te("Unsupported parameter object: "+Xe(e)):e}const Af="top",fx="left",dx="right",f0="bottom",Q8e="center",qen="vertical",Wen="start",Gen="middle",Yen="end",pq="index",Zee="label",Ken="offset",Zw="perc",Xen="perc2",Gl="value",HI="guide-label",ete="guide-title",Qen="group-title",Jen="group-subtitle",mye="symbol",B$="gradient",mq="discrete",gq="size",Zen="shape",etn="fill",ttn="stroke",ntn="strokeWidth",rtn="strokeDash",itn="opacity",tte=[gq,Zen,etn,ttn,ntn,rtn,itn],qI={name:1,style:1,interactive:1},Gn={value:0},Yl={value:1},BF="group",J8e="rect",nte="rule",stn="symbol",Hv="text";function QA(e){return e.type=BF,e.interactive=e.interactive||!1,e}function Pu(e,t){const n=(r,i)=>Nc(e[r],Nc(t[r],i));return n.isVertical=r=>qen===Nc(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Nc(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Nc(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Nc(e.columns,Nc(t.columns,+n.isVertical(!0))),n}function Z8e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function otn(e,t,n){const r=t.config.style[n];return r&&r[e]}function jF(e,t,n){return`item.anchor === '${Wen}' ? ${e} : item.anchor === '${Yen}' ? ${t} : ${n}`}const rte=jF(Xe(fx),Xe(dx),Xe(Q8e));function atn(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ot(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function e9e(e,t){return t?e?ot(e)?Object.assign({},e,{offset:e9e(e.offset,t)}):{value:e,offset:t}:t:e}function fl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=cx(e.encode,t,qI)):e.interactive=!1,e}function utn(e,t,n,r){const i=Pu(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:Gn,x:Gn,y:Gn,width:Us(f),height:Us(d)},update:hn({},u,{opacity:Yl,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Gn}};return Eo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),fl({type:J8e,role:DZt,encode:h},r)}function ltn(e,t,n,r,i){const s=Pu(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Gn,fill:{scale:t,field:Gl}};p[l]={signal:h+"datum."+Zw,mult:u},p[c]=Gn,p[f]={signal:h+"datum."+Xen,mult:u},p[d]=Us(a);const m={enter:p,update:hn({},p,{opacity:Yl}),exit:{opacity:Gn}};return Eo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),fl({type:J8e,role:RZt,key:Gl,from:i,encode:m},r)}const ctn=`datum.${Zw}<=0?"${fx}":datum.${Zw}>=1?"${dx}":"${Q8e}"`,ftn=`datum.${Zw}<=0?"${f0}":datum.${Zw}>=1?"${Af}":"${Gen}"`;function gye(e,t,n,r){const i=Pu(e,t),s=i.isVertical(),o=Us(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Gn},update:c={opacity:Yl,text:{field:Zee}},exit:{opacity:Gn}};return Eo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Nc(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:ftn},f="y",d="x",h="1-"):(l.align=c.align={signal:ctn},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+Zw,mult:a},l[d]=c[d]=o,o.offset=Nc(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+pq}:void 0,fl({type:Hv,role:D8e,style:HI,key:Gl,from:r,encode:p,overlap:u},n)}function dtn(e,t,n,r,i){const s=Pu(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Ken} : datum.${gq}`,h=l?Us(l):{field:gq},p=`datum.${pq}`,m=`max(1, ${i})`;let g,y,v,_,b;h.mult=.5,g={enter:y={opacity:Gn,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Yl,x:y.x,y:y.y},exit:{opacity:Gn}};let E=null,w=null;e.fill||(E=t.symbolBaseFillColor,w=t.symbolBaseStrokeColor),Eo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",w),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),tte.forEach(C=>{e[C]&&(v[C]=y[C]={scale:e[C],field:Gl})});const x=fl({type:stn,role:LZt,key:Gl,from:f,clip:l?!0:void 0,encode:g},n.symbols),S=Us(c);S.offset=s("labelOffset"),g={enter:y={opacity:Gn,x:{signal:d,offset:S},y:h},update:v={opacity:Yl,text:{field:Zee},x:y.x,y:y.y},exit:{opacity:Gn}},Eo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const I=fl({type:Hv,role:D8e,style:HI,key:Gl,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:Gn,height:l?Us(l):Gn,opacity:Gn},exit:{opacity:Gn},update:v={opacity:Yl,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${_}`,v.column.signal=`floor(${p} / ${_})`,b={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,b={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:pq}},QA({role:Xee,from:r,encode:cx(g,o,qI),marks:[x,I],name:u,interactive:a,sort:b})}function htn(e,t){const n=Pu(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const ite='item.orient === "left"',ste='item.orient === "right"',zF=`(${ite} || ${ste})`,ptn=`datum.vgrad && ${zF}`,mtn=jF('"top"','"bottom"','"middle"'),gtn=jF('"right"','"left"','"center"'),ytn=`datum.vgrad && ${ste} ? (${gtn}) : (${zF} && !(datum.vgrad && ${ite})) ? "left" : ${rte}`,vtn=`item._anchor || (${zF} ? "middle" : "start")`,_tn=`${ptn} ? (${ite} ? -90 : 90) : 0`,btn=`${zF} ? (datum.vgrad ? (${ste} ? "bottom" : "top") : ${mtn}) : "top"`;function wtn(e,t,n,r){const i=Pu(e,t),s={enter:{opacity:Gn},update:{opacity:Yl,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Gn}};return Eo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:vtn},angle:{signal:_tn},align:{signal:ytn},baseline:{signal:btn},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),fl({type:Hv,role:MZt,style:ete,from:r,encode:s},n)}function Etn(e,t){let n;return ot(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+yye(e.path)+")":e.sphere&&(n="geoShape("+yye(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function yye(e){return ot(e)&&e.signal?e.signal:Xe(e)}function t9e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===BF?Xee:t||Yee}function xtn(e){return{marktype:e.type,name:e.name||void 0,role:e.role||t9e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Stn(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function ote(e,t){const n=n6e(e.type);n||Te("Unrecognized transform type: "+Xe(e.type));const r=LF(n.type.toLowerCase(),null,n9e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function n9e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=Ttn(o,t,n)}return r}function Ttn(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return Atn(e,t,n);if(i===void 0){e.required&&Te("Missing required "+Xe(t.type)+" parameter: "+Xe(e.name));return}else{if(r==="param")return Ctn(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Es(i)?i.map(s=>vye(e,s,n)):vye(e,i,n)}function vye(e,t,n){const r=e.type;if(Es(t))return bye(r)?Te("Expression references can not be signals."):Vj(r)?n.fieldRef(t):wye(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||Vj(r);return i&&Itn(t)?n.exprRef(t.expr,t.as):i&&Otn(t)?KA(t.field,t.as):bye(r)?Xd(t,n):Ptn(r)?Pt(n.getData(t).values):Vj(r)?KA(t):wye(r)?n.compareRef(t):t}}function Atn(e,t,n){return rt(t.from)||Te('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function Ctn(e,t,n){const r=t[e.name];return e.array?(Ie(r)||Te("Expected an array of sub-parameters. Instead: "+Xe(r)),r.map(i=>_ye(e,i,n))):_ye(e,r,n)}function _ye(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Te("Unsupported parameter: "+Xe(t));const s=hn(n9e(i,t,n),i.key);return Pt(n.add(Sen(s)))}const Itn=e=>e&&e.expr,Otn=e=>e&&e.field,Ptn=e=>e==="data",bye=e=>e==="expr",Vj=e=>e==="field",wye=e=>e==="compare";function ktn(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Te("Only group marks can be faceted."),r.field!=null?o=a=j$(r,n):(e.data?a=Pt(n.getData(e.data).aggregate):(s=ote(hn({type:"aggregate",groupby:nt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=j$(r,n),o=a=Pt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Pt(n.add(Tf(null,[{}]))),o||(o=j$(e,n)),{key:i,pulse:o,parent:a}}function j$(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Pt(t.getData(e.data).output)}function ev(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}ev.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Pt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new ev(e,s,i,r,o)};function r9e(e){return rt(e)?e:null}function Eye(e,t,n){const r=MF(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function CS(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=een(s);let l=r9e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:fq,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Pt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(LF(r,void 0,d)),o&&(t.index[i]=f),c=Pt(f),l!=null&&(a[l]=c)}return c}ev.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=r9e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Eye(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Pt(r.output)},n&&n.field&&Eye(e,u,n),a=e.add(z8e(u)),o=e.add(Tf({pulse:Pt(a)})),o={agg:a,ref:Pt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Pt(this.values)},extentRef(e,t){return CS(e,this,"extent","extent",t,!1)},domainRef(e,t){return CS(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return CS(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return CS(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return CS(e,this,"indata","tupleindex",t,!0,!0)}};function $tn(e,t,n){const r=e.from.facet,i=r.name,s=j$(r,t);let o;r.name||Te("Facet must have a name: "+Xe(r)),r.data||Te("Facet must reference a data set: "+Xe(r)),r.field?o=t.add(H8e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(men({key:t.keyRef(r.groupby),group:Pt(t.proxy(n.parent)),pulse:s})):Te("Facet must specify groupby or field: "+Xe(r));const a=t.fork(),u=a.add(Tf()),l=a.add(Vv({pulse:Pt(u)}));a.addData(i,new ev(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function Rtn(e,t,n){const r=t.add(H8e({pulse:n.pulse})),i=t.fork();i.add(Vv()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function i9e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(ML()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Xd(l,t);u.update=c.$expr,u.params=c.$params}function UF(e,t){const n=t9e(e),r=e.type===BF,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Xee||n===Kee,a,u,l,c,f,d,h;const p=n===Yee||o||i,m=ktn(e.from,r,t);u=t.add(hen({key:m.key||(e.key?KA(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Pt(u);u=l=t.add(Tf({pulse:g})),u=t.add(ben({markdef:xtn(e),interactive:Stn(e.interactive,t),clip:Etn(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Pt(u)}));const y=Pt(u);u=c=t.add(V8e(B8e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(w=>{const x=ote(w,t),S=x.metadata;(S.generates||S.changes)&&Te("Mark transforms should not generate new data."),S.nomod||(c.params.mod=!0),x.params.pulse=Pt(u),t.add(u=x)}),e.sort&&(u=t.add(Oen({sort:t.compareRef(e.sort),pulse:Pt(u)})));const v=Pt(u);(i||o)&&(o=t.add(W8e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Pt(o));const _=t.add(U8e({mark:y,pulse:d||v}));h=Pt(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?$tn(e,t,m):p?Rtn(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=Ntn(s,h,t));const b=t.add(q8e({pulse:h})),E=t.add(Vv({pulse:Pt(b)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new ev(t,l,b,E)),e.on&&e.on.forEach(w=>{(w.insert||w.remove||w.toggle)&&Te("Marks only support modify triggers."),i9e(w,t,f)}))}function Ntn(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Es(s)?n.signalRef(s.signal):s,method:Es(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Es(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Pt(n.add(xen(o)))}function Dtn(e,t){const n=t.config.legend,r=e.encode||{},i=Pu(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;tte.forEach(_=>e[_]?(l[_]=e[_],c=c||e[_]):0),c||Te("Missing valid scale for legend.");const p=Ltn(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Pt(t.add(Tf(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Pt(t.add(ven(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===B$?(h=[utn(e,c,n,r.gradient),gye(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${w1(i.gradientLength())})/100))`)):p===mq?h=[ltn(e,c,n,r.gradient,v),gye(e,n,r.labels,v)]:(f=htn(e,n),h=[dtn(e,n,r,v,w1(f.columns))],d.size=Btn(e,t,h[0].marks)),h=[QA({role:NZt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(wtn(e,n,r.title,g)),UF(QA({role:$Zt,from:g,encode:cx(Ftn(i,e,n),s,qI),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function Ltn(e,t){let n=e.type||mye;return!e.type&&Mtn(e)===1&&(e.fill||e.stroke)&&(n=oZ(t)?B$:uH(t)?mq:mye),n!==B$?n:uH(t)?mq:B$}function Mtn(e){return tte.reduce((t,n)=>t+(e[n]?1:0),0)}function Ftn(e,t,n){const r={enter:{},update:{}};return Eo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Btn(e,t,n){const r=w1(xye("size",e,n)),i=w1(xye("strokeWidth",e,n)),s=w1(jtn(n[1].encode,t,HI));return Xd(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function xye(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Z8e(e,n[0].encode)}function jtn(e,t,n){return Z8e("fontSize",e)||otn("fontSize",t,n)}const ztn=`item.orient==="${fx}"?-90:item.orient==="${dx}"?90:0`;function Utn(e,t){e=rt(e)?{text:e}:e;const n=Pu(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Pt(t.add(Tf(null,[l])));return u.push(qtn(e,n,Vtn(e),c)),e.subtitle&&u.push(Wtn(e,n,r.subtitle,c)),UF(QA({role:FZt,from:c,encode:Htn(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function Vtn(e){const t=e.encode;return t&&t.title||hn({name:e.name,interactive:e.interactive,style:e.style},t)}function Htn(e,t){const n={enter:{},update:{}};return Eo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:rte},angle:{signal:ztn},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),cx(n,t,qI)}function qtn(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Eo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fl({type:Hv,role:BZt,style:Qen,from:r,encode:o},n)}function Wtn(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Eo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),fl({type:Hv,role:jZt,style:Jen,from:r,encode:o},n)}function Gtn(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(ote(r,t))}),e.on&&e.on.forEach(r=>{i9e(r,t,e.name)}),t.addDataPipeline(e.name,Ytn(e,t,n))}function Ytn(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Es(e.values)||M$(e.format)?(r.push(Sye(t,e)),r.push(i=iy())):r.push(i=iy({$ingest:e.values,$format:e.format})):e.url?M$(e.url)||M$(e.format)?(r.push(Sye(t,e)),r.push(i=iy())):r.push(i=iy({$request:e.url,$format:e.format})):e.source&&(i=a=nt(e.source).map(d=>Pt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=iy()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=Cen({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,iy())),i||r.push(iy()),r.push(Vv({})),r}function iy(e){const t=Tf({},e);return t.metadata={source:!0},t}function Sye(e,t){return _en({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const s9e=e=>e===f0||e===Af,VF=(e,t,n)=>Es(e)?Jtn(e.signal,t,n):e===fx||e===Af?t:n,Vs=(e,t,n)=>Es(e)?Xtn(e.signal,t,n):s9e(e)?t:n,rf=(e,t,n)=>Es(e)?Qtn(e.signal,t,n):s9e(e)?n:t,o9e=(e,t,n)=>Es(e)?Ztn(e.signal,t,n):e===Af?{value:t}:{value:n},Ktn=(e,t,n)=>Es(e)?enn(e.signal,t,n):e===dx?{value:t}:{value:n},Xtn=(e,t,n)=>a9e(`${e} === '${Af}' || ${e} === '${f0}'`,t,n),Qtn=(e,t,n)=>a9e(`${e} !== '${Af}' && ${e} !== '${f0}'`,t,n),Jtn=(e,t,n)=>ate(`${e} === '${fx}' || ${e} === '${Af}'`,t,n),Ztn=(e,t,n)=>ate(`${e} === '${Af}'`,t,n),enn=(e,t,n)=>ate(`${e} === '${dx}'`,t,n),a9e=(e,t,n)=>(t=t!=null?Us(t):t,n=n!=null?Us(n):n,Tye(t)&&Tye(n)?(t=t?t.signal||Xe(t.value):null,n=n?n.signal||Xe(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[hn({test:e},t)].concat(n||[])),Tye=e=>e==null||Object.keys(e).length===1,ate=(e,t,n)=>({signal:`${e} ? (${pb(t)}) : (${pb(n)})`}),tnn=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${fx}' ? (${pb(r)}) : `:"")+(n!=null?`${e} === '${f0}' ? (${pb(n)}) : `:"")+(i!=null?`${e} === '${dx}' ? (${pb(i)}) : `:"")+(t!=null?`${e} === '${Af}' ? (${pb(t)}) : `:"")+"(null)"}),pb=e=>Es(e)?e.signal:e==null?null:Xe(e),nnn=(e,t)=>t===0?0:Es(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Hb=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function S_(e,t,n,r){let i;if(t&&Nt(t,e))return t[e];if(Nt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[ete][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[HI][i]}return null}function Aye(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function rnn(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Es(o)){const f=Aye([n.axisX,n.axisY]),d=Aye([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Vs(o,S_(l,n.axisX,i,r),S_(l,n.axisY,i,r));u={};for(l of d)u[l]=tnn(o.signal,S_(l,n.axisTop,i,r),S_(l,n.axisBottom,i,r),S_(l,n.axisLeft,i,r),S_(l,n.axisRight,i,r))}else a=o===Af||o===f0?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?hn({},i,a,u,s):i}function inn(e,t,n,r){const i=Pu(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Gn},update:a={opacity:Yl},exit:{opacity:Gn}};Eo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Cye(e,0),c=Cye(e,1);return o.x=a.x=Vs(s,l,Gn),o.x2=a.x2=Vs(s,c),o.y=a.y=rf(s,l,Gn),o.y2=a.y2=rf(s,c),fl({type:nte,role:CZt,from:r,encode:u},n)}function Cye(e,t){return{scale:e.scale,range:t}}function snn(e,t,n,r,i){const s=Pu(e,t),o=e.orient,a=e.gridScale,u=VF(o,1,-1),l=onn(e.offset,u);let c,f,d;const h={enter:c={opacity:Gn},update:d={opacity:Yl},exit:f={opacity:Gn}};Eo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Gl,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Vs(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:hn(m,{mult:u,offset:l});return c.x=d.x=Vs(o,p,g),c.y=d.y=rf(o,p,g),c.x2=d.x2=rf(o,y),c.y2=d.y2=Vs(o,y),f.x=Vs(o,p),f.y=rf(o,p),fl({type:nte,role:IZt,key:Gl,from:r,encode:h},n)}function onn(e,t){if(t!==1)if(!ot(e))e=Es(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=hn({},e);for(;n.mult!=null;)if(ot(n.mult))n=n.mult=hn({},n.mult);else return n.mult=Es(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function ann(e,t,n,r,i,s){const o=Pu(e,t),a=e.orient,u=VF(a,-1,1);let l,c,f;const d={enter:l={opacity:Gn},update:f={opacity:Yl},exit:c={opacity:Gn}};Eo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Us(i);h.mult=u;const p={scale:e.scale,field:Gl,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Vs(a,Gn,p),f.y2=l.y2=Vs(a,h),c.x=Vs(a,p),f.x=l.x=rf(a,Gn,p),f.x2=l.x2=rf(a,h),c.y=rf(a,p),fl({type:nte,role:PZt,key:Gl,from:r,encode:d},n)}function Hj(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function unn(e,t,n,r,i,s){const o=Pu(e,t),a=e.orient,u=e.scale,l=VF(a,-1,1),c=w1(o("labelFlush")),f=w1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=Us(i);g.mult=l,g.offset=Us(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Gl,band:.5,offset:e9e(s.offset,o("labelOffset"))},v=Vs(a,p?Hj(u,c,'"left"','"right"','"center"'):{value:"center"},Ktn(a,"left","right")),_=Vs(a,o9e(a,"bottom","top"),p?Hj(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),b=Hj(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:Gn,x:Vs(a,y,g),y:rf(a,y,g)},w={enter:E,update:m={opacity:Yl,text:{field:Zee},x:E.x,y:E.y,align:v,baseline:_},exit:{opacity:Gn,x:E.x,y:E.y}};Eo(w,{dx:!d&&p?Vs(a,b):null,dy:!h&&p?rf(a,b):null}),Eo(w,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const x=o("labelBound");let S=o("labelOverlap");return S=S||x?{separation:o("labelSeparation"),method:S,order:"datum.index",bound:x?{scale:u,orient:a,tolerance:x}:null}:void 0,m.align!==v&&(m.align=Hb(m.align,v)),m.baseline!==_&&(m.baseline=Hb(m.baseline,_)),fl({type:Hv,role:OZt,style:HI,key:Gl,from:r,encode:w,overlap:S},n)}function lnn(e,t,n,r){const i=Pu(e,t),s=e.orient,o=VF(s,-1,1);let a,u;const l={enter:a={opacity:Gn,anchor:Us(i("titleAnchor",null)),align:{signal:rte}},update:u=hn({},a,{opacity:Yl,text:Us(e.title)}),exit:{opacity:Gn}},c={signal:`lerp(range("${e.scale}"), ${jF(0,1,.5)})`};return u.x=Vs(s,c),u.y=rf(s,c),a.angle=Vs(s,Gn,nnn(o,90)),a.baseline=Vs(s,o9e(s,f0,Af),{value:f0}),u.angle=a.angle,u.baseline=a.baseline,Eo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),cnn(i,s,l,n),l.update.align=Hb(l.update.align,a.align),l.update.angle=Hb(l.update.angle,a.angle),l.update.baseline=Hb(l.update.baseline,a.baseline),fl({type:Hv,role:kZt,style:ete,from:r,encode:l},n)}function cnn(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Hb(Us(a),n.update[u]),!1):!B_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Us(o):Vs(t,Us(o),Us(s))}function fnn(e,t){const n=rnn(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Pu(e,n),l=atn(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Pt(t.add(Tf({},[c]))),d=Pt(t.add(den({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(snn(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(ann(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(unn(e,n,r.labels,d,p,l))),c.domain&&h.push(inn(e,n,r.domain,f)),c.title&&h.push(lnn(e,n,r.title,f)),UF(QA({role:AZt,from:f,encode:cx(dnn(u,e),i,qI),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function dnn(e,t){const n={enter:{},update:{}};return Eo(n,{orient:e("orient"),offset:e("offset")||0,position:Nc(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function u9e(e,t,n){const r=nt(e.signals),i=nt(e.scales);return n||r.forEach(s=>j8e(s,t)),nt(e.projections).forEach(s=>Hen(s,t)),i.forEach(s=>$en(s,t)),nt(e.data).forEach(s=>Gtn(s,t)),i.forEach(s=>Ren(s,t)),(n||r).forEach(s=>fen(s,t)),nt(e.axes).forEach(s=>fnn(s,t)),nt(e.marks).forEach(s=>UF(s,t)),nt(e.legends).forEach(s=>Dtn(s,t)),e.title&&Utn(e.title,t),t.parseLambdas(),t}const hnn=e=>cx({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function pnn(e,t){const n=t.config,r=Pt(t.root=t.add(ML())),i=mnn(e,n);i.forEach(l=>j8e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Tf()),o=t.add(V8e(B8e(hnn(e.encode),BF,Kee,e.style,t,{pulse:Pt(s)}))),a=t.add(W8e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Pt(o)}));t.operators.pop(),t.pushState(Pt(o),Pt(a),null),u9e(e,t,i),t.operators.push(a);let u=t.add(U8e({mark:r,pulse:Pt(a)}));return u=t.add(q8e({pulse:Pt(u)})),u=t.add(Vv({pulse:Pt(u)})),t.addData("root",new ev(t,s,s,u)),t}function IS(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function mnn(e,t){const n=o=>Nc(e[o],t[o]),r=[IS("background",n("background")),IS("autosize",xZt(n("autosize"))),IS("padding",TZt(n("padding"))),IS("width",n("width")||0),IS("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return nt(e.signals).forEach(o=>{Nt(i,o.name)?o=hn(i[o.name],o):r.push(o),s[o.name]=o}),nt(t.signals).forEach(o=>{!Nt(s,o.name)&&!Nt(i,o.name)&&r.push(o)}),r}function l9e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Iye(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}l9e.prototype=Iye.prototype={parse(e){return u9e(e,this)},fork(){return new Iye(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof cq?Pt(e):e;return this.add(Aen({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Pt(this.add(Vv({pulse:e})))),this._parent.push(t),this._lookup.push(n?Pt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Un(this._parent)},encode(){return Un(this._encode)},lookup(){return Un(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(rt(e))return KA(e,t);e.signal||Te("Unsupported field reference: "+Xe(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Pt(this.add(gen(i)))}return r},compareRef(e){let t=!1;const n=s=>Es(s)?(t=!0,this.signalRef(s.signal)):ten(s)?(t=!0,this.exprRef(s.expr)):s,r=nt(e.field).map(n),i=nt(e.order).map(n);return t?Pt(this.add(pye({fields:r,orders:i}))):dye(r,i)},keyRef(e,t){let n=!1;const r=s=>Es(s)?(n=!0,Pt(i[s.signal])):s,i=this.signals;return e=nt(e).map(r),n?Pt(this.add(yen({fields:e,flat:t}))):QZt(e,t)},sortRef(e){if(!e)return e;const t=MF(e.op,e.field),n=e.order||JZt;return n.signal?Pt(this.add(pye({fields:t,orders:this.signalRef(n.signal)}))):dye(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Nt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Te("Duplicate signal name: "+Xe(e));const n=t instanceof cq?t:this.add(ML(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Te("Unrecognized signal name: "+Xe(e)),this.signals[e]},signalRef(e){return this.signals[e]?Pt(this.signals[e]):(Nt(this.lambdas,e)||(this.lambdas[e]=this.add(ML(null))),Pt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Xd(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ot(e)?e:this.signalRef(e.signal||ute(e))},exprRef(e,t){const n={expr:Xd(e,this)};return t&&(n.expr.$name=t),Pt(this.add(pen(n)))},addBinding(e,t){this.bindings||Te("Nested signals do not support binding: "+Xe(e)),this.bindings.push(hn({signal:e},t))},addScaleProj(e,t){Nt(this.scales,e)&&Te("Duplicate scale or projection name: "+Xe(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Ien(t))},addProjection(e,t){this.addScaleProj(e,Ten(t))},getScale(e){return this.scales[e]||Te("Unrecognized scale name: "+Xe(e)),this.scales[e]},scaleRef(e){return Pt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Nt(this.data,e)&&Te("Duplicate data set name: "+Xe(e)),this.data[e]=t},getData(e){return this.data[e]||Te("Undefined data set name: "+Xe(e)),this.data[e]},addDataPipeline(e,t){return Nt(this.data,e)&&Te("Duplicate data set name: "+Xe(e)),this.addData(e,ev.fromEntries(this,t))}};function ute(e){return(Ie(e)?gnn:ynn)(e)}function gnn(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(ot(i)?i.signal||ute(i):Xe(i))}return n+"]"}function ynn(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Xe(r)+":"+(ot(i)?i.signal||ute(i):Xe(i));return t+"}"}function vnn(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function _nn(e,t,n){return ot(e)||Te("Input Vega specification must be an object."),t=tx(vnn(),t,e.config),pnn(e,new l9e(t,n)).toRuntime()}var bnn="5.28.0";hn(Vw,tUt,Vqt,wWt,uYt,mYt,UYt,wYt,HYt,nKt,dKt,_Kt);const wnn=Object.freeze(Object.defineProperty({__proto__:null,Bounds:os,CanvasHandler:l0,CanvasRenderer:zA,DATE:bu,DAY:Ho,DAYOFYEAR:Yd,Dataflow:Ub,Debug:VLe,Error:qQ,EventStream:tF,Gradient:h4e,GroupItem:pF,HOURS:ul,Handler:u0,HybridHandler:jZ,HybridRenderer:nL,Info:ULe,Item:hF,MILLISECONDS:ff,MINUTES:ll,MONTH:Ko,Marks:cl,MultiPulse:fJ,None:zLe,Operator:Dr,Parameters:eF,Pulse:Pg,QUARTER:_u,RenderType:ig,Renderer:bl,ResourceLoader:mZ,SECONDS:nc,SVGHandler:RZ,SVGRenderer:EF,SVGStringRenderer:BZ,Scenegraph:kZ,TIME_UNITS:rJ,Transform:Ee,View:C8e,WEEK:vs,Warn:WQ,YEAR:yo,accessor:Ou,accessorFields:Yo,accessorName:Ni,array:nt,ascending:Y4,bandwidthNRD:mJ,bin:s6e,bootstrapCI:o6e,boundClip:cFe,boundContext:NI,boundItem:pH,boundMark:$4e,boundStroke:nm,changeset:jv,clampRange:eMe,codegenExpression:e8e,compare:QQ,constant:ra,cumulativeLogNormal:wJ,cumulativeNormal:rF,cumulativeUniform:TJ,dayofyear:_Me,debounce:JQ,defaultLocale:oJ,definition:n6e,densityLogNormal:bJ,densityNormal:gJ,densityUniform:SJ,domChild:gs,domClear:Ll,domCreate:ng,domFind:$Z,dotbin:a6e,error:Te,expressionFunction:Gi,extend:hn,extent:Gd,extentIndex:tMe,falsy:xm,fastmap:rx,field:ec,flush:nMe,font:_F,fontFamily:MI,fontSize:lh,format:w$,formatLocale:U3,formats:lJ,hasOwnProperty:Nt,id:wI,identity:na,inferType:qMe,inferTypes:WMe,ingest:dr,inherits:We,inrange:lb,interpolate:aZ,interpolateColors:fF,interpolateRange:Z6e,intersect:oFe,intersectBoxLine:cb,intersectPath:gZ,intersectPoint:yZ,intersectRule:w4e,isArray:Ie,isBoolean:B0,isDate:Ig,isFunction:pn,isIterable:rMe,isNumber:Jn,isObject:ot,isRegExp:iMe,isString:rt,isTuple:J4,key:ZQ,lerp:sMe,lineHeight:o0,loader:X4,locale:VMe,logger:GQ,lruCache:oMe,markup:FZ,merge:aMe,mergeConfig:tx,multiLineOffset:IZ,one:ex,pad:uMe,panLinear:YLe,panLog:KLe,panPow:XLe,panSymlog:QLe,parse:_nn,parseExpression:Dee,parseSelector:z0,path:Q6,pathCurves:dZ,pathEqual:fFe,pathParse:Gw,pathRectangle:g4e,pathRender:MA,pathSymbols:m4e,pathTrail:y4e,peek:Un,point:wF,projection:see,quantileLogNormal:EJ,quantileNormal:iF,quantileUniform:AJ,quantiles:hJ,quantizeInterpolator:e4e,quarter:JLe,quartiles:pJ,get random(){return rc},randomInteger:szt,randomKDE:vJ,randomLCG:izt,randomLogNormal:l6e,randomMixture:c6e,randomNormal:yJ,randomUniform:f6e,read:KMe,regressionConstant:CJ,regressionExp:h6e,regressionLinear:IJ,regressionLoess:g6e,regressionLog:d6e,regressionPoly:m6e,regressionPow:p6e,regressionQuad:OJ,renderModule:xF,repeat:sT,resetDefaultLocale:t7t,resetSVGClipId:_4e,resetSVGDefIds:aqt,responseType:YMe,runtimeContext:p8e,sampleCurve:oF,sampleLogNormal:_J,sampleNormal:nF,sampleUniform:xJ,scale:or,sceneEqual:zZ,sceneFromJSON:N4e,scenePickVisit:G3,sceneToJSON:R4e,sceneVisit:df,sceneZOrder:vZ,scheme:uZ,serializeXML:Q4e,setHybridRendererOptions:rqt,setRandom:nzt,span:EI,splitAccessPath:uh,stringValue:Xe,textMetrics:el,timeBin:LMe,timeFloor:AMe,timeFormatLocale:NA,timeInterval:ix,timeOffset:OMe,timeSequence:$Me,timeUnitSpecifier:vMe,timeUnits:iJ,toBoolean:eJ,toDate:tJ,toNumber:qo,toSet:cf,toString:nJ,transform:r6e,transforms:Vw,truncate:lMe,truthy:tc,tupleid:kt,typeParsers:sH,utcFloor:CMe,utcInterval:sx,utcOffset:PMe,utcSequence:RMe,utcdayofyear:EMe,utcquarter:ZLe,utcweek:xMe,version:bnn,visitArray:km,week:bMe,writeConfig:nx,zero:jm,zoomLinear:YQ,zoomLog:KQ,zoomPow:j3,zoomSymlog:XQ},Symbol.toStringTag,{value:"Module"}));function Enn(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var xnn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Snn={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Tnn={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Ann=Array.prototype.slice,sy=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,Ann.call(t,1))},Cnn=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var Inn={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:Cnn,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return sy("join",arguments)},indexof:function(){return sy("indexOf",arguments)},lastindexof:function(){return sy("lastIndexOf",arguments)},slice:function(){return sy("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return sy("substring",arguments,String)},split:function(){return sy("split",arguments,String)},replace:function(){return sy("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const Onn=["view","item","group","xy","x","y"],yq=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&yq.add(setImmediate);const Pnn={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:xnn[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),yq.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||Inn[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Snn[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Tnn[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,yq.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function OS(e,t,n,r,i,s){const o=a=>Pnn[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,Onn.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var knn={operator(e,t){const n=t.ast,r=e.functions;return i=>OS(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>OS(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>OS(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return OS(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=OS(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&Enn(o,r,s),l}}};const $nn="vega-lite",Rnn='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',Nnn="5.17.0",Dnn=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],Lnn="https://vega.github.io/vega-lite/",Mnn="Vega-Lite is a concise high-level language for interactive visualization.",Fnn=["vega","chart","visualization"],Bnn="build/vega-lite.js",jnn="build/vega-lite.min.js",znn="build/vega-lite.min.js",Unn="build/src/index",Vnn="build/src/index.d.ts",Hnn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},qnn=["bin","build","src","vega-lite*","tsconfig.json"],Wnn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Gnn={type:"git",url:"https://github.com/vega/vega-lite.git"},Ynn="BSD-3-Clause",Knn={url:"https://github.com/vega/vega-lite/issues"},Xnn={"@babel/core":"^7.23.9","@babel/preset-env":"^7.23.9","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.11","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^6.20.0","@typescript-eslint/parser":"^6.20.0",ajv:"^8.12.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.8.5","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.3","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^9.0.2",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.4",puppeteer:"^15.0.0","release-it":"^17.0.3",rollup:"^4.9.6","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.1",terser:"^5.27.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.3.3","vega-cli":"^5.27.0","vega-datasets":"^2.8.0","vega-embed":"^6.24.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},Qnn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},Jnn={vega:"^5.24.0"},Znn={node:">=18"},ern={name:$nn,author:Rnn,version:Nnn,collaborators:Dnn,homepage:Lnn,description:Mnn,keywords:Fnn,main:Bnn,unpkg:jnn,jsdelivr:znn,module:Unn,types:Vnn,bin:Hnn,files:qnn,scripts:Wnn,repository:Gnn,license:Ynn,bugs:Knn,devDependencies:Xnn,dependencies:Qnn,peerDependencies:Jnn,engines:Znn};function lte(e){return!!e.or}function cte(e){return!!e.and}function fte(e){return!!e.not}function z$(e,t){if(fte(e))z$(e.not,t);else if(cte(e))for(const n of e.and)z$(n,t);else if(lte(e))for(const n of e.or)z$(n,t);else t(e)}function qb(e,t){return fte(e)?{not:qb(e.not,t)}:cte(e)?{and:e.and.map(n=>qb(n,t))}:lte(e)?{or:e.or.map(n=>qb(n,t))}:t(e)}const qt=structuredClone;function c9e(e){throw new Error(e)}function eE(e,t){const n={};for(const r of t)Nt(e,r)&&(n[r]=e[r]);return n}function fu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Pr(e)).join(",")})`};function kn(e){if(Jn(e))return e;const t=rt(e)?e:Pr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function vq(e){return e===!1||e===null}function $n(e,t){return e.includes(t)}function tv(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function dte(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function f9e(e,...t){for(const n of t)trn(e,n??{});return e}function trn(e,t){for(const n of De(t))nx(e,n,t[n],!0)}function md(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function nrn(e,t){const n=De(e),r=De(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function d9e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function hte(e,t){for(const n of e)if(t.has(n))return!0;return!1}function _q(e){const t=new Set;for(const n of e){const i=uh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function pte(e,t){return e===void 0||t===void 0?!0:hte(_q(e),_q(t))}function Or(e){return De(e).length===0}const De=Object.keys,vo=Object.values,d0=Object.entries;function JA(e){return e===!0||e===!1}function hi(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function S2(e,t){return fte(e)?`!(${S2(e.not,t)})`:cte(e)?`(${e.and.map(n=>S2(n,t)).join(") && (")})`:lte(e)?`(${e.or.map(n=>S2(n,t)).join(") || (")})`:t(e)}function FL(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&FL(e[n],t)&&delete e[n],Or(e)}function WI(e){return e.charAt(0).toUpperCase()+e.substr(1)}function mte(e,t="datum"){const n=uh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Xe).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function h9e(e,t="datum"){return`${t}[${Xe(uh(e).join("."))}]`}function rrn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function sc(e){return`${uh(e).map(rrn).join("\\.")}`}function nv(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function gte(e){return`${uh(e).join(".")}`}function tE(e){return e?uh(e).length:0}function qi(...e){for(const t of e)if(t!==void 0)return t}let p9e=42;function m9e(e){const t=++p9e;return e?String(e)+t:t}function irn(){p9e=42}function g9e(e){return y9e(e)?e:`__${e}`}function y9e(e){return e.startsWith("__")}function ZA(e){if(e!==void 0)return(e%360+360)%360}function HF(e){return Jn(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Oye=Object.getPrototypeOf(structuredClone({}));function Xu(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Xu(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Xu(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Oye.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Oye.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Xu(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Pr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const mp="row",gp="column",qF="facet",pi="x",Xs="y",Cf="x2",hh="y2",U0="xOffset",hx="yOffset",If="radius",im="radius2",yc="theta",sm="theta2",Of="latitude",Pf="longitude",kf="latitude2",oc="longitude2",Eu="color",ph="fill",mh="stroke",xu="shape",om="size",qv="angle",am="opacity",V0="fillOpacity",H0="strokeOpacity",q0="strokeWidth",W0="strokeDash",GI="text",nE="order",YI="detail",WF="key",rv="tooltip",GF="href",YF="url",KF="description",srn={x:1,y:1,x2:1,y2:1},v9e={theta:1,theta2:1,radius:1,radius2:1};function _9e(e){return e in v9e}const yte={longitude:1,longitude2:1,latitude:1,latitude2:1};function b9e(e){switch(e){case Of:return"y";case kf:return"y2";case Pf:return"x";case oc:return"x2"}}function w9e(e){return e in yte}const orn=De(yte),vte={...srn,...v9e,...yte,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Wb(e){return e===Eu||e===ph||e===mh}const E9e={row:1,column:1,facet:1},Hl=De(E9e),_te={...vte,...E9e},arn=De(_te),{order:DEn,detail:LEn,tooltip:MEn,...urn}=_te,{row:FEn,column:BEn,facet:jEn,...lrn}=urn;function crn(e){return!!lrn[e]}function x9e(e){return!!_te[e]}const frn=[Cf,hh,kf,oc,sm,im];function S9e(e){return Wv(e)!==e}function Wv(e){switch(e){case Cf:return pi;case hh:return Xs;case kf:return Of;case oc:return Pf;case sm:return yc;case im:return If}return e}function h0(e){if(_9e(e))switch(e){case yc:return"startAngle";case sm:return"endAngle";case If:return"outerRadius";case im:return"innerRadius"}return e}function gh(e){switch(e){case pi:return Cf;case Xs:return hh;case Of:return kf;case Pf:return oc;case yc:return sm;case If:return im}}function Su(e){switch(e){case pi:case Cf:return"width";case Xs:case hh:return"height"}}function T9e(e){switch(e){case pi:return"xOffset";case Xs:return"yOffset";case Cf:return"x2Offset";case hh:return"y2Offset";case yc:return"thetaOffset";case If:return"radiusOffset";case sm:return"theta2Offset";case im:return"radius2Offset"}}function bte(e){switch(e){case pi:return"xOffset";case Xs:return"yOffset"}}function drn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const hrn=De(vte),{x:zEn,y:UEn,x2:VEn,y2:HEn,xOffset:qEn,yOffset:WEn,latitude:GEn,longitude:YEn,latitude2:KEn,longitude2:XEn,theta:QEn,theta2:JEn,radius:ZEn,radius2:exn,...wte}=vte,prn=De(wte),Ete={x:1,y:1},yh=De(Ete);function Wi(e){return e in Ete}const xte={theta:1,radius:1},mrn=De(xte);function XF(e){return e==="width"?pi:Xs}const A9e={xOffset:1,yOffset:1};function KI(e){return e in A9e}const{text:txn,tooltip:nxn,href:rxn,url:ixn,description:sxn,detail:oxn,key:axn,order:uxn,...C9e}=wte,grn=De(C9e);function yrn(e){return!!wte[e]}function vrn(e){switch(e){case Eu:case ph:case mh:case om:case xu:case am:case q0:case W0:return!0;case V0:case H0:case qv:return!1}}const I9e={...Ete,...xte,...A9e,...C9e},QF=De(I9e);function um(e){return!!I9e[e]}function _rn(e,t){return wrn(e)[t]}const O9e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:lxn,...brn}=O9e;function wrn(e){switch(e){case Eu:case ph:case mh:case KF:case YI:case WF:case rv:case GF:case nE:case am:case V0:case H0:case q0:case qF:case mp:case gp:return O9e;case pi:case Xs:case U0:case hx:case Of:case Pf:return brn;case Cf:case hh:case kf:case oc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case om:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case W0:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case xu:return{point:"always",geoshape:"always"};case GI:return{text:"always"};case qv:return{point:"always",square:"always",text:"always"};case YF:return{image:"always"};case yc:return{text:"always",arc:"always"};case If:return{text:"always",arc:"always"};case sm:case im:return{arc:"always"}}}function qj(e){switch(e){case pi:case Xs:case yc:case If:case U0:case hx:case om:case qv:case q0:case am:case V0:case H0:case Cf:case hh:case sm:case im:return;case qF:case mp:case gp:case xu:case W0:case GI:case rv:case GF:case YF:case KF:return"discrete";case Eu:case ph:case mh:return"flexible";case Of:case Pf:case kf:case oc:case YI:case WF:case nE:return}}const Ern={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},xrn={count:1,min:1,max:1};function Bp(e){return!!e&&!!e.argmin}function G0(e){return!!e&&!!e.argmax}function Ste(e){return rt(e)&&!!Ern[e]}const Srn=new Set(["count","valid","missing","distinct"]);function P9e(e){return rt(e)&&Srn.has(e)}function Trn(e){return rt(e)&&$n(["min","max"],e)}const Arn=new Set(["count","sum","distinct","valid","missing"]),Crn=new Set(["mean","average","median","q1","q3","min","max"]);function k9e(e){return B0(e)&&(e=l5(e,void 0)),"bin"+De(e).map(t=>JF(e[t])?hi(`_${t}_${d0(e[t])}`):hi(`_${t}_${e[t]}`)).join("")}function Hr(e){return e===!0||Gv(e)&&!e.binned}function oo(e){return e==="binned"||Gv(e)&&e.binned===!0}function Gv(e){return ot(e)}function JF(e){return e==null?void 0:e.param}function Pye(e){switch(e){case mp:case gp:case om:case Eu:case ph:case mh:case q0:case am:case V0:case H0:case xu:return 6;case W0:return 4;default:return 10}}function XI(e){return!!(e!=null&&e.expr)}function Ja(e){const t=De(e||{}),n={};for(const r of t)n[r]=qu(e[r]);return n}function $9e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=eE(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:v}}function Dm(e){return rt(e)||Ie(e)&&rt(e[0])}function Tt(e){return!!(e!=null&&e.signal)}function Y0(e){return!!e.step}function Irn(e){return Ie(e)?!1:"fields"in e&&!("data"in e)}function Orn(e){return Ie(e)?!1:"fields"in e&&"data"in e}function Zh(e){return Ie(e)?!1:"field"in e&&"data"in e}const Prn={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},krn=De(Prn),$rn={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},bq=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function R9e(e){const t=Ie(e.condition)?e.condition.map(kye):kye(e.condition);return{...qu(e),condition:t}}function qu(e){if(XI(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function kye(e){if(XI(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Xr(e){if(XI(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Tt(e)?e:e!==void 0?{value:e}:void 0}function Rrn(e){return Tt(e)?e.signal:Xe(e)}function $ye(e){return Tt(e)?e.signal:Xe(e.value)}function Yc(e){return Tt(e)?e.signal:e==null?null:Xe(e)}function Nrn(e,t,n){for(const r of n){const i=jp(r,t.markDef,t.config);i!==void 0&&(e[r]=Xr(i))}return e}function N9e(e){return[].concat(e.type,e.style??[])}function fr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:jp(e,t,n,r)}function jp(e,t,n,{vgChannel:r}={}){return qi(r?BL(e,t,n.style):void 0,BL(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function BL(e,t,n){return D9e(e,N9e(t),n)}function D9e(e,t,n){t=nt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function L9e(e,t){return nt(e).reduce((n,r)=>(n.field.push(Je(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function M9e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Xu(i,r))return;n.push(r)}),n}function F9e(e,t){return Xu(e,t)||!t?e:e?[...nt(e),...nt(t)].join(", "):t}function B9e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Dm(n)||Tt(n))&&(Dm(r)||Tt(r)))return{explicit:e.explicit,value:F9e(n,r)};if(Dm(n)||Tt(n))return{explicit:e.explicit,value:n};if(Dm(r)||Tt(r))return{explicit:e.explicit,value:r};if(!Dm(n)&&!Tt(n)&&!Dm(r)&&!Tt(r))return{explicit:e.explicit,value:M9e(n,r)};throw new Error("It should never reach here")}function Tte(e){return`Invalid specification ${Pr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Drn='Autosize "fit" only works for single views and layered views.';function Rye(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Nye(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Dye(e){return e?`Dropping "fit-${e}" because spec has discrete ${Su(e)}.`:'Dropping "fit" because spec has discrete size.'}function Ate(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Lye(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Lrn(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Mrn(e){return`The "nearest" transform is not supported for ${e} marks.`}function j9e(e){return`Selection not supported for ${e} yet.`}function Frn(e){return`Cannot find a selection named "${e}".`}const Brn="Scale bindings are currently only supported for scales with unbinned, continuous domains.",jrn="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",zrn="Legend bindings are only supported for selections over an individual field or encoding channel.";function Urn(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Vrn(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Hrn="The same selection must be used to override scale domains in a layered view.",qrn='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Wrn(e){return`Unknown repeated value "${e}".`}function Mye(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Grn="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Yrn(e){return`Unrecognized parse "${e}".`}function Fye(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Krn="Attempt to add the same child twice.";function Xrn(e){return`Ignoring an invalid transform: ${Pr(e)}.`}const Qrn='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Bye(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Jrn(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Pr(t)} is overridden by a child projection ${Pr(n)}.`}const Zrn="Arc marks uses theta channel rather than angle, replacing angle with theta.";function ein(e){return`${e}Offset dropped because ${e} is continuous`}function tin(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Pr(n)}}.`}function z9e(e){return`Invalid field type "${e}".`}function nin(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function rin(e){return`Invalid aggregation operator "${e}".`}function U9e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function iin(e){return`Position range does not support relative band size for ${e}.`}function wq(e,t){return`Dropping ${Pr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const sin="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function ZF(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function oin(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function ain(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function uin(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function lin(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function Wj(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function cin(e){return`The ${e} for range marks cannot be an expression`}function fin(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function din(e,t){return`Specified orient "${e}" overridden with "${t}".`}function hin(e){return`Cannot use the scale property "${e}" with non-color channel.`}function pin(e){return`Cannot use the relative band size with ${e} scale.`}function min(e){return`Using unaggregated domain with raw field has no effect (${Pr(e)}).`}function gin(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function yin(e){return`Unaggregated domain is currently unsupported for log scale (${Pr(e)}).`}function vin(e){return`Cannot apply size to non-oriented mark "${e}".`}function _in(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function bin(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function V9e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function H9e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function win(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Pr(n)} and ${Pr(r)}). Using ${Pr(n)}.`}function Ein(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Pr(n)} and ${Pr(r)}). Using the union of the two domains.`}function xin(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function Sin(e){return`Dropping sort property ${Pr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const jye="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Tin="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Ain="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Cin="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Iin(e){return`Cannot stack "${e}" if there is already "${e}2".`}function Oin(e){return`Cannot stack non-linear scale (${e}).`}function Pin(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function jL(e,t){return`Invalid ${e}: ${Pr(t)}.`}function kin(e){return`Dropping day from datetime ${Pr(e)} as day cannot be combined with other units.`}function $in(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Rin(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Nin(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function zye(e){return`1D error band does not support ${e}.`}function q9e(e){return`Channel ${e} is required for "binned" bin.`}function Din(e){return`Channel ${e} should not be used with "binned" bin.`}function Lin(e){return`Domain for ${e} is required for threshold scale.`}const W9e=GQ(WQ);let rE=W9e;function Min(e){return rE=e,rE}function Fin(){return rE=W9e,rE}function Ue(...e){rE.warn(...e)}function Bin(...e){rE.debug(...e)}function Yv(e){if(e&&ot(e)){for(const t of Ite)if(t in e)return!0}return!1}const G9e=["january","february","march","april","may","june","july","august","september","october","november","december"],jin=G9e.map(e=>e.substr(0,3)),Y9e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],zin=Y9e.map(e=>e.substr(0,3));function Uin(e){if(HF(e)&&(e=+e),Jn(e))return e>4&&Ue(jL("quarter",e)),e-1;throw new Error(jL("quarter",e))}function Vin(e){if(HF(e)&&(e=+e),Jn(e))return e-1;{const t=e.toLowerCase(),n=G9e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=jin.indexOf(r);if(i!==-1)return i;throw new Error(jL("month",e))}}function Hin(e){if(HF(e)&&(e=+e),Jn(e))return e%7;{const t=e.toLowerCase(),n=Y9e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=zin.indexOf(r);if(i!==-1)return i;throw new Error(jL("day",e))}}function Cte(e,t){const n=[];if(t&&e.day!==void 0&&De(e).length>1&&(Ue(kin(e)),e=qt(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Vin(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Uin(e.quarter):e.quarter;n.push(Jn(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?Hin(e.day):e.day;n.push(Jn(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function iv(e){const n=Cte(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function qin(e){const n=Cte(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Win(e){const t=Cte(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const K9e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Ite=De(K9e);function Gin(e){return!!K9e[e]}function Kv(e){return ot(e)?e.binned:X9e(e)}function X9e(e){return e&&e.startsWith("binned")}function Ote(e){return e.startsWith("utc")}function Yin(e){return e.substring(3)}const Kin={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function e5(e){return Ite.filter(t=>J9e(e,t))}function Q9e(e){const t=e5(e);return t[t.length-1]}function J9e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Xin(e,t,{end:n}={end:!1}){const r=mte(t),i=Ote(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Ite)J9e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),qin(a)}function Z9e(e){if(!e)return;const t=e5(e);return`timeUnitSpecifier(${Pr(t)}, ${Pr(Kin)})`}function Qin(e,t,n){if(!e)return;const r=Z9e(e);return`${n||Ote(e)?"utc":"time"}Format(${t}, ${r})`}function qs(e){if(!e)return;let t;return rt(e)?X9e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ot(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Ote(t.unit)&&(t.utc=!0,t.unit=Yin(t.unit)),t}function Jin(e){const{utc:t,...n}=qs(e);return n.unit?(t?"utc":"")+De(n).map(r=>hi(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+De(n).map(r=>hi(`_${r}_${n[r]}`)).join("")}function eBe(e,t=n=>n){const n=qs(e),r=Q9e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=tBe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(iv(a))} - ${t(iv(i))}`}}const Zin={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function esn(e){return!!Zin[e]}function tBe(e,t=1){if(esn(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function tsn(e){return e==null?void 0:e.param}function Pte(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function kte(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function $te(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Rte(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Nte(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Dte(e){if(e!=null&&e.field){if(Ie(e.range)&&e.range.length===2)return!0;if(Tt(e.range))return!0}return!1}function Lte(e){return!!(e!=null&&e.field)&&(Ie(e.oneOf)||Ie(e.in))}function nsn(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function nBe(e){return Lte(e)||Pte(e)||Dte(e)||kte(e)||Rte(e)||$te(e)||Nte(e)}function Bf(e,t){return c5(e,{timeUnit:t,wrapTime:!0})}function rsn(e,t){return e.map(n=>Bf(n,t))}function rBe(e,t=!0){const{field:n}=e,r=qs(e.timeUnit),{unit:i,binned:s}=r||{},o=Je(e,{expr:"datum"}),a=i?`time(${s?o:Xin(i,n)})`:o;if(Pte(e))return`${a}===${Bf(e.equal,i)}`;if(kte(e)){const u=e.lt;return`${a}<${Bf(u,i)}`}else if(Rte(e)){const u=e.gt;return`${a}>${Bf(u,i)}`}else if($te(e)){const u=e.lte;return`${a}<=${Bf(u,i)}`}else if(Nte(e)){const u=e.gte;return`${a}>=${Bf(u,i)}`}else{if(Lte(e))return`indexof([${rsn(e.oneOf,i).join(",")}], ${a}) !== -1`;if(nsn(e))return Mte(a,e.valid);if(Dte(e)){const{range:u}=e,l=Tt(u)?{signal:`${u.signal}[0]`}:u[0],c=Tt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Bf(l,i)+", "+Bf(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Bf(l,i)}`),c!==null&&f.push(`${a} <= ${Bf(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Pr(e)}`)}function Mte(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function isn(e){return nBe(e)&&e.timeUnit?{...e,timeUnit:qs(e.timeUnit)}:e}const QI={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function ssn(e){return e==="quantitative"||e==="temporal"}function iBe(e){return e==="ordinal"||e==="nominal"}const sv=QI.quantitative,Fte=QI.ordinal,iE=QI.temporal,Bte=QI.nominal,px=QI.geojson;function osn(e){if(e)switch(e=e.toLowerCase(),e){case"q":case sv:return"quantitative";case"t":case iE:return"temporal";case"o":case Fte:return"ordinal";case"n":case Bte:return"nominal";case px:return"geojson"}}const du={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},Eq={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function asn(e,t){const n=Eq[e],r=Eq[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const usn={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Uye(e){return usn[e]}const sBe=new Set(["linear","log","pow","sqrt","symlog"]),oBe=new Set([...sBe,"time","utc"]);function aBe(e){return sBe.has(e)}const uBe=new Set(["quantile","quantize","threshold"]),lsn=new Set([...oBe,...uBe,"sequential","identity"]),csn=new Set(["ordinal","bin-ordinal","point","band"]);function Ws(e){return csn.has(e)}function dl(e){return lsn.has(e)}function Kc(e){return oBe.has(e)}function sE(e){return uBe.has(e)}const fsn={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function dsn(e){return!rt(e)&&!!e.name}function lBe(e){return e==null?void 0:e.param}function hsn(e){return e==null?void 0:e.unionWith}function psn(e){return ot(e)&&"field"in e}const msn={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:cxn,domain:fxn,range:dxn,rangeMax:hxn,rangeMin:pxn,scheme:mxn,...gsn}=msn,ysn=De(gsn);function xq(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Kc(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Kc(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Kc(e);case"nice":return Kc(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return dl(e)&&!$n(["log","time","utc","threshold","quantile"],e)}}function cBe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Wb(e)?void 0:hin(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function vsn(e,t){return $n([Fte,Bte],t)?e===void 0||Ws(e):t===iE?$n([du.TIME,du.UTC,void 0],e):t===sv?aBe(e)||sE(e)||e===void 0:!0}function _sn(e,t,n=!1){if(!um(e))return!1;switch(e){case pi:case Xs:case U0:case hx:case yc:case If:return Kc(t)||t==="band"?!0:t==="point"?!n:!1;case om:case q0:case am:case V0:case H0:case qv:return Kc(t)||sE(t)||$n(["band","point","ordinal"],t);case Eu:case ph:case mh:return t!=="band";case W0:case xu:return t==="ordinal"||sE(t)}}const La={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},fBe=La.arc,t5=La.area,n5=La.bar,bsn=La.image,r5=La.line,i5=La.point,wsn=La.rect,zL=La.rule,dBe=La.text,jte=La.tick,Esn=La.trail,zte=La.circle,Ute=La.square,hBe=La.geoshape;function K0(e){return["line","area","trail"].includes(e)}function eC(e){return["rect","bar","image","arc"].includes(e)}const xsn=new Set(De(La));function Qd(e){return e.type}const Ssn=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Tsn=["fill","fillOpacity"],Asn=[...Ssn,...Tsn],Csn={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Vye=De(Csn),Isn={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},Osn={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},Psn={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},pBe=De(Psn);function ov(e){return e&&e.band!=null}const ksn={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},mBe=5,$sn={binSpacing:1,continuousBandSize:mBe,minBandSize:.25,timeUnitBandPosition:.5},Rsn={binSpacing:0,continuousBandSize:mBe,minBandSize:.25,timeUnitBandPosition:.5},Nsn={thickness:1};function Dsn(e){return Qd(e)?e.type:e}function Vte(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=qte(e);return Ve(n)&&!P9e(n.aggregate)&&i&&Kc(i.get("type"))?Lsn({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function Lsn({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return K0(n.type)?r:fr("invalid",n,i)===null?[Msn(e,t),r]:r}function Msn(e,t){const n=Hte(e,!0),i=Wv(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Hte(e,t=!0){return Mte(rt(e)?e:Je(e,{expr:"datum"}),!t)}function Fsn(e){const{datum:t}=e;return Yv(t)?iv(t):`${Pr(t)}`}function E1(e,t,n,r){const i={};if(t&&(i.scale=t),vh(e)){const{datum:s}=e;Yv(s)?i.signal=iv(s):Tt(s)?i.signal=s.signal:XI(s)?i.signal=s.expr:i.value=s}else i.field=Je(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function UL({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Tt(o)&&0<o&&o<1?"datum":void 0,u=Je(t,{expr:a,suffix:i}),l=n!==void 0?Je(n,{expr:a}):Je(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Tt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function Bsn({scaleName:e,fieldDef:t}){const n=Je(t,{expr:"datum"}),r=Je(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function qte({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Jt(t)){const f=o==null?void 0:o.get("type");if(ka(t)){c??(c=p0({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Hr(d)||c&&h&&p===iE)return a!=null&&a.impute?E1(t,s,{binSuffix:"mid"},{offset:u}):c&&!Ws(f)?UL({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):E1(t,s,tO(t,e)?{binSuffix:"range"}:{},{offset:u});if(oo(d)){if(Ve(n))return UL({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Ue(q9e(e===pi?Cf:hh))}}return E1(t,s,Ws(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(hf(t)){const f=t.value,d=u?{offset:u}:{};return{...T2(e,f),...d}}}return pn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function T2(e,t){return $n(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:$n(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Xr(t)}function av(e){return e&&e!=="number"&&e!=="time"}function gBe(e,t,n){return`${e}(${t}${n?`, ${Pr(n)}`:""})`}const jsn="  ";function Wte({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(av(n))return Xc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=yBe(e,r,i),a=oE(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Xc({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Xc({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ve(e)&&e.timeUnit===void 0)return Xc({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(uE(e)){const c=Usn({field:o,timeUnit:Ve(e)?(u=qs(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:Xv(e)&&((l=e.scale)==null?void 0:l.type)===du.UTC});return c?{signal:c}:void 0}if(t=Sq({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ve(e)&&Hr(e.bin)){const c=Je(e,{expr:r,binSuffix:"end"});return{signal:JI(o,c,t,n,s)}}else return t||oE(e)==="quantitative"?{signal:`${bBe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function yBe(e,t,n){return Ve(e)?n?`${Je(e,{expr:t,suffix:"end"})}-${Je(e,{expr:t,suffix:"start"})}`:Je(e,{expr:t}):Fsn(e)}function Xc({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=yBe(e,r,i)),o!=="datum.value"&&Ve(e)&&Hr(e.bin)){const a=Je(e,{expr:r,binSuffix:"end"});return{signal:JI(o,a,t,n,s)}}return{signal:gBe(n,o,t)}}function vBe(e,t,n,r,i,s){var o;if(!(rt(r)&&av(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&oE(e)==="quantitative"&&(i.normalizedNumberFormatType&&aE(e)&&e.stack==="normalize"||i.numberFormatType))){if(aE(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return Sq({type:"quantitative",config:i,normalizeStack:!0});if(uE(e)){const a=Ve(e)?(o=qs(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:zsn({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return Sq({type:t,specifiedFormat:n,config:i})}}function _Be(e,t,n){var r;if(e&&(Tt(e)||e==="number"||e==="time"))return e;if(uE(t)&&n!=="time"&&n!=="utc")return Ve(t)&&((r=qs(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function Sq({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(rt(t))return t;if(e===sv)return r?n.normalizedNumberFormat:n.numberFormat}function zsn({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:Z9e(t)}:r?void 0:n.timeFormat)}function bBe(e,t){return`format(${e}, "${t||""}")`}function Hye(e,t,n,r){return av(n)?gBe(n,e,t):bBe(e,(rt(t)?t:void 0)??r.numberFormat)}function JI(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return JI(e,t,i.numberFormat,i.numberFormatType,i);const s=Hye(e,n,r,i),o=Hye(t,n,r,i);return`${Mte(e,!1)} ? "null" : ${s} + "${jsn}" + ${o}`}function Usn({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=rt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):Qin(t,e,s)}const s5="min",Vsn={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function qye(e){return e in Vsn}function wBe(e){return!!(e!=null&&e.encoding)}function Pd(e){return e&&(e.op==="count"||!!e.field)}function EBe(e){return e&&Ie(e)}function ZI(e){return"row"in e||"column"in e}function Gte(e){return!!e&&"header"in e}function o5(e){return"facet"in e}function Hsn(e){return e.param}function qsn(e){return e&&!rt(e)&&"repeat"in e}function Wye(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Yte(e){return"sort"in e}function p0({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Jt(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ve(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return jp("timeUnitBandPosition",n,r);if(Hr(s))return .5}}function xBe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Su(e),u=fr(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ve(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:jp("timeUnitBandSize",r,i)};if(Hr(h)&&!Ws(s))return{band:1}}if(eC(r.type))return s?Ws(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function SBe(e,t,n,r){return Hr(e.bin)||e.timeUnit&&ka(e)&&e.type==="temporal"?p0({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function TBe(e){return e&&!!e.sort&&!e.field}function a5(e){return e&&"condition"in e}function u5(e){const t=e==null?void 0:e.condition;return!!t&&!Ie(t)&&Ve(t)}function eO(e){const t=e==null?void 0:e.condition;return!!t&&!Ie(t)&&Jt(t)}function Wsn(e){const t=e==null?void 0:e.condition;return!!t&&(Ie(t)||hf(t))}function Ve(e){return e&&(!!e.field||e.aggregate==="count")}function oE(e){return e==null?void 0:e.type}function vh(e){return e&&"datum"in e}function ug(e){return ka(e)&&!HL(e)||VL(e)}function Gye(e){return ka(e)&&e.type==="quantitative"&&!e.bin||VL(e)}function VL(e){return vh(e)&&Jn(e.datum)}function Jt(e){return Ve(e)||vh(e)}function ka(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function hf(e){return e&&"value"in e&&"value"in e}function Xv(e){return e&&("scale"in e||"sort"in e)}function aE(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function ABe(e){return e&&"legend"in e}function CBe(e){return e&&("format"in e||"formatType"in e)}function Gsn(e){return fu(e,["legend","axis","header","scale"])}function Ysn(e){return"op"in e}function Je(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(Xsn(e))n=g9e("count");else{let o;if(!t.nofn)if(Ysn(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Hr(a)?(o=k9e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?G0(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Bp(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!Kv(l)&&(o=Jin(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?gte(n):t.expr?h9e(n,t.expr)+s:sc(n)+s}function HL(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ve(e)&&!!e.bin;case"temporal":return!1}throw new Error(z9e(e.type))}function Ksn(e){var t;return Xv(e)&&sE((t=e.scale)==null?void 0:t.type)}function Xsn(e){return e.aggregate==="count"}function Qsn(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Hr(r))return`${n} (binned)`;if(i&&!Kv(i)){const a=(o=qs(i))==null?void 0:o.unit;if(a)return`${n} (${e5(a).join("-")})`}else if(s)return G0(s)?`${n} for max ${s.argmax}`:Bp(s)?`${n} for min ${s.argmin}`:`${WI(s)} of ${n}`;return n}function Jsn(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(G0(t))return`${i} for argmax(${t.argmax})`;if(Bp(t))return`${i} for argmin(${t.argmin})`;const s=r&&!Kv(r)?qs(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Hr(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const IBe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Jsn(e);default:return Qsn(e,t)}};let OBe=IBe;function PBe(e){OBe=e}function Zsn(){PBe(IBe)}function Gb(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Kte(e))==null?void 0:a.title;if(!Ve(e))return i??e.title;const s=e,o=r?Xte(s,t):void 0;return n?qi(i,s.title,o):i??s.title??o}function Kte(e){if(aE(e)&&e.axis)return e.axis;if(ABe(e)&&e.legend)return e.legend;if(Gte(e)&&e.header)return e.header}function Xte(e,t){return OBe(e,t)}function qL(e){if(CBe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Kte(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function eon(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Yte(e)&&Ie(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!G0(n)&&!Bp(n))return"quantitative";if(Xv(e)&&((s=e.scale)!=null&&s.type))switch(Eq[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Jd(e){if(Ve(e))return e;if(u5(e))return e.condition}function _s(e){if(Jt(e))return e;if(eO(e))return e.condition}function kBe(e,t,n,r={}){if(rt(e)||Jn(e)||B0(e)){const i=rt(e)?"string":Jn(e)?"number":"boolean";return Ue(tin(t,i,e)),{value:e}}return Jt(e)?WL(e,t,n,r):eO(e)?{...e,condition:WL(e.condition,t,n,r)}:e}function WL(e,t,n,r){if(CBe(e)){const{format:i,formatType:s,...o}=e;if(av(s)&&!n.customFormatTypes)return Ue(Bye(t)),WL(o,t,n,r)}else{const i=aE(e)?"axis":ABe(e)?"legend":Gte(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(av(o)&&!n.customFormatTypes)return Ue(Bye(t)),WL({...e,[i]:a},t,n,r)}}return Ve(e)?Qte(e,t,r):ton(e)}function ton(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Jn(n)?"quantitative":rt(n)?"nominal":Yv(n)?"temporal":void 0,{...e,type:t}}function Qte(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Ste(r)&&!G0(r)&&!Bp(r)&&(Ue(rin(r)),delete a.aggregate),i&&(a.timeUnit=qs(i)),o&&(a.field=`${o}`),Hr(s)&&(a.bin=l5(s,t)),oo(s)&&!Wi(t)&&Ue(Din(t)),ka(a)){const{type:u}=a,l=osn(u);u!==l&&(a.type=l),u!=="quantitative"&&P9e(r)&&(Ue(nin(u,r)),a.type="quantitative")}else if(!S9e(t)){const u=eon(a,t);a.type=u}if(ka(a)){const{compatible:u,warning:l}=non(a,t)||{};u===!1&&Ue(l)}if(Yte(a)&&rt(a.sort)){const{sort:u}=a;if(qye(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&qye(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Gte(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function l5(e,t){return B0(e)?{maxbins:Pye(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Pye(t)}:e}const T_={compatible:!0};function non(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case mp:case gp:case qF:return HL(e)?T_:{compatible:!1,warning:ain(t)};case pi:case Xs:case U0:case hx:case Eu:case ph:case mh:case GI:case YI:case WF:case rv:case GF:case YF:case qv:case yc:case If:case KF:return T_;case Pf:case oc:case Of:case kf:return n!==sv?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:T_;case am:case V0:case H0:case q0:case om:case sm:case im:case Cf:case hh:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:T_;case xu:case W0:return!HL(e)&&!Ksn(e)?{compatible:!1,warning:uin(t)}:T_;case nE:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:T_}}function uE(e){const{formatType:t}=qL(e);return t==="time"||!t&&ron(e)}function ron(e){return e&&(e.type==="temporal"||Ve(e)&&!!e.timeUnit)}function c5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=qs(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return XI(e)?a=e.expr:Tt(e)?a=e.signal:Yv(e)?(o=!0,a=iv(e)):(rt(e)||Jn(e))&&o&&(a=`datetime(${Pr(e)})`,Gin(s)&&(Jn(e)&&e<1e4||rt(e)&&isNaN(Date.parse(e)))&&(a=iv({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Pr(e)}function $Be(e,t){const{type:n}=e;return t.map(r=>{const i=Ve(e)&&!Kv(e.timeUnit)?e.timeUnit:void 0,s=c5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function tO(e,t){return Hr(e.bin)?um(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Yye={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function nO(e){return e==null?void 0:e.condition}const RBe=["domain","grid","labels","ticks","title"],ion={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},NBe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},son={...NBe,style:1,labelExpr:1,encoding:1};function Kye(e){return!!son[e]}const oon={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},DBe=De(oon);function lm(e){return"mark"in e}class f5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return lm(t)?Dsn(t.mark)===this.name:!1}}function x1(e,t){const n=e&&e[t];return n?Ie(n)?tv(n,r=>!!r.field):Ve(n)||u5(n):!1}function LBe(e,t){const n=e&&e[t];return n?Ie(n)?tv(n,r=>!!r.field):Ve(n)||vh(n)||eO(n):!1}function MBe(e,t){if(Wi(t)){const n=e[t];if((Ve(n)||vh(n))&&(iBe(n.type)||Ve(n)&&n.timeUnit)){const r=bte(t);return LBe(e,r)}}return!1}function Jte(e){return tv(arn,t=>{if(x1(e,t)){const n=e[t];if(Ie(n))return tv(n,r=>!!r.aggregate);{const r=Jd(n);return r&&!!r.aggregate}}return!1})}function FBe(e,t){const n=[],r=[],i=[],s=[],o={};return Zte(e,(a,u)=>{if(Ve(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Kte(a),m=p==null?void 0:p.title;let g=Je(a,{forAs:!0});const y={...m?[]:{title:Gb(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(G0(c)?(v="argmax",g=Je({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Bp(c)?(v="argmin",g=Je({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const _={op:v,as:g};l&&(_.field=l),s.push(_)}}else if(n.push(g),ka(a)&&Hr(f)){if(r.push({bin:f,field:l,as:g}),n.push(Je(a,{binSuffix:"end"})),tO(a,u)&&n.push(Je(a,{binSuffix:"range"})),Wi(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",S9e(u)||(y.type=sv)}else if(d&&!Kv(d)){i.push({timeUnit:d,field:l,as:g});const v=ka(a)&&a.type!==iE&&"time";v&&(u===GI||u===rv?y.formatType=v:yrn(u)?y.legend={formatType:v,...y.legend}:Wi(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function aon(e,t,n){const r=_rn(t,n);if(r){if(r==="binned"){const i=e[t===Cf?pi:Xs];return!!(Ve(i)&&Ve(e[t])&&oo(i.bin))}}else return!1;return!0}function uon(e,t,n,r){const i={};for(const s of De(e))x9e(s)||Ue(oin(s));for(let s of hrn){if(!e[s])continue;const o=e[s];if(KI(s)){const a=drn(s),u=i[a];if(Ve(u)&&ssn(u.type)&&Ve(o)&&!u.timeUnit){Ue(ein(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Ue(Zrn),s=yc),!aon(e,s,t)){Ue(ZF(s,t));continue}if(s===om&&t==="line"){const a=Jd(e[s]);if(a!=null&&a.aggregate){Ue(sin);continue}}if(s===Eu&&(n?"fill"in e:"stroke"in e)){Ue(U9e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===YI||s===nE&&!Ie(o)&&!hf(o)||s===rv&&Ie(o)){if(o){if(s===nE){const a=e[s];if(TBe(a)){i[s]=a;continue}}i[s]=nt(o).reduce((a,u)=>(Ve(u)?a.push(Qte(u,s)):Ue(wq(u,s)),a),[])}}else{if(s===rv&&o===null)i[s]=null;else if(!Ve(o)&&!vh(o)&&!hf(o)&&!a5(o)&&!Tt(o)){Ue(wq(o,s));continue}i[s]=kBe(o,s,r)}}return i}function d5(e,t){const n={};for(const r of De(e)){const i=kBe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function lon(e){const t=[];for(const n of De(e))if(x1(e,n)){const r=e[n],i=nt(r);for(const s of i)Ve(s)?t.push(s):u5(s)&&t.push(s.condition)}return t}function Zte(e,t,n){if(e)for(const r of De(e)){const i=e[r];if(Ie(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function con(e,t,n,r){return e?De(e).reduce((i,s)=>{const o=e[s];return Ie(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function BBe(e,t){return De(t).reduce((n,r)=>{switch(r){case pi:case Xs:case GF:case KF:case YF:case Cf:case hh:case U0:case hx:case yc:case sm:case If:case im:case Of:case Pf:case kf:case oc:case GI:case xu:case qv:case rv:return n;case nE:if(e==="line"||e==="trail")return n;case YI:case WF:{const i=t[r];if(Ie(i)||Ve(i))for(const s of nt(i))s.aggregate||n.push(Je(s,{}));return n}case om:if(e==="trail")return n;case Eu:case ph:case mh:case am:case V0:case H0:case W0:case q0:{const i=Jd(t[r]);return i&&!i.aggregate&&n.push(Je(i,{})),n}}},[])}function fon(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Ie(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Ie(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function Tq(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${ene(t)}`:"";return{field:o+t.field,type:t.type,title:Tt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=lon(n).map(Gsn);return{tooltip:[...i,...md(s,kn)]}}function ene(e){const{title:t,field:n}=e;return qi(t,n)}function tne(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=ene(n);return jBe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...rt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function jBe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Qd(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...B0(e[t])?{}:e[t]}}]:[]}function zBe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:tk(s,n),continuousAxisChannelDef2:tk(o,n),continuousAxisChannelDefError:tk(a,n),continuousAxisChannelDefError2:tk(u,n),continuousAxis:i}}function tk(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Ue(Nin(n,t)),r}else return e}function UBe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Qd(n)&&n.orient)return n.orient;if(ug(i)){if(ug(s)){const o=Ve(i)&&i.aggregate,a=Ve(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return uE(s)&&!uE(i)?"horizontal":"vertical"}return"horizontal"}else{if(ug(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const GL="boxplot",don=["box","median","outliers","rule","ticks"],hon=new f5(GL,HBe);function VBe(e){return Jn(e)?"tukey":e}function HBe(e,{config:t}){e={...e,encoding:d5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Qd(n)?n:{type:n};i&&Ue(j9e("boxplot"));const u=a.extent??t.boxplot.extent,l=fr("size",a,t),c=a.invalid,f=VBe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:b,boxOrient:E,customTooltipWithoutAggregatedField:w}=pon(e,u,t),{color:x,size:S,...I}=_,C=Re=>tne(a,g,m,Re,t.boxplot),O=C(I),z=C(_),N=C({...I,...S?{size:S}:{}}),$=Tq([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),D={type:"tick",color:"black",opacity:1,orient:b,invalid:c,aria:!1},B=f==="min-max"?$:Tq([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),V=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:B}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:B}),...O({partName:"ticks",mark:D,positionPrefix:"lower_whisker",extraEncoding:B}),...O({partName:"ticks",mark:D,positionPrefix:"upper_whisker",extraEncoding:B})],j=[...f!=="tukey"?V:[],...z({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:$}),...N({partName:"median",mark:{type:"tick",invalid:c,...ot(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:$})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:j};const G=`datum["lower_box_${m.field}"]`,U=`datum["upper_box_${m.field}"]`,P=`(${U} - ${G})`,k=`${G} - ${u} * ${P}`,H=`${U} + ${u} * ${P}`,M=`datum["${m.field}"]`,F={joinaggregate:qBe(m.field),groupby:y},J={transform:[{filter:`(${k} <= ${M}) && (${M} <= ${H})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...v],groupby:y}],layer:V},{tooltip:se,...ae}=I,{scale:ce,axis:le}=m,ge=ene(m),ue=fu(le,["title"]),Fe=jBe(a,"outliers",t.boxplot,{transform:[{filter:`(${M} < ${k}) || (${M} > ${H})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...ge!==void 0?{title:ge}:{},...ce!==void 0?{scale:ce}:{},...Or(ue)?{}:{axis:ue}},...ae,...x?{color:x}:{},...w?{tooltip:w}:{}}})[0];let $e;const Ge=[...d,...h,F];return Fe?$e={transform:Ge,layer:[Fe,J]}:($e=J,$e.transform.unshift(...Ge)),{...o,layer:[$e,{transform:p,layer:j}]}}function qBe(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function pon(e,t,n){const r=UBe(e,GL),{continuousAxisChannelDef:i,continuousAxis:s}=zBe(e,r,GL),o=i.field,a=VBe(t),u=[...qBe(o),{op:"median",field:o,as:`mid_box_${o}`},{op:"min",field:o,as:(a==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:o,as:(a==="min-max"?"upper_whisker_":"max_")+o}],l=a==="min-max"||a==="tukey"?[]:[{calculate:`datum["upper_box_${o}"] - datum["lower_box_${o}"]`,as:`iqr_${o}`},{calculate:`min(datum["upper_box_${o}"] + datum["iqr_${o}"] * ${t}, datum["max_${o}"])`,as:`upper_whisker_${o}`},{calculate:`max(datum["lower_box_${o}"] - datum["iqr_${o}"] * ${t}, datum["min_${o}"])`,as:`lower_whisker_${o}`}],{[s]:c,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:h}=fon(f),{bins:p,timeUnits:m,aggregate:g,groupby:y,encoding:v}=FBe(h,n),_=r==="vertical"?"horizontal":"vertical",b=r,E=[...p,...m,{aggregate:[...g,...u],groupby:y},...l];return{bins:p,timeUnits:m,transform:E,groupby:y,aggregate:g,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:v,ticksOrient:_,boxOrient:b,customTooltipWithoutAggregatedField:d}}const nne="errorbar",mon=["ticks","rule"],gon=new f5(nne,WBe);function WBe(e,{config:t}){e={...e,encoding:d5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=GBe(e,nne,t);delete s.size;const c=tne(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function yon(e,t){const{encoding:n}=e;if(von(n))return{orient:UBe(e,t),inputType:"raw"};const r=_on(n),i=bon(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Jt(a)&&Jt(u))throw new Error(`${t} cannot have both x2 and y2`);if(Jt(a)){if(ug(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Jt(u)){if(ug(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Jt(u)&&!Jt(a))throw new Error(`${t} cannot have xError2 without xError`);if(Jt(c)&&!Jt(l))throw new Error(`${t} cannot have yError2 without yError`);if(Jt(a)&&Jt(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Jt(a)){if(ug(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Jt(l)){if(ug(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function von(e){return(Jt(e.x)||Jt(e.y))&&!Jt(e.x2)&&!Jt(e.y2)&&!Jt(e.xError)&&!Jt(e.xError2)&&!Jt(e.yError)&&!Jt(e.yError2)}function _on(e){return Jt(e.x2)||Jt(e.y2)}function bon(e){return Jt(e.xError)||Jt(e.xError2)||Jt(e.yError)||Jt(e.yError2)}function GBe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Qd(r)?r:{type:r};s&&Ue(j9e(t));const{orient:l,inputType:c}=yon(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=zBe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=won(u,f,d,h,p,c,t,n),{[m]:b,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:w,[m==="x"?"xError2":"yError2"]:x,...S}=i,{bins:I,timeUnits:C,aggregate:O,groupby:z,encoding:N}=FBe(S,n),$=[...O,...g],D=c!=="raw"?[]:z,B=Tq(v,f,N,_);return{transform:[...a.transform??[],...I,...C,...$.length===0?[]:[{aggregate:$,groupby:D}],...y],groupby:D,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:N,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:B}}function won(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Ue(Rin(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:WI(h)},{fieldPrefix:"upper_",titlePrefix:Xye(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Xye(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Gb({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Gb({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Gb({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ue($in(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:nv(nv(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Xye(e,t,n){return`${WI(e)} ${n} ${t}`}const rne="errorband",Eon=["band","borders"],xon=new f5(rne,YBe);function YBe(e,{config:t}){e={...e,encoding:d5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=GBe(e,rne,t),l=o,c=tne(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Ue(zye("interpolate")):l.tension&&Ue(zye("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const KBe={};function ine(e,t,n){const r=new f5(e,t);KBe[e]={normalizer:r,parts:n}}function Son(){return De(KBe)}ine(GL,HBe,don);ine(nne,WBe,mon);ine(rne,YBe,Eon);const Ton=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],XBe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},QBe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Aon=De(XBe),Con=De(QBe),Ion={header:1,headerRow:1,headerColumn:1,headerFacet:1},JBe=De(Ion),ZBe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Oon={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Pon={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},pf="_vgsid_",kon={point:{on:"click",fields:[pf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function sne(e){return e==="legend"||!!(e!=null&&e.legend)}function Gj(e){return sne(e)&&ot(e)}function one(e){return!!(e!=null&&e.select)}function eje(e){const t=[];for(const n of e||[]){if(one(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function $on(e){return h5(e)||une(e)||ane(e)}function ane(e){return"concat"in e}function h5(e){return"vconcat"in e}function une(e){return"hconcat"in e}function tje({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Zd(e){return ot(e)&&e.step!==void 0}function Qye(e){return e.view||e.width||e.height}const Jye=20,Ron={align:1,bounds:1,center:1,columns:1,spacing:1},Non=De(Ron);function Don(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(o5(e)&&!ZI(e.facet)||ane(e))&&(i.columns=o),h5(e)&&(i.columns=1);for(const a of Non)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Jn(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function Aq(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function YL(e,t){const n=KL(e,t);return Zd(n)?n.step:nje}function KL(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return qi(n,{step:e.step})}const nje=20,Lon={continuousWidth:200,continuousHeight:200,step:nje},Mon={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Lon,mark:Osn,arc:{},area:{},bar:$sn,circle:{},geoshape:{},image:{},line:{},point:{},rect:Rsn,rule:{color:"black"},square:{},text:{color:"black"},tick:Nsn,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:fsn,projection:{},legend:Oon,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:kon,style:{},title:{},facet:{spacing:Jye},concat:{spacing:Jye},normalizedNumberFormat:".0%"},Ah=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Zye={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},e1e={blue:Ah[0],orange:Ah[1],red:Ah[2],teal:Ah[3],green:Ah[4],yellow:Ah[5],purple:Ah[6],pink:Ah[7],brown:Ah[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Fon(e={}){return{signals:[{name:"color",value:ot(e)?{...e1e,...e}:e1e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Bon(e){return{signals:[{name:"fontSize",value:ot(e)?{...Zye,...e}:Zye}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function jon(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function rje(e){const t=De(e||{}),n={};for(const r of t){const i=e[r];n[r]=nO(i)?R9e(i):qu(i)}return n}function zon(e){const t=De(e),n={};for(const r of t)n[r]=rje(e[r]);return n}const Uon=[...pBe,...DBe,...JBe,"background","padding","legend","lineBreak","scale","style","title","view"];function ije(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=tx({},qt(Mon),n?jon(n):{},t?Fon(t):{},r?Bon(r):{},s||{});i&&nx(o,"selection",i,!0);const a=fu(o,Uon);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=qu(o[u]));for(const u of pBe)o[u]&&(a[u]=Ja(o[u]));for(const u of DBe)o[u]&&(a[u]=rje(o[u]));for(const u of JBe)o[u]&&(a[u]=Ja(o[u]));return o.legend&&(a.legend=Ja(o.legend)),o.scale&&(a.scale=Ja(o.scale)),o.style&&(a.style=zon(o.style)),o.title&&(a.title=Ja(o.title)),o.view&&(a.view=Ja(o.view)),a}const Von=new Set(["view",...xsn]),Hon=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],qon={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Isn};function Won(e){e=qt(e);for(const t of Hon)delete e[t];if(e.axis)for(const t in e.axis)nO(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Ton)delete e.legend[t];if(e.mark){for(const t of Vye)delete e.mark[t];e.mark.tooltip&&ot(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(eje(e.params)),delete e.params);for(const t of Von){for(const r of Vye)delete e[t][r];const n=qon[t];if(n)for(const r of n)delete e[t][r];Yon(e,t)}for(const t of Son())delete e[t];Gon(e);for(const t in e)ot(e[t])&&Or(e[t])&&delete e[t];return Or(e)?void 0:e}function Gon(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=$9e(e.title);Or(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Or(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Or(r)?delete e.title:e.title=r}function Yon(e,t,n,r){const i=r?e[t][r]:e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Or(s)||(e.style[n??t]=s),r||delete e[t]}function p5(e){return"layer"in e}function Kon(e){return"repeat"in e}function Xon(e){return!Ie(e.repeat)&&e.repeat.layer}class lne{map(t,n){return o5(t)?this.mapFacet(t,n):Kon(t)?this.mapRepeat(t,n):une(t)?this.mapHConcat(t,n):h5(t)?this.mapVConcat(t,n):ane(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(p5(t))return this.mapLayer(t,n);if(lm(t))return this.mapUnit(t,n);throw new Error(Tte(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Qon={zero:1,center:1,normalize:1};function Jon(e){return e in Qon}const Zon=new Set([fBe,n5,t5,zL,i5,zte,Ute,r5,dBe,jte]),ean=new Set([n5,t5,fBe]);function A_(e){return Ve(e)&&oE(e)==="quantitative"&&!e.bin}function t1e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ve(o)&&Ve(a))if(A_(o)&&A_(a)){if(o.stack)return t;if(a.stack)return i;const u=Ve(o)&&!!o.aggregate,l=Ve(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(A_(o))return t;if(A_(a))return i}else{if(A_(o))return s&&n==="vertical"?void 0:t;if(A_(a))return s&&n==="horizontal"?void 0:i}}function tan(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function sje(e,t){var m,g;const n=Qd(e)?e:{type:e},r=n.type;if(!Zon.has(r))return null;const i=t1e(t,"x",n)||t1e(t,"theta",n);if(!i)return null;const s=t[i],o=Ve(s)?Je(s,{}):void 0,a=tan(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ve(y)?Je(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ve(f)?Je(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=prn.reduce((y,v)=>{if(v!=="tooltip"&&x1(t,v)){const _=t[v];for(const b of nt(_)){const E=Jd(b);if(E.aggregate)continue;const w=Je(E,{});(!w||!l.has(w))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?B0(s.stack)?p=s.stack?"zero":null:p=s.stack:ean.has(r)&&(p="zero"),!p||!Jon(p)||Jte(t)&&h.length===0?null:(m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==du.LINEAR?(s!=null&&s.stack&&Ue(Oin(s.scale.type)),null):Jt(t[gh(i)])?(s.stack!==void 0&&Ue(Iin(i)),null):(Ve(s)&&s.aggregate&&!Arn.has(s.aggregate)&&Ue(Pin(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:K0(r),stackBy:h,offset:p})}function oje(e,t,n){const r=Ja(e),i=fr("orient",r,n);if(r.orient=san(r.type,t,i),i!==void 0&&i!==r.orient&&Ue(din(r.orient,i)),r.type==="bar"&&r.orient){const u=fr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:ksn[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=fr("opacity",r,n),o=fr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=ran(r.type,t)),fr("cursor",r,n)===void 0&&(r.cursor=nan(r,t,n)),r}function nan(e,t,n){return t.href||e.href||fr("href",e,n)?"pointer":e.cursor}function ran(e,t){if($n([i5,jte,zte,Ute],e)&&!Jte(t))return .7}function ian(e,t,{graticule:n}){if(n)return!1;const r=jp("filled",e,t),i=e.type;return qi(r,i!==i5&&i!==r5&&i!==zL)}function san(e,t,n){switch(e){case i5:case zte:case Ute:case dBe:case wsn:case bsn:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case n5:if(Ve(r)&&(oo(r.bin)||Ve(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ve(i)&&(oo(i.bin)||Ve(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ve(r)&&r.type===sv&&!Hr(r.bin)||VL(r))&&Ve(i)&&oo(i.bin)?"horizontal":"vertical";if(!o)return(Ve(i)&&i.type===sv&&!Hr(i.bin)||VL(i))&&Ve(r)&&oo(r.bin)?"vertical":"horizontal"}case zL:if(s&&!(Ve(r)&&oo(r.bin))&&o&&!(Ve(i)&&oo(i.bin)))return;case t5:if(o)return Ve(i)&&oo(i.bin)?"horizontal":"vertical";if(s)return Ve(r)&&oo(r.bin)?"vertical":"horizontal";if(e===zL){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case r5:case jte:{const a=Gye(r),u=Gye(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ka(r)&&r.type===iE,c=ka(i)&&i.type===iE;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function oan(e){const{point:t,line:n,...r}=e;return De(r).length>1?r:r.type}function aan(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:fu(e[t],["point","line"])});return e}function Yj(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ot(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ot(t.point)?t.point:{}:void 0}function n1e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class uan{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(lm(t)){const{mark:r,encoding:i}=t,s=Qd(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!Yj(s,n[s.type],i);case"area":return!!Yj(s,n[s.type],i)||!!n1e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=d5(l,i),d=Qd(a)?a:{type:a},h=Yj(d,i[d.type],f),p=d.type==="area"&&n1e(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:oan({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:fu(f,["shape"])}],g=sje(oje(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:_}=g;y={...f,[v]:{...f[v],..._?{stack:_}:{}}}}return y=fu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...eE(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...eE(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:aan(i)})}}function lan(e,t){return t?ZI(e)?uje(e,t):aje(e,t):e}function Kj(e,t){return t?uje(e,t):e}function Cq(e,t,n){const r=t[e];if(qsn(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Ue(Wrn(r.repeat));return}return t}function aje(e,t){if(e=Cq("field",e,t),e!==void 0){if(e===null)return null;if(Yte(e)&&Pd(e.sort)){const n=Cq("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function r1e(e,t){if(Ve(e))return aje(e,t);{const n=Cq("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function i1e(e,t){if(Jt(e)){const n=r1e(e,t);if(n)return n;if(a5(e))return{condition:e.condition}}else{if(eO(e)){const n=r1e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function uje(e,t){const n={};for(const r in e)if(Nt(e,r)){const i=e[r];if(Ie(i))n[r]=i.map(s=>i1e(s,t)).filter(s=>s);else{const s=i1e(i,t);s!==void 0&&(n[r]=s)}}return n}class can{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(lm(t)){const{encoding:n,mark:r}=t;if(r==="line"||Qd(r)&&r.type==="line")for(const i of frn){const s=Wv(i),o=n[s];if(n[i]&&(Ve(o)&&!oo(o.bin)||vh(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Ue(fin(!!i.x2,!!i.y2)),r({...t,mark:ot(s)?{...s,type:"rule"}:"rule"},n)}}class fan extends lne{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[hon,gon,xon,new uan,new can]}map(t,n){if(lm(t)){const r=x1(t.encoding,mp),i=x1(t.encoding,gp),s=x1(t.encoding,qF);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=Kj(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return Xon(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${hi(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Ie(r)&&t.columns&&(t=fu(t,["columns"]),Ue(Mye("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Ie(r)&&r.row||[u?u.row:null],f=!Ie(r)&&r.column||[u?u.column:null],d=Ie(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Ie(r)?`${hi(p)}`:(r.row?`row_${hi(m)}`:"")+(r.column?`column_${hi(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:v});_.name=v,a.push(fu(_,["data"]))}const h=Ie(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return ZI(r)&&t.columns&&(t=fu(t,["columns"]),Ue(Mye("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=o1e({parentProjection:o,projection:i}),l=s1e({parentEncoding:s,encoding:Kj(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=Kj(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Ue(lin([...r?[mp]:[],...i?[gp]:[]]));const o={},a={};for(const u of[mp,gp]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:lan(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:s1e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:o1e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function s1e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...De(e),...De(t)]);for(const s of i){const o=t[s],a=e[s];if(Jt(o)){const u={...a,...o};r[s]=u}else eO(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||hf(a)||Tt(a)||Jt(a)||Ie(a))&&(r[s]=a)}}else r=t;return!r||Or(r)?void 0:r}function o1e(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ue(Jrn({parentProjection:t,projection:n})),n??t}function cne(e){return"filter"in e}function dan(e){return(e==null?void 0:e.stop)!==void 0}function lje(e){return"lookup"in e}function han(e){return"data"in e}function pan(e){return"param"in e}function man(e){return"pivot"in e}function gan(e){return"density"in e}function yan(e){return"quantile"in e}function van(e){return"regression"in e}function _an(e){return"loess"in e}function ban(e){return"sample"in e}function wan(e){return"window"in e}function Ean(e){return"joinaggregate"in e}function xan(e){return"flatten"in e}function San(e){return"calculate"in e}function cje(e){return"bin"in e}function Tan(e){return"impute"in e}function Aan(e){return"timeUnit"in e}function Can(e){return"aggregate"in e}function Ian(e){return"stack"in e}function Oan(e){return"fold"in e}function Pan(e){return"extent"in e&&!("density"in e)}function kan(e){return e.map(t=>cne(t)?{filter:qb(t.filter,isn)}:t)}class $an extends lne{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=a1e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=a1e(t,n),t.encoding){const r={};for(const[i,s]of d0(t.encoding))r[i]=fje(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:d0(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of vo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function a1e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(cne(s))return{filter:Iq(s,t)};if(cje(s)&&Gv(s.bin))return{...s,bin:dje(s.bin)};if(lje(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function fje(e,t){var r,i;const n=qt(e);if(Ve(n)&&Gv(n.bin)&&(n.bin=dje(n.bin)),Xv(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(a5(n))if(Ie(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:Iq(s,t)}});else{const{selection:s,param:o,test:a,...u}=fje(n.condition,t);n.condition=o?n.condition:{...u,test:Iq(n.condition,t)}}return n}function dje(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function Iq(e,t){const n=r=>qb(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):qb(e.test||e.filter,r=>r.selection?n(r.selection):r)}class Oq extends lne{map(t,n){const r=n.selections??[];if(t.params&&!lm(t)){const i=[];for(const s of t.params)one(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(rt(a)&&(a===t.name||i.includes(a))||Ie(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=Oq.prototype[e];Oq.prototype[e]=function(n,r){return t.call(this,n,Ran(n,r))}}function Ran(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function hje(e,t){t===void 0&&(t=ije(e.config));const n=Man(e,t),{width:r,height:i}=e,s=Fan(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Nan=new fan,Dan=new $an,Lan=new Oq;function Man(e,t={}){const n={config:t};return Lan.map(Nan.map(Dan.map(e,n),n),n)}function u1e(e){return rt(e)?{type:e}:e??{}}function Fan(e,t,n){let{width:r,height:i}=t;const s=lm(e)||p5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Ue(Rye("width")),r=void 0),i=="container"&&(Ue(Rye("height")),i=void 0));const a={type:"pad",...o,...n?u1e(n.autosize):{},...u1e(e.autosize)};if(a.type==="fit"&&!s&&(Ue(Drn),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Ue(Nye("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Ue(Nye("height")),!Xu(a,{type:"pad"}))return a}function Ban(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function jan(e){return e?`fit-${XF(e)}`:"fit"}const zan=["background","padding"];function l1e(e,t){const n={};for(const r of zan)e&&e[r]!==void 0&&(n[r]=qu(e[r]));return t&&(n.params=e.params),n}class cm{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new cm(qt(this.explicit),qt(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return qi(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of De(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Kf(e){return{explicit:!0,value:e}}function Lu(e){return{explicit:!1,value:e}}function pje(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:m5(t,n,r,i)}}function m5(e,t,n,r){return e.explicit&&t.explicit&&Ue(win(n,r,e.value,t.value)),e}function m0(e,t,n,r,i=m5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Xu(e.value,t.value)?e:i(e,t,n,r)}class Uan extends cm{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function lE(e){return"url"in e}function tC(e){return"values"in e}function mje(e){return"name"in e&&!lE(e)&&!tC(e)&&!Rg(e)}function Rg(e){return e&&(gje(e)||yje(e)||fne(e))}function gje(e){return"sequence"in e}function yje(e){return"sphere"in e}function fne(e){return"graticule"in e}var zr;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(zr||(zr={}));function vje(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=sc(i.field),i}function uv(e,t=!0,n=na){if(Ie(e)){const r=e.map(i=>uv(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Yv(e))return n(t?iv(e):Win(e));return t?n(Pr(e)):e}function Van(e,t){for(const n of vo(e.component.selection??{})){const r=n.name;let i=`${r}${y0}, ${n.resolve==="global"?"true":`{unit: ${S1(e)}}`}`;for(const s of _5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+wun,on:[{events:{signal:n.name+y0},update:`modify(${Xe(n.name+lv)}, ${i})`}]})}return dne(t)}function Han(e,t){if(e.component.selection&&De(e.component.selection).length){const n=Xe(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:z0("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return dne(t)}function qan(e,t){let n=!1;for(const r of vo(e.component.selection??{})){const i=r.name,s=Xe(i+lv);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${Lje}(${s}, ${Xe(a)}${u}`})}n=!0;for(const a of _5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),dne(t)}function Wan(e,t){const n=[...t],r=S1(e,{escape:!1});for(const i of vo(e.component.selection??{})){const s={name:i.name+lv};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:pf}}]),i.init){const a=i.project.items.map(vje);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[pf]:uv(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:uv(u,!1)}))}n.filter(a=>a.name===i.name+lv).length||n.push(s)}return n}function _je(e,t){for(const n of vo(e.component.selection??{}))for(const r of _5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Gan(e,t){for(const n of e.children)$i(n)&&(t=_je(n,t));return t}function Yan(e,t,n,r){const i=zje(e,t.param,t);return{signal:dl(n.get("type"))&&Ie(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function dne(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Sr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ue(Krn);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Sa extends Sr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${m9e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function Xj(e){return e.as!==void 0}function c1e(e){return`${e}_end`}class kd extends Sr{clone(){return new kd(null,qt(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(Kv(u)){if($i(n)){const{mark:c,markDef:f,config:d}=n,h=p0({fieldDef:s,markDef:f,config:d});(eC(c)||h)&&(l={timeUnit:qs(u),field:a})}}else l={as:Je(s,{forAs:!0}),field:a,timeUnit:u};if($i(n)){const{mark:c,markDef:f,config:d}=n,h=p0({fieldDef:s,markDef:f,config:d});eC(c)&&Wi(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[kn(l)]=l)}return i},{});return Or(r)?null:new kd(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=qs(r),o={...i,timeUnit:s};return new kd(t,{[kn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of d0(this.timeUnits)){const s=Xj(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(vo(this.timeUnits).map(t=>Xj(t)?t.as:c1e(t.field)))}dependentFields(){return new Set(vo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${kn(this.timeUnits)}`}assemble(){const t=[];for(const n of vo(this.timeUnits)){const{rectBandPosition:r}=n,i=qs(n.timeUnit);if(Xj(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:sc(s),type:"timeunit",...a?{units:e5(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...f1e(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=bje({timeUnit:i,field:o}),u=c1e(o);t.push({type:"formula",expr:a,as:u}),t.push(...f1e([o,u],r,i))}}return t}}const g5="offsetted_rect_start",y5="offsetted_rect_end";function bje({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=Q9e(r),{part:o,step:a}=tBe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function f1e([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:d1e([bje({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${g5}`},{type:"formula",expr:d1e([i,s],n+.5),as:`${e}_${y5}`}]}return[]}function d1e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const rO="_tuple_fields";class Kan{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Xan={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Kan),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=hi(`${r}_${g}`);for(let v=1;a.has(y);v++)y=hi(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?nt(n.value):null;let{fields:d,encodings:h}=ot(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(ot(p))for(const m of De(p))crn(m)?(h||(h=[])).push(m):l==="interval"?(Ue(qrn),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Ue(Lrn(p,m.aggregate));continue}else if(!g){Ue(Lye(p));continue}if(m.timeUnit&&!Kv(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[kn(y)]=y}if(!s[g]){const y=l==="interval"&&um(p)&&dl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===pf,w9e(p)?(v.geoChannel=p,v.channel=b9e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Ue(Lye(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===pf}f&&(t.init=f.map(p=>i.items.map(m=>ot(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Or(o)||(i.timeUnit=new kd(null,o))},signals:(e,t,n)=>{const r=t.name+rO;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(vje)})}},yp={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!um(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Ue(jrn),!s||!dl(o)){Ue(Brn);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||h1e(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(Lje)>=0)i.update=`{${r.map(o=>`${Xe(sc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Xe(sc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!h1e(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function Pq(e,t){return`domain(${Xe(e.scaleName(t))})`}function h1e(e){return e.parent&&_x(e.parent)&&!e.parent.parent}const Yb="_brush",wje="_scale_trigger",PS="geo_interval_init_tick",Eje="_init",Qan="_center",Jan={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...ot(n.select)?n.select:{}};i.fields=[pf],i.encodings||(i.encodings=n.value?De(n.value):[Pf,Of]),n.select={type:"interval",...i}}if(t.translate&&!yp.defined(t)){const i=`!event.item || event.item.mark.name !== ${Xe(t.name+Yb)}`;for(const s of t.events){if(!s.between){Ue(`${s} is not an ordered event stream for interval selections.`);continue}const o=nt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+y0,s=vo(t.project.hasChannel).filter(a=>a.channel===pi||a.channel===Xs),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(Zan(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Xe(e.projectionName()),u=e.projectionName()+Qan,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+Eje,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(w=>w.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${Xe(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${S1(e)}}`,_=`vlSelectionTuples(${y}, ${v})`,b=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...b.length?[{signal:b.join(" || ")}]:[],...o?[{signal:PS}]:[]],update:_}]})}else{if(!yp.defined(t)){const l=r+wje,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Xe(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=dl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${S1(e)}, fields: ${r+rO}, values`;return n.concat({name:i,...o?{init:`{${u}: ${uv(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>($i(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===PS).length||n.unshift({name:PS,value:null,on:[{events:"timer{1}",update:`${PS} === null ? {} : ${PS}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Xe(t.name+lv)})`;if(yp.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of De(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${S1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=De(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+Yb}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Yb,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Zan(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Xe(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===pi?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=yp.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:uv(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+wje},update:dl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:uv(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===pi?0:1,h=t.name+Eje,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const eun={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+rO,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=vo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Yb):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${S1(e)}, `;if(t.project.hasSelectionId)l+=`${pf}: ${o}[${Xe(pf)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${Xe(e.vgField(d.channel,{}))}], ${o}[${Xe(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Xe(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+y0,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function mx(e,t,n,r){const i=a5(t)&&t.condition,s=r(t);if(i){const a=nt(i).map(u=>{const l=r(u);if(Hsn(u)){const{param:c,empty:f}=u;return{test:jje(e,{param:c,empty:f}),...l}}else return{test:JL(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function hne(e,t="text"){const n=e.encoding[t];return mx(e,n,t,r=>v5(r,e.config))}function v5(e,t,n="datum"){if(e){if(hf(e))return Xr(e.value);if(Jt(e)){const{format:r,formatType:i}=qL(e);return Wte({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function xje(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Ie(o))return{tooltip:p1e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return mx(e,o,"tooltip",u=>{const l=v5(u,i,a);if(l)return l;if(u===null)return;let c=fr("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),rt(c))return{value:c};if(ot(c))return Tt(c)?c:c.content==="encoding"?p1e(n,s,i,t):{signal:a}})}}function Sje(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Wv(f),h=ka(c)?c:{...c,type:e[d].type},p=h.title||Xte(h,i),m=nt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(Wi(f)){const y=f==="x"?"x2":"y2",v=Jd(e[y]);if(oo(h.bin)&&v){const _=Je(h,{expr:o}),b=Je(v,{expr:o}),{format:E,formatType:w}=qL(h);g=JI(_,b,E,w,i),s[y]=!0}}if((Wi(f)||f===yc||f===If)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=qL(h);g=Wte({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=v5(h,i,o).signal),a.push({channel:f,key:m,value:g})}Zte(e,(c,f)=>{Ve(c)?u(c,f):u5(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function p1e(e,t,n,{reactiveGeom:r}={}){const i=Sje(e,t,n,{reactiveGeom:r}),s=d0(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function tun(e){const{markDef:t,config:n}=e,r=fr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...nun(e),...run(e)}}function nun(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=fr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in $rn?{}:{ariaRoleDescription:{value:t}}}function run(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return mx(e,s,"description",u=>v5(u,e.config));const o=fr("description",n,r);if(o!=null)return{description:Xr(o)};if(r.aria===!1)return{};const a=Sje(t,i,r);if(!Or(a))return{description:{signal:d0(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Fs(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=fr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=Xr(u)));const l=i[e];return mx(t,l,o??e,c=>qte({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function Tje(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??fr("filled",n,i),a=$n(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=fr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=fr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:Xr(u)}:{},...l?{stroke:Xr(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Ue(U9e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Fs("color",e,{vgChannel:c,defaultValue:o?u:l}),...Fs("fill",e,{defaultValue:r.fill?u:void 0}),...Fs("stroke",e,{defaultValue:r.stroke?l:void 0})}}function iun(e){const{encoding:t,mark:n}=e,r=t.order;return!K0(n)&&hf(r)?mx(e,r,"zindex",i=>Xr(i.value)):{}}function cE({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:qte({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Xr(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function Wo(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[gh(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=cE({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=pne({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&Wi(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:sun({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function sun(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Jt(n)&&i&&t===i.fieldChannel){if(Ve(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return UL({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return E1(n,r,{suffix:"end"},{offset:s})}return Vte(e)}function pne({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Wv(n),u=h0(n),l=fr(n,s,o,{vgChannel:u});if(l!==void 0)return T2(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!$n([du.LOG,du.TIME,du.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Su(n)],mult:.5}}}}const oun={left:"x",center:"xc",right:"x2"},aun={top:"y",middle:"yc",bottom:"y2"};function Aje(e,t,n,r="middle"){if(e==="radius"||e==="theta")return h0(e);const i=e==="x"?"align":"baseline",s=fr(i,t,n);let o;return Tt(s)?(Ue(cin(i)),o=void 0):o=s,e==="x"?oun[o||(r==="top"?"left":"center")]:aun[o||r]}function XL(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Cje(e,t,{defaultPos:n,defaultPos2:r}):Wo(e,t,{defaultPos:n})}function Cje(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=gh(e),a=Su(e),u=uun(t,r,o),l=u[a]?Aje(e,i,s):h0(e);return{...Wo(e,t,{defaultPos:n,vgChannel:l}),...u}}function uun(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Wv(n),l=Su(n),c=h0(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?cE({channel:n,markDef:s,encoding:r,model:e}):cE({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Su(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=lun({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:nk(n,s)||nk(n,{[n]:BL(n,s,a.style),[l]:BL(l,s,a.style)})||nk(n,a[i])||nk(n,a.mark)||{[c]:pne({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function lun({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Jt(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?E1(t,s,{suffix:"start"},{offset:u}):Vte({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function nk(e,t){const n=Su(e),r=h0(e);if(t[r]!==void 0)return{[r]:T2(e,t[r])};if(t[e]!==void 0)return{[r]:T2(e,t[e])};if(t[n]){const i=t[n];if(ov(i))Ue(iin(n));else return{[n]:T2(e,i)}}}function g0(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=gh(t),a=Su(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??fr("size",i,n,{vgChannel:a}),p=T9e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ve(u)&&(Hr(u.bin)||oo(u.bin)||u.timeUnit&&!l)&&!(h&&!ov(h))&&!r[p]&&!Ws(f)?dun({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Jt(u)&&Ws(f)||m)&&!l?fun(u,t,e):Cje(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function cun(e,t,n,r,i,s,o){if(ov(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=jp("minBandSize",{type:o},r);return{signal:c?`max(${Yc(c)}, ${l})`:l}}else i.band!==1&&(Ue(pin(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Tt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Y0(u)&&Jn(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=qi(u,o==="bar"?l:c);if(Tt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Jn(f))return{signal:`${1-f} * ${e}`}}return{value:YL(r.view,e)-2}}function fun(e,t,n){var I,C;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Su(t),f=gh(t),d=T9e(t),h=n.scaleName(d),p=n.getScaleComponent(bte(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=Fs("size",n,{vgChannel:c,defaultRef:Xr(r.size)}):Ue(vin(r.type)));const y=!!g,v=xBe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(I=l||p)==null?void 0:I.get("type"),useVlSizeChannel:m});g=g||{[c]:cun(c,h||u,p||l,s,v,!!e,r.type)};const _=((C=l||p)==null?void 0:C.get("type"))==="band"&&ov(v)&&!y?"top":"middle",b=Aje(t,r,s,_),E=b==="xc"||b==="yc",{offset:w,offsetType:x}=cE({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),S=Vte({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:w,defaultRef:pne({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?x==="encoding"?0:.5:Tt(v)?{signal:`(1-${v})/2`}:ov(v)?(1-v.band)/2:0});if(c)return{[b]:S,...g};{const O=h0(f),z=g[c],N=w?{...z,offset:w}:z;return{[b]:S,[O]:Ie(S)?[S[0],{...S[1],offset:N}]:{...S,offset:N}}}}function m1e(e,t,n,r,i,s,o){if(_9e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Tt(n)||Tt(i)||Tt(r)||s){const l=Yc(n),c=Yc(i),f=Yc(r),d=Yc(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function dun({fieldDef:e,fieldDef2:t,channel:n,model:r}){var C;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=xBe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(C=r.component.axes[n])==null?void 0:C[0],h=(d==null?void 0:d.get("translate"))??.5,p=Wi(n)?fr("binSpacing",s,i)??0:0,m=gh(n),g=h0(n),y=h0(m),v=jp("minBandSize",s,i),{offset:_}=cE({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:b}=cE({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=Bsn({fieldDef:e,scaleName:u}),w=m1e(n,p,c,h,_,v,E),x=m1e(m,p,c,h,b??_,v,E),S=Tt(f)?{signal:`(1-${f.signal})/2`}:ov(f)?(1-f.band)/2:.5,I=p0({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Hr(e.bin)||e.timeUnit){const O=e.timeUnit&&I!==.5;return{[y]:g1e({fieldDef:e,scaleName:u,bandPosition:S,offset:x,useRectOffsetField:O}),[g]:g1e({fieldDef:e,scaleName:u,bandPosition:Tt(S)?{signal:`1-${S.signal}`}:1-S,offset:w,useRectOffsetField:O})}}else if(oo(e.bin)){const O=E1(e,u,{},{offset:x});if(Ve(t))return{[y]:O,[g]:E1(t,u,{},{offset:w})};if(Gv(e.bin)&&e.bin.step)return{[y]:O,[g]:{signal:`scale("${u}", ${Je(e,{expr:"datum"})} + ${e.bin.step})`,offset:w}}}Ue(q9e(m))}function g1e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return UL({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:g5,endSuffix:y5}:{}})}const hun=new Set(["aria","width","height"]);function vc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Tje(e):{};return{...pun(e.markDef,t),...y1e(e,"fill",n),...y1e(e,"stroke",r),...Fs("opacity",e),...Fs("fillOpacity",e),...Fs("strokeOpacity",e),...Fs("strokeWidth",e),...Fs("strokeDash",e),...iun(e),...xje(e),...hne(e,"href"),...tun(e)}}function y1e(e,t,n){const{config:r,mark:i,markDef:s}=e;if(fr("invalid",s,r)==="hide"&&n&&!K0(i)){const a=mun(e,{invalid:!0,channels:QF});if(a)return{[t]:[{test:a,value:null},...nt(n)]}}return n?{[t]:n}:{}}function pun(e,t){return krn.reduce((n,r)=>(!hun.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Xr(e[r])),n),{})}function mun(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&dl(u)&&(s[l]=!0)}return s},{}),i=De(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Hte(o,t)).join(` ${s} `)}}function mne(e){const{config:t,markDef:n}=e;if(fr("invalid",n,t)){const i=gun(e,{channels:yh});if(i)return{defined:{signal:i}}}return{}}function gun(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&dl(l)&&(s[c]=!0)}return s},{}),i=De(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Hte(o,t)).join(` ${s} `)}}function v1e(e,t){if(t!==void 0)return{[e]:Xr(t)}}const Qj="voronoi",Ije={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Qj)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(K0(s))return Ue(Mrn(s)),n;const o={name:e.getName(Qj),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...xje(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(Qj)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},Oje={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!sne(e.bind),parse:(e,t,n)=>Mje(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=Ije.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=hi(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:uv(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Xe(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+y0)[0],o=r+rO,a=i.items.map(l=>hi(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},QL="_toggle",Pje={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+QL,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+y0,r=t.name+QL;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${S1(e)}}, `)+`${r} ? ${n} : null`}},yun={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=rt(t.clear)?z0(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Oje.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===hi(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+y0);r(i,"null"),Pje.defined(t)&&(i=n.findIndex(s=>s.name===t.name+QL),r(i,"false"))}return n}},kje={defined:e=>{const t=e.resolve==="global"&&e.bind&&sne(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==pf;return t&&!n&&Ue(zrn),t&&n},parse:(e,t,n)=>{const r=qt(n);if(r.select=rt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Mje(t,r),ot(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=nt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=Gj(t.bind)?t.bind.legend:"click",s=rt(i)?z0(i,"view"):nt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=Gj(t.bind)&&t.bind.legend,s=o=>a=>{const u=qt(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${hi(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+y0),o=r+rO,a=i.items.filter(d=>d.hasLegend).map(d=>hi(`${r}_${hi(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+QL),f=Gj(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function vun(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of vo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&kje.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const $je="_translate_anchor",Rje="_translate_delta",_un={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=yp.defined(t),s=r+$je,{x:o,y:a}=t.project.hasChannel;let u=z0(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+Yb,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?Pq(e,pi):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?Pq(e,Xs):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+Rje,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&_1e(e,t,o,"width",n),a!==void 0&&_1e(e,t,a,"height",n),n}};function _1e(e,t,n,r,i){const s=t.name,o=s+$je,a=s+Rje,u=n.channel,l=yp.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===pi?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",b=`${v}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:l?b:`clampRange(${b}, 0, ${f})`})}const Nje="_zoom_anchor",Dje="_zoom_delta",bun={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=yp.defined(t),s=r+Dje,{x:o,y:a}=t.project.hasChannel,u=Xe(e.scaleName(pi)),l=Xe(e.scaleName(Xs));let c=z0(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Yb,f))),n.push({name:r+Nje,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&b1e(e,t,o,"width",n),a!==void 0&&b1e(e,t,a,"height",n),n}};function b1e(e,t,n,r,i){const s=t.name,o=n.channel,a=yp.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?Pq(e,o):u.name,h=s+Dje,p=`${s}${Nje}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const lv="_store",y0="_tuple",wun="_modify",Lje="vlSelectionResolve",_5=[eun,Jan,Xan,Pje,Oje,yp,kje,yun,_un,bun,Ije];function Eun(e){let t=e.parent;for(;t&&!nl(t);)t=t.parent;return t}function S1(e,{escape:t}={escape:!0}){let n=t?Xe(e.name):e.name;const r=Eun(e);if(r){const{facet:i}=r;for(const s of Hl)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Xe(r.vgField(s))}])`)}return n}function gne(e){return vo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function Mje(e,t){(rt(t.select)||!t.select.on)&&delete e.events,(rt(t.select)||!t.select.clear)&&delete e.clear,(rt(t.select)||!t.select.toggle)&&delete e.toggle}function kq(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...kq(e.object)),t.push(...kq(e.property))),t)}function Fje(e){return e.object.type==="MemberExpression"?Fje(e.object):e.object.name==="datum"}function Bje(e){const t=Dee(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Fje(r)&&n.add(kq(r).slice(1).join("."))}),n}class gx extends Sr{clone(){return new gx(null,this.model,qt(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=JL(this.model,this.filter,this),this._dependentFields=Bje(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function xun(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=hi(i.name),o=i.select,a=rt(o)?o:o.type,u=ot(o)?qt(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=qt(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:rt(u.on)?z0(u.on,"scope"):nt(qt(u.on))},f=qt(i);for(const d of _5)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function jje(e,t,n,r="datum"){const i=rt(t)?t:t.param,s=hi(i),o=Xe(s+lv);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Xe(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function zje(e,t,n){const r=hi(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Ue(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Xe(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Ue((a.length?"Multiple ":"No ")+`matching ${Xe(i)} encoding found for selection ${Xe(n.param)}. Using "field": ${Xe(s)}.`)):s=a[0].field}return`${o.name}[${Xe(sc(s))}]`}function Sun(e,t){for(const[n,r]of d0(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Sa(new gx(t,e,{param:n}),i,zr.Lookup,e.component.data.outputNodeRefCounts)}}function JL(e,t,n){return S2(t,r=>rt(r)?r:tsn(r)?jje(e,r,n):rBe(r))}function Tun(e,t){if(e)return Ie(e)&&!Dm(e)?e.map(n=>Xte(n,t)).join(", "):e}function Jj(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function xT(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=ion[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(nO(m)){const{condition:g,...y}=m,v=nt(g),_=Yye[h];if(_){const{vgProp:b,part:E}=_,w=[...v.map(x=>{const{test:S,...I}=x;return{test:JL(null,S),...I}}),y];Jj(c,E,b,w),delete c[h]}else if(_===null){const b={signal:v.map(E=>{const{test:w,...x}=E;return`${JL(null,w)} ? ${$ye(x)} : `}).join("")+$ye(y)};c[h]=b}}else if(Tt(m)){const g=Yye[h];if(g){const{vgProp:y,part:v}=g;Jj(c,v,y,m),delete c[h]}}$n(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Or(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:qi(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Tt(c.encode.labels.update.text)&&(p=nv(a,"datum.label",c.encode.labels.update.text.signal)),Jj(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of RBe)e.hasAxisPart(p)||delete c.encode[p];Or(c.encode)&&delete c.encode}const h=Tun(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:qi(l,0)}}}}function Uje(e){const{axes:t}=e.component,n=[];for(const r of yh)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function Aun(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>xT(i,"grid",t)),...r.map(i=>xT(i,"grid",t)),...n.map(i=>xT(i,"main",t)),...r.map(i=>xT(i,"main",t))].filter(i=>i)}function w1e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...De(o),...De(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Yc(o[c])} : ${Yc(a[c])}`};return l}return t[i]})])}function Cun(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:aBe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Tt(n)?"axisOrient":`axis${WI(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:w1e(a,r,e,n),vgAxisConfig:w1e(u,r,e,n),axisConfigStyle:Iun([...u,...a],r)}}function Iun(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=nt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function $q(e,t,n,r={}){var s;const i=D9e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const E1e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Oun(n,e),gridScale:({model:e,channel:t})=>Pun(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Hje(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||Vje(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??$un(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Run(t.type,n,Ve(t)&&!!t.timeUnit,Ve(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Dun({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:Lun,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=qje(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return M9e(i?[Wye(i)]:[],Ve(o)?[Wye(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Mun(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Fun(n,t)};function Oun(e,t){return!Ws(e)&&Ve(t)&&!Hr(t==null?void 0:t.bin)&&!oo(t==null?void 0:t.bin)}function Pun(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function kun(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Tt(s)?s:ZA(s);{const{configValue:o}=$q("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?ZA(o):n===pi&&$n([Bte,Fte],e.type)&&!(Ve(e)&&e.timeUnit)?270:void 0}}function Rq(e){return`(((${e.signal} % 360) + 360) % 360)`}function Vje(e,t,n,r){if(e!==void 0)if(n==="x"){if(Tt(e)){const i=Rq(e),s=Tt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Tt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Tt(e)){const i=Rq(e),s=Tt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Tt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Hje(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Tt(e)){const o=Rq(e),a=Tt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Tt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function $un(e,t){if(t==="x"&&$n(["quantitative","temporal"],e))return!0}function Run(e,t,n,r){if(n&&!ot(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Nun(e){return e==="x"?"bottom":"left"}function Dun({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Ws(t)&&t!=="log"){if(Ve(e)){if(Hr(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&$n(["month","hours","day","quarter"],(i=qs(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Lun({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ve(t)){const{timeUnit:n}=t;if(n){const r=eBe(n);if(r)return{signal:r}}}}function qje(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return F9e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Mun(e,t){const n=e.values;if(Ie(n))return $Be(t,n);if(Tt(n))return n}function Fun(e,t){return e==="rect"&&HL(t)?1:0}class fE extends Sr{clone(){return new fE(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Bje(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Xv(r)&&EBe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${rBe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new fE(t,{calculate:u,as:dE(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${kn(this.transform)}`}}function dE(e,t,n){return Je(e,{prefix:t,suffix:"sort_index",...n})}function b5(e,t){return $n(["top","bottom"],t)?"column":$n(["left","right"],t)||e==="row"?"row":"column"}function hE(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return qi((t||{})[e],i[e],n.header[e])}function w5(e,t,n,r){const i={};for(const s of e){const o=hE(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const yne=["row","column"],vne=["header","footer"];function Bun(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=w5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=b5(t,a),l=ZA(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Gje(l,u),...Wje(u,l,s),...Yje(r,i,t,Aon,XBe)}}}function Wje(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Hje(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Gje(e,t){const n=Vje(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function jun(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of vne)if(n[i])for(const s of n[i]){const o=Uun(e,t,i,n,s);o!=null&&r.push(o)}return r}function zun(e,t){const{sort:n}=e;return Pd(n)?{field:Je(n,{expr:"datum"}),order:n.order??"ascending"}:Ie(n)?{field:dE(e,t,{expr:"datum"}),order:"ascending"}:{field:Je(e,{expr:"datum"}),order:n??"ascending"}}function Nq(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=w5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Wte({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=b5(t,a);return{text:{signal:u?nv(nv(u,"datum.label",l),"datum.value",Je(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Gje(s,c),...Wje(c,s,o),...Yje(n,e,t,Con,QBe)}}function Uun(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=w5(["labelOrient"],o.header,a,t);(t==="row"&&!$n(["top","bottom"],f)||t==="column"&&!$n(["left","right"],f))&&(s=Nq(o,t,a))}const u=nl(e)&&!ZI(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:zun(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Vun={column:{start:0,end:1},row:{start:1,end:0}};function Hun(e,t){return Vun[t][e]}function qun(e,t){const n={};for(const r of Hl){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=w5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=b5(r,o),u=Hun(s,a);u!==void 0&&(n[a]=u)}}return Or(n)?void 0:n}function Yje(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=hE(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function _ne(e){return[...rk(e,"width"),...rk(e,"height"),...rk(e,"childWidth"),...rk(e,"childHeight")]}function rk(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Ws(o)&&Y0(a)){const u=e.scaleName(n);return nl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[x1e(u,a)]:[x1e(u,a),{name:i,update:Kje(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=Aq(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function x1e(e,t){const n=`${e}_step`;return Tt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Kje(e,t,n){const r=t.get("type"),i=t.get("padding"),s=qi(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Yc(o)}, ${Yc(s)}) * ${e}_step`}function Xje(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function Qje(e,t){return De(e).reduce((n,r)=>{const i=e[r];return{...n,...mx(t,i,r,s=>Xr(s.value))}},{})}function Jje(e,t){if(nl(t))return e==="theta"?"independent":"shared";if(_x(t))return"shared";if(Ane(t))return Wi(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function bne(e,t){const n=e.scale[t],r=Wi(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Ue(xin(t)),"independent"):e[r][t]||"shared"}const Wun={...Pon,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Zje=De(Wun);class Gun extends cm{}const S1e={symbols:Yun,gradient:Kun,labels:Xun,entries:Qun};function Yun(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...Nrn({},n,Asn),...Tje(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?e7e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Eu)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=Xr(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Xr(m??1));else if(Ie(f.fill)){const g=Dq(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=Xr(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Eu)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Ie(f.stroke)){const g=qi(Dq(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==am){const g=Ve(t)&&n7e(n,i,t);g?f.opacity=[{test:g,...Xr(m??1)},Xr(u.legend.unselectedOpacity)]:m&&(f.opacity=Xr(m))}return f={...f,...e},Or(f)?void 0:f}function Kun(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?e7e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=Xr(l)),a={...a,...e},Or(a)?void 0:a}function Xun(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ve(t)?n7e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;av(c)?f=Xc({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Xc({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ve(t)&&t.timeUnit===void 0&&(f=Xc({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Or(d)?void 0:d}function Qun(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function e7e(e){return t7e(e,(t,n)=>Math.max(t,n.value))}function Dq(e){return t7e(e,(t,n)=>qi(t,n.value))}function t7e(e,t){if(Wsn(e))return nt(e.condition).reduce(t,e.value);if(hf(e))return e.value}function n7e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Xe(n.field);return r.map(s=>`(!length(data(${Xe(hi(s)+lv)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const T1e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return vBe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return _Be(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??iln(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??sln(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Zun(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Gb(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Wb(n)&&Kc(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Jun(t,e)};function Jun(e,t){const n=e.values;if(Ie(n))return $Be(t,n);if(Tt(n))return n}function Zun(e,t,n,r){if(t!=="shape"){const i=Dq(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function eln(e){const{legend:t}=e;return qi(t.type,tln(e))}function tln({channel:e,timeUnit:t,scaleType:n}){if(Wb(e)){if($n(["quarter","month","day"],t))return"symbol";if(Kc(n))return"gradient"}return"symbol"}function nln({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??rln(n,t)}function rln(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function iln({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Kc(i))return n==="horizontal"?r==="top"||r==="bottom"?A1e(t,"width",o,s):o:A1e(t,"height",u,a)}function A1e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function sln(e){if($n(["quantile","threshold","log","symlog"],e))return"greedy"}function r7e(e){const t=$i(e)?oln(e):cln(e);return e.component.legends=t,t}function oln(e){const{encoding:t}=e,n={};for(const r of[Eu,...ZBe]){const i=_s(t[r]);!i||!e.getScaleComponent(r)||r===xu&&Ve(i)&&i.type===px||(n[r]=lln(e,r))}return n}function aln(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function uln(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function lln(e,t){var b;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Gun({},aln(e,t));vun(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=_s(i[t]),f=Ve(c)?(b=qs(c.timeUnit))==null?void 0:b.unit:void 0,d=n.orient||s.legend.orient||"right",h=eln({legend:n,channel:t,timeUnit:f,scaleType:l}),p=nln({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of Zje){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const w=E in T1e?T1e[E](m):n[E];if(w!==void 0){const x=uln(w,E,n,e.fieldDef(t));(x||s.legend[E]===void 0)&&a.set(E,w,x)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const w=Qje(g[E]??{},e),x=E in S1e?S1e[E](w,_):w;x!==void 0&&!Or(x)&&(v[E]={...y!=null&&y.length&&Ve(c)?{name:`${hi(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:x})}return Or(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function cln(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){r7e(r);for(const i of De(r.component.legends))n.legend[i]=bne(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=i7e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of De(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function i7e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of Zje){const c=m0(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return fln(f,d);case"title":return B9e(f,d);case"type":return i=!0,Lu("symbol")}return m5(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&FL(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&FL(e.explicit,["encode","gradient"])),e}function fln(e,t){return t.value==="circle"?t:e}function dln(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function s7e(e){const t=e.component.legends,n={};for(const i of De(t)){const s=e.getScaleComponent(i),o=Pr(s.get("domains"));if(n[o])for(const a of n[o])i7e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return vo(n).flat().map(i=>hln(i,e.config)).filter(i=>i!==void 0)}function hln(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of ZBe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Tt(s.encode.labels.update.text)&&(l=nv(r,"datum.label",s.encode.labels.update.text.signal)),dln(s,"labels","text",{signal:l})}return s}}function pln(e){return _x(e)||Ane(e)?mln(e):o7e(e)}function mln(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),o7e(e))}function o7e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Tt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return $n(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const gln=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class a7e extends cm{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function u7e(e){e.component.projection=$i(e)?yln(e):bln(e)}function yln(e){if(e.hasProjection){const t=Ja(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?vln(e):void 0,s=new a7e(e.projectionName(!0),{...Ja(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function vln(e){const t=[],{encoding:n}=e;for(const r of[[Pf,Of],[oc,kf]])(_s(n[r[0]])||_s(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(xu)&&e.typedFieldDef(xu).type===px&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(zr.Main)),t}function _ln(e,t){const n=dte(gln,i=>!!(!Nt(e.explicit,i)&&!Nt(t.explicit,i)||Nt(e.explicit,i)&&Nt(t.explicit,i)&&Xu(e.get(i),t.get(i))));if(Xu(e.size,t.size)){if(n)return e;if(Xu(e.explicit,{}))return t;if(Xu(t.explicit,{}))return e}return null}function bln(e){if(e.children.length===0)return;let t;for(const r of e.children)u7e(r);const n=dte(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=_ln(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new a7e(r,t.specifiedProjection,t.size,qt(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function wln(e,t,n,r){if(tO(t,n)){const i=$i(e)?e.axis(n)??e.legend(n)??{}:{},s=Je(t,{expr:"datum"}),o=Je(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Je(t,{binSuffix:"range",forAs:!0}),formula:JI(s,o,i.format,i.formatType,r)}}return{}}function l7e(e,t){return`${k9e(e)}_${t}`}function Eln(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function wne(e,t,n){const r=l5(n,void 0)??{},i=l7e(r,t);return e.getName(`${i}_bins`)}function xln(e){return"as"in e}function C1e(e,t,n){let r,i;xln(e)?r=rt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Je(e,{forAs:!0}),Je(e,{binSuffix:"end",forAs:!0})];const s={...l5(t,void 0)},o=l7e(s,e.field),{signal:a,extentSignal:u}=Eln(n,o);if(JF(s.extent)){const c=s.extent;i=zje(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class $d extends Sr{clone(){return new $d(null,qt(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ka(s)&&Hr(s.bin)){const{key:a,binComponent:u}=C1e(s,s.bin,n);i[a]={...u,...i[a],...wln(n,s,o,n.config)}}return i},{});return Or(r)?null:new $d(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=C1e(n,n.bin,r);return new $d(t,{[i]:s})}merge(t,n){for(const r of De(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=md([...this.bins[r].as,...t.bins[r].as],kn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(vo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(vo(this.bins).map(t=>t.field))}hash(){return`Bin ${kn(this.bins)}`}assemble(){return vo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:sc(t.field),as:r,signal:t.signal,...JF(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:sc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Je({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Sln(e,t,n,r){var s;const i=$i(r)?r.encoding[gh(t)]:void 0;if(ka(n)&&$i(r)&&SBe(n,i,r.markDef,r.config)){e.add(Je(n,{})),e.add(Je(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=p0({fieldDef:n,markDef:a,config:u});eC(o)&&l!==.5&&Wi(t)&&(e.add(Je(n,{suffix:g5})),e.add(Je(n,{suffix:y5}))),n.bin&&tO(n,t)&&e.add(Je(n,{binSuffix:"range"}))}else if(w9e(t)){const o=b9e(t);e.add(r.getName(o))}else e.add(Je(n));return Xv(n)&&psn((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Tln(e,t){for(const n of De(t)){const r=t[n];for(const i of De(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class sf extends Sr{clone(){return new sf(null,new Set(this.dimensions),qt(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Je(o,{forAs:!0})]);else{if(Bp(u)||G0(u)){const c=Bp(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Je({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Je(o,{forAs:!0})]);um(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Je({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Je({field:l,aggregate:"max"},{forAs:!0})]))}else Sln(s,a,o,n)}),s.size+De(i).length===0)?null:new sf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||Je(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||Je(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+De(i).length===0?null:new sf(t,r,i)}merge(t){return d9e(this.dimensions,t.dimensions)?(Tln(this.measures,t.measures),!0):(Bin("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...De(this.measures)])}producedFields(){const t=new Set;for(const n of De(this.measures))for(const r of De(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${kn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of De(this.measures))for(const o of De(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:sc(s));return{type:"aggregate",groupby:[...this.dimensions].map(sc),ops:t,fields:n,as:r}}}class yx extends Sr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Hl){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Je(o),...Hr(a)?[Je(o,{binSuffix:"end"})]:[]],...Pd(u)?{sortField:u}:Ie(u)?{sortIndexField:dE(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Hl)this[n]&&(t+=` ${n.charAt(0)}:${kn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Hl)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Hl)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of yh){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Ws(i)&&Y0(s)){const o=E5(this.childModel,n),a=Tne(o);a?t[n]=a:Ue(Ate(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=s5,field:f}=u;s.push(f),o.push(c),a.push(Je(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of yne){for(const c of vne){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[gp,mp])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function I1e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Aln(e,t){const n=mte(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=I1e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=I1e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Ue(Yrn(t)),null}function Cln(e){const t={};return z$(e.filter,n=>{if(nBe(n)){let r=null;Pte(n)?r=qu(n.equal):$te(n)?r=qu(n.lte):kte(n)?r=qu(n.lt):Rte(n)?r=qu(n.gt):Nte(n)?r=qu(n.gte):Dte(n)?r=n.range[0]:Lte(n)&&(r=(n.oneOf??n.in)[0]),r&&(Yv(r)?t[n.field]="date":Jn(r)?t[n.field]="number":rt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Iln(e){const t={};function n(r){uE(r)?t[r.field]="date":r.type==="quantitative"&&Trn(r.aggregate)?t[r.field]="number":tE(r.field)>1?r.field in t||(t[r.field]="flatten"):Xv(r)&&Pd(r.sort)&&tE(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if(($i(e)||nl(e))&&e.forEachFieldDef((r,i)=>{if(ka(r))n(r);else{const s=Wv(i),o=e.fieldDef(s);n({...r,type:o.type})}}),$i(e)){const{mark:r,markDef:i,encoding:s}=e;if(K0(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ve(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Oln(e){const t={};if($i(e)&&e.component.selection)for(const n of De(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&tE(i.field)>1&&(t[i.field]="flatten")}return t}class Go extends Sr{clone(){return new Go(null,qt(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${kn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!Rg(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of De(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Ue(Fye(a,r[a],u.value)))}for(const a of De(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Ue(Fye(a,n[a],u)))}const s=new cm(n,r);i.copyAll(s);const o={};for(const a of De(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return De(o).length===0||i.parseNothing?null:new Go(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of De(this._parse)){const r=this._parse[n];tE(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(De(this._parse))}dependentFields(){return new Set(De(this._parse))}assembleTransforms(t=!1){return De(this._parse).filter(n=>t?tE(n)>1:!0).map(n=>{const r=Aln(n,this._parse[n]);return r?{type:"formula",expr:r,as:gte(n)}:null}).filter(n=>n!==null)}}class v0 extends Sr{clone(){return new v0(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([pf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:pf}}}class iO extends Sr{clone(){return new iO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${kn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class sO extends Sr{clone(){return new sO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${kn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class cv extends Sr{constructor(t){super(null),t??(t={name:"source"});let n;if(Rg(t)||(n=t.format?{...fu(t.format,["parse"])}:{}),tC(t))this._data={values:t.values};else if(lE(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];$n(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else yje(t)?this._data={values:[{type:"Sphere"}]}:(mje(t)||Rg(t))&&(this._data={});this._generator=Rg(t),t.name&&(this._name=t.name),n&&!Or(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var O1e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Pln=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},ST;function Ene(e){return e instanceof cv||e instanceof iO||e instanceof sO}class xne{constructor(){ST.set(this,void 0),O1e(this,ST,!1,"f")}setModified(){O1e(this,ST,!0,"f")}get modifiedFlag(){return Pln(this,ST,"f")}}ST=new WeakMap;class Qv extends xne{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Sne extends xne{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class kln extends Sne{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of De(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class $ln extends Sne{constructor(t){super(),this.requiresSelectionId=t&&gne(t)}run(t){t instanceof v0&&(this.requiresSelectionId&&(Ene(t.parent)||t.parent instanceof sf||t.parent instanceof Go)||(this.setModified(),t.remove()))}}class Rln extends xne{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof kd&&(r=t.producedFields(),hte(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Nln extends Sne{constructor(){super()}run(t){t instanceof Sa&&!t.isRequired()&&(this.setModified(),t.remove())}}class Dln extends Qv{run(t){if(!Ene(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Go)if(t instanceof Go)this.setModified(),t.merge(n);else{if(pte(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Lln extends Qv{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Go);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of De(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Or(i)){this.setModified();const o=new Go(t,i);for(const a of n){if(a instanceof Go)for(const u of De(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof Go&&De(a.parse).length===0&&a.remove()}}}}}class Mln extends Qv{run(t){t instanceof Sa||t.numChildren()>0||t instanceof yx||t instanceof cv||(this.setModified(),t.remove())}}class Fln extends Qv{run(t){const n=t.children.filter(i=>i instanceof kd),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Bln extends Qv{run(t){const n=t.children.filter(i=>i instanceof sf),r={};for(const i of n){const s=kn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of De(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class jln extends Qv{constructor(t){super(),this.model=t}run(t){const n=!(Ene(t)||t instanceof gx||t instanceof Go||t instanceof v0),r=[],i=[];for(const s of t.children)s instanceof $d&&(n&&!pte(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof $d?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class zln extends Qv{run(t){const n=[...t.children];if(!tv(n,o=>o instanceof Sa)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Sa){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Sa)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class Jv extends Sr{clone(){return new Jv(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=md(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Je(t)}hash(){return`JoinAggregateTransform ${kn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function Uln(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Je(r);return i&&t.push(i),t},[])}function Vln(e){return Ie(e)&&e.every(t=>rt(t))&&e.length>1}class vp extends Sr{clone(){return new vp(null,qt(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(qi(f.order,"ascending"));const l={field:a,order:u};let c;return Vln(s)?c=s:rt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new vp(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Jd(p)}).filter(h=>!!h),c=Uln(n),f=n.encoding.order;let d;if(Ie(f)||Ve(f))d=L9e(f);else{const h=TBe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new vp(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${kn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Je(i,{binSuffix:"mid"})]:[Je(i,{}),Je(i,{binSuffix:"end"})]:[Je(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Je(c,{expr:"datum"}),p=Je(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:Je(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Je(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class vx extends Sr{clone(){return new vx(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=md(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Je(t)}hash(){return`WindowTransform ${kn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Ste(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Hln(e){function t(n){if(!(n instanceof yx)){const r=n.clone();if(r instanceof Sa){const i=Mq+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof sf||r instanceof vp||r instanceof vx||r instanceof Jv)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function Lq(e){if(e instanceof yx)if(e.numChildren()===1&&!(e.children[0]instanceof Sa)){const t=e.children[0];(t instanceof sf||t instanceof vp||t instanceof vx||t instanceof Jv)&&t.addDimensions(e.fields),t.swapWithParent(),Lq(e)}else{const t=e.model.component.data.main;c7e(t);const n=Hln(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(Lq)}function c7e(e){if(e instanceof Sa&&e.type===zr.Main&&e.numChildren()===1){const t=e.children[0];t instanceof yx||(t.swapWithParent(),c7e(e))}}const Mq="scale_",ik=5;function Fq(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!Fq(t.children))return!1}return!0}function Ec(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function P1e(e,t,n){let r=e.sources,i=!1;return i=Ec(new Nln,r)||i,i=Ec(new $ln(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Ec(new Mln,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Ec(new Dln,r)||i,i=Ec(new jln(t),r)||i,i=Ec(new Rln,r)||i,i=Ec(new Lln,r)||i,i=Ec(new Bln,r)||i,i=Ec(new Fln,r)||i,i=Ec(new kln,r)||i,i=Ec(new zln,r)||i),e.sources=r,i}function qln(e,t){Fq(e.sources);let n=0,r=0;for(let i=0;i<ik&&P1e(e,t,!0);i++)n++;e.sources.map(Lq);for(let i=0;i<ik&&P1e(e,t,!1);i++)r++;Fq(e.sources),Math.max(n,r)===ik&&Ue(`Maximum optimization runs(${ik}) reached.`)}class Ls{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Ls(()=>t(n))}}function f7e(e){$i(e)?Wln(e):Gln(e)}function Wln(e){const t=e.component.scales;for(const n of De(t)){const r=Kln(e,n);if(t[n].setWithExplicit("domains",r),Qln(e,n),e.component.data.isFaceted){let s=e;for(;!nl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Zh(a)&&(a.data=Mq+a.data.replace(Mq,""))}}}function Gln(e){for(const n of e.children)f7e(n);const t=e.component.scales;for(const n of De(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=m0(r,o.getWithExplicit("domains"),"domains","scale",Bq);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Ue(Hrn),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Yln(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=k1e(t,n);if(!i){Ue(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=k1e(t,n);if(i)return"unaggregated"}return e}function Kln(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Yln(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&_s(r.x2)?_s(r.x)?m0(Tm(n,i,e,"x"),Tm(n,i,e,"x2"),"domain","scale",Bq):Tm(n,i,e,"x2"):t==="y"&&_s(r.y2)?_s(r.y)?m0(Tm(n,i,e,"y"),Tm(n,i,e,"y2"),"domain","scale",Bq):Tm(n,i,e,"y2"):Tm(n,i,e,t)}function Xln(e,t,n){return e.map(r=>({signal:`{data: ${c5(r,{timeUnit:n,type:t})}}`}))}function Zj(e,t,n){var i;const r=(i=qs(n))==null?void 0:i.unit;return t==="temporal"||r?Xln(e,t,r):[e]}function Tm(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=_s(i[r]),{type:c}=l,f=l.timeUnit;if(hsn(t)){const p=Tm(e,void 0,n,r),m=Zj(t.unionWith,c,f);return Kf([...m,...p.value])}else{if(Tt(t))return Kf([t]);if(t&&t!=="unaggregated"&&!lBe(t))return Kf(Zj(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Lu([[0,1]]);const p=n.requestDataName(zr.Main);return Lu([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=um(r)&&Ve(l)?Jln(n,r,e):void 0;if(vh(l)){const p=Zj([l.datum],c,f);return Lu(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(zr.Main),{field:m}=l;return Lu([{data:p,field:Je({field:m,aggregate:"min"})},{data:p,field:Je({field:m,aggregate:"max"})}])}else if(Hr(h.bin)){if(Ws(e))return Lu(e==="bin-ordinal"?[]:[{data:JA(d)?n.requestDataName(zr.Main):n.requestDataName(zr.Raw),field:n.vgField(r,tO(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!ot(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(Hr(p)){const m=wne(n,h.field,p);return Lu([new Ls(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Lu([{data:n.requestDataName(zr.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&$n(["time","utc"],e)){const p=i[gh(r)];if(SBe(h,p,s,a)){const m=n.requestDataName(zr.Main),g=p0({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=eC(o)&&g!==.5&&Wi(r);return Lu([{data:m,field:n.vgField(r,y?{suffix:g5}:{})},{data:m,field:n.vgField(r,{suffix:y?y5:"end"})}])}}return Lu(d?[{data:JA(d)?n.requestDataName(zr.Main):n.requestDataName(zr.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(zr.Main),field:n.vgField(r)}])}function e7(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":s5),...r?{field:sc(r)}:{},...i?{order:i}:{}}}function Qln(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=lBe(r)&&r,o=Gv(i)&&JF(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Jln(e,t,n){if(!Ws(n))return;const r=e.fieldDef(t),i=r.sort;if(EBe(i))return{op:"min",field:dE(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Pd(i)){const a=s&&!o.has(i.field);return e7(i,a)}else if(wBe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Bp(c)||G0(c))return e7({field:Je(l),order:u},d);if(Ste(c)||!c)return e7({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if($n(["ascending",void 0],i))return!0}}function k1e(e,t){const{aggregate:n,type:r}=e;return n?rt(n)&&!Crn.has(n)?{valid:!1,reason:gin(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:yin(e)}:{valid:!0}:{valid:!1,reason:min(e)}}function Bq(e,t,n,r){return e.explicit&&t.explicit&&Ue(Ein(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Zln(e){const t=md(e.map(o=>{if(Zh(o)){const{sort:a,...u}=o;return u}return o}),kn),n=md(e.map(o=>{if(Zh(o)){const a=o.sort;return a!==void 0&&!JA(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),kn);if(t.length===0)return;if(t.length===1){const o=e[0];if(Zh(o)&&n.length>0){let a=n[0];if(n.length>1){Ue(jye);const u=n.filter(l=>ot(l)&&"op"in l&&l.op!=="min");n.every(l=>ot(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(ot(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=md(n.map(o=>JA(o)||!("op"in o)||rt(o.op)&&o.op in xrn?o:(Ue(Sin(o)),!0)),kn);let i;r.length===1?i=r[0]:r.length>1&&(Ue(jye),i=!0);const s=md(e.map(o=>Zh(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Tne(e){if(Zh(e)&&rt(e.field))return e.field;if(Irn(e)){let t;for(const n of e.fields)if(Zh(n)&&rt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ue(Tin),t}return Ue(Ain),t}else if(Orn(e)){Ue(Cin);const t=e.fields[0];return rt(t)?t:void 0}}function E5(e,t){const r=e.component.scales[t].get("domains").map(i=>(Zh(i)&&(i.data=e.lookupDataSource(i.data)),i));return Zln(r)}function d7e(e){return _x(e)||Ane(e)?e.children.reduce((t,n)=>t.concat(d7e(n)),$1e(e)):$1e(e)}function $1e(e){return De(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=ecn(i.range,s,n,e),h=E5(e,n),p=a?Yan(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function ecn(e,t,n,r){if(Wi(n)){if(Y0(e))return{step:{signal:`${t}_step`}}}else if(ot(e)&&Zh(e))return{...e,data:r.lookupDataSource(e.data)};return e}class h7e extends cm{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:tv(this.get("domains"),t=>Ie(t)&&t.length===2&&Jn(t[0])&&t[0]<=0&&Jn(t[1])&&t[1]>=0)}}const tcn=["range","scheme"];function ncn(e){const t=e.component.scales;for(const n of QF){const r=t[n];if(!r)continue;const i=rcn(n,e);r.setWithExplicit("range",i)}}function R1e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Su(t),o=e.getName(s);if(ot(r)&&r.binned&&r.step!==void 0)return new Ls(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Hr(r)){const a=wne(e,i,r);return new Ls(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function rcn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of tcn)if(n[f]!==void 0){const d=xq(s,f),h=cBe(e,f);if(!d)Ue(V9e(s,f,e));else if(h)Ue(h);else switch(f){case"range":{const p=n.range;if(Ie(p)){if(Wi(e))return Kf(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Ls.fromName(y,g)}return m}))}else if(ot(p))return Kf({data:t.requestDataName(zr.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Kf(p)}case"scheme":return Kf(icn(n[f]))}}const o=e===pi||e==="xOffset"?"width":"height",a=r[o];if(Zd(a)){if(Wi(e))if(Ws(s)){const f=m7e(a,t,e);if(f)return Kf({step:f})}else Ue(H9e(o));else if(KI(e)){const f=e===U0?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=g7e(a,s);if(p)return Kf(p)}}}const{rangeMin:u,rangeMax:l}=n,c=scn(e,t);return(u!==void 0||l!==void 0)&&xq(s,"rangeMin")&&Ie(c)&&c.length===2?Kf([u??c[0],l??c[1]]):Lu(c)}function icn(e){return dsn(e)?{scheme:e.name,...fu(e,["name"])}:{scheme:e}}function p7e(e,t,n,{center:r}={}){const i=Su(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Xs&&dl(n)?r?[Ls.fromName(a=>`${o(a)}/2`,s),Ls.fromName(a=>`-${o(a)}/2`,s)]:[Ls.fromName(o,s),0]:r?[Ls.fromName(a=>`-${o(a)}/2`,s),Ls.fromName(a=>`${o(a)}/2`,s)]:[0,Ls.fromName(o,s)]}function scn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=_s(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case pi:case Xs:{if($n(["point","band"],u)){const f=y7e(e,n,r.view);if(Zd(f))return{step:m7e(f,t,e)}}return p7e(e,t,u)}case U0:case hx:return ocn(e,t,u);case om:{const f=t.component.scales[e].get("zero"),d=v7e(i,f,r),h=lcn(i,n,t,r);return sE(u)?ucn(d,h,acn(u,r,l,e)):[d,h]}case yc:return[0,Math.PI*2];case qv:return[0,360];case If:return[0,new Ls(()=>{const f=t.getSignalName(nl(t.parent)?"child_width":"width"),d=t.getSignalName(nl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case q0:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case W0:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case xu:return"symbol";case Eu:case ph:case mh:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case am:case V0:case H0:return[r.scale.minOpacity,r.scale.maxOpacity]}}function m7e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=bte(n),o=r[s];if(tje({step:e,offsetIsDiscrete:Jt(o)&&iBe(o.type)})==="offset"&&LBe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${Rrn(f)})`}}else return e.step}function g7e(e,t){if(tje({step:e,offsetIsDiscrete:Ws(t)})==="offset")return{step:e.step}}function ocn(e,t,n){const r=e===U0?"x":"y",i=t.getScaleComponent(r);if(!i)return p7e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=y7e(r,t.size,t.config.view);if(Zd(l)){const c=g7e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ve(l)&&l.timeUnit){const c=eBe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=p0({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Tt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Tt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return c9e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function y7e(e,t,n){const r=e===pi?"width":"height",i=t[r];return i||KL(n,r)}function acn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Ie(n)?n.length+1:(Ue(Lin(r)),3)}}function ucn(e,t,n){const r=()=>{const i=Yc(t),s=Yc(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Tt(t)?new Ls(r):{signal:r()}}function v7e(e,t,n){if(t)return Tt(t)?{signal:`${t.signal} ? 0 : ${v7e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(ZF("size",e))}const N1e=.95;function lcn(e,t,n,r){const i={x:R1e(n,"x"),y:R1e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=D1e(t,i,r.view);return Jn(s)?s-1:new Ls(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=D1e(t,i,r.view);return Jn(s)?Math.pow(N1e*s,2):new Ls(()=>`pow(${N1e} * ${s.signal}, 2)`)}}throw new Error(ZF("size",e))}function D1e(e,t,n){const r=Zd(e.width)?e.width.step:YL(n,"width"),i=Zd(e.height)?e.height.step:YL(n,"height");return t.x||t.y?new Ls(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function _7e(e,t){$i(e)?ccn(e,t):w7e(e,t)}function ccn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of De(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=_s(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=xq(h,t),y=cBe(a,t);if(d!==void 0&&(g?y&&Ue(y):Ue(V9e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,_=f.type;switch(t){case"domainMax":case"domainMin":Yv(u[t])||_==="temporal"||v?l.set(t,{signal:c5(u[t],{type:_,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in L1e?L1e[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:MBe(i,a),hasSecondaryRangeChannel:!!i[gh(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const L1e={bins:({model:e,fieldOrDatumDef:t})=>Ve(t)?fcn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>dcn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>hcn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>pcn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>mcn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>gcn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ve(e)?e.sort:void 0;return ycn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>vcn(e,t,n,r,i,s.scale,o)};function b7e(e){$i(e)?ncn(e):w7e(e,"range")}function w7e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?b7e(r):_7e(r,t);for(const r of De(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=m0(i,a,t,"scale",pje((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function fcn(e,t){const n=t.bin;if(Hr(n)){const r=wne(e,t.field,n);return new Ls(()=>e.getSignalName(r))}else if(oo(n)&&Gv(n)&&n.step!==void 0)return{step:n.step}}function dcn(e,t){if($n([Eu,ph,mh],e)&&t!=="nominal")return"hcl"}function hcn(e,t,n,r,i,s){var o;if(!((o=Jd(s))!=null&&o.bin||Ie(n)||i!=null||r!=null||$n([du.TIME,du.UTC],e)))return Wi(t)?!0:void 0}function pcn(e,t,n,r,i,s){if(Wi(e)){if(Kc(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ve(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===du.POINT)return n.pointPadding}}function mcn(e,t,n,r,i,s=!1){if(e===void 0){if(Wi(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:qi(o,n==="bar"?a:u)}else if(KI(t)&&r===du.BAND)return i.offsetBandPaddingInner}}function gcn(e,t,n,r,i,s=!1){if(e===void 0){if(Wi(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===du.BAND)return qi(o,Tt(r)?{signal:`${r.signal}/2`}:r/2)}else if(KI(t)){if(n===du.POINT)return .5;if(n===du.BAND)return i.offsetBandPaddingOuter}}}function ycn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return dl(e)&&t==="descending"?Tt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(dl(e)&&t==="descending")return!0}function vcn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&dl(i)){if(Ie(n)){const u=n[0],l=n[n.length-1];if(Jn(u)&&u<=0&&Jn(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!sE(i))return!0;if(!(Ve(t)&&t.bin)&&$n([...yh,...mrn],e)){const{orient:u,type:l}=r;return $n(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:$n(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function _cn(e,t,n,r,i=!1){const s=bcn(t,n,r,i),{type:o}=e;return um(t)?o!==void 0?_sn(t,o)?Ve(n)&&!vsn(o,n.type)?(Ue(bin(o,s)),s):o:(Ue(_in(t,o,s)),s):s:null}function bcn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Wb(e)||qj(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ue(Wj(e,"ordinal")),"ordinal";if(Wi(e)||KI(e)){if($n(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in xte)return"band";const s=n[Su(e)];return ov(s)||aE(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Wb(e)?"time":qj(e)==="discrete"?(Ue(Wj(e,"temporal")),"ordinal"):Ve(t)&&t.timeUnit&&qs(t.timeUnit).utc?"utc":"time";case"quantitative":return Wb(e)?Ve(t)&&Hr(t.bin)?"bin-ordinal":"linear":qj(e)==="discrete"?(Ue(Wj(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(z9e(t.type))}function wcn(e,{ignoreRange:t}={}){E7e(e),f7e(e);for(const n of ysn)_7e(e,n);t||b7e(e)}function E7e(e){$i(e)?e.component.scales=Ecn(e):e.component.scales=Scn(e)}function Ecn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of QF){const o=_s(t[s]);if(o&&n===hBe&&s===xu&&o.type===px)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=MBe(t,s),l=_cn(a,s,o,r,u);i[s]=new h7e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const xcn=pje((e,t)=>Uye(e)-Uye(t));function Scn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){E7e(s);for(const o of De(s.component.scales))if((t=i.scale)[o]??(t[o]=Jje(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?asn(a.value,u.value)?r[o]=m0(a,u,"type","scale",xcn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of De(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new h7e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class t7{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function $i(e){return(e==null?void 0:e.type)==="unit"}function nl(e){return(e==null?void 0:e.type)==="facet"}function Ane(e){return(e==null?void 0:e.type)==="concat"}function _x(e){return(e==null?void 0:e.type)==="layer"}class Cne{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Ja(a),this.name=t.name??i,this.title=Dm(t.title)?{text:t.title}:t.title?Ja(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new t7,this.projectionNameMap=r?r.projectionNameMap:new t7,this.signalNameMap=r?r.signalNameMap:new t7,this.data=t.data,this.description=t.description,this.transforms=kan(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Don(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:o5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new cm,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?qt(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){wcn(this)}parseProjection(){u7e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){r7e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of De(r)){const o=r[s];o!==void 0&&(i[s]=Xr(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Xr(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Or(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=qun(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Hl)t[r].title&&n.push(Bun(this,r));for(const r of yne)n=n.concat(jun(this,r));return n}assembleAxes(){return Aun(this.component.axes,this.config)}assembleLegends(){return s7e(this)}assembleProjections(){return pln(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...$9e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return $n(["unit","layer"],this.type)?$n(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Or(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||nl(this.parent)?d7e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return hi((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(zr[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(nl(this.parent)){const n=Xje(t),r=XF(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Ws(s)&&Y0(o)){const a=i.get("name"),u=E5(this,r),l=Tne(u);if(l){const c=Je({aggregate:"distinct",field:l},{expr:"datum"});return{signal:Kje(a,i,c)}}else return Ue(Ate(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(x9e(t)&&um(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Frn(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class x7e extends Cne{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Je(r,n)}reduceFieldDef(t,n){return con(this.getMapping(),(r,i,s)=>{const o=Jd(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Zte(this.getMapping(),(r,i)=>{const s=Jd(r);s&&t(s,i)},n)}}class x5 extends Sr{clone(){return new x5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${kn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return this.transform.groupby&&(r.resolve="shared"),r}}class S5 extends Sr{clone(){return new S5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${kn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class nC extends Sr{clone(){return new nC(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(fr("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=um(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");dl(d)&&l.aggregate!=="count"&&!K0(i)&&(u[l.field]=l)}return u},{});return De(a).length?new nC(t,a):null}dependentFields(){return new Set(De(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${kn(this.filter)}`}assemble(){const t=De(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Je(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class T5 extends Sr{clone(){return new T5(this.parent,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${kn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class A5 extends Sr{clone(){return new A5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${kn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Kb extends Sr{clone(){return new Kb(null,qt(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Pf,Of],[oc,kf]]){const s=i.map(o=>{const a=_s(n.encoding[o]);return Ve(a)?a.field:vh(a)?{expr:`${a.datum}`}:hf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Kb(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(xu)){const i=n.typedFieldDef(xu);i.type===px&&(t=new Kb(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(rt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${kn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class rC extends Sr{clone(){return new rC(null,this.projection,qt(this.fields),qt(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Pf,Of],[oc,kf]]){const i=r.map(o=>{const a=_s(n.encoding[o]);return Ve(a)?a.field:vh(a)?{expr:`${a.datum}`}:hf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===oc?"2":"";(i[0]||i[1])&&(t=new rC(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(rt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${kn(this.fields)} ${kn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class T1 extends Sr{clone(){return new T1(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new T1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ve(i)&&Ve(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=BBe(n.mark,r);return new T1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${kn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:dan(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class C5 extends Sr{clone(){return new C5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${kn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class iC extends Sr{clone(){return new iC(null,qt(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(han(o)){let u=A7e(o.data,s);u||(u=new cv(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Sa(u,l,zr.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(pan(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(hi(u),u)}catch{throw new Error(Urn(u))}if(a=l.materialized,!a)throw new Error(Vrn(u))}return new iC(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?nt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${kn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:nt(this.transform.as)}:{}};else{let n=this.transform.as;rt(n)||(Ue(Qrn),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class I5 extends Sr{clone(){return new I5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${kn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class O5 extends Sr{clone(){return new O5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qt(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${kn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class P5 extends Sr{clone(){return new P5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=md((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${kn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class k5 extends Sr{clone(){return new k5(null,qt(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${kn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function S7e(e){let t=0;function n(r,i){if(r instanceof cv&&!r.isGenerator&&!lE(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Go&&(r.parent instanceof cv&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof yx){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof iO||r instanceof sO||r instanceof nC||r instanceof gx||r instanceof fE||r instanceof rC||r instanceof sf||r instanceof iC||r instanceof vx||r instanceof Jv||r instanceof A5||r instanceof T5||r instanceof x5||r instanceof C5||r instanceof I5||r instanceof O5||r instanceof v0||r instanceof k5||r instanceof P5||r instanceof S5)&&i.transform.push(r.assemble()),(r instanceof $d||r instanceof kd||r instanceof T1||r instanceof vp||r instanceof Kb)&&i.transform.push(...r.assemble()),r instanceof Sa&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Sa?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Sa&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Tcn(e){const t=[],n=S7e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Acn(e,t){const n=[],r=S7e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Ccn(e){return e==="top"||e==="left"||Tt(e)?"header":"footer"}function Icn(e){for(const t of Hl)Ocn(e,t);M1e(e,"x"),M1e(e,"y")}function Ocn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=hE("title",null,r,t);let l=Gb(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Ie(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=hE("labelOrient",a.header,r,t),f=a.header!==null?qi((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=$n(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[T7e(e,t,f)]}}}function T7e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function M1e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=bne(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=Ccn(a.get("orient"));o[u]??(o[u]=[T7e(e,s,!1)]);const l=xT(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Pcn(e){Ine(e),ZL(e,"width"),ZL(e,"height")}function kcn(e){Ine(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";ZL(e,t),ZL(e,n)}function Ine(e){for(const t of e.children)t.parseLayoutSize()}function ZL(e,t){const n=Xje(t),r=XF(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??Jje(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=m0(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function $cn(e){const{size:t,component:n}=e;for(const r of yh){const i=Su(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Zd(s)?"step":s,!0)}else{const s=Rcn(e,i);n.layoutSize.set(i,s,!1)}}}function Rcn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Ws(s)){const a=KL(r.view,t);return Y0(o)||Zd(a)?"step":a}else return Aq(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return Aq(r.view,t);{const s=KL(r.view,t);return Zd(s)?s.step:s}}}function jq(e,t,n){return Je(t,{suffix:`by_${Je(e)}`,...n})}class A2 extends x7e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Rne(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!ZI(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=De(t),r={};for(const i of n){if(![mp,gp].includes(i)){Ue(ZF(i,"facet"));break}const s=t[i];if(s.field===void 0){Ue(wq(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Qte(t,n);return r.header?r.header=Ja(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=$5(this),this.child.parseData()}parseLayoutSize(){Ine(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Icn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Hl)for(const r of vne){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=hE("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=b5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof A2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof A2?{...this.channelHasField("column")?{encode:{update:{columns:{field:Je(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof A2){if(this.child.channelHasField("column")){const i=Je(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of yh){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Ws(o)&&Y0(a)){const u=E5(this.child,i),l=Tne(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Ue(Ate(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Hl){const f=this.facet[c];if(f){u.push(Je(f));const{bin:d,sort:h}=f;if(Hr(d)&&u.push(Je(f,{binSuffix:"end"})),Pd(h)){const{field:p,op:m=s5}=h,g=jq(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Ie(h)){const p=dE(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Pd(r.sort)?[jq(r,r.sort,{expr:"datum"})]:Ie(r.sort)?[dE(r,t,{expr:"datum"})]:[Je(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Pd(i)?i.order:!Ie(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return Nq(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of yne)if(t[s]){const o=hE("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return Nq(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Tcn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Hl.map(u=>this.facetSortFields(u)).flat(),order:Hl.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Han(this,[]))}]}getMapping(){return this.facet}}function Ncn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Pd(s.sort)){const{field:o,op:a=s5}=s.sort;e=i=new Jv(e,{joinaggregate:[{op:a,field:o,as:jq(s,s.sort,{forAs:!0})}],groupby:[Je(s)]})}return i}return null}function A7e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(tC(e)&&tC(a)){if(Xu(e.values,a.values))return o}else if(lE(e)&&lE(a)){if(e.url===a.url)return o}else if(mje(e)&&e.name===o.dataName)return o}}return null}function Dcn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new cv({values:[]});return t.push(r),r}const n=A7e(e.data,t);if(n)return Rg(e.data)||(n.data.format=f9e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new cv(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Lcn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(San(i))o=e=new fE(e,i),s="derived";else if(cne(i)){const a=Cln(i);o=e=Go.makeWithAncestors(e,{},a,n)??e,e=new gx(e,t,i.filter)}else if(cje(i))o=e=$d.makeFromTransform(e,i,t),s="number";else if(Aan(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Go(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=kd.makeFromTransform(e,i);else if(Can(i))o=e=sf.makeFromTransform(e,i),s="number",gne(t)&&(e=new v0(e));else if(lje(i))o=e=iC.make(e,t,i,r++),s="derived";else if(wan(i))o=e=new vx(e,i),s="number";else if(Ean(i))o=e=new Jv(e,i),s="number";else if(Ian(i))o=e=vp.makeFromTransform(e,i),s="derived";else if(Oan(i))o=e=new A5(e,i),s="derived";else if(Pan(i))o=e=new S5(e,i),s="derived";else if(xan(i))o=e=new T5(e,i),s="derived";else if(man(i))o=e=new P5(e,i),s="derived";else if(ban(i))e=new k5(e,i);else if(Tan(i))o=e=T1.makeFromTransform(e,i),s="derived";else if(gan(i))o=e=new x5(e,i),s="derived";else if(yan(i))o=e=new I5(e,i),s="derived";else if(van(i))o=e=new O5(e,i),s="derived";else if(_an(i))o=e=new C5(e,i),s="derived";else{Ue(Xrn(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function $5(e){var m;let t=Dcn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(Rg(i)||lE(i)||tC(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Uan;Rg(i)?(gje(i)?t=new sO(t,i.sequence):fne(i)&&(t=new iO(t,i.graticule)),o.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(o.parseNothing=!0),t=Go.makeExplicit(t,e,o)??t,t=new v0(t);const a=e.parent&&_x(e.parent);($i(e)||nl(e))&&a&&(t=$d.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Lcn(t,e,o));const u=Oln(e),l=Iln(e);t=Go.makeWithAncestors(t,{},{...u,...l},o)??t,$i(e)&&(t=Kb.parseAll(t,e),t=rC.parseAll(t,e)),($i(e)||nl(e))&&(a||(t=$d.makeFromEncoding(t,e)??t),t=kd.makeFromEncoding(t,e)??t,t=fE.parseAllForSortIndex(t,e));const c=e.getDataName(zr.Raw),f=new Sa(t,c,zr.Raw,r);if(n[c]=f,t=f,$i(e)){const g=sf.makeFromEncoding(t,e);g&&(t=g,gne(e)&&(t=new v0(t))),t=T1.makeFromEncoding(t,e)??t,t=vp.makeFromEncoding(t,e)??t}$i(e)&&(t=nC.make(t,e)??t);const d=e.getDataName(zr.Main),h=new Sa(t,d,zr.Main,r);n[d]=h,t=h,$i(e)&&Sun(e,h);let p=null;if(nl(e)){const g=e.getName("facet");t=Ncn(t,e.facet)??t,p=new yx(t,e,g,h.getSource()),n[g]=p}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:h,facetRoot:p,ancestorParse:o}}class Mcn extends Cne{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Ue(Grn),this.children=this.getChildren(t).map((l,c)=>Rne(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=$5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of De(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return h5(t)?t.vconcat:une(t)?t.hconcat:t.concat}parseLayoutSize(){kcn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=_ne(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Fcn(e){return e===!1||e===null}const Bcn={disable:1,gridScale:1,scale:1,...NBe,labelExpr:1,encode:1},C7e=De(Bcn);class One extends cm{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new One(qt(this.explicit),qt(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Fcn(this.get(t))}hasOrientSignalRef(){return Tt(this.explicit.orient)}}function jcn(e,t,n){const{encoding:r,config:i}=e,s=_s(r[t])??_s(r[gh(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(av(u))return{text:Xc({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(oE(s)==="quantitative"){if(aE(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Xc({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Xc({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(oE(s)==="temporal"&&i.timeFormatType&&Ve(s)&&!s.timeUnit)return{text:Xc({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function zcn(e){return yh.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Ycn(n,e)]),t),{})}const Ucn={bottom:"top",top:"bottom",left:"right",right:"left"};function Vcn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of De(i.component.axes))n.axis[s]=bne(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Hcn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of yh){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Tt(a)){if(r[a]>0&&!u){const l=Ucn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Hcn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=qcn(i,s)}}}else return t.map(n=>n.clone());return e}function qcn(e,t){for(const n of C7e){const r=m0(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return B9e(i,s);case"gridScale":return{explicit:i.explicit,value:qi(i.value,s.value)}}return m5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Wcn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Tt(n.labelAngle)?n.labelAngle:ZA(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===qje(r,i))return!0}return e===n[t]}const Gcn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Ycn(e,t){var y,v;let n=t.axis(e);const r=new One,i=_s(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||Nun(e),u=t.getScaleComponent(e).get("type"),l=Cun(e,u,a,t.config),c=n!==void 0?!n:$q("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=kun(i,n,e,o.style,l),d=_Be(n.formatType,i,u),h=vBe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const _ of C7e){const b=_ in E1e?E1e[_](p):Kye(_)?n[_]:void 0,E=b!==void 0,w=Wcn(b,_,n,t,e);if(E&&w)r.set(_,b,w);else{const{configValue:x=void 0,configFrom:S=void 0}=Kye(_)&&_!=="values"?$q(_,o.style,n.style,l):{},I=x!==void 0;E&&!I?r.set(_,b,w):(S!=="vgAxisConfig"||Gcn.has(_)&&I||nO(x)||Tt(x))&&r.set(_,x,!1)}}const m=n.encoding??{},g=RBe.reduce((_,b)=>{if(!r.hasAxisPart(b))return _;const E=Qje(m[b]??{},t),w=b==="labels"?jcn(t,e,E):E;return w!==void 0&&!Or(w)&&(_[b]={update:w}),_},{});return Or(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Kcn({encoding:e,size:t}){for(const n of yh){const r=Su(n);Zd(t[r])&&ug(e[n])&&(delete t[r],Ue(H9e(r)))}return t}const Xcn={vgMark:"arc",encodeEntry:e=>({...vc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Wo("x",e,{defaultPos:"mid"}),...Wo("y",e,{defaultPos:"mid"}),...g0(e,"radius"),...g0(e,"theta")})},Qcn={vgMark:"area",encodeEntry:e=>({...vc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...XL("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...XL("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...mne(e)})},Jcn={vgMark:"rect",encodeEntry:e=>({...vc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...g0(e,"x"),...g0(e,"y")})},Zcn={vgMark:"shape",encodeEntry:e=>({...vc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ve(n)&&n.type===px?{field:Je(n,{expr:"datum"})}:{}}]}},efn={vgMark:"image",encodeEntry:e=>({...vc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...g0(e,"x"),...g0(e,"y"),...hne(e,"url")})},tfn={vgMark:"line",encodeEntry:e=>({...vc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Wo("x",e,{defaultPos:"mid"}),...Wo("y",e,{defaultPos:"mid"}),...Fs("size",e,{vgChannel:"strokeWidth"}),...mne(e)})},nfn={vgMark:"trail",encodeEntry:e=>({...vc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Wo("x",e,{defaultPos:"mid"}),...Wo("y",e,{defaultPos:"mid"}),...Fs("size",e),...mne(e)})};function Pne(e,t){const{config:n}=e;return{...vc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Wo("x",e,{defaultPos:"mid"}),...Wo("y",e,{defaultPos:"mid"}),...Fs("size",e),...Fs("angle",e),...rfn(e,n,t)}}function rfn(e,t,n){return n?{shape:{value:n}}:Fs("shape",e)}const ifn={vgMark:"symbol",encodeEntry:e=>Pne(e)},sfn={vgMark:"symbol",encodeEntry:e=>Pne(e,"circle")},ofn={vgMark:"symbol",encodeEntry:e=>Pne(e,"square")},afn={vgMark:"rect",encodeEntry:e=>({...vc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...g0(e,"x"),...g0(e,"y")})},ufn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...vc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...XL("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...XL("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Fs("size",e,{vgChannel:"strokeWidth"})}}},lfn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...vc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Wo("x",e,{defaultPos:"mid"}),...Wo("y",e,{defaultPos:"mid"}),...hne(e),...Fs("size",e,{vgChannel:"fontSize"}),...Fs("angle",e),...v1e("align",cfn(e.markDef,n,t)),...v1e("baseline",ffn(e.markDef,n,t)),...Wo("radius",e,{defaultPos:null}),...Wo("theta",e,{defaultPos:null})}}};function cfn(e,t,n){if(fr("align",e,n)===void 0)return"center"}function ffn(e,t,n){if(fr("baseline",e,n)===void 0)return"middle"}const dfn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...vc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Wo("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Wo("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Fs("size",e,{defaultValue:hfn(e),vgChannel:i}),[s]:Xr(fr("thickness",n,t))}}};function hfn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=fr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Y0(a)&&Jn(a.step)?a.step*3/4:YL(t.view,i)*3/4}}const sk={arc:Xcn,area:Qcn,bar:Jcn,circle:sfn,geoshape:Zcn,image:efn,line:tfn,point:ifn,rect:afn,rule:ufn,square:ofn,text:lfn,tick:dfn,trail:nfn};function pfn(e){if($n([r5,t5,Esn],e.mark)){const t=BBe(e.mark,e.encoding);if(t.length>0)return mfn(e,t)}else if(e.mark===n5){const t=bq.some(n=>fr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return gfn(e)}return kne(e)}const F1e="faceted_path_";function mfn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:F1e+e.requestDataName(zr.Main),data:e.requestDataName(zr.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:kne(e,{fromPrefix:F1e})}]}const B1e="stack_group_";function gfn(e){var l;const[t]=kne(e,{fromPrefix:B1e}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...eE(t.encode.update,["y","yc","y2","height",...bq]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...fu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...eE(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...fu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of bq){const f=jp(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=Xr(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Je(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Je(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=jp(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Xr(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(zr.Main),name:B1e+e.requestDataName(zr.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function yfn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Ie(o)&&hf(o)&&vq(o.value)||!o&&vq(fr("order",i,s)))){if((Ie(o)||Ve(o))&&!n)return L9e(o,{expr:"datum"});if(K0(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ve(l)){const c=l.sort;if(Ie(c))return{field:Je(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Pd(c))return{field:Je({aggregate:Jte(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(wBe(c)){const f=e.fieldDef(c.encoding);return{field:Je(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Je(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function kne(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=qi(r.clip,vfn(e),_fn(e)),a=N9e(r),u=i.key,l=yfn(e),c=bfn(e),f=fr("aria",r,s),d=sk[n].postEncodingTransform?sk[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:sk[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(zr.Main)},encode:{update:sk[n].encodeEntry(e)},...d?{transform:d}:{}}]}function vfn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function _fn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function bfn(e){if(!e.component.selection)return null;const t=De(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=De(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class I7e extends x7e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Qye(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Qd(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=ian(o,s,{graticule:t.data&&fne(t.data)}));const u=this.encoding=uon(t.encoding||{},a,o.filled,s);this.markDef=oje(o,u,s),this.size=Kcn({encoding:u,size:Qye(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=sje(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>one(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===hBe,r=t&&orn.some(i=>Jt(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return QF.reduce((r,i)=>{const s=_s(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Ja(t);return Ie(n)&&(i.domain=n.map(qu)),Ie(r)&&(i.range=r.map(qu)),i}initAxes(t){return yh.reduce((n,r)=>{const i=t[r];if(Jt(i)||r===pi&&Jt(t.x2)||r===Xs&&Jt(t.y2)){const s=Jt(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=De(t),r={};for(const i of n){const s=t[i];r[i]=nO(s)?R9e(s):qu(s)}return r}initLegends(t){return grn.reduce((n,r)=>{const i=_s(t[r]);if(i&&vrn(r)){const s=i.legend;n[r]=s&&Ja(s)}return n},{})}parseData(){this.component.data=$5(this)}parseLayoutSize(){$cn(this)}parseSelections(){this.component.selection=xun(this,this.selection)}parseMarkGroup(){this.component.mark=pfn(this)}parseAxesAndHeaders(){this.component.axes=zcn(this)}assembleSelectionTopLevelSignals(t){return qan(this,t)}assembleSignals(){return[...Uje(this),...Van(this,[])]}assembleSelectionData(t){return Wan(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return _ne(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!_x(this.parent))&&(t=_je(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return x1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Jd(n)}typedFieldDef(t){const n=this.fieldDef(t);return ka(n)?n:null}}class $ne extends Cne{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(p5(a))return new $ne(a,this,this.getName(`layer_${u}`),o,s);if(lm(a))return new I7e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Tte(a))})}parseData(){this.component.data=$5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Pcn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of De(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Vcn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Uje(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),_ne(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of nt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Gan(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),s7e(this))}}function Rne(e,t,n,r,i){if(o5(e))return new A2(e,t,n,i);if(p5(e))return new $ne(e,t,n,r,i);if(lm(e))return new I7e(e,t,n,r,i);if($on(e))return new Mcn(e,t,n,i);throw new Error(Tte(e))}function wfn(e,t={}){t.logger&&Min(t.logger),t.fieldTitle&&PBe(t.fieldTitle);try{const n=ije(tx(t.config,e.config)),r=hje(e,n),i=Rne(r,null,"",void 0,n);return i.parse(),qln(i.component.data,i),{spec:xfn(i,Efn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Fin(),t.fieldTitle&&Zsn()}}function Efn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):rt(t)&&(t={type:t}),i&&s&&Ban(t.type)){if(i==="step"&&s==="step")Ue(Dye()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Ue(Dye(XF(o)));const a=o==="width"?"height":"width";t.type=jan(a)}}return{...De(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...l1e(n,!1),...l1e(e,!0)}}function xfn(e,t,n={},r){const i=e.config?Won(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Acn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...eje(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Sfn=ern.version,Tfn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:tE,accessPathWithDatum:mte,compile:wfn,contains:$n,deepEqual:Xu,deleteNestedProperty:FL,duplicate:qt,entries:d0,every:dte,fieldIntersection:pte,flatAccessWithDatum:h9e,getFirstDefined:qi,hasIntersection:hte,hash:kn,internalField:g9e,isBoolean:JA,isEmpty:Or,isEqual:nrn,isInternalField:y9e,isNullOrFalse:vq,isNumeric:HF,keys:De,logicalExpr:S2,mergeDeep:f9e,never:c9e,normalize:hje,normalizeAngle:ZA,omit:fu,pick:eE,prefixGenerator:_q,removePathFromField:gte,replaceAll:nv,replacePathInField:sc,resetIdCounter:irn,setEqual:d9e,some:tv,stringify:Pr,titleCase:WI,unique:md,uniqueId:m9e,vals:vo,varName:hi,version:Sfn},Symbol.toStringTag,{value:"Module"}));function O7e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Afn="vega-themes",Cfn="2.14.0",Ifn="Themes for stylized Vega and Vega-Lite visualizations.",Ofn=["vega","vega-lite","themes","style"],Pfn="BSD-3-Clause",kfn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},$fn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Rfn="build/vega-themes.js",Nne="build/vega-themes.module.js",Nfn="build/vega-themes.min.js",Dfn="build/vega-themes.min.js",Lfn="build/vega-themes.module.d.ts",Mfn={type:"git",url:"https://github.com/vega/vega-themes.git"},Ffn=["src","build"],Bfn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},jfn={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},zfn={vega:"*","vega-lite":"*"},Ufn={},Vfn={name:Afn,version:Cfn,description:Ifn,keywords:Ofn,license:Pfn,author:kfn,contributors:$fn,main:Rfn,module:Nne,unpkg:Nfn,jsdelivr:Dfn,types:Lfn,repository:Mfn,files:Ffn,scripts:Bfn,devDependencies:jfn,peerDependencies:zfn,dependencies:Ufn};const C_="#fff",j1e="#888",Hfn={background:"#333",view:{stroke:j1e},title:{color:C_,subtitleColor:C_},style:{"guide-label":{fill:C_},"guide-title":{fill:C_}},axis:{domainColor:C_,gridColor:j1e,tickColor:C_}},oy="#4572a7",qfn={background:"#fff",arc:{fill:oy},area:{fill:oy},line:{stroke:oy,strokeWidth:2},path:{stroke:oy},rect:{fill:oy},shape:{stroke:oy},symbol:{fill:oy,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},ay="#30a2da",n7="#cbcbcb",Wfn="#999",Gfn="#333",z1e="#f0f0f0",U1e="#333",Yfn={arc:{fill:ay},area:{fill:ay},axis:{domainColor:n7,grid:!0,gridColor:n7,gridWidth:1,labelColor:Wfn,labelFontSize:10,titleColor:Gfn,tickColor:n7,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:z1e,group:{fill:z1e},legend:{labelColor:U1e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:U1e,titleFontSize:14,titlePadding:10},line:{stroke:ay,strokeWidth:2},path:{stroke:ay,strokeWidth:.5},rect:{fill:ay},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:ay},bar:{binSpacing:2,fill:ay,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},uy="#000",Kfn={group:{fill:"#e5e5e5"},arc:{fill:uy},area:{fill:uy},line:{stroke:uy},path:{stroke:uy},rect:{fill:uy},shape:{stroke:uy},symbol:{fill:uy,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Xfn=22,Qfn="normal",V1e="Benton Gothic, sans-serif",H1e=11.5,Jfn="normal",ly="#82c6df",r7="Benton Gothic Bold, sans-serif",q1e="normal",W1e=13,kS={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Zfn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:r7,fontSize:Xfn,fontWeight:Qfn},arc:{fill:ly},area:{fill:ly},line:{stroke:ly,strokeWidth:2},path:{stroke:ly},rect:{fill:ly},shape:{stroke:ly},symbol:{fill:ly,size:30},axis:{labelFont:V1e,labelFontSize:H1e,labelFontWeight:Jfn,titleFont:r7,titleFontSize:W1e,titleFontWeight:q1e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:V1e,labelFontSize:H1e,symbolType:"square",titleFont:r7,titleFontSize:W1e,titleFontWeight:q1e},range:{category:kS["category-6"],diverging:kS["fireandice-6"],heatmap:kS["fire-7"],ordinal:kS["fire-7"],ramp:kS["fire-7"]}},cy="#ab5787",ok="#979797",edn={background:"#f9f9f9",arc:{fill:cy},area:{fill:cy},line:{stroke:cy},path:{stroke:cy},rect:{fill:cy},shape:{stroke:cy},symbol:{fill:cy,size:30},axis:{domainColor:ok,domainWidth:.5,gridWidth:.2,labelColor:ok,tickColor:ok,tickWidth:.2,titleColor:ok},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},fy="#3e5c69",tdn={background:"#fff",arc:{fill:fy},area:{fill:fy},line:{stroke:fy},path:{stroke:fy},rect:{fill:fy},shape:{stroke:fy},symbol:{fill:fy},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Al="#1696d2",G1e="#000000",ndn="#FFFFFF",ak="Lato",i7="Lato",rdn="Lato",idn="#DEDDDD",sdn=18,$S={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},odn={background:ndn,title:{anchor:"start",fontSize:sdn,font:ak},axisX:{domain:!0,domainColor:G1e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:i7,labelAngle:0,tickColor:G1e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:ak},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:idn,gridWidth:1,labelFontSize:12,labelFont:i7,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:ak,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:i7,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:ak,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:$S["six-groups-cat-1"],diverging:$S["diverging-colors"],heatmap:$S["diverging-colors"],ordinal:$S["six-groups-seq"],ramp:$S["shades-blue"]},area:{fill:Al},rect:{fill:Al},line:{color:Al,stroke:Al,strokeWidth:5},trail:{color:Al,stroke:Al,strokeWidth:0,size:1},path:{stroke:Al,strokeWidth:.5},point:{filled:!0},text:{font:rdn,color:Al,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Al,stroke:null}},arc:{fill:Al},shape:{stroke:Al},symbol:{fill:Al,size:30}},dy="#3366CC",Y1e="#ccc",uk="Arial, sans-serif",adn={arc:{fill:dy},area:{fill:dy},path:{stroke:dy},rect:{fill:dy},shape:{stroke:dy},symbol:{stroke:dy},circle:{fill:dy},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:uk,fontSize:12},"guide-title":{font:uk,fontSize:12},"group-title":{font:uk,fontSize:12}},title:{font:uk,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Y1e,tickColor:Y1e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Dne=e=>e*(1/3+1),K1e=Dne(9),X1e=Dne(10),Q1e=Dne(12),RS="Segoe UI",J1e="wf_standard-font, helvetica, arial, sans-serif",Z1e="#252423",NS="#605E5C",eve="transparent",udn="#C8C6C4",Cc="#118DFF",ldn="#12239E",cdn="#E66C37",fdn="#6B007B",ddn="#E044A7",hdn="#744EC2",pdn="#D9B300",mdn="#D64550",P7e=Cc,k7e="#DEEFFF",tve=[k7e,P7e],gdn=[k7e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",P7e],ydn={view:{stroke:eve},background:eve,font:RS,header:{titleFont:J1e,titleFontSize:Q1e,titleColor:Z1e,labelFont:RS,labelFontSize:X1e,labelColor:NS},axis:{ticks:!1,grid:!1,domain:!1,labelColor:NS,labelFontSize:K1e,titleFont:J1e,titleColor:Z1e,titleFontSize:Q1e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:udn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Cc},line:{stroke:Cc,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:RS,fontSize:K1e,fill:NS},arc:{fill:Cc},area:{fill:Cc,line:!0,opacity:.6},path:{stroke:Cc},rect:{fill:Cc},point:{fill:Cc,filled:!0,size:75},shape:{stroke:Cc},symbol:{fill:Cc,strokeWidth:1.5,size:50},legend:{titleFont:RS,titleFontWeight:"bold",titleColor:NS,labelFont:RS,labelFontSize:X1e,labelColor:NS,symbolType:"circle",symbolSize:75},range:{category:[Cc,ldn,cdn,fdn,ddn,hdn,pdn,mdn],diverging:tve,heatmap:tve,ordinal:gdn}},s7='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',nve=400,vdn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],_dn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function R5({type:e,background:t}){const n=e==="dark"?"#161616":"#ffffff",r=e==="dark"?"#f4f4f4":"#161616",i=e==="dark"?vdn:_dn,s=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:s},area:{fill:s},path:{stroke:s},rect:{fill:s},shape:{stroke:s},symbol:{stroke:s},circle:{fill:s},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:s7,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:s7,fill:r,fontWeight:nve},"guide-title":{font:s7,fill:r,fontWeight:nve}},range:{category:i,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const bdn=R5({type:"light",background:"#ffffff"}),wdn=R5({type:"light",background:"#f4f4f4"}),Edn=R5({type:"dark",background:"#262626"}),xdn=R5({type:"dark",background:"#161616"}),Sdn=Vfn.version,Tdn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:wdn,carbong100:xdn,carbong90:Edn,carbonwhite:bdn,dark:Hfn,excel:qfn,fivethirtyeight:Yfn,ggplot2:Kfn,googlecharts:adn,latimes:Zfn,powerbi:ydn,quartz:edn,urbaninstitute:odn,version:Sdn,vox:tdn},Symbol.toStringTag,{value:"Module"}));function Adn(e,t,n,r){if(Ie(e))return`[${e.map(i=>t(rt(i)?i:rve(i,n))).join(", ")}]`;if(ot(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(ot(c)&&(c=rve(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Cdn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function rve(e,t){return JSON.stringify(e,Cdn(t))}var Idn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const $7e="vg-tooltip-element",Odn={offsetX:10,offsetY:10,id:$7e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Pdn,maxDepth:2,formatTooltip:Adn,baseURL:""};function Pdn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function kdn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Idn.toString().replace($7e,e)}function $dn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Rdn{constructor(t){this.options={...Odn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=kdn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=$dn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var o7={};function Ndn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var a7,ive;function Ddn(){return ive||(ive=1,a7=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),a7}var Ldn=ar;ar.Node=fv;ar.create=ar;function ar(e){var t=this;if(t instanceof ar||(t=new ar),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}ar.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};ar.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};ar.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};ar.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Fdn(this,arguments[e]);return this.length};ar.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Bdn(this,arguments[e]);return this.length};ar.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};ar.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};ar.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};ar.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};ar.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};ar.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};ar.prototype.map=function(e,t){t=t||this;for(var n=new ar,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};ar.prototype.mapReverse=function(e,t){t=t||this;for(var n=new ar,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};ar.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};ar.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};ar.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};ar.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};ar.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ar;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};ar.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ar;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};ar.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Mdn(this,i,n[r]);return s};ar.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Mdn(e,t,n){var r=t===e.head?new fv(n,null,t,e):new fv(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Fdn(e,t){e.tail=new fv(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Bdn(e,t){e.head=new fv(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function fv(e,t,n,r){if(!(this instanceof fv))return new fv(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Ddn()(ar)}catch{}const jdn=Ldn,By=Symbol("max"),Mh=Symbol("length"),I_=Symbol("lengthCalculator"),C2=Symbol("allowStale"),i1=Symbol("maxAge"),$h=Symbol("dispose"),sve=Symbol("noDisposeOnSet"),$s=Symbol("lruList"),Ic=Symbol("cache"),R7e=Symbol("updateAgeOnGet"),u7=()=>1;class zdn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[By]=t.max||1/0;const n=t.length||u7;if(this[I_]=typeof n!="function"?u7:n,this[C2]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[i1]=t.maxAge||0,this[$h]=t.dispose,this[sve]=t.noDisposeOnSet||!1,this[R7e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[By]=t||1/0,DS(this)}get max(){return this[By]}set allowStale(t){this[C2]=!!t}get allowStale(){return this[C2]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[i1]=t,DS(this)}get maxAge(){return this[i1]}set lengthCalculator(t){typeof t!="function"&&(t=u7),t!==this[I_]&&(this[I_]=t,this[Mh]=0,this[$s].forEach(n=>{n.length=this[I_](n.value,n.key),this[Mh]+=n.length})),DS(this)}get lengthCalculator(){return this[I_]}get length(){return this[Mh]}get itemCount(){return this[$s].length}rforEach(t,n){n=n||this;for(let r=this[$s].tail;r!==null;){const i=r.prev;ove(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[$s].head;r!==null;){const i=r.next;ove(this,t,r,n),r=i}}keys(){return this[$s].toArray().map(t=>t.key)}values(){return this[$s].toArray().map(t=>t.value)}reset(){this[$h]&&this[$s]&&this[$s].length&&this[$s].forEach(t=>this[$h](t.key,t.value)),this[Ic]=new Map,this[$s]=new jdn,this[Mh]=0}dump(){return this[$s].map(t=>eM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[$s]}set(t,n,r){if(r=r||this[i1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[I_](n,t);if(this[Ic].has(t)){if(s>this[By])return Xb(this,this[Ic].get(t)),!1;const u=this[Ic].get(t).value;return this[$h]&&(this[sve]||this[$h](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Mh]+=s-u.length,u.length=s,this.get(t),DS(this),!0}const o=new Udn(t,n,s,i,r);return o.length>this[By]?(this[$h]&&this[$h](t,n),!1):(this[Mh]+=o.length,this[$s].unshift(o),this[Ic].set(t,this[$s].head),DS(this),!0)}has(t){if(!this[Ic].has(t))return!1;const n=this[Ic].get(t).value;return!eM(this,n)}get(t){return l7(this,t,!0)}peek(t){return l7(this,t,!1)}pop(){const t=this[$s].tail;return t?(Xb(this,t),t.value):null}del(t){Xb(this,this[Ic].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Ic].forEach((t,n)=>l7(this,n,!1))}}const l7=(e,t,n)=>{const r=e[Ic].get(t);if(r){const i=r.value;if(eM(e,i)){if(Xb(e,r),!e[C2])return}else n&&(e[R7e]&&(r.value.now=Date.now()),e[$s].unshiftNode(r));return i.value}},eM=(e,t)=>{if(!t||!t.maxAge&&!e[i1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[i1]&&n>e[i1]},DS=e=>{if(e[Mh]>e[By])for(let t=e[$s].tail;e[Mh]>e[By]&&t!==null;){const n=t.prev;Xb(e,t),t=n}},Xb=(e,t)=>{if(t){const n=t.value;e[$h]&&e[$h](n.key,n.value),e[Mh]-=n.length,e[Ic].delete(n.key),e[$s].removeNode(t)}};class Udn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const ove=(e,t,n,r)=>{let i=n.value;eM(e,i)&&(Xb(e,n),e[C2]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Vdn=zdn;const Hdn=Object.freeze({loose:!0}),qdn=Object.freeze({}),Wdn=e=>e?typeof e!="object"?Hdn:e:qdn;var Lne=Wdn,zq={exports:{}};const Gdn="2.0.0",N7e=256,Ydn=Number.MAX_SAFE_INTEGER||9007199254740991,Kdn=16,Xdn=N7e-6,Qdn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Mne={MAX_LENGTH:N7e,MAX_SAFE_COMPONENT_LENGTH:Kdn,MAX_SAFE_BUILD_LENGTH:Xdn,MAX_SAFE_INTEGER:Ydn,RELEASE_TYPES:Qdn,SEMVER_SPEC_VERSION:Gdn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Jdn=typeof process=="object"&&o7&&o7.NODE_DEBUG&&/\bsemver\b/i.test(o7.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var N5=Jdn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Mne,s=N5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),_=c++;s(m,_,g),l[m]=_,u[_]=g,o[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(zq,zq.exports);var Fne=zq.exports;const ave=/^[0-9]+$/,D7e=(e,t)=>{const n=ave.test(e),r=ave.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Zdn=(e,t)=>D7e(t,e);var ehn={compareIdentifiers:D7e,rcompareIdentifiers:Zdn};const lk=N5,{MAX_LENGTH:uve,MAX_SAFE_INTEGER:ck}=Mne,{safeRe:lve,t:cve}=Fne,thn=Lne,{compareIdentifiers:O_}=ehn;let nhn=class jf{constructor(t,n){if(n=thn(n),t instanceof jf){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>uve)throw new TypeError(`version is longer than ${uve} characters`);lk("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?lve[cve.LOOSE]:lve[cve.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>ck||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ck||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ck||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<ck)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(lk("SemVer.compare",this.version,this.options,t),!(t instanceof jf)){if(typeof t=="string"&&t===this.version)return 0;t=new jf(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof jf||(t=new jf(t,this.options)),O_(this.major,t.major)||O_(this.minor,t.minor)||O_(this.patch,t.patch)}comparePre(t){if(t instanceof jf||(t=new jf(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(lk("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return O_(r,i)}while(++n)}compareBuild(t){t instanceof jf||(t=new jf(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(lk("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return O_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),O_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Bne=nhn;const fve=Bne,rhn=(e,t,n)=>new fve(e,n).compare(new fve(t,n));var bx=rhn;const ihn=bx,shn=(e,t,n)=>ihn(e,t,n)===0;var ohn=shn;const ahn=bx,uhn=(e,t,n)=>ahn(e,t,n)!==0;var lhn=uhn;const chn=bx,fhn=(e,t,n)=>chn(e,t,n)>0;var dhn=fhn;const hhn=bx,phn=(e,t,n)=>hhn(e,t,n)>=0;var mhn=phn;const ghn=bx,yhn=(e,t,n)=>ghn(e,t,n)<0;var vhn=yhn;const _hn=bx,bhn=(e,t,n)=>_hn(e,t,n)<=0;var whn=bhn;const Ehn=ohn,xhn=lhn,Shn=dhn,Thn=mhn,Ahn=vhn,Chn=whn,Ihn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Ehn(e,n,r);case"!=":return xhn(e,n,r);case">":return Shn(e,n,r);case">=":return Thn(e,n,r);case"<":return Ahn(e,n,r);case"<=":return Chn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Ohn=Ihn,c7,dve;function Phn(){if(dve)return c7;dve=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}c7=t;const n=Lne,{safeRe:r,t:i}=Fne,s=Ohn,o=N5,a=Bne,u=L7e();return c7}var f7,hve;function L7e(){if(hve)return f7;hve=1;class e{constructor($,D){if(D=r(D),$ instanceof e)return $.loose===!!D.loose&&$.includePrerelease===!!D.includePrerelease?$:new e($.raw,D);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=D,this.loose=!!D.loose,this.includePrerelease=!!D.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(B=>this.parseRange(B.trim())).filter(B=>B.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const B=this.set[0];if(this.set=this.set.filter(V=>!p(V[0])),this.set.length===0)this.set=[B];else if(this.set.length>1){for(const V of this.set)if(V.length===1&&m(V[0])){this.set=[V];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const B=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,V=n.get(B);if(V)return V;const j=this.options.loose,G=j?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(G,O(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let U=$.split(" ").map(M=>y(M,this.options)).join(" ").split(/\s+/).map(M=>C(M,this.options));j&&(U=U.filter(M=>(s("loose invalid filter",M,this.options),!!M.match(a[u.COMPARATORLOOSE])))),s("range list",U);const P=new Map,k=U.map(M=>new i(M,this.options));for(const M of k){if(p(M))return[M];P.set(M.value,M)}P.size>1&&P.has("")&&P.delete("");const H=[...P.values()];return n.set(B,H),H}intersects($,D){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(B=>g(B,D)&&$.set.some(V=>g(V,D)&&B.every(j=>V.every(G=>j.intersects(G,D)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let D=0;D<this.set.length;D++)if(z(this.set[D],$,this.options))return!0;return!1}}f7=e;const t=Vdn,n=new t({max:1e3}),r=Lne,i=Phn(),s=N5,o=Bne,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Fne,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Mne,p=N=>N.value==="<0.0.0-0",m=N=>N.value==="",g=(N,$)=>{let D=!0;const B=N.slice();let V=B.pop();for(;D&&B.length;)D=B.every(j=>V.intersects(j,$)),V=B.pop();return D},y=(N,$)=>(s("comp",N,$),N=E(N,$),s("caret",N),N=_(N,$),s("tildes",N),N=x(N,$),s("xrange",N),N=I(N,$),s("stars",N),N),v=N=>!N||N.toLowerCase()==="x"||N==="*",_=(N,$)=>N.trim().split(/\s+/).map(D=>b(D,$)).join(" "),b=(N,$)=>{const D=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return N.replace(D,(B,V,j,G,U)=>{s("tilde",N,B,V,j,G,U);let P;return v(V)?P="":v(j)?P=`>=${V}.0.0 <${+V+1}.0.0-0`:v(G)?P=`>=${V}.${j}.0 <${V}.${+j+1}.0-0`:U?(s("replaceTilde pr",U),P=`>=${V}.${j}.${G}-${U} <${V}.${+j+1}.0-0`):P=`>=${V}.${j}.${G} <${V}.${+j+1}.0-0`,s("tilde return",P),P})},E=(N,$)=>N.trim().split(/\s+/).map(D=>w(D,$)).join(" "),w=(N,$)=>{s("caret",N,$);const D=$.loose?a[u.CARETLOOSE]:a[u.CARET],B=$.includePrerelease?"-0":"";return N.replace(D,(V,j,G,U,P)=>{s("caret",N,V,j,G,U,P);let k;return v(j)?k="":v(G)?k=`>=${j}.0.0${B} <${+j+1}.0.0-0`:v(U)?j==="0"?k=`>=${j}.${G}.0${B} <${j}.${+G+1}.0-0`:k=`>=${j}.${G}.0${B} <${+j+1}.0.0-0`:P?(s("replaceCaret pr",P),j==="0"?G==="0"?k=`>=${j}.${G}.${U}-${P} <${j}.${G}.${+U+1}-0`:k=`>=${j}.${G}.${U}-${P} <${j}.${+G+1}.0-0`:k=`>=${j}.${G}.${U}-${P} <${+j+1}.0.0-0`):(s("no pr"),j==="0"?G==="0"?k=`>=${j}.${G}.${U}${B} <${j}.${G}.${+U+1}-0`:k=`>=${j}.${G}.${U}${B} <${j}.${+G+1}.0-0`:k=`>=${j}.${G}.${U} <${+j+1}.0.0-0`),s("caret return",k),k})},x=(N,$)=>(s("replaceXRanges",N,$),N.split(/\s+/).map(D=>S(D,$)).join(" ")),S=(N,$)=>{N=N.trim();const D=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return N.replace(D,(B,V,j,G,U,P)=>{s("xRange",N,B,V,j,G,U,P);const k=v(j),H=k||v(G),M=H||v(U),F=M;return V==="="&&F&&(V=""),P=$.includePrerelease?"-0":"",k?V===">"||V==="<"?B="<0.0.0-0":B="*":V&&F?(H&&(G=0),U=0,V===">"?(V=">=",H?(j=+j+1,G=0,U=0):(G=+G+1,U=0)):V==="<="&&(V="<",H?j=+j+1:G=+G+1),V==="<"&&(P="-0"),B=`${V+j}.${G}.${U}${P}`):H?B=`>=${j}.0.0${P} <${+j+1}.0.0-0`:M&&(B=`>=${j}.${G}.0${P} <${j}.${+G+1}.0-0`),s("xRange return",B),B})},I=(N,$)=>(s("replaceStars",N,$),N.trim().replace(a[u.STAR],"")),C=(N,$)=>(s("replaceGTE0",N,$),N.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),O=N=>($,D,B,V,j,G,U,P,k,H,M,F,J)=>(v(B)?D="":v(V)?D=`>=${B}.0.0${N?"-0":""}`:v(j)?D=`>=${B}.${V}.0${N?"-0":""}`:G?D=`>=${D}`:D=`>=${D}${N?"-0":""}`,v(k)?P="":v(H)?P=`<${+k+1}.0.0-0`:v(M)?P=`<${k}.${+H+1}.0-0`:F?P=`<=${k}.${H}.${M}-${F}`:N?P=`<${k}.${H}.${+M+1}-0`:P=`<=${P}`,`${D} ${P}`.trim()),z=(N,$,D)=>{for(let B=0;B<N.length;B++)if(!N[B].test($))return!1;if($.prerelease.length&&!D.includePrerelease){for(let B=0;B<N.length;B++)if(s(N[B].semver),N[B].semver!==i.ANY&&N[B].semver.prerelease.length>0){const V=N[B].semver;if(V.major===$.major&&V.minor===$.minor&&V.patch===$.patch)return!0}return!1}return!0};return f7}const khn=L7e(),$hn=(e,t,n)=>{try{t=new khn(t,n)}catch{return!1}return t.test(e)};var Rhn=$hn,M7e=Ndn(Rhn);function Nhn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var Dhn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function F7e(e,...t){for(const n of t)Lhn(e,n);return e}function Lhn(e,t){for(const n of Object.keys(t))nx(e,n,t[n],!0)}const Pc=wnn;let sC=Tfn;const fk=typeof window<"u"?window:void 0;var obe;sC===void 0&&((obe=fk==null?void 0:fk.vl)!=null&&obe.compile)&&(sC=fk.vl);const Mhn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Fhn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},TT={vega:"Vega","vega-lite":"Vega-Lite"},tM={vega:Pc.version,"vega-lite":sC?sC.version:"not available"},Bhn={vega:e=>e,"vega-lite":(e,t)=>sC.compile(e,{config:t}).spec},jhn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,zhn="chart-wrapper";function Uhn(e){return typeof e=="function"}function pve(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${TT[r]} JSON Source`}function Vhn(e,t){if(e.$schema){const n=O7e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${TT[n.library]}, but mode argument sets ${TT[t]??t}.`);const r=n.library;return M7e(tM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${TT[r]} ${n.version}, but the current version of ${TT[r]} is v${tM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function B7e(e){return!!(e&&"load"in e)}function mve(e){return B7e(e)?e:Pc.loader(e)}function Hhn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return rt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function qhn(e,t,n={}){let r,i;rt(t)?(i=mve(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Hhn(r),o=s.loader;(!i||o)&&(i=mve(n.loader??o));const a=await gve(s,i),u=await gve(n,i),l={...F7e(u,a),config:tx(u.config??{},a.config??{})};return await Ghn(e,r,l,i)}async function gve(e,t){const n=rt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=rt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Whn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Ghn(e,t,n={},r){const i=n.theme?tx(Tdn[n.theme],n.config??{}):n.config,s=B0(n.actions)?n.actions:F7e({},Mhn,n.actions??{}),o={...Fhn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Pc.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:w,rootContainer:x}=Whn(c);if(!w.getElementById(E)){const S=document.createElement("style");S.id=E,S.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Dhn.toString():n.defaultStyle,x.appendChild(S)}}const f=Vhn(t,n.mode);let d=Bhn[f](t,i);if(f==="vega-lite"&&d.$schema){const E=O7e(d.$schema);M7e(tM.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${tM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(zhn),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):q4(d,p,!0,!1).newDocument),n.formatLocale&&Pc.formatLocale(n.formatLocale),n.timeFormatLocale&&Pc.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const w=n.expressionFunctions[E];"fn"in w?Pc.expressionFunction(E,w.fn,w.visitor):w instanceof Function&&Pc.expressionFunction(E,w)}const{ast:m}=n,g=Pc.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Pc.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Pc.expressionInterpreter??n.expr??knn}:{}});if(y.addSignalListener("autosize",(E,w)=>{const{type:x}=w;x=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):x=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):x=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:w}=n,x=E&&!B7e(E)?E==null?void 0:E.baseURL:void 0,S=Uhn(w)?w:new Rdn({baseURL:x,...w===!0?{}:w}).call;y.tooltip(S)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:w}=typeof v=="boolean"?{}:v;y.hover(E,w)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const x=document.createElement("details");x.title=o.CLICK_TO_VIEW_ACTIONS,c.append(x),E=x;const S=document.createElement("summary");S.innerHTML=jhn,x.append(S),_=I=>{x.contains(I.target)||x.removeAttribute("open")},document.addEventListener("click",_)}const w=document.createElement("div");if(E.append(w),w.classList.add("vega-actions"),s===!0||s.export!==!1){for(const x of["svg","png"])if(s===!0||s.export===!0||s.export[x]){const S=o[`${x.toUpperCase()}_ACTION`],I=document.createElement("a"),C=ot(n.scaleFactor)?n.scaleFactor[x]:n.scaleFactor;I.text=S,I.href="#",I.target="_blank",I.download=`${l}.${x}`,I.addEventListener("mousedown",async function(O){O.preventDefault();const z=await y.toImageURL(x,C);this.href=z}),w.append(I)}}if(s===!0||s.source!==!1){const x=document.createElement("a");x.text=o.SOURCE_ACTION,x.href="#",x.addEventListener("click",function(S){pve(uj(t),n.sourceHeader??"",n.sourceFooter??"",f),S.preventDefault()}),w.append(x)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const x=document.createElement("a");x.text=o.COMPILED_ACTION,x.href="#",x.addEventListener("click",function(S){pve(uj(d),n.sourceHeader??"",n.sourceFooter??"","vega"),S.preventDefault()}),w.append(x)}if(s===!0||s.editor!==!1){const x=n.editorUrl??"https://vega.github.io/editor/",S=document.createElement("a");S.text=o.EDITOR_ACTION,S.href="#",S.addEventListener("click",function(I){Nhn(window,x,{config:i,mode:f,renderer:a,spec:uj(t)}),I.preventDefault()}),w.append(S)}}function b(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:b,embedOptions:n}}function Yhn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Khn(e,t,n){n&&(Yhn(n)?n(e.data(t)):e.change(t,Pc.changeset().remove(()=>!0).insert(n)))}function Xhn(e,t){Object.keys(t).forEach(n=>{Khn(e,n,t[n])})}function j7e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const z7e=()=>{};function d7(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Qhn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=j7e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!sU(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function yve(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function h7(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function AT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class U7e extends L.PureComponent{constructor(){super(...arguments),AT(this,"containerRef",L.createRef()),AT(this,"resultPromise",void 0),AT(this,"handleError",t=>{const{onError:n=z7e}=this.props;n(t,this.containerRef.current),console.warn(t)}),AT(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=j7e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Qhn(h7(this.props),h7(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!VV(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&yve(a,s),i&&d7(a,i)),a.run()})}else VV(i,s)||this.modifyView(o=>{s&&yve(o,s),i&&d7(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=h7(this.props);this.resultPromise=qhn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;d7(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return L.createElement("div",{ref:this.containerRef,className:t,style:n})}}AT(U7e,"propTypes",{className:Mt.string,onError:Mt.func});function Uq(){return Uq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uq.apply(this,arguments)}function Vq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Jhn={};class V7e extends L.PureComponent{constructor(){super(...arguments),Vq(this,"vegaEmbed",L.createRef()),Vq(this,"handleNewView",t=>{this.update();const{onNewView:n=z7e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){VV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Xhn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return L.createElement(U7e,Uq({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}Vq(V7e,"defaultProps",{data:Jhn});function Hq(){return Hq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hq.apply(this,arguments)}function Zhn(e){return L.createElement(V7e,Hq({},e,{mode:"vega-lite"}))}const vve=e=>qg(e.sequence).every((t,n)=>t==="end"?!0:e.answers[`${t}_${n}`]!==void 0),epn=(e,t)=>{const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()};function tpn(e){const{studyId:t,allParticipants:n,config:r}=e,[i,{open:s,close:o}]=zT(!1),[a,u]=Tb(),l=n.filter(S=>vve(S)).map(S=>Math.max(...Object.values(S.answers).map(I=>I.endTime))),[c,f]=A.useState([new Date(new Date(Math.min(...l.length>0?l:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...l.length>0?l:[new Date().getTime()])).setHours(24,0,0,0))]),[d,h]=A.useState([]),[p,m]=A.useState([]);A.useEffect(()=>{if(n.length>0&&n[0].sequence.components){const S=n.filter(O=>epn(O.answers,c)),I=[],C=[];S.forEach(O=>{vve(O)?I.push(O):C.push(O)}),h(I),m(C)}},[n,c]);const g=A.useMemo(()=>{var S,I;return d.length>0?[{Date:(S=c[0])==null?void 0:S.getTime(),Participants:0},...d.map(C=>Math.max(...Object.values(C.answers).map(O=>O.endTime).flat())).sort((C,O)=>C-O).map((C,O)=>({Date:C,Participants:O})),{Date:(I=c[1])==null?void 0:I.getTime(),Participants:d.length}]:[]},[d,c]),y=A.useMemo(()=>{var S,I;return{width:u.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(S=c[0])==null?void 0:S.getTime(),(I=c[1])==null?void 0:I.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:g}}},[u,g]),[v,{close:_,open:b}]=zT(!1),[E,{close:w,open:x}]=zT(!1);return R.jsxs(u6,{children:[R.jsxs(QTe,{ref:a,p:"lg",shadow:"md",withBorder:!0,children:[R.jsxs(lp,{align:"center",mb:16,justify:"space-between",children:[R.jsxs(lp,{direction:"column",children:[R.jsx(Lc,{order:5,mb:4,children:t}),R.jsxs(lp,{direction:"row",wrap:"nowrap",gap:"xs",align:"center",mb:4,children:[R.jsxs(VT,{size:"sm",color:"orange",children:["Total:",p.length+d.length]}),R.jsxs(VT,{size:"sm",color:"green",children:["Completed:",d.length]}),R.jsxs(VT,{size:"sm",color:"cyan",children:["In Progress:",p.length]})]})]}),R.jsxs(Ql,{children:[R.jsxs(Vi,{opened:v,children:[R.jsx(Vi.Target,{children:R.jsx(cu,{disabled:n.length===0,onClick:()=>{d2(JSON.stringify(n,null,2),`${t}_all.json`)},onMouseEnter:b,onMouseLeave:_,px:4,children:R.jsx(GDe,{})})}),R.jsx(Vi.Dropdown,{children:R.jsx(Rt,{children:"Download all participants data as JSON"})})]}),R.jsxs(Vi,{opened:E,children:[R.jsx(Vi.Target,{children:R.jsx(cu,{disabled:n.length===0,onClick:s,onMouseEnter:x,onMouseLeave:w,px:4,children:R.jsx(eQ,{})})}),R.jsx(Vi.Dropdown,{children:R.jsx(Rt,{children:"Download all participants data as a tidy CSV"})})]})]})]}),R.jsx(ALe,{label:R.jsx(Rt,{children:"Time Filter:"}),placeholder:"Pick dates range",value:c,onChange:f}),g.length>0?R.jsxs(R.Fragment,{children:[R.jsx(Rt,{mt:16,children:"Finished Participants"}),R.jsx(Zhn,{spec:y,actions:!1})]}):R.jsx(At,{h:293.4,children:R.jsx(Ug,{style:{height:"100%"},children:R.jsx(Rt,{children:"Not enough participants for chart"})})})]}),R.jsx(L3e,{opened:i,close:o,filename:`${t}_all_tidy.csv`,studyConfig:r,data:n})]})}function dk(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var H7e={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof dk=="function"&&dk;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof dk=="function"&&dk,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof nu<"u"?nu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,w){if(typeof E!="function"&&this.state===l||typeof w!="function"&&this.state===u)return this;var x=new this.constructor(o);if(this.state!==c){var S=this.state===l?E:w;h(x,S,this.outcome)}else this.queue.push(new d(x,E,w));return x};function d(E,w,x){this.promise=E,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,w,x){s(function(){var S;try{S=w(x)}catch(I){return a.reject(E,I)}S===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,S)})}a.resolve=function(E,w){var x=g(p,w);if(x.status==="error")return a.reject(E,x.value);var S=x.value;if(S)m(E,S);else{E.state=l,E.outcome=w;for(var I=-1,C=E.queue.length;++I<C;)E.queue[I].callFulfilled(w)}return E},a.reject=function(E,w){E.state=u,E.outcome=w;for(var x=-1,S=E.queue.length;++x<S;)E.queue[x].callRejected(w);return E};function p(E){var w=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof w=="function")return function(){w.apply(E,arguments)}}function m(E,w){var x=!1;function S(z){x||(x=!0,a.reject(E,z))}function I(z){x||(x=!0,a.resolve(E,z))}function C(){w(I,S)}var O=g(C);O.status==="error"&&S(O.value)}function g(E,w){var x={};try{x.value=E(w),x.status="success"}catch(S){x.status="error",x.value=S}return x}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var w=new this(o);return a.reject(w,E)}f.all=_;function _(E){var w=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=E.length,S=!1;if(!x)return this.resolve([]);for(var I=new Array(x),C=0,O=-1,z=new this(o);++O<x;)N(E[O],O);return z;function N($,D){w.resolve($).then(B,function(V){S||(S=!0,a.reject(z,V))});function B(V){I[D]=V,++C===x&&!S&&(S=!0,a.resolve(z,I))}}}f.race=b;function b(E){var w=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=E.length,S=!1;if(!x)return this.resolve([]);for(var I=-1,C=new this(o);++I<x;)O(E[I]);return C;function O(z){w.resolve(z).then(function(N){S||(S=!0,a.resolve(C,N))},function(N){S||(S=!0,a.reject(C,N))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof nu<"u"?nu:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q};function o(q,te){if(!(q instanceof te))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var q=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),te=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!q||te)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(q,te){q=q||[],te=te||{};try{return new Blob(q,te)}catch(oe){if(oe.name!=="TypeError")throw oe;for(var K=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new K,pe=0;pe<q.length;pe+=1)fe.append(q[pe]);return fe.getBlob(te.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(q,te){te&&q.then(function(K){te(null,K)},function(K){te(K)})}function h(q,te,K){typeof te=="function"&&q.then(te),typeof K=="function"&&q.catch(K)}function p(q){return typeof q!="string"&&(console.warn(q+" used as a key, but it is not a string."),q=String(q)),q}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},_=Object.prototype.toString,b="readonly",E="readwrite";function w(q){for(var te=q.length,K=new ArrayBuffer(te),fe=new Uint8Array(K),pe=0;pe<te;pe++)fe[pe]=q.charCodeAt(pe);return K}function x(q){return new f(function(te){var K=q.transaction(g,E),fe=c([""]);K.objectStore(g).put(fe,"key"),K.onabort=function(pe){pe.preventDefault(),pe.stopPropagation(),te(!1)},K.oncomplete=function(){var pe=navigator.userAgent.match(/Chrome\/(\d+)/),oe=navigator.userAgent.match(/Edge\//);te(oe||!pe||parseInt(pe[1],10)>=43)}}).catch(function(){return!1})}function S(q){return typeof y=="boolean"?f.resolve(y):x(q).then(function(te){return y=te,y})}function I(q){var te=v[q.name],K={};K.promise=new f(function(fe,pe){K.resolve=fe,K.reject=pe}),te.deferredOperations.push(K),te.dbReady?te.dbReady=te.dbReady.then(function(){return K.promise}):te.dbReady=K.promise}function C(q){var te=v[q.name],K=te.deferredOperations.pop();if(K)return K.resolve(),K.promise}function O(q,te){var K=v[q.name],fe=K.deferredOperations.pop();if(fe)return fe.reject(te),fe.promise}function z(q,te){return new f(function(K,fe){if(v[q.name]=v[q.name]||k(),q.db)if(te)I(q),q.db.close();else return K(q.db);var pe=[q.name];te&&pe.push(q.version);var oe=u.open.apply(u,pe);te&&(oe.onupgradeneeded=function(Se){var Le=oe.result;try{Le.createObjectStore(q.storeName),Se.oldVersion<=1&&Le.createObjectStore(g)}catch(ze){if(ze.name==="ConstraintError")console.warn('The database "'+q.name+'" has been upgraded from version '+Se.oldVersion+" to version "+Se.newVersion+', but the storage "'+q.storeName+'" already exists.');else throw ze}}),oe.onerror=function(Se){Se.preventDefault(),fe(oe.error)},oe.onsuccess=function(){var Se=oe.result;Se.onversionchange=function(Le){Le.target.close()},K(Se),C(q)}})}function N(q){return z(q,!1)}function $(q){return z(q,!0)}function D(q,te){if(!q.db)return!0;var K=!q.db.objectStoreNames.contains(q.storeName),fe=q.version<q.db.version,pe=q.version>q.db.version;if(fe&&(q.version!==te&&console.warn('The database "'+q.name+`" can't be downgraded from version `+q.db.version+" to version "+q.version+"."),q.version=q.db.version),pe||K){if(K){var oe=q.db.version+1;oe>q.version&&(q.version=oe)}return!0}return!1}function B(q){return new f(function(te,K){var fe=new FileReader;fe.onerror=K,fe.onloadend=function(pe){var oe=btoa(pe.target.result||"");te({__local_forage_encoded_blob:!0,data:oe,type:q.type})},fe.readAsBinaryString(q)})}function V(q){var te=w(atob(q.data));return c([te],{type:q.type})}function j(q){return q&&q.__local_forage_encoded_blob}function G(q){var te=this,K=te._initReady().then(function(){var fe=v[te._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(K,q,q),K}function U(q){I(q);for(var te=v[q.name],K=te.forages,fe=0;fe<K.length;fe++){var pe=K[fe];pe._dbInfo.db&&(pe._dbInfo.db.close(),pe._dbInfo.db=null)}return q.db=null,N(q).then(function(oe){return q.db=oe,D(q)?$(q):oe}).then(function(oe){q.db=te.db=oe;for(var Se=0;Se<K.length;Se++)K[Se]._dbInfo.db=oe}).catch(function(oe){throw O(q,oe),oe})}function P(q,te,K,fe){fe===void 0&&(fe=1);try{var pe=q.db.transaction(q.storeName,te);K(null,pe)}catch(oe){if(fe>0&&(!q.db||oe.name==="InvalidStateError"||oe.name==="NotFoundError"))return f.resolve().then(function(){if(!q.db||oe.name==="NotFoundError"&&!q.db.objectStoreNames.contains(q.storeName)&&q.version<=q.db.version)return q.db&&(q.version=q.db.version+1),$(q)}).then(function(){return U(q).then(function(){P(q,te,K,fe-1)})}).catch(K);K(oe)}}function k(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function H(q){var te=this,K={db:null};if(q)for(var fe in q)K[fe]=q[fe];var pe=v[K.name];pe||(pe=k(),v[K.name]=pe),pe.forages.push(te),te._initReady||(te._initReady=te.ready,te.ready=G);var oe=[];function Se(){return f.resolve()}for(var Le=0;Le<pe.forages.length;Le++){var ze=pe.forages[Le];ze!==te&&oe.push(ze._initReady().catch(Se))}var He=pe.forages.slice(0);return f.all(oe).then(function(){return K.db=pe.db,N(K)}).then(function(Ze){return K.db=Ze,D(K,te._defaultConfig.version)?$(K):Ze}).then(function(Ze){K.db=pe.db=Ze,te._dbInfo=K;for(var Et=0;Et<He.length;Et++){var gn=He[Et];gn!==te&&(gn._dbInfo.db=K.db,gn._dbInfo.version=K.version)}})}function M(q,te){var K=this;q=p(q);var fe=new f(function(pe,oe){K.ready().then(function(){P(K._dbInfo,b,function(Se,Le){if(Se)return oe(Se);try{var ze=Le.objectStore(K._dbInfo.storeName),He=ze.get(q);He.onsuccess=function(){var Ze=He.result;Ze===void 0&&(Ze=null),j(Ze)&&(Ze=V(Ze)),pe(Ze)},He.onerror=function(){oe(He.error)}}catch(Ze){oe(Ze)}})}).catch(oe)});return d(fe,te),fe}function F(q,te){var K=this,fe=new f(function(pe,oe){K.ready().then(function(){P(K._dbInfo,b,function(Se,Le){if(Se)return oe(Se);try{var ze=Le.objectStore(K._dbInfo.storeName),He=ze.openCursor(),Ze=1;He.onsuccess=function(){var Et=He.result;if(Et){var gn=Et.value;j(gn)&&(gn=V(gn));var tr=q(gn,Et.key,Ze++);tr!==void 0?pe(tr):Et.continue()}else pe()},He.onerror=function(){oe(He.error)}}catch(Et){oe(Et)}})}).catch(oe)});return d(fe,te),fe}function J(q,te,K){var fe=this;q=p(q);var pe=new f(function(oe,Se){var Le;fe.ready().then(function(){return Le=fe._dbInfo,_.call(te)==="[object Blob]"?S(Le.db).then(function(ze){return ze?te:B(te)}):te}).then(function(ze){P(fe._dbInfo,E,function(He,Ze){if(He)return Se(He);try{var Et=Ze.objectStore(fe._dbInfo.storeName);ze===null&&(ze=void 0);var gn=Et.put(ze,q);Ze.oncomplete=function(){ze===void 0&&(ze=null),oe(ze)},Ze.onabort=Ze.onerror=function(){var tr=gn.error?gn.error:gn.transaction.error;Se(tr)}}catch(tr){Se(tr)}})}).catch(Se)});return d(pe,K),pe}function se(q,te){var K=this;q=p(q);var fe=new f(function(pe,oe){K.ready().then(function(){P(K._dbInfo,E,function(Se,Le){if(Se)return oe(Se);try{var ze=Le.objectStore(K._dbInfo.storeName),He=ze.delete(q);Le.oncomplete=function(){pe()},Le.onerror=function(){oe(He.error)},Le.onabort=function(){var Ze=He.error?He.error:He.transaction.error;oe(Ze)}}catch(Ze){oe(Ze)}})}).catch(oe)});return d(fe,te),fe}function ae(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){P(te._dbInfo,E,function(oe,Se){if(oe)return pe(oe);try{var Le=Se.objectStore(te._dbInfo.storeName),ze=Le.clear();Se.oncomplete=function(){fe()},Se.onabort=Se.onerror=function(){var He=ze.error?ze.error:ze.transaction.error;pe(He)}}catch(He){pe(He)}})}).catch(pe)});return d(K,q),K}function ce(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){P(te._dbInfo,b,function(oe,Se){if(oe)return pe(oe);try{var Le=Se.objectStore(te._dbInfo.storeName),ze=Le.count();ze.onsuccess=function(){fe(ze.result)},ze.onerror=function(){pe(ze.error)}}catch(He){pe(He)}})}).catch(pe)});return d(K,q),K}function le(q,te){var K=this,fe=new f(function(pe,oe){if(q<0){pe(null);return}K.ready().then(function(){P(K._dbInfo,b,function(Se,Le){if(Se)return oe(Se);try{var ze=Le.objectStore(K._dbInfo.storeName),He=!1,Ze=ze.openKeyCursor();Ze.onsuccess=function(){var Et=Ze.result;if(!Et){pe(null);return}q===0||He?pe(Et.key):(He=!0,Et.advance(q))},Ze.onerror=function(){oe(Ze.error)}}catch(Et){oe(Et)}})}).catch(oe)});return d(fe,te),fe}function ge(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){P(te._dbInfo,b,function(oe,Se){if(oe)return pe(oe);try{var Le=Se.objectStore(te._dbInfo.storeName),ze=Le.openKeyCursor(),He=[];ze.onsuccess=function(){var Ze=ze.result;if(!Ze){fe(He);return}He.push(Ze.key),Ze.continue()},ze.onerror=function(){pe(ze.error)}}catch(Ze){pe(Ze)}})}).catch(pe)});return d(K,q),K}function ue(q,te){te=m.apply(this,arguments);var K=this.config();q=typeof q!="function"&&q||{},q.name||(q.name=q.name||K.name,q.storeName=q.storeName||K.storeName);var fe=this,pe;if(!q.name)pe=f.reject("Invalid arguments");else{var oe=q.name===K.name&&fe._dbInfo.db,Se=oe?f.resolve(fe._dbInfo.db):N(q).then(function(Le){var ze=v[q.name],He=ze.forages;ze.db=Le;for(var Ze=0;Ze<He.length;Ze++)He[Ze]._dbInfo.db=Le;return Le});q.storeName?pe=Se.then(function(Le){if(Le.objectStoreNames.contains(q.storeName)){var ze=Le.version+1;I(q);var He=v[q.name],Ze=He.forages;Le.close();for(var Et=0;Et<Ze.length;Et++){var gn=Ze[Et];gn._dbInfo.db=null,gn._dbInfo.version=ze}var tr=new f(function(ur,Si){var ri=u.open(q.name,ze);ri.onerror=function(Ba){var J0=ri.result;J0.close(),Si(Ba)},ri.onupgradeneeded=function(){var Ba=ri.result;Ba.deleteObjectStore(q.storeName)},ri.onsuccess=function(){var Ba=ri.result;Ba.close(),ur(Ba)}});return tr.then(function(ur){He.db=ur;for(var Si=0;Si<Ze.length;Si++){var ri=Ze[Si];ri._dbInfo.db=ur,C(ri._dbInfo)}}).catch(function(ur){throw(O(q,ur)||f.resolve()).catch(function(){}),ur})}}):pe=Se.then(function(Le){I(q);var ze=v[q.name],He=ze.forages;Le.close();for(var Ze=0;Ze<He.length;Ze++){var Et=He[Ze];Et._dbInfo.db=null}var gn=new f(function(tr,ur){var Si=u.deleteDatabase(q.name);Si.onerror=function(){var ri=Si.result;ri&&ri.close(),ur(Si.error)},Si.onblocked=function(){console.warn('dropInstance blocked for database "'+q.name+'" until all open connections are closed')},Si.onsuccess=function(){var ri=Si.result;ri&&ri.close(),tr(ri)}});return gn.then(function(tr){ze.db=tr;for(var ur=0;ur<He.length;ur++){var Si=He[ur];C(Si._dbInfo)}}).catch(function(tr){throw(O(q,tr)||f.resolve()).catch(function(){}),tr})})}return d(pe,te),pe}var Fe={_driver:"asyncStorage",_initStorage:H,_support:l(),iterate:F,getItem:M,setItem:J,removeItem:se,clear:ae,length:ce,key:le,keys:ge,dropInstance:ue};function $e(){return typeof openDatabase=="function"}var Ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Re="~~local_forage_type~",Oe=/^~~local_forage_type~([^~]+)~/,Me="__lfsc__:",Ut=Me.length,Qe="arbf",je="blob",wt="si08",et="ui08",ct="uic8",ft="si16",jt="si32",Dn="ur16",he="ui32",_e="fl32",ke="fl64",it=Ut+Qe.length,Ye=Object.prototype.toString;function ut(q){var te=q.length*.75,K=q.length,fe,pe=0,oe,Se,Le,ze;q[q.length-1]==="="&&(te--,q[q.length-2]==="="&&te--);var He=new ArrayBuffer(te),Ze=new Uint8Array(He);for(fe=0;fe<K;fe+=4)oe=Ge.indexOf(q[fe]),Se=Ge.indexOf(q[fe+1]),Le=Ge.indexOf(q[fe+2]),ze=Ge.indexOf(q[fe+3]),Ze[pe++]=oe<<2|Se>>4,Ze[pe++]=(Se&15)<<4|Le>>2,Ze[pe++]=(Le&3)<<6|ze&63;return He}function tt(q){var te=new Uint8Array(q),K="",fe;for(fe=0;fe<te.length;fe+=3)K+=Ge[te[fe]>>2],K+=Ge[(te[fe]&3)<<4|te[fe+1]>>4],K+=Ge[(te[fe+1]&15)<<2|te[fe+2]>>6],K+=Ge[te[fe+2]&63];return te.length%3===2?K=K.substring(0,K.length-1)+"=":te.length%3===1&&(K=K.substring(0,K.length-2)+"=="),K}function _t(q,te){var K="";if(q&&(K=Ye.call(q)),q&&(K==="[object ArrayBuffer]"||q.buffer&&Ye.call(q.buffer)==="[object ArrayBuffer]")){var fe,pe=Me;q instanceof ArrayBuffer?(fe=q,pe+=Qe):(fe=q.buffer,K==="[object Int8Array]"?pe+=wt:K==="[object Uint8Array]"?pe+=et:K==="[object Uint8ClampedArray]"?pe+=ct:K==="[object Int16Array]"?pe+=ft:K==="[object Uint16Array]"?pe+=Dn:K==="[object Int32Array]"?pe+=jt:K==="[object Uint32Array]"?pe+=he:K==="[object Float32Array]"?pe+=_e:K==="[object Float64Array]"?pe+=ke:te(new Error("Failed to get type for BinaryArray"))),te(pe+tt(fe))}else if(K==="[object Blob]"){var oe=new FileReader;oe.onload=function(){var Se=Re+q.type+"~"+tt(this.result);te(Me+je+Se)},oe.readAsArrayBuffer(q)}else try{te(JSON.stringify(q))}catch(Se){console.error("Couldn't convert value into a JSON string: ",q),te(null,Se)}}function In(q){if(q.substring(0,Ut)!==Me)return JSON.parse(q);var te=q.substring(it),K=q.substring(Ut,it),fe;if(K===je&&Oe.test(te)){var pe=te.match(Oe);fe=pe[1],te=te.substring(pe[0].length)}var oe=ut(te);switch(K){case Qe:return oe;case je:return c([oe],{type:fe});case wt:return new Int8Array(oe);case et:return new Uint8Array(oe);case ct:return new Uint8ClampedArray(oe);case ft:return new Int16Array(oe);case Dn:return new Uint16Array(oe);case jt:return new Int32Array(oe);case he:return new Uint32Array(oe);case _e:return new Float32Array(oe);case ke:return new Float64Array(oe);default:throw new Error("Unkown type: "+K)}}var Wt={serialize:_t,deserialize:In,stringToBuffer:ut,bufferToString:tt};function Vt(q,te,K,fe){q.executeSql("CREATE TABLE IF NOT EXISTS "+te.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],K,fe)}function hr(q){var te=this,K={db:null};if(q)for(var fe in q)K[fe]=typeof q[fe]!="string"?q[fe].toString():q[fe];var pe=new f(function(oe,Se){try{K.db=openDatabase(K.name,String(K.version),K.description,K.size)}catch(Le){return Se(Le)}K.db.transaction(function(Le){Vt(Le,K,function(){te._dbInfo=K,oe()},function(ze,He){Se(He)})},Se)});return K.serializer=Wt,pe}function Yn(q,te,K,fe,pe,oe){q.executeSql(K,fe,pe,function(Se,Le){Le.code===Le.SYNTAX_ERR?Se.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[te.storeName],function(ze,He){He.rows.length?oe(ze,Le):Vt(ze,te,function(){ze.executeSql(K,fe,pe,oe)},oe)},oe):oe(Se,Le)},oe)}function ku(q,te){var K=this;q=p(q);var fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(Le){Yn(Le,Se,"SELECT * FROM "+Se.storeName+" WHERE key = ? LIMIT 1",[q],function(ze,He){var Ze=He.rows.length?He.rows.item(0).value:null;Ze&&(Ze=Se.serializer.deserialize(Ze)),pe(Ze)},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function Mr(q,te){var K=this,fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(Le){Yn(Le,Se,"SELECT * FROM "+Se.storeName,[],function(ze,He){for(var Ze=He.rows,Et=Ze.length,gn=0;gn<Et;gn++){var tr=Ze.item(gn),ur=tr.value;if(ur&&(ur=Se.serializer.deserialize(ur)),ur=q(ur,tr.key,gn+1),ur!==void 0){pe(ur);return}}pe()},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function ls(q,te,K,fe){var pe=this;q=p(q);var oe=new f(function(Se,Le){pe.ready().then(function(){te===void 0&&(te=null);var ze=te,He=pe._dbInfo;He.serializer.serialize(te,function(Ze,Et){Et?Le(Et):He.db.transaction(function(gn){Yn(gn,He,"INSERT OR REPLACE INTO "+He.storeName+" (key, value) VALUES (?, ?)",[q,Ze],function(){Se(ze)},function(tr,ur){Le(ur)})},function(gn){if(gn.code===gn.QUOTA_ERR){if(fe>0){Se(ls.apply(pe,[q,ze,K,fe-1]));return}Le(gn)}})})}).catch(Le)});return d(oe,K),oe}function ti(q,te,K){return ls.apply(this,[q,te,K,1])}function Ei(q,te){var K=this;q=p(q);var fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(Le){Yn(Le,Se,"DELETE FROM "+Se.storeName+" WHERE key = ?",[q],function(){pe()},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function qr(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){var oe=te._dbInfo;oe.db.transaction(function(Se){Yn(Se,oe,"DELETE FROM "+oe.storeName,[],function(){fe()},function(Le,ze){pe(ze)})})}).catch(pe)});return d(K,q),K}function yr(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){var oe=te._dbInfo;oe.db.transaction(function(Se){Yn(Se,oe,"SELECT COUNT(key) as c FROM "+oe.storeName,[],function(Le,ze){var He=ze.rows.item(0).c;fe(He)},function(Le,ze){pe(ze)})})}).catch(pe)});return d(K,q),K}function yt(q,te){var K=this,fe=new f(function(pe,oe){K.ready().then(function(){var Se=K._dbInfo;Se.db.transaction(function(Le){Yn(Le,Se,"SELECT key FROM "+Se.storeName+" WHERE id = ? LIMIT 1",[q+1],function(ze,He){var Ze=He.rows.length?He.rows.item(0).key:null;pe(Ze)},function(ze,He){oe(He)})})}).catch(oe)});return d(fe,te),fe}function Fr(q){var te=this,K=new f(function(fe,pe){te.ready().then(function(){var oe=te._dbInfo;oe.db.transaction(function(Se){Yn(Se,oe,"SELECT key FROM "+oe.storeName,[],function(Le,ze){for(var He=[],Ze=0;Ze<ze.rows.length;Ze++)He.push(ze.rows.item(Ze).key);fe(He)},function(Le,ze){pe(ze)})})}).catch(pe)});return d(K,q),K}function xi(q){return new f(function(te,K){q.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(pe,oe){for(var Se=[],Le=0;Le<oe.rows.length;Le++)Se.push(oe.rows.item(Le).name);te({db:q,storeNames:Se})},function(pe,oe){K(oe)})},function(fe){K(fe)})})}function Yi(q,te){te=m.apply(this,arguments);var K=this.config();q=typeof q!="function"&&q||{},q.name||(q.name=q.name||K.name,q.storeName=q.storeName||K.storeName);var fe=this,pe;return q.name?pe=new f(function(oe){var Se;q.name===K.name?Se=fe._dbInfo.db:Se=openDatabase(q.name,"","",0),q.storeName?oe({db:Se,storeNames:[q.storeName]}):oe(xi(Se))}).then(function(oe){return new f(function(Se,Le){oe.db.transaction(function(ze){function He(tr){return new f(function(ur,Si){ze.executeSql("DROP TABLE IF EXISTS "+tr,[],function(){ur()},function(ri,Ba){Si(Ba)})})}for(var Ze=[],Et=0,gn=oe.storeNames.length;Et<gn;Et++)Ze.push(He(oe.storeNames[Et]));f.all(Ze).then(function(){Se()}).catch(function(tr){Le(tr)})},function(ze){Le(ze)})})}):pe=f.reject("Invalid arguments"),d(pe,te),pe}var Js={_driver:"webSQLStorage",_initStorage:hr,_support:$e(),iterate:Mr,getItem:ku,setItem:ti,removeItem:Ei,clear:qr,length:yr,key:yt,keys:Fr,dropInstance:Yi};function Ma(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ne(q,te){var K=q.name+"/";return q.storeName!==te.storeName&&(K+=q.storeName+"/"),K}function Q(){var q="_localforage_support_test";try{return localStorage.setItem(q,!0),localStorage.removeItem(q),!1}catch{return!0}}function ie(){return!Q()||localStorage.length>0}function ve(q){var te=this,K={};if(q)for(var fe in q)K[fe]=q[fe];return K.keyPrefix=ne(q,te._defaultConfig),ie()?(te._dbInfo=K,K.serializer=Wt,f.resolve()):f.reject()}function ye(q){var te=this,K=te.ready().then(function(){for(var fe=te._dbInfo.keyPrefix,pe=localStorage.length-1;pe>=0;pe--){var oe=localStorage.key(pe);oe.indexOf(fe)===0&&localStorage.removeItem(oe)}});return d(K,q),K}function mt(q,te){var K=this;q=p(q);var fe=K.ready().then(function(){var pe=K._dbInfo,oe=localStorage.getItem(pe.keyPrefix+q);return oe&&(oe=pe.serializer.deserialize(oe)),oe});return d(fe,te),fe}function Ce(q,te){var K=this,fe=K.ready().then(function(){for(var pe=K._dbInfo,oe=pe.keyPrefix,Se=oe.length,Le=localStorage.length,ze=1,He=0;He<Le;He++){var Ze=localStorage.key(He);if(Ze.indexOf(oe)===0){var Et=localStorage.getItem(Ze);if(Et&&(Et=pe.serializer.deserialize(Et)),Et=q(Et,Ze.substring(Se),ze++),Et!==void 0)return Et}}});return d(fe,te),fe}function dt(q,te){var K=this,fe=K.ready().then(function(){var pe=K._dbInfo,oe;try{oe=localStorage.key(q)}catch{oe=null}return oe&&(oe=oe.substring(pe.keyPrefix.length)),oe});return d(fe,te),fe}function Bt(q){var te=this,K=te.ready().then(function(){for(var fe=te._dbInfo,pe=localStorage.length,oe=[],Se=0;Se<pe;Se++){var Le=localStorage.key(Se);Le.indexOf(fe.keyPrefix)===0&&oe.push(Le.substring(fe.keyPrefix.length))}return oe});return d(K,q),K}function St(q){var te=this,K=te.keys().then(function(fe){return fe.length});return d(K,q),K}function Ht(q,te){var K=this;q=p(q);var fe=K.ready().then(function(){var pe=K._dbInfo;localStorage.removeItem(pe.keyPrefix+q)});return d(fe,te),fe}function fn(q,te,K){var fe=this;q=p(q);var pe=fe.ready().then(function(){te===void 0&&(te=null);var oe=te;return new f(function(Se,Le){var ze=fe._dbInfo;ze.serializer.serialize(te,function(He,Ze){if(Ze)Le(Ze);else try{localStorage.setItem(ze.keyPrefix+q,He),Se(oe)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Le(Et),Le(Et)}})})});return d(pe,K),pe}function Tr(q,te){if(te=m.apply(this,arguments),q=typeof q!="function"&&q||{},!q.name){var K=this.config();q.name=q.name||K.name,q.storeName=q.storeName||K.storeName}var fe=this,pe;return q.name?pe=new f(function(oe){q.storeName?oe(ne(q,fe._defaultConfig)):oe(q.name+"/")}).then(function(oe){for(var Se=localStorage.length-1;Se>=0;Se--){var Le=localStorage.key(Se);Le.indexOf(oe)===0&&localStorage.removeItem(Le)}}):pe=f.reject("Invalid arguments"),d(pe,te),pe}var zt={_driver:"localStorageWrapper",_initStorage:ve,_support:Ma(),iterate:Ce,getItem:mt,setItem:fn,removeItem:Ht,clear:ye,length:St,key:dt,keys:Bt,dropInstance:Tr},pr=function(te,K){return te===K||typeof te=="number"&&typeof K=="number"&&isNaN(te)&&isNaN(K)},Qt=function(te,K){for(var fe=te.length,pe=0;pe<fe;){if(pr(te[pe],K))return!0;pe++}return!1},er=Array.isArray||function(q){return Object.prototype.toString.call(q)==="[object Array]"},ni={},cs={},Fi={INDEXEDDB:Fe,WEBSQL:Js,LOCALSTORAGE:zt},aa=[Fi.INDEXEDDB._driver,Fi.WEBSQL._driver,Fi.LOCALSTORAGE._driver],Zs=["dropInstance"],mi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Zs),vt={description:"",driver:aa.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function wn(q,te){q[te]=function(){var K=arguments;return q.ready().then(function(){return q[te].apply(q,K)})}}function Br(){for(var q=1;q<arguments.length;q++){var te=arguments[q];if(te)for(var K in te)te.hasOwnProperty(K)&&(er(te[K])?arguments[0][K]=te[K].slice():arguments[0][K]=te[K])}return arguments[0]}var Os=function(){function q(te){o(this,q);for(var K in Fi)if(Fi.hasOwnProperty(K)){var fe=Fi[K],pe=fe._driver;this[K]=pe,ni[pe]||this.defineDriver(fe)}this._defaultConfig=Br({},vt),this._config=Br({},this._defaultConfig,te),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return q.prototype.config=function(K){if((typeof K>"u"?"undefined":s(K))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in K){if(fe==="storeName"&&(K[fe]=K[fe].replace(/\W/g,"_")),fe==="version"&&typeof K[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=K[fe]}return"driver"in K&&K.driver?this.setDriver(this._config.driver):!0}else return typeof K=="string"?this._config[K]:this._config},q.prototype.defineDriver=function(K,fe,pe){var oe=new f(function(Se,Le){try{var ze=K._driver,He=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!K._driver){Le(He);return}for(var Ze=mi.concat("_initStorage"),Et=0,gn=Ze.length;Et<gn;Et++){var tr=Ze[Et],ur=!Qt(Zs,tr);if((ur||K[tr])&&typeof K[tr]!="function"){Le(He);return}}var Si=function(){for(var J0=function(g8){return function(){var i_=new Error("Method "+g8+" is not implemented by the current driver"),s_=f.reject(i_);return d(s_,arguments[arguments.length-1]),s_}},kx=0,$x=Zs.length;kx<$x;kx++){var Rx=Zs[kx];K[Rx]||(K[Rx]=J0(Rx))}};Si();var ri=function(J0){ni[ze]&&console.info("Redefining LocalForage driver: "+ze),ni[ze]=K,cs[ze]=J0,Se()};"_support"in K?K._support&&typeof K._support=="function"?K._support().then(ri,Le):ri(!!K._support):ri(!0)}catch(Ba){Le(Ba)}});return h(oe,fe,pe),oe},q.prototype.driver=function(){return this._driver||null},q.prototype.getDriver=function(K,fe,pe){var oe=ni[K]?f.resolve(ni[K]):f.reject(new Error("Driver not found."));return h(oe,fe,pe),oe},q.prototype.getSerializer=function(K){var fe=f.resolve(Wt);return h(fe,K),fe},q.prototype.ready=function(K){var fe=this,pe=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(pe,K,K),pe},q.prototype.setDriver=function(K,fe,pe){var oe=this;er(K)||(K=[K]);var Se=this._getSupportedDrivers(K);function Le(){oe._config.driver=oe.driver()}function ze(Et){return oe._extend(Et),Le(),oe._ready=oe._initStorage(oe._config),oe._ready}function He(Et){return function(){var gn=0;function tr(){for(;gn<Et.length;){var ur=Et[gn];return gn++,oe._dbInfo=null,oe._ready=null,oe.getDriver(ur).then(ze).catch(tr)}Le();var Si=new Error("No available storage method found.");return oe._driverSet=f.reject(Si),oe._driverSet}return tr()}}var Ze=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=Ze.then(function(){var Et=Se[0];return oe._dbInfo=null,oe._ready=null,oe.getDriver(Et).then(function(gn){oe._driver=gn._driver,Le(),oe._wrapLibraryMethodsWithReady(),oe._initDriver=He(Se)})}).catch(function(){Le();var Et=new Error("No available storage method found.");return oe._driverSet=f.reject(Et),oe._driverSet}),h(this._driverSet,fe,pe),this._driverSet},q.prototype.supports=function(K){return!!cs[K]},q.prototype._extend=function(K){Br(this,K)},q.prototype._getSupportedDrivers=function(K){for(var fe=[],pe=0,oe=K.length;pe<oe;pe++){var Se=K[pe];this.supports(Se)&&fe.push(Se)}return fe},q.prototype._wrapLibraryMethodsWithReady=function(){for(var K=0,fe=mi.length;K<fe;K++)wn(this,mi[K])},q.prototype.createInstance=function(K){return new q(K)},q}(),Fa=new Os;r.exports=Fa},{3:3}]},{},[4])(4)})})(H7e);var npn=H7e.exports;const q7e=pl(npn);let hk;const rpn=new Uint8Array(16);function ipn(){if(!hk&&(hk=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hk))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hk(rpn)}const to=[];for(let e=0;e<256;++e)to.push((e+256).toString(16).slice(1));function spn(e,t=0){return to[e[t+0]]+to[e[t+1]]+to[e[t+2]]+to[e[t+3]]+"-"+to[e[t+4]]+to[e[t+5]]+"-"+to[e[t+6]]+to[e[t+7]]+"-"+to[e[t+8]]+to[e[t+9]]+"-"+to[e[t+10]]+to[e[t+11]]+to[e[t+12]]+to[e[t+13]]+to[e[t+14]]+to[e[t+15]]}const opn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_ve={randomUUID:opn};function bve(e,t,n){if(_ve.randomUUID&&!t&&!e)return _ve.randomUUID();e=e||{};const r=e.random||(e.rng||ipn)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return spn(r)}class W7e{constructor(t){Ru(this,"engine");Ru(this,"connected",!1);Ru(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function Qb(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}class apn extends W7e{constructor(){super("localStorage");Ru(this,"studyDatabase")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyDatabase=await q7e.createInstance({name:n});const i=await Qb(JSON.stringify(r)),s=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...s,[i]:r})}async initializeParticipantSession(n,r,i){var u;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(i),!this.currentParticipantId)throw new Error("Participant not initialized");const s=await this.studyDatabase.getItem(this.currentParticipantId);if(s)return s;const o=await Qb(JSON.stringify(r)),a={participantId:this.currentParticipantId,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:n};return await((u=this.studyDatabase)==null?void 0:u.setItem(this.currentParticipantId,a)),a}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=bve();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=await this.studyDatabase.getItem(this.currentParticipantId);if(!i)throw new Error("Participant not initialized");i.answers[n]=r,await this.studyDatabase.setItem(this.currentParticipantId,i)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");const r=n.pop();if(!r)throw new Error("Latin square is empty");return await this.studyDatabase.setItem("sequenceArray",n),r}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&n.push(r)}),n}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=bve();this.studyDatabase.setItem("currentParticipant",r),this.currentParticipantId=r;let i=await this.studyDatabase.getItem(r);if(!i){const s=await Qb(JSON.stringify(n)),o={participantId:r,participantConfigHash:s,sequence:await this.getSequence(),answers:{},searchParams:{}};await this.studyDatabase.setItem(r,o),i=o}return i}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return qg(n.sequence).every((i,s)=>i==="end"?!0:n.answers[`${i}_${s}`]!==void 0)}_verifyStudyDatabase(n){return n!==void 0}}var wve={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7e=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},upn=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},jne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(G7e(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):upn(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new lpn;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class lpn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cpn=function(e){const t=G7e(e);return jne.encodeByteArray(t,!0)},nM=function(e){return cpn(e).replace(/\./g,"")},Y7e=function(e){try{return jne.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K7e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fpn=()=>K7e().__FIREBASE_DEFAULTS__,dpn=()=>{if(typeof process>"u"||typeof wve>"u")return;const e=wve.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},hpn=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Y7e(e[1]);return t&&JSON.parse(t)},D5=()=>{try{return fpn()||dpn()||hpn()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},X7e=e=>{var t,n;return(n=(t=D5())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},ppn=e=>{const t=X7e(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Q7e=()=>{var e;return(e=D5())===null||e===void 0?void 0:e.config},J7e=e=>{var t;return(t=D5())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mpn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[nM(JSON.stringify(n)),nM(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gpn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(as())}function ypn(){var e;const t=(e=D5())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vpn(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function _pn(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bpn(){const e=as();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function wpn(){return!ypn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L5(){try{return typeof indexedDB=="object"}catch{return!1}}function Epn(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xpn="FirebaseError";class _h extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=xpn,Object.setPrototypeOf(this,_h.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wx.prototype.create)}}class wx{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?Spn(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new _h(i,a,r)}}function Spn(e,t){return e.replace(Tpn,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const Tpn=/\{\$([^}]+)}/g;function Apn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function aC(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Eve(s)&&Eve(o)){if(!aC(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Eve(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Cpn(e,t){const n=new Ipn(e,t);return n.subscribe.bind(n)}class Ipn{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Opn(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=p7),i.error===void 0&&(i.error=p7),i.complete===void 0&&(i.complete=p7);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Opn(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function p7(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ppn=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kpn=1e3,$pn=2,Rpn=4*60*60*1e3,Npn=.5;function Dpn(e,t=kpn,n=$pn){const r=t*Math.pow(n,e),i=Math.round(Npn*r*(Math.random()-.5)*2);return Math.min(Rpn,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(e){return e&&e._delegate?e._delegate:e}class eh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lpn{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new oC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Fpn(t))try{this.getOrInitializeService({instanceIdentifier:Ty})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Ty){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ty){return this.instances.has(t)}getOptions(t=Ty){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Mpn(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ty){return this.component?this.component.multipleInstances?t:Ty:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Mpn(e){return e===Ty?void 0:e}function Fpn(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bpn{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Lpn(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Fn||(Fn={}));const jpn={debug:Fn.DEBUG,verbose:Fn.VERBOSE,info:Fn.INFO,warn:Fn.WARN,error:Fn.ERROR,silent:Fn.SILENT},zpn=Fn.INFO,Upn={[Fn.DEBUG]:"log",[Fn.VERBOSE]:"log",[Fn.INFO]:"info",[Fn.WARN]:"warn",[Fn.ERROR]:"error"},Vpn=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Upn[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class M5{constructor(t){this.name=t,this._logLevel=zpn,this._logHandler=Vpn,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Fn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?jpn[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Fn.DEBUG,...t),this._logHandler(this,Fn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Fn.VERBOSE,...t),this._logHandler(this,Fn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Fn.INFO,...t),this._logHandler(this,Fn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Fn.WARN,...t),this._logHandler(this,Fn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Fn.ERROR,...t),this._logHandler(this,Fn.ERROR,...t)}}const Hpn=(e,t)=>t.some(n=>e instanceof n);let xve,Sve;function qpn(){return xve||(xve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wpn(){return Sve||(Sve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Z7e=new WeakMap,qq=new WeakMap,eze=new WeakMap,m7=new WeakMap,zne=new WeakMap;function Gpn(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Ng(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Z7e.set(n,e)}).catch(()=>{}),zne.set(t,e),t}function Ypn(e){if(qq.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});qq.set(e,t)}let Wq={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return qq.get(e);if(t==="objectStoreNames")return e.objectStoreNames||eze.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ng(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Kpn(e){Wq=e(Wq)}function Xpn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(g7(this),t,...n);return eze.set(r,t.sort?t.sort():[t]),Ng(r)}:Wpn().includes(e)?function(...t){return e.apply(g7(this),t),Ng(Z7e.get(this))}:function(...t){return Ng(e.apply(g7(this),t))}}function Qpn(e){return typeof e=="function"?Xpn(e):(e instanceof IDBTransaction&&Ypn(e),Hpn(e,qpn())?new Proxy(e,Wq):e)}function Ng(e){if(e instanceof IDBRequest)return Gpn(e);if(m7.has(e))return m7.get(e);const t=Qpn(e);return t!==e&&(m7.set(e,t),zne.set(t,e)),t}const g7=e=>zne.get(e);function Jpn(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Ng(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ng(o.result),u.oldVersion,u.newVersion,Ng(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Zpn=["get","getKey","getAll","getAllKeys","count"],emn=["put","add","delete","clear"],y7=new Map;function Tve(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(y7.get(t))return y7.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=emn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Zpn.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return y7.set(t,s),s}Kpn(e=>({...e,get:(t,n,r)=>Tve(t,n)||e.get(t,n,r),has:(t,n)=>!!Tve(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tmn{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nmn(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nmn(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Gq="@firebase/app",Ave="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=new M5("@firebase/app"),rmn="@firebase/app-compat",imn="@firebase/analytics-compat",smn="@firebase/analytics",omn="@firebase/app-check-compat",amn="@firebase/app-check",umn="@firebase/auth",lmn="@firebase/auth-compat",cmn="@firebase/database",fmn="@firebase/database-compat",dmn="@firebase/functions",hmn="@firebase/functions-compat",pmn="@firebase/installations",mmn="@firebase/installations-compat",gmn="@firebase/messaging",ymn="@firebase/messaging-compat",vmn="@firebase/performance",_mn="@firebase/performance-compat",bmn="@firebase/remote-config",wmn="@firebase/remote-config-compat",Emn="@firebase/storage",xmn="@firebase/storage-compat",Smn="@firebase/firestore",Tmn="@firebase/firestore-compat",Amn="firebase",Cmn="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yq="[DEFAULT]",Imn={[Gq]:"fire-core",[rmn]:"fire-core-compat",[smn]:"fire-analytics",[imn]:"fire-analytics-compat",[amn]:"fire-app-check",[omn]:"fire-app-check-compat",[umn]:"fire-auth",[lmn]:"fire-auth-compat",[cmn]:"fire-rtdb",[fmn]:"fire-rtdb-compat",[dmn]:"fire-fn",[hmn]:"fire-fn-compat",[pmn]:"fire-iid",[mmn]:"fire-iid-compat",[gmn]:"fire-fcm",[ymn]:"fire-fcm-compat",[vmn]:"fire-perf",[_mn]:"fire-perf-compat",[bmn]:"fire-rc",[wmn]:"fire-rc-compat",[Emn]:"fire-gcs",[xmn]:"fire-gcs-compat",[Smn]:"fire-fst",[Tmn]:"fire-fst-compat","fire-js":"fire-js",[Amn]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=new Map,Omn=new Map,Kq=new Map;function Cve(e,t){try{e.container.addComponent(t)}catch(n){dv.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function zp(e){const t=e.name;if(Kq.has(t))return dv.debug(`There were multiple attempts to register component ${t}.`),!1;Kq.set(t,e);for(const n of rM.values())Cve(n,e);for(const n of Omn.values())Cve(n,e);return!0}function Ex(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ep(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pmn={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dg=new wx("app","Firebase",Pmn);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kmn{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new eh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Dg.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=Cmn;function tze(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Yq,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Dg.create("bad-app-name",{appName:String(i)});if(n||(n=Q7e()),!n)throw Dg.create("no-options");const s=rM.get(i);if(s){if(aC(n,s.options)&&aC(r,s.config))return s;throw Dg.create("duplicate-app",{appName:i})}const o=new Bpn(i);for(const u of Kq.values())o.addComponent(u);const a=new kmn(n,r,o);return rM.set(i,a),a}function Une(e=Yq){const t=rM.get(e);if(!t&&e===Yq&&Q7e())return tze();if(!t)throw Dg.create("no-app",{appName:e});return t}function of(e,t,n){var r;let i=(r=Imn[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),dv.warn(a.join(" "));return}zp(new eh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $mn="firebase-heartbeat-database",Rmn=1,uC="firebase-heartbeat-store";let v7=null;function nze(){return v7||(v7=Jpn($mn,Rmn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(uC)}catch(n){console.warn(n)}}}}).catch(e=>{throw Dg.create("idb-open",{originalErrorMessage:e.message})})),v7}async function Nmn(e){try{const n=(await nze()).transaction(uC),r=await n.objectStore(uC).get(rze(e));return await n.done,r}catch(t){if(t instanceof _h)dv.warn(t.message);else{const n=Dg.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});dv.warn(n.message)}}}async function Ive(e,t){try{const r=(await nze()).transaction(uC,"readwrite");await r.objectStore(uC).put(t,rze(e)),await r.done}catch(n){if(n instanceof _h)dv.warn(n.message);else{const r=Dg.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});dv.warn(r.message)}}}function rze(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dmn=1024,Lmn=30*24*60*60*1e3;class Mmn{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Bmn(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ove();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Lmn}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ove(),{heartbeatsToSend:r,unsentEntries:i}=Fmn(this._heartbeatsCache.heartbeats),s=nM(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Ove(){return new Date().toISOString().substring(0,10)}function Fmn(e,t=Dmn){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Pve(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Pve(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Bmn{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return L5()?Epn().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Nmn(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ive(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ive(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Pve(e){return nM(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jmn(e){zp(new eh("platform-logger",t=>new tmn(t),"PRIVATE")),zp(new eh("heartbeat",t=>new Mmn(t),"PRIVATE")),of(Gq,Ave,e),of(Gq,Ave,"esm2017"),of("fire-js","")}jmn("");var zmn="firebase",Umn="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */of(zmn,Umn,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ize="firebasestorage.googleapis.com",sze="storageBucket",Vmn=2*60*1e3,Hmn=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends _h{constructor(t,n,r=0){super(_7(t),`Firebase Storage: ${n} (${_7(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return _7(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Di;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Di||(Di={}));function _7(e){return"storage/"+e}function Vne(){const e="An unknown error occurred, please check the error payload for server response.";return new Mi(Di.UNKNOWN,e)}function qmn(e){return new Mi(Di.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Wmn(e){return new Mi(Di.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Gmn(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Mi(Di.UNAUTHENTICATED,e)}function Ymn(){return new Mi(Di.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Kmn(e){return new Mi(Di.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Xmn(){return new Mi(Di.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Qmn(){return new Mi(Di.CANCELED,"User canceled the upload/download.")}function Jmn(e){return new Mi(Di.INVALID_URL,"Invalid URL '"+e+"'.")}function Zmn(e){return new Mi(Di.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function egn(){return new Mi(Di.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+sze+"' property when initializing the app?")}function tgn(){return new Mi(Di.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ngn(){return new Mi(Di.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function rgn(e){return new Mi(Di.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Xq(e){return new Mi(Di.INVALID_ARGUMENT,e)}function oze(){return new Mi(Di.APP_DELETED,"The Firebase app was deleted.")}function ign(e){return new Mi(Di.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function I2(e,t){return new Mi(Di.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function LS(e){throw new Mi(Di.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Qu.makeFromUrl(t,n)}catch{return new Qu(t,"")}if(r.path==="")return r;throw Zmn(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(b){b.path_=decodeURIComponent(b.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===ize?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let b=0;b<_.length;b++){const E=_[b],w=E.regex.exec(t);if(w){const x=w[E.indices.bucket];let S=w[E.indices.path];S||(S=""),r=new Qu(x,S),E.postModify(r);break}}if(r==null)throw Jmn(t);return r}}class sgn{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ogn(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function agn(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ugn(e){return e!==void 0}function lgn(e){return typeof e=="object"&&!Array.isArray(e)}function Hne(e){return typeof e=="string"||e instanceof String}function kve(e){return qne()&&e instanceof Blob}function qne(){return typeof Blob<"u"}function $ve(e,t,n,r){if(r<t)throw Xq(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Xq(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wne(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function aze(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(A1||(A1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cgn(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fgn{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new pk(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===A1.NO_ERROR,u=s.getStatus();if(!a||cgn(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===A1.ABORT;r(!1,new pk(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new pk(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());ugn(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=Vne();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?oze():Qmn();o(u)}else{const u=Xmn();o(u)}};this.canceled_?n(!1,new pk(!1,null,!0)):this.backoffId_=ogn(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&agn(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pk{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function dgn(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function hgn(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function pgn(e,t){t&&(e["X-Firebase-GMPID"]=t)}function mgn(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function ggn(e,t,n,r,i,s,o=!0){const a=aze(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return pgn(l,t),dgn(l,n),hgn(l,s),mgn(l,r),new fgn(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ygn(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function vgn(...e){const t=ygn();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(qne())return new Blob(e);throw new Mi(Di.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _gn(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bgn(e){if(typeof atob>"u")throw rgn("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class b7{constructor(t,n){this.data=t,this.contentType=n||null}}function wgn(e,t){switch(e){case gd.RAW:return new b7(uze(t));case gd.BASE64:case gd.BASE64URL:return new b7(lze(e,t));case gd.DATA_URL:return new b7(xgn(t),Sgn(t))}throw Vne()}function uze(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function Egn(e){let t;try{t=decodeURIComponent(e)}catch{throw I2(gd.DATA_URL,"Malformed data URL.")}return uze(t)}function lze(e,t){switch(e){case gd.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw I2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case gd.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw I2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=bgn(t)}catch(i){throw i.message.includes("polyfill")?i:I2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class cze{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw I2(gd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Tgn(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function xgn(e){const t=new cze(e);return t.base64?lze(gd.BASE64,t.rest):Egn(t.rest)}function Sgn(e){return new cze(e).contentType}function Tgn(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(t,n){let r=0,i="";kve(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(kve(this.data_)){const r=this.data_,i=_gn(r,t,n);return i===null?null:new Um(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Um(r,!0)}}static getBlob(...t){if(qne()){const n=t.map(r=>r instanceof Um?r.data_:r);return new Um(vgn.apply(null,n))}else{const n=t.map(o=>Hne(o)?wgn(gd.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Um(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fze(e){let t;try{t=JSON.parse(e)}catch{return null}return lgn(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Agn(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Cgn(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function dze(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ign(e,t){return t}class ca{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Ign}}let mk=null;function Ogn(e){return!Hne(e)||e.length<2?e:dze(e)}function hze(){if(mk)return mk;const e=[];e.push(new ca("bucket")),e.push(new ca("generation")),e.push(new ca("metageneration")),e.push(new ca("name","fullPath",!0));function t(s,o){return Ogn(o)}const n=new ca("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ca("size");return i.xform=r,e.push(i),e.push(new ca("timeCreated")),e.push(new ca("updated")),e.push(new ca("md5Hash",null,!0)),e.push(new ca("cacheControl",null,!0)),e.push(new ca("contentDisposition",null,!0)),e.push(new ca("contentEncoding",null,!0)),e.push(new ca("contentLanguage",null,!0)),e.push(new ca("contentType",null,!0)),e.push(new ca("metadata","customMetadata",!0)),mk=e,mk}function Pgn(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Qu(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function kgn(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return Pgn(r,e),r}function pze(e,t,n){const r=fze(t);return r===null?null:kgn(e,r,n)}function $gn(e,t,n,r){const i=fze(t);if(i===null||!Hne(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=Wne(d,n,r),p=aze({alt:"media",token:l});return h+p})[0]}function Rgn(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class mze{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gze(e){if(!e)throw Vne()}function Ngn(e,t){function n(r,i){const s=pze(e,i,t);return gze(s!==null),s}return n}function Dgn(e,t){function n(r,i){const s=pze(e,i,t);return gze(s!==null),$gn(s,i,e.host,e._protocol)}return n}function yze(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Ymn():i=Gmn():n.getStatus()===402?i=Wmn(e.bucket):n.getStatus()===403?i=Kmn(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function Lgn(e){const t=yze(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=qmn(e.path)),s.serverResponse=i.serverResponse,s}return n}function Mgn(e,t,n){const r=t.fullServerUrl(),i=Wne(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new mze(i,s,Dgn(e,n),o);return a.errorHandler=Lgn(t),a}function Fgn(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Bgn(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=Fgn(null,t)),r}function jgn(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let b=0;b<2;b++)_=_+Math.random().toString().slice(2);return _}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=Bgn(t,r,i),c=Rgn(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Um.getBlob(f,r,d);if(h===null)throw tgn();const p={name:l.fullPath},m=Wne(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new mze(m,g,Ngn(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=yze(t),v}class zgn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=A1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=A1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=A1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw LS("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw LS("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw LS("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw LS("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw LS("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Ugn extends zgn{initXhr(){this.xhr_.responseType="text"}}function vze(){return new Ugn}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(t,n){this._service=t,n instanceof Qu?this._location=n:this._location=Qu.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new hv(t,n)}get root(){const t=new Qu(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dze(this._location.path)}get storage(){return this._service}get parent(){const t=Agn(this._location.path);if(t===null)return null;const n=new Qu(this._location.bucket,t);return new hv(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw ign(t)}}function Vgn(e,t,n){e._throwIfRoot("uploadBytes");const r=jgn(e.storage,e._location,hze(),new Um(t,!0),n);return e.storage.makeRequestWithTokens(r,vze).then(i=>({metadata:i,ref:e}))}function Hgn(e){e._throwIfRoot("getDownloadURL");const t=Mgn(e.storage,e._location,hze());return e.storage.makeRequestWithTokens(t,vze).then(n=>{if(n===null)throw ngn();return n})}function qgn(e,t){const n=Cgn(e._location.path,t),r=new Qu(e._location.bucket,n);return new hv(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wgn(e){return/^[A-Za-z]+:\/\//.test(e)}function Ggn(e,t){return new hv(e,t)}function _ze(e,t){if(e instanceof Gne){const n=e;if(n._bucket==null)throw egn();const r=new hv(n,n._bucket);return t!=null?_ze(r,t):r}else return t!==void 0?qgn(e,t):e}function Ygn(e,t){if(t&&Wgn(t)){if(e instanceof Gne)return Ggn(e,t);throw Xq("To use ref(service, url), the first argument must be a Storage instance.")}else return _ze(e,t)}function Rve(e,t){const n=t==null?void 0:t[sze];return n==null?null:Qu.makeFromBucketSpec(n,e)}function Kgn(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:mpn(i,e.app.options.projectId))}class Gne{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=ize,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Vmn,this._maxUploadRetryTime=Hmn,this._requests=new Set,i!=null?this._bucket=Qu.makeFromBucketSpec(i,this._host):this._bucket=Rve(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Qu.makeFromBucketSpec(this._url,t):this._bucket=Rve(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){$ve("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){$ve("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new hv(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new sgn(oze());{const o=ggn(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Nve="@firebase/storage",Dve="0.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bze="storage";function Xgn(e,t,n){return e=xo(e),Vgn(e,t,n)}function Qgn(e){return e=xo(e),Hgn(e)}function Lve(e,t){return e=xo(e),Ygn(e,t)}function Mve(e=Une(),t){e=xo(e);const r=Ex(e,bze).getImmediate({identifier:t}),i=ppn("storage");return i&&Jgn(r,...i),r}function Jgn(e,t,n,r={}){Kgn(e,t,n,r)}function Zgn(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Gne(n,r,i,t,Zv)}function e0n(){zp(new eh(bze,Zgn,"PUBLIC").setMultipleInstances(!0)),of(Nve,Dve,""),of(Nve,Dve,"esm2017")}e0n();var t0n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},at,Yne=Yne||{},en=t0n||self;function F5(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function aO(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function n0n(e){return Object.prototype.hasOwnProperty.call(e,w7)&&e[w7]||(e[w7]=++r0n)}var w7="closure_uid_"+(1e9*Math.random()>>>0),r0n=0;function i0n(e,t,n){return e.call.apply(e.bind,arguments)}function s0n(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function Jo(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Jo=i0n:Jo=s0n,Jo.apply(null,arguments)}function gk(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Qs(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[i].apply(r,o)}}function X0(){this.s=this.s,this.o=this.o}var o0n=0;X0.prototype.s=!1;X0.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),o0n!=0)&&n0n(this)};X0.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const wze=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Kne(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Fve(e,t){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(F5(r)){const i=e.length||0,s=r.length||0;e.length=i+s;for(let o=0;o<s;o++)e[i+o]=r[o]}else e.push(r)}}function Zo(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Zo.prototype.h=function(){this.defaultPrevented=!0};var a0n=function(){if(!en.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};en.addEventListener("test",n,t),en.removeEventListener("test",n,t)}catch{}return e}();function lC(e){return/^[\s\xa0]*$/.test(e)}function B5(){var e=en.navigator;return e&&(e=e.userAgent)?e:""}function fd(e){return B5().indexOf(e)!=-1}function Xne(e){return Xne[" "](e),e}Xne[" "]=function(){};function u0n(e,t){var n=eyn;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var l0n=fd("Opera"),pE=fd("Trident")||fd("MSIE"),Eze=fd("Edge"),Qq=Eze||pE,xze=fd("Gecko")&&!(B5().toLowerCase().indexOf("webkit")!=-1&&!fd("Edge"))&&!(fd("Trident")||fd("MSIE"))&&!fd("Edge"),c0n=B5().toLowerCase().indexOf("webkit")!=-1&&!fd("Edge");function Sze(){var e=en.document;return e?e.documentMode:void 0}var Jq;e:{var E7="",x7=function(){var e=B5();if(xze)return/rv:([^\);]+)(\)|;)/.exec(e);if(Eze)return/Edge\/([\d\.]+)/.exec(e);if(pE)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(c0n)return/WebKit\/(\S+)/.exec(e);if(l0n)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(x7&&(E7=x7?x7[1]:""),pE){var S7=Sze();if(S7!=null&&S7>parseFloat(E7)){Jq=String(S7);break e}}Jq=E7}var Zq;if(en.document&&pE){var Bve=Sze();Zq=Bve||parseInt(Jq,10)||void 0}else Zq=void 0;var f0n=Zq;function cC(e,t){if(Zo.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(xze){e:{try{Xne(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:d0n[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&cC.$.h.call(this)}}Qs(cC,Zo);var d0n={2:"touch",3:"pen",4:"mouse"};cC.prototype.h=function(){cC.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var uO="closure_listenable_"+(1e6*Math.random()|0),h0n=0;function p0n(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++h0n,this.fa=this.ia=!1}function j5(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Qne(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function m0n(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function Tze(e){const t={};for(const n in e)t[n]=e[n];return t}const jve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Aze(e,t){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(let s=0;s<jve.length;s++)n=jve[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function z5(e){this.src=e,this.g={},this.h=0}z5.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var o=tW(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new p0n(t,this.src,s,!!r,i),t.ia=n,e.push(t)),t};function eW(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=wze(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(j5(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function tW(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}var Jne="closure_lm_"+(1e6*Math.random()|0),T7={};function Cze(e,t,n,r,i){if(r&&r.once)return Oze(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Cze(e,t[s],n,r,i);return null}return n=tre(n),e&&e[uO]?e.O(t,n,aO(r)?!!r.capture:!!r,i):Ize(e,t,n,!1,r,i)}function Ize(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=aO(i)?!!i.capture:!!i,a=ere(e);if(a||(e[Jne]=a=new z5(e)),n=a.add(t,n,r,o,s),n.proxy)return n;if(r=g0n(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)a0n||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(kze(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function g0n(){function e(n){return t.call(e.src,e.listener,n)}const t=y0n;return e}function Oze(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Oze(e,t[s],n,r,i);return null}return n=tre(n),e&&e[uO]?e.P(t,n,aO(r)?!!r.capture:!!r,i):Ize(e,t,n,!0,r,i)}function Pze(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Pze(e,t[s],n,r,i);else r=aO(r)?!!r.capture:!!r,n=tre(n),e&&e[uO]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=tW(s,n,r,i),-1<n&&(j5(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=ere(e))&&(t=e.g[t.toString()],e=-1,t&&(e=tW(t,n,r,i)),(n=-1<e?t[e]:null)&&Zne(n))}function Zne(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[uO])eW(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(kze(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ere(t))?(eW(n,e),n.h==0&&(n.src=null,t[Jne]=null)):j5(e)}}}function kze(e){return e in T7?T7[e]:T7[e]="on"+e}function y0n(e,t){if(e.fa)e=!0;else{t=new cC(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Zne(e),e=n.call(r,t)}return e}function ere(e){return e=e[Jne],e instanceof z5?e:null}var A7="__closure_events_fn_"+(1e9*Math.random()>>>0);function tre(e){return typeof e=="function"?e:(e[A7]||(e[A7]=function(t){return e.handleEvent(t)}),e[A7])}function Gs(){X0.call(this),this.i=new z5(this),this.S=this,this.J=null}Qs(Gs,X0);Gs.prototype[uO]=!0;Gs.prototype.removeEventListener=function(e,t,n,r){Pze(this,e,t,n,r)};function _o(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,typeof t=="string")t=new Zo(t,e);else if(t instanceof Zo)t.target=t.target||e;else{var i=t;t=new Zo(r,e),Aze(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=yk(o,r,!0,t)&&i}if(o=t.g=e,i=yk(o,r,!0,t)&&i,i=yk(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)o=t.g=n[s],i=yk(o,r,!1,t)&&i}Gs.prototype.N=function(){if(Gs.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)j5(n[r]);delete e.g[t],e.h--}}this.J=null};Gs.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};Gs.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function yk(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&eW(e.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var nre=en.JSON.stringify;class v0n{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function _0n(){var e=rre;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class b0n{constructor(){this.h=this.g=null}add(t,n){const r=$ze.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r}}var $ze=new v0n(()=>new w0n,e=>e.reset());class w0n{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function E0n(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function x0n(e){en.setTimeout(()=>{throw e},0)}let fC,dC=!1,rre=new b0n,Rze=()=>{const e=en.Promise.resolve(void 0);fC=()=>{e.then(S0n)}};var S0n=()=>{for(var e;e=_0n();){try{e.h.call(e.g)}catch(n){x0n(n)}var t=$ze;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}dC=!1};function U5(e,t){Gs.call(this),this.h=e||1,this.g=t||en,this.j=Jo(this.qb,this),this.l=Date.now()}Qs(U5,Gs);at=U5.prototype;at.ga=!1;at.T=null;at.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_o(this,"tick"),this.ga&&(ire(this),this.start()))}};at.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ire(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}at.N=function(){U5.$.N.call(this),ire(this),delete this.g};function sre(e,t,n){if(typeof e=="function")n&&(e=Jo(e,n));else if(e&&typeof e.handleEvent=="function")e=Jo(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:en.setTimeout(e,t||0)}function Nze(e){e.g=sre(()=>{e.g=null,e.i&&(e.i=!1,Nze(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class T0n extends X0{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Nze(this)}N(){super.N(),this.g&&(en.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hC(e){X0.call(this),this.h=e,this.g={}}Qs(hC,X0);var zve=[];function Dze(e,t,n,r){Array.isArray(n)||(n&&(zve[0]=n.toString()),n=zve);for(var i=0;i<n.length;i++){var s=Cze(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Lze(e){Qne(e.g,function(t,n){this.g.hasOwnProperty(n)&&Zne(t)},e),e.g={}}hC.prototype.N=function(){hC.$.N.call(this),Lze(this)};hC.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function V5(){this.g=!0}V5.prototype.Ea=function(){this.g=!1};function A0n(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var f=c.split("_");o=2<=f.length&&f[1]=="type"?o+(c+"="+l+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+o})}function C0n(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+o})}function mb(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+O0n(e,n)+(r?" "+r:"")})}function I0n(e,t){e.info(function(){return"TIMEOUT: "+t})}V5.prototype.info=function(){};function O0n(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return nre(n)}catch{return t}}var e_={},Uve=null;function H5(){return Uve=Uve||new Gs}e_.Ta="serverreachability";function Mze(e){Zo.call(this,e_.Ta,e)}Qs(Mze,Zo);function pC(e){const t=H5();_o(t,new Mze(t))}e_.STAT_EVENT="statevent";function Fze(e,t){Zo.call(this,e_.STAT_EVENT,e),this.stat=t}Qs(Fze,Zo);function ba(e){const t=H5();_o(t,new Fze(t,e))}e_.Ua="timingevent";function Bze(e,t){Zo.call(this,e_.Ua,e),this.size=t}Qs(Bze,Zo);function lO(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return en.setTimeout(function(){e()},t)}var q5={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},jze={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ore(){}ore.prototype.h=null;function Vve(e){return e.h||(e.h=e.i())}function zze(){}var cO={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function are(){Zo.call(this,"d")}Qs(are,Zo);function ure(){Zo.call(this,"c")}Qs(ure,Zo);var nW;function W5(){}Qs(W5,ore);W5.prototype.g=function(){return new XMLHttpRequest};W5.prototype.i=function(){return{}};nW=new W5;function fO(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new hC(this),this.P=P0n,e=Qq?125:void 0,this.V=new U5(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Uze}function Uze(){this.i=null,this.g="",this.h=!1}var P0n=45e3,Vze={},rW={};at=fO.prototype;at.setTimeout=function(e){this.P=e};function iW(e,t,n){e.L=1,e.A=Y5(Up(t)),e.u=n,e.S=!0,Hze(e,null)}function Hze(e,t){e.G=Date.now(),dO(e),e.B=Up(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Jze(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Uze,e.g=_Ue(e.l,n?t:null,!e.u),0<e.O&&(e.M=new T0n(Jo(e.Pa,e,e.g),e.O)),Dze(e.U,e.g,"readystatechange",e.nb),t=e.I?Tze(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),pC(),A0n(e.j,e.v,e.B,e.m,e.W,e.u)}at.nb=function(e){e=e.target;const t=this.M;t&&yd(e)==3?t.l():this.Pa(e)};at.Pa=function(e){try{if(e==this.g)e:{const c=yd(this.g);var t=this.g.Ia();const f=this.g.da();if(!(3>c)&&(c!=3||Qq||this.g&&(this.h.h||this.g.ja()||Gve(this.g)))){this.J||c!=4||t==7||(t==8||0>=f?pC(3):pC(2)),G5(this);var n=this.g.da();this.ca=n;t:if(qze(this)){var r=Gve(this.g);e="";var i=r.length,s=yd(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){s1(this),O2(this);var o="";break t}this.h.i=new en.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,C0n(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lC(a)){var l=a;break t}}l=null}if(n=l)mb(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sW(this,n);else{this.i=!1,this.s=3,ba(12),s1(this),O2(this);break e}}this.S?(Wze(this,c,o),Qq&&this.i&&c==3&&(Dze(this.U,this.V,"tick",this.mb),this.V.start())):(mb(this.j,this.m,o,null),sW(this,o)),c==4&&s1(this),this.i&&!this.J&&(c==4?mUe(this.l,this):(this.i=!1,dO(this)))}else Q0n(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,ba(12)):(this.s=0,ba(13)),s1(this),O2(this)}}}catch{}finally{}};function qze(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function Wze(e,t,n){let r=!0,i;for(;!e.J&&e.o<n.length;)if(i=k0n(e,n),i==rW){t==4&&(e.s=4,ba(14),r=!1),mb(e.j,e.m,null,"[Incomplete Response]");break}else if(i==Vze){e.s=4,ba(15),mb(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else mb(e.j,e.m,i,null),sW(e,i);qze(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,ba(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),pre(t),t.M=!0,ba(11))):(mb(e.j,e.m,n,"[Invalid Chunked Response]"),s1(e),O2(e))}at.mb=function(){if(this.g){var e=yd(this.g),t=this.g.ja();this.o<t.length&&(G5(this),Wze(this,e,t),this.i&&e!=4&&dO(this))}};function k0n(e,t){var n=e.o,r=t.indexOf(`
`,n);return r==-1?rW:(n=Number(t.substring(n,r)),isNaN(n)?Vze:(r+=1,r+n>t.length?rW:(t=t.slice(r,r+n),e.o=r+n,t)))}at.cancel=function(){this.J=!0,s1(this)};function dO(e){e.Y=Date.now()+e.P,Gze(e,e.P)}function Gze(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=lO(Jo(e.lb,e),t)}function G5(e){e.C&&(en.clearTimeout(e.C),e.C=null)}at.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(I0n(this.j,this.B),this.L!=2&&(pC(),ba(17)),s1(this),this.s=2,O2(this)):Gze(this,this.Y-e)};function O2(e){e.l.H==0||e.J||mUe(e.l,e)}function s1(e){G5(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,ire(e.V),Lze(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function sW(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||oW(n.i,e))){if(!e.K&&oW(n.i,e)&&n.H==3){try{var r=n.Ja.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)oM(n),J5(n);else break e;hre(n),ba(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=lO(Jo(n.ib,n),6e3));if(1>=tUe(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else o1(n,11)}else if((e.K||n.g==e)&&oM(n),!lC(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const c=l[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const f=l[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));const d=l[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const p=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(lre(s,s.h),s.h=null))}if(r.F){const m=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,Qr(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=e;if(r.wa=vUe(r,r.J?r.pa:null,r.Y),o.K){nUe(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(G5(a),dO(a)),r.g=o}else hUe(r);0<n.j.length&&Z5(n)}else l[0]!="stop"&&l[0]!="close"||o1(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?o1(n,7):dre(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}pC(4)}catch{}}function $0n(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(F5(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function R0n(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(F5(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}function Yze(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(F5(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=R0n(e),r=$0n(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}var Kze=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function N0n(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function C1(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof C1){this.h=e.h,iM(this,e.j),this.s=e.s,this.g=e.g,sM(this,e.m),this.l=e.l;var t=e.i,n=new mC;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Hve(this,n),this.o=e.o}else e&&(t=String(e).match(Kze))?(this.h=!1,iM(this,t[1]||"",!0),this.s=CT(t[2]||""),this.g=CT(t[3]||"",!0),sM(this,t[4]),this.l=CT(t[5]||"",!0),Hve(this,t[6]||"",!0),this.o=CT(t[7]||"")):(this.h=!1,this.i=new mC(null,this.h))}C1.prototype.toString=function(){var e=[],t=this.j;t&&e.push(IT(t,qve,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(IT(t,qve,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(IT(n,n.charAt(0)=="/"?M0n:L0n,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",IT(n,B0n)),e.join("")};function Up(e){return new C1(e)}function iM(e,t,n){e.j=n?CT(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function sM(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Hve(e,t,n){t instanceof mC?(e.i=t,j0n(e.i,e.h)):(n||(t=IT(t,F0n)),e.i=new mC(t,e.h))}function Qr(e,t,n){e.i.set(t,n)}function Y5(e){return Qr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function CT(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function IT(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,D0n),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function D0n(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var qve=/[#\/\?@]/g,L0n=/[#\?:]/g,M0n=/[#\?]/g,F0n=/[#\?@]/g,B0n=/#/g;function mC(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Q0(e){e.g||(e.g=new Map,e.h=0,e.i&&N0n(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}at=mC.prototype;at.add=function(e,t){Q0(this),this.i=null,e=xx(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function Xze(e,t){Q0(e),t=xx(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Qze(e,t){return Q0(e),t=xx(e,t),e.g.has(t)}at.forEach=function(e,t){Q0(this),this.g.forEach(function(n,r){n.forEach(function(i){e.call(t,i,r,this)},this)},this)};at.ta=function(){Q0(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let s=0;s<i.length;s++)n.push(t[r])}return n};at.Z=function(e){Q0(this);let t=[];if(typeof e=="string")Qze(this,e)&&(t=t.concat(this.g.get(xx(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};at.set=function(e,t){return Q0(this),this.i=null,e=xx(this,e),Qze(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};at.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function Jze(e,t,n){Xze(e,t),0<n.length&&(e.i=null,e.g.set(xx(e,t),Kne(n)),e.h+=n.length)}at.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};function xx(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function j0n(e,t){t&&!e.j&&(Q0(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Xze(this,r),Jze(this,i,n))},e)),e.j=t}var z0n=class{constructor(e,t){this.g=e,this.map=t}};function Zze(e){this.l=e||U0n,en.PerformanceNavigationTiming?(e=en.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(en.g&&en.g.Ka&&en.g.Ka()&&en.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var U0n=10;function eUe(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function tUe(e){return e.h?1:e.g?e.g.size:0}function oW(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function lre(e,t){e.g?e.g.add(t):e.h=t}function nUe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Zze.prototype.cancel=function(){if(this.i=rUe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function rUe(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Kne(e.i)}var V0n=class{stringify(e){return en.JSON.stringify(e,void 0)}parse(e){return en.JSON.parse(e,void 0)}};function H0n(){this.g=new V0n}function q0n(e,t,n){const r=n||"";try{Yze(e,function(i,s){let o=i;aO(i)&&(o=nre(i)),t.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function W0n(e,t){const n=new V5;if(en.Image){const r=new Image;r.onload=gk(vk,n,r,"TestLoadImage: loaded",!0,t),r.onerror=gk(vk,n,r,"TestLoadImage: error",!1,t),r.onabort=gk(vk,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=gk(vk,n,r,"TestLoadImage: timeout",!1,t),en.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function vk(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function K5(e){this.l=e.ec||null,this.j=e.ob||!1}Qs(K5,ore);K5.prototype.g=function(){return new X5(this.l,this.j)};K5.prototype.i=function(e){return function(){return e}}({});function X5(e,t){Gs.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=cre,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Qs(X5,Gs);var cre=0;at=X5.prototype;at.open=function(e,t){if(this.readyState!=cre)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,gC(this)};at.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||en).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hO(this)),this.readyState=cre};at.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,gC(this)),this.g&&(this.readyState=3,gC(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof en.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;iUe(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function iUe(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}at.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?hO(this):gC(this),this.readyState==3&&iUe(this)}};at.Za=function(e){this.g&&(this.response=this.responseText=e,hO(this))};at.Ya=function(e){this.g&&(this.response=e,hO(this))};at.ka=function(){this.g&&hO(this)};function hO(e){e.readyState=4,e.l=null,e.j=null,e.A=null,gC(e)}at.setRequestHeader=function(e,t){this.v.append(e,t)};at.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};at.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function gC(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(X5.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var G0n=en.JSON.parse;function Li(e){Gs.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=sUe,this.L=this.M=!1}Qs(Li,Gs);var sUe="",Y0n=/^https?$/i,K0n=["POST","PUT"];at=Li.prototype;at.Oa=function(e){this.M=e};at.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():nW.g(),this.C=this.u?Vve(this.u):Vve(nW),this.g.onreadystatechange=Jo(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){Wve(this,s);return}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=en.FormData&&e instanceof en.FormData,!(0<=wze(K0n,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{uUe(this),0<this.B&&((this.L=X0n(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jo(this.ua,this)):this.A=sre(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Wve(this,s)}};function X0n(e){return pE&&typeof e.timeout=="number"&&e.ontimeout!==void 0}at.ua=function(){typeof Yne<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_o(this,"timeout"),this.abort(8))};function Wve(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,oUe(e),Q5(e)}function oUe(e){e.F||(e.F=!0,_o(e,"complete"),_o(e,"error"))}at.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,_o(this,"complete"),_o(this,"abort"),Q5(this))};at.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Q5(this,!0)),Li.$.N.call(this)};at.La=function(){this.s||(this.G||this.v||this.l?aUe(this):this.kb())};at.kb=function(){aUe(this)};function aUe(e){if(e.h&&typeof Yne<"u"&&(!e.C[1]||yd(e)!=4||e.da()!=2)){if(e.v&&yd(e)==4)sre(e.La,0,e);else if(_o(e,"readystatechange"),yd(e)==4){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=o===0){var i=String(e.I).match(Kze)[1]||null;!i&&en.self&&en.self.location&&(i=en.self.location.protocol.slice(0,-1)),r=!Y0n.test(i?i.toLowerCase():"")}n=r}if(n)_o(e,"complete"),_o(e,"success");else{e.m=6;try{var s=2<yd(e)?e.g.statusText:""}catch{s=""}e.j=s+" ["+e.da()+"]",oUe(e)}}finally{Q5(e)}}}}function Q5(e,t){if(e.g){uUe(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||_o(e,"ready");try{n.onreadystatechange=r}catch{}}}function uUe(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(en.clearTimeout(e.A),e.A=null)}at.isActive=function(){return!!this.g};function yd(e){return e.g?e.g.readyState:0}at.da=function(){try{return 2<yd(this)?this.g.status:-1}catch{return-1}};at.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};at.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),G0n(t)}};function Gve(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case sUe:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function Q0n(e){const t={};e=(e.g&&2<=yd(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<e.length;r++){if(lC(e[r]))continue;var n=E0n(e[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}m0n(t,function(r){return r.join(", ")})}at.Ia=function(){return this.m};at.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function lUe(e){let t="";return Qne(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function fre(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=lUe(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Qr(e,t,n))}function MS(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function cUe(e){this.Ga=0,this.j=[],this.l=new V5,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=MS("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=MS("baseRetryDelayMs",5e3,e),this.hb=MS("retryDelaySeedMs",1e4,e),this.eb=MS("forwardChannelMaxRetries",2,e),this.xa=MS("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Zze(e&&e.concurrentRequestLimit),this.Ja=new H0n,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}at=cUe.prototype;at.ra=8;at.H=1;function dre(e){if(fUe(e),e.H==3){var t=e.W++,n=Up(e.I);if(Qr(n,"SID",e.K),Qr(n,"RID",t),Qr(n,"TYPE","terminate"),pO(e,n),t=new fO(e,e.l,t),t.L=2,t.A=Y5(Up(n)),n=!1,en.navigator&&en.navigator.sendBeacon)try{n=en.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&en.Image&&(new Image().src=t.A,n=!0),n||(t.g=_Ue(t.l,null),t.g.ha(t.A)),t.G=Date.now(),dO(t)}yUe(e)}function J5(e){e.g&&(pre(e),e.g.cancel(),e.g=null)}function fUe(e){J5(e),e.u&&(en.clearTimeout(e.u),e.u=null),oM(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&en.clearTimeout(e.m),e.m=null)}function Z5(e){if(!eUe(e.i)&&!e.m){e.m=!0;var t=e.Na;fC||Rze(),dC||(fC(),dC=!0),rre.add(t,e),e.C=0}}function J0n(e,t){return tUe(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=lO(Jo(e.Na,e,t),gUe(e,e.C)),e.C++,!0)}at.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new fO(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Tze(s),Aze(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=n;break e}if(t===4096||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=dUe(this,i,t),n=Up(this.I),Qr(n,"RID",e),Qr(n,"CVER",22),this.F&&Qr(n,"X-HTTP-Session-Id",this.F),pO(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(lUe(s)))+"&"+t:this.o&&fre(n,this.o,s)),lre(this.i,i),this.bb&&Qr(n,"TYPE","init"),this.P?(Qr(n,"$req",t),Qr(n,"SID","null"),i.aa=!0,iW(i,n,null)):iW(i,n,t),this.H=2}}else this.H==3&&(e?Yve(this,e):this.j.length==0||eUe(this.i)||Yve(this))};function Yve(e,t){var n;t?n=t.m:n=e.W++;const r=Up(e.I);Qr(r,"SID",e.K),Qr(r,"RID",n),Qr(r,"AID",e.V),pO(e,r),e.o&&e.s&&fre(r,e.o,e.s),n=new fO(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=dUe(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),lre(e.i,n),iW(n,r,t)}function pO(e,t){e.na&&Qne(e.na,function(n,r){Qr(t,r,n)}),e.h&&Yze({},function(n,r){Qr(t,r,n)})}function dUe(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Jo(e.h.Va,e.h,e):null;e:{var i=e.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const c=i[u].map;if(l-=s,0>l)s=Math.max(0,i[u].g-100),a=!1;else try{q0n(c,o,"req"+l+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function hUe(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;fC||Rze(),dC||(fC(),dC=!0),rre.add(t,e),e.A=0}}function hre(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=lO(Jo(e.Ma,e),gUe(e,e.A)),e.A++,!0)}at.Ma=function(){if(this.u=null,pUe(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=lO(Jo(this.jb,this),e)}};at.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ba(10),J5(this),pUe(this))};function pre(e){e.B!=null&&(en.clearTimeout(e.B),e.B=null)}function pUe(e){e.g=new fO(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=Up(e.wa);Qr(t,"RID","rpc"),Qr(t,"SID",e.K),Qr(t,"AID",e.V),Qr(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Qr(t,"TO",e.qa),Qr(t,"TYPE","xmlhttp"),pO(e,t),e.o&&e.s&&fre(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Y5(Up(t)),n.u=null,n.S=!0,Hze(n,e)}at.ib=function(){this.v!=null&&(this.v=null,J5(this),hre(this),ba(19))};function oM(e){e.v!=null&&(en.clearTimeout(e.v),e.v=null)}function mUe(e,t){var n=null;if(e.g==t){oM(e),pre(e),e.g=null;var r=2}else if(oW(e.i,t))n=t.F,nUe(e.i,t),r=1;else return;if(e.H!=0){if(t.i)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;r=H5(),_o(r,new Bze(r,n)),Z5(e)}else hUe(e);else if(i=t.s,i==3||i==0&&0<t.ca||!(r==1&&J0n(e,t)||r==2&&hre(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:o1(e,5);break;case 4:o1(e,10);break;case 3:o1(e,6);break;default:o1(e,2)}}}function gUe(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function o1(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var r=Jo(e.pb,e);n||(n=new C1("//www.google.com/images/cleardot.gif"),en.location&&en.location.protocol=="http"||iM(n,"https"),Y5(n)),W0n(n.toString(),r)}else ba(2);e.H=0,e.h&&e.h.za(t),yUe(e),fUe(e)}at.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ba(2)):(this.l.info("Failed to ping google.com"),ba(1))};function yUe(e){if(e.H=0,e.ma=[],e.h){const t=rUe(e.i);(t.length!=0||e.j.length!=0)&&(Fve(e.ma,t),Fve(e.ma,e.j),e.i.i.length=0,Kne(e.j),e.j.length=0),e.h.ya()}}function vUe(e,t,n){var r=n instanceof C1?Up(n):new C1(n);if(r.g!="")t&&(r.g=t+"."+r.g),sM(r,r.m);else{var i=en.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new C1(null);r&&iM(s,r),t&&(s.g=t),i&&sM(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Qr(r,n,t),Qr(r,"VER",e.ra),pO(e,r),r}function _Ue(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new Li(new K5({ob:n})):new Li(e.va),t.Oa(e.J),t}at.isActive=function(){return!!this.h&&this.h.isActive(this)};function bUe(){}at=bUe.prototype;at.Ba=function(){};at.Aa=function(){};at.za=function(){};at.ya=function(){};at.isActive=function(){return!0};at.Va=function(){};function aM(){if(pE&&!(10<=Number(f0n)))throw Error("Environmental error: no available transport.")}aM.prototype.g=function(e,t){return new hl(e,t)};function hl(e,t){Gs.call(this),this.g=new cUe(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!lC(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!lC(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Sx(this)}Qs(hl,Gs);hl.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ba(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=vUe(e,null,e.Y),Z5(e)};hl.prototype.close=function(){dre(this.g)};hl.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=nre(e),e=n);t.j.push(new z0n(t.fb++,e)),t.H==3&&Z5(t)};hl.prototype.N=function(){this.g.h=null,delete this.j,dre(this.g),delete this.g,hl.$.N.call(this)};function wUe(e){are.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Qs(wUe,are);function EUe(){ure.call(this),this.status=1}Qs(EUe,ure);function Sx(e){this.g=e}Qs(Sx,bUe);Sx.prototype.Ba=function(){_o(this.g,"a")};Sx.prototype.Aa=function(e){_o(this.g,new wUe(e))};Sx.prototype.za=function(e){_o(this.g,new EUe)};Sx.prototype.ya=function(){_o(this.g,"b")};function Z0n(){this.blockSize=-1}function mf(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Qs(mf,Z0n);mf.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function C7(e,t,n){n||(n=0);var r=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(s^n&(i^s))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=s+(i^t&(n^i))+r[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=i+(n^s&(t^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(t^i&(s^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^s&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^s&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(t^n))+r[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(s^t))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^t&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^s)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^s)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=s+(t^n^i)+r[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=i+(s^t^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~s))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~s))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=s+(n^(t|~i))+r[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=i+(t^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}mf.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(i==0)for(;s<=n;)C7(this,e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){C7(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){C7(this,r),i=0;break}}this.h=i,this.i+=t};mf.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};function wr(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=e[i]|0;r&&s==t||(n[i]=s,r=!1)}this.g=n}var eyn={};function mre(e){return-128<=e&&128>e?u0n(e,function(t){return new wr([t|0],0>t?-1:0)}):new wr([e|0],0>e?-1:0)}function vd(e){if(isNaN(e)||!isFinite(e))return Jb;if(0>e)return co(vd(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=aW;return new wr(t,0)}function xUe(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return co(xUe(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=vd(Math.pow(t,8)),r=Jb,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),o=parseInt(e.substring(i,i+s),t);8>s?(s=vd(Math.pow(t,s)),r=r.R(s).add(vd(o))):(r=r.R(n),r=r.add(vd(o)))}return r}var aW=4294967296,Jb=mre(0),uW=mre(1),Kve=mre(16777216);at=wr.prototype;at.ea=function(){if(Fl(this))return-co(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:aW+r)*t,t*=aW}return e};at.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(tp(this))return"0";if(Fl(this))return"-"+co(this).toString(e);for(var t=vd(Math.pow(e,6)),n=this,r="";;){var i=lM(n,t).g;n=uM(n,i.R(t));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,tp(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};at.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function tp(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Fl(e){return e.h==-1}at.X=function(e){return e=uM(this,e),Fl(e)?-1:tp(e)?0:1};function co(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new wr(n,~e.h).add(uW)}at.abs=function(){return Fl(this)?co(this):this};at.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(this.D(i)&65535)+(e.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new wr(n,n[n.length-1]&-2147483648?-1:0)};function uM(e,t){return e.add(co(t))}at.R=function(e){if(tp(this)||tp(e))return Jb;if(Fl(this))return Fl(e)?co(this).R(co(e)):co(co(this).R(e));if(Fl(e))return co(this.R(co(e)));if(0>this.X(Kve)&&0>e.X(Kve))return vd(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=e.D(i)>>>16,u=e.D(i)&65535;n[2*r+2*i]+=o*u,_k(n,2*r+2*i),n[2*r+2*i+1]+=s*u,_k(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,_k(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,_k(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new wr(n,0)};function _k(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function FS(e,t){this.g=e,this.h=t}function lM(e,t){if(tp(t))throw Error("division by zero");if(tp(e))return new FS(Jb,Jb);if(Fl(e))return t=lM(co(e),t),new FS(co(t.g),co(t.h));if(Fl(t))return t=lM(e,co(t)),new FS(co(t.g),t.h);if(30<e.g.length){if(Fl(e)||Fl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=uW,r=t;0>=r.X(e);)n=Xve(n),r=Xve(r);var i=P_(n,1),s=P_(r,1);for(r=P_(r,2),n=P_(n,2);!tp(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=P_(r,1),n=P_(n,1)}return t=uM(e,i.R(t)),new FS(i,t)}for(i=Jb;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=vd(n),o=s.R(t);Fl(o)||0<o.X(e);)n-=r,s=vd(n),o=s.R(t);tp(s)&&(s=uW),i=i.add(s),e=uM(e,o)}return new FS(i,e)}at.gb=function(e){return lM(this,e).h};at.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new wr(n,this.h&e.h)};at.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new wr(n,this.h|e.h)};at.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new wr(n,this.h^e.h)};function Xve(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new wr(n,e.h)}function P_(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new wr(i,e.h)}aM.prototype.createWebChannel=aM.prototype.g;hl.prototype.send=hl.prototype.u;hl.prototype.open=hl.prototype.m;hl.prototype.close=hl.prototype.close;q5.NO_ERROR=0;q5.TIMEOUT=8;q5.HTTP_ERROR=6;jze.COMPLETE="complete";zze.EventType=cO;cO.OPEN="a";cO.CLOSE="b";cO.ERROR="c";cO.MESSAGE="d";Gs.prototype.listen=Gs.prototype.O;Li.prototype.listenOnce=Li.prototype.P;Li.prototype.getLastError=Li.prototype.Sa;Li.prototype.getLastErrorCode=Li.prototype.Ia;Li.prototype.getStatus=Li.prototype.da;Li.prototype.getResponseJson=Li.prototype.Wa;Li.prototype.getResponseText=Li.prototype.ja;Li.prototype.send=Li.prototype.ha;Li.prototype.setWithCredentials=Li.prototype.Oa;mf.prototype.digest=mf.prototype.l;mf.prototype.reset=mf.prototype.reset;mf.prototype.update=mf.prototype.j;wr.prototype.add=wr.prototype.add;wr.prototype.multiply=wr.prototype.R;wr.prototype.modulo=wr.prototype.gb;wr.prototype.compare=wr.prototype.X;wr.prototype.toNumber=wr.prototype.ea;wr.prototype.toString=wr.prototype.toString;wr.prototype.getBits=wr.prototype.D;wr.fromNumber=vd;wr.fromString=xUe;var tyn=function(){return new aM},nyn=function(){return H5()},I7=q5,ryn=jze,iyn=e_,Qve={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},bk=zze,syn=Li,oyn=mf,Zb=wr;const Jve="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}qa.UNAUTHENTICATED=new qa(null),qa.GOOGLE_CREDENTIALS=new qa("google-credentials-uid"),qa.FIRST_PARTY=new qa("first-party-uid"),qa.MOCK_USER=new qa("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tx="10.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=new M5("@firebase/firestore");function BS(){return pv.logLevel}function st(e,...t){if(pv.logLevel<=Fn.DEBUG){const n=t.map(gre);pv.debug(`Firestore (${Tx}): ${e}`,...n)}}function th(e,...t){if(pv.logLevel<=Fn.ERROR){const n=t.map(gre);pv.error(`Firestore (${Tx}): ${e}`,...n)}}function yC(e,...t){if(pv.logLevel<=Fn.WARN){const n=t.map(gre);pv.warn(`Firestore (${Tx}): ${e}`,...n)}}function gre(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(e="Unexpected state"){const t=`FIRESTORE (${Tx}) INTERNAL ASSERTION FAILED: `+e;throw th(t),new Error(t)}function Vr(e,t){e||Kt()}function nn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends _h{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ayn{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class uyn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(qa.UNAUTHENTICATED))}shutdown(){}}class lyn{constructor(t){this.t=t,this.currentUser=qa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Rd;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Rd,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Rd)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vr(typeof r.accessToken=="string"),new ayn(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Vr(t===null||typeof t=="string"),new qa(t)}}class cyn{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=qa.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fyn{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new cyn(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(qa.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dyn{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hyn{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,st("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Vr(typeof n.token=="string"),this.R=n.token,new dyn(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pyn(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SUe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=pyn(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function cr(e,t){return e<t?-1:e>t?1:0}function mE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new lt(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new lt(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new lt(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new lt(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return xs.fromMillis(Date.now())}static fromDate(t){return xs.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new xs(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?cr(this.nanoseconds,t.nanoseconds):cr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new tn(t)}static min(){return new tn(new xs(0,0))}static max(){return new tn(new xs(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(t,n,r){n===void 0?n=0:n>t.length&&Kt(),r===void 0?r=t.length-n:r>t.length-n&&Kt(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return vC.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof vC?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Jr extends vC{construct(t,n,r){return new Jr(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new lt(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Jr(n)}static emptyPath(){return new Jr([])}}const myn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fo extends vC{construct(t,n,r){return new fo(t,n,r)}static isValidIdentifier(t){return myn.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new fo(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new lt(Pe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new lt(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new lt(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new lt(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new fo(n)}static emptyPath(){return new fo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(t){this.path=t}static fromPath(t){return new Lt(Jr.fromString(t))}static fromName(t){return new Lt(Jr.fromString(t).popFirst(5))}static empty(){return new Lt(Jr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Jr.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Jr.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Lt(new Jr(t.slice()))}}function gyn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=tn.fromTimestamp(r===1e9?new xs(n+1,0):new xs(n,r));return new _0(i,Lt.empty(),t)}function yyn(e){return new _0(e.readTime,e.key,-1)}class _0{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new _0(tn.min(),Lt.empty(),-1)}static max(){return new _0(tn.max(),Lt.empty(),-1)}}function vyn(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Lt.comparator(e.documentKey,t.documentKey),n!==0?n:cr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _yn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class byn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mO(e){if(e.code!==Pe.FAILED_PRECONDITION||e.message!==_yn)throw e;st("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Kt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Ne((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Ne?n:Ne.resolve(n)}catch(n){return Ne.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Ne.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Ne.reject(n)}static resolve(t){return new Ne((n,r)=>{n(t)})}static reject(t){return new Ne((n,r)=>{r(t)})}static waitFor(t){return new Ne((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Ne.resolve(!1);for(const r of t)n=n.next(i=>i?Ne.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Ne((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Ne((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yre{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.V=new Rd,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new P2(t,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=vre(r.target.error);this.V.reject(new P2(t,i))}}static open(t,n,r,i){try{return new yre(n,t.transaction(i,r))}catch(s){throw new P2(n,s)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(st("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const n=this.transaction.objectStore(t);return new Eyn(n)}}class a1{constructor(t,n,r){this.name=t,this.version=n,this.p=r,a1.S(as())===12.2&&th("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return st("SimpleDb","Removing database:",t),jy(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!L5())return!1;if(a1.C())return!0;const t=as(),n=a1.S(t),r=0<n&&n<10,i=a1.v(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,n){return t.store(n)}static S(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(t){const n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(t){return this.db||(st("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new P2(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new lt(Pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new lt(Pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new P2(t,o))},i.onupgradeneeded=s=>{st("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{st("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(t){this.L=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(t);const a=yre.open(this.db,t,s?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),Ne.reject(l))).toPromise();return u.catch(()=>{}),await a.m,u}catch(a){const u=a,l=u.name!=="FirebaseError"&&o<3;if(st("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}class wyn{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return jy(this.k.delete())}}class P2 extends lt{constructor(t,n){super(Pe.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function gO(e){return e.name==="IndexedDbTransactionError"}class Eyn{constructor(t){this.store=t}put(t,n){let r;return n!==void 0?(st("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(st("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),jy(r)}add(t){return st("SimpleDb","ADD",this.store.name,t,t),jy(this.store.add(t))}get(t){return jy(this.store.get(t)).next(n=>(n===void 0&&(n=null),st("SimpleDb","GET",this.store.name,t,n),n))}delete(t){return st("SimpleDb","DELETE",this.store.name,t),jy(this.store.delete(t))}count(){return st("SimpleDb","COUNT",this.store.name),jy(this.store.count())}W(t,n){const r=this.options(t,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new Ne((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,u)=>{o.push(u)}).next(()=>o)}}j(t,n){const r=this.store.getAll(t,n===null?void 0:n);return new Ne((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(t,n){st("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(t,n){let r;n?r=t:(r={},n=t);const i=this.cursor(r);return this.G(i,n)}Z(t){const n=this.cursor({});return new Ne((r,i)=>{n.onerror=s=>{const o=vre(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(t,n){const r=[];return new Ne((i,s)=>{t.onerror=o=>{s(o.target.error)},t.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new wyn(a),l=n(a.primaryKey,a.value,u);if(l instanceof Ne){const c=l.catch(f=>(u.done(),Ne.reject(f)));r.push(c)}u.isDone?i():u.$===null?a.continue():a.continue(u.$)}}).next(()=>Ne.waitFor(r))}options(t,n){let r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const r=this.store.index(t.index);return t.J?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function jy(e){return new Ne((t,n)=>{e.onsuccess=r=>{const i=r.target.result;t(i)},e.onerror=r=>{const i=vre(r.target.error);n(i)}})}let Zve=!1;function vre(e){const t=a1.S(as());if(t>=12.2&&t<13){const n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){const r=new lt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Zve||(Zve=!0,setTimeout(()=>{throw r},0)),r}}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _re{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}_re._e=-1;function e8(e){return e==null}function cM(e){return e===0&&1/e==-1/0}function xyn(e){return typeof e=="number"&&Number.isInteger(e)&&!cM(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_e(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ax(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function TUe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(t,n){this.comparator=t,this.root=n||ao.EMPTY}insert(t,n){return new wi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ao.BLACK,null,null))}remove(t){return new wi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ao.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new wk(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new wk(this.root,t,this.comparator,!1)}getReverseIterator(){return new wk(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new wk(this.root,t,this.comparator,!0)}}class wk{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ao{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??ao.RED,this.left=i??ao.EMPTY,this.right=s??ao.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new ao(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ao.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return ao.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ao.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ao.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Kt();const t=this.left.check();if(t!==this.right.check())throw Kt();return t+(this.isRed()?0:1)}}ao.EMPTY=null,ao.RED=!0,ao.BLACK=!1;ao.EMPTY=new class{constructor(){this.size=0}get key(){throw Kt()}get value(){throw Kt()}get color(){throw Kt()}get left(){throw Kt()}get right(){throw Kt()}copy(t,n,r,i,s){return this}insert(t,n,r){return new ao(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(t){this.comparator=t,this.data=new wi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new t_e(this.data.getIterator())}getIteratorFrom(t){return new t_e(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof bo)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new bo(this.comparator);return n.data=t,n}}class t_e{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t){this.fields=t,t.sort(fo.comparator)}static empty(){return new Qc([])}unionWith(t){let n=new bo(fo.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Qc(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return mE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AUe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new AUe("Invalid base64 string: "+s):s}}(t);return new ia(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new ia(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return cr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ia.EMPTY_BYTE_STRING=new ia("");const Syn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function b0(e){if(Vr(!!e),typeof e=="string"){let t=0;const n=Syn.exec(e);if(Vr(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ji(e.seconds),nanos:Ji(e.nanos)}}function Ji(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function mv(e){return typeof e=="string"?ia.fromBase64String(e):ia.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bre(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function wre(e){const t=e.mapValue.fields.__previous_value__;return bre(t)?wre(t):t}function _C(e){const t=b0(e.mapValue.fields.__local_write_time__.timestampValue);return new xs(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tyn{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class bC{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new bC("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof bC&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function gv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bre(e)?4:Ayn(e)?9007199254740991:10:Kt()}function nh(e,t){if(e===t)return!0;const n=gv(e);if(n!==gv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _C(e).isEqual(_C(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=b0(i.timestampValue),a=b0(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return mv(i.bytesValue).isEqual(mv(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Ji(i.geoPointValue.latitude)===Ji(s.geoPointValue.latitude)&&Ji(i.geoPointValue.longitude)===Ji(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ji(i.integerValue)===Ji(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ji(i.doubleValue),a=Ji(s.doubleValue);return o===a?cM(o)===cM(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return mE(e.arrayValue.values||[],t.arrayValue.values||[],nh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(e_e(o)!==e_e(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!nh(o[u],a[u])))return!1;return!0}(e,t);default:return Kt()}}function wC(e,t){return(e.values||[]).find(n=>nh(n,t))!==void 0}function gE(e,t){if(e===t)return 0;const n=gv(e),r=gv(t);if(n!==r)return cr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return cr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Ji(s.integerValue||s.doubleValue),u=Ji(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return n_e(e.timestampValue,t.timestampValue);case 4:return n_e(_C(e),_C(t));case 5:return cr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=mv(s),u=mv(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=cr(a[l],u[l]);if(c!==0)return c}return cr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=cr(Ji(s.latitude),Ji(o.latitude));return a!==0?a:cr(Ji(s.longitude),Ji(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=gE(a[l],u[l]);if(c)return c}return cr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Ek.mapValue&&o===Ek.mapValue)return 0;if(s===Ek.mapValue)return 1;if(o===Ek.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=cr(u[f],c[f]);if(d!==0)return d;const h=gE(a[u[f]],l[c[f]]);if(h!==0)return h}return cr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Kt()}}function n_e(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return cr(e,t);const n=b0(e),r=b0(t),i=cr(n.seconds,r.seconds);return i!==0?i:cr(n.nanos,r.nanos)}function yE(e){return lW(e)}function lW(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=b0(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return mv(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Lt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=lW(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${lW(n.fields[o])}`;return i+"}"}(e.mapValue):Kt()}function r_e(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function cW(e){return!!e&&"integerValue"in e}function Ere(e){return!!e&&"arrayValue"in e}function i_e(e){return!!e&&"nullValue"in e}function s_e(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function U$(e){return!!e&&"mapValue"in e}function k2(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ax(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=k2(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=k2(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ayn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(t){this.value=t}static empty(){return new Bl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!U$(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=k2(n)}setAll(t){let n=fo.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=k2(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());U$(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return nh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];U$(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Ax(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Bl(k2(this.value))}}function CUe(e){const t=[];return Ax(e.fields,(n,r)=>{const i=new fo([n]);if(U$(r)){const s=CUe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Qc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Uo(t,0,tn.min(),tn.min(),tn.min(),Bl.empty(),0)}static newFoundDocument(t,n,r,i){return new Uo(t,1,n,tn.min(),r,i,0)}static newNoDocument(t,n){return new Uo(t,2,n,tn.min(),tn.min(),Bl.empty(),0)}static newUnknownDocument(t,n){return new Uo(t,3,n,tn.min(),tn.min(),Bl.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(tn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Bl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Bl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Uo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Uo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(t,n){this.position=t,this.inclusive=n}}function o_e(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Lt.comparator(Lt.fromName(o.referenceValue),n.key):r=gE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function a_e(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!nh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(t,n="asc"){this.field=t,this.dir=n}}function Cyn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IUe{}class ns extends IUe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Oyn(t,n,r):n==="array-contains"?new $yn(t,r):n==="in"?new Ryn(t,r):n==="not-in"?new Nyn(t,r):n==="array-contains-any"?new Dyn(t,r):new ns(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Pyn(t,r):new kyn(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(gE(n,this.value)):n!==null&&gv(this.value)===gv(n)&&this.matchesComparison(gE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Kt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gf extends IUe{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new gf(t,n)}matches(t){return OUe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function OUe(e){return e.op==="and"}function PUe(e){return Iyn(e)&&OUe(e)}function Iyn(e){for(const t of e.filters)if(t instanceof gf)return!1;return!0}function fW(e){if(e instanceof ns)return e.field.canonicalString()+e.op.toString()+yE(e.value);if(PUe(e))return e.filters.map(t=>fW(t)).join(",");{const t=e.filters.map(n=>fW(n)).join(",");return`${e.op}(${t})`}}function kUe(e,t){return e instanceof ns?function(r,i){return i instanceof ns&&r.op===i.op&&r.field.isEqual(i.field)&&nh(r.value,i.value)}(e,t):e instanceof gf?function(r,i){return i instanceof gf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&kUe(o,i.filters[a]),!0):!1}(e,t):void Kt()}function $Ue(e){return e instanceof ns?function(n){return`${n.field.canonicalString()} ${n.op} ${yE(n.value)}`}(e):e instanceof gf?function(n){return n.op.toString()+" {"+n.getFilters().map($Ue).join(" ,")+"}"}(e):"Filter"}class Oyn extends ns{constructor(t,n,r){super(t,n,r),this.key=Lt.fromName(r.referenceValue)}matches(t){const n=Lt.comparator(t.key,this.key);return this.matchesComparison(n)}}class Pyn extends ns{constructor(t,n){super(t,"in",n),this.keys=RUe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class kyn extends ns{constructor(t,n){super(t,"not-in",n),this.keys=RUe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function RUe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Lt.fromName(r.referenceValue))}class $yn extends ns{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Ere(n)&&wC(n.arrayValue,this.value)}}class Ryn extends ns{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&wC(this.value.arrayValue,n)}}class Nyn extends ns{constructor(t,n){super(t,"not-in",n)}matches(t){if(wC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!wC(this.value.arrayValue,n)}}class Dyn extends ns{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Ere(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wC(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lyn{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function u_e(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Lyn(e,t,n,r,i,s,o)}function xre(e){const t=nn(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>fW(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),e8(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>yE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>yE(r)).join(",")),t.ce=n}return t.ce}function Sre(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Cyn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!kUe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!a_e(e.startAt,t.startAt)&&a_e(e.endAt,t.endAt)}function dW(e){return Lt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Myn(e,t,n,r,i,s,o,a){return new Cx(e,t,n,r,i,s,o,a)}function Tre(e){return new Cx(e)}function l_e(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function NUe(e){return e.collectionGroup!==null}function $2(e){const t=nn(e);if(t.le===null){t.le=[];const n=new Set;for(const s of t.explicitOrderBy)t.le.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new bo(fo.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.le.push(new EC(s,r))}),n.has(fo.keyField().canonicalString())||t.le.push(new EC(fo.keyField(),r))}return t.le}function Nd(e){const t=nn(e);return t.he||(t.he=Fyn(t,$2(e))),t.he}function Fyn(e,t){if(e.limitType==="F")return u_e(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new EC(i.field,s)});const n=e.endAt?new fM(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new fM(e.startAt.position,e.startAt.inclusive):null;return u_e(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function hW(e,t){const n=e.filters.concat([t]);return new Cx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function pW(e,t,n){return new Cx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function t8(e,t){return Sre(Nd(e),Nd(t))&&e.limitType===t.limitType}function DUe(e){return`${xre(Nd(e))}|lt:${e.limitType}`}function j_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$Ue(i)).join(", ")}]`),e8(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>yE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>yE(i)).join(",")),`Target(${r})`}(Nd(e))}; limitType=${e.limitType})`}function n8(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Lt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of $2(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=o_e(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,$2(r),i)||r.endAt&&!function(o,a,u){const l=o_e(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,$2(r),i))}(e,t)}function Byn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function LUe(e){return(t,n)=>{let r=!1;for(const i of $2(e)){const s=jyn(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function jyn(e,t,n){const r=e.field.isKeyField()?Lt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?gE(u,l):Kt()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Kt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Ax(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return TUe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zyn=new wi(Lt.comparator);function Vp(){return zyn}const MUe=new wi(Lt.comparator);function OT(...e){let t=MUe;for(const n of e)t=t.insert(n.key,n);return t}function FUe(e){let t=MUe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function u1(){return R2()}function BUe(){return R2()}function R2(){return new Ix(e=>e.toString(),(e,t)=>e.isEqual(t))}const Uyn=new wi(Lt.comparator),Vyn=new bo(Lt.comparator);function On(...e){let t=Vyn;for(const n of e)t=t.add(n);return t}const Hyn=new bo(cr);function qyn(){return Hyn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jUe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cM(t)?"-0":t}}function zUe(e){return{integerValue:""+e}}function Wyn(e,t){return xyn(t)?zUe(t):jUe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(){this._=void 0}}function Gyn(e,t,n){return e instanceof xC?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&bre(s)&&(s=wre(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof SC?VUe(e,t):e instanceof TC?HUe(e,t):function(i,s){const o=UUe(i,s),a=c_e(o)+c_e(i.Ie);return cW(o)&&cW(i.Ie)?zUe(a):jUe(i.serializer,a)}(e,t)}function Yyn(e,t,n){return e instanceof SC?VUe(e,t):e instanceof TC?HUe(e,t):n}function UUe(e,t){return e instanceof dM?function(r){return cW(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class xC extends r8{}class SC extends r8{constructor(t){super(),this.elements=t}}function VUe(e,t){const n=qUe(t);for(const r of e.elements)n.some(i=>nh(i,r))||n.push(r);return{arrayValue:{values:n}}}class TC extends r8{constructor(t){super(),this.elements=t}}function HUe(e,t){let n=qUe(t);for(const r of e.elements)n=n.filter(i=>!nh(i,r));return{arrayValue:{values:n}}}class dM extends r8{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function c_e(e){return Ji(e.integerValue||e.doubleValue)}function qUe(e){return Ere(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kyn{constructor(t,n){this.field=t,this.transform=n}}function Xyn(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof SC&&i instanceof SC||r instanceof TC&&i instanceof TC?mE(r.elements,i.elements,nh):r instanceof dM&&i instanceof dM?nh(r.Ie,i.Ie):r instanceof xC&&i instanceof xC}(e.transform,t.transform)}class Qyn{constructor(t,n){this.version=t,this.transformResults=n}}class _p{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new _p}static exists(t){return new _p(void 0,t)}static updateTime(t){return new _p(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function V$(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class i8{}function WUe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new YUe(e.key,_p.none()):new yO(e.key,e.data,_p.none());{const n=e.data,r=Bl.empty();let i=new bo(fo.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new t_(e.key,r,new Qc(i.toArray()),_p.none())}}function Jyn(e,t,n){e instanceof yO?function(i,s,o){const a=i.value.clone(),u=d_e(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof t_?function(i,s,o){if(!V$(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=d_e(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(GUe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function N2(e,t,n,r){return e instanceof yO?function(s,o,a,u){if(!V$(s.precondition,o))return a;const l=s.value.clone(),c=h_e(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof t_?function(s,o,a,u){if(!V$(s.precondition,o))return a;const l=h_e(s.fieldTransforms,u,o),c=o.data;return c.setAll(GUe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return V$(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function Zyn(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=UUe(r.transform,i||null);s!=null&&(n===null&&(n=Bl.empty()),n.set(r.field,s))}return n||null}function f_e(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&mE(r,i,(s,o)=>Xyn(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class yO extends i8{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class t_ extends i8{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function GUe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function d_e(e,t,n){const r=new Map;Vr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Yyn(o,a,n[i]))}return r}function h_e(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Gyn(s,o,t))}return r}class YUe extends i8{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e1n extends i8{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1n{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&Jyn(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=N2(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=N2(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=BUe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=WUe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(tn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),On())}isEqual(t){return this.batchId===t.batchId&&mE(this.mutations,t.mutations,(n,r)=>f_e(n,r))&&mE(this.baseMutations,t.baseMutations,(n,r)=>f_e(n,r))}}class Are{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Vr(t.mutations.length===r.length);let i=function(){return Uyn}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Are(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1n{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1n{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ki,qn;function i1n(e){switch(e){default:return Kt();case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0}}function KUe(e){if(e===void 0)return th("GRPC error has no .code"),Pe.UNKNOWN;switch(e){case Ki.OK:return Pe.OK;case Ki.CANCELLED:return Pe.CANCELLED;case Ki.UNKNOWN:return Pe.UNKNOWN;case Ki.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case Ki.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case Ki.INTERNAL:return Pe.INTERNAL;case Ki.UNAVAILABLE:return Pe.UNAVAILABLE;case Ki.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case Ki.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case Ki.NOT_FOUND:return Pe.NOT_FOUND;case Ki.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case Ki.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case Ki.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case Ki.ABORTED:return Pe.ABORTED;case Ki.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case Ki.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case Ki.DATA_LOSS:return Pe.DATA_LOSS;default:return Kt()}}(qn=Ki||(Ki={}))[qn.OK=0]="OK",qn[qn.CANCELLED=1]="CANCELLED",qn[qn.UNKNOWN=2]="UNKNOWN",qn[qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qn[qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qn[qn.NOT_FOUND=5]="NOT_FOUND",qn[qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",qn[qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",qn[qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",qn[qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qn[qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qn[qn.ABORTED=10]="ABORTED",qn[qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",qn[qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",qn[qn.INTERNAL=13]="INTERNAL",qn[qn.UNAVAILABLE=14]="UNAVAILABLE",qn[qn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1n(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1n=new Zb([4294967295,4294967295],0);function p_e(e){const t=s1n().encode(e),n=new oyn;return n.update(t),new Uint8Array(n.digest())}function m_e(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Zb([n,r],0),new Zb([i,s],0)]}class Cre{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new PT(`Invalid padding: ${n}`);if(r<0)throw new PT(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new PT(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new PT(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=Zb.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(Zb.fromNumber(r)));return i.compare(o1n)===1&&(i=new Zb([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=p_e(t),[r,i]=m_e(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Cre(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=p_e(t),[r,i]=m_e(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class PT extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,vO.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new s8(tn.min(),i,new wi(cr),Vp(),On())}}class vO{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new vO(r,n,On(),On(),On())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(t,n,r,i){this.Ve=t,this.removedTargetIds=n,this.key=r,this.me=i}}class XUe{constructor(t,n){this.targetId=t,this.fe=n}}class QUe{constructor(t,n,r=ia.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class g_e{constructor(){this.ge=0,this.pe=v_e(),this.ye=ia.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=On(),n=On(),r=On();return this.pe.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Kt()}}),new vO(this.ye,this.we,t,n,r)}Fe(){this.Se=!1,this.pe=v_e()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,Vr(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class a1n{constructor(t){this.Be=t,this.ke=new Map,this.qe=Vp(),this.Qe=y_e(),this.Ke=new wi(cr)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.Ce(t.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(t.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(t.resumeToken));break;default:Kt()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.fe.count,i=this.Ye(n);if(i){const s=i.target;if(dW(s))if(r===0){const o=new Lt(s.path);this.We(n,o,Uo.newNoDocument(o,tn.min()))}else Vr(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),u=a?this.et(a,t,o):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=mv(r).toUint8Array()}catch(u){if(u instanceof AUe)return yC("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Cre(o,i,s)}catch(u){return yC(u instanceof PT?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.fe.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&dW(a.target)){const u=new Lt(a.target.path);this.qe.get(u)!==null||this.st(o,u)||this.We(o,u,Uo.newNoDocument(u,t))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=On();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(t));const i=new s8(t,n,this.Ke,this.qe,r);return this.qe=Vp(),this.Qe=y_e(),this.Ke=new wi(cr),i}Ue(t,n){if(!this.je(t))return;const r=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.st(t,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new g_e,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new bo(cr),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||st("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Be._t(t)}He(t){this.ke.set(t,new g_e),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function y_e(){return new wi(Lt.comparator)}function v_e(){return new wi(Lt.comparator)}const u1n={asc:"ASCENDING",desc:"DESCENDING"},l1n={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c1n={and:"AND",or:"OR"};class f1n{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function mW(e,t){return e.useProto3Json||e8(t)?t:{value:t}}function hM(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function JUe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function d1n(e,t){return hM(e,t.toTimestamp())}function Dd(e){return Vr(!!e),tn.fromTimestamp(function(n){const r=b0(n);return new xs(r.seconds,r.nanos)}(e))}function Ire(e,t){return gW(e,t).canonicalString()}function gW(e,t){const n=function(i){return new Jr(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function ZUe(e){const t=Jr.fromString(e);return Vr(iVe(t)),t}function yW(e,t){return Ire(e.databaseId,t.path)}function O7(e,t){const n=ZUe(t);if(n.get(1)!==e.databaseId.projectId)throw new lt(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new lt(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Lt(tVe(n))}function eVe(e,t){return Ire(e.databaseId,t)}function h1n(e){const t=ZUe(e);return t.length===4?Jr.emptyPath():tVe(t)}function vW(e){return new Jr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function tVe(e){return Vr(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function __e(e,t,n){return{name:yW(e,t),fields:n.value.mapValue.fields}}function p1n(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Kt()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Vr(c===void 0||typeof c=="string"),ia.fromBase64String(c||"")):(Vr(c===void 0||c instanceof Buffer||c instanceof Uint8Array),ia.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Pe.UNKNOWN:KUe(l.code);return new lt(c,l.message||"")}(o);n=new QUe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=O7(e,r.document.name),s=Dd(r.document.updateTime),o=r.document.createTime?Dd(r.document.createTime):tn.min(),a=new Bl({mapValue:{fields:r.document.fields}}),u=Uo.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new H$(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=O7(e,r.document),s=r.readTime?Dd(r.readTime):tn.min(),o=Uo.newNoDocument(i,s),a=r.removedTargetIds||[];n=new H$([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=O7(e,r.document),s=r.removedTargetIds||[];n=new H$([],s,i,null)}else{if(!("filter"in t))return Kt();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new r1n(i,s),a=r.targetId;n=new XUe(a,o)}}return n}function m1n(e,t){let n;if(t instanceof yO)n={update:__e(e,t.key,t.value)};else if(t instanceof YUe)n={delete:yW(e,t.key)};else if(t instanceof t_)n={update:__e(e,t.key,t.data),updateMask:S1n(t.fieldMask)};else{if(!(t instanceof e1n))return Kt();n={verify:yW(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof xC)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof SC)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof TC)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof dM)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Kt()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:d1n(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Kt()}(e,t.precondition)),n}function g1n(e,t){return e&&e.length>0?(Vr(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Dd(i.updateTime):Dd(s);return o.isEqual(tn.min())&&(o=Dd(s)),new Qyn(o,i.transformResults||[])}(n,t))):[]}function y1n(e,t){return{documents:[eVe(e,t.path)]}}function v1n(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=eVe(e,i);const s=function(l){if(l.length!==0)return rVe(gf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:z_(d.field),direction:w1n(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=mW(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ut:n,parent:i}}function _1n(e){let t=h1n(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Vr(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=nVe(f);return d instanceof gf&&PUe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new EC(U_(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,e8(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new fM(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new fM(h,d)}(n.endAt)),Myn(t,i,o,s,a,"F",u,l)}function b1n(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Kt()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function nVe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=U_(n.unaryFilter.field);return ns.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=U_(n.unaryFilter.field);return ns.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=U_(n.unaryFilter.field);return ns.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=U_(n.unaryFilter.field);return ns.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Kt()}}(e):e.fieldFilter!==void 0?function(n){return ns.create(U_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Kt()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return gf.create(n.compositeFilter.filters.map(r=>nVe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Kt()}}(n.compositeFilter.op))}(e):Kt()}function w1n(e){return u1n[e]}function E1n(e){return l1n[e]}function x1n(e){return c1n[e]}function z_(e){return{fieldPath:e.canonicalString()}}function U_(e){return fo.fromServerFormat(e.fieldPath)}function rVe(e){return e instanceof ns?function(n){if(n.op==="=="){if(s_e(n.value))return{unaryFilter:{field:z_(n.field),op:"IS_NAN"}};if(i_e(n.value))return{unaryFilter:{field:z_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(s_e(n.value))return{unaryFilter:{field:z_(n.field),op:"IS_NOT_NAN"}};if(i_e(n.value))return{unaryFilter:{field:z_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:z_(n.field),op:E1n(n.op),value:n.value}}}(e):e instanceof gf?function(n){const r=n.getFilters().map(i=>rVe(i));return r.length===1?r[0]:{compositeFilter:{op:x1n(n.op),filters:r}}}(e):Kt()}function S1n(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function iVe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,n,r,i,s=tn.min(),o=tn.min(),a=ia.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new lg(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new lg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new lg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new lg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1n{constructor(t){this.ct=t}}function A1n(e){const t=_1n({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?pW(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1n{constructor(){this._n=new I1n}addToCollectionParentIndex(t,n){return this._n.add(n),Ne.resolve()}getCollectionParents(t,n){return Ne.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Ne.resolve()}deleteFieldIndex(t,n){return Ne.resolve()}deleteAllFieldIndexes(t){return Ne.resolve()}createTargetIndexes(t,n){return Ne.resolve()}getDocumentsMatchingTarget(t,n){return Ne.resolve(null)}getIndexType(t,n){return Ne.resolve(0)}getFieldIndexes(t,n){return Ne.resolve([])}getNextCollectionGroupToUpdate(t){return Ne.resolve(null)}getMinOffset(t,n){return Ne.resolve(_0.min())}getMinOffsetFromCollectionGroup(t,n){return Ne.resolve(_0.min())}updateCollectionGroup(t,n,r){return Ne.resolve()}updateIndexEntries(t,n){return Ne.resolve()}}class I1n{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new bo(Jr.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new bo(Jr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new vE(0)}static Ln(){return new vE(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1n{constructor(){this.changes=new Ix(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Uo.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ne.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1n{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1n{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&N2(r.mutation,i,Qc.empty(),xs.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,On()).next(()=>r))}getLocalViewOfDocuments(t,n,r=On()){const i=u1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=OT();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=u1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,On()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Vp();const o=R2(),a=function(){return R2()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof t_)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),N2(c.mutation,l,c.mutation.getFieldMask(),xs.now())):o.set(l.key,Qc.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new P1n(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=R2();let i=new wi((o,a)=>o-a),s=On();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Qc.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||On()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=BUe();c.forEach(d=>{if(!s.has(d)){const h=WUe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Ne.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Lt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):NUe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Ne.resolve(u1());let a=-1,u=s;return o.next(l=>Ne.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Ne.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,On())).next(c=>({batchId:a,changes:FUe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Lt(n)).next(r=>{let i=OT();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=OT();return this.indexManager.getCollectionParents(t,s).next(a=>Ne.forEach(a,u=>{const l=function(f,d){return new Cx(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,Uo.newInvalidDocument(c)))});let a=OT();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&N2(c.mutation,l,Qc.empty(),xs.now()),n8(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1n{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Ne.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Dd(i.createTime)}}(n)),Ne.resolve()}getNamedQuery(t,n){return Ne.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:A1n(i.bundledQuery),readTime:Dd(i.readTime)}}(n)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1n{constructor(){this.overlays=new wi(Lt.comparator),this.hr=new Map}getOverlay(t,n){return Ne.resolve(this.overlays.get(n))}getOverlays(t,n){const r=u1();return Ne.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Ne.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Ne.resolve()}getOverlaysForCollection(t,n,r){const i=u1(),s=n.length+1,o=new Lt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Ne.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new wi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=u1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=u1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Ne.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new n1n(n,r));let s=this.hr.get(n);s===void 0&&(s=On(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ore{constructor(){this.Pr=new bo(Rs.Ir),this.Tr=new bo(Rs.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Rs(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Rs(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Lt(new Jr([])),r=new Rs(n,t),i=new Rs(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Lt(new Jr([])),r=new Rs(n,t),i=new Rs(n,t+1);let s=On();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Rs(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Rs{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Lt.comparator(t.key,n.key)||cr(t.pr,n.pr)}static Er(t,n){return cr(t.pr,n.pr)||Lt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1n{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new bo(Rs.Ir)}checkEmpty(t){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new t1n(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Rs(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Ne.resolve(o)}lookupMutationBatch(t,n){return Ne.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Rs(n,0),i=new Rs(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new bo(cr);return n.forEach(i=>{const s=new Rs(i,0),o=new Rs(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Ne.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Lt.isDocumentKey(s)||(s=s.child(""));const o=new Rs(new Lt(s),0);let a=new bo(cr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Ne.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Vr(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Ne.forEach(n.mutations,i=>{const s=new Rs(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Rs(n,0),i=this.wr.firstAfterOrEqual(r);return Ne.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ne.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1n{constructor(t){this.vr=t,this.docs=function(){return new wi(Lt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Ne.resolve(r?r.document.mutableCopy():Uo.newInvalidDocument(n))}getEntries(t,n){let r=Vp();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Uo.newInvalidDocument(i))}),Ne.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Vp();const o=n.path,a=new Lt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||vyn(yyn(c),r)<=0||(i.has(c.key)||n8(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Ne.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Kt()}Fr(t,n){return Ne.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new L1n(this)}getSize(t){return Ne.resolve(this.size)}}class L1n extends O1n{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Ne.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1n{constructor(t){this.persistence=t,this.Mr=new Ix(n=>xre(n),Sre),this.lastRemoteSnapshotVersion=tn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Ore,this.targetCount=0,this.Lr=vE.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Ne.resolve()}getLastRemoteSnapshotVersion(t){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ne.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Ne.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new vE(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Ne.resolve()}updateTargetData(t,n){return this.qn(n),Ne.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Ne.waitFor(s).next(()=>i)}getTargetCount(t){return Ne.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Ne.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Ne.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Ne.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Ne.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Ne.resolve(r)}containsKey(t,n){return Ne.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1n{constructor(t,n){this.Br={},this.overlays={},this.kr=new _re(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new M1n(this),this.indexManager=new C1n,this.remoteDocumentCache=function(i){return new D1n(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new T1n(n),this.$r=new $1n(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new R1n,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new N1n(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){st("MemoryPersistence","Starting transaction:",t);const i=new B1n(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Ne.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class B1n extends byn{constructor(t){super(),this.currentSequenceNumber=t}}class Pre{constructor(t){this.persistence=t,this.zr=new Ore,this.jr=null}static Hr(t){return new Pre(t)}get Jr(){if(this.jr)return this.jr;throw Kt()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Ne.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Ne.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Ne.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.Jr,r=>{const i=Lt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,tn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Ne.or([()=>Ne.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kre{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=On(),i=On();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new kre(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1n{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1n{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return wpn()?8:a1.v(as())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new j1n;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(BS()<=Fn.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",j_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ne.resolve()):(BS()<=Fn.DEBUG&&st("QueryEngine","Query:",j_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(BS()<=Fn.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",j_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Nd(n))):Ne.resolve())}ji(t,n){if(l_e(n))return Ne.resolve(null);let r=Nd(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=pW(n,null,"F"),r=Nd(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=On(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,pW(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return l_e(n)||i.isEqual(tn.min())?Ne.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Ne.resolve(null):(BS()<=Fn.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),j_(n)),this.es(t,o,n,gyn(i,-1)).next(a=>a))})}Zi(t,n){let r=new bo(LUe(t));return n.forEach((i,s)=>{n8(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return BS()<=Fn.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",j_(n)),this.zi.getDocumentsMatchingQuery(t,n,_0.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1n{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new wi(cr),this.rs=new Ix(s=>xre(s),Sre),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new k1n(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function V1n(e,t,n,r){return new U1n(e,t,n,r)}async function sVe(e,t){const n=nn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=On();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function H1n(e,t){const n=nn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Ne.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Vr(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=On();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function oVe(e){const t=nn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function q1n(e,t){const n=nn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(ia.EMPTY_BYTE_STRING,tn.min()).withLastLimboFreeSnapshotVersion(tn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Vp(),l=On();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(W1n(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(tn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Ne.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function W1n(e,t,n){let r=On(),i=On();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Vp();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(tn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):st("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function G1n(e,t){const n=nn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Y1n(e,t){const n=nn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Ne.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new lg(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function _W(e,t,n){const r=nn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!gO(o))throw o;st("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function b_e(e,t,n){const r=nn(e);let i=tn.min(),s=On();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=nn(u),d=f.rs.get(c);return d!==void 0?Ne.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,Nd(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:tn.min(),n?s:On())).next(a=>(K1n(r,Byn(t),a),{documents:a,hs:s})))}function K1n(e,t,n){let r=e.ss.get(t)||tn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class w_e{constructor(){this.activeTargetIds=qyn()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class X1n{constructor(){this.no=new w_e,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new w_e,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1n{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_e{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){st("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){st("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xk=null;function P7(){return xk===null?xk=function(){return 268435456+Math.round(2147483648*Math.random())}():xk++,"0x"+xk.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1n={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1n{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="WebChannelConnection";class evn extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=P7(),u=this.bo(n,r.toUriEncodedString());st("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,s,o),this.Co(n,u,l,i).then(c=>(st("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw yC("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Tx}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){const i=J1n[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,n,r,i){const s=P7();return new Promise((o,a)=>{const u=new syn;u.setWithCredentials(!0),u.listenOnce(ryn.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case I7.NO_ERROR:const c=u.getResponseJson();st(Ro,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case I7.TIMEOUT:st(Ro,`RPC '${t}' ${s} timed out`),a(new lt(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case I7.HTTP_ERROR:const f=u.getStatus();if(st(Ro,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(y)>=0?y:Pe.UNKNOWN}(h.status);a(new lt(p,h.message))}else a(new lt(Pe.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new lt(Pe.UNAVAILABLE,"Connection failed."));break;default:Kt()}}finally{st(Ro,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);st(Ro,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Fo(t,n,r){const i=P7(),s=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=tyn(),a=nyn(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");st(Ro,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new Z1n({lo:g=>{h?st(Ro,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(st(Ro,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),st(Ro,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,_=>{try{v(_)}catch(b){setTimeout(()=>{throw b},0)}})};return m(f,bk.EventType.OPEN,()=>{h||st(Ro,`RPC '${t}' stream ${i} transport opened.`)}),m(f,bk.EventType.CLOSE,()=>{h||(h=!0,st(Ro,`RPC '${t}' stream ${i} transport closed`),p.Vo())}),m(f,bk.EventType.ERROR,g=>{h||(h=!0,yC(Ro,`RPC '${t}' stream ${i} transport errored:`,g),p.Vo(new lt(Pe.UNAVAILABLE,"The operation could not be completed")))}),m(f,bk.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];Vr(!!v);const _=v,b=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(b){st(Ro,`RPC '${t}' stream ${i} received error:`,b);const E=b.status;let w=function(I){const C=Ki[I];if(C!==void 0)return KUe(C)}(E),x=b.message;w===void 0&&(w=Pe.INTERNAL,x="Unknown error status: "+E+" with message "+b.message),h=!0,p.Vo(new lt(w,x)),f.close()}else st(Ro,`RPC '${t}' stream ${i} received:`,v),p.mo(v)}}),m(a,iyn.STAT_EVENT,g=>{g.stat===Qve.PROXY?st(Ro,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===Qve.NOPROXY&&st(Ro,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}function k7(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(e){return new f1n(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aVe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&st("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uVe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new aVe(t,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():n&&n.code===Pe.RESOURCE_EXHAUSTED?(th(n.toString()),th("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===Pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(n)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{t(()=>{const i=new lt(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(t,n){const r=this.s_(this.Wo);this.stream=this.a_(t,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(t){return st("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return n=>{this.oi.enqueueAndForget(()=>this.Wo===t?n():(st("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tvn extends uVe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(t,n){return this.connection.Fo("Listen",t,n)}onMessage(t){this.jo.reset();const n=p1n(this.serializer,t),r=function(s){if(!("targetChange"in s))return tn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?tn.min():o.readTime?Dd(o.readTime):tn.min()}(t);return this.listener.u_(n,r)}c_(t){const n={};n.database=vW(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=dW(u)?{documents:y1n(s,u)}:{query:v1n(s,u).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=JUe(s,o.resumeToken);const l=mW(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(tn.min())>0){a.readTime=hM(s,o.snapshotVersion.toTimestamp());const l=mW(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=b1n(this.serializer,t);r&&(n.labels=r),this.t_(n)}l_(t){const n={};n.database=vW(this.serializer),n.removeTarget=t,this.t_(n)}}class nvn extends uVe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,n){return this.connection.Fo("Write",t,n)}onMessage(t){if(Vr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const n=g1n(t.writeResults,t.commitTime),r=Dd(t.commitTime);return this.listener.T_(r,n)}return Vr(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=vW(this.serializer),this.t_(t)}I_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>m1n(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rvn extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new lt(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(t,gW(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new lt(Pe.UNKNOWN,s.toString())})}vo(t,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(t,gW(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new lt(Pe.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class ivn{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(th(n),this.g_=!1):st("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class svn{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(async()=>{n_(this)&&(st("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=nn(u);l.v_.add(4),await bO(l),l.x_.set("Unknown"),l.v_.delete(4),await _O(l)}(this))})}),this.x_=new ivn(r,i)}}async function _O(e){if(n_(e))for(const t of e.F_)await t(!0)}async function bO(e){for(const t of e.F_)await t(!1)}function lVe(e,t){const n=nn(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Dre(n)?Nre(n):Ox(n).Jo()&&Rre(n,t))}function $re(e,t){const n=nn(e),r=Ox(n);n.C_.delete(t),r.Jo()&&cVe(n,t),n.C_.size===0&&(r.Jo()?r.Xo():n_(n)&&n.x_.set("Unknown"))}function Rre(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(tn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ox(e).c_(t)}function cVe(e,t){e.O_.Oe(t),Ox(e).l_(t)}function Nre(e){e.O_=new a1n({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Ox(e).start(),e.x_.p_()}function Dre(e){return n_(e)&&!Ox(e).Ho()&&e.C_.size>0}function n_(e){return nn(e).v_.size===0}function fVe(e){e.O_=void 0}async function ovn(e){e.C_.forEach((t,n)=>{Rre(e,t)})}async function avn(e,t){fVe(e),Dre(e)?(e.x_.S_(t),Nre(e)):e.x_.set("Unknown")}async function uvn(e,t,n){if(e.x_.set("Online"),t instanceof QUe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(e,t)}catch(r){st("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await pM(e,r)}else if(t instanceof H$?e.O_.$e(t):t instanceof XUe?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(tn.min()))try{const r=await oVe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.C_.get(l);c&&s.C_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.C_.get(u);if(!c)return;s.C_.set(u,c.withResumeToken(ia.EMPTY_BYTE_STRING,c.snapshotVersion)),cVe(s,u);const f=new lg(c.target,u,l,c.sequenceNumber);Rre(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){st("RemoteStore","Failed to raise snapshot:",r),await pM(e,r)}}async function pM(e,t,n){if(!gO(t))throw t;e.v_.add(1),await bO(e),e.x_.set("Offline"),n||(n=()=>oVe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{st("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await _O(e)})}function dVe(e,t){return t().catch(n=>pM(e,n,t))}async function a8(e){const t=nn(e),n=w0(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;lvn(t);)try{const i=await G1n(t.localStore,r);if(i===null){t.D_.length===0&&n.Xo();break}r=i.batchId,cvn(t,i)}catch(i){await pM(t,i)}hVe(t)&&pVe(t)}function lvn(e){return n_(e)&&e.D_.length<10}function cvn(e,t){e.D_.push(t);const n=w0(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function hVe(e){return n_(e)&&!w0(e).Ho()&&e.D_.length>0}function pVe(e){w0(e).start()}async function fvn(e){w0(e).d_()}async function dvn(e){const t=w0(e);for(const n of e.D_)t.I_(n.mutations)}async function hvn(e,t,n){const r=e.D_.shift(),i=Are.from(r,t,n);await dVe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await a8(e)}async function pvn(e,t){t&&w0(e).P_&&await async function(r,i){if(function(o){return i1n(o)&&o!==Pe.ABORTED}(i.code)){const s=r.D_.shift();w0(r).Zo(),await dVe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await a8(r)}}(e,t),hVe(e)&&pVe(e)}async function x_e(e,t){const n=nn(e);n.asyncQueue.verifyOperationInProgress(),st("RemoteStore","RemoteStore received new credentials");const r=n_(n);n.v_.add(3),await bO(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await _O(n)}async function mvn(e,t){const n=nn(e);t?(n.v_.delete(2),await _O(n)):t||(n.v_.add(2),await bO(n),n.x_.set("Unknown"))}function Ox(e){return e.N_||(e.N_=function(n,r,i){const s=nn(n);return s.R_(),new tvn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:ovn.bind(null,e),To:avn.bind(null,e),u_:uvn.bind(null,e)}),e.F_.push(async t=>{t?(e.N_.Zo(),Dre(e)?Nre(e):e.x_.set("Unknown")):(await e.N_.stop(),fVe(e))})),e.N_}function w0(e){return e.L_||(e.L_=function(n,r,i){const s=nn(n);return s.R_(),new nvn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:fvn.bind(null,e),To:pvn.bind(null,e),E_:dvn.bind(null,e),T_:hvn.bind(null,e)}),e.F_.push(async t=>{t?(e.L_.Zo(),await a8(e)):(await e.L_.stop(),e.D_.length>0&&(st("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))})),e.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lre{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Rd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new Lre(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(Pe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mre(e,t){if(th("AsyncQueue",`${t}: ${e}`),gO(e))return new lt(Pe.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Lt.comparator(n.key,r.key):(n,r)=>Lt.comparator(n.key,r.key),this.keyedMap=OT(),this.sortedSet=new wi(this.comparator)}static emptySet(t){return new ew(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof ew)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new ew;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_e{constructor(){this.B_=new wi(Lt.comparator)}track(t){const n=t.doc.key,r=this.B_.get(n);r?t.type!==0&&r.type===3?this.B_=this.B_.insert(n,t):t.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.B_=this.B_.remove(n):t.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):Kt():this.B_=this.B_.insert(n,t)}k_(){const t=[];return this.B_.inorderTraversal((n,r)=>{t.push(r)}),t}}class _E{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new _E(t,n,ew.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&t8(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gvn{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(t=>t.U_())}}class yvn{constructor(){this.queries=new Ix(t=>DUe(t),t8),this.onlineState="Unknown",this.W_=new Set}}async function mVe(e,t){const n=nn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.K_()&&t.U_()&&(r=2):(s=new gvn,r=t.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Mre(o,`Initialization of query '${j_(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.Q_.push(t),t.G_(n.onlineState),s.q_&&t.z_(s.q_)&&Fre(n)}async function gVe(e,t){const n=nn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Q_.indexOf(t);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=t.U_()?0:1:!s.K_()&&t.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vvn(e,t){const n=nn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&Fre(n)}function _vn(e,t,n){const r=nn(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function Fre(e){e.W_.forEach(t=>{t.next()})}var bW,T_e;(T_e=bW||(bW={})).j_="default",T_e.Cache="cache";class yVe{constructor(t,n,r){this.query=t,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new _E(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.J_?this.Z_(t)&&(this.H_.next(t),n=!0):this.X_(t,this.onlineState)&&(this.ea(t),n=!0),this.Y_=t,n}onError(t){this.H_.error(t)}G_(t){this.onlineState=t;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,t)&&(this.ea(this.Y_),n=!0),n}X_(t,n){if(!t.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Z_(t){if(t.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(t){t=_E.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.J_=!0,this.H_.next(t)}U_(){return this.options.source!==bW.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vVe{constructor(t){this.key=t}}class _Ve{constructor(t){this.key=t}}class bvn{constructor(t,n){this.query=t,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=On(),this.mutatedKeys=On(),this.ha=LUe(t),this.Pa=new ew(this.ha)}get Ia(){return this.ua}Ta(t,n){const r=n?n.Ea:new S_e,i=n?n.Pa:this.Pa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=n8(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.da(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.ha(h,u)>0||l&&this.ha(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Pa;this.Pa=t.Pa,this.mutatedKeys=t.mutatedKeys;const o=t.Ea.k_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Kt()}};return m(h)-m(p)}(c.type,f.type)||this.ha(c.doc,f.doc)),this.Aa(r),i=i!=null&&i;const a=n&&!i?this.Ra():[],u=this.la.size===0&&this.current&&!i?1:0,l=u!==this.ca;return this.ca=u,o.length!==0||l?{snapshot:new _E(this.query,t.Pa,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new S_e,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(t){return!this.ua.has(t)&&!!this.Pa.has(t)&&!this.Pa.get(t).hasLocalMutations}Aa(t){t&&(t.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=t.current)}Ra(){if(!this.current)return[];const t=this.la;this.la=On(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return t.forEach(r=>{this.la.has(r)||n.push(new _Ve(r))}),this.la.forEach(r=>{t.has(r)||n.push(new vVe(r))}),n}fa(t){this.ua=t.hs,this.la=On();const n=this.Ta(t.documents);return this.applyChanges(n,!0)}ga(){return _E.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class wvn{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Evn{constructor(t){this.key=t,this.pa=!1}}class xvn{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Ix(a=>DUe(a),t8),this.Sa=new Map,this.ba=new Set,this.Da=new wi(Lt.comparator),this.Ca=new Map,this.va=new Ore,this.Fa={},this.Ma=new Map,this.xa=vE.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function Svn(e,t,n=!0){const r=TVe(e);let i;const s=r.wa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await bVe(r,t,n,!0),i}async function Tvn(e,t){const n=TVe(e);await bVe(n,t,!0,!1)}async function bVe(e,t,n,r){const i=await Y1n(e.localStore,Nd(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await Avn(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&lVe(e.remoteStore,i),a}async function Avn(e,t,n,r,i){e.Na=(f,d,h)=>async function(m,g,y,v){let _=g.view.Ta(y);_.Xi&&(_=await b_e(m.localStore,g.query,!1).then(({documents:x})=>g.view.Ta(x,_)));const b=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,w=g.view.applyChanges(_,m.isPrimaryClient,b,E);return C_e(m,g.targetId,w.Va),w.snapshot}(e,f,d,h);const s=await b_e(e.localStore,t,!0),o=new bvn(t,s.hs),a=o.Ta(s.documents),u=vO.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);C_e(e,n,l.Va);const c=new wvn(t,n,o);return e.wa.set(t,c),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),l.snapshot}async function Cvn(e,t,n){const r=nn(e),i=r.wa.get(t),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!t8(o,t))),void r.wa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _W(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&$re(r.remoteStore,i.targetId),wW(r,i.targetId)}).catch(mO)):(wW(r,i.targetId),await _W(r.localStore,i.targetId,!0))}async function Ivn(e,t){const n=nn(e),r=n.wa.get(t),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$re(n.remoteStore,r.targetId))}async function Ovn(e,t,n){const r=Lvn(e);try{const i=await function(o,a){const u=nn(o),l=xs.now(),c=a.reduce((h,p)=>h.add(p.key),On());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Vp(),m=On();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const _=Zyn(v,f.get(v.key).overlayedDocument);_!=null&&y.push(new t_(v.key,_,CUe(_.value.mapValue),_p.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:FUe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Fa[o.currentUser.toKey()];l||(l=new wi(cr)),l=l.insert(a,u),o.Fa[o.currentUser.toKey()]=l}(r,i.batchId,n),await wO(r,i.changes),await a8(r.remoteStore)}catch(i){const s=Mre(i,"Failed to persist write");n.reject(s)}}async function wVe(e,t){const n=nn(e);try{const r=await q1n(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Ca.get(s);o&&(Vr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?Vr(o.pa):i.removedDocuments.size>0&&(Vr(o.pa),o.pa=!1))}),await wO(n,r,t)}catch(r){await mO(r)}}function A_e(e,t,n){const r=nn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wa.forEach((s,o)=>{const a=o.view.G_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=nn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.Q_)d.G_(a)&&(l=!0)}),l&&Fre(u)}(r.eventManager,t),i.length&&r.ya.u_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Pvn(e,t,n){const r=nn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ca.get(t),s=i&&i.key;if(s){let o=new wi(Lt.comparator);o=o.insert(s,Uo.newNoDocument(s,tn.min()));const a=On().add(s),u=new s8(tn.min(),new Map,new wi(cr),o,a);await wVe(r,u),r.Da=r.Da.remove(s),r.Ca.delete(t),Bre(r)}else await _W(r.localStore,t,!1).then(()=>wW(r,t,n)).catch(mO)}async function kvn(e,t){const n=nn(e),r=t.batch.batchId;try{const i=await H1n(n.localStore,t);xVe(n,r,null),EVe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wO(n,i)}catch(i){await mO(i)}}async function $vn(e,t,n){const r=nn(e);try{const i=await function(o,a){const u=nn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Vr(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);xVe(r,t,n),EVe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await wO(r,i)}catch(i){await mO(i)}}function EVe(e,t){(e.Ma.get(t)||[]).forEach(n=>{n.resolve()}),e.Ma.delete(t)}function xVe(e,t,n){const r=nn(e);let i=r.Fa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.Fa[r.currentUser.toKey()]=i}}function wW(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Sa.get(t))e.wa.delete(r),n&&e.ya.La(r,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach(r=>{e.va.containsKey(r)||SVe(e,r)})}function SVe(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);n!==null&&($re(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),Bre(e))}function C_e(e,t,n){for(const r of n)r instanceof vVe?(e.va.addReference(r.key,t),Rvn(e,r)):r instanceof _Ve?(st("SyncEngine","Document no longer in limbo: "+r.key),e.va.removeReference(r.key,t),e.va.containsKey(r.key)||SVe(e,r.key)):Kt()}function Rvn(e,t){const n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(st("SyncEngine","New document in limbo: "+n),e.ba.add(r),Bre(e))}function Bre(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new Lt(Jr.fromString(t)),r=e.xa.next();e.Ca.set(r,new Evn(n)),e.Da=e.Da.insert(n,r),lVe(e.remoteStore,new lg(Nd(Tre(n.path)),r,"TargetPurposeLimboResolution",_re._e))}}async function wO(e,t,n){const r=nn(e),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,u)=>{o.push(r.Na(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l!=null&&l.fromCache?"not-current":"current"),l){i.push(l);const c=kre.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.ya.u_(i),await async function(u,l){const c=nn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ne.forEach(l,d=>Ne.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Ne.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!gO(f))throw f;st("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function Nvn(e,t){const n=nn(e);if(!n.currentUser.isEqual(t)){st("SyncEngine","User change. New user:",t.toKey());const r=await sVe(n.localStore,t);n.currentUser=t,function(s,o){s.Ma.forEach(a=>{a.forEach(u=>{u.reject(new lt(Pe.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await wO(n,r.us)}}function Dvn(e,t){const n=nn(e),r=n.Ca.get(t);if(r&&r.pa)return On().add(r.key);{let i=On();const s=n.Sa.get(t);if(!s)return i;for(const o of s){const a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function TVe(e){const t=nn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wVe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dvn.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Pvn.bind(null,t),t.ya.u_=vvn.bind(null,t.eventManager),t.ya.La=_vn.bind(null,t.eventManager),t}function Lvn(e){const t=nn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kvn.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$vn.bind(null,t),t}class I_e{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=o8(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return V1n(this.persistence,new z1n,t.initialUser,this.serializer)}createPersistence(t){return new F1n(Pre.Hr,this.serializer)}createSharedClientState(t){return new X1n}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Mvn{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>A_e(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Nvn.bind(null,this.syncEngine),await mvn(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new yvn}()}createDatastore(t){const n=o8(t.databaseInfo.databaseId),r=function(s){return new evn(s)}(t.databaseInfo);return function(s,o,a,u){return new rvn(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new svn(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>A_e(this.syncEngine,n,0),function(){return E_e.D()?new E_e:new Q1n}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new xvn(i,s,o,a,u,l);return c&&(f.Oa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=nn(r);st("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await bO(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AVe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.qa(this.observer.next,t)}error(t){this.observer.error?this.qa(this.observer.error,t):th("Uncaught Error in snapshot listener:",t.toString())}Qa(){this.muted=!0}qa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fvn{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qa.UNAUTHENTICATED,this.clientId=SUe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{st("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(st("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new lt(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Rd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Mre(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function $7(e,t){e.asyncQueue.verifyOperationInProgress(),st("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await sVe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function O_e(e,t){e.asyncQueue.verifyOperationInProgress();const n=await CVe(e);st("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>x_e(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>x_e(t.remoteStore,i)),e._onlineComponents=t}function Bvn(e){return e.name==="FirebaseError"?e.code===Pe.FAILED_PRECONDITION||e.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function CVe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){st("FirestoreClient","Using user provided OfflineComponentProvider");try{await $7(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Bvn(n))throw n;yC("Error using user provided cache. Falling back to memory cache: "+n),await $7(e,new I_e)}}else st("FirestoreClient","Using default OfflineComponentProvider"),await $7(e,new I_e);return e._offlineComponents}async function jre(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(st("FirestoreClient","Using user provided OnlineComponentProvider"),await O_e(e,e._uninitializedComponentsProvider._online)):(st("FirestoreClient","Using default OnlineComponentProvider"),await O_e(e,new Mvn))),e._onlineComponents}function jvn(e){return CVe(e).then(t=>t.persistence)}function zvn(e){return jre(e).then(t=>t.remoteStore)}function Uvn(e){return jre(e).then(t=>t.syncEngine)}async function IVe(e){const t=await jre(e),n=t.eventManager;return n.onListen=Svn.bind(null,t.syncEngine),n.onUnlisten=Cvn.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Tvn.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Ivn.bind(null,t.syncEngine),n}function Vvn(e){return e.asyncQueue.enqueue(async()=>{const t=await jvn(e),n=await zvn(e);return t.setNetworkEnabled(!0),function(i){const s=nn(i);return s.v_.delete(0),_O(s)}(n)})}function Hvn(e,t,n={}){const r=new Rd;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new AVe({next:d=>{o.enqueueAndForget(()=>gVe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new lt(Pe.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new lt(Pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new yVe(Tre(a.path),c,{includeMetadataChanges:!0,ta:!0});return mVe(s,f)}(await IVe(e),e.asyncQueue,t,n,r)),r.promise}function qvn(e,t,n={}){const r=new Rd;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new AVe({next:d=>{o.enqueueAndForget(()=>gVe(s,f)),d.fromCache&&u.source==="server"?l.reject(new lt(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new yVe(a,c,{includeMetadataChanges:!0,ta:!0});return mVe(s,f)}(await IVe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OVe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_e=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PVe(e,t,n){if(!n)throw new lt(Pe.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Wvn(e,t,n,r){if(t===!0&&r===!0)throw new lt(Pe.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function k_e(e){if(!Lt.isDocumentKey(e))throw new lt(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function $_e(e){if(Lt.isDocumentKey(e))throw new lt(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function u8(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Kt()}function yv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new lt(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=u8(e);throw new lt(Pe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_e{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new lt(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new lt(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Wvn("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OVe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new lt(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new lt(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new lt(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class zre{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R_e({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new lt(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new lt(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R_e(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uyn;switch(r.type){case"firstParty":return new fyn(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new lt(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=P_e.get(n);r&&(st("ComponentProvider","Removing Datastore"),P_e.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new r_(this.firestore,t,this._query)}}class hu{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lg(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new hu(this.firestore,t,this._key)}}class Lg extends r_{constructor(t,n,r){super(t,n,Tre(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new hu(this.firestore,null,new Lt(t))}withConverter(t){return new Lg(this.firestore,t,this._path)}}function R7(e,t,...n){if(e=xo(e),PVe("collection","path",t),e instanceof zre){const r=Jr.fromString(t,...n);return $_e(r),new Lg(e,null,r)}{if(!(e instanceof hu||e instanceof Lg))throw new lt(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Jr.fromString(t,...n));return $_e(r),new Lg(e.firestore,null,r)}}function Lf(e,t,...n){if(e=xo(e),arguments.length===1&&(t=SUe.newId()),PVe("doc","path",t),e instanceof zre){const r=Jr.fromString(t,...n);return k_e(r),new hu(e,null,new Lt(r))}{if(!(e instanceof hu||e instanceof Lg))throw new lt(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Jr.fromString(t,...n));return k_e(r),new hu(e.firestore,e instanceof Lg?e.converter:null,new Lt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gvn{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new aVe(this,"async_queue_retry"),this.cu=()=>{const n=k7();n&&st("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const t=k7();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.lu(),this.hu(t)}enterRestrictedMode(t){if(!this.iu){this.iu=!0,this.au=t||!1;const n=k7();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(t){if(this.lu(),this.iu)return new Promise(()=>{});const n=new Rd;return this.hu(()=>this.iu&&this.au?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.ru.push(t),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(t){if(!gO(t))throw t;st("AsyncQueue","Operation failed with retryable error: "+t)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(t){const n=this.nu.then(()=>(this._u=!0,t().catch(r=>{this.ou=r,this._u=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw th("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(t,n,r){this.lu(),this.uu.indexOf(t)>-1&&(n=0);const i=Lre.createAndSchedule(this,t,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&Kt()}verifyOperationInProgress(){}async Tu(){let t;do t=this.nu,await t;while(t!==this.nu)}Eu(t){for(const n of this.su)if(n.timerId===t)return!0;return!1}du(t){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tu()})}Au(t){this.uu.push(t)}Iu(t){const n=this.su.indexOf(t);this.su.splice(n,1)}}class EO extends zre{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new Gvn}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||kVe(this),this._firestoreClient.terminate()}}function Yvn(e,t,n){n||(n="(default)");const r=Ex(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(aC(s,t))return i;throw new lt(Pe.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new lt(Pe.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new lt(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function l8(e){return e._firestoreClient||kVe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function kVe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new Tyn(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,OVe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Fvn(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Kvn(e){return Vvn(l8(e=yv(e,EO)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new bE(ia.fromBase64String(t))}catch(n){throw new lt(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new bE(ia.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ure{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new lt(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vre{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hre{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new lt(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new lt(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return cr(this._lat,t._lat)||cr(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xvn=/^__.*__$/;class Qvn{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new t_(t,this.data,this.fieldMask,n,this.fieldTransforms):new yO(t,this.data,n,this.fieldTransforms)}}function $Ve(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Kt()}}class qre{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(t){return new qre(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.mu({path:r,gu:!1});return i.pu(t),i}yu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(t){return this.mu({path:void 0,gu:!0})}Su(t){return mM(t,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let t=0;t<this.path.length;t++)this.pu(this.path.get(t))}pu(t){if(t.length===0)throw this.Su("Document fields must not be empty");if($Ve(this.Vu)&&Xvn.test(t))throw this.Su('Document fields cannot begin and end with "__"')}}class Jvn{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||o8(t)}Cu(t,n,r,i=!1){return new qre({Vu:t,methodName:n,Du:r,path:fo.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function RVe(e){const t=e._freezeSettings(),n=o8(e._databaseId);return new Jvn(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Zvn(e,t,n,r,i,s={}){const o=e.Cu(s.merge||s.mergeFields?2:0,t,n,i);LVe("Data must be an object, but it was:",o,r);const a=NVe(r,o);let u,l;if(s.merge)u=new Qc(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=t_n(t,f,n);if(!o.contains(d))throw new lt(Pe.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);r_n(c,d)||c.push(d)}u=new Qc(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new Qvn(new Bl(a),u,l)}class Wre extends Vre{_toFieldTransform(t){return new Kyn(t.path,new xC)}isEqual(t){return t instanceof Wre}}function e_n(e,t,n,r=!1){return Gre(n,e.Cu(r?4:3,t))}function Gre(e,t){if(DVe(e=xo(e)))return LVe("Unsupported field value:",t,e),NVe(e,t);if(e instanceof Vre)return function(r,i){if(!$Ve(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&t.Vu!==4)throw t.Su("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Gre(a,i.wu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=xo(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Wyn(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=xs.fromDate(r);return{timestampValue:hM(i.serializer,s)}}if(r instanceof xs){const s=new xs(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hM(i.serializer,s)}}if(r instanceof Hre)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bE)return{bytesValue:JUe(i.serializer,r._byteString)};if(r instanceof hu){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ire(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${u8(r)}`)}(e,t)}function NVe(e,t){const n={};return TUe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ax(e,(r,i)=>{const s=Gre(i,t.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function DVe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof xs||e instanceof Hre||e instanceof bE||e instanceof hu||e instanceof Vre)}function LVe(e,t,n){if(!DVe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=u8(n);throw r==="an object"?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function t_n(e,t,n){if((t=xo(t))instanceof Ure)return t._internalPath;if(typeof t=="string")return MVe(e,t);throw mM("Field path arguments must be of type string or ",e,!1,void 0,n)}const n_n=new RegExp("[~\\*/\\[\\]]");function MVe(e,t,n){if(t.search(n_n)>=0)throw mM(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ure(...t.split("."))._internalPath}catch{throw mM(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function mM(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new lt(Pe.INVALID_ARGUMENT,a+e+u)}function r_n(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FVe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new hu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new i_n(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Yre("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class i_n extends FVe{data(){return super.data()}}function Yre(e,t){return typeof t=="string"?MVe(e,t):t instanceof Ure?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_n(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new lt(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kre{}class BVe extends Kre{}function o_n(e,t,...n){let r=[];t instanceof Kre&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Qre).length,a=s.filter(u=>u instanceof Xre).length;if(o>1||o>0&&a>0)throw new lt(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class Xre extends BVe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Xre(t,n,r)}_apply(t){const n=this._parse(t);return jVe(t._query,n),new r_(t.firestore,t.converter,hW(t._query,n))}_parse(t){const n=RVe(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new lt(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){D_e(f,c);const h=[];for(const p of f)h.push(N_e(u,s,p));d={arrayValue:{values:h}}}else d=N_e(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||D_e(f,c),d=e_n(a,o,f,c==="in"||c==="not-in");return ns.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}class Qre extends Kre{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Qre(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)jVe(o,u),o=hW(o,u)}(t._query,n),new r_(t.firestore,t.converter,hW(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jre extends BVe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Jre(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new lt(Pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new lt(Pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new EC(s,o)}(t._query,this._field,this._direction);return new r_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Cx(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function a_n(e,t="asc"){const n=t,r=Yre("orderBy",e);return Jre._create(r,n)}function N_e(e,t,n){if(typeof(n=xo(n))=="string"){if(n==="")throw new lt(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NUe(t)&&n.indexOf("/")!==-1)throw new lt(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Jr.fromString(n));if(!Lt.isDocumentKey(r))throw new lt(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return r_e(e,new Lt(r))}if(n instanceof hu)return r_e(e,n._key);throw new lt(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${u8(n)}.`)}function D_e(e,t){if(!Array.isArray(e)||e.length===0)throw new lt(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function jVe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new lt(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new lt(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class u_n{convertValue(t,n="none"){switch(gv(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ji(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(mv(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Kt()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Ax(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new Hre(Ji(t.latitude),Ji(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=wre(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_C(t));default:return null}}convertTimestamp(t){const n=b0(t);return new xs(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Jr.fromString(t);Vr(iVe(r));const i=new bC(r.get(1),r.get(3)),s=new Lt(r.popFirst(5));return i.isEqual(n)||th(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_n(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class zVe extends FVe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new q$(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Yre("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class q$ extends zVe{data(t={}){return super.data(t)}}class c_n{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new kT(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new q$(this._firestore,this._userDataWriter,r.key,r,new kT(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new lt(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new q$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new kT(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new q$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new kT(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:f_n(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function f_n(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Kt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(e){e=yv(e,hu);const t=yv(e.firestore,EO);return Hvn(l8(t),e._key).then(n=>h_n(t,e,n))}class UVe extends u_n{constructor(t){super(),this.firestore=t}convertBytes(t){return new bE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new hu(this.firestore,null,n)}}function L_e(e){e=yv(e,r_);const t=yv(e.firestore,EO),n=l8(t),r=new UVe(t);return s_n(e._query),qvn(n,e._query).then(i=>new c_n(t,r,e,i))}function jS(e,t,n){e=yv(e,hu);const r=yv(e.firestore,EO),i=l_n(e.converter,t,n);return d_n(r,[Zvn(RVe(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,_p.none())])}function d_n(e,t){return function(r,i){const s=new Rd;return r.asyncQueue.enqueueAndForget(async()=>Ovn(await Uvn(r),i,s)),s.promise}(l8(e),t)}function h_n(e,t,n){const r=n.docs.get(t._key),i=new UVe(e);return new zVe(e,i,t._key,r,new kT(n.hasPendingWrites,n.fromCache),t.converter)}function p_n(){return new Wre("serverTimestamp")}(function(t,n=!0){(function(i){Tx=i})(Zv),zp(new eh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new EO(new lyn(r.getProvider("auth-internal")),new hyn(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new lt(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bC(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),of(Jve,"4.6.0",t),of(Jve,"4.6.0","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EW=new Map,VVe={activated:!1,tokenObservers:[]},m_n={initialized:!1,enabled:!1};function Ss(e){return EW.get(e)||Object.assign({},VVe)}function g_n(e,t){return EW.set(e,t),EW.get(e)}function c8(){return m_n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HVe="https://content-firebaseappcheck.googleapis.com/v1",y_n="exchangeRecaptchaV3Token",v_n="exchangeDebugToken",M_e={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},__n=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_n{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new oC,this.pending.promise.catch(n=>{}),await w_n(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new oC,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function w_n(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_n={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ou=new wx("appCheck","AppCheck",E_n);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_e(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Zre(e){if(!Ss(e).activated)throw ou.create("use-before-activation",{appName:e.name})}function qVe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=Tk(n)+"d:"),r&&(o+=Tk(r)+"h:"),o+=Tk(i)+"m:"+Tk(s)+"s",o}function Tk(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eie({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw ou.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw ou.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw ou.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ou.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function x_n(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${HVe}/projects/${n}/apps/${r}:${y_n}?key=${i}`,body:{recaptcha_v3_token:t}}}function WVe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${HVe}/projects/${n}/apps/${r}:${v_n}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_n="firebase-app-check-database",T_n=1,AC="firebase-app-check-store",GVe="debug-token";let Ak=null;function YVe(){return Ak||(Ak=new Promise((e,t)=>{try{const n=indexedDB.open(S_n,T_n);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(ou.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(AC,{keyPath:"compositeKey"})}}}catch(n){t(ou.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Ak)}function A_n(e){return XVe(QVe(e))}function C_n(e,t){return KVe(QVe(e),t)}function I_n(e){return KVe(GVe,e)}function O_n(){return XVe(GVe)}async function KVe(e,t){const r=(await YVe()).transaction(AC,"readwrite"),s=r.objectStore(AC).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(ou.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function XVe(e){const n=(await YVe()).transaction(AC,"readonly"),i=n.objectStore(AC).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(ou.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function QVe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=new M5("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P_n(e){if(L5()){let t;try{t=await A_n(e)}catch(n){CC.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function N7(e,t){return L5()?C_n(e,t).catch(n=>{CC.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function k_n(){let e;try{e=await O_n()}catch{}if(e)return e;{const t=Ppn();return I_n(t).catch(n=>CC.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tie(){return c8().enabled}async function nie(){const e=c8();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function $_n(){const e=K7e(),t=c8();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new oC;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(k_n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_n={error:"UNKNOWN_ERROR"};function N_n(e){return jne.encodeString(JSON.stringify(e),!1)}async function xW(e,t=!1){const n=e.app;Zre(n);const r=Ss(n);let i=r.token,s;if(i&&!gb(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(gb(u)?i=u:await N7(n,void 0))}if(!t&&i&&gb(i))return{token:i.token};let o=!1;if(tie()){r.exchangeTokenPromise||(r.exchangeTokenPromise=eie(WVe(n,await nie()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await N7(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Ss(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?CC.warn(u.message):CC.error(u),s=u}let a;return i?s?gb(i)?a={token:i.token,internalError:s}:a=j_e(s):(a={token:i.token},r.token=i,await N7(n,i)):a=j_e(s),o&&eHe(n,a),a}async function D_n(e){const t=e.app;Zre(t);const{provider:n}=Ss(t);if(tie()){const r=await nie(),{token:i}=await eie(WVe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function JVe(e,t,n,r){const{app:i}=e,s=Ss(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&gb(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),B_e(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>B_e(e))}function ZVe(e,t){const n=Ss(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function B_e(e){const{app:t}=e,n=Ss(t);let r=n.tokenRefresher;r||(r=L_n(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function L_n(e){const{app:t}=e;return new b_n(async()=>{const n=Ss(t);let r;if(n.token?r=await xW(e,!0):r=await xW(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ss(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},M_e.RETRIAL_MIN_WAIT,M_e.RETRIAL_MAX_WAIT)}function eHe(e,t){const n=Ss(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function gb(e){return e.expireTimeMillis-Date.now()>0}function j_e(e){return{token:N_n(R_n),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_n{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Ss(this.app);for(const n of t)ZVe(this.app,n.next);return Promise.resolve()}}function F_n(e,t){return new M_n(e,t)}function B_n(e){return{getToken:t=>xW(e,t),getLimitedUseToken:()=>D_n(e),addTokenListener:t=>JVe(e,"INTERNAL",t),removeTokenListener:t=>ZVe(e.app,t)}}const j_n="@firebase/app-check",z_n="0.8.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_n="https://www.google.com/recaptcha/api.js";function V_n(e,t){const n=new oC,r=Ss(e);r.reCAPTCHAState={initialized:n};const i=H_n(e),s=F_e(!1);return s?z_e(e,t,s,i,n):G_n(()=>{const o=F_e(!1);if(!o)throw new Error("no recaptcha");z_e(e,t,o,i,n)}),n.promise}function z_e(e,t,n,r,i){n.ready(()=>{W_n(e,t,n,r),i.resolve(n)})}function H_n(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function q_n(e){Zre(e);const n=await Ss(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Ss(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function W_n(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Ss(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Ss(e).reCAPTCHAState.succeeded=!1}}),s=Ss(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function G_n(e){const t=document.createElement("script");t.src=U_n,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rie{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;K_n(this._throttleData);const i=await q_n(this._app).catch(o=>{throw ou.create("recaptcha-error")});if(!(!((t=Ss(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw ou.create("recaptcha-error");let s;try{s=await eie(x_n(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=Y_n(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),ou.create("throttled",{time:qVe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=Ex(t,"heartbeat"),V_n(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof rie?this._siteKey===t._siteKey:!1}}function Y_n(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+__n,httpStatus:e};{const n=t?t.backoffCount:0,r=Dpn(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function K_n(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw ou.create("throttled",{time:qVe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_n(e=Une(),t){e=xo(e);const n=Ex(e,"app-check");if(c8().initialized||$_n(),tie()&&nie().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw ou.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return Q_n(e,t.provider,t.isTokenAutoRefreshEnabled),Ss(e).isTokenAutoRefreshEnabled&&JVe(r,"INTERNAL",()=>{}),r}function Q_n(e,t,n){const r=g_n(e,Object.assign({},VVe));r.activated=!0,r.provider=t,r.cachedTokenPromise=P_n(e).then(i=>(i&&gb(i)&&(r.token=i,eHe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const J_n="app-check",U_e="app-check-internal";function Z_n(){zp(new eh(J_n,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return F_n(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(U_e).initialize()})),zp(new eh(U_e,e=>{const t=e.getProvider("app-check").getImmediate();return B_n(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),of(j_n,z_n)}Z_n();function tHe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ebn=tHe,nHe=new wx("auth","Firebase",tHe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=new M5("@firebase/auth");function tbn(e,...t){gM.logLevel<=Fn.WARN&&gM.warn(`Auth (${Zv}): ${e}`,...t)}function W$(e,...t){gM.logLevel<=Fn.ERROR&&gM.error(`Auth (${Zv}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(e,...t){throw iie(e,...t)}function Ld(e,...t){return iie(e,...t)}function rHe(e,t,n){const r=Object.assign(Object.assign({},ebn()),{[t]:n});return new wx("auth","Firebase",r).create(t,{appName:e.name})}function Mg(e){return rHe(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iie(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return nHe.create(e,...t)}function Yt(e,t,...n){if(!e)throw iie(t,...n)}function np(e){const t="INTERNAL ASSERTION FAILED: "+e;throw W$(t),new Error(t)}function qp(e,t){e||np(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SW(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function nbn(){return V_e()==="http:"||V_e()==="https:"}function V_e(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rbn(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nbn()||vpn()||"connection"in navigator)?navigator.onLine:!0}function ibn(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(t,n){this.shortDelay=t,this.longDelay=n,qp(n>t,"Short delay should be less than long delay!"),this.isMobile=gpn()||_pn()}get(){return rbn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sie(e,t){qp(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iHe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;np("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;np("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;np("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sbn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const obn=new xO(3e4,6e4);function f8(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Px(e,t,n,r,i={}){return sHe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=oO(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),iHe.fetch()(aHe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function sHe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},sbn),t);try{const i=new abn(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ck(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ck(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ck(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ck(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw rHe(e,c,l);Hp(e,c)}}catch(i){if(i instanceof _h)throw i;Hp(e,"network-request-failed",{message:String(i)})}}async function oHe(e,t,n,r,i={}){const s=await Px(e,t,n,r,i);return"mfaPendingCredential"in s&&Hp(e,"multi-factor-auth-required",{_serverResponse:s}),s}function aHe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?sie(e.config,i):`${e.config.apiScheme}://${i}`}class abn{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ld(this.auth,"network-request-failed")),obn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ck(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ld(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ubn(e,t){return Px(e,"POST","/v1/accounts:delete",t)}async function uHe(e,t){return Px(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function lbn(e,t=!1){const n=xo(e),r=await n.getIdToken(t),i=oie(r);Yt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:D2(D7(i.auth_time)),issuedAtTime:D2(D7(i.iat)),expirationTime:D2(D7(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function D7(e){return Number(e)*1e3}function oie(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return W$("JWT malformed, contained fewer than 3 sections"),null;try{const i=Y7e(n);return i?JSON.parse(i):(W$("Failed to decode base64 JWT payload"),null)}catch(i){return W$("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function H_e(e){const t=oie(e);return Yt(t,"internal-error"),Yt(typeof t.exp<"u","internal-error"),Yt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof _h&&cbn(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function cbn({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fbn{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=D2(this.lastLoginAt),this.creationTime=D2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yM(e){var t;const n=e.auth,r=await e.getIdToken(),i=await IC(e,uHe(n,{idToken:r}));Yt(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?lHe(s.providerUserInfo):[],a=hbn(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new TW(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function dbn(e){const t=xo(e);await yM(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function hbn(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function lHe(e){return e.map(t=>{var{providerId:n}=t,r=AK(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pbn(e,t){const n=await sHe(e,{},async()=>{const r=oO({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=aHe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",iHe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mbn(e,t){return Px(e,"POST","/v2/accounts:revokeToken",f8(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Yt(t.idToken,"internal-error"),Yt(typeof t.idToken<"u","internal-error"),Yt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):H_e(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Yt(t.length!==0,"internal-error");const n=H_e(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Yt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await pbn(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new tw;return r&&(Yt(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Yt(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(Yt(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new tw,this.toJSON())}_performRefresh(){return np("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(e,t){Yt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class rp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=AK(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fbn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new TW(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await IC(this,this.stsTokenManager.getToken(this.auth,t));return Yt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return lbn(this,t)}reload(){return dbn(this)}_assign(t){this!==t&&(Yt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new rp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await yM(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ep(this.auth.app))return Promise.reject(Mg(this.auth));const t=await this.getIdToken();return await IC(this,ubn(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:b,isAnonymous:E,providerData:w,stsTokenManager:x}=n;Yt(_&&x,t,"internal-error");const S=tw.fromJSON(this.name,x);Yt(typeof _=="string",t,"internal-error"),_m(f,t.name),_m(d,t.name),Yt(typeof b=="boolean",t,"internal-error"),Yt(typeof E=="boolean",t,"internal-error"),_m(h,t.name),_m(p,t.name),_m(m,t.name),_m(g,t.name),_m(y,t.name),_m(v,t.name);const I=new rp({uid:_,auth:t,email:d,emailVerified:b,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:S,createdAt:y,lastLoginAt:v});return w&&Array.isArray(w)&&(I.providerData=w.map(C=>Object.assign({},C))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(t,n,r=!1){const i=new tw;i.updateFromServerResponse(n);const s=new rp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await yM(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Yt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?lHe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new tw;a.updateFromIdToken(r);const u=new rp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new TW(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_e=new Map;function ip(e){qp(e instanceof Function,"Expected a class definition");let t=q_e.get(e);return t?(qp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,q_e.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cHe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}cHe.type="NONE";const W_e=cHe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(e,t,n){return`firebase:${e}:${t}:${n}`}class nw{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=G$(this.userKey,i.apiKey,s),this.fullPersistenceKey=G$("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?rp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new nw(ip(W_e),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||ip(W_e);const o=G$(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=rp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new nw(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new nw(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_e(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(hHe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(fHe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(mHe(t))return"Blackberry";if(gHe(t))return"Webos";if(aie(t))return"Safari";if((t.includes("chrome/")||dHe(t))&&!t.includes("edge/"))return"Chrome";if(pHe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function fHe(e=as()){return/firefox\//i.test(e)}function aie(e=as()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function dHe(e=as()){return/crios\//i.test(e)}function hHe(e=as()){return/iemobile/i.test(e)}function pHe(e=as()){return/android/i.test(e)}function mHe(e=as()){return/blackberry/i.test(e)}function gHe(e=as()){return/webos/i.test(e)}function d8(e=as()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function gbn(e=as()){var t;return d8(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function ybn(){return bpn()&&document.documentMode===10}function yHe(e=as()){return d8(e)||pHe(e)||gHe(e)||mHe(e)||/windows phone/i.test(e)||hHe(e)}function vbn(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vHe(e,t=[]){let n;switch(e){case"Browser":n=G_e(as());break;case"Worker":n=`${G_e(as())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zv}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _bn{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bbn(e,t={}){return Px(e,"GET","/v2/passwordPolicy",f8(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wbn=6;class Ebn{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:wbn,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xbn{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y_e(this),this.idTokenSubscription=new Y_e(this),this.beforeStateQueue=new _bn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nHe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ip(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await nw.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await uHe(this,{idToken:t}),r=await rp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(ep(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await yM(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=ibn()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ep(this.app))return Promise.reject(Mg(this));const n=t?xo(t):null;return n&&Yt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Yt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ep(this.app)?Promise.reject(Mg(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ep(this.app)?Promise.reject(Mg(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ip(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await bbn(this),n=new Ebn(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new wx("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await mbn(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&ip(t)||this._popupRedirectResolver;Yt(n,this,"argument-error"),this.redirectPersistenceManager=await nw.create(this,[ip(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Yt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=vHe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&tbn(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function h8(e){return xo(e)}class Y_e{constructor(t){this.auth=t,this.observer=null,this.addObserver=Cpn(n=>this.observer=n)}get next(){return Yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uie={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Sbn(e){uie=e}function Tbn(e){return uie.loadJS(e)}function Abn(){return uie.gapiScript}function Cbn(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ibn(e,t){const n=Ex(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(aC(s,t??{}))return i;Hp(i,"already-initialized")}return n.initialize({options:t})}function Obn(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ip);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function Pbn(e,t,n){const r=h8(e);Yt(r._canInitEmulator,r,"emulator-config-failed"),Yt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=_He(t),{host:o,port:a}=kbn(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||$bn()}function _He(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function kbn(e){const t=_He(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:K_e(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:K_e(o)}}}function K_e(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function $bn(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bHe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return np("not implemented")}_getIdTokenResponse(t){return np("not implemented")}_linkToIdToken(t,n){return np("not implemented")}_getReauthenticationResolver(t){return np("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rw(e,t){return oHe(e,"POST","/v1/accounts:signInWithIdp",f8(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rbn="http://localhost";class vv extends bHe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new vv(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Hp("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=AK(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new vv(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return rw(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,rw(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,rw(t,n)}buildRequest(){const t={requestUri:Rbn,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=oO(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wHe{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO extends wHe{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm extends SO{constructor(){super("facebook.com")}static credential(t){return vv._fromParams({providerId:Vm.PROVIDER_ID,signInMethod:Vm.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vm.credentialFromTaggedObject(t)}static credentialFromError(t){return Vm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Vm.credential(t.oauthAccessToken)}catch{return null}}}Vm.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vm.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm extends SO{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return vv._fromParams({providerId:Hm.PROVIDER_ID,signInMethod:Hm.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Hm.credentialFromTaggedObject(t)}static credentialFromError(t){return Hm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Hm.credential(n,r)}catch{return null}}}Hm.GOOGLE_SIGN_IN_METHOD="google.com";Hm.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm extends SO{constructor(){super("github.com")}static credential(t){return vv._fromParams({providerId:qm.PROVIDER_ID,signInMethod:qm.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qm.credentialFromTaggedObject(t)}static credentialFromError(t){return qm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qm.credential(t.oauthAccessToken)}catch{return null}}}qm.GITHUB_SIGN_IN_METHOD="github.com";qm.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm extends SO{constructor(){super("twitter.com")}static credential(t,n){return vv._fromParams({providerId:Wm.PROVIDER_ID,signInMethod:Wm.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Wm.credentialFromTaggedObject(t)}static credentialFromError(t){return Wm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Wm.credential(n,r)}catch{return null}}}Wm.TWITTER_SIGN_IN_METHOD="twitter.com";Wm.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nbn(e,t){return oHe(e,"POST","/v1/accounts:signUp",f8(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await rp._fromIdTokenResponse(t,r,i),o=X_e(r);return new E0({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=X_e(r);return new E0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function X_e(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dbn(e){var t;if(ep(e.app))return Promise.reject(Mg(e));const n=h8(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new E0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Nbn(n,{returnSecureToken:!0}),i=await E0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM extends _h{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,vM.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new vM(t,n,r,i)}}function EHe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?vM._fromErrorAndOperation(e,s,t,r):s})}async function Lbn(e,t,n=!1){const r=await IC(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return E0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mbn(e,t,n=!1){const{auth:r}=e;if(ep(r.app))return Promise.reject(Mg(r));const i="reauthenticate";try{const s=await IC(e,EHe(r,i,t,e),n);Yt(s.idToken,r,"internal-error");const o=oie(s.idToken);Yt(o,r,"internal-error");const{sub:a}=o;return Yt(e.uid===a,r,"user-mismatch"),E0._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Hp(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fbn(e,t,n=!1){if(ep(e.app))return Promise.reject(Mg(e));const r="signIn",i=await EHe(e,r,t),s=await E0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Bbn(e,t,n,r){return xo(e).onIdTokenChanged(t,n,r)}function jbn(e,t,n){return xo(e).beforeAuthStateChanged(t,n)}const _M="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xHe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_M,"1"),this.storage.removeItem(_M),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zbn(){const e=as();return aie(e)||d8(e)}const Ubn=1e3,Vbn=10;class SHe extends xHe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=zbn()&&vbn(),this.fallbackToPolling=yHe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);ybn()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Vbn):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Ubn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}SHe.type="LOCAL";const Hbn=SHe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class THe extends xHe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}THe.type="SESSION";const AHe=THe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qbn(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new p8(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await qbn(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}p8.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lie(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wbn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=lie("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(){return window}function Gbn(e){Md().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CHe(){return typeof Md().WorkerGlobalScope<"u"&&typeof Md().importScripts=="function"}async function Ybn(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Kbn(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Xbn(){return CHe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IHe="firebaseLocalStorageDb",Qbn=1,bM="firebaseLocalStorage",OHe="fbase_key";class TO{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function m8(e,t){return e.transaction([bM],t?"readwrite":"readonly").objectStore(bM)}function Jbn(){const e=indexedDB.deleteDatabase(IHe);return new TO(e).toPromise()}function AW(){const e=indexedDB.open(IHe,Qbn);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(bM,{keyPath:OHe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(bM)?t(r):(r.close(),await Jbn(),t(await AW()))})})}async function Q_e(e,t,n){const r=m8(e,!0).put({[OHe]:t,value:n});return new TO(r).toPromise()}async function Zbn(e,t){const n=m8(e,!1).get(t),r=await new TO(n).toPromise();return r===void 0?null:r.value}function J_e(e,t){const n=m8(e,!0).delete(t);return new TO(n).toPromise()}const ewn=800,twn=3;class PHe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await AW(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>twn)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CHe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=p8._getInstance(Xbn()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Ybn(),!this.activeServiceWorker)return;this.sender=new Wbn(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Kbn()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await AW();return await Q_e(t,_M,"1"),await J_e(t,_M),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Q_e(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>Zbn(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>J_e(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=m8(i,!1).getAll();return new TO(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ewn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PHe.type="LOCAL";const nwn=PHe;new xO(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rwn(e,t){return t?ip(t):(Yt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cie extends bHe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return rw(t,this._buildIdpRequest())}_linkToIdToken(t,n){return rw(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return rw(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function iwn(e){return Fbn(e.auth,new cie(e),e.bypassAuthState)}function swn(e){const{auth:t,user:n}=e;return Yt(n,t,"internal-error"),Mbn(n,new cie(e),e.bypassAuthState)}async function own(e){const{auth:t,user:n}=e;return Yt(n,t,"internal-error"),Lbn(n,new cie(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kHe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return iwn;case"linkViaPopup":case"linkViaRedirect":return own;case"reauthViaPopup":case"reauthViaRedirect":return swn;default:Hp(this.auth,"internal-error")}}resolve(t){qp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){qp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const awn=new xO(2e3,1e4);class yb extends kHe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,yb.currentPopupAction&&yb.currentPopupAction.cancel(),yb.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Yt(t,this.auth,"internal-error"),t}async onExecution(){qp(this.filter.length===1,"Popup operations only handle one event");const t=lie();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ld(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ld(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yb.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ld(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,awn.get())};t()}}yb.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uwn="pendingRedirect",Y$=new Map;class lwn extends kHe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=Y$.get(this.auth._key());if(!t){try{const r=await cwn(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Y$.set(this.auth._key(),t)}return this.bypassAuthState||Y$.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cwn(e,t){const n=hwn(t),r=dwn(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function fwn(e,t){Y$.set(e._key(),t)}function dwn(e){return ip(e._redirectPersistence)}function hwn(e){return G$(uwn,e.config.apiKey,e.name)}async function pwn(e,t,n=!1){if(ep(e.app))return Promise.reject(Mg(e));const r=h8(e),i=rwn(r,t),o=await new lwn(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mwn=10*60*1e3;class gwn{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!ywn(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!$He(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ld(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=mwn&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z_e(t))}saveEventToCache(t){this.cachedEventUids.add(Z_e(t)),this.lastProcessedEventTime=Date.now()}}function Z_e(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function $He({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function ywn(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $He(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vwn(e,t={}){return Px(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _wn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bwn=/^https?/;async function wwn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await vwn(e);for(const n of t)try{if(Ewn(n))return}catch{}Hp(e,"unauthorized-domain")}function Ewn(e){const t=SW(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!bwn.test(n))return!1;if(_wn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xwn=new xO(3e4,6e4);function ebe(){const e=Md().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Swn(e){return new Promise((t,n)=>{var r,i,s;function o(){ebe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ebe(),n(Ld(e,"network-request-failed"))},timeout:xwn.get()})}if(!((i=(r=Md().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Md().gapi)===null||s===void 0)&&s.load)o();else{const a=Cbn("iframefcb");return Md()[a]=()=>{gapi.load?o():n(Ld(e,"network-request-failed"))},Tbn(`${Abn()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw K$=null,t})}let K$=null;function Twn(e){return K$=K$||Swn(e),K$}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Awn=new xO(5e3,15e3),Cwn="__/auth/iframe",Iwn="emulator/auth/iframe",Own={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pwn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kwn(e){const t=e.config;Yt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?sie(t,Iwn):`https://${e.config.authDomain}/${Cwn}`,r={apiKey:t.apiKey,appName:e.name,v:Zv},i=Pwn.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${oO(r).slice(1)}`}async function $wn(e){const t=await Twn(e),n=Md().gapi;return Yt(n,e,"internal-error"),t.open({where:document.body,url:kwn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Own,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ld(e,"network-request-failed"),a=Md().setTimeout(()=>{s(o)},Awn.get());function u(){Md().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rwn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nwn=500,Dwn=600,Lwn="_blank",Mwn="http://localhost";class tbe{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Fwn(e,t,n,r=Nwn,i=Dwn){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Rwn),{width:r.toString(),height:i.toString(),top:s,left:o}),l=as().toLowerCase();n&&(a=dHe(l)?Lwn:n),fHe(l)&&(t=t||Mwn,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(gbn(l)&&a!=="_self")return Bwn(t||"",a),new tbe(null);const f=window.open(t||"",a,c);Yt(f,e,"popup-blocked");try{f.focus()}catch{}return new tbe(f)}function Bwn(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jwn="__/auth/handler",zwn="emulator/auth/handler",Uwn=encodeURIComponent("fac");async function nbe(e,t,n,r,i,s){Yt(e.config.authDomain,e,"auth-domain-config-required"),Yt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Zv,eventId:i};if(t instanceof wHe){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Apn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries(s||{}))o[c]=f}if(t instanceof SO){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${Uwn}=${encodeURIComponent(u)}`:"";return`${Vwn(e)}?${oO(a).slice(1)}${l}`}function Vwn({config:e}){return e.emulator?sie(e,zwn):`https://${e.authDomain}/${jwn}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7="webStorageSupport";class Hwn{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AHe,this._completeRedirectFn=pwn,this._overrideRedirectResult=fwn}async _openPopup(t,n,r,i){var s;qp((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await nbe(t,n,r,SW(),i);return Fwn(t,o,lie())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await nbe(t,n,r,SW(),i);return Gbn(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(qp(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await $wn(t),r=new gwn(t);return n.register("authEvent",i=>(Yt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(L7,{type:L7},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[L7];o!==void 0&&n(!!o),Hp(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wwn(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return yHe()||aie()||d8()}}const qwn=Hwn;var rbe="@firebase/auth",ibe="1.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wwn{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gwn(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ywn(e){zp(new eh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Yt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vHe(e)},l=new xbn(r,i,s,u);return Obn(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),zp(new eh("auth-internal",t=>{const n=h8(t.getProvider("auth").getImmediate());return(r=>new Wwn(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),of(rbe,ibe,Gwn(e)),of(rbe,ibe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kwn=5*60,Xwn=J7e("authIdTokenMaxAge")||Kwn;let sbe=null;const Qwn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Xwn)return;const i=n==null?void 0:n.token;sbe!==i&&(sbe=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Jwn(e=Une()){const t=Ex(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Ibn(e,{popupRedirectResolver:qwn,persistence:[nwn,Hbn,AHe]}),r=J7e("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Qwn(s.toString());jbn(n,o,()=>o(n.currentUser)),Bbn(n,a=>o(a))}}const i=X7e("auth");return i&&Pbn(n,`http://${i}`),n}function Zwn(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Sbn({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Ld("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Zwn().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ywn("Browser");class eEn extends W7e{constructor(){super("firebase");Ru(this,"RECAPTCHAV3TOKEN","6Lfx1s8pAAAAAKHzoPSkS8d0ymQ_vYEUT_pEOiI5");Ru(this,"firestore");Ru(this,"collectionPrefix","prod-");Ru(this,"studyCollection");Ru(this,"studyId","");Ru(this,"localForage",q7e.createInstance({name:"currentParticipantId"}));Ru(this,"localProvenanceCopy",{});Ru(this,"localWindowEvents",{});const n=nQ.parse(`{
  apiKey: "AIzaSyCQbVdt7ukhoMAo24NxUQ1OmDa5Ac4QTSs",
  authDomain: "surprise-map-study.firebaseapp.com",
  projectId: "surprise-map-study",
  storageBucket: "surprise-map-study.appspot.com",
  messagingSenderId: "890386592000",
  appId: "1:890386592000:web:8e0fcca9953eb65a5e83e5",
  measurementId: "G-3772F59Q1J"
}`),r=tze(n);this.firestore=Yvn(r,{});try{X_n(r,{provider:new rie(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{const n=Jwn();if(await Dbn(n),!n.currentUser)throw new Error("Login failed with firebase");await Kvn(this.firestore);const r=await Lf(this.firestore,".info/connected");await Sk(r),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){const i=await Qb(JSON.stringify(r));this.studyCollection=R7(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=Lf(this.studyCollection,"configs"),o=R7(s,"configs"),a=Lf(o,i);return await jS(a,r)}async initializeParticipantSession(n,r,i){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(i),!this.currentParticipantId)throw new Error("Participant not initialized");const s=Lf(this.studyCollection,this.currentParticipantId),o=(await Sk(s)).data();if(this.localProvenanceCopy=await this._getFromFirebaseStorage(this.currentParticipantId,"provenance"),this.localWindowEvents=await this._getFromFirebaseStorage(this.currentParticipantId,"windowEvents"),Object.entries(this.localWindowEvents).forEach(([l,c])=>{o!==null&&(c===void 0||c.length===0?o.answers[l].windowEvents=[]:o.answers[l].windowEvents=c)}),o)return o;const a=await Qb(JSON.stringify(r)),u={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n};return await jS(s,u),u}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=Lf(this.studyCollection);return this.currentParticipantId=i.id,await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=Lf(this.studyCollection,this.currentParticipantId),s={answer:r.answer,startTime:r.startTime,endTime:r.endTime};await jS(i,{answers:{[n]:s}},{merge:!0}),r.provenanceGraph&&(this.localProvenanceCopy[n]=r.provenanceGraph,await this._pushToFirebaseStorage(this.currentParticipantId,"provenance",this.localProvenanceCopy)),this.localWindowEvents[n]=r.windowEvents,await this._pushToFirebaseStorage(this.currentParticipantId,"windowEvents",this.localWindowEvents)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");this._pushToFirebaseStorage("","sequenceArray",{sequenceArray:n})}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return(await this._getFromFirebaseStorage("","sequenceArray")).sequenceArray}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=Lf(this.studyCollection,"sequenceAssignment"),i=R7(r,"sequenceAssignment"),s=Lf(i,this.currentParticipantId);await jS(s,{participantId:this.currentParticipantId,timestamp:p_n()});const o=o_n(i,a_n("timestamp","asc")),l=(await L_e(o)).docs.map(f=>f.data()).findIndex(f=>f.participantId===this.currentParticipantId),c=n[l%n.length];if(!c)throw new Error("Latin square is empty");return c}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await L_e(this.studyCollection),r=[],i=n.docs.map(async s=>{if(s.id==="config"||s.id==="sequenceArray")return;const o=s.data(),a=await this._getFromFirebaseStorage(o.participantId,"provenance"),u=await this._getFromFirebaseStorage(o.participantId,"windowEvents");o.answers=Object.fromEntries(Object.entries(o.answers).map(([l,c])=>{if(c===void 0)return[l,c];const f=a[l],d=u[l];return[l,{...c,provenanceGraph:f,windowEvents:d}]})),r.push(o)});return await Promise.all(i),r}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this.getCurrentParticipantId();let n=null;if(this.currentParticipantId!==null){const r=Lf(this.studyCollection,this.currentParticipantId);if(n=(await Sk(r)).data(),n!==null){const i=await this._getFromFirebaseStorage(this.currentParticipantId,"provenance"),s=await this._getFromFirebaseStorage(this.currentParticipantId,"windowEvents");Object.entries(n.answers).forEach(([o,a])=>{a!==void 0&&(a.provenanceGraph=i[o],a.windowEvents=s[o])})}}return n}async nextParticipant(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=Lf(this.studyCollection),i=r.id;await this.localForage.setItem("currentParticipantId",i),this.currentParticipantId=i;let s=null;if(this.currentParticipantId!==null&&(s=(await Sk(r)).data()),!s){const o=await Qb(JSON.stringify(n)),a={participantId:i,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:{}};await jS(r,a),s=a}return s}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return qg(n.sequence).every((i,s)=>i==="end"?!0:n.answers[`${i}_${s}`]!==void 0)}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Mve(),s=Lve(i,`${this.studyId}/${n}_${r}`);let o={};try{const a=await Qgn(s),l=await(await fetch(a)).text();o=JSON.parse(l)}catch{console.warn(`${n} does not have ${r} for ${this.studyId}.`)}return o}async _pushToFirebaseStorage(n,r,i={}){if(Object.keys(i).length>0){const s=Mve(),o=Lve(s,`${this.studyId}/${n}_${r}`),a=new Blob([JSON.stringify(i)],{type:"application/json"});await Xgn(o,a)}}}async function RHe(){let e,t=!1;{const n=new eEn;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new apn;await n.connect(),e=n}return e}function tEn(e){const{globalConfig:t}=e,[n,r]=A.useState(!1),[i,s]=A.useState({}),[o,a]=A.useState({});return A.useEffect(()=>{(async()=>{r(!0);const l={},c={},f=async h=>{const p=await RHe(),m=await V3e(h,t);m!==null&&(await p.initializeStudyDb(h,m),l[h]=await p.getAllParticipantsData(),c[h]=m)};await(async()=>{const h=t.configsList.map(p=>f(p));try{await Promise.all(h),s(l),a(c)}catch(p){console.error("Error fetching data:",p)}finally{r(!1)}})()})()},[]),R.jsxs(At,{children:[R.jsx(Lc,{mb:20,order:4,children:"Your Studies:"}),R.jsxs(Gu,{children:[t.configsList.map(u=>i[u]&&R.jsx(Gu.Col,{md:12,xl:6,children:R.jsx(tpn,{studyId:u,allParticipants:i[u],config:o[u]})},`${u}-panel`)),R.jsx(G2e,{visible:n,zIndex:1e3,overlayBlur:2})]})]})}function nEn(e){const{page:t}=jM();return R.jsxs(FG,{children:[R.jsx(r8t,{}),R.jsx(i8t,{}),t==="dashboard"&&R.jsx(u6,{fluid:!0,children:R.jsx(tEn,{globalConfig:e.globalConfig})})]})}async function rEn(){const t=await(await fetch(`${vf}global.json`)).text();return D5t(t)}async function iEn(e){const t={},n=e.configsList.map(i=>`${vf}${e.configs[i].path}`),r=await Promise.all(n.map(i=>fetch(i))).then(i=>Promise.all(i.map(s=>s.text()))).then(i=>Promise.all(i.map((s,o)=>N3e(s,e.configsList[o]))));return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function sEn(){const[e,t]=A.useState(null),[n,r]=A.useState({});return A.useEffect(()=>{async function i(){e&&r(await iEn(e))}i()},[e]),A.useEffect(()=>{e||rEn().then(i=>{t(i)})},[e]),e?R.jsx(mYe,{basename:vf,children:R.jsxs(hYe,{children:[R.jsx(jk,{path:"/",element:R.jsx(Tdt,{globalConfig:e,studyConfigs:n})}),R.jsx(jk,{path:"/:studyId/*",element:R.jsx(n8t,{globalConfig:e})}),R.jsx(jk,{path:"/analysis/:page",element:R.jsx(nEn,{globalConfig:e})})]})}):null}function oEn(){const{storageEngine:e,setStorageEngine:t}=A0();return A.useEffect(()=>{if(e!==void 0)return;async function n(){const r=await RHe();t(r)}n()},[t,e]),R.jsx(sEn,{})}M7.createRoot(document.getElementById("root")).render(R.jsx(L.StrictMode,{children:R.jsx(mGe,{children:R.jsx(oEn,{})})}))});export default aEn();
